const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CTGodKHA.js","./index-CPGGfR3y.js","./index-CeUuNms1.js","./index-CLtmwBJx.js","./index-C6nW8a4U.js","./index-DPphf5nH.js","./index-Bo0MImWA.js","./index-CH9-IcPN.js","./index-DrGBlYiR.js","./index-Cao8ebns.js","./index-2FKH0Tji.js","./index-ISozEGWD.js","./index-CBpidYoR.js","./index-B58FU5IX.js","./index-B8boj1dE.js","./index-Nw-PdQlq.js","./index-BXagFtRn.js","./index-CrZjHgwS.js","./index-DVeEyKdi.js","./dockerfile-BuNIbK2j.js","./simple-mode-C4Nsj8zu.js","./factor-D8pE9siL.js","./nsis-CEAdamBV.js","./pug-BmUsPMDj.js","./javascript-iSgyE4tI.js","./index-CZ4O5grf.js","./index-3TZP2I1b.js"])))=>i.map(i=>d[i]);
var yr=Object.defineProperty;var vr=(Ut,o,e)=>o in Ut?yr(Ut,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):Ut[o]=e;var Ht=(Ut,o,e)=>vr(Ut,typeof o!="symbol"?o+"":o,e);let languageDataProp,foldService,CompletionContext,LanguageDescription,EditorView,ParseContext,bracketMatchingHandle,DefaultBufferLength,IterMode,sublanguageProp,LRLanguage,NodeWeakMap,Parser$1,Tag,LanguageSupport,ifNotIn,continuedIndent,completeFromList,syntaxTree,foldNodeProp,flatIndent,delimitedIndent,indentNodeProp,foldInside,snippetCompletion,EditorSelection,NodeType,NodeProp,NodeSet,parseMixed,Tree,countColumn,styleTags,tags,Prec,keymap,EditorState,Language,indentUnit,defineLanguageFacet,__tla=(async()=>{(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();function makeMap(o){const e=Object.create(null);for(const n of o.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ=Object.freeze({}),EMPTY_ARR=Object.freeze([]),NOOP=()=>{},NO=()=>!1,isOn=o=>o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&(o.charCodeAt(2)>122||o.charCodeAt(2)<97),isModelListener=o=>o.startsWith("onUpdate:"),extend$1=Object.assign,remove$1=(o,e)=>{const n=o.indexOf(e);n>-1&&o.splice(n,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$1=(o,e)=>hasOwnProperty$3.call(o,e),isArray$3=Array.isArray,isMap=o=>toTypeString$1(o)==="[object Map]",isSet=o=>toTypeString$1(o)==="[object Set]",isDate$2=o=>toTypeString$1(o)==="[object Date]",isFunction$2=o=>typeof o=="function",isString$2=o=>typeof o=="string",isSymbol=o=>typeof o=="symbol",isObject$3=o=>o!==null&&typeof o=="object",isPromise$1=o=>(isObject$3(o)||isFunction$2(o))&&isFunction$2(o.then)&&isFunction$2(o.catch),objectToString$1=Object.prototype.toString,toTypeString$1=o=>objectToString$1.call(o),toRawType=o=>toTypeString$1(o).slice(8,-1),isPlainObject$2=o=>toTypeString$1(o)==="[object Object]",isIntegerKey=o=>isString$2(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction=o=>{const e=Object.create(null);return n=>e[n]||(e[n]=o(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(o=>o.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate$1=cacheStringFunction(o=>o.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(o=>o.charAt(0).toUpperCase()+o.slice(1)),toHandlerKey=cacheStringFunction(o=>o?`on${capitalize$1(o)}`:""),hasChanged=(o,e)=>!Object.is(o,e),invokeArrayFns=(o,...e)=>{for(let n=0;n<o.length;n++)o[n](...e)},def=(o,e,n,a=!1)=>{Object.defineProperty(o,e,{configurable:!0,enumerable:!1,writable:a,value:n})},looseToNumber=o=>{const e=parseFloat(o);return isNaN(e)?o:e},toNumber=o=>{const e=isString$2(o)?Number(o):NaN;return isNaN(e)?o:e};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(o){if(isArray$3(o)){const e={};for(let n=0;n<o.length;n++){const a=o[n],s=isString$2(a)?parseStringStyle(a):normalizeStyle(a);if(s)for(const l in s)e[l]=s[l]}return e}else if(isString$2(o)||isObject$3(o))return o}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(o){const e={};return o.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const a=n.split(propertyDelimiterRE);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function normalizeClass(o){let e="";if(isString$2(o))e=o;else if(isArray$3(o))for(let n=0;n<o.length;n++){const a=normalizeClass(o[n]);a&&(e+=a+" ")}else if(isObject$3(o))for(const n in o)o[n]&&(e+=n+" ");return e.trim()}function normalizeProps(o){if(!o)return null;let{class:e,style:n}=o;return e&&!isString$2(e)&&(o.class=normalizeClass(e)),n&&(o.style=normalizeStyle(n)),o}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",MATH_TAGS="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isMathMLTag=makeMap(MATH_TAGS),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(o){return!!o||o===""}function looseCompareArrays(o,e){if(o.length!==e.length)return!1;let n=!0;for(let a=0;n&&a<o.length;a++)n=looseEqual(o[a],e[a]);return n}function looseEqual(o,e){if(o===e)return!0;let n=isDate$2(o),a=isDate$2(e);if(n||a)return n&&a?o.getTime()===e.getTime():!1;if(n=isSymbol(o),a=isSymbol(e),n||a)return o===e;if(n=isArray$3(o),a=isArray$3(e),n||a)return n&&a?looseCompareArrays(o,e):!1;if(n=isObject$3(o),a=isObject$3(e),n||a){if(!n||!a)return!1;const s=Object.keys(o).length,l=Object.keys(e).length;if(s!==l)return!1;for(const c in o){const d=o.hasOwnProperty(c),u=e.hasOwnProperty(c);if(d&&!u||!d&&u||!looseEqual(o[c],e[c]))return!1}}return String(o)===String(e)}function looseIndexOf(o,e){return o.findIndex(n=>looseEqual(n,e))}const isRef$1=o=>!!(o&&o.__v_isRef===!0),toDisplayString$1=o=>isString$2(o)?o:o==null?"":isArray$3(o)||isObject$3(o)&&(o.toString===objectToString$1||!isFunction$2(o.toString))?isRef$1(o)?toDisplayString$1(o.value):JSON.stringify(o,replacer,2):String(o),replacer=(o,e)=>isRef$1(e)?replacer(o,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,s],l)=>(n[stringifySymbol(a,l)+" =>"]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject$3(e)&&!isArray$3(e)&&!isPlainObject$2(e)?String(e):e,stringifySymbol=(o,e="")=>{var n;return isSymbol(o)?`Symbol(${(n=o.description)!=null?n:e})`:o};function warn$3(o,...e){console.warn(`[Vue warn] ${o}`,...e)}let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}else warn$3("cannot run an inactive effect scope.")}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function effectScope(o){return new EffectScope(o)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(o,e=!1){activeEffectScope?activeEffectScope.cleanups.push(o):e||warn$3("onScopeDispose() is called when there is no active effect scope to be associated with.")}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{activeSub!==this&&warn$3("Active effect was not restored correctly - this is likely a Vue internal bug."),cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty$1(this)&&this.run()}get dirty(){return isDirty$1(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(o,e=!1){if(o.flags|=8,e){o.next=batchedComputed,batchedComputed=o;return}o.next=batchedSub,batchedSub=o}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let o;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(a){o||(o=a)}e=n}}if(o)throw o}function prepareDeps(o){for(let e=o.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(o){let e,n=o.depsTail,a=n;for(;a;){const s=a.prevDep;a.version===-1?(a===n&&(n=s),removeSub(a),removeDep(a)):e=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}o.deps=e,o.depsTail=n}function isDirty$1(o){for(let e=o.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!o._dirty}function refreshComputed(o){if(o.flags&4&&!(o.flags&16)||(o.flags&=-17,o.globalVersion===globalVersion))return;o.globalVersion=globalVersion;const e=o.dep;if(o.flags|=2,e.version>0&&!o.isSSR&&o.deps&&!isDirty$1(o)){o.flags&=-3;return}const n=activeSub,a=shouldTrack;activeSub=o,shouldTrack=!0;try{prepareDeps(o);const s=o.fn(o._value);(e.version===0||hasChanged(s,o._value))&&(o._value=s,e.version++)}catch(s){throw e.version++,s}finally{activeSub=n,shouldTrack=a,cleanupDeps(o),o.flags&=-3}}function removeSub(o,e=!1){const{dep:n,prevSub:a,nextSub:s}=o;if(a&&(a.nextSub=s,o.prevSub=void 0),s&&(s.prevSub=a,o.nextSub=void 0),n.subsHead===o&&(n.subsHead=s),n.subs===o&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(o){const{prevDep:e,nextDep:n}=o;e&&(e.nextDep=n,o.prevDep=void 0),n&&(n.prevDep=e,o.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const o=trackStack.pop();shouldTrack=o===void 0?!0:o}function cleanupEffect(o){const{cleanup:e}=o;if(o.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0,Link$1=class{constructor(o,e){this.sub=o,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.subsHead=void 0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=a)}return activeSub.onTrack&&activeSub.onTrack(extend$1({effect:activeSub},e)),n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(extend$1({effect:n.sub},e));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(o){if(o.dep.sc++,o.sub.flags&4){const e=o.dep.computed;if(e&&!o.dep.subs){e.flags|=20;for(let a=e.deps;a;a=a.nextDep)addSub(a)}const n=o.dep.subs;n!==o&&(o.prevSub=n,n&&(n.nextSub=o)),o.dep.subsHead===void 0&&(o.dep.subsHead=o),o.dep.subs=o}}const targetMap=new WeakMap,ITERATE_KEY=Symbol("Object iterate"),MAP_KEY_ITERATE_KEY=Symbol("Map keys iterate"),ARRAY_ITERATE_KEY=Symbol("Array iterate");function track(o,e,n){if(shouldTrack&&activeSub){let a=targetMap.get(o);a||targetMap.set(o,a=new Map);let s=a.get(n);s||(a.set(n,s=new Dep),s.map=a,s.key=n),s.track({target:o,type:e,key:n})}}function trigger(o,e,n,a,s,l){const c=targetMap.get(o);if(!c){globalVersion++;return}const d=u=>{u&&u.trigger({target:o,type:e,key:n,newValue:a,oldValue:s,oldTarget:l})};if(startBatch(),e==="clear")c.forEach(d);else{const u=isArray$3(o),f=u&&isIntegerKey(n);if(u&&n==="length"){const v=Number(a);c.forEach((b,k)=>{(k==="length"||k===ARRAY_ITERATE_KEY||!isSymbol(k)&&k>=v)&&d(b)})}else switch((n!==void 0||c.has(void 0))&&d(c.get(n)),f&&d(c.get(ARRAY_ITERATE_KEY)),e){case"add":u?f&&d(c.get("length")):(d(c.get(ITERATE_KEY)),isMap(o)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":u||(d(c.get(ITERATE_KEY)),isMap(o)&&d(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(o)&&d(c.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(o,e){const n=targetMap.get(o);return n&&n.get(e)}function reactiveReadArray(o){const e=toRaw(o);return e===o?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(o)?e:e.map(toReactive))}function shallowReadArray(o){return track(o=toRaw(o),"iterate",ARRAY_ITERATE_KEY),o}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...o){return reactiveReadArray(this).concat(...o.map(e=>isArray$3(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",o=>(o[1]=toReactive(o[1]),o))},every(o,e){return apply$2(this,"every",o,e,void 0,arguments)},filter(o,e){return apply$2(this,"filter",o,e,n=>n.map(toReactive),arguments)},find(o,e){return apply$2(this,"find",o,e,toReactive,arguments)},findIndex(o,e){return apply$2(this,"findIndex",o,e,void 0,arguments)},findLast(o,e){return apply$2(this,"findLast",o,e,toReactive,arguments)},findLastIndex(o,e){return apply$2(this,"findLastIndex",o,e,void 0,arguments)},forEach(o,e){return apply$2(this,"forEach",o,e,void 0,arguments)},includes(...o){return searchProxy(this,"includes",o)},indexOf(...o){return searchProxy(this,"indexOf",o)},join(o){return reactiveReadArray(this).join(o)},lastIndexOf(...o){return searchProxy(this,"lastIndexOf",o)},map(o,e){return apply$2(this,"map",o,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...o){return noTracking(this,"push",o)},reduce(o,...e){return reduce(this,"reduce",o,e)},reduceRight(o,...e){return reduce(this,"reduceRight",o,e)},shift(){return noTracking(this,"shift")},some(o,e){return apply$2(this,"some",o,e,void 0,arguments)},splice(...o){return noTracking(this,"splice",o)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(o){return reactiveReadArray(this).toSorted(o)},toSpliced(...o){return reactiveReadArray(this).toSpliced(...o)},unshift(...o){return noTracking(this,"unshift",o)},values(){return iterator(this,"values",toReactive)}};function iterator(o,e,n){const a=shallowReadArray(o),s=a[e]();return a!==o&&!isShallow(o)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.value&&(l.value=n(l.value)),l}),s}const arrayProto=Array.prototype;function apply$2(o,e,n,a,s,l){const c=shallowReadArray(o),d=c!==o&&!isShallow(o),u=c[e];if(u!==arrayProto[e]){const b=u.apply(o,l);return d?toReactive(b):b}let f=n;c!==o&&(d?f=function(b,k){return n.call(this,toReactive(b),k,o)}:n.length>2&&(f=function(b,k){return n.call(this,b,k,o)}));const v=u.call(c,f,a);return d&&s?s(v):v}function reduce(o,e,n,a){const s=shallowReadArray(o);let l=n;return s!==o&&(isShallow(o)?n.length>3&&(l=function(c,d,u){return n.call(this,c,d,u,o)}):l=function(c,d,u){return n.call(this,c,toReactive(d),u,o)}),s[e](l,...a)}function searchProxy(o,e,n){const a=toRaw(o);track(a,"iterate",ARRAY_ITERATE_KEY);const s=a[e](...n);return(s===-1||s===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),a[e](...n)):s}function noTracking(o,e,n=[]){pauseTracking(),startBatch();const a=toRaw(o)[e].apply(o,n);return endBatch(),resetTracking(),a}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(isSymbol));function hasOwnProperty$2(o){isSymbol(o)||(o=String(o));const e=toRaw(this);return track(e,"has",o),e.hasOwnProperty(o)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return l;if(n==="__v_raw")return a===(s?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const c=isArray$3(e);if(!s){let u;if(c&&(u=arrayInstrumentations[n]))return u;if(n==="hasOwnProperty")return hasOwnProperty$2}const d=Reflect.get(e,n,isRef(e)?e:a);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(e,"get",n),l)?d:isRef(d)?c&&isIntegerKey(n)?d:d.value:isObject$3(d)?s?readonly(d):reactive(d):d}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,a,s){let l=e[n];if(!this._isShallow){const u=isReadonly(l);if(!isShallow(a)&&!isReadonly(a)&&(l=toRaw(l),a=toRaw(a)),!isArray$3(e)&&isRef(l)&&!isRef(a))return u?!1:(l.value=a,!0)}const c=isArray$3(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn$1(e,n),d=Reflect.set(e,n,a,isRef(e)?e:s);return e===toRaw(s)&&(c?hasChanged(a,l)&&trigger(e,"set",n,a,l):trigger(e,"add",n,a)),d}deleteProperty(e,n){const a=hasOwn$1(e,n),s=e[n],l=Reflect.deleteProperty(e,n);return l&&a&&trigger(e,"delete",n,void 0,s),l}has(e,n){const a=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),a}ownKeys(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return warn$3(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0}deleteProperty(e,n){return warn$3(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=o=>o,getProto=o=>Reflect.getPrototypeOf(o);function createIterableMethod(o,e,n){return function(...a){const s=this.__v_raw,l=toRaw(s),c=isMap(l),d=o==="entries"||o===Symbol.iterator&&c,u=o==="keys"&&c,f=s[o](...a),v=n?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:b,done:k}=f.next();return k?{value:b,done:k}:{value:d?[v(b[0]),v(b[1])]:v(b),done:k}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(o){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";warn$3(`${capitalize$1(o)} operation ${n}failed: target is readonly.`,toRaw(this))}return o==="delete"?!1:o==="clear"?void 0:this}}function createInstrumentations(o,e){const n={get(a){const s=this.__v_raw,l=toRaw(s),c=toRaw(a);o||(hasChanged(a,c)&&track(l,"get",a),track(l,"get",c));const{has:d}=getProto(l),u=e?toShallow:o?toReadonly:toReactive;if(d.call(l,a))return u(s.get(a));if(d.call(l,c))return u(s.get(c));s!==l&&s.get(a)},get size(){const a=this.__v_raw;return!o&&track(toRaw(a),"iterate",ITERATE_KEY),Reflect.get(a,"size",a)},has(a){const s=this.__v_raw,l=toRaw(s),c=toRaw(a);return o||(hasChanged(a,c)&&track(l,"has",a),track(l,"has",c)),a===c?s.has(a):s.has(a)||s.has(c)},forEach(a,s){const l=this,c=l.__v_raw,d=toRaw(c),u=e?toShallow:o?toReadonly:toReactive;return!o&&track(d,"iterate",ITERATE_KEY),c.forEach((f,v)=>a.call(s,u(f),u(v),l))}};return extend$1(n,o?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const s=toRaw(this);return getProto(s).has.call(s,a)||(s.add(a),trigger(s,"add",a,a)),this},set(a,s){!e&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this),{has:c,get:d}=getProto(l);let u=c.call(l,a);u?checkIdentityKeys(l,c,a):(a=toRaw(a),u=c.call(l,a));const f=d.call(l,a);return l.set(a,s),u?hasChanged(s,f)&&trigger(l,"set",a,s,f):trigger(l,"add",a,s),this},delete(a){const s=toRaw(this),{has:l,get:c}=getProto(s);let d=l.call(s,a);d?checkIdentityKeys(s,l,a):(a=toRaw(a),d=l.call(s,a));const u=c?c.call(s,a):void 0,f=s.delete(a);return d&&trigger(s,"delete",a,void 0,u),f},clear(){const a=toRaw(this),s=a.size!==0,l=isMap(a)?new Map(a):new Set(a),c=a.clear();return s&&trigger(a,"clear",void 0,void 0,l),c}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=createIterableMethod(a,o,e)}),n}function createInstrumentationGetter(o,e){const n=createInstrumentations(o,e);return(a,s,l)=>s==="__v_isReactive"?!o:s==="__v_isReadonly"?o:s==="__v_raw"?a:Reflect.get(hasOwn$1(n,s)&&s in a?n:a,s,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)};function checkIdentityKeys(o,e,n){const a=toRaw(n);if(a!==n&&e.call(o,a)){const s=toRawType(o);warn$3(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(o){return o.__v_skip||!Object.isExtensible(o)?0:targetTypeMap(toRawType(o))}function reactive(o){return isReadonly(o)?o:createReactiveObject(o,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(o){return createReactiveObject(o,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(o){return createReactiveObject(o,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(o){return createReactiveObject(o,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(o,e,n,a,s){if(!isObject$3(o))return warn$3(`value cannot be made ${e?"readonly":"reactive"}: ${String(o)}`),o;if(o.__v_raw&&!(e&&o.__v_isReactive))return o;const l=s.get(o);if(l)return l;const c=getTargetType(o);if(c===0)return o;const d=new Proxy(o,c===2?a:n);return s.set(o,d),d}function isReactive(o){return isReadonly(o)?isReactive(o.__v_raw):!!(o&&o.__v_isReactive)}function isReadonly(o){return!!(o&&o.__v_isReadonly)}function isShallow(o){return!!(o&&o.__v_isShallow)}function isProxy(o){return o?!!o.__v_raw:!1}function toRaw(o){const e=o&&o.__v_raw;return e?toRaw(e):o}function markRaw(o){return!hasOwn$1(o,"__v_skip")&&Object.isExtensible(o)&&def(o,"__v_skip",!0),o}const toReactive=o=>isObject$3(o)?reactive(o):o,toReadonly=o=>isObject$3(o)?readonly(o):o;function isRef(o){return o?o.__v_isRef===!0:!1}function ref(o){return createRef(o,!1)}function shallowRef(o){return createRef(o,!0)}function createRef(o,e){return isRef(o)?o:new RefImpl(o,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track({target:this,type:"get",key:"value"}),this._value}set value(e){const n=this._rawValue,a=this.__v_isShallow||isShallow(e)||isReadonly(e);e=a?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=a?e:toReactive(e),this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:n}))}}function unref(o){return isRef(o)?o.value:o}function toValue$2(o){return isFunction$2(o)?o():unref(o)}const shallowUnwrapHandlers={get:(o,e,n)=>e==="__v_raw"?o:unref(Reflect.get(o,e,n)),set:(o,e,n,a)=>{const s=o[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(o,e,n,a)}};function proxyRefs(o){return isReactive(o)?o:new Proxy(o,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Dep,{get:a,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=a,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(o){return new CustomRefImpl(o)}function toRefs(o){isProxy(o)||warn$3("toRefs() expects a reactive object but received a plain one.");const e=isArray$3(o)?new Array(o.length):{};for(const n in o)e[n]=propertyToRef(o,n);return e}class ObjectRefImpl{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef$1(o,e,n){return isRef(o)?o:isFunction$2(o)?new GetterRefImpl(o):isObject$3(o)&&arguments.length>1?propertyToRef(o,e,n):ref(o)}function propertyToRef(o,e,n){const a=o[e];return isRef(a)?a:new ObjectRefImpl(o,e,n)}class ComputedRefImpl{constructor(e,n,a){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track({target:this,type:"get",key:"value"});return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):warn$3("Write operation failed: computed value is readonly")}}function computed$1(o,e,n=!1){let a,s;return isFunction$2(o)?a=o:(a=o.get,s=o.set),new ComputedRefImpl(a,s,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(o,e=!1,n=activeWatcher){if(n){let a=cleanupMap.get(n);a||cleanupMap.set(n,a=[]),a.push(o)}else e||warn$3("onWatcherCleanup() was called when there was no active watcher to associate with.")}function watch$1(o,e,n=EMPTY_OBJ){const{immediate:a,deep:s,once:l,scheduler:c,augmentJob:d,call:u}=n,f=L=>{(n.onWarn||warn$3)("Invalid watch source: ",L,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},v=L=>s?L:isShallow(L)||s===!1||s===0?traverse(L,1):traverse(L);let b,k,x,_,E=!1,B=!1;if(isRef(o)?(k=()=>o.value,E=isShallow(o)):isReactive(o)?(k=()=>v(o),E=!0):isArray$3(o)?(B=!0,E=o.some(L=>isReactive(L)||isShallow(L)),k=()=>o.map(L=>{if(isRef(L))return L.value;if(isReactive(L))return v(L);if(isFunction$2(L))return u?u(L,2):L();f(L)})):isFunction$2(o)?e?k=u?()=>u(o,2):o:k=()=>{if(x){pauseTracking();try{x()}finally{resetTracking()}}const L=activeWatcher;activeWatcher=b;try{return u?u(o,3,[_]):o(_)}finally{activeWatcher=L}}:(k=NOOP,f(o)),e&&s){const L=k,U=s===!0?1/0:s;k=()=>traverse(L(),U)}const M=getCurrentScope(),I=()=>{b.stop(),M&&M.active&&remove$1(M.effects,b)};if(l&&e){const L=e;e=(...U)=>{L(...U),I()}}let F=B?new Array(o.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const V=L=>{if(!(!(b.flags&1)||!b.dirty&&!L))if(e){const U=b.run();if(s||E||(B?U.some((j,oe)=>hasChanged(j,F[oe])):hasChanged(U,F))){x&&x();const j=activeWatcher;activeWatcher=b;try{const oe=[U,F===INITIAL_WATCHER_VALUE?void 0:B&&F[0]===INITIAL_WATCHER_VALUE?[]:F,_];u?u(e,3,oe):e(...oe),F=U}finally{activeWatcher=j}}}else b.run()};return d&&d(V),b=new ReactiveEffect(k),b.scheduler=c?()=>c(V,!1):V,_=L=>onWatcherCleanup(L,!1,b),x=b.onStop=()=>{const L=cleanupMap.get(b);if(L){if(u)u(L,4);else for(const U of L)U();cleanupMap.delete(b)}},b.onTrack=n.onTrack,b.onTrigger=n.onTrigger,e?a?V(!0):F=b.run():c?c(V.bind(null,!0),!0):b.run(),I.pause=b.pause.bind(b),I.resume=b.resume.bind(b),I.stop=I,I}function traverse(o,e=1/0,n){if(e<=0||!isObject$3(o)||o.__v_skip||(n=n||new Set,n.has(o)))return o;if(n.add(o),e--,isRef(o))traverse(o.value,e,n);else if(isArray$3(o))for(let a=0;a<o.length;a++)traverse(o[a],e,n);else if(isSet(o)||isMap(o))o.forEach(a=>{traverse(a,e,n)});else if(isPlainObject$2(o)){for(const a in o)traverse(o[a],e,n);for(const a of Object.getOwnPropertySymbols(o))Object.prototype.propertyIsEnumerable.call(o,a)&&traverse(o[a],e,n)}return o}const stack=[];function pushWarningContext(o){stack.push(o)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1$1(o,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,a=n&&n.appContext.config.warnHandler,s=getComponentTrace();if(a)callWithErrorHandling(a,n,11,[o+e.map(l=>{var c,d;return(d=(c=l.toString)==null?void 0:c.call(l))!=null?d:JSON.stringify(l)}).join(""),n&&n.proxy,s.map(({vnode:l})=>`at <${formatComponentName(n,l.type)}>`).join(`
`),s]);else{const l=[`[Vue warn]: ${o}`,...e];s.length&&l.push(`
`,...formatTrace(s)),console.warn(...l)}resetTracking(),isWarning=!1}function getComponentTrace(){let o=stack[stack.length-1];if(!o)return[];const e=[];for(;o;){const n=e[0];n&&n.vnode===o?n.recurseCount++:e.push({vnode:o,recurseCount:0});const a=o.component&&o.component.parent;o=a&&a.vnode}return e}function formatTrace(o){const e=[];return o.forEach((n,a)=>{e.push(...a===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:o,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",a=o.component?o.component.parent==null:!1,s=` at <${formatComponentName(o.component,o.type,a)}`,l=">"+n;return o.props?[s,...formatProps(o.props),l]:[s+l]}function formatProps(o){const e=[],n=Object.keys(o);return n.slice(0,3).forEach(a=>{e.push(...formatProp(a,o[a]))}),n.length>3&&e.push(" ..."),e}function formatProp(o,e,n){return isString$2(e)?(e=JSON.stringify(e),n?e:[`${o}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${o}=${e}`]:isRef(e)?(e=formatProp(o,toRaw(e.value),!0),n?e:[`${o}=Ref<`,e,">"]):isFunction$2(e)?[`${o}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${o}=`,e])}function assertNumber(o,e){o!==void 0&&(typeof o!="number"?warn$1$1(`${e} is not a valid number - got ${JSON.stringify(o)}.`):isNaN(o)&&warn$1$1(`${e} is NaN - the duration expression might be incorrect.`))}const ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(o,e,n,a){try{return a?o(...a):o()}catch(s){handleError(s,e,n)}}function callWithAsyncErrorHandling(o,e,n,a){if(isFunction$2(o)){const s=callWithErrorHandling(o,e,n,a);return s&&isPromise$1(s)&&s.catch(l=>{handleError(l,e,n)}),s}if(isArray$3(o)){const s=[];for(let l=0;l<o.length;l++)s.push(callWithAsyncErrorHandling(o[l],e,n,a));return s}else warn$1$1(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof o}`)}function handleError(o,e,n,a=!0){const s=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=e&&e.appContext.config||EMPTY_OBJ;if(e){let d=e.parent;const u=e.proxy,f=ErrorTypeStrings$1[n];for(;d;){const v=d.ec;if(v){for(let b=0;b<v.length;b++)if(v[b](o,u,f)===!1)return}d=d.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[o,u,f]),resetTracking();return}}logError(o,n,s,a,c)}function logError(o,e,n,a=!0,s=!1){{const l=ErrorTypeStrings$1[e];if(n&&pushWarningContext(n),warn$1$1(`Unhandled error${l?` during execution of ${l}`:""}`),n&&popWarningContext(),a)throw o;console.error(o)}}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;const RECURSION_LIMIT=100;function nextTick(o){const e=currentFlushPromise||resolvedPromise;return o?e.then(this?o.bind(this):o):e}function findInsertionIndex$1(o){let e=flushIndex+1,n=queue.length;for(;e<n;){const a=e+n>>>1,s=queue[a],l=getId(s);l<o||l===o&&s.flags&2?e=a+1:n=a}return e}function queueJob(o){if(!(o.flags&1)){const e=getId(o),n=queue[queue.length-1];!n||!(o.flags&2)&&e>=getId(n)?queue.push(o):queue.splice(findInsertionIndex$1(e),0,o),o.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(o){isArray$3(o)?pendingPostFlushCbs.push(...o):activePostFlushCbs&&o.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,o):o.flags&1||(pendingPostFlushCbs.push(o),o.flags|=1),queueFlush()}function flushPreFlushCbs(o,e,n=flushIndex+1){for(e=e||new Map;n<queue.length;n++){const a=queue[n];if(a&&a.flags&2){if(o&&a.id!==o.uid||checkRecursiveUpdates(e,a))continue;queue.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function flushPostFlushCbs(o){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,a)=>getId(n)-getId(a));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,o=o||new Map,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];checkRecursiveUpdates(o,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}activePostFlushCbs=null,postFlushIndex=0}}const getId=o=>o.id==null?o.flags&2?-1:1/0:o.id;function flushJobs(o){o=o||new Map;const e=n=>checkRecursiveUpdates(o,n);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];if(n&&!(n.flags&8)){if(e(n))continue;n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(o),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs(o)}}function checkRecursiveUpdates(o,e){const n=o.get(e)||0;if(n>RECURSION_LIMIT){const a=e.i,s=a&&getComponentName(a.type);return handleError(`Maximum recursive updates exceeded${s?` in component <${s}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return o.set(e,n+1),!1}let isHmrUpdating=!1;const hmrDirtyComponents=new Map;getGlobalThis$1().__VUE_HMR_RUNTIME__={createRecord:tryWrap(createRecord),rerender:tryWrap(rerender),reload:tryWrap(reload)};const map=new Map;function registerHMR(o){const e=o.type.__hmrId;let n=map.get(e);n||(createRecord(e,o.type),n=map.get(e)),n.instances.add(o)}function unregisterHMR(o){map.get(o.type.__hmrId).instances.delete(o)}function createRecord(o,e){return map.has(o)?!1:(map.set(o,{initialDef:normalizeClassComponent(e),instances:new Set}),!0)}function normalizeClassComponent(o){return isClassComponent(o)?o.__vccOpts:o}function rerender(o,e){const n=map.get(o);n&&(n.initialDef.render=e,[...n.instances].forEach(a=>{e&&(a.render=e,normalizeClassComponent(a.type).render=e),a.renderCache=[],isHmrUpdating=!0,a.update(),isHmrUpdating=!1}))}function reload(o,e){const n=map.get(o);if(!n)return;e=normalizeClassComponent(e),updateComponentDef(n.initialDef,e);const a=[...n.instances];for(let s=0;s<a.length;s++){const l=a[s],c=normalizeClassComponent(l.type);let d=hmrDirtyComponents.get(c);d||(c!==n.initialDef&&updateComponentDef(c,e),hmrDirtyComponents.set(c,d=new Set)),d.add(l),l.appContext.propsCache.delete(l.type),l.appContext.emitsCache.delete(l.type),l.appContext.optionsCache.delete(l.type),l.ceReload?(d.add(l),l.ceReload(e.styles),d.delete(l)):l.parent?queueJob(()=>{isHmrUpdating=!0,l.parent.update(),isHmrUpdating=!1,d.delete(l)}):l.appContext.reload?l.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),l.root.ce&&l!==l.root&&l.root.ce._removeChildStyle(c)}queuePostFlushCb(()=>{hmrDirtyComponents.clear()})}function updateComponentDef(o,e){extend$1(o,e);for(const n in o)n!=="__file"&&!(n in e)&&delete o[n]}function tryWrap(o){return(e,n)=>{try{return o(e,n)}catch(a){console.error(a),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let devtools$1,buffer=[],devtoolsNotInstalled=!1;function emit$1(o,...e){devtools$1?devtools$1.emit(o,...e):devtoolsNotInstalled||buffer.push({event:o,args:e})}function setDevtoolsHook$1(o,e){var n,a;devtools$1=o,devtools$1?(devtools$1.enabled=!0,buffer.forEach(({event:s,args:l})=>devtools$1.emit(s,...l)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!((a=(n=window.navigator)==null?void 0:n.userAgent)!=null&&a.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{setDevtoolsHook$1(s,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,devtoolsNotInstalled=!0,buffer=[])},3e3)):(devtoolsNotInstalled=!0,buffer=[])}function devtoolsInitApp(o,e){emit$1("app:init",o,e,{Fragment:Fragment$1,Text:Text$1,Comment,Static})}function devtoolsUnmountApp(o){emit$1("app:unmount",o)}const devtoolsComponentAdded=createDevtoolsComponentHook("component:added"),devtoolsComponentUpdated=createDevtoolsComponentHook("component:updated"),_devtoolsComponentRemoved=createDevtoolsComponentHook("component:removed"),devtoolsComponentRemoved=o=>{devtools$1&&typeof devtools$1.cleanupBuffer=="function"&&!devtools$1.cleanupBuffer(o)&&_devtoolsComponentRemoved(o)};function createDevtoolsComponentHook(o){return e=>{emit$1(o,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const devtoolsPerfStart=createDevtoolsPerformanceHook("perf:start"),devtoolsPerfEnd=createDevtoolsPerformanceHook("perf:end");function createDevtoolsPerformanceHook(o){return(e,n,a)=>{emit$1(o,e.appContext.app,e.uid,e,n,a)}}function devtoolsComponentEmit(o,e,n){emit$1("component:emit",o.appContext.app,o,e,n)}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(o){const e=currentRenderingInstance;return currentRenderingInstance=o,currentScopeId=o&&o.type.__scopeId||null,e}function withCtx(o,e=currentRenderingInstance,n){if(!e||o._n)return o;const a=(...s)=>{a._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let c;try{c=o(...s)}finally{setCurrentRenderingInstance(l),a._d&&setBlockTracking(1)}return devtoolsComponentUpdated(e),c};return a._n=!0,a._c=!0,a._d=!0,a}function validateDirectiveName(o){isBuiltInDirective(o)&&warn$1$1("Do not use built-in directive ids as custom directive id: "+o)}function withDirectives(o,e){if(currentRenderingInstance===null)return warn$1$1("withDirectives can only be used inside render functions."),o;const n=getComponentPublicInstance(currentRenderingInstance),a=o.dirs||(o.dirs=[]);for(let s=0;s<e.length;s++){let[l,c,d,u=EMPTY_OBJ]=e[s];l&&(isFunction$2(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(c),a.push({dir:l,instance:n,value:c,oldValue:void 0,arg:d,modifiers:u}))}return o}function invokeDirectiveHook(o,e,n,a){const s=o.dirs,l=e&&e.dirs;for(let c=0;c<s.length;c++){const d=s[c];l&&(d.oldValue=l[c].value);let u=d.dir[a];u&&(pauseTracking(),callWithAsyncErrorHandling(u,n,8,[o.el,d,o,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=o=>o.__isTeleport,isTeleportDisabled=o=>o&&(o.disabled||o.disabled===""),isTeleportDeferred=o=>o&&(o.defer||o.defer===""),isTargetSVG=o=>typeof SVGElement<"u"&&o instanceof SVGElement,isTargetMathML=o=>typeof MathMLElement=="function"&&o instanceof MathMLElement,resolveTarget=(o,e)=>{const n=o&&o.to;if(isString$2(n))if(e){const a=e(n);return!a&&!isTeleportDisabled(o)&&warn$1$1(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),a}else return warn$1$1("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return!n&&!isTeleportDisabled(o)&&warn$1$1(`Invalid Teleport target: ${n}`),n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(o,e,n,a,s,l,c,d,u,f){const{mc:v,pc:b,pbc:k,o:{insert:x,querySelector:_,createText:E,createComment:B}}=f,M=isTeleportDisabled(e.props);let{shapeFlag:I,children:F,dynamicChildren:V}=e;if(isHmrUpdating&&(u=!1,V=null),o==null){const L=e.el=B("teleport start"),U=e.anchor=B("teleport end");x(L,n,a),x(U,n,a);const j=(Y,K)=>{I&16&&(s&&s.isCE&&(s.ce._teleportTarget=Y),v(F,Y,K,s,l,c,d,u))},oe=()=>{const Y=e.target=resolveTarget(e.props,_),K=prepareAnchor(Y,e,E,x);Y?(c!=="svg"&&isTargetSVG(Y)?c="svg":c!=="mathml"&&isTargetMathML(Y)&&(c="mathml"),M||(j(Y,K),updateCssVars(e,!1))):M||warn$1$1("Invalid Teleport target on mount:",Y,`(${typeof Y})`)};M&&(j(n,U),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{oe(),e.el.__isMounted=!0},l):oe()}else{if(isTeleportDeferred(e.props)&&!o.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(o,e,n,a,s,l,c,d,u,f),delete o.el.__isMounted},l);return}e.el=o.el,e.targetStart=o.targetStart;const L=e.anchor=o.anchor,U=e.target=o.target,j=e.targetAnchor=o.targetAnchor,oe=isTeleportDisabled(o.props),Y=oe?n:U,K=oe?L:j;if(c==="svg"||isTargetSVG(U)?c="svg":(c==="mathml"||isTargetMathML(U))&&(c="mathml"),V?(k(o.dynamicChildren,V,Y,s,l,c,d),traverseStaticChildren(o,e,!0)):u||b(o,e,Y,K,s,l,c,d,!1),M)oe?e.props&&o.props&&e.props.to!==o.props.to&&(e.props.to=o.props.to):moveTeleport(e,n,L,f,1);else if((e.props&&e.props.to)!==(o.props&&o.props.to)){const W=e.target=resolveTarget(e.props,_);W?moveTeleport(e,W,null,f,0):warn$1$1("Invalid Teleport target on update:",U,`(${typeof U})`)}else oe&&moveTeleport(e,U,j,f,1);updateCssVars(e,M)}},remove(o,e,n,{um:a,o:{remove:s}},l){const{shapeFlag:c,children:d,anchor:u,targetStart:f,targetAnchor:v,target:b,props:k}=o;if(b&&(s(f),s(v)),l&&s(u),c&16){const x=l||!isTeleportDisabled(k);for(let _=0;_<d.length;_++){const E=d[_];a(E,e,n,x,!!E.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(o,e,n,{o:{insert:a},m:s},l=2){l===0&&a(o.targetAnchor,e,n);const{el:c,anchor:d,shapeFlag:u,children:f,props:v}=o,b=l===2;if(b&&a(c,e,n),(!b||isTeleportDisabled(v))&&u&16)for(let k=0;k<f.length;k++)s(f[k],e,n,2);b&&a(d,e,n)}function hydrateTeleport(o,e,n,a,s,l,{o:{nextSibling:c,parentNode:d,querySelector:u,insert:f,createText:v}},b){const k=e.target=resolveTarget(e.props,u);if(k){const x=isTeleportDisabled(e.props),_=k._lpa||k.firstChild;if(e.shapeFlag&16)if(x)e.anchor=b(c(o),e,d(o),n,a,s,l),e.targetStart=_,e.targetAnchor=_&&c(_);else{e.anchor=c(o);let E=_;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,k._lpa=e.targetAnchor&&c(e.targetAnchor);break}}E=c(E)}e.targetAnchor||prepareAnchor(k,e,v,f),b(_&&c(_),e,k,n,a,s,l)}updateCssVars(e,x)}return e.anchor&&c(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(o,e){const n=o.ctx;if(n&&n.ut){let a,s;for(e?(a=o.el,s=o.anchor):(a=o.targetStart,s=o.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function prepareAnchor(o,e,n,a){const s=e.targetStart=n(""),l=e.targetAnchor=n("");return s[TeleportEndKey]=l,o&&(a(s,o),a(l,o)),l}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const o={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{o.isMounted=!0}),onBeforeUnmount(()=>{o.isUnmounting=!0}),o}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=o=>{const e=o.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(o,{slots:e}){const n=getCurrentInstance(),a=useTransitionState();return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;const l=findNonCommentChild(s),c=toRaw(o),{mode:d}=c;if(d&&d!=="in-out"&&d!=="out-in"&&d!=="default"&&warn$1$1(`invalid <transition> mode: ${d}`),a.isLeaving)return emptyPlaceholder(l);const u=getInnerChild$1(l);if(!u)return emptyPlaceholder(l);let f=resolveTransitionHooks(u,c,a,n,b=>f=b);u.type!==Comment&&setTransitionHooks(u,f);let v=n.subTree&&getInnerChild$1(n.subTree);if(v&&v.type!==Comment&&!isSameVNodeType(u,v)&&recursiveGetSubtree(n).type!==Comment){let b=resolveTransitionHooks(v,c,a,n);if(setTransitionHooks(v,b),d==="out-in"&&u.type!==Comment)return a.isLeaving=!0,b.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete b.afterLeave,v=void 0},emptyPlaceholder(l);d==="in-out"&&u.type!==Comment?b.delayLeave=(k,x,_)=>{const E=getLeavingNodesForType(a,v);E[String(v.key)]=v,k[leaveCbKey]=()=>{x(),k[leaveCbKey]=void 0,delete f.delayedLeave,v=void 0},f.delayedLeave=()=>{_(),delete f.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return l}}};function findNonCommentChild(o){let e=o[0];if(o.length>1){let n=!1;for(const a of o)if(a.type!==Comment){if(n){warn$1$1("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}e=a,n=!0}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(o,e){const{leavingVNodes:n}=o;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function resolveTransitionHooks(o,e,n,a,s){const{appear:l,mode:c,persisted:d=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:v,onEnterCancelled:b,onBeforeLeave:k,onLeave:x,onAfterLeave:_,onLeaveCancelled:E,onBeforeAppear:B,onAppear:M,onAfterAppear:I,onAppearCancelled:F}=e,V=String(o.key),L=getLeavingNodesForType(n,o),U=(Y,K)=>{Y&&callWithAsyncErrorHandling(Y,a,9,K)},j=(Y,K)=>{const W=K[1];U(Y,K),isArray$3(Y)?Y.every(G=>G.length<=1)&&W():Y.length<=1&&W()},oe={mode:c,persisted:d,beforeEnter(Y){let K=u;if(!n.isMounted)if(l)K=B||u;else return;Y[leaveCbKey]&&Y[leaveCbKey](!0);const W=L[V];W&&isSameVNodeType(o,W)&&W.el[leaveCbKey]&&W.el[leaveCbKey](),U(K,[Y])},enter(Y){let K=f,W=v,G=b;if(!n.isMounted)if(l)K=M||f,W=I||v,G=F||b;else return;let ce=!1;const se=Y[enterCbKey]=me=>{ce||(ce=!0,me?U(G,[Y]):U(W,[Y]),oe.delayedLeave&&oe.delayedLeave(),Y[enterCbKey]=void 0)};K?j(K,[Y,se]):se()},leave(Y,K){const W=String(o.key);if(Y[enterCbKey]&&Y[enterCbKey](!0),n.isUnmounting)return K();U(k,[Y]);let G=!1;const ce=Y[leaveCbKey]=se=>{G||(G=!0,K(),se?U(E,[Y]):U(_,[Y]),Y[leaveCbKey]=void 0,L[W]===o&&delete L[W])};L[W]=o,x?j(x,[Y,ce]):ce()},clone(Y){const K=resolveTransitionHooks(Y,e,n,a,s);return s&&s(K),K}};return oe}function emptyPlaceholder(o){if(isKeepAlive(o))return o=cloneVNode(o),o.children=null,o}function getInnerChild$1(o){if(!isKeepAlive(o))return isTeleport(o.type)&&o.children?findNonCommentChild(o.children):o;if(o.component)return o.component.subTree;const{shapeFlag:e,children:n}=o;if(n){if(e&16)return n[0];if(e&32&&isFunction$2(n.default))return n.default()}}function setTransitionHooks(o,e){o.shapeFlag&6&&o.component?(o.transition=e,setTransitionHooks(o.component.subTree,e)):o.shapeFlag&128?(o.ssContent.transition=e.clone(o.ssContent),o.ssFallback.transition=e.clone(o.ssFallback)):o.transition=e}function getTransitionRawChildren(o,e=!1,n){let a=[],s=0;for(let l=0;l<o.length;l++){let c=o[l];const d=n==null?c.key:String(n)+String(c.key!=null?c.key:l);c.type===Fragment$1?(c.patchFlag&128&&s++,a=a.concat(getTransitionRawChildren(c.children,e,d))):(e||c.type!==Comment)&&a.push(d!=null?cloneVNode(c,{key:d}):c)}if(s>1)for(let l=0;l<a.length;l++)a[l].patchFlag=-2;return a}function defineComponent(o,e){return isFunction$2(o)?extend$1({name:o.name},e,{setup:o}):o}function useId(){const o=getCurrentInstance();return o?(o.appContext.config.idPrefix||"v")+"-"+o.ids[0]+o.ids[1]++:(warn$1$1("useId() is called when there is no active component instance to be associated with."),"")}function markAsyncBoundary(o){o.ids=[o.ids[0]+o.ids[2]+++"-",0,0]}const knownTemplateRefs=new WeakSet;function setRef(o,e,n,a,s=!1){if(isArray$3(o)){o.forEach((_,E)=>setRef(_,e&&(isArray$3(e)?e[E]:e),n,a,s));return}if(isAsyncWrapper(a)&&!s){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&setRef(o,e,n,a.component.subTree);return}const l=a.shapeFlag&4?getComponentPublicInstance(a.component):a.el,c=s?null:l,{i:d,r:u}=o;if(!d){warn$1$1("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const f=e&&e.r,v=d.refs===EMPTY_OBJ?d.refs={}:d.refs,b=d.setupState,k=toRaw(b),x=b===EMPTY_OBJ?()=>!1:_=>(hasOwn$1(k,_)&&!isRef(k[_])&&warn$1$1(`Template ref "${_}" used on a non-ref value. It will not work in the production build.`),knownTemplateRefs.has(k[_])?!1:hasOwn$1(k,_));if(f!=null&&f!==u&&(isString$2(f)?(v[f]=null,x(f)&&(b[f]=null)):isRef(f)&&(f.value=null)),isFunction$2(u))callWithErrorHandling(u,d,12,[c,v]);else{const _=isString$2(u),E=isRef(u);if(_||E){const B=()=>{if(o.f){const M=_?x(u)?b[u]:v[u]:u.value;s?isArray$3(M)&&remove$1(M,l):isArray$3(M)?M.includes(l)||M.push(l):_?(v[u]=[l],x(u)&&(b[u]=v[u])):(u.value=[l],o.k&&(v[o.k]=u.value))}else _?(v[u]=c,x(u)&&(b[u]=c)):E?(u.value=c,o.k&&(v[o.k]=c)):warn$1$1("Invalid template ref type:",u,`(${typeof u})`)};c?(B.id=-1,queuePostRenderEffect(B,n)):B()}else warn$1$1("Invalid template ref type:",u,`(${typeof u})`)}}getGlobalThis$1().requestIdleCallback,getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=o=>!!o.type.__asyncLoader,isKeepAlive=o=>o.type.__isKeepAlive;function onActivated(o,e){registerKeepAliveHook(o,"a",e)}function onDeactivated(o,e){registerKeepAliveHook(o,"da",e)}function registerKeepAliveHook(o,e,n=currentInstance){const a=o.__wdc||(o.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return o()});if(injectHook(e,a,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(a,e,n,s),s=s.parent}}function injectToKeepAliveRoot(o,e,n,a){const s=injectHook(e,o,a,!0);onUnmounted(()=>{remove$1(a[e],s)},n)}function injectHook(o,e,n=currentInstance,a=!1){if(n){const s=n[o]||(n[o]=[]),l=e.__weh||(e.__weh=(...c)=>{pauseTracking();const d=setCurrentInstance(n),u=callWithAsyncErrorHandling(e,n,o,c);return d(),resetTracking(),u});return a?s.unshift(l):s.push(l),l}else{const s=toHandlerKey(ErrorTypeStrings$1[o].replace(/ hook$/,""));warn$1$1(`${s} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const createHook=o=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||o==="sp")&&injectHook(o,(...a)=>e(...a),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(o,e=currentInstance){injectHook("ec",o,e)}const COMPONENTS="components";function resolveComponent(o,e){return resolveAsset(COMPONENTS,o,!0,e)||o}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(o){return isString$2(o)?resolveAsset(COMPONENTS,o,!1)||o:o||NULL_DYNAMIC_COMPONENT}function resolveAsset(o,e,n=!0,a=!1){const s=currentRenderingInstance||currentInstance;if(s){const l=s.type;{const d=getComponentName(l,!1);if(d&&(d===e||d===camelize(e)||d===capitalize$1(camelize(e))))return l}const c=resolve(s[o]||l[o],e)||resolve(s.appContext[o],e);return!c&&a?l:(n&&!c&&warn$1$1(`Failed to resolve ${o.slice(0,-1)}: ${e}
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`),c)}else warn$1$1(`resolve${capitalize$1(o.slice(0,-1))} can only be used in render() or setup().`)}function resolve(o,e){return o&&(o[e]||o[camelize(e)]||o[capitalize$1(camelize(e))])}function renderList(o,e,n,a){let s;const l=n,c=isArray$3(o);if(c||isString$2(o)){const d=c&&isReactive(o);let u=!1;d&&(u=!isShallow(o),o=shallowReadArray(o)),s=new Array(o.length);for(let f=0,v=o.length;f<v;f++)s[f]=e(u?toReactive(o[f]):o[f],f,void 0,l)}else if(typeof o=="number"){Number.isInteger(o)||warn$1$1(`The v-for range expect an integer value but got ${o}.`),s=new Array(o);for(let d=0;d<o;d++)s[d]=e(d+1,d,void 0,l)}else if(isObject$3(o))if(o[Symbol.iterator])s=Array.from(o,(d,u)=>e(d,u,void 0,l));else{const d=Object.keys(o);s=new Array(d.length);for(let u=0,f=d.length;u<f;u++){const v=d[u];s[u]=e(o[v],v,u,l)}}else s=[];return s}function renderSlot(o,e,n={},a,s){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(n.name=e),openBlock(),createBlock(Fragment$1,null,[createVNode("slot",n,a&&a())],64);let l=o[e];l&&l.length>1&&(warn$1$1("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),l=()=>[]),l&&l._c&&(l._d=!1),openBlock();const c=l&&ensureValidVNode(l(n)),d=n.key||c&&c.key,u=createBlock(Fragment$1,{key:(d&&!isSymbol(d)?d:`_${e}`)+(!c&&a?"_fb":"")},c||(a?a():[]),c&&o._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function ensureValidVNode(o){return o.some(e=>isVNode$1(e)?!(e.type===Comment||e.type===Fragment$1&&!ensureValidVNode(e.children)):!0)?o:null}function toHandlers(o,e){const n={};if(!isObject$3(o))return warn$1$1("v-on with no argument expects an object value."),n;for(const a in o)n[toHandlerKey(a)]=o[a];return n}const getPublicInstance=o=>o?isStatefulComponent(o)?getComponentPublicInstance(o):getPublicInstance(o.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>shallowReadonly(o.props),$attrs:o=>shallowReadonly(o.attrs),$slots:o=>shallowReadonly(o.slots),$refs:o=>shallowReadonly(o.refs),$parent:o=>getPublicInstance(o.parent),$root:o=>getPublicInstance(o.root),$host:o=>o.ce,$emit:o=>o.emit,$options:o=>resolveMergedOptions(o),$forceUpdate:o=>o.f||(o.f=()=>{queueJob(o.update)}),$nextTick:o=>o.n||(o.n=nextTick.bind(o.proxy)),$watch:o=>instanceWatch.bind(o)}),isReservedPrefix=o=>o==="_"||o==="$",hasSetupBinding=(o,e)=>o!==EMPTY_OBJ&&!o.__isScriptSetup&&hasOwn$1(o,e),PublicInstanceProxyHandlers={get({_:o},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:a,data:s,props:l,accessCache:c,type:d,appContext:u}=o;if(e==="__isVue")return!0;let f;if(e[0]!=="$"){const x=c[e];if(x!==void 0)switch(x){case 1:return a[e];case 2:return s[e];case 4:return n[e];case 3:return l[e]}else{if(hasSetupBinding(a,e))return c[e]=1,a[e];if(s!==EMPTY_OBJ&&hasOwn$1(s,e))return c[e]=2,s[e];if((f=o.propsOptions[0])&&hasOwn$1(f,e))return c[e]=3,l[e];if(n!==EMPTY_OBJ&&hasOwn$1(n,e))return c[e]=4,n[e];shouldCacheAccess&&(c[e]=0)}}const v=publicPropertiesMap[e];let b,k;if(v)return e==="$attrs"?(track(o.attrs,"get",""),markAttrsAccessed()):e==="$slots"&&track(o,"get",e),v(o);if((b=d.__cssModules)&&(b=b[e]))return b;if(n!==EMPTY_OBJ&&hasOwn$1(n,e))return c[e]=4,n[e];if(k=u.config.globalProperties,hasOwn$1(k,e))return k[e];currentRenderingInstance&&(!isString$2(e)||e.indexOf("__v")!==0)&&(s!==EMPTY_OBJ&&isReservedPrefix(e[0])&&hasOwn$1(s,e)?warn$1$1(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):o===currentRenderingInstance&&warn$1$1(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:o},e,n){const{data:a,setupState:s,ctx:l}=o;return hasSetupBinding(s,e)?(s[e]=n,!0):s.__isScriptSetup&&hasOwn$1(s,e)?(warn$1$1(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):a!==EMPTY_OBJ&&hasOwn$1(a,e)?(a[e]=n,!0):hasOwn$1(o.props,e)?(warn$1$1(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in o?(warn$1$1(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(e in o.appContext.config.globalProperties?Object.defineProperty(l,e,{enumerable:!0,configurable:!0,value:n}):l[e]=n,!0)},has({_:{data:o,setupState:e,accessCache:n,ctx:a,appContext:s,propsOptions:l}},c){let d;return!!n[c]||o!==EMPTY_OBJ&&hasOwn$1(o,c)||hasSetupBinding(e,c)||(d=l[0])&&hasOwn$1(d,c)||hasOwn$1(a,c)||hasOwn$1(publicPropertiesMap,c)||hasOwn$1(s.config.globalProperties,c)},defineProperty(o,e,n){return n.get!=null?o._.accessCache[e]=0:hasOwn$1(n,"value")&&this.set(o,e,n.value,null),Reflect.defineProperty(o,e,n)}};PublicInstanceProxyHandlers.ownKeys=o=>(warn$1$1("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(o));function createDevRenderContext(o){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>o}),Object.keys(publicPropertiesMap).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>publicPropertiesMap[n](o),set:NOOP})}),e}function exposePropsOnRenderContext(o){const{ctx:e,propsOptions:[n]}=o;n&&Object.keys(n).forEach(a=>{Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>o.props[a],set:NOOP})})}function exposeSetupStateOnRenderContext(o){const{ctx:e,setupState:n}=o;Object.keys(toRaw(n)).forEach(a=>{if(!n.__isScriptSetup){if(isReservedPrefix(a[0])){warn$1$1(`setup() return property ${JSON.stringify(a)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>n[a],set:NOOP})}})}function useSlots(){return getContext().slots}function getContext(){const o=getCurrentInstance();return o||warn$1$1("useContext() called without active instance."),o.setupContext||(o.setupContext=createSetupContext(o))}function normalizePropsOrEmits(o){return isArray$3(o)?o.reduce((e,n)=>(e[n]=null,e),{}):o}function mergeDefaults(o,e){const n=normalizePropsOrEmits(o);for(const a in e){if(a.startsWith("__skip"))continue;let s=n[a];s?isArray$3(s)||isFunction$2(s)?s=n[a]={type:s,default:e[a]}:s.default=e[a]:s===null?s=n[a]={default:e[a]}:warn$1$1(`props default key "${a}" has no corresponding declaration.`),s&&e[`__skip_${a}`]&&(s.skipFactory=!0)}return n}function mergeModels(o,e){return!o||!e?o||e:isArray$3(o)&&isArray$3(e)?o.concat(e):extend$1({},normalizePropsOrEmits(o),normalizePropsOrEmits(e))}function createDuplicateChecker(){const o=Object.create(null);return(e,n)=>{o[n]?warn$1$1(`${e} property "${n}" is already defined in ${o[n]}.`):o[n]=e}}let shouldCacheAccess=!0;function applyOptions(o){const e=resolveMergedOptions(o),n=o.proxy,a=o.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,o,"bc");const{data:s,computed:l,methods:c,watch:d,provide:u,inject:f,created:v,beforeMount:b,mounted:k,beforeUpdate:x,updated:_,activated:E,deactivated:B,beforeDestroy:M,beforeUnmount:I,destroyed:F,unmounted:V,render:L,renderTracked:U,renderTriggered:j,errorCaptured:oe,serverPrefetch:Y,expose:K,inheritAttrs:W,components:G,directives:ce,filters:se}=e,me=createDuplicateChecker();{const[Te]=o.propsOptions;if(Te)for(const Be in Te)me("Props",Be)}if(f&&resolveInjections(f,a,me),c)for(const Te in c){const Be=c[Te];isFunction$2(Be)?(Object.defineProperty(a,Te,{value:Be.bind(n),configurable:!0,enumerable:!0,writable:!0}),me("Methods",Te)):warn$1$1(`Method "${Te}" has type "${typeof Be}" in the component definition. Did you reference the function correctly?`)}if(s){isFunction$2(s)||warn$1$1("The data option must be a function. Plain object usage is no longer supported.");const Te=s.call(n,n);if(isPromise$1(Te)&&warn$1$1("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!isObject$3(Te))warn$1$1("data() should return an object.");else{o.data=reactive(Te);for(const Be in Te)me("Data",Be),isReservedPrefix(Be[0])||Object.defineProperty(a,Be,{configurable:!0,enumerable:!0,get:()=>Te[Be],set:NOOP})}}if(shouldCacheAccess=!0,l)for(const Te in l){const Be=l[Te],Ge=isFunction$2(Be)?Be.bind(n,n):isFunction$2(Be.get)?Be.get.bind(n,n):NOOP;Ge===NOOP&&warn$1$1(`Computed property "${Te}" has no getter.`);const We=!isFunction$2(Be)&&isFunction$2(Be.set)?Be.set.bind(n):()=>{warn$1$1(`Write operation failed: computed property "${Te}" is readonly.`)},Oe=computed({get:Ge,set:We});Object.defineProperty(a,Te,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:Ve=>Oe.value=Ve}),me("Computed",Te)}if(d)for(const Te in d)createWatcher(d[Te],a,n,Te);if(u){const Te=isFunction$2(u)?u.call(n):u;Reflect.ownKeys(Te).forEach(Be=>{provide(Be,Te[Be])})}v&&callHook$1(v,o,"c");function ge(Te,Be){isArray$3(Be)?Be.forEach(Ge=>Te(Ge.bind(n))):Be&&Te(Be.bind(n))}if(ge(onBeforeMount,b),ge(onMounted,k),ge(onBeforeUpdate,x),ge(onUpdated,_),ge(onActivated,E),ge(onDeactivated,B),ge(onErrorCaptured,oe),ge(onRenderTracked,U),ge(onRenderTriggered,j),ge(onBeforeUnmount,I),ge(onUnmounted,V),ge(onServerPrefetch,Y),isArray$3(K))if(K.length){const Te=o.exposed||(o.exposed={});K.forEach(Be=>{Object.defineProperty(Te,Be,{get:()=>n[Be],set:Ge=>n[Be]=Ge})})}else o.exposed||(o.exposed={});L&&o.render===NOOP&&(o.render=L),W!=null&&(o.inheritAttrs=W),G&&(o.components=G),ce&&(o.directives=ce),Y&&markAsyncBoundary(o)}function resolveInjections(o,e,n=NOOP){isArray$3(o)&&(o=normalizeInject(o));for(const a in o){const s=o[a];let l;isObject$3(s)?"default"in s?l=inject(s.from||a,s.default,!0):l=inject(s.from||a):l=inject(s),isRef(l)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[a]=l,n("Inject",a)}}function callHook$1(o,e,n){callWithAsyncErrorHandling(isArray$3(o)?o.map(a=>a.bind(e.proxy)):o.bind(e.proxy),e,n)}function createWatcher(o,e,n,a){let s=a.includes(".")?createPathGetter(n,a):()=>n[a];if(isString$2(o)){const l=e[o];isFunction$2(l)?watch(s,l):warn$1$1(`Invalid watch handler specified by key "${o}"`,l)}else if(isFunction$2(o))watch(s,o.bind(n));else if(isObject$3(o))if(isArray$3(o))o.forEach(l=>createWatcher(l,e,n,a));else{const l=isFunction$2(o.handler)?o.handler.bind(n):e[o.handler];isFunction$2(l)?watch(s,l,o):warn$1$1(`Invalid watch handler specified by key "${o.handler}"`,l)}else warn$1$1(`Invalid watch option: "${a}"`,o)}function resolveMergedOptions(o){const e=o.type,{mixins:n,extends:a}=e,{mixins:s,optionsCache:l,config:{optionMergeStrategies:c}}=o.appContext,d=l.get(e);let u;return d?u=d:!s.length&&!n&&!a?u=e:(u={},s.length&&s.forEach(f=>mergeOptions$1(u,f,c,!0)),mergeOptions$1(u,e,c)),isObject$3(e)&&l.set(e,u),u}function mergeOptions$1(o,e,n,a=!1){const{mixins:s,extends:l}=e;l&&mergeOptions$1(o,l,n,!0),s&&s.forEach(c=>mergeOptions$1(o,c,n,!0));for(const c in e)if(a&&c==="expose")warn$1$1('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const d=internalOptionMergeStrats[c]||n&&n[c];o[c]=d?d(o[c],e[c]):e[c]}return o}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(o,e){return e?o?function(){return extend$1(isFunction$2(o)?o.call(this,this):o,isFunction$2(e)?e.call(this,this):e)}:e:o}function mergeInject(o,e){return mergeObjectOptions(normalizeInject(o),normalizeInject(e))}function normalizeInject(o){if(isArray$3(o)){const e={};for(let n=0;n<o.length;n++)e[o[n]]=o[n];return e}return o}function mergeAsArray(o,e){return o?[...new Set([].concat(o,e))]:e}function mergeObjectOptions(o,e){return o?extend$1(Object.create(null),o,e):e}function mergeEmitsOrPropsOptions(o,e){return o?isArray$3(o)&&isArray$3(e)?[...new Set([...o,...e])]:extend$1(Object.create(null),normalizePropsOrEmits(o),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(o,e){if(!o)return e;if(!e)return o;const n=extend$1(Object.create(null),o);for(const a in e)n[a]=mergeAsArray(o[a],e[a]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(o,e){return function(n,a=null){isFunction$2(n)||(n=extend$1({},n)),a!=null&&!isObject$3(a)&&(warn$1$1("root props passed to app.mount() must be an object."),a=null);const s=createAppContext(),l=new WeakSet,c=[];let d=!1;const u=s.app={_uid:uid$1++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:version$1,get config(){return s.config},set config(f){warn$1$1("app.config cannot be replaced. Modify individual options instead.")},use(f,...v){return l.has(f)?warn$1$1("Plugin has already been applied to target app."):f&&isFunction$2(f.install)?(l.add(f),f.install(u,...v)):isFunction$2(f)?(l.add(f),f(u,...v)):warn$1$1('A plugin must either be a function or an object with an "install" function.'),u},mixin(f){return s.mixins.includes(f)?warn$1$1("Mixin has already been applied to target app"+(f.name?`: ${f.name}`:"")):s.mixins.push(f),u},component(f,v){return validateComponentName(f,s.config),v?(s.components[f]&&warn$1$1(`Component "${f}" has already been registered in target app.`),s.components[f]=v,u):s.components[f]},directive(f,v){return validateDirectiveName(f),v?(s.directives[f]&&warn$1$1(`Directive "${f}" has already been registered in target app.`),s.directives[f]=v,u):s.directives[f]},mount(f,v,b){if(d)warn$1$1("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{f.__vue_app__&&warn$1$1("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const k=u._ceVNode||createVNode(n,a);return k.appContext=s,b===!0?b="svg":b===!1&&(b=void 0),s.reload=()=>{o(cloneVNode(k),f,b)},o(k,f,b),d=!0,u._container=f,f.__vue_app__=u,u._instance=k.component,devtoolsInitApp(u,version$1),getComponentPublicInstance(k.component)}},onUnmount(f){typeof f!="function"&&warn$1$1(`Expected function as first argument to app.onUnmount(), but got ${typeof f}`),c.push(f)},unmount(){d?(callWithAsyncErrorHandling(c,u._instance,16),o(null,u._container),u._instance=null,devtoolsUnmountApp(u),delete u._container.__vue_app__):warn$1$1("Cannot unmount an app that is not mounted.")},provide(f,v){return f in s.provides&&warn$1$1(`App already provides property with key "${String(f)}". It will be overwritten with the new value.`),s.provides[f]=v,u},runWithContext(f){const v=currentApp;currentApp=u;try{return f()}finally{currentApp=v}}};return u}}let currentApp=null;function provide(o,e){if(!currentInstance)warn$1$1("provide() can only be used inside setup().");else{let n=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===n&&(n=currentInstance.provides=Object.create(a)),n[o]=e}}function inject(o,e,n=!1){const a=currentInstance||currentRenderingInstance;if(a||currentApp){const s=currentApp?currentApp._context.provides:a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&o in s)return s[o];if(arguments.length>1)return n&&isFunction$2(e)?e.call(a&&a.proxy):e;warn$1$1(`injection "${String(o)}" not found.`)}else warn$1$1("inject() can only be used inside setup() or functional components.")}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=o=>Object.getPrototypeOf(o)===internalObjectProto;function initProps(o,e,n,a=!1){const s={},l=createInternalObject();o.propsDefaults=Object.create(null),setFullProps(o,e,s,l);for(const c in o.propsOptions[0])c in s||(s[c]=void 0);validateProps(e||{},s,o),n?o.props=a?s:shallowReactive(s):o.type.props?o.props=s:o.props=l,o.attrs=l}function isInHmrContext(o){for(;o;){if(o.type.__hmrId)return!0;o=o.parent}}function updateProps(o,e,n,a){const{props:s,attrs:l,vnode:{patchFlag:c}}=o,d=toRaw(s),[u]=o.propsOptions;let f=!1;if(!isInHmrContext(o)&&(a||c>0)&&!(c&16)){if(c&8){const v=o.vnode.dynamicProps;for(let b=0;b<v.length;b++){let k=v[b];if(isEmitListener(o.emitsOptions,k))continue;const x=e[k];if(u)if(hasOwn$1(l,k))x!==l[k]&&(l[k]=x,f=!0);else{const _=camelize(k);s[_]=resolvePropValue(u,d,_,x,o,!1)}else x!==l[k]&&(l[k]=x,f=!0)}}}else{setFullProps(o,e,s,l)&&(f=!0);let v;for(const b in d)(!e||!hasOwn$1(e,b)&&((v=hyphenate$1(b))===b||!hasOwn$1(e,v)))&&(u?n&&(n[b]!==void 0||n[v]!==void 0)&&(s[b]=resolvePropValue(u,d,b,void 0,o,!0)):delete s[b]);if(l!==d)for(const b in l)(!e||!hasOwn$1(e,b))&&(delete l[b],f=!0)}f&&trigger(o.attrs,"set",""),validateProps(e||{},s,o)}function setFullProps(o,e,n,a){const[s,l]=o.propsOptions;let c=!1,d;if(e)for(let u in e){if(isReservedProp(u))continue;const f=e[u];let v;s&&hasOwn$1(s,v=camelize(u))?!l||!l.includes(v)?n[v]=f:(d||(d={}))[v]=f:isEmitListener(o.emitsOptions,u)||(!(u in a)||f!==a[u])&&(a[u]=f,c=!0)}if(l){const u=toRaw(n),f=d||EMPTY_OBJ;for(let v=0;v<l.length;v++){const b=l[v];n[b]=resolvePropValue(s,u,b,f[b],o,!hasOwn$1(f,b))}}return c}function resolvePropValue(o,e,n,a,s,l){const c=o[n];if(c!=null){const d=hasOwn$1(c,"default");if(d&&a===void 0){const u=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction$2(u)){const{propsDefaults:f}=s;if(n in f)a=f[n];else{const v=setCurrentInstance(s);a=f[n]=u.call(null,e),v()}}else a=u;s.ce&&s.ce._setProp(n,a)}c[0]&&(l&&!d?a=!1:c[1]&&(a===""||a===hyphenate$1(n))&&(a=!0))}return a}const mixinPropsCache=new WeakMap;function normalizePropsOptions(o,e,n=!1){const a=n?mixinPropsCache:e.propsCache,s=a.get(o);if(s)return s;const l=o.props,c={},d=[];let u=!1;if(!isFunction$2(o)){const v=b=>{u=!0;const[k,x]=normalizePropsOptions(b,e,!0);extend$1(c,k),x&&d.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(v),o.extends&&v(o.extends),o.mixins&&o.mixins.forEach(v)}if(!l&&!u)return isObject$3(o)&&a.set(o,EMPTY_ARR),EMPTY_ARR;if(isArray$3(l))for(let v=0;v<l.length;v++){isString$2(l[v])||warn$1$1("props must be strings when using array syntax.",l[v]);const b=camelize(l[v]);validatePropName(b)&&(c[b]=EMPTY_OBJ)}else if(l){isObject$3(l)||warn$1$1("invalid props options",l);for(const v in l){const b=camelize(v);if(validatePropName(b)){const k=l[v],x=c[b]=isArray$3(k)||isFunction$2(k)?{type:k}:extend$1({},k),_=x.type;let E=!1,B=!0;if(isArray$3(_))for(let M=0;M<_.length;++M){const I=_[M],F=isFunction$2(I)&&I.name;if(F==="Boolean"){E=!0;break}else F==="String"&&(B=!1)}else E=isFunction$2(_)&&_.name==="Boolean";x[0]=E,x[1]=B,(E||hasOwn$1(x,"default"))&&d.push(b)}}}const f=[c,d];return isObject$3(o)&&a.set(o,f),f}function validatePropName(o){return o[0]!=="$"&&!isReservedProp(o)?!0:(warn$1$1(`Invalid prop name: "${o}" is a reserved property.`),!1)}function getType(o){return o===null?"null":typeof o=="function"?o.name||"":typeof o=="object"&&o.constructor&&o.constructor.name||""}function validateProps(o,e,n){const a=toRaw(e),s=n.propsOptions[0],l=Object.keys(o).map(c=>camelize(c));for(const c in s){let d=s[c];d!=null&&validateProp(c,a[c],d,shallowReadonly(a),!l.includes(c))}}function validateProp(o,e,n,a,s){const{type:l,required:c,validator:d,skipCheck:u}=n;if(c&&s){warn$1$1('Missing required prop: "'+o+'"');return}if(!(e==null&&!c)){if(l!=null&&l!==!0&&!u){let f=!1;const v=isArray$3(l)?l:[l],b=[];for(let k=0;k<v.length&&!f;k++){const{valid:x,expectedType:_}=assertType(e,v[k]);b.push(_||""),f=x}if(!f){warn$1$1(getInvalidTypeMessage(o,e,b));return}}d&&!d(e,a)&&warn$1$1('Invalid prop: custom validator check failed for prop "'+o+'".')}}const isSimpleType=makeMap("String,Number,Boolean,Function,Symbol,BigInt");function assertType(o,e){let n;const a=getType(e);if(a==="null")n=o===null;else if(isSimpleType(a)){const s=typeof o;n=s===a.toLowerCase(),!n&&s==="object"&&(n=o instanceof e)}else a==="Object"?n=isObject$3(o):a==="Array"?n=isArray$3(o):n=o instanceof e;return{valid:n,expectedType:a}}function getInvalidTypeMessage(o,e,n){if(n.length===0)return`Prop type [] for prop "${o}" won't match anything. Did you mean to use type Array instead?`;let a=`Invalid prop: type check failed for prop "${o}". Expected ${n.map(capitalize$1).join(" | ")}`;const s=n[0],l=toRawType(e),c=styleValue(e,s),d=styleValue(e,l);return n.length===1&&isExplicable(s)&&!isBoolean$2(s,l)&&(a+=` with value ${c}`),a+=`, got ${l} `,isExplicable(l)&&(a+=`with value ${d}.`),a}function styleValue(o,e){return e==="String"?`"${o}"`:e==="Number"?`${Number(o)}`:`${o}`}function isExplicable(o){return["string","number","boolean"].some(e=>o.toLowerCase()===e)}function isBoolean$2(...o){return o.some(e=>e.toLowerCase()==="boolean")}const isInternalKey=o=>o[0]==="_"||o==="$stable",normalizeSlotValue=o=>isArray$3(o)?o.map(normalizeVNode):[normalizeVNode(o)],normalizeSlot$1=(o,e,n)=>{if(e._n)return e;const a=withCtx((...s)=>(currentInstance&&(!n||n.root===currentInstance.root)&&warn$1$1(`Slot "${o}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),normalizeSlotValue(e(...s))),n);return a._c=!1,a},normalizeObjectSlots=(o,e,n)=>{const a=o._ctx;for(const s in o){if(isInternalKey(s))continue;const l=o[s];if(isFunction$2(l))e[s]=normalizeSlot$1(s,l,a);else if(l!=null){warn$1$1(`Non-function value encountered for slot "${s}". Prefer function slots for better performance.`);const c=normalizeSlotValue(l);e[s]=()=>c}}},normalizeVNodeSlots=(o,e)=>{isKeepAlive(o.vnode)||warn$1$1("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=normalizeSlotValue(e);o.slots.default=()=>n},assignSlots=(o,e,n)=>{for(const a in e)(n||a!=="_")&&(o[a]=e[a])},initSlots=(o,e,n)=>{const a=o.slots=createInternalObject();if(o.vnode.shapeFlag&32){const s=e._;s?(assignSlots(a,e,n),n&&def(a,"_",s,!0)):normalizeObjectSlots(e,a)}else e&&normalizeVNodeSlots(o,e)},updateSlots=(o,e,n)=>{const{vnode:a,slots:s}=o;let l=!0,c=EMPTY_OBJ;if(a.shapeFlag&32){const d=e._;d?isHmrUpdating?(assignSlots(s,e,n),trigger(o,"set","$slots")):n&&d===1?l=!1:assignSlots(s,e,n):(l=!e.$stable,normalizeObjectSlots(e,s)),c=e}else e&&(normalizeVNodeSlots(o,e),c={default:1});if(l)for(const d in s)!isInternalKey(d)&&c[d]==null&&delete s[d]};let supported$1,perf$1;function startMeasure(o,e){o.appContext.config.performance&&isSupported()&&perf$1.mark(`vue-${e}-${o.uid}`),devtoolsPerfStart(o,e,isSupported()?perf$1.now():Date.now())}function endMeasure(o,e){if(o.appContext.config.performance&&isSupported()){const n=`vue-${e}-${o.uid}`,a=n+":end";perf$1.mark(a),perf$1.measure(`<${formatComponentName(o,o.type)}> ${e}`,n,a),perf$1.clearMarks(n),perf$1.clearMarks(a)}devtoolsPerfEnd(o,e,isSupported()?perf$1.now():Date.now())}function isSupported(){return supported$1!==void 0||(typeof window<"u"&&window.performance?(supported$1=!0,perf$1=window.performance):supported$1=!1),supported$1}function initFeatureFlags$2(){const o=[];if(o.length){const e=o.length>1;console.warn(`Feature flag${e?"s":""} ${o.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(o){return baseCreateRenderer(o)}function baseCreateRenderer(o,e){initFeatureFlags$2();const n=getGlobalThis$1();n.__VUE__=!0,setDevtoolsHook$1(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:a,remove:s,patchProp:l,createElement:c,createText:d,createComment:u,setText:f,setElementText:v,parentNode:b,nextSibling:k,setScopeId:x=NOOP,insertStaticContent:_}=o,E=(Z,ee,le,we=null,ke=null,_e=null,te=void 0,re=null,fe=isHmrUpdating?!1:!!ee.dynamicChildren)=>{if(Z===ee)return;Z&&!isSameVNodeType(Z,ee)&&(we=ze(Z),Xe(Z,ke,_e,!0),Z=null),ee.patchFlag===-2&&(fe=!1,ee.dynamicChildren=null);const{type:Ee,ref:qe,shapeFlag:de}=ee;switch(Ee){case Text$1:B(Z,ee,le,we);break;case Comment:M(Z,ee,le,we);break;case Static:Z==null?I(ee,le,we,te):F(Z,ee,le,te);break;case Fragment$1:ce(Z,ee,le,we,ke,_e,te,re,fe);break;default:de&1?U(Z,ee,le,we,ke,_e,te,re,fe):de&6?se(Z,ee,le,we,ke,_e,te,re,fe):de&64||de&128?Ee.process(Z,ee,le,we,ke,_e,te,re,fe,ue):warn$1$1("Invalid VNode type:",Ee,`(${typeof Ee})`)}qe!=null&&ke&&setRef(qe,Z&&Z.ref,_e,ee||Z,!ee)},B=(Z,ee,le,we)=>{if(Z==null)a(ee.el=d(ee.children),le,we);else{const ke=ee.el=Z.el;ee.children!==Z.children&&f(ke,ee.children)}},M=(Z,ee,le,we)=>{Z==null?a(ee.el=u(ee.children||""),le,we):ee.el=Z.el},I=(Z,ee,le,we)=>{[Z.el,Z.anchor]=_(Z.children,ee,le,we,Z.el,Z.anchor)},F=(Z,ee,le,we)=>{if(ee.children!==Z.children){const ke=k(Z.anchor);L(Z),[ee.el,ee.anchor]=_(ee.children,le,ke,we)}else ee.el=Z.el,ee.anchor=Z.anchor},V=({el:Z,anchor:ee},le,we)=>{let ke;for(;Z&&Z!==ee;)ke=k(Z),a(Z,le,we),Z=ke;a(ee,le,we)},L=({el:Z,anchor:ee})=>{let le;for(;Z&&Z!==ee;)le=k(Z),s(Z),Z=le;s(ee)},U=(Z,ee,le,we,ke,_e,te,re,fe)=>{ee.type==="svg"?te="svg":ee.type==="math"&&(te="mathml"),Z==null?j(ee,le,we,ke,_e,te,re,fe):K(Z,ee,ke,_e,te,re,fe)},j=(Z,ee,le,we,ke,_e,te,re)=>{let fe,Ee;const{props:qe,shapeFlag:de,transition:Ne,dirs:ht}=Z;if(fe=Z.el=c(Z.type,_e,qe&&qe.is,qe),de&8?v(fe,Z.children):de&16&&Y(Z.children,fe,null,we,ke,resolveChildrenNamespace(Z,_e),te,re),ht&&invokeDirectiveHook(Z,null,we,"created"),oe(fe,Z,Z.scopeId,te,we),qe){for(const St in qe)St!=="value"&&!isReservedProp(St)&&l(fe,St,null,qe[St],_e,we);"value"in qe&&l(fe,"value",null,qe.value,_e),(Ee=qe.onVnodeBeforeMount)&&invokeVNodeHook(Ee,we,Z)}def(fe,"__vnode",Z,!0),def(fe,"__vueParentComponent",we,!0),ht&&invokeDirectiveHook(Z,null,we,"beforeMount");const bt=needTransition(ke,Ne);bt&&Ne.beforeEnter(fe),a(fe,ee,le),((Ee=qe&&qe.onVnodeMounted)||bt||ht)&&queuePostRenderEffect(()=>{Ee&&invokeVNodeHook(Ee,we,Z),bt&&Ne.enter(fe),ht&&invokeDirectiveHook(Z,null,we,"mounted")},ke)},oe=(Z,ee,le,we,ke)=>{if(le&&x(Z,le),we)for(let _e=0;_e<we.length;_e++)x(Z,we[_e]);if(ke){let _e=ke.subTree;if(_e.patchFlag>0&&_e.patchFlag&2048&&(_e=filterSingleRoot(_e.children)||_e),ee===_e||isSuspense(_e.type)&&(_e.ssContent===ee||_e.ssFallback===ee)){const te=ke.vnode;oe(Z,te,te.scopeId,te.slotScopeIds,ke.parent)}}},Y=(Z,ee,le,we,ke,_e,te,re,fe=0)=>{for(let Ee=fe;Ee<Z.length;Ee++){const qe=Z[Ee]=re?cloneIfMounted(Z[Ee]):normalizeVNode(Z[Ee]);E(null,qe,ee,le,we,ke,_e,te,re)}},K=(Z,ee,le,we,ke,_e,te)=>{const re=ee.el=Z.el;re.__vnode=ee;let{patchFlag:fe,dynamicChildren:Ee,dirs:qe}=ee;fe|=Z.patchFlag&16;const de=Z.props||EMPTY_OBJ,Ne=ee.props||EMPTY_OBJ;let ht;if(le&&toggleRecurse(le,!1),(ht=Ne.onVnodeBeforeUpdate)&&invokeVNodeHook(ht,le,ee,Z),qe&&invokeDirectiveHook(ee,Z,le,"beforeUpdate"),le&&toggleRecurse(le,!0),isHmrUpdating&&(fe=0,te=!1,Ee=null),(de.innerHTML&&Ne.innerHTML==null||de.textContent&&Ne.textContent==null)&&v(re,""),Ee?(W(Z.dynamicChildren,Ee,re,le,we,resolveChildrenNamespace(ee,ke),_e),traverseStaticChildren(Z,ee)):te||Ge(Z,ee,re,null,le,we,resolveChildrenNamespace(ee,ke),_e,!1),fe>0){if(fe&16)G(re,de,Ne,le,ke);else if(fe&2&&de.class!==Ne.class&&l(re,"class",null,Ne.class,ke),fe&4&&l(re,"style",de.style,Ne.style,ke),fe&8){const bt=ee.dynamicProps;for(let St=0;St<bt.length;St++){const xt=bt[St],Ct=de[xt],$t=Ne[xt];($t!==Ct||xt==="value")&&l(re,xt,Ct,$t,ke,le)}}fe&1&&Z.children!==ee.children&&v(re,ee.children)}else!te&&Ee==null&&G(re,de,Ne,le,ke);((ht=Ne.onVnodeUpdated)||qe)&&queuePostRenderEffect(()=>{ht&&invokeVNodeHook(ht,le,ee,Z),qe&&invokeDirectiveHook(ee,Z,le,"updated")},we)},W=(Z,ee,le,we,ke,_e,te)=>{for(let re=0;re<ee.length;re++){const fe=Z[re],Ee=ee[re],qe=fe.el&&(fe.type===Fragment$1||!isSameVNodeType(fe,Ee)||fe.shapeFlag&70)?b(fe.el):le;E(fe,Ee,qe,null,we,ke,_e,te,!0)}},G=(Z,ee,le,we,ke)=>{if(ee!==le){if(ee!==EMPTY_OBJ)for(const _e in ee)!isReservedProp(_e)&&!(_e in le)&&l(Z,_e,ee[_e],null,ke,we);for(const _e in le){if(isReservedProp(_e))continue;const te=le[_e],re=ee[_e];te!==re&&_e!=="value"&&l(Z,_e,re,te,ke,we)}"value"in le&&l(Z,"value",ee.value,le.value,ke)}},ce=(Z,ee,le,we,ke,_e,te,re,fe)=>{const Ee=ee.el=Z?Z.el:d(""),qe=ee.anchor=Z?Z.anchor:d("");let{patchFlag:de,dynamicChildren:Ne,slotScopeIds:ht}=ee;(isHmrUpdating||de&2048)&&(de=0,fe=!1,Ne=null),ht&&(re=re?re.concat(ht):ht),Z==null?(a(Ee,le,we),a(qe,le,we),Y(ee.children||[],le,qe,ke,_e,te,re,fe)):de>0&&de&64&&Ne&&Z.dynamicChildren?(W(Z.dynamicChildren,Ne,le,ke,_e,te,re),traverseStaticChildren(Z,ee)):Ge(Z,ee,le,qe,ke,_e,te,re,fe)},se=(Z,ee,le,we,ke,_e,te,re,fe)=>{ee.slotScopeIds=re,Z==null?ee.shapeFlag&512?ke.ctx.activate(ee,le,we,te,fe):me(ee,le,we,ke,_e,te,fe):ge(Z,ee,fe)},me=(Z,ee,le,we,ke,_e,te)=>{const re=Z.component=createComponentInstance(Z,we,ke);if(re.type.__hmrId&&registerHMR(re),pushWarningContext(Z),startMeasure(re,"mount"),isKeepAlive(Z)&&(re.ctx.renderer=ue),startMeasure(re,"init"),setupComponent(re,!1,te),endMeasure(re,"init"),re.asyncDep){if(isHmrUpdating&&(Z.el=null),ke&&ke.registerDep(re,Te,te),!Z.el){const fe=re.subTree=createVNode(Comment);M(null,fe,ee,le)}}else Te(re,Z,ee,le,ke,_e,te);popWarningContext(),endMeasure(re,"mount")},ge=(Z,ee,le)=>{const we=ee.component=Z.component;if(shouldUpdateComponent(Z,ee,le))if(we.asyncDep&&!we.asyncResolved){pushWarningContext(ee),Be(we,ee,le),popWarningContext();return}else we.next=ee,we.update();else ee.el=Z.el,we.vnode=ee},Te=(Z,ee,le,we,ke,_e,te)=>{const re=()=>{if(Z.isMounted){let{next:de,bu:Ne,u:ht,parent:bt,vnode:St}=Z;{const Et=locateNonHydratedAsyncRoot(Z);if(Et){de&&(de.el=St.el,Be(Z,de,te)),Et.asyncDep.then(()=>{Z.isUnmounted||re()});return}}let xt=de,Ct;pushWarningContext(de||Z.vnode),toggleRecurse(Z,!1),de?(de.el=St.el,Be(Z,de,te)):de=St,Ne&&invokeArrayFns(Ne),(Ct=de.props&&de.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ct,bt,de,St),toggleRecurse(Z,!0),startMeasure(Z,"render");const $t=renderComponentRoot(Z);endMeasure(Z,"render");const Dt=Z.subTree;Z.subTree=$t,startMeasure(Z,"patch"),E(Dt,$t,b(Dt.el),ze(Dt),Z,ke,_e),endMeasure(Z,"patch"),de.el=$t.el,xt===null&&updateHOCHostEl(Z,$t.el),ht&&queuePostRenderEffect(ht,ke),(Ct=de.props&&de.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ct,bt,de,St),ke),devtoolsComponentUpdated(Z),popWarningContext()}else{let de;const{el:Ne,props:ht}=ee,{bm:bt,m:St,parent:xt,root:Ct,type:$t}=Z,Dt=isAsyncWrapper(ee);toggleRecurse(Z,!1),bt&&invokeArrayFns(bt),!Dt&&(de=ht&&ht.onVnodeBeforeMount)&&invokeVNodeHook(de,xt,ee),toggleRecurse(Z,!0);{Ct.ce&&Ct.ce._injectChildStyle($t),startMeasure(Z,"render");const Et=Z.subTree=renderComponentRoot(Z);endMeasure(Z,"render"),startMeasure(Z,"patch"),E(null,Et,le,we,Z,ke,_e),endMeasure(Z,"patch"),ee.el=Et.el}if(St&&queuePostRenderEffect(St,ke),!Dt&&(de=ht&&ht.onVnodeMounted)){const Et=ee;queuePostRenderEffect(()=>invokeVNodeHook(de,xt,Et),ke)}(ee.shapeFlag&256||xt&&isAsyncWrapper(xt.vnode)&&xt.vnode.shapeFlag&256)&&Z.a&&queuePostRenderEffect(Z.a,ke),Z.isMounted=!0,devtoolsComponentAdded(Z),ee=le=we=null}};Z.scope.on();const fe=Z.effect=new ReactiveEffect(re);Z.scope.off();const Ee=Z.update=fe.run.bind(fe),qe=Z.job=fe.runIfDirty.bind(fe);qe.i=Z,qe.id=Z.uid,fe.scheduler=()=>queueJob(qe),toggleRecurse(Z,!0),fe.onTrack=Z.rtc?de=>invokeArrayFns(Z.rtc,de):void 0,fe.onTrigger=Z.rtg?de=>invokeArrayFns(Z.rtg,de):void 0,Ee()},Be=(Z,ee,le)=>{ee.component=Z;const we=Z.vnode.props;Z.vnode=ee,Z.next=null,updateProps(Z,ee.props,we,le),updateSlots(Z,ee.children,le),pauseTracking(),flushPreFlushCbs(Z),resetTracking()},Ge=(Z,ee,le,we,ke,_e,te,re,fe=!1)=>{const Ee=Z&&Z.children,qe=Z?Z.shapeFlag:0,de=ee.children,{patchFlag:Ne,shapeFlag:ht}=ee;if(Ne>0){if(Ne&128){Oe(Ee,de,le,we,ke,_e,te,re,fe);return}else if(Ne&256){We(Ee,de,le,we,ke,_e,te,re,fe);return}}ht&8?(qe&16&&Ce(Ee,ke,_e),de!==Ee&&v(le,de)):qe&16?ht&16?Oe(Ee,de,le,we,ke,_e,te,re,fe):Ce(Ee,ke,_e,!0):(qe&8&&v(le,""),ht&16&&Y(de,le,we,ke,_e,te,re,fe))},We=(Z,ee,le,we,ke,_e,te,re,fe)=>{Z=Z||EMPTY_ARR,ee=ee||EMPTY_ARR;const Ee=Z.length,qe=ee.length,de=Math.min(Ee,qe);let Ne;for(Ne=0;Ne<de;Ne++){const ht=ee[Ne]=fe?cloneIfMounted(ee[Ne]):normalizeVNode(ee[Ne]);E(Z[Ne],ht,le,null,ke,_e,te,re,fe)}Ee>qe?Ce(Z,ke,_e,!0,!1,de):Y(ee,le,we,ke,_e,te,re,fe,de)},Oe=(Z,ee,le,we,ke,_e,te,re,fe)=>{let Ee=0;const qe=ee.length;let de=Z.length-1,Ne=qe-1;for(;Ee<=de&&Ee<=Ne;){const ht=Z[Ee],bt=ee[Ee]=fe?cloneIfMounted(ee[Ee]):normalizeVNode(ee[Ee]);if(isSameVNodeType(ht,bt))E(ht,bt,le,null,ke,_e,te,re,fe);else break;Ee++}for(;Ee<=de&&Ee<=Ne;){const ht=Z[de],bt=ee[Ne]=fe?cloneIfMounted(ee[Ne]):normalizeVNode(ee[Ne]);if(isSameVNodeType(ht,bt))E(ht,bt,le,null,ke,_e,te,re,fe);else break;de--,Ne--}if(Ee>de){if(Ee<=Ne){const ht=Ne+1,bt=ht<qe?ee[ht].el:we;for(;Ee<=Ne;)E(null,ee[Ee]=fe?cloneIfMounted(ee[Ee]):normalizeVNode(ee[Ee]),le,bt,ke,_e,te,re,fe),Ee++}}else if(Ee>Ne)for(;Ee<=de;)Xe(Z[Ee],ke,_e,!0),Ee++;else{const ht=Ee,bt=Ee,St=new Map;for(Ee=bt;Ee<=Ne;Ee++){const Pt=ee[Ee]=fe?cloneIfMounted(ee[Ee]):normalizeVNode(ee[Ee]);Pt.key!=null&&(St.has(Pt.key)&&warn$1$1("Duplicate keys found during update:",JSON.stringify(Pt.key),"Make sure keys are unique."),St.set(Pt.key,Ee))}let xt,Ct=0;const $t=Ne-bt+1;let Dt=!1,Et=0;const Kt=new Array($t);for(Ee=0;Ee<$t;Ee++)Kt[Ee]=0;for(Ee=ht;Ee<=de;Ee++){const Pt=Z[Ee];if(Ct>=$t){Xe(Pt,ke,_e,!0);continue}let Gt;if(Pt.key!=null)Gt=St.get(Pt.key);else for(xt=bt;xt<=Ne;xt++)if(Kt[xt-bt]===0&&isSameVNodeType(Pt,ee[xt])){Gt=xt;break}Gt===void 0?Xe(Pt,ke,_e,!0):(Kt[Gt-bt]=Ee+1,Gt>=Et?Et=Gt:Dt=!0,E(Pt,ee[Gt],le,null,ke,_e,te,re,fe),Ct++)}const er=Dt?getSequence(Kt):EMPTY_ARR;for(xt=er.length-1,Ee=$t-1;Ee>=0;Ee--){const Pt=bt+Ee,Gt=ee[Pt],dr=Pt+1<qe?ee[Pt+1].el:we;Kt[Ee]===0?E(null,Gt,le,dr,ke,_e,te,re,fe):Dt&&(xt<0||Ee!==er[xt]?Ve(Gt,le,dr,2):xt--)}}},Ve=(Z,ee,le,we,ke=null)=>{const{el:_e,type:te,transition:re,children:fe,shapeFlag:Ee}=Z;if(Ee&6){Ve(Z.component.subTree,ee,le,we);return}if(Ee&128){Z.suspense.move(ee,le,we);return}if(Ee&64){te.move(Z,ee,le,ue);return}if(te===Fragment$1){a(_e,ee,le);for(let qe=0;qe<fe.length;qe++)Ve(fe[qe],ee,le,we);a(Z.anchor,ee,le);return}if(te===Static){V(Z,ee,le);return}if(we!==2&&Ee&1&&re)if(we===0)re.beforeEnter(_e),a(_e,ee,le),queuePostRenderEffect(()=>re.enter(_e),ke);else{const{leave:qe,delayLeave:de,afterLeave:Ne}=re,ht=()=>a(_e,ee,le),bt=()=>{qe(_e,()=>{ht(),Ne&&Ne()})};de?de(_e,ht,bt):bt()}else a(_e,ee,le)},Xe=(Z,ee,le,we=!1,ke=!1)=>{const{type:_e,props:te,ref:re,children:fe,dynamicChildren:Ee,shapeFlag:qe,patchFlag:de,dirs:Ne,cacheIndex:ht}=Z;if(de===-2&&(ke=!1),re!=null&&setRef(re,null,le,Z,!0),ht!=null&&(ee.renderCache[ht]=void 0),qe&256){ee.ctx.deactivate(Z);return}const bt=qe&1&&Ne,St=!isAsyncWrapper(Z);let xt;if(St&&(xt=te&&te.onVnodeBeforeUnmount)&&invokeVNodeHook(xt,ee,Z),qe&6)ft(Z.component,le,we);else{if(qe&128){Z.suspense.unmount(le,we);return}bt&&invokeDirectiveHook(Z,null,ee,"beforeUnmount"),qe&64?Z.type.remove(Z,ee,le,ue,we):Ee&&!Ee.hasOnce&&(_e!==Fragment$1||de>0&&de&64)?Ce(Ee,ee,le,!1,!0):(_e===Fragment$1&&de&384||!ke&&qe&16)&&Ce(fe,ee,le),we&&dt(Z)}(St&&(xt=te&&te.onVnodeUnmounted)||bt)&&queuePostRenderEffect(()=>{xt&&invokeVNodeHook(xt,ee,Z),bt&&invokeDirectiveHook(Z,null,ee,"unmounted")},le)},dt=Z=>{const{type:ee,el:le,anchor:we,transition:ke}=Z;if(ee===Fragment$1){Z.patchFlag>0&&Z.patchFlag&2048&&ke&&!ke.persisted?Z.children.forEach(te=>{te.type===Comment?s(te.el):dt(te)}):pt(le,we);return}if(ee===Static){L(Z);return}const _e=()=>{s(le),ke&&!ke.persisted&&ke.afterLeave&&ke.afterLeave()};if(Z.shapeFlag&1&&ke&&!ke.persisted){const{leave:te,delayLeave:re}=ke,fe=()=>te(le,_e);re?re(Z.el,_e,fe):fe()}else _e()},pt=(Z,ee)=>{let le;for(;Z!==ee;)le=k(Z),s(Z),Z=le;s(ee)},ft=(Z,ee,le)=>{Z.type.__hmrId&&unregisterHMR(Z);const{bum:we,scope:ke,job:_e,subTree:te,um:re,m:fe,a:Ee}=Z;invalidateMount(fe),invalidateMount(Ee),we&&invokeArrayFns(we),ke.stop(),_e&&(_e.flags|=8,Xe(te,Z,ee,le)),re&&queuePostRenderEffect(re,ee),queuePostRenderEffect(()=>{Z.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve()),devtoolsComponentRemoved(Z)},Ce=(Z,ee,le,we=!1,ke=!1,_e=0)=>{for(let te=_e;te<Z.length;te++)Xe(Z[te],ee,le,we,ke)},ze=Z=>{if(Z.shapeFlag&6)return ze(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const ee=k(Z.anchor||Z.el),le=ee&&ee[TeleportEndKey];return le?k(le):ee};let Ze=!1;const pe=(Z,ee,le)=>{Z==null?ee._vnode&&Xe(ee._vnode,null,null,!0):E(ee._vnode||null,Z,ee,null,null,null,le),ee._vnode=Z,Ze||(Ze=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ze=!1)},ue={p:E,um:Xe,m:Ve,r:dt,mt:me,mc:Y,pc:Ge,pbc:W,n:ze,o};return{render:pe,hydrate:void 0,createApp:createAppAPI(pe)}}function resolveChildrenNamespace({type:o,props:e},n){return n==="svg"&&o==="foreignObject"||n==="mathml"&&o==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:o,job:e},n){n?(o.flags|=32,e.flags|=4):(o.flags&=-33,e.flags&=-5)}function needTransition(o,e){return(!o||o&&!o.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(o,e,n=!1){const a=o.children,s=e.children;if(isArray$3(a)&&isArray$3(s))for(let l=0;l<a.length;l++){const c=a[l];let d=s[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[l]=cloneIfMounted(s[l]),d.el=c.el),!n&&d.patchFlag!==-2&&traverseStaticChildren(c,d)),d.type===Text$1&&(d.el=c.el),d.type===Comment&&!d.el&&(d.el=c.el)}}function getSequence(o){const e=o.slice(),n=[0];let a,s,l,c,d;const u=o.length;for(a=0;a<u;a++){const f=o[a];if(f!==0){if(s=n[n.length-1],o[s]<f){e[a]=s,n.push(a);continue}for(l=0,c=n.length-1;l<c;)d=l+c>>1,o[n[d]]<f?l=d+1:c=d;f<o[n[l]]&&(l>0&&(e[a]=n[l-1]),n[l]=a)}}for(l=n.length,c=n[l-1];l-- >0;)n[l]=c,c=e[c];return n}function locateNonHydratedAsyncRoot(o){const e=o.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(o){if(o)for(let e=0;e<o.length;e++)o[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>{{const o=inject(ssrContextKey);return o||warn$1$1("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),o}};function watchEffect(o,e){return doWatch(o,null,e)}function watchPostEffect(o,e){return doWatch(o,null,extend$1({},e,{flush:"post"}))}function watchSyncEffect(o,e){return doWatch(o,null,extend$1({},e,{flush:"sync"}))}function watch(o,e,n){return isFunction$2(e)||warn$1$1("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),doWatch(o,e,n)}function doWatch(o,e,n=EMPTY_OBJ){const{immediate:a,deep:s,flush:l,once:c}=n;e||(a!==void 0&&warn$1$1('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&warn$1$1('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),c!==void 0&&warn$1$1('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const d=extend$1({},n);d.onWarn=warn$1$1;const u=e&&a||!e&&l!=="post";let f;if(isInSSRComponentSetup){if(l==="sync"){const x=useSSRContext();f=x.__watcherHandles||(x.__watcherHandles=[])}else if(!u){const x=()=>{};return x.stop=NOOP,x.resume=NOOP,x.pause=NOOP,x}}const v=currentInstance;d.call=(x,_,E)=>callWithAsyncErrorHandling(x,v,_,E);let b=!1;l==="post"?d.scheduler=x=>{queuePostRenderEffect(x,v&&v.suspense)}:l!=="sync"&&(b=!0,d.scheduler=(x,_)=>{_?x():queueJob(x)}),d.augmentJob=x=>{e&&(x.flags|=4),b&&(x.flags|=2,v&&(x.id=v.uid,x.i=v))};const k=watch$1(o,e,d);return isInSSRComponentSetup&&(f?f.push(k):u&&k()),k}function instanceWatch(o,e,n){const a=this.proxy,s=isString$2(o)?o.includes(".")?createPathGetter(a,o):()=>a[o]:o.bind(a,a);let l;isFunction$2(e)?l=e:(l=e.handler,n=e);const c=setCurrentInstance(this),d=doWatch(s,l.bind(a),n);return c(),d}function createPathGetter(o,e){const n=e.split(".");return()=>{let a=o;for(let s=0;s<n.length&&a;s++)a=a[n[s]];return a}}function useModel(o,e,n=EMPTY_OBJ){const a=getCurrentInstance();if(!a)return warn$1$1("useModel() called without active instance."),ref();const s=camelize(e);if(!a.propsOptions[0][s])return warn$1$1(`useModel() called with prop "${e}" which is not declared.`),ref();const l=hyphenate$1(e),c=getModelModifiers(o,s),d=customRef((u,f)=>{let v,b=EMPTY_OBJ,k;return watchSyncEffect(()=>{const x=o[s];hasChanged(v,x)&&(v=x,f())}),{get(){return u(),n.get?n.get(v):v},set(x){const _=n.set?n.set(x):x;if(!hasChanged(_,v)&&!(b!==EMPTY_OBJ&&hasChanged(x,b)))return;const E=a.vnode.props;E&&(e in E||s in E||l in E)&&(`onUpdate:${e}`in E||`onUpdate:${s}`in E||`onUpdate:${l}`in E)||(v=x,f()),a.emit(`update:${e}`,_),hasChanged(x,_)&&hasChanged(x,b)&&!hasChanged(_,k)&&f(),b=x,k=_}}});return d[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?c||EMPTY_OBJ:d,done:!1}:{done:!0}}}},d}const getModelModifiers=(o,e)=>e==="modelValue"||e==="model-value"?o.modelModifiers:o[`${e}Modifiers`]||o[`${camelize(e)}Modifiers`]||o[`${hyphenate$1(e)}Modifiers`];function emit(o,e,...n){if(o.isUnmounted)return;const a=o.vnode.props||EMPTY_OBJ;{const{emitsOptions:v,propsOptions:[b]}=o;if(v)if(!(e in v))(!b||!(toHandlerKey(camelize(e))in b))&&warn$1$1(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${toHandlerKey(camelize(e))}" prop.`);else{const k=v[e];isFunction$2(k)&&(k(...n)||warn$1$1(`Invalid event arguments: event validation failed for event "${e}".`))}}let s=n;const l=e.startsWith("update:"),c=l&&getModelModifiers(a,e.slice(7));c&&(c.trim&&(s=n.map(v=>isString$2(v)?v.trim():v)),c.number&&(s=n.map(looseToNumber))),devtoolsComponentEmit(o,e,s);{const v=e.toLowerCase();v!==e&&a[toHandlerKey(v)]&&warn$1$1(`Event "${v}" is emitted in component ${formatComponentName(o,o.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${hyphenate$1(e)}" instead of "${e}".`)}let d,u=a[d=toHandlerKey(e)]||a[d=toHandlerKey(camelize(e))];!u&&l&&(u=a[d=toHandlerKey(hyphenate$1(e))]),u&&callWithAsyncErrorHandling(u,o,6,s);const f=a[d+"Once"];if(f){if(!o.emitted)o.emitted={};else if(o.emitted[d])return;o.emitted[d]=!0,callWithAsyncErrorHandling(f,o,6,s)}}function normalizeEmitsOptions(o,e,n=!1){const a=e.emitsCache,s=a.get(o);if(s!==void 0)return s;const l=o.emits;let c={},d=!1;if(!isFunction$2(o)){const u=f=>{const v=normalizeEmitsOptions(f,e,!0);v&&(d=!0,extend$1(c,v))};!n&&e.mixins.length&&e.mixins.forEach(u),o.extends&&u(o.extends),o.mixins&&o.mixins.forEach(u)}return!l&&!d?(isObject$3(o)&&a.set(o,null),null):(isArray$3(l)?l.forEach(u=>c[u]=null):extend$1(c,l),isObject$3(o)&&a.set(o,c),c)}function isEmitListener(o,e){return!o||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$1(o,e[0].toLowerCase()+e.slice(1))||hasOwn$1(o,hyphenate$1(e))||hasOwn$1(o,e))}let accessedAttrs=!1;function markAttrsAccessed(){accessedAttrs=!0}function renderComponentRoot(o){const{type:e,vnode:n,proxy:a,withProxy:s,propsOptions:[l],slots:c,attrs:d,emit:u,render:f,renderCache:v,props:b,data:k,setupState:x,ctx:_,inheritAttrs:E}=o,B=setCurrentRenderingInstance(o);let M,I;accessedAttrs=!1;try{if(n.shapeFlag&4){const L=s||a,U=x.__isScriptSetup?new Proxy(L,{get(j,oe,Y){return warn$1$1(`Property '${String(oe)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(j,oe,Y)}}):L;M=normalizeVNode(f.call(U,L,v,shallowReadonly(b),x,k,_)),I=d}else{const L=e;d===b&&markAttrsAccessed(),M=normalizeVNode(L.length>1?L(shallowReadonly(b),{get attrs(){return markAttrsAccessed(),shallowReadonly(d)},slots:c,emit:u}):L(shallowReadonly(b),null)),I=e.props?d:getFunctionalFallthrough(d)}}catch(L){blockStack.length=0,handleError(L,o,1),M=createVNode(Comment)}let F=M,V;if(M.patchFlag>0&&M.patchFlag&2048&&([F,V]=getChildRoot(M)),I&&E!==!1){const L=Object.keys(I),{shapeFlag:U}=F;if(L.length){if(U&7)l&&L.some(isModelListener)&&(I=filterModelListeners(I,l)),F=cloneVNode(F,I,!1,!0);else if(!accessedAttrs&&F.type!==Comment){const j=Object.keys(d),oe=[],Y=[];for(let K=0,W=j.length;K<W;K++){const G=j[K];isOn(G)?isModelListener(G)||oe.push(G[2].toLowerCase()+G.slice(3)):Y.push(G)}Y.length&&warn$1$1(`Extraneous non-props attributes (${Y.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),oe.length&&warn$1$1(`Extraneous non-emits event listeners (${oe.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(isElementRoot(F)||warn$1$1("Runtime directive used on component with non-element root node. The directives will not function as intended."),F=cloneVNode(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&(isElementRoot(F)||warn$1$1("Component inside <Transition> renders non-element root node that cannot be animated."),setTransitionHooks(F,n.transition)),V?V(F):M=F,setCurrentRenderingInstance(B),M}const getChildRoot=o=>{const e=o.children,n=o.dynamicChildren,a=filterSingleRoot(e,!1);if(a){if(a.patchFlag>0&&a.patchFlag&2048)return getChildRoot(a)}else return[o,void 0];const s=e.indexOf(a),l=n?n.indexOf(a):-1,c=d=>{e[s]=d,n&&(l>-1?n[l]=d:d.patchFlag>0&&(o.dynamicChildren=[...n,d]))};return[normalizeVNode(a),c]};function filterSingleRoot(o,e=!0){let n;for(let a=0;a<o.length;a++){const s=o[a];if(isVNode$1(s)){if(s.type!==Comment||s.children==="v-if"){if(n)return;if(n=s,e&&n.patchFlag>0&&n.patchFlag&2048)return filterSingleRoot(n.children)}}else return}return n}const getFunctionalFallthrough=o=>{let e;for(const n in o)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=o[n]);return e},filterModelListeners=(o,e)=>{const n={};for(const a in o)(!isModelListener(a)||!(a.slice(9)in e))&&(n[a]=o[a]);return n},isElementRoot=o=>o.shapeFlag&7||o.type===Comment;function shouldUpdateComponent(o,e,n){const{props:a,children:s,component:l}=o,{props:c,children:d,patchFlag:u}=e,f=l.emitsOptions;if((s||d)&&isHmrUpdating||e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return a?hasPropsChanged(a,c,f):!!c;if(u&8){const v=e.dynamicProps;for(let b=0;b<v.length;b++){const k=v[b];if(c[k]!==a[k]&&!isEmitListener(f,k))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:a===c?!1:a?c?hasPropsChanged(a,c,f):!0:!!c;return!1}function hasPropsChanged(o,e,n){const a=Object.keys(e);if(a.length!==Object.keys(o).length)return!0;for(let s=0;s<a.length;s++){const l=a[s];if(e[l]!==o[l]&&!isEmitListener(n,l))return!0}return!1}function updateHOCHostEl({vnode:o,parent:e},n){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===o&&(a.el=o.el),a===o)(o=e.vnode).el=n,e=e.parent;else break}}const isSuspense=o=>o.__isSuspense;function queueEffectWithSuspense(o,e){e&&e.pendingBranch?isArray$3(o)?e.effects.push(...o):e.effects.push(o):queuePostFlushCb(o)}const Fragment$1=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(o=!1){blockStack.push(currentBlock=o?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(o,e=!1){isBlockTreeEnabled+=o,o<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(o){return o.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(o),o}function createElementBlock(o,e,n,a,s,l){return setupBlock(createBaseVNode(o,e,n,a,s,l,!0))}function createBlock(o,e,n,a,s){return setupBlock(createVNode(o,e,n,a,s,!0))}function isVNode$1(o){return o?o.__v_isVNode===!0:!1}function isSameVNodeType(o,e){if(e.shapeFlag&6&&o.component){const n=hmrDirtyComponents.get(e.type);if(n&&n.has(o.component))return o.shapeFlag&=-257,e.shapeFlag&=-513,!1}return o.type===e.type&&o.key===e.key}const createVNodeWithArgsTransform=(...o)=>_createVNode(...o),normalizeKey=({key:o})=>o??null,normalizeRef=({ref:o,ref_key:e,ref_for:n})=>(typeof o=="number"&&(o=""+o),o!=null?isString$2(o)||isRef(o)||isFunction$2(o)?{i:currentRenderingInstance,r:o,k:e,f:!!n}:o:null);function createBaseVNode(o,e=null,n=null,a=0,s=null,l=o===Fragment$1?0:1,c=!1,d=!1){const u={__v_isVNode:!0,__v_skip:!0,type:o,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return d?(normalizeChildren(u,n),l&128&&o.normalize(u)):n&&(u.shapeFlag|=isString$2(n)?8:16),u.key!==u.key&&warn$1$1("VNode created with invalid key (NaN). VNode type:",u.type),isBlockTreeEnabled>0&&!c&&currentBlock&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=createVNodeWithArgsTransform;function _createVNode(o,e=null,n=null,a=0,s=null,l=!1){if((!o||o===NULL_DYNAMIC_COMPONENT)&&(o||warn$1$1(`Invalid vnode type when creating vnode: ${o}.`),o=Comment),isVNode$1(o)){const d=cloneVNode(o,e,!0);return n&&normalizeChildren(d,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.shapeFlag&6?currentBlock[currentBlock.indexOf(o)]=d:currentBlock.push(d)),d.patchFlag=-2,d}if(isClassComponent(o)&&(o=o.__vccOpts),e){e=guardReactiveProps(e);let{class:d,style:u}=e;d&&!isString$2(d)&&(e.class=normalizeClass(d)),isObject$3(u)&&(isProxy(u)&&!isArray$3(u)&&(u=extend$1({},u)),e.style=normalizeStyle(u))}const c=isString$2(o)?1:isSuspense(o)?128:isTeleport(o)?64:isObject$3(o)?4:isFunction$2(o)?2:0;return c&4&&isProxy(o)&&(o=toRaw(o),warn$1$1("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,o)),createBaseVNode(o,e,n,a,s,c,l,!0)}function guardReactiveProps(o){return o?isProxy(o)||isInternalObject(o)?extend$1({},o):o:null}function cloneVNode(o,e,n=!1,a=!1){const{props:s,ref:l,patchFlag:c,children:d,transition:u}=o,f=e?mergeProps(s||{},e):s,v={__v_isVNode:!0,__v_skip:!0,type:o.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?n&&l?isArray$3(l)?l.concat(normalizeRef(e)):[l,normalizeRef(e)]:normalizeRef(e):l,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:c===-1&&isArray$3(d)?d.map(deepCloneVNode):d,target:o.target,targetStart:o.targetStart,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:e&&o.type!==Fragment$1?c===-1?16:c|16:c,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:u,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&cloneVNode(o.ssContent),ssFallback:o.ssFallback&&cloneVNode(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce};return u&&a&&setTransitionHooks(v,u.clone(v)),v}function deepCloneVNode(o){const e=cloneVNode(o);return isArray$3(o.children)&&(e.children=o.children.map(deepCloneVNode)),e}function createTextVNode(o=" ",e=0){return createVNode(Text$1,null,o,e)}function createCommentVNode(o="",e=!1){return e?(openBlock(),createBlock(Comment,null,o)):createVNode(Comment,null,o)}function normalizeVNode(o){return o==null||typeof o=="boolean"?createVNode(Comment):isArray$3(o)?createVNode(Fragment$1,null,o.slice()):isVNode$1(o)?cloneIfMounted(o):createVNode(Text$1,null,String(o))}function cloneIfMounted(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:cloneVNode(o)}function normalizeChildren(o,e){let n=0;const{shapeFlag:a}=o;if(e==null)e=null;else if(isArray$3(e))n=16;else if(typeof e=="object")if(a&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(o,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,o.patchFlag|=1024))}else isFunction$2(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),a&64?(n=16,e=[createTextVNode(e)]):n=8);o.children=e,o.shapeFlag|=n}function mergeProps(...o){const e={};for(let n=0;n<o.length;n++){const a=o[n];for(const s in a)if(s==="class")e.class!==a.class&&(e.class=normalizeClass([e.class,a.class]));else if(s==="style")e.style=normalizeStyle([e.style,a.style]);else if(isOn(s)){const l=e[s],c=a[s];c&&l!==c&&!(isArray$3(l)&&l.includes(c))&&(e[s]=l?[].concat(l,c):c)}else s!==""&&(e[s]=a[s])}return e}function invokeVNodeHook(o,e,n,a=null){callWithAsyncErrorHandling(o,e,7,[n,a])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(o,e,n){const a=o.type,s=(e?e.appContext:o.appContext)||emptyAppContext,l={uid:uid++,vnode:o,type:a,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,s),emitsOptions:normalizeEmitsOptions(a,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:a.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx=createDevRenderContext(l),l.root=e?e.root:l,l.emit=emit.bind(null,l),o.ce&&o.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const o=getGlobalThis$1(),e=(n,a)=>{let s;return(s=o[n])||(s=o[n]=[]),s.push(a),l=>{s.length>1?s.forEach(c=>c(l)):s[0](l)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=o=>{const e=currentInstance;return internalSetCurrentInstance(o),o.scope.on(),()=>{o.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)},isBuiltInTag=makeMap("slot,component");function validateComponentName(o,{isNativeTag:e}){(isBuiltInTag(o)||e(o))&&warn$1$1("Do not use built-in or reserved HTML elements as component id: "+o)}function isStatefulComponent(o){return o.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(o,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:a,children:s}=o.vnode,l=isStatefulComponent(o);initProps(o,a,l,e),initSlots(o,s,n);const c=l?setupStatefulComponent(o,e):void 0;return e&&setInSSRSetupState(!1),c}function setupStatefulComponent(o,e){var n;const a=o.type;{if(a.name&&validateComponentName(a.name,o.appContext.config),a.components){const l=Object.keys(a.components);for(let c=0;c<l.length;c++)validateComponentName(l[c],o.appContext.config)}if(a.directives){const l=Object.keys(a.directives);for(let c=0;c<l.length;c++)validateDirectiveName(l[c])}a.compilerOptions&&isRuntimeOnly()&&warn$1$1('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}o.accessCache=Object.create(null),o.proxy=new Proxy(o.ctx,PublicInstanceProxyHandlers),exposePropsOnRenderContext(o);const{setup:s}=a;if(s){pauseTracking();const l=o.setupContext=s.length>1?createSetupContext(o):null,c=setCurrentInstance(o),d=callWithErrorHandling(s,o,0,[shallowReadonly(o.props),l]),u=isPromise$1(d);if(resetTracking(),c(),(u||o.sp)&&!isAsyncWrapper(o)&&markAsyncBoundary(o),u){if(d.then(unsetCurrentInstance,unsetCurrentInstance),e)return d.then(f=>{handleSetupResult(o,f,e)}).catch(f=>{handleError(f,o,0)});if(o.asyncDep=d,!o.suspense){const f=(n=a.name)!=null?n:"Anonymous";warn$1$1(`Component <${f}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else handleSetupResult(o,d,e)}else finishComponentSetup(o,e)}function handleSetupResult(o,e,n){isFunction$2(e)?o.type.__ssrInlineRender?o.ssrRender=e:o.render=e:isObject$3(e)?(isVNode$1(e)&&warn$1$1("setup() should not return VNodes directly - return a render function instead."),o.devtoolsRawSetupState=e,o.setupState=proxyRefs(e),exposeSetupStateOnRenderContext(o)):e!==void 0&&warn$1$1(`setup() should return an object. Received: ${e===null?"null":typeof e}`),finishComponentSetup(o,n)}const isRuntimeOnly=()=>!0;function finishComponentSetup(o,e,n){const a=o.type;o.render||(o.render=a.render||NOOP);{const s=setCurrentInstance(o);pauseTracking();try{applyOptions(o)}finally{resetTracking(),s()}}!a.render&&o.render===NOOP&&!e&&(a.template?warn$1$1('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):warn$1$1("Component is missing template or render function: ",a))}const attrsProxyHandlers={get(o,e){return markAttrsAccessed(),track(o,"get",""),o[e]},set(){return warn$1$1("setupContext.attrs is readonly."),!1},deleteProperty(){return warn$1$1("setupContext.attrs is readonly."),!1}};function getSlotsProxy(o){return new Proxy(o.slots,{get(e,n){return track(o,"get","$slots"),e[n]}})}function createSetupContext(o){const e=n=>{if(o.exposed&&warn$1$1("expose() should be called only once per setup()."),n!=null){let a=typeof n;a==="object"&&(isArray$3(n)?a="array":isRef(n)&&(a="ref")),a!=="object"&&warn$1$1(`expose() should be passed a plain object, received ${a}.`)}o.exposed=n||{}};{let n,a;return Object.freeze({get attrs(){return n||(n=new Proxy(o.attrs,attrsProxyHandlers))},get slots(){return a||(a=getSlotsProxy(o))},get emit(){return(s,...l)=>o.emit(s,...l)},expose:e})}}function getComponentPublicInstance(o){return o.exposed?o.exposeProxy||(o.exposeProxy=new Proxy(proxyRefs(markRaw(o.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](o)},has(e,n){return n in e||n in publicPropertiesMap}})):o.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=o=>o.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(o,e=!0){return isFunction$2(o)?o.displayName||o.name:o.name||e&&o.__name}function formatComponentName(o,e,n=!1){let a=getComponentName(e);if(!a&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(a=s[1])}if(!a&&o&&o.parent){const s=l=>{for(const c in l)if(l[c]===e)return c};a=s(o.components||o.parent.type.components)||s(o.appContext.components)}return a?classify(a):n?"App":"Anonymous"}function isClassComponent(o){return isFunction$2(o)&&"__vccOpts"in o}const computed=(o,e)=>{const n=computed$1(o,e,isInSSRComponentSetup);{const a=getCurrentInstance();a&&a.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function h(o,e,n){const a=arguments.length;return a===2?isObject$3(e)&&!isArray$3(e)?isVNode$1(e)?createVNode(o,null,[e]):createVNode(o,e):createVNode(o,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&isVNode$1(n)&&(n=[n]),createVNode(o,e,n))}function initCustomFormatter(){if(typeof window>"u")return;const o={style:"color:#3ba776"},e={style:"color:#1677ff"},n={style:"color:#f5222d"},a={style:"color:#eb2f96"},s={__vue_custom_formatter:!0,header(b){return isObject$3(b)?b.__isVue?["div",o,"VueInstance"]:isRef(b)?["div",{},["span",o,v(b)],"<",d("_value"in b?b._value:b),">"]:isReactive(b)?["div",{},["span",o,isShallow(b)?"ShallowReactive":"Reactive"],"<",d(b),`>${isReadonly(b)?" (readonly)":""}`]:isReadonly(b)?["div",{},["span",o,isShallow(b)?"ShallowReadonly":"Readonly"],"<",d(b),">"]:null:null},hasBody(b){return b&&b.__isVue},body(b){if(b&&b.__isVue)return["div",{},...l(b.$)]}};function l(b){const k=[];b.type.props&&b.props&&k.push(c("props",toRaw(b.props))),b.setupState!==EMPTY_OBJ&&k.push(c("setup",b.setupState)),b.data!==EMPTY_OBJ&&k.push(c("data",toRaw(b.data)));const x=u(b,"computed");x&&k.push(c("computed",x));const _=u(b,"inject");return _&&k.push(c("injected",_)),k.push(["div",{},["span",{style:a.style+";opacity:0.66"},"$ (internal): "],["object",{object:b}]]),k}function c(b,k){return k=extend$1({},k),Object.keys(k).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},b],["div",{style:"padding-left:1.25em"},...Object.keys(k).map(x=>["div",{},["span",a,x+": "],d(k[x],!1)])]]:["span",{}]}function d(b,k=!0){return typeof b=="number"?["span",e,b]:typeof b=="string"?["span",n,JSON.stringify(b)]:typeof b=="boolean"?["span",a,b]:isObject$3(b)?["object",{object:k?toRaw(b):b}]:["span",n,String(b)]}function u(b,k){const x=b.type;if(isFunction$2(x))return;const _={};for(const E in b.ctx)f(x,E,k)&&(_[E]=b.ctx[E]);return _}function f(b,k,x){const _=b[x];if(isArray$3(_)&&_.includes(k)||isObject$3(_)&&k in _||b.extends&&f(b.extends,k,x)||b.mixins&&b.mixins.some(E=>f(E,k,x)))return!0}function v(b){return isShallow(b)?"ShallowRef":b.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}const version$1="3.5.13",warn$2=warn$1$1;let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:o=>o})}catch(o){warn$2(`Error creating trusted types policy: ${o}`)}const unsafeToTrustedHTML=policy?o=>policy.createHTML(o):o=>o,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$3=typeof document<"u"?document:null,templateContainer=doc$3&&doc$3.createElement("template"),nodeOps={insert:(o,e,n)=>{e.insertBefore(o,n||null)},remove:o=>{const e=o.parentNode;e&&e.removeChild(o)},createElement:(o,e,n,a)=>{const s=e==="svg"?doc$3.createElementNS(svgNS,o):e==="mathml"?doc$3.createElementNS(mathmlNS,o):n?doc$3.createElement(o,{is:n}):doc$3.createElement(o);return o==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:o=>doc$3.createTextNode(o),createComment:o=>doc$3.createComment(o),setText:(o,e)=>{o.nodeValue=e},setElementText:(o,e)=>{o.textContent=e},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>doc$3.querySelector(o),setScopeId(o,e){o.setAttribute(e,"")},insertStaticContent(o,e,n,a,s,l){const c=n?n.previousSibling:e.lastChild;if(s&&(s===l||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===l||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(a==="svg"?`<svg>${o}</svg>`:a==="mathml"?`<math>${o}</math>`:o);const d=templateContainer.content;if(a==="svg"||a==="mathml"){const u=d.firstChild;for(;u.firstChild;)d.appendChild(u.firstChild);d.removeChild(u)}e.insertBefore(d,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=o=>(o.displayName="Transition",o.props=TransitionPropsValidators,o),Transition=decorate$1((o,{slots:e})=>h(BaseTransition,resolveTransitionProps(o),e)),callHook=(o,e=[])=>{isArray$3(o)?o.forEach(n=>n(...e)):o&&o(...e)},hasExplicitCallback=o=>o?isArray$3(o)?o.some(e=>e.length>1):o.length>1:!1;function resolveTransitionProps(o){const e={};for(const G in o)G in DOMTransitionPropsValidators||(e[G]=o[G]);if(o.css===!1)return e;const{name:n="v",type:a,duration:s,enterFromClass:l=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:d=`${n}-enter-to`,appearFromClass:u=l,appearActiveClass:f=c,appearToClass:v=d,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:k=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=o,_=normalizeDuration(s),E=_&&_[0],B=_&&_[1],{onBeforeEnter:M,onEnter:I,onEnterCancelled:F,onLeave:V,onLeaveCancelled:L,onBeforeAppear:U=M,onAppear:j=I,onAppearCancelled:oe=F}=e,Y=(G,ce,se,me)=>{G._enterCancelled=me,removeTransitionClass(G,ce?v:d),removeTransitionClass(G,ce?f:c),se&&se()},K=(G,ce)=>{G._isLeaving=!1,removeTransitionClass(G,b),removeTransitionClass(G,x),removeTransitionClass(G,k),ce&&ce()},W=G=>(ce,se)=>{const me=G?j:I,ge=()=>Y(ce,G,se);callHook(me,[ce,ge]),nextFrame(()=>{removeTransitionClass(ce,G?u:l),addTransitionClass(ce,G?v:d),hasExplicitCallback(me)||whenTransitionEnds(ce,a,E,ge)})};return extend$1(e,{onBeforeEnter(G){callHook(M,[G]),addTransitionClass(G,l),addTransitionClass(G,c)},onBeforeAppear(G){callHook(U,[G]),addTransitionClass(G,u),addTransitionClass(G,f)},onEnter:W(!1),onAppear:W(!0),onLeave(G,ce){G._isLeaving=!0;const se=()=>K(G,ce);addTransitionClass(G,b),G._enterCancelled?(addTransitionClass(G,k),forceReflow()):(forceReflow(),addTransitionClass(G,k)),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,b),addTransitionClass(G,x),hasExplicitCallback(V)||whenTransitionEnds(G,a,B,se))}),callHook(V,[G,se])},onEnterCancelled(G){Y(G,!1,void 0,!0),callHook(F,[G])},onAppearCancelled(G){Y(G,!0,void 0,!0),callHook(oe,[G])},onLeaveCancelled(G){K(G),callHook(L,[G])}})}function normalizeDuration(o){if(o==null)return null;if(isObject$3(o))return[NumberOf(o.enter),NumberOf(o.leave)];{const e=NumberOf(o);return[e,e]}}function NumberOf(o){const e=toNumber(o);return assertNumber(e,"<transition> explicit duration"),e}function addTransitionClass(o,e){e.split(/\s+/).forEach(n=>n&&o.classList.add(n)),(o[vtcKey]||(o[vtcKey]=new Set)).add(e)}function removeTransitionClass(o,e){e.split(/\s+/).forEach(a=>a&&o.classList.remove(a));const n=o[vtcKey];n&&(n.delete(e),n.size||(o[vtcKey]=void 0))}function nextFrame(o){requestAnimationFrame(()=>{requestAnimationFrame(o)})}let endId=0;function whenTransitionEnds(o,e,n,a){const s=o._endId=++endId,l=()=>{s===o._endId&&a()};if(n!=null)return setTimeout(l,n);const{type:c,timeout:d,propCount:u}=getTransitionInfo(o,e);if(!c)return a();const f=c+"end";let v=0;const b=()=>{o.removeEventListener(f,k),l()},k=x=>{x.target===o&&++v>=u&&b()};setTimeout(()=>{v<u&&b()},d+1),o.addEventListener(f,k)}function getTransitionInfo(o,e){const n=window.getComputedStyle(o),a=_=>(n[_]||"").split(", "),s=a(`${TRANSITION}Delay`),l=a(`${TRANSITION}Duration`),c=getTimeout(s,l),d=a(`${ANIMATION}Delay`),u=a(`${ANIMATION}Duration`),f=getTimeout(d,u);let v=null,b=0,k=0;e===TRANSITION?c>0&&(v=TRANSITION,b=c,k=l.length):e===ANIMATION?f>0&&(v=ANIMATION,b=f,k=u.length):(b=Math.max(c,f),v=b>0?c>f?TRANSITION:ANIMATION:null,k=v?v===TRANSITION?l.length:u.length:0);const x=v===TRANSITION&&/\b(transform|all)(,|$)/.test(a(`${TRANSITION}Property`).toString());return{type:v,timeout:b,propCount:k,hasTransform:x}}function getTimeout(o,e){for(;o.length<e.length;)o=o.concat(o);return Math.max(...e.map((n,a)=>toMs(n)+toMs(o[a])))}function toMs(o){return o==="auto"?0:Number(o.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(o,e,n){const a=o[vtcKey];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?o.removeAttribute("class"):n?o.setAttribute("class",e):o.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol("CSS_VAR_TEXT"),displayRE=/(^|;)\s*display\s*:/;function patchStyle(o,e,n){const a=o.style,s=isString$2(n);let l=!1;if(n&&!s){if(e)if(isString$2(e))for(const c of e.split(";")){const d=c.slice(0,c.indexOf(":")).trim();n[d]==null&&setStyle(a,d,"")}else for(const c in e)n[c]==null&&setStyle(a,c,"");for(const c in n)c==="display"&&(l=!0),setStyle(a,c,n[c])}else if(s){if(e!==n){const c=a[CSS_VAR_TEXT];c&&(n+=";"+c),a.cssText=n,l=displayRE.test(n)}}else e&&o.removeAttribute("style");vShowOriginalDisplay in o&&(o[vShowOriginalDisplay]=l?a.display:"",o[vShowHidden]&&(a.display="none"))}const semicolonRE=/[^\\];\s*$/,importantRE=/\s*!important$/;function setStyle(o,e,n){if(isArray$3(n))n.forEach(a=>setStyle(o,e,a));else if(n==null&&(n=""),semicolonRE.test(n)&&warn$2(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))o.setProperty(e,n);else{const a=autoPrefix(o,e);importantRE.test(n)?o.setProperty(hyphenate$1(a),n.replace(importantRE,""),"important"):o[a]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(o,e){const n=prefixCache[e];if(n)return n;let a=camelize(e);if(a!=="filter"&&a in o)return prefixCache[e]=a;a=capitalize$1(a);for(let s=0;s<prefixes.length;s++){const l=prefixes[s]+a;if(l in o)return prefixCache[e]=l}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(o,e,n,a,s,l=isSpecialBooleanAttr(e)){a&&e.startsWith("xlink:")?n==null?o.removeAttributeNS(xlinkNS,e.slice(6,e.length)):o.setAttributeNS(xlinkNS,e,n):n==null||l&&!includeBooleanAttr(n)?o.removeAttribute(e):o.setAttribute(e,l?"":isSymbol(n)?String(n):n)}function patchDOMProp(o,e,n,a,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(o[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const l=o.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const d=l==="OPTION"?o.getAttribute("value")||"":o.value,u=n==null?o.type==="checkbox"?"on":"":String(n);(d!==u||!("_value"in o))&&(o.value=u),n==null&&o.removeAttribute(e),o._value=n;return}let c=!1;if(n===""||n==null){const d=typeof o[e];d==="boolean"?n=includeBooleanAttr(n):n==null&&d==="string"?(n="",c=!0):d==="number"&&(n=0,c=!0)}try{o[e]=n}catch(d){c||warn$2(`Failed setting prop "${e}" on <${l.toLowerCase()}>: value ${n} is invalid.`,d)}c&&o.removeAttribute(s||e)}function addEventListener(o,e,n,a){o.addEventListener(e,n,a)}function removeEventListener(o,e,n,a){o.removeEventListener(e,n,a)}const veiKey=Symbol("_vei");function patchEvent(o,e,n,a,s=null){const l=o[veiKey]||(o[veiKey]={}),c=l[e];if(a&&c)c.value=sanitizeEventValue(a,e);else{const[d,u]=parseName(e);if(a){const f=l[e]=createInvoker(sanitizeEventValue(a,e),s);addEventListener(o,d,f,u)}else c&&(removeEventListener(o,d,c,u),l[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(o){let e;if(optionsModifierRE.test(o)){e={};let n;for(;n=o.match(optionsModifierRE);)o=o.slice(0,o.length-n[0].length),e[n[0].toLowerCase()]=!0}return[o[2]===":"?o.slice(3):hyphenate$1(o.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(o,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(a,n.value),e,5,[a])};return n.value=o,n.attached=getNow(),n}function sanitizeEventValue(o,e){return isFunction$2(o)||isArray$3(o)?o:(warn$2(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof o}.`),NOOP)}function patchStopImmediatePropagation(o,e){if(isArray$3(e)){const n=o.stopImmediatePropagation;return o.stopImmediatePropagation=()=>{n.call(o),o._stopped=!0},e.map(a=>s=>!s._stopped&&a&&a(s))}else return e}const isNativeOn=o=>o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&o.charCodeAt(2)>96&&o.charCodeAt(2)<123,patchProp=(o,e,n,a,s,l)=>{const c=s==="svg";e==="class"?patchClass(o,a,c):e==="style"?patchStyle(o,n,a):isOn(e)?isModelListener(e)||patchEvent(o,e,n,a,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(o,e,a,c))?(patchDOMProp(o,e,a),!o.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(o,e,a,c,l,e!=="value")):o._isVueCE&&(/[A-Z]/.test(e)||!isString$2(a))?patchDOMProp(o,camelize(e),a,l,e):(e==="true-value"?o._trueValue=a:e==="false-value"&&(o._falseValue=a),patchAttr(o,e,a,c))};function shouldSetAsProp(o,e,n,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in o&&isNativeOn(e)&&isFunction$2(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&o.tagName==="INPUT"||e==="type"&&o.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=o.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(e)&&isString$2(n)?!1:e in o}const getModelAssigner=o=>{const e=o.props["onUpdate:modelValue"]||!1;return isArray$3(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(o){o.target.composing=!0}function onCompositionEnd(o){const e=o.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(o,{modifiers:{lazy:e,trim:n,number:a}},s){o[assignKey]=getModelAssigner(s);const l=a||s.props&&s.props.type==="number";addEventListener(o,e?"change":"input",c=>{if(c.target.composing)return;let d=o.value;n&&(d=d.trim()),l&&(d=looseToNumber(d)),o[assignKey](d)}),n&&addEventListener(o,"change",()=>{o.value=o.value.trim()}),e||(addEventListener(o,"compositionstart",onCompositionStart),addEventListener(o,"compositionend",onCompositionEnd),addEventListener(o,"change",onCompositionEnd))},mounted(o,{value:e}){o.value=e??""},beforeUpdate(o,{value:e,oldValue:n,modifiers:{lazy:a,trim:s,number:l}},c){if(o[assignKey]=getModelAssigner(c),o.composing)return;const d=(l||o.type==="number")&&!/^0\d/.test(o.value)?looseToNumber(o.value):o.value,u=e??"";d!==u&&(document.activeElement===o&&o.type!=="range"&&(a&&e===n||s&&o.value.trim()===u)||(o.value=u))}},vModelSelect={deep:!0,created(o,{value:e,modifiers:{number:n}},a){const s=isSet(e);addEventListener(o,"change",()=>{const l=Array.prototype.filter.call(o.options,c=>c.selected).map(c=>n?looseToNumber(getValue(c)):getValue(c));o[assignKey](o.multiple?s?new Set(l):l:l[0]),o._assigning=!0,nextTick(()=>{o._assigning=!1})}),o[assignKey]=getModelAssigner(a)},mounted(o,{value:e}){setSelected(o,e)},beforeUpdate(o,e,n){o[assignKey]=getModelAssigner(n)},updated(o,{value:e}){o._assigning||setSelected(o,e)}};function setSelected(o,e){const n=o.multiple,a=isArray$3(e);if(n&&!a&&!isSet(e)){warn$2(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(e).slice(8,-1)}.`);return}for(let s=0,l=o.options.length;s<l;s++){const c=o.options[s],d=getValue(c);if(n)if(a){const u=typeof d;u==="string"||u==="number"?c.selected=e.some(f=>String(f)===String(d)):c.selected=looseIndexOf(e,d)>-1}else c.selected=e.has(d);else if(looseEqual(getValue(c),e)){o.selectedIndex!==s&&(o.selectedIndex=s);return}}!n&&o.selectedIndex!==-1&&(o.selectedIndex=-1)}function getValue(o){return"_value"in o?o._value:o.value}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:o=>o.stopPropagation(),prevent:o=>o.preventDefault(),self:o=>o.target!==o.currentTarget,ctrl:o=>!o.ctrlKey,shift:o=>!o.shiftKey,alt:o=>!o.altKey,meta:o=>!o.metaKey,left:o=>"button"in o&&o.button!==0,middle:o=>"button"in o&&o.button!==1,right:o=>"button"in o&&o.button!==2,exact:(o,e)=>systemModifiers.some(n=>o[`${n}Key`]&&!e.includes(n))},withModifiers=(o,e)=>{const n=o._withMods||(o._withMods={}),a=e.join(".");return n[a]||(n[a]=(s,...l)=>{for(let c=0;c<e.length;c++){const d=modifierGuards[e[c]];if(d&&d(s,e))return}return o(s,...l)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(o,e)=>{const n=o._withKeys||(o._withKeys={}),a=e.join(".");return n[a]||(n[a]=s=>{if(!("key"in s))return;const l=hyphenate$1(s.key);if(e.some(c=>c===l||keyNames[c]===l))return o(s)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...o)=>{const e=ensureRenderer().createApp(...o);injectNativeTagCheck(e),injectCompilerOptionsCheck(e);const{mount:n}=e;return e.mount=a=>{const s=normalizeContainer(a);if(!s)return;const l=e._component;!isFunction$2(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=n(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},e};function resolveRootNamespace(o){if(o instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&o instanceof MathMLElement)return"mathml"}function injectNativeTagCheck(o){Object.defineProperty(o.config,"isNativeTag",{value:e=>isHTMLTag(e)||isSVGTag(e)||isMathMLTag(e),writable:!1})}function injectCompilerOptionsCheck(o){{const e=o.config.isCustomElement;Object.defineProperty(o.config,"isCustomElement",{get(){return e},set(){warn$2("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=o.config.compilerOptions,a='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(o.config,"compilerOptions",{get(){return warn$2(a),n},set(){warn$2(a)}})}}function normalizeContainer(o){if(isString$2(o)){const e=document.querySelector(o);return e||warn$2(`Failed to mount app: mount target selector "${o}" returned null.`),e}return window.ShadowRoot&&o instanceof window.ShadowRoot&&o.mode==="closed"&&warn$2('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),o}function initDev(){initCustomFormatter()}initDev();const inBrowser=typeof window<"u";let mark,measure;{const o=inBrowser&&window.performance;o&&o.mark&&o.measure&&o.clearMarks&&o.clearMeasures&&(mark=e=>{o.mark(e)},measure=(e,n,a)=>{o.measure(e,n,a),o.clearMarks(n),o.clearMarks(a)})}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$1(o,...e){return e.length===1&&isObject$2(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),o.replace(RE_ARGS,(n,a)=>e.hasOwnProperty(a)?e[a]:"")}const makeSymbol$1=(o,e=!1)=>e?Symbol.for(o):Symbol(o),generateFormatCacheKey=(o,e,n)=>friendlyJSONstringify({l:o,k:e,s:n}),friendlyJSONstringify=o=>JSON.stringify(o).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$2=o=>typeof o=="number"&&isFinite(o),isDate$1=o=>toTypeString(o)==="[object Date]",isRegExp$1=o=>toTypeString(o)==="[object RegExp]",isEmptyObject=o=>isPlainObject$1(o)&&Object.keys(o).length===0,assign$1=Object.assign,_create=Object.create,create$1=(o=null)=>_create(o);let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:create$1());function escapeHtml(o){return o.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(o,e){return hasOwnProperty$1.call(o,e)}const isArray$2=Array.isArray,isFunction$1=o=>typeof o=="function",isString$1=o=>typeof o=="string",isBoolean$1=o=>typeof o=="boolean",isObject$2=o=>o!==null&&typeof o=="object",isPromise=o=>isObject$2(o)&&isFunction$1(o.then)&&isFunction$1(o.catch),objectToString=Object.prototype.toString,toTypeString=o=>objectToString.call(o),isPlainObject$1=o=>toTypeString(o)==="[object Object]",toDisplayString=o=>o==null?"":isArray$2(o)||isPlainObject$1(o)&&o.toString===objectToString?JSON.stringify(o,null,2):String(o);function join$1(o,e=""){return o.reduce((n,a,s)=>s===0?n+a:n+e+a,"")}const RANGE=2;function generateCodeFrame(o,e=0,n=o.length){const a=o.split(/\r?\n/);let s=0;const l=[];for(let c=0;c<a.length;c++)if(s+=a[c].length+1,s>=e){for(let d=c-RANGE;d<=c+RANGE||n>s;d++){if(d<0||d>=a.length)continue;const u=d+1;l.push(`${u}${" ".repeat(3-String(u).length)}|  ${a[d]}`);const f=a[d].length;if(d===c){const v=e-(s-f)+1,b=Math.max(1,n>s?f-v:n-e);l.push("   |  "+" ".repeat(v)+"^".repeat(b))}else if(d>c){if(n>s){const v=Math.max(Math.min(n-s,f),1);l.push("   |  "+"^".repeat(v))}s+=f+1}}break}return l.join(`
`)}function warn$1(o,e){typeof console<"u"&&(console.warn("[intlify] "+o),e&&console.warn(e.stack))}const hasWarned={};function warnOnce(o){hasWarned[o]||(hasWarned[o]=!0,warn$1(o))}function createEmitter(){const o=new Map;return{events:o,on(e,n){const a=o.get(e);a&&a.push(n)||o.set(e,[n])},off(e,n){const a=o.get(e);a&&a.splice(a.indexOf(n)>>>0,1)},emit(e,n){(o.get(e)||[]).slice().map(a=>a(n)),(o.get("*")||[]).slice().map(a=>a(e,n))}}}const isNotObjectOrIsArray=o=>!isObject$2(o)||isArray$2(o);function deepCopy(o,e){if(isNotObjectOrIsArray(o)||isNotObjectOrIsArray(e))throw new Error("Invalid value");const n=[{src:o,des:e}];for(;n.length;){const{src:a,des:s}=n.pop();Object.keys(a).forEach(l=>{l!=="__proto__"&&(isObject$2(a[l])&&!isObject$2(s[l])&&(s[l]=Array.isArray(a[l])?[]:create$1()),isNotObjectOrIsArray(s[l])||isNotObjectOrIsArray(a[l])?s[l]=a[l]:n.push({src:a[l],des:s[l]}))})}}function createPosition(o,e,n){return{line:o,column:e,offset:n}}function createLocation(o,e,n){return{start:o,end:e}}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},COMPILE_ERROR_CODES_EXTEND_POINT=17,errorMessages$2={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(o,e,n={}){const{domain:a,messages:s,args:l}=n,c=format$1((s||errorMessages$2)[o]||"",...l||[]),d=new SyntaxError(String(c));return d.code=o,e&&(d.location=e),d.domain=a,d}function defaultOnError(o){throw o}const RE_HTML_TAG=/<\/?[\w\s="/.':;#-\/]+>/,detectHtmlTag=o=>RE_HTML_TAG.test(o),CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(o){const e=o;let n=0,a=1,s=1,l=0;const c=j=>e[j]===CHAR_CR&&e[j+1]===CHAR_LF,d=j=>e[j]===CHAR_LF,u=j=>e[j]===CHAR_PS,f=j=>e[j]===CHAR_LS,v=j=>c(j)||d(j)||u(j)||f(j),b=()=>n,k=()=>a,x=()=>s,_=()=>l,E=j=>c(j)||u(j)||f(j)?CHAR_LF:e[j],B=()=>E(n),M=()=>E(n+l);function I(){return l=0,v(n)&&(a++,s=0),c(n)&&n++,n++,s++,e[n]}function F(){return c(n+l)&&l++,l++,e[n+l]}function V(){n=0,a=1,s=1,l=0}function L(j=0){l=j}function U(){const j=n+l;for(;j!==n;)I();l=0}return{index:b,line:k,column:x,peekOffset:_,charAt:E,currentChar:B,currentPeek:M,next:I,peek:F,reset:V,resetPeek:L,skipToPeek:U}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(o,e={}){const n=e.location!==!1,a=createScanner(o),s=()=>a.index(),l=()=>createPosition(a.line(),a.column(),a.index()),c=l(),d=s(),u={currentType:13,offset:d,startLoc:c,endLoc:c,lastType:13,lastOffset:d,lastStartLoc:c,lastEndLoc:c,braceNest:0,inLinked:!1,text:""},f=()=>u,{onError:v}=e;function b(te,re,fe,...Ee){const qe=f();if(re.column+=fe,re.offset+=fe,v){const de=n?createLocation(qe.startLoc,re):null,Ne=createCompileError(te,de,{domain:ERROR_DOMAIN$3,args:Ee});v(Ne)}}function k(te,re,fe){te.endLoc=l(),te.currentType=re;const Ee={type:re};return n&&(Ee.loc=createLocation(te.startLoc,te.endLoc)),fe!=null&&(Ee.value=fe),Ee}const x=te=>k(te,13);function _(te,re){return te.currentChar()===re?(te.next(),re):(b(CompileErrorCodes.EXPECTED_TOKEN,l(),0,re),"")}function E(te){let re="";for(;te.currentPeek()===CHAR_SP||te.currentPeek()===CHAR_LF;)re+=te.currentPeek(),te.peek();return re}function B(te){const re=E(te);return te.skipToPeek(),re}function M(te){if(te===EOF)return!1;const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re===95}function I(te){if(te===EOF)return!1;const re=te.charCodeAt(0);return re>=48&&re<=57}function F(te,re){const{currentType:fe}=re;if(fe!==2)return!1;E(te);const Ee=M(te.currentPeek());return te.resetPeek(),Ee}function V(te,re){const{currentType:fe}=re;if(fe!==2)return!1;E(te);const Ee=te.currentPeek()==="-"?te.peek():te.currentPeek(),qe=I(Ee);return te.resetPeek(),qe}function L(te,re){const{currentType:fe}=re;if(fe!==2)return!1;E(te);const Ee=te.currentPeek()===LITERAL_DELIMITER;return te.resetPeek(),Ee}function U(te,re){const{currentType:fe}=re;if(fe!==7)return!1;E(te);const Ee=te.currentPeek()===".";return te.resetPeek(),Ee}function j(te,re){const{currentType:fe}=re;if(fe!==8)return!1;E(te);const Ee=M(te.currentPeek());return te.resetPeek(),Ee}function oe(te,re){const{currentType:fe}=re;if(!(fe===7||fe===11))return!1;E(te);const Ee=te.currentPeek()===":";return te.resetPeek(),Ee}function Y(te,re){const{currentType:fe}=re;if(fe!==9)return!1;const Ee=()=>{const de=te.currentPeek();return de==="{"?M(te.peek()):de==="@"||de==="|"||de===":"||de==="."||de===CHAR_SP||!de?!1:de===CHAR_LF?(te.peek(),Ee()):W(te,!1)},qe=Ee();return te.resetPeek(),qe}function K(te){E(te);const re=te.currentPeek()==="|";return te.resetPeek(),re}function W(te,re=!0){const fe=(qe=!1,de="")=>{const Ne=te.currentPeek();return Ne==="{"||Ne==="@"||!Ne?qe:Ne==="|"?!(de===CHAR_SP||de===CHAR_LF):Ne===CHAR_SP?(te.peek(),fe(!0,CHAR_SP)):Ne===CHAR_LF?(te.peek(),fe(!0,CHAR_LF)):!0},Ee=fe();return re&&te.resetPeek(),Ee}function G(te,re){const fe=te.currentChar();return fe===EOF?EOF:re(fe)?(te.next(),fe):null}function ce(te){const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36}function se(te){return G(te,ce)}function me(te){const re=te.charCodeAt(0);return re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===95||re===36||re===45}function ge(te){return G(te,me)}function Te(te){const re=te.charCodeAt(0);return re>=48&&re<=57}function Be(te){return G(te,Te)}function Ge(te){const re=te.charCodeAt(0);return re>=48&&re<=57||re>=65&&re<=70||re>=97&&re<=102}function We(te){return G(te,Ge)}function Oe(te){let re="",fe="";for(;re=Be(te);)fe+=re;return fe}function Ve(te){let re="";for(;;){const fe=te.currentChar();if(fe==="{"||fe==="}"||fe==="@"||fe==="|"||!fe)break;if(fe===CHAR_SP||fe===CHAR_LF)if(W(te))re+=fe,te.next();else{if(K(te))break;re+=fe,te.next()}else re+=fe,te.next()}return re}function Xe(te){B(te);let re="",fe="";for(;re=ge(te);)fe+=re;return te.currentChar()===EOF&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),fe}function dt(te){B(te);let re="";return te.currentChar()==="-"?(te.next(),re+=`-${Oe(te)}`):re+=Oe(te),te.currentChar()===EOF&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re}function pt(te){return te!==LITERAL_DELIMITER&&te!==CHAR_LF}function ft(te){B(te),_(te,"'");let re="",fe="";for(;re=G(te,pt);)re==="\\"?fe+=Ce(te):fe+=re;const Ee=te.currentChar();return Ee===CHAR_LF||Ee===EOF?(b(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),Ee===CHAR_LF&&(te.next(),_(te,"'")),fe):(_(te,"'"),fe)}function Ce(te){const re=te.currentChar();switch(re){case"\\":case"'":return te.next(),`\\${re}`;case"u":return ze(te,re,4);case"U":return ze(te,re,6);default:return b(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,l(),0,re),""}}function ze(te,re,fe){_(te,re);let Ee="";for(let qe=0;qe<fe;qe++){const de=We(te);if(!de){b(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${re}${Ee}${te.currentChar()}`);break}Ee+=de}return`\\${re}${Ee}`}function Ze(te){return te!=="{"&&te!=="}"&&te!==CHAR_SP&&te!==CHAR_LF}function pe(te){B(te);let re="",fe="";for(;re=G(te,Ze);)fe+=re;return fe}function ue(te){let re="",fe="";for(;re=se(te);)fe+=re;return fe}function Z(te){const re=fe=>{const Ee=te.currentChar();return Ee==="{"||Ee==="@"||Ee==="|"||Ee==="("||Ee===")"||!Ee||Ee===CHAR_SP?fe:(fe+=Ee,te.next(),re(fe))};return re("")}function ee(te){B(te);const re=_(te,"|");return B(te),re}function le(te,re){let fe=null;switch(te.currentChar()){case"{":return re.braceNest>=1&&b(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),te.next(),fe=k(re,2,"{"),B(te),re.braceNest++,fe;case"}":return re.braceNest>0&&re.currentType===2&&b(CompileErrorCodes.EMPTY_PLACEHOLDER,l(),0),te.next(),fe=k(re,3,"}"),re.braceNest--,re.braceNest>0&&B(te),re.inLinked&&re.braceNest===0&&(re.inLinked=!1),fe;case"@":return re.braceNest>0&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),fe=we(te,re)||x(re),re.braceNest=0,fe;default:{let Ee=!0,qe=!0,de=!0;if(K(te))return re.braceNest>0&&b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),fe=k(re,1,ee(te)),re.braceNest=0,re.inLinked=!1,fe;if(re.braceNest>0&&(re.currentType===4||re.currentType===5||re.currentType===6))return b(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),re.braceNest=0,ke(te,re);if(Ee=F(te,re))return fe=k(re,4,Xe(te)),B(te),fe;if(qe=V(te,re))return fe=k(re,5,dt(te)),B(te),fe;if(de=L(te,re))return fe=k(re,6,ft(te)),B(te),fe;if(!Ee&&!qe&&!de)return fe=k(re,12,pe(te)),b(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,fe.value),B(te),fe;break}}return fe}function we(te,re){const{currentType:fe}=re;let Ee=null;const qe=te.currentChar();switch((fe===7||fe===8||fe===11||fe===9)&&(qe===CHAR_LF||qe===CHAR_SP)&&b(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),qe){case"@":return te.next(),Ee=k(re,7,"@"),re.inLinked=!0,Ee;case".":return B(te),te.next(),k(re,8,".");case":":return B(te),te.next(),k(re,9,":");default:return K(te)?(Ee=k(re,1,ee(te)),re.braceNest=0,re.inLinked=!1,Ee):U(te,re)||oe(te,re)?(B(te),we(te,re)):j(te,re)?(B(te),k(re,11,ue(te))):Y(te,re)?(B(te),qe==="{"?le(te,re)||Ee:k(re,10,Z(te))):(fe===7&&b(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),re.braceNest=0,re.inLinked=!1,ke(te,re))}}function ke(te,re){let fe={type:13};if(re.braceNest>0)return le(te,re)||x(re);if(re.inLinked)return we(te,re)||x(re);switch(te.currentChar()){case"{":return le(te,re)||x(re);case"}":return b(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,l(),0),te.next(),k(re,3,"}");case"@":return we(te,re)||x(re);default:{if(K(te))return fe=k(re,1,ee(te)),re.braceNest=0,re.inLinked=!1,fe;if(W(te))return k(re,0,Ve(te));break}}return fe}function _e(){const{currentType:te,offset:re,startLoc:fe,endLoc:Ee}=u;return u.lastType=te,u.lastOffset=re,u.lastStartLoc=fe,u.lastEndLoc=Ee,u.offset=s(),u.startLoc=l(),a.currentChar()===EOF?k(u,13):ke(a,u)}return{nextToken:_e,currentOffset:s,currentPosition:l,context:f}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(o,e,n){switch(o){case"\\\\":return"\\";case"\\'":return"'";default:{const a=parseInt(e||n,16);return a<=55295||a>=57344?String.fromCodePoint(a):"\uFFFD"}}}function createParser(o={}){const e=o.location!==!1,{onError:n}=o;function a(M,I,F,V,...L){const U=M.currentPosition();if(U.offset+=V,U.column+=V,n){const j=e?createLocation(F,U):null,oe=createCompileError(I,j,{domain:ERROR_DOMAIN$2,args:L});n(oe)}}function s(M,I,F){const V={type:M};return e&&(V.start=I,V.end=I,V.loc={start:F,end:F}),V}function l(M,I,F,V){e&&(M.end=I,M.loc&&(M.loc.end=F))}function c(M,I){const F=M.context(),V=s(3,F.offset,F.startLoc);return V.value=I,l(V,M.currentOffset(),M.currentPosition()),V}function d(M,I){const F=M.context(),{lastOffset:V,lastStartLoc:L}=F,U=s(5,V,L);return U.index=parseInt(I,10),M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function u(M,I){const F=M.context(),{lastOffset:V,lastStartLoc:L}=F,U=s(4,V,L);return U.key=I,M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function f(M,I){const F=M.context(),{lastOffset:V,lastStartLoc:L}=F,U=s(9,V,L);return U.value=I.replace(KNOWN_ESCAPES,fromEscapeSequence),M.nextToken(),l(U,M.currentOffset(),M.currentPosition()),U}function v(M){const I=M.nextToken(),F=M.context(),{lastOffset:V,lastStartLoc:L}=F,U=s(8,V,L);return I.type!==11?(a(M,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,F.lastStartLoc,0),U.value="",l(U,V,L),{nextConsumeToken:I,node:U}):(I.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,getTokenCaption(I)),U.value=I.value||"",l(U,M.currentOffset(),M.currentPosition()),{node:U})}function b(M,I){const F=M.context(),V=s(7,F.offset,F.startLoc);return V.value=I,l(V,M.currentOffset(),M.currentPosition()),V}function k(M){const I=M.context(),F=s(6,I.offset,I.startLoc);let V=M.nextToken();if(V.type===8){const L=v(M);F.modifier=L.node,V=L.nextConsumeToken||M.nextToken()}switch(V.type!==9&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(V)),V=M.nextToken(),V.type===2&&(V=M.nextToken()),V.type){case 10:V.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(V)),F.key=b(M,V.value||"");break;case 4:V.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(V)),F.key=u(M,V.value||"");break;case 5:V.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(V)),F.key=d(M,V.value||"");break;case 6:V.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(V)),F.key=f(M,V.value||"");break;default:{a(M,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,I.lastStartLoc,0);const L=M.context(),U=s(7,L.offset,L.startLoc);return U.value="",l(U,L.offset,L.startLoc),F.key=U,l(F,L.offset,L.startLoc),{nextConsumeToken:V,node:F}}}return l(F,M.currentOffset(),M.currentPosition()),{node:F}}function x(M){const I=M.context(),F=I.currentType===1?M.currentOffset():I.offset,V=I.currentType===1?I.endLoc:I.startLoc,L=s(2,F,V);L.items=[];let U=null;do{const Y=U||M.nextToken();switch(U=null,Y.type){case 0:Y.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(Y)),L.items.push(c(M,Y.value||""));break;case 5:Y.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(Y)),L.items.push(d(M,Y.value||""));break;case 4:Y.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(Y)),L.items.push(u(M,Y.value||""));break;case 6:Y.value==null&&a(M,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(Y)),L.items.push(f(M,Y.value||""));break;case 7:{const K=k(M);L.items.push(K.node),U=K.nextConsumeToken||null;break}}}while(I.currentType!==13&&I.currentType!==1);const j=I.currentType===1?I.lastOffset:M.currentOffset(),oe=I.currentType===1?I.lastEndLoc:M.currentPosition();return l(L,j,oe),L}function _(M,I,F,V){const L=M.context();let U=V.items.length===0;const j=s(1,I,F);j.cases=[],j.cases.push(V);do{const oe=x(M);U||(U=oe.items.length===0),j.cases.push(oe)}while(L.currentType!==13);return U&&a(M,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,F,0),l(j,M.currentOffset(),M.currentPosition()),j}function E(M){const I=M.context(),{offset:F,startLoc:V}=I,L=x(M);return I.currentType===13?L:_(M,F,V,L)}function B(M){const I=createTokenizer(M,assign$1({},o)),F=I.context(),V=s(0,F.offset,F.startLoc);return e&&V.loc&&(V.loc.source=M),V.body=E(I),o.onCacheKey&&(V.cacheKey=o.onCacheKey(M)),F.currentType!==13&&a(I,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,M[F.offset]||""),l(V,I.currentOffset(),I.currentPosition()),V}return{parse:B}}function getTokenCaption(o){if(o.type===13)return"EOF";const e=(o.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"\u2026":e}function createTransformer(o,e={}){const n={ast:o,helpers:new Set};return{context:()=>n,helper:a=>(n.helpers.add(a),a)}}function traverseNodes(o,e){for(let n=0;n<o.length;n++)traverseNode(o[n],e)}function traverseNode(o,e){switch(o.type){case 1:traverseNodes(o.cases,e),e.helper("plural");break;case 2:traverseNodes(o.items,e);break;case 6:{traverseNode(o.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(o,e={}){const n=createTransformer(o);n.helper("normalize"),o.body&&traverseNode(o.body,n);const a=n.context();o.helpers=Array.from(a.helpers)}function optimize(o){const e=o.body;return e.type===2?optimizeMessageNode(e):e.cases.forEach(n=>optimizeMessageNode(n)),o}function optimizeMessageNode(o){if(o.items.length===1){const e=o.items[0];(e.type===3||e.type===9)&&(o.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<o.items.length;n++){const a=o.items[n];if(!(a.type===3||a.type===9)||a.value==null)break;e.push(a.value)}if(e.length===o.items.length){o.static=join$1(e);for(let n=0;n<o.items.length;n++){const a=o.items[n];(a.type===3||a.type===9)&&delete a.value}}}}const ERROR_DOMAIN$1="minifier";function minify(o){switch(o.t=o.type,o.type){case 0:{const e=o;minify(e.body),e.b=e.body,delete e.body;break}case 1:{const e=o,n=e.cases;for(let a=0;a<n.length;a++)minify(n[a]);e.c=n,delete e.cases;break}case 2:{const e=o,n=e.items;for(let a=0;a<n.length;a++)minify(n[a]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=o;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=o;minify(e.key),e.k=e.key,delete e.key,e.modifier&&(minify(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=o;e.i=e.index,delete e.index;break}case 4:{const e=o;e.k=e.key,delete e.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[o.type]})}delete o.type}const ERROR_DOMAIN="parser";function createCodeGenerator(o,e){const{sourceMap:n,filename:a,breakLineCode:s,needIndent:l}=e,c=e.location!==!1,d={filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:l,indentLevel:0};c&&o.loc&&(d.source=o.loc.source);const u=()=>d;function f(_,E){d.code+=_}function v(_,E=!0){const B=E?s:"";f(l?B+"  ".repeat(_):B)}function b(_=!0){const E=++d.indentLevel;_&&v(E)}function k(_=!0){const E=--d.indentLevel;_&&v(E)}function x(){v(d.indentLevel)}return{context:u,push:f,indent:b,deindent:k,newline:x,helper:_=>`_${_}`,needIndent:()=>d.needIndent}}function generateLinkedNode(o,e){const{helper:n}=o;o.push(`${n("linked")}(`),generateNode(o,e.key),e.modifier?(o.push(", "),generateNode(o,e.modifier),o.push(", _type")):o.push(", undefined, _type"),o.push(")")}function generateMessageNode(o,e){const{helper:n,needIndent:a}=o;o.push(`${n("normalize")}([`),o.indent(a());const s=e.items.length;for(let l=0;l<s&&(generateNode(o,e.items[l]),l!==s-1);l++)o.push(", ");o.deindent(a()),o.push("])")}function generatePluralNode(o,e){const{helper:n,needIndent:a}=o;if(e.cases.length>1){o.push(`${n("plural")}([`),o.indent(a());const s=e.cases.length;for(let l=0;l<s&&(generateNode(o,e.cases[l]),l!==s-1);l++)o.push(", ");o.deindent(a()),o.push("])")}}function generateResource(o,e){e.body?generateNode(o,e.body):o.push("null")}function generateNode(o,e){const{helper:n}=o;switch(e.type){case 0:generateResource(o,e);break;case 1:generatePluralNode(o,e);break;case 2:generateMessageNode(o,e);break;case 6:generateLinkedNode(o,e);break;case 8:o.push(JSON.stringify(e.value),e);break;case 7:o.push(JSON.stringify(e.value),e);break;case 5:o.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:o.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:o.push(JSON.stringify(e.value),e);break;case 3:o.push(JSON.stringify(e.value),e);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[e.type]})}}const generate=(o,e={})=>{const n=isString$1(e.mode)?e.mode:"normal",a=isString$1(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,l=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,c=e.needIndent?e.needIndent:n!=="arrow",d=o.helpers||[],u=createCodeGenerator(o,{mode:n,filename:a,sourceMap:s,breakLineCode:l,needIndent:c});u.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(c),d.length>0&&(u.push(`const { ${join$1(d.map(b=>`${b}: _${b}`),", ")} } = ctx`),u.newline()),u.push("return "),generateNode(u,o),u.deindent(c),u.push("}"),delete o.helpers;const{code:f,map:v}=u.context();return{ast:o,code:f,map:v?v.toJSON():void 0}};function baseCompile$1(o,e={}){const n=assign$1({},e),a=!!n.jit,s=!!n.minify,l=n.optimize==null?!0:n.optimize,c=createParser(n).parse(o);return a?(l&&optimize(c),s&&minify(c),{ast:c,code:""}):(transform(c,n),generate(c,n))}function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function format(o){return e=>formatParts(e,o)}function formatParts(o,e){const n=resolveBody(e);if(n==null)throw createUnhandleNodeError(0);if(resolveType(n)===1){const a=resolveCases(n);return o.plural(a.reduce((s,l)=>[...s,formatMessageParts(o,l)],[]))}else return formatMessageParts(o,n)}const PROPS_BODY=["b","body"];function resolveBody(o){return resolveProps(o,PROPS_BODY)}const PROPS_CASES=["c","cases"];function resolveCases(o){return resolveProps(o,PROPS_CASES,[])}function formatMessageParts(o,e){const n=resolveStatic(e);if(n!=null)return o.type==="text"?n:o.normalize([n]);{const a=resolveItems(e).reduce((s,l)=>[...s,formatMessagePart(o,l)],[]);return o.normalize(a)}}const PROPS_STATIC=["s","static"];function resolveStatic(o){return resolveProps(o,PROPS_STATIC)}const PROPS_ITEMS=["i","items"];function resolveItems(o){return resolveProps(o,PROPS_ITEMS,[])}function formatMessagePart(o,e){const n=resolveType(e);switch(n){case 3:return resolveValue$1(e,n);case 9:return resolveValue$1(e,n);case 4:{const a=e;if(hasOwn(a,"k")&&a.k)return o.interpolate(o.named(a.k));if(hasOwn(a,"key")&&a.key)return o.interpolate(o.named(a.key));throw createUnhandleNodeError(n)}case 5:{const a=e;if(hasOwn(a,"i")&&isNumber$2(a.i))return o.interpolate(o.list(a.i));if(hasOwn(a,"index")&&isNumber$2(a.index))return o.interpolate(o.list(a.index));throw createUnhandleNodeError(n)}case 6:{const a=e,s=resolveLinkedModifier(a),l=resolveLinkedKey(a);return o.linked(formatMessagePart(o,l),s?formatMessagePart(o,s):void 0,o.type)}case 7:return resolveValue$1(e,n);case 8:return resolveValue$1(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const PROPS_TYPE=["t","type"];function resolveType(o){return resolveProps(o,PROPS_TYPE)}const PROPS_VALUE=["v","value"];function resolveValue$1(o,e){const n=resolveProps(o,PROPS_VALUE);if(n)return n;throw createUnhandleNodeError(e)}const PROPS_MODIFIER=["m","modifier"];function resolveLinkedModifier(o){return resolveProps(o,PROPS_MODIFIER)}const PROPS_KEY=["k","key"];function resolveLinkedKey(o){const e=resolveProps(o,PROPS_KEY);if(e)return e;throw createUnhandleNodeError(6)}function resolveProps(o,e,n){for(let a=0;a<e.length;a++){const s=e[a];if(hasOwn(o,s)&&o[s]!=null)return o[s]}return n}function createUnhandleNodeError(o){return new Error(`unhandled node type: ${o}`)}const WARN_MESSAGE="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function checkHtmlMessage(o,e){e&&detectHtmlTag(o)&&warn$1(format$1(WARN_MESSAGE,{source:o}))}const defaultOnCacheKey=o=>o;let compileCache=create$1();function isMessageAST(o){return isObject$2(o)&&resolveType(o)===0&&(hasOwn(o,"b")||hasOwn(o,"body"))}function baseCompile(o,e={}){let n=!1;const a=e.onError||defaultOnError;return e.onError=s=>{n=!0,a(s)},{...baseCompile$1(o,e),detectError:n}}function compile(o,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(o)){const n=isBoolean$1(e.warnHtmlMessage)?e.warnHtmlMessage:!0;checkHtmlMessage(o,n);const a=(e.onCacheKey||defaultOnCacheKey)(o),s=compileCache[a];if(s)return s;const{ast:l,detectError:c}=baseCompile(o,{...e,location:!0,jit:!0}),d=format(l);return c?d:compileCache[a]=d}else{if(!isMessageAST(o))return warn$1(`the message that is resolve with key '${e.key}' is not supported for jit compilation`),()=>o;const n=o.cacheKey;return n?compileCache[n]||(compileCache[n]=format(o)):format(o)}}let devtools=null;function setDevToolsHook(o){devtools=o}function initI18nDevTools(o,e,n){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:o,version:e,meta:n})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(o){return e=>devtools&&devtools.emit(o,e)}const CoreErrorCodes={INVALID_ARGUMENT:COMPILE_ERROR_CODES_EXTEND_POINT,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function createCoreError(o){return createCompileError(o,null,{messages:errorMessages$1})}const errorMessages$1={[CoreErrorCodes.INVALID_ARGUMENT]:"Invalid arguments",[CoreErrorCodes.INVALID_DATE_ARGUMENT]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT]:"The argument provided is not a valid ISO date string",[CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE]:"Not support non-string message",[CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE]:"cannot support promise value",[CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION]:"cannot support async function",[CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE]:"cannot support locale type"};function getLocale(o,e){return e.locale!=null?resolveLocale(e.locale):resolveLocale(o.locale)}let _resolveLocale;function resolveLocale(o){if(isString$1(o))return o;if(isFunction$1(o)){if(o.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(o.constructor.name==="Function"){const e=o();if(isPromise(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=e}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(o,e,n){return[...new Set([n,...isArray$2(e)?e:isObject$2(e)?Object.keys(e):isString$1(e)?[e]:[n]])]}function fallbackWithLocaleChain(o,e,n){const a=isString$1(n)?n:DEFAULT_LOCALE,s=o;s.__localeChainCache||(s.__localeChainCache=new Map);let l=s.__localeChainCache.get(a);if(!l){l=[];let c=[n];for(;isArray$2(c);)c=appendBlockToChain(l,c,e);const d=isArray$2(e)||!isPlainObject$1(e)?e:e.default?e.default:null;c=isString$1(d)?[d]:d,isArray$2(c)&&appendBlockToChain(l,c,!1),s.__localeChainCache.set(a,l)}return l}function appendBlockToChain(o,e,n){let a=!0;for(let s=0;s<e.length&&isBoolean$1(a);s++){const l=e[s];isString$1(l)&&(a=appendLocaleToChain(o,e[s],n))}return a}function appendLocaleToChain(o,e,n){let a;const s=e.split("-");do{const l=s.join("-");a=appendItemToChain(o,l,n),s.splice(-1,1)}while(s.length&&a===!0);return a}function appendItemToChain(o,e,n){let a=!1;if(!o.includes(e)&&(a=!0,e)){a=e[e.length-1]!=="!";const s=e.replace(/!/g,"");o.push(s),(isArray$2(n)||isPlainObject$1(n))&&n[s]&&(a=n[s])}return a}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(o){return literalValueRE.test(o)}function stripQuotes(o){const e=o.charCodeAt(0),n=o.charCodeAt(o.length-1);return e===n&&(e===34||e===39)?o.slice(1,-1):o}function getPathCharType(o){if(o==null)return"o";switch(o.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return o;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(o){const e=o.trim();return o.charAt(0)==="0"&&isNaN(parseInt(o))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(o){const e=[];let n=-1,a=0,s=0,l,c,d,u,f,v,b;const k=[];k[0]=()=>{c===void 0?c=d:c+=d},k[1]=()=>{c!==void 0&&(e.push(c),c=void 0)},k[2]=()=>{k[0](),s++},k[3]=()=>{if(s>0)s--,a=4,k[0]();else{if(s=0,c===void 0||(c=formatSubPath(c),c===!1))return!1;k[1]()}};function x(){const _=o[n+1];if(a===5&&_==="'"||a===6&&_==='"')return n++,d="\\"+_,k[0](),!0}for(;a!==null;)if(n++,l=o[n],!(l==="\\"&&x())){if(u=getPathCharType(l),b=pathStateMachine[a],f=b[u]||b.l||8,f===8||(a=f[0],f[1]!==void 0&&(v=k[f[1]],v&&(d=l,v()===!1))))return;if(a===7)return e}}const cache=new Map;function resolveWithKeyValue(o,e){return isObject$2(o)?o[e]:null}function resolveValue(o,e){if(!isObject$2(o))return null;let n=cache.get(e);if(n||(n=parse(e),n&&cache.set(e,n)),!n)return null;const a=n.length;let s=o,l=0;for(;l<a;){const c=s[n[l]];if(c===void 0||isFunction$1(s))return null;s=c,l++}return s}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7},CORE_WARN_CODES_EXTEND_POINT=8,warnMessages$1={[CoreWarnCodes.NOT_FOUND_KEY]:"Not found '{key}' key in '{locale}' locale messages.",[CoreWarnCodes.FALLBACK_TO_TRANSLATE]:"Fall back to translate '{key}' key with '{target}' locale.",[CoreWarnCodes.CANNOT_FORMAT_NUMBER]:"Cannot format a number value due to not supported Intl.NumberFormat.",[CoreWarnCodes.FALLBACK_TO_NUMBER_FORMAT]:"Fall back to number format '{key}' key with '{target}' locale.",[CoreWarnCodes.CANNOT_FORMAT_DATE]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[CoreWarnCodes.FALLBACK_TO_DATE_FORMAT]:"Fall back to datetime format '{key}' key with '{target}' locale.",[CoreWarnCodes.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER]:"This project is using Custom Message Compiler, which is an experimental feature. It may receive breaking changes or be removed in the future."};function getWarnMessage$1(o,...e){return format$1(warnMessages$1[o],...e)}const VERSION$2="10.0.5",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=o=>`${o.charAt(0).toLocaleUpperCase()}${o.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(o,e)=>e==="text"&&isString$1(o)?o.toUpperCase():e==="vnode"&&isObject$2(o)&&"__v_isVNode"in o?o.children.toUpperCase():o,lower:(o,e)=>e==="text"&&isString$1(o)?o.toLowerCase():e==="vnode"&&isObject$2(o)&&"__v_isVNode"in o?o.children.toLowerCase():o,capitalize:(o,e)=>e==="text"&&isString$1(o)?capitalize(o):e==="vnode"&&isObject$2(o)&&"__v_isVNode"in o?capitalize(o.children):o}}let _compiler;function registerMessageCompiler(o){_compiler=o}let _resolver;function registerMessageResolver(o){_resolver=o}let _fallbacker;function registerLocaleFallbacker(o){_fallbacker=o}let _additionalMeta=null;const setAdditionalMeta=o=>{_additionalMeta=o},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=o=>{_fallbackContext=o},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(o={}){const e=isFunction$1(o.onWarn)?o.onWarn:warn$1,n=isString$1(o.version)?o.version:VERSION$2,a=isString$1(o.locale)||isFunction$1(o.locale)?o.locale:DEFAULT_LOCALE,s=isFunction$1(a)?DEFAULT_LOCALE:a,l=isArray$2(o.fallbackLocale)||isPlainObject$1(o.fallbackLocale)||isString$1(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:s,c=isPlainObject$1(o.messages)?o.messages:createResources(s),d=isPlainObject$1(o.datetimeFormats)?o.datetimeFormats:createResources(s),u=isPlainObject$1(o.numberFormats)?o.numberFormats:createResources(s),f=assign$1(create$1(),o.modifiers,getDefaultLinkedModifiers()),v=o.pluralRules||create$1(),b=isFunction$1(o.missing)?o.missing:null,k=isBoolean$1(o.missingWarn)||isRegExp$1(o.missingWarn)?o.missingWarn:!0,x=isBoolean$1(o.fallbackWarn)||isRegExp$1(o.fallbackWarn)?o.fallbackWarn:!0,_=!!o.fallbackFormat,E=!!o.unresolving,B=isFunction$1(o.postTranslation)?o.postTranslation:null,M=isPlainObject$1(o.processor)?o.processor:null,I=isBoolean$1(o.warnHtmlMessage)?o.warnHtmlMessage:!0,F=!!o.escapeParameter,V=isFunction$1(o.messageCompiler)?o.messageCompiler:_compiler;isFunction$1(o.messageCompiler)&&warnOnce(getWarnMessage$1(CoreWarnCodes.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER));const L=isFunction$1(o.messageResolver)?o.messageResolver:_resolver||resolveWithKeyValue,U=isFunction$1(o.localeFallbacker)?o.localeFallbacker:_fallbacker||fallbackWithSimple,j=isObject$2(o.fallbackContext)?o.fallbackContext:void 0,oe=o,Y=isObject$2(oe.__datetimeFormatters)?oe.__datetimeFormatters:new Map,K=isObject$2(oe.__numberFormatters)?oe.__numberFormatters:new Map,W=isObject$2(oe.__meta)?oe.__meta:{};_cid++;const G={version:n,cid:_cid,locale:a,fallbackLocale:l,messages:c,modifiers:f,pluralRules:v,missing:b,missingWarn:k,fallbackWarn:x,fallbackFormat:_,unresolving:E,postTranslation:B,processor:M,warnHtmlMessage:I,escapeParameter:F,messageCompiler:V,messageResolver:L,localeFallbacker:U,fallbackContext:j,onWarn:e,__meta:W};return G.datetimeFormats=d,G.numberFormats=u,G.__datetimeFormatters=Y,G.__numberFormatters=K,G.__v_emitter=oe.__v_emitter!=null?oe.__v_emitter:void 0,initI18nDevTools(G,n,W),G}const createResources=o=>({[o]:create$1()});function isTranslateFallbackWarn(o,e){return o instanceof RegExp?o.test(e):o}function isTranslateMissingWarn(o,e){return o instanceof RegExp?o.test(e):o}function handleMissing(o,e,n,a,s){const{missing:l,onWarn:c}=o;{const d=o.__v_emitter;d&&d.emit("missing",{locale:n,key:e,type:s,groupId:`${s}:${e}`})}if(l!==null){const d=l(o,n,e,s);return isString$1(d)?d:e}else return isTranslateMissingWarn(a,e)&&c(getWarnMessage$1(CoreWarnCodes.NOT_FOUND_KEY,{key:e,locale:n})),e}function updateFallbackLocale(o,e,n){const a=o;a.__localeChainCache=new Map,o.localeFallbacker(o,n,e)}function isAlmostSameLocale(o,e){return o===e?!1:o.split("-")[0]===e.split("-")[0]}function isImplicitFallback(o,e){const n=e.indexOf(o);if(n===-1)return!1;for(let a=n+1;a<e.length;a++)if(isAlmostSameLocale(o,e[a]))return!0;return!1}const intlDefined=typeof Intl<"u",Availabilities={dateTimeFormat:intlDefined&&typeof Intl.DateTimeFormat<"u",numberFormat:intlDefined&&typeof Intl.NumberFormat<"u"};function datetime(o,...e){const{datetimeFormats:n,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=o,{__datetimeFormatters:d}=o;if(!Availabilities.dateTimeFormat)return l(getWarnMessage$1(CoreWarnCodes.CANNOT_FORMAT_DATE)),MISSING_RESOLVE_VALUE;const[u,f,v,b]=parseDateTimeArgs(...e),k=isBoolean$1(v.missingWarn)?v.missingWarn:o.missingWarn,x=isBoolean$1(v.fallbackWarn)?v.fallbackWarn:o.fallbackWarn,_=!!v.part,E=getLocale(o,v),B=c(o,s,E);if(!isString$1(u)||u==="")return new Intl.DateTimeFormat(E,b).format(f);let M={},I,F=null,V=E,L=null;const U="datetime format";for(let Y=0;Y<B.length;Y++){if(I=L=B[Y],E!==I&&isTranslateFallbackWarn(x,u)&&l(getWarnMessage$1(CoreWarnCodes.FALLBACK_TO_DATE_FORMAT,{key:u,target:I})),E!==I){const K=o.__v_emitter;K&&K.emit("fallback",{type:U,key:u,from:V,to:L,groupId:`${U}:${u}`})}if(M=n[I]||{},F=M[u],isPlainObject$1(F))break;handleMissing(o,u,I,k,U),V=L}if(!isPlainObject$1(F)||!isString$1(I))return a?NOT_REOSLVED:u;let j=`${I}__${u}`;isEmptyObject(b)||(j=`${j}__${JSON.stringify(b)}`);let oe=d.get(j);return oe||(oe=new Intl.DateTimeFormat(I,assign$1({},F,b)),d.set(j,oe)),_?oe.formatToParts(f):oe.format(f)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...o){const[e,n,a,s]=o,l=create$1();let c=create$1(),d;if(isString$1(e)){const u=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const f=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();d=new Date(f);try{d.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);d=e}else if(isNumber$2(e))d=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(n)?l.key=n:isPlainObject$1(n)&&Object.keys(n).forEach(u=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=n[u]:l[u]=n[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearDateTimeFormat(o,e,n){const a=o;for(const s in n){const l=`${e}__${s}`;a.__datetimeFormatters.has(l)&&a.__datetimeFormatters.delete(l)}}function number$1(o,...e){const{numberFormats:n,unresolving:a,fallbackLocale:s,onWarn:l,localeFallbacker:c}=o,{__numberFormatters:d}=o;if(!Availabilities.numberFormat)return l(getWarnMessage$1(CoreWarnCodes.CANNOT_FORMAT_NUMBER)),MISSING_RESOLVE_VALUE;const[u,f,v,b]=parseNumberArgs(...e),k=isBoolean$1(v.missingWarn)?v.missingWarn:o.missingWarn,x=isBoolean$1(v.fallbackWarn)?v.fallbackWarn:o.fallbackWarn,_=!!v.part,E=getLocale(o,v),B=c(o,s,E);if(!isString$1(u)||u==="")return new Intl.NumberFormat(E,b).format(f);let M={},I,F=null,V=E,L=null;const U="number format";for(let Y=0;Y<B.length;Y++){if(I=L=B[Y],E!==I&&isTranslateFallbackWarn(x,u)&&l(getWarnMessage$1(CoreWarnCodes.FALLBACK_TO_NUMBER_FORMAT,{key:u,target:I})),E!==I){const K=o.__v_emitter;K&&K.emit("fallback",{type:U,key:u,from:V,to:L,groupId:`${U}:${u}`})}if(M=n[I]||{},F=M[u],isPlainObject$1(F))break;handleMissing(o,u,I,k,U),V=L}if(!isPlainObject$1(F)||!isString$1(I))return a?NOT_REOSLVED:u;let j=`${I}__${u}`;isEmptyObject(b)||(j=`${j}__${JSON.stringify(b)}`);let oe=d.get(j);return oe||(oe=new Intl.NumberFormat(I,assign$1({},F,b)),d.set(j,oe)),_?oe.formatToParts(f):oe.format(f)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...o){const[e,n,a,s]=o,l=create$1();let c=create$1();if(!isNumber$2(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const d=e;return isString$1(n)?l.key=n:isPlainObject$1(n)&&Object.keys(n).forEach(u=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(u)?c[u]=n[u]:l[u]=n[u]}),isString$1(a)?l.locale=a:isPlainObject$1(a)&&(c=a),isPlainObject$1(s)&&(c=s),[l.key||"",d,l,c]}function clearNumberFormat(o,e,n){const a=o;for(const s in n){const l=`${e}__${s}`;a.__numberFormatters.has(l)&&a.__numberFormatters.delete(l)}}const DEFAULT_MODIFIER=o=>o,DEFAULT_MESSAGE=o=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=o=>o.length===0?"":join$1(o),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(o,e){return o=Math.abs(o),e===2?o?o>1?1:0:1:o?Math.min(o,2):0}function getPluralIndex(o){const e=isNumber$2(o.pluralIndex)?o.pluralIndex:-1;return o.named&&(isNumber$2(o.named.count)||isNumber$2(o.named.n))?isNumber$2(o.named.count)?o.named.count:isNumber$2(o.named.n)?o.named.n:e:e}function normalizeNamed(o,e){e.count||(e.count=o),e.n||(e.n=o)}function createMessageContext(o={}){const e=o.locale,n=getPluralIndex(o),a=isObject$2(o.pluralRules)&&isString$1(e)&&isFunction$1(o.pluralRules[e])?o.pluralRules[e]:pluralDefault,s=isObject$2(o.pluralRules)&&isString$1(e)&&isFunction$1(o.pluralRules[e])?pluralDefault:void 0,l=B=>B[a(n,B.length,s)],c=o.list||[],d=B=>c[B],u=o.named||create$1();isNumber$2(o.pluralIndex)&&normalizeNamed(n,u);const f=B=>u[B];function v(B,M){return(isFunction$1(o.messages)?o.messages(B,!!M):isObject$2(o.messages)?o.messages[B]:!1)||(o.parent?o.parent.message(B):DEFAULT_MESSAGE)}const b=B=>o.modifiers?o.modifiers[B]:DEFAULT_MODIFIER,k=isPlainObject$1(o.processor)&&isFunction$1(o.processor.normalize)?o.processor.normalize:DEFAULT_NORMALIZE,x=isPlainObject$1(o.processor)&&isFunction$1(o.processor.interpolate)?o.processor.interpolate:DEFAULT_INTERPOLATE,_=isPlainObject$1(o.processor)&&isString$1(o.processor.type)?o.processor.type:DEFAULT_MESSAGE_DATA_TYPE,E={list:d,named:f,plural:l,linked:(B,...M)=>{const[I,F]=M;let V="text",L="";M.length===1?isObject$2(I)?(L=I.modifier||L,V=I.type||V):isString$1(I)&&(L=I||L):M.length===2&&(isString$1(I)&&(L=I||L),isString$1(F)&&(V=F||V));const U=v(B,!0)(E),j=V==="vnode"&&isArray$2(U)&&L?U[0]:U;return L?b(L)(j,V):j},message:v,type:_,interpolate:x,normalize:k,values:assign$1(create$1(),c,u)};return E}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=o=>isFunction$1(o);function translate(o,...e){const{fallbackFormat:n,postTranslation:a,unresolving:s,messageCompiler:l,fallbackLocale:c,messages:d}=o,[u,f]=parseTranslateArgs(...e),v=isBoolean$1(f.missingWarn)?f.missingWarn:o.missingWarn,b=isBoolean$1(f.fallbackWarn)?f.fallbackWarn:o.fallbackWarn,k=isBoolean$1(f.escapeParameter)?f.escapeParameter:o.escapeParameter,x=!!f.resolvedMessage,_=isString$1(f.default)||isBoolean$1(f.default)?isBoolean$1(f.default)?l?u:()=>u:f.default:n?l?u:()=>u:null,E=n||_!=null&&(isString$1(_)||isFunction$1(_)),B=getLocale(o,f);k&&escapeParams(f);let[M,I,F]=x?[u,B,d[B]||create$1()]:resolveMessageFormat(o,u,B,c,b,v),V=M,L=u;if(!x&&!(isString$1(V)||isMessageAST(V)||isMessageFunction(V))&&E&&(V=_,L=V),!x&&(!(isString$1(V)||isMessageAST(V)||isMessageFunction(V))||!isString$1(I)))return s?NOT_REOSLVED:u;if(isString$1(V)&&o.messageCompiler==null)return warn$1(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${u}'.`),u;let U=!1;const j=()=>{U=!0},oe=isMessageFunction(V)?V:compileMessageFormat(o,u,I,V,L,j);if(U)return V;const Y=getMessageContextOptions(o,I,F,f),K=createMessageContext(Y),W=evaluateMessage(o,oe,K),G=a?a(W,u):W;{const ce={timestamp:Date.now(),key:isString$1(u)?u:isMessageFunction(V)?V.key:"",locale:I||(isMessageFunction(V)?V.locale:""),format:isString$1(V)?V:isMessageFunction(V)?V.source:"",message:G};ce.meta=assign$1({},o.__meta,getAdditionalMeta()||{}),translateDevTools(ce)}return G}function escapeParams(o){isArray$2(o.list)?o.list=o.list.map(e=>isString$1(e)?escapeHtml(e):e):isObject$2(o.named)&&Object.keys(o.named).forEach(e=>{isString$1(o.named[e])&&(o.named[e]=escapeHtml(o.named[e]))})}function resolveMessageFormat(o,e,n,a,s,l){const{messages:c,onWarn:d,messageResolver:u,localeFallbacker:f}=o,v=f(o,a,n);let b=create$1(),k,x=null,_=n,E=null;const B="translate";for(let M=0;M<v.length;M++){if(k=E=v[M],n!==k&&!isAlmostSameLocale(n,k)&&isTranslateFallbackWarn(s,e)&&d(getWarnMessage$1(CoreWarnCodes.FALLBACK_TO_TRANSLATE,{key:e,target:k})),n!==k){const L=o.__v_emitter;L&&L.emit("fallback",{type:B,key:e,from:_,to:E,groupId:`${B}:${e}`})}b=c[k]||create$1();let I=null,F,V;if(inBrowser&&(I=window.performance.now(),F="intlify-message-resolve-start",V="intlify-message-resolve-end",mark&&mark(F)),(x=u(b,e))===null&&(x=b[e]),inBrowser){const L=window.performance.now(),U=o.__v_emitter;U&&I&&x&&U.emit("message-resolve",{type:"message-resolve",key:e,message:x,time:L-I,groupId:`${B}:${e}`}),F&&V&&mark&&measure&&(mark(V),measure("intlify message resolve",F,V))}if(isString$1(x)||isMessageAST(x)||isMessageFunction(x))break;if(!isImplicitFallback(k,v)){const L=handleMissing(o,e,k,l,B);L!==e&&(x=L)}_=E}return[x,k,b]}function compileMessageFormat(o,e,n,a,s,l){const{messageCompiler:c,warnHtmlMessage:d}=o;if(isMessageFunction(a)){const k=a;return k.locale=k.locale||n,k.key=k.key||e,k}if(c==null){const k=()=>a;return k.locale=n,k.key=e,k}let u=null,f,v;inBrowser&&(u=window.performance.now(),f="intlify-message-compilation-start",v="intlify-message-compilation-end",mark&&mark(f));const b=c(a,getCompileContext(o,n,s,a,d,l));if(inBrowser){const k=window.performance.now(),x=o.__v_emitter;x&&u&&x.emit("message-compilation",{type:"message-compilation",message:a,time:k-u,groupId:`translate:${e}`}),f&&v&&mark&&measure&&(mark(v),measure("intlify message compilation",f,v))}return b.locale=n,b.key=e,b.source=a,b}function evaluateMessage(o,e,n){let a=null,s,l;inBrowser&&(a=window.performance.now(),s="intlify-message-evaluation-start",l="intlify-message-evaluation-end",mark&&mark(s));const c=e(n);if(inBrowser){const d=window.performance.now(),u=o.__v_emitter;u&&a&&u.emit("message-evaluation",{type:"message-evaluation",value:c,time:d-a,groupId:`translate:${e.key}`}),s&&l&&mark&&measure&&(mark(l),measure("intlify message evaluation",s,l))}return c}function parseTranslateArgs(...o){const[e,n,a]=o,s=create$1();if(!isString$1(e)&&!isNumber$2(e)&&!isMessageFunction(e)&&!isMessageAST(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=isNumber$2(e)?String(e):(isMessageFunction(e),e);return isNumber$2(n)?s.plural=n:isString$1(n)?s.default=n:isPlainObject$1(n)&&!isEmptyObject(n)?s.named=n:isArray$2(n)&&(s.list=n),isNumber$2(a)?s.plural=a:isString$1(a)?s.default=a:isPlainObject$1(a)&&assign$1(s,a),[l,s]}function getCompileContext(o,e,n,a,s,l){return{locale:e,key:n,warnHtmlMessage:s,onError:c=>{l&&l(c);{const d=getSourceForCodeFrame(a),u=`Message compilation error: ${c.message}`,f=c.location&&d&&generateCodeFrame(d,c.location.start.offset,c.location.end.offset),v=o.__v_emitter;v&&d&&v.emit("compile-error",{message:d,error:c.message,start:c.location&&c.location.start.offset,end:c.location&&c.location.end.offset,groupId:`translate:${n}`}),console.error(f?`${u}
${f}`:u)}},onCacheKey:c=>generateFormatCacheKey(e,n,c)}}function getSourceForCodeFrame(o){if(isString$1(o))return o;if(o.loc&&o.loc.source)return o.loc.source}function getMessageContextOptions(o,e,n,a){const{modifiers:s,pluralRules:l,messageResolver:c,fallbackLocale:d,fallbackWarn:u,missingWarn:f,fallbackContext:v}=o,b={locale:e,modifiers:s,pluralRules:l,messages:(k,x)=>{let _=c(n,k);if(_==null&&(v||x)){const[,,E]=resolveMessageFormat(v||o,k,e,d,u,f);_=c(E,k)}if(isString$1(_)||isMessageAST(_)){let E=!1;const B=compileMessageFormat(o,k,e,_,k,()=>{E=!0});return E?NOOP_MESSAGE_FUNCTION:B}else return isMessageFunction(_)?_:NOOP_MESSAGE_FUNCTION}};return o.processor&&(b.processor=o.processor),a.list&&(b.list=a.list),a.named&&(b.named=a.named),isNumber$2(a.plural)&&(b.pluralIndex=a.plural),b}initFeatureFlags$1();function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var o;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof globalThis<"u"&&!((o=globalThis.perf_hooks)===null||o===void 0)&&o.performance?(supported=!0,perf=globalThis.perf_hooks.performance):supported=!1),supported}function now(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const a={};if(e.settings)for(const c in e.settings){const d=e.settings[c];a[c]=d.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let l=Object.assign({},a);try{const c=localStorage.getItem(s),d=JSON.parse(c);Object.assign(l,d)}catch{}this.fallbacks={getSettings(){return l},setSettings(c){try{localStorage.setItem(s,JSON.stringify(c))}catch{}l=c},now(){return now()}},n&&n.on(HOOK_PLUGIN_SETTINGS_SET,(c,d)=>{c===this.plugin.id&&this.fallbacks.setSettings(d)}),this.proxiedOn=new Proxy({},{get:(c,d)=>this.target?this.target.on[d]:(...u)=>{this.onQueue.push({method:d,args:u})}}),this.proxiedTarget=new Proxy({},{get:(c,d)=>this.target?this.target[d]:d==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(d)?(...u)=>(this.targetQueue.push({method:d,args:u,resolve:()=>{}}),this.fallbacks[d](...u)):(...u)=>new Promise(f=>{this.targetQueue.push({method:d,args:u,resolve:f})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function setupDevtoolsPlugin(o,e){const n=o,a=getTarget(),s=getDevtoolsGlobalHook(),l=isProxyAvailable&&n.enableEarlyProxy;if(s&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!l))s.emit(HOOK_SETUP,o,e);else{const c=l?new ApiProxy(n,s):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:c}),c&&e(c.proxiedTarget)}}const VERSION$1="10.0.5";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const I18nWarnCodes={FALLBACK_TO_ROOT:CORE_WARN_CODES_EXTEND_POINT,NOT_FOUND_PARENT_SCOPE:9,IGNORE_OBJ_FLATTEN:10,DEPRECATE_TC:11},warnMessages={[I18nWarnCodes.FALLBACK_TO_ROOT]:"Fall back to {type} '{key}' with root locale.",[I18nWarnCodes.NOT_FOUND_PARENT_SCOPE]:"Not found parent scope. use the global scope.",[I18nWarnCodes.IGNORE_OBJ_FLATTEN]:"Ignore object flatten: '{key}' key has an string value",[I18nWarnCodes.DEPRECATE_TC]:"'tc' and '$tc' has been deprecated in v10. Use 't' or '$t' instead. 'tc' and '$tc\u2019 are going to remove in v11."};function getWarnMessage(o,...e){return format$1(warnMessages[o],...e)}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:CORE_ERROR_CODES_EXTEND_POINT,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function createI18nError(o,...e){return createCompileError(o,null,{messages:errorMessages,args:e})}const errorMessages={[I18nErrorCodes.UNEXPECTED_RETURN_TYPE]:"Unexpected return type in composer",[I18nErrorCodes.INVALID_ARGUMENT]:"Invalid argument",[I18nErrorCodes.MUST_BE_CALL_SETUP_TOP]:"Must be called at the top of a `setup` function",[I18nErrorCodes.NOT_INSTALLED]:"Need to install with `app.use` function",[I18nErrorCodes.UNEXPECTED_ERROR]:"Unexpected error",[I18nErrorCodes.REQUIRED_VALUE]:"Required in value: {0}",[I18nErrorCodes.INVALID_VALUE]:"Invalid value",[I18nErrorCodes.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN]:"Cannot setup vue-devtools plugin",[I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE]:"Need to install with `provide` function",[I18nErrorCodes.NOT_COMPATIBLE_LEGACY_VUE_I18N]:"Not compatible legacy VueI18n.",[I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY]:"Not available Compostion API in Legacy API mode. Please make sure that the legacy API mode is working properly"},TranslateVNodeSymbol=makeSymbol$1("__translateVNode"),DatetimePartsSymbol=makeSymbol$1("__datetimeParts"),NumberPartsSymbol=makeSymbol$1("__numberParts"),EnableEmitter=makeSymbol$1("__enableEmitter"),DisableEmitter=makeSymbol$1("__disableEmitter"),SetPluralRulesSymbol=makeSymbol$1("__setPluralRules"),InejctWithOptionSymbol=makeSymbol$1("__injectWithOption"),DisposeSymbol=makeSymbol$1("__dispose");function handleFlatJson(o){if(!isObject$2(o))return o;for(const e in o)if(hasOwn(o,e))if(!e.includes("."))isObject$2(o[e])&&handleFlatJson(o[e]);else{const n=e.split("."),a=n.length-1;let s=o,l=!1;for(let c=0;c<a;c++){if(n[c]in s||(s[n[c]]=create$1()),!isObject$2(s[n[c]])){warn$1(getWarnMessage(I18nWarnCodes.IGNORE_OBJ_FLATTEN,{key:n[c]})),l=!0;break}s=s[n[c]]}l||(s[n[a]]=o[e],delete o[e]),isObject$2(s[n[a]])&&handleFlatJson(s[n[a]])}return o}function getLocaleMessages(o,e){const{messages:n,__i18n:a,messageResolver:s,flatJson:l}=e,c=isPlainObject$1(n)?n:isArray$2(a)?create$1():{[o]:create$1()};if(isArray$2(a)&&a.forEach(d=>{if("locale"in d&&"resource"in d){const{locale:u,resource:f}=d;u?(c[u]=c[u]||create$1(),deepCopy(f,c[u])):deepCopy(f,c)}else isString$1(d)&&deepCopy(JSON.parse(d),c)}),s==null&&l)for(const d in c)hasOwn(c,d)&&handleFlatJson(c[d]);return c}function getComponentOptions(o){return o.type}function adjustI18nResources(o,e,n){let a=isObject$2(e.messages)?e.messages:create$1();"__i18nGlobal"in n&&(a=getLocaleMessages(o.locale.value,{messages:a,__i18n:n.__i18nGlobal}));const s=Object.keys(a);s.length&&s.forEach(l=>{o.mergeLocaleMessage(l,a[l])});{if(isObject$2(e.datetimeFormats)){const l=Object.keys(e.datetimeFormats);l.length&&l.forEach(c=>{o.mergeDateTimeFormat(c,e.datetimeFormats[c])})}if(isObject$2(e.numberFormats)){const l=Object.keys(e.numberFormats);l.length&&l.forEach(c=>{o.mergeNumberFormat(c,e.numberFormats[c])})}}}function createTextNode(o){return createVNode(Text$1,null,o,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(o){return(e,n,a,s)=>o(n,a,getCurrentInstance()||void 0,s)}const getMetaInfo=()=>{const o=getCurrentInstance();let e=null;return o&&(e=getComponentOptions(o)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(o={}){const{__root:e,__injectWithOption:n}=o,a=e===void 0,s=o.flatJson,l=inBrowser?ref:shallowRef;let c=isBoolean$1(o.inheritLocale)?o.inheritLocale:!0;const d=l(e&&c?e.locale.value:isString$1(o.locale)?o.locale:DEFAULT_LOCALE),u=l(e&&c?e.fallbackLocale.value:isString$1(o.fallbackLocale)||isArray$2(o.fallbackLocale)||isPlainObject$1(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:d.value),f=l(getLocaleMessages(d.value,o)),v=l(isPlainObject$1(o.datetimeFormats)?o.datetimeFormats:{[d.value]:{}}),b=l(isPlainObject$1(o.numberFormats)?o.numberFormats:{[d.value]:{}});let k=e?e.missingWarn:isBoolean$1(o.missingWarn)||isRegExp$1(o.missingWarn)?o.missingWarn:!0,x=e?e.fallbackWarn:isBoolean$1(o.fallbackWarn)||isRegExp$1(o.fallbackWarn)?o.fallbackWarn:!0,_=e?e.fallbackRoot:isBoolean$1(o.fallbackRoot)?o.fallbackRoot:!0,E=!!o.fallbackFormat,B=isFunction$1(o.missing)?o.missing:null,M=isFunction$1(o.missing)?defineCoreMissingHandler(o.missing):null,I=isFunction$1(o.postTranslation)?o.postTranslation:null,F=e?e.warnHtmlMessage:isBoolean$1(o.warnHtmlMessage)?o.warnHtmlMessage:!0,V=!!o.escapeParameter;const L=e?e.modifiers:isPlainObject$1(o.modifiers)?o.modifiers:{};let U=o.pluralRules||e&&e.pluralRules,j;j=(()=>{a&&setFallbackContext(null);const de={version:VERSION$1,locale:d.value,fallbackLocale:u.value,messages:f.value,modifiers:L,pluralRules:U,missing:M===null?void 0:M,missingWarn:k,fallbackWarn:x,fallbackFormat:E,unresolving:!0,postTranslation:I===null?void 0:I,warnHtmlMessage:F,escapeParameter:V,messageResolver:o.messageResolver,messageCompiler:o.messageCompiler,__meta:{framework:"vue"}};de.datetimeFormats=v.value,de.numberFormats=b.value,de.__datetimeFormatters=isPlainObject$1(j)?j.__datetimeFormatters:void 0,de.__numberFormatters=isPlainObject$1(j)?j.__numberFormatters:void 0,de.__v_emitter=isPlainObject$1(j)?j.__v_emitter:void 0;const Ne=createCoreContext(de);return a&&setFallbackContext(Ne),Ne})(),updateFallbackLocale(j,d.value,u.value);function oe(){return[d.value,u.value,f.value,v.value,b.value]}const Y=computed({get:()=>d.value,set:de=>{d.value=de,j.locale=d.value}}),K=computed({get:()=>u.value,set:de=>{u.value=de,j.fallbackLocale=u.value,updateFallbackLocale(j,d.value,de)}}),W=computed(()=>f.value),G=computed(()=>v.value),ce=computed(()=>b.value);function se(){return isFunction$1(I)?I:null}function me(de){I=de,j.postTranslation=de}function ge(){return B}function Te(de){de!==null&&(M=defineCoreMissingHandler(de)),B=de,j.missing=M}function Be(de,Ne){return de!=="translate"||!Ne.resolvedMessage}const Ge=(de,Ne,ht,bt,St,xt)=>{oe();let Ct;try{a||(j.fallbackContext=e?getFallbackContext():void 0),Ct=de(j)}finally{a||(j.fallbackContext=void 0)}if(ht!=="translate exists"&&isNumber$2(Ct)&&Ct===NOT_REOSLVED||ht==="translate exists"&&!Ct){const[$t,Dt]=Ne();if(e&&isString$1($t)&&Be(ht,Dt)){_&&(isTranslateFallbackWarn(x,$t)||isTranslateMissingWarn(k,$t))&&warn$1(getWarnMessage(I18nWarnCodes.FALLBACK_TO_ROOT,{key:$t,type:ht}));{const{__v_emitter:Et}=j;Et&&_&&Et.emit("fallback",{type:ht,key:$t,to:"global",groupId:`${ht}:${$t}`})}}return e&&_?bt(e):St($t)}else{if(xt(Ct))return Ct;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function We(...de){return Ge(Ne=>Reflect.apply(translate,null,[Ne,...de]),()=>parseTranslateArgs(...de),"translate",Ne=>Reflect.apply(Ne.t,Ne,[...de]),Ne=>Ne,Ne=>isString$1(Ne))}function Oe(...de){const[Ne,ht,bt]=de;if(bt&&!isObject$2(bt))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return We(Ne,ht,assign$1({resolvedMessage:!0},bt||{}))}function Ve(...de){return Ge(Ne=>Reflect.apply(datetime,null,[Ne,...de]),()=>parseDateTimeArgs(...de),"datetime format",Ne=>Reflect.apply(Ne.d,Ne,[...de]),()=>MISSING_RESOLVE_VALUE,Ne=>isString$1(Ne))}function Xe(...de){return Ge(Ne=>Reflect.apply(number$1,null,[Ne,...de]),()=>parseNumberArgs(...de),"number format",Ne=>Reflect.apply(Ne.n,Ne,[...de]),()=>MISSING_RESOLVE_VALUE,Ne=>isString$1(Ne))}function dt(de){return de.map(Ne=>isString$1(Ne)||isNumber$2(Ne)||isBoolean$1(Ne)?createTextNode(String(Ne)):Ne)}const pt={normalize:dt,interpolate:de=>de,type:"vnode"};function ft(...de){return Ge(Ne=>{let ht;const bt=Ne;try{bt.processor=pt,ht=Reflect.apply(translate,null,[bt,...de])}finally{bt.processor=null}return ht},()=>parseTranslateArgs(...de),"translate",Ne=>Ne[TranslateVNodeSymbol](...de),Ne=>[createTextNode(Ne)],Ne=>isArray$2(Ne))}function Ce(...de){return Ge(Ne=>Reflect.apply(number$1,null,[Ne,...de]),()=>parseNumberArgs(...de),"number format",Ne=>Ne[NumberPartsSymbol](...de),NOOP_RETURN_ARRAY,Ne=>isString$1(Ne)||isArray$2(Ne))}function ze(...de){return Ge(Ne=>Reflect.apply(datetime,null,[Ne,...de]),()=>parseDateTimeArgs(...de),"datetime format",Ne=>Ne[DatetimePartsSymbol](...de),NOOP_RETURN_ARRAY,Ne=>isString$1(Ne)||isArray$2(Ne))}function Ze(de){U=de,j.pluralRules=U}function pe(de,Ne){return Ge(()=>{if(!de)return!1;const ht=isString$1(Ne)?Ne:d.value,bt=ee(ht),St=j.messageResolver(bt,de);return isMessageAST(St)||isMessageFunction(St)||isString$1(St)},()=>[de],"translate exists",ht=>Reflect.apply(ht.te,ht,[de,Ne]),NOOP_RETURN_FALSE,ht=>isBoolean$1(ht))}function ue(de){let Ne=null;const ht=fallbackWithLocaleChain(j,u.value,d.value);for(let bt=0;bt<ht.length;bt++){const St=f.value[ht[bt]]||{},xt=j.messageResolver(St,de);if(xt!=null){Ne=xt;break}}return Ne}function Z(de){return ue(de)??(e?e.tm(de)||{}:{})}function ee(de){return f.value[de]||{}}function le(de,Ne){if(s){const ht={[de]:Ne};for(const bt in ht)hasOwn(ht,bt)&&handleFlatJson(ht[bt]);Ne=ht[de]}f.value[de]=Ne,j.messages=f.value}function we(de,Ne){f.value[de]=f.value[de]||{};const ht={[de]:Ne};if(s)for(const bt in ht)hasOwn(ht,bt)&&handleFlatJson(ht[bt]);Ne=ht[de],deepCopy(Ne,f.value[de]),j.messages=f.value}function ke(de){return v.value[de]||{}}function _e(de,Ne){v.value[de]=Ne,j.datetimeFormats=v.value,clearDateTimeFormat(j,de,Ne)}function te(de,Ne){v.value[de]=assign$1(v.value[de]||{},Ne),j.datetimeFormats=v.value,clearDateTimeFormat(j,de,Ne)}function re(de){return b.value[de]||{}}function fe(de,Ne){b.value[de]=Ne,j.numberFormats=b.value,clearNumberFormat(j,de,Ne)}function Ee(de,Ne){b.value[de]=assign$1(b.value[de]||{},Ne),j.numberFormats=b.value,clearNumberFormat(j,de,Ne)}composerID++,e&&inBrowser&&(watch(e.locale,de=>{c&&(d.value=de,j.locale=de,updateFallbackLocale(j,d.value,u.value))}),watch(e.fallbackLocale,de=>{c&&(u.value=de,j.fallbackLocale=de,updateFallbackLocale(j,d.value,u.value))}));const qe={id:composerID,locale:Y,fallbackLocale:K,get inheritLocale(){return c},set inheritLocale(de){c=de,de&&e&&(d.value=e.locale.value,u.value=e.fallbackLocale.value,updateFallbackLocale(j,d.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:W,get modifiers(){return L},get pluralRules(){return U||{}},get isGlobal(){return a},get missingWarn(){return k},set missingWarn(de){k=de,j.missingWarn=k},get fallbackWarn(){return x},set fallbackWarn(de){x=de,j.fallbackWarn=x},get fallbackRoot(){return _},set fallbackRoot(de){_=de},get fallbackFormat(){return E},set fallbackFormat(de){E=de,j.fallbackFormat=E},get warnHtmlMessage(){return F},set warnHtmlMessage(de){F=de,j.warnHtmlMessage=de},get escapeParameter(){return V},set escapeParameter(de){V=de,j.escapeParameter=de},t:We,getLocaleMessage:ee,setLocaleMessage:le,mergeLocaleMessage:we,getPostTranslationHandler:se,setPostTranslationHandler:me,getMissingHandler:ge,setMissingHandler:Te,[SetPluralRulesSymbol]:Ze};return qe.datetimeFormats=G,qe.numberFormats=ce,qe.rt=Oe,qe.te=pe,qe.tm=Z,qe.d=Ve,qe.n=Xe,qe.getDateTimeFormat=ke,qe.setDateTimeFormat=_e,qe.mergeDateTimeFormat=te,qe.getNumberFormat=re,qe.setNumberFormat=fe,qe.mergeNumberFormat=Ee,qe[InejctWithOptionSymbol]=n,qe[TranslateVNodeSymbol]=ft,qe[DatetimePartsSymbol]=ze,qe[NumberPartsSymbol]=Ce,qe[EnableEmitter]=de=>{j.__v_emitter=de},qe[DisableEmitter]=()=>{j.__v_emitter=void 0},qe}const VUE_I18N_COMPONENT_TYPES="vue-i18n: composer properties",VueDevToolsLabels={"vue-devtools-plugin-vue-i18n":"Vue I18n DevTools","vue-i18n-resource-inspector":"Vue I18n DevTools","vue-i18n-timeline":"Vue I18n"},VueDevToolsPlaceholders={"vue-i18n-resource-inspector":"Search for scopes ..."},VueDevToolsTimelineColors={"vue-i18n-timeline":16764185};let devtoolsApi;async function enableDevTools(o,e){return new Promise((n,a)=>{try{setupDevtoolsPlugin({id:"vue-devtools-plugin-vue-i18n",label:VueDevToolsLabels["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[VUE_I18N_COMPONENT_TYPES],app:o},s=>{devtoolsApi=s,s.on.visitComponentTree(({componentInstance:c,treeNode:d})=>{updateComponentTreeTags(c,d,e)}),s.on.inspectComponent(({componentInstance:c,instanceData:d})=>{c.vnode.el&&c.vnode.el.__VUE_I18N__&&d&&(e.mode==="legacy"?c.vnode.el.__VUE_I18N__!==e.global.__composer&&inspectComposer(d,c.vnode.el.__VUE_I18N__):inspectComposer(d,c.vnode.el.__VUE_I18N__))}),s.addInspector({id:"vue-i18n-resource-inspector",label:VueDevToolsLabels["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:VueDevToolsPlaceholders["vue-i18n-resource-inspector"]}),s.on.getInspectorTree(c=>{c.app===o&&c.inspectorId==="vue-i18n-resource-inspector"&&registerScope(c,e)});const l=new Map;s.on.getInspectorState(async c=>{if(c.app===o&&c.inspectorId==="vue-i18n-resource-inspector")if(s.unhighlightElement(),inspectScope(c,e),c.nodeId==="global"){if(!l.has(c.app)){const[d]=await s.getComponentInstances(c.app);l.set(c.app,d)}s.highlightElement(l.get(c.app))}else{const d=getComponentInstance(c.nodeId,e);d&&s.highlightElement(d)}}),s.on.editInspectorState(c=>{c.app===o&&c.inspectorId==="vue-i18n-resource-inspector"&&editScope(c,e)}),s.addTimelineLayer({id:"vue-i18n-timeline",label:VueDevToolsLabels["vue-i18n-timeline"],color:VueDevToolsTimelineColors["vue-i18n-timeline"]}),n(!0)})}catch(s){console.error(s),a(!1)}})}function getI18nScopeLable(o){return o.type.name||o.type.displayName||o.type.__file||"Anonymous"}function updateComponentTreeTags(o,e,n){const a=n.mode==="composition"?n.global:n.global.__composer;if(o&&o.vnode.el&&o.vnode.el.__VUE_I18N__&&o.vnode.el.__VUE_I18N__!==a){const s={label:`i18n (${getI18nScopeLable(o)} Scope)`,textColor:0,backgroundColor:16764185};e.tags.push(s)}}function inspectComposer(o,e){const n=VUE_I18N_COMPONENT_TYPES;o.state.push({type:n,key:"locale",editable:!0,value:e.locale.value}),o.state.push({type:n,key:"availableLocales",editable:!1,value:e.availableLocales}),o.state.push({type:n,key:"fallbackLocale",editable:!0,value:e.fallbackLocale.value}),o.state.push({type:n,key:"inheritLocale",editable:!0,value:e.inheritLocale}),o.state.push({type:n,key:"messages",editable:!1,value:getLocaleMessageValue(e.messages.value)}),o.state.push({type:n,key:"datetimeFormats",editable:!1,value:e.datetimeFormats.value}),o.state.push({type:n,key:"numberFormats",editable:!1,value:e.numberFormats.value})}function getLocaleMessageValue(o){const e={};return Object.keys(o).forEach(n=>{const a=o[n];isFunction$1(a)&&"source"in a?e[n]=getMessageFunctionDetails(a):isMessageAST(a)&&a.loc&&a.loc.source?e[n]=a.loc.source:isObject$2(a)?e[n]=getLocaleMessageValue(a):e[n]=a}),e}const ESC={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function escape$1(o){return o.replace(/[<>"&]/g,escapeChar)}function escapeChar(o){return ESC[o]||o}function getMessageFunctionDetails(o){return{_custom:{type:"function",display:`<span>\u0192</span> ${o.source?`("${escape$1(o.source)}")`:"(?)"}`}}}function registerScope(o,e){o.rootNodes.push({id:"global",label:"Global Scope"});const n=e.mode==="composition"?e.global:e.global.__composer;for(const[a,s]of e.__instances){const l=e.mode==="composition"?s:s.__composer;n!==l&&o.rootNodes.push({id:l.id.toString(),label:`${getI18nScopeLable(a)} Scope`})}}function getComponentInstance(o,e){let n=null;if(o!=="global"){for(const[a,s]of e.__instances.entries())if(s.id.toString()===o){n=a;break}}return n}function getComposer$2(o,e){if(o==="global")return e.mode==="composition"?e.global:e.global.__composer;{const n=Array.from(e.__instances.values()).find(a=>a.id.toString()===o);return n?e.mode==="composition"?n:n.__composer:null}}function inspectScope(o,e){const n=getComposer$2(o.nodeId,e);return n&&(o.state=makeScopeInspectState(n)),null}function makeScopeInspectState(o){const e={},n="Locale related info",a=[{type:n,key:"locale",editable:!0,value:o.locale.value},{type:n,key:"fallbackLocale",editable:!0,value:o.fallbackLocale.value},{type:n,key:"availableLocales",editable:!1,value:o.availableLocales},{type:n,key:"inheritLocale",editable:!0,value:o.inheritLocale}];e[n]=a;const s="Locale messages info",l=[{type:s,key:"messages",editable:!1,value:getLocaleMessageValue(o.messages.value)}];e[s]=l;{const c="Datetime formats info",d=[{type:c,key:"datetimeFormats",editable:!1,value:o.datetimeFormats.value}];e[c]=d;const u="Datetime formats info",f=[{type:u,key:"numberFormats",editable:!1,value:o.numberFormats.value}];e[u]=f}return e}function addTimelineEvent(o,e){if(devtoolsApi){let n;e&&"groupId"in e&&(n=e.groupId,delete e.groupId),devtoolsApi.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:o,groupId:n,time:Date.now(),meta:{},data:e||{},logType:o==="compile-error"?"error":o==="fallback"||o==="missing"?"warning":"default"}})}}function editScope(o,e){const n=getComposer$2(o.nodeId,e);if(n){const[a]=o.path;a==="locale"&&isString$1(o.state.value)?n.locale.value=o.state.value:a==="fallbackLocale"&&(isString$1(o.state.value)||isArray$2(o.state.value)||isObject$2(o.state.value))?n.fallbackLocale.value=o.state.value:a==="inheritLocale"&&isBoolean$1(o.state.value)&&(n.inheritLocale=o.state.value)}}function convertComposerOptions(o){const e=isString$1(o.locale)?o.locale:DEFAULT_LOCALE,n=isString$1(o.fallbackLocale)||isArray$2(o.fallbackLocale)||isPlainObject$1(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:e,a=isFunction$1(o.missing)?o.missing:void 0,s=isBoolean$1(o.silentTranslationWarn)||isRegExp$1(o.silentTranslationWarn)?!o.silentTranslationWarn:!0,l=isBoolean$1(o.silentFallbackWarn)||isRegExp$1(o.silentFallbackWarn)?!o.silentFallbackWarn:!0,c=isBoolean$1(o.fallbackRoot)?o.fallbackRoot:!0,d=!!o.formatFallbackMessages,u=isPlainObject$1(o.modifiers)?o.modifiers:{},f=o.pluralizationRules,v=isFunction$1(o.postTranslation)?o.postTranslation:void 0,b=isString$1(o.warnHtmlInMessage)?o.warnHtmlInMessage!=="off":!0,k=!!o.escapeParameterHtml,x=isBoolean$1(o.sync)?o.sync:!0;let _=o.messages;if(isPlainObject$1(o.sharedMessages)){const L=o.sharedMessages;_=Object.keys(L).reduce((U,j)=>{const oe=U[j]||(U[j]={});return assign$1(oe,L[j]),U},_||{})}const{__i18n:E,__root:B,__injectWithOption:M}=o,I=o.datetimeFormats,F=o.numberFormats,V=o.flatJson;return{locale:e,fallbackLocale:n,messages:_,flatJson:V,datetimeFormats:I,numberFormats:F,missing:a,missingWarn:s,fallbackWarn:l,fallbackRoot:c,fallbackFormat:d,modifiers:u,pluralRules:f,postTranslation:v,warnHtmlMessage:b,escapeParameter:k,messageResolver:o.messageResolver,inheritLocale:x,__i18n:E,__root:B,__injectWithOption:M}}function createVueI18n(o={}){const e=createComposer(convertComposerOptions(o)),{__extender:n}=o,a={id:e.id,get locale(){return e.locale.value},set locale(s){e.locale.value=s},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(s){e.fallbackLocale.value=s},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(s){e.setMissingHandler(s)},get silentTranslationWarn(){return isBoolean$1(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(s){e.missingWarn=isBoolean$1(s)?!s:s},get silentFallbackWarn(){return isBoolean$1(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(s){e.fallbackWarn=isBoolean$1(s)?!s:s},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(s){e.fallbackFormat=s},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(s){e.setPostTranslationHandler(s)},get sync(){return e.inheritLocale},set sync(s){e.inheritLocale=s},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){e.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(s){e.escapeParameter=s},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...s){return Reflect.apply(e.t,e,[...s])},rt(...s){return Reflect.apply(e.rt,e,[...s])},tc(...s){const[l,c,d]=s,u={plural:1};let f=null,v=null;if(warnOnce(getWarnMessage(I18nWarnCodes.DEPRECATE_TC)),!isString$1(l))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const b=l;return isString$1(c)?u.locale=c:isNumber$2(c)?u.plural=c:isArray$2(c)?f=c:isPlainObject$1(c)&&(v=c),isString$1(d)?u.locale=d:isArray$2(d)?f=d:isPlainObject$1(d)&&(v=d),Reflect.apply(e.t,e,[b,f||v||{},u])},te(s,l){return e.te(s,l)},tm(s){return e.tm(s)},getLocaleMessage(s){return e.getLocaleMessage(s)},setLocaleMessage(s,l){e.setLocaleMessage(s,l)},mergeLocaleMessage(s,l){e.mergeLocaleMessage(s,l)},d(...s){return Reflect.apply(e.d,e,[...s])},getDateTimeFormat(s){return e.getDateTimeFormat(s)},setDateTimeFormat(s,l){e.setDateTimeFormat(s,l)},mergeDateTimeFormat(s,l){e.mergeDateTimeFormat(s,l)},n(...s){return Reflect.apply(e.n,e,[...s])},getNumberFormat(s){return e.getNumberFormat(s)},setNumberFormat(s,l){e.setNumberFormat(s,l)},mergeNumberFormat(s,l){e.mergeNumberFormat(s,l)}};return a.__extender=n,a.__enableEmitter=s=>{const l=e;l[EnableEmitter]&&l[EnableEmitter](s)},a.__disableEmitter=()=>{const s=e;s[DisableEmitter]&&s[DisableEmitter]()},a}function defineMixin(o,e,n){return{beforeCreate(){const a=getCurrentInstance();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const l=s.i18n;if(s.__i18n&&(l.__i18n=s.__i18n),l.__root=e,this===this.$root)this.$i18n=mergeToGlobal(o,l);else{l.__injectWithOption=!0,l.__extender=n.__vueI18nExtend,this.$i18n=createVueI18n(l);const c=this.$i18n;c.__extender&&(c.__disposer=c.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(o,s);else{this.$i18n=createVueI18n({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}else this.$i18n=o;s.__i18nGlobal&&adjustI18nResources(e,s,s),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$tc=(...l)=>this.$i18n.tc(...l),this.$te=(l,c)=>this.$i18n.te(l,c),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l),n.__setInstance(a,this.$i18n)},mounted(){if(this.$el&&this.$i18n){const a=this.$i18n;this.$el.__VUE_I18N__=a.__composer;const s=this.__v_emitter=createEmitter();a.__enableEmitter&&a.__enableEmitter(s),s.on("*",addTimelineEvent)}},unmounted(){const a=getCurrentInstance();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$i18n;this.$el&&this.$el.__VUE_I18N__&&(this.__v_emitter&&(this.__v_emitter.off("*",addTimelineEvent),delete this.__v_emitter),this.$i18n&&(s.__disableEmitter&&s.__disableEmitter(),delete this.$el.__VUE_I18N__)),delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(a),delete this.$i18n}}}function mergeToGlobal(o,e){o.locale=e.locale||o.locale,o.fallbackLocale=e.fallbackLocale||o.fallbackLocale,o.missing=e.missing||o.missing,o.silentTranslationWarn=e.silentTranslationWarn||o.silentFallbackWarn,o.silentFallbackWarn=e.silentFallbackWarn||o.silentFallbackWarn,o.formatFallbackMessages=e.formatFallbackMessages||o.formatFallbackMessages,o.postTranslation=e.postTranslation||o.postTranslation,o.warnHtmlInMessage=e.warnHtmlInMessage||o.warnHtmlInMessage,o.escapeParameterHtml=e.escapeParameterHtml||o.escapeParameterHtml,o.sync=e.sync||o.sync,o.__composer[SetPluralRulesSymbol](e.pluralizationRules||o.pluralizationRules);const n=getLocaleMessages(o.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(a=>o.mergeLocaleMessage(a,n[a])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(a=>o.mergeDateTimeFormat(a,e.datetimeFormats[a])),e.numberFormats&&Object.keys(e.numberFormats).forEach(a=>o.mergeNumberFormat(a,e.numberFormats[a])),o}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:o=>o==="parent"||o==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:o},e){return e.length===1&&e[0]==="default"?(o.default?o.default():[]).reduce((n,a)=>[...n,...a.type===Fragment$1?a.children:[a]],[]):e.reduce((n,a)=>{const s=o[a];return s&&(n[a]=s()),n},create$1())}function getFragmentableTag(){return Fragment$1}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:o=>isNumber$2(o)||!isNaN(o)}},baseFormatProps),setup(o,e){const{slots:n,attrs:a}=e,s=o.i18n||useI18n({useScope:o.scope,__useComponent:!0});return()=>{const l=Object.keys(n).filter(b=>b!=="_"),c=create$1();o.locale&&(c.locale=o.locale),o.plural!==void 0&&(c.plural=isString$1(o.plural)?+o.plural:o.plural);const d=getInterpolateArg(e,l),u=s[TranslateVNodeSymbol](o.keypath,d,c),f=assign$1(create$1(),a),v=isString$1(o.tag)||isObject$2(o.tag)?o.tag:getFragmentableTag();return h(v,f,u)}}}),Translation=TranslationImpl;function isVNode(o){return isArray$2(o)&&!isString$1(o[0])}function renderFormatter(o,e,n,a){const{slots:s,attrs:l}=e;return()=>{const c={part:!0};let d=create$1();o.locale&&(c.locale=o.locale),isString$1(o.format)?c.key=o.format:isObject$2(o.format)&&(isString$1(o.format.key)&&(c.key=o.format.key),d=Object.keys(o.format).reduce((k,x)=>n.includes(x)?assign$1(create$1(),k,{[x]:o.format[x]}):k,create$1()));const u=a(o.value,c,d);let f=[c.key];isArray$2(u)?f=u.map((k,x)=>{const _=s[k.type],E=_?_({[k.type]:k.value,index:x,parts:u}):[k.value];return isVNode(E)&&(E[0].key=`${k.type}-${x}`),E}):isString$1(u)&&(f=[u]);const v=assign$1(create$1(),l),b=isString$1(o.tag)||isObject$2(o.tag)?o.tag:getFragmentableTag();return h(b,v,f)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(o,e){const n=o.i18n||useI18n({useScope:o.scope,__useComponent:!0});return renderFormatter(o,e,NUMBER_FORMAT_OPTIONS_KEYS,(...a)=>n[NumberPartsSymbol](...a))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(o,e){const n=o.i18n||useI18n({useScope:o.scope,__useComponent:!0});return renderFormatter(o,e,DATETIME_FORMAT_OPTIONS_KEYS,(...a)=>n[DatetimePartsSymbol](...a))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$1(o,e){const n=o;if(o.mode==="composition")return n.__getInstance(e)||o.global;{const a=n.__getInstance(e);return a!=null?a.__composer:o.global.__composer}}function vTDirective(o){const e=n=>{const{instance:a,value:s}=n;if(!a||!a.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=getComposer$1(o,a.$),c=parseValue(s);return[Reflect.apply(l.t,l,[...makeParams(c)]),l]};return{created:(n,a)=>{const[s,l]=e(a);inBrowser&&o.global===l&&(n.__i18nWatcher=watch(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),n.__composer=l,n.textContent=s},unmounted:n=>{inBrowser&&n.__i18nWatcher&&(n.__i18nWatcher(),n.__i18nWatcher=void 0,delete n.__i18nWatcher),n.__composer&&(n.__composer=void 0,delete n.__composer)},beforeUpdate:(n,{value:a})=>{if(n.__composer){const s=n.__composer,l=parseValue(a);n.textContent=Reflect.apply(s.t,s,[...makeParams(l)])}},getSSRProps:n=>{const[a]=e(n);return{textContent:a}}}}function parseValue(o){if(isString$1(o))return{path:o};if(isPlainObject$1(o)){if(!("path"in o))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return o}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(o){const{path:e,locale:n,args:a,choice:s,plural:l}=o,c={},d=a||{};return isString$1(n)&&(c.locale=n),isNumber$2(s)&&(c.plural=s),isNumber$2(l)&&(c.plural=l),[e,d,c]}function apply$1(o,e,...n){const a=isPlainObject$1(n[0])?n[0]:{};(!isBoolean$1(a.globalInstall)||a.globalInstall)&&([Translation.name,"I18nT"].forEach(s=>o.component(s,Translation)),[NumberFormat.name,"I18nN"].forEach(s=>o.component(s,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(s=>o.component(s,DatetimeFormat))),o.directive("t",vTDirective(e))}const I18nInjectionKey=makeSymbol$1("global-vue-i18n");function createI18n(o={},e){const n=__VUE_I18N_LEGACY_API__&&isBoolean$1(o.legacy)?o.legacy:__VUE_I18N_LEGACY_API__,a=isBoolean$1(o.globalInjection)?o.globalInjection:!0,s=new Map,[l,c]=createGlobal(o,n),d=makeSymbol$1("vue-i18n");function u(k){return s.get(k)||null}function f(k,x){s.set(k,x)}function v(k){s.delete(k)}const b={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},async install(k,...x){if(k.__VUE_I18N__=b,k.__VUE_I18N_SYMBOL__=d,k.provide(k.__VUE_I18N_SYMBOL__,b),isPlainObject$1(x[0])){const B=x[0];b.__composerExtend=B.__composerExtend,b.__vueI18nExtend=B.__vueI18nExtend}let _=null;!n&&a&&(_=injectGlobalFields(k,b.global)),__VUE_I18N_FULL_INSTALL__&&apply$1(k,b,...x),__VUE_I18N_LEGACY_API__&&n&&k.mixin(defineMixin(c,c.__composer,b));const E=k.unmount;k.unmount=()=>{_&&_(),b.dispose(),E()};{if(!await enableDevTools(k,b))throw createI18nError(I18nErrorCodes.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN);const B=createEmitter();if(n){const M=c;M.__enableEmitter&&M.__enableEmitter(B)}else{const M=c;M[EnableEmitter]&&M[EnableEmitter](B)}B.on("*",addTimelineEvent)}},get global(){return c},dispose(){l.stop()},__instances:s,__getInstance:u,__setInstance:f,__deleteInstance:v};return b}function useI18n(o={}){const e=getCurrentInstance();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const n=getI18nInstance(e),a=getGlobalComposer(n),s=getComponentOptions(e),l=getScope(o,s);if(l==="global")return adjustI18nResources(a,o,s),a;if(l==="parent"){let u=getComposer(n,e,o.__useComponent);return u==null&&(warn$1(getWarnMessage(I18nWarnCodes.NOT_FOUND_PARENT_SCOPE)),u=a),u}const c=n;let d=c.__getInstance(e);if(d==null){const u=assign$1({},o);"__i18n"in s&&(u.__i18n=s.__i18n),a&&(u.__root=a),d=createComposer(u),c.__composerExtend&&(d[DisposeSymbol]=c.__composerExtend(d)),setupLifeCycle(c,e,d),c.__setInstance(e,d)}return d}function createGlobal(o,e,n){const a=effectScope(),s=__VUE_I18N_LEGACY_API__&&e?a.run(()=>createVueI18n(o)):a.run(()=>createComposer(o));if(s==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[a,s]}function getI18nInstance(o){const e=inject(o.isCE?I18nInjectionKey:o.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(o.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}function getScope(o,e){return isEmptyObject(o)?"__i18n"in e?"local":"global":o.useScope?o.useScope:"local"}function getGlobalComposer(o){return o.mode==="composition"?o.global:o.global.__composer}function getComposer(o,e,n=!1){let a=null;const s=e.root;let l=getParentComponentInstance(e,n);for(;l!=null;){const c=o;if(o.mode==="composition")a=c.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const d=c.__getInstance(l);d!=null&&(a=d.__composer,n&&a&&!a[InejctWithOptionSymbol]&&(a=null))}if(a!=null||s===l)break;l=l.parent}return a}function getParentComponentInstance(o,e=!1){return o==null?null:e&&o.vnode.ctx||o.parent}function setupLifeCycle(o,e,n){let a=null;onMounted(()=>{if(e.vnode.el){e.vnode.el.__VUE_I18N__=n,a=createEmitter();const s=n;s[EnableEmitter]&&s[EnableEmitter](a),a.on("*",addTimelineEvent)}},e),onUnmounted(()=>{const s=n;e.vnode.el&&e.vnode.el.__VUE_I18N__&&(a&&a.off("*",addTimelineEvent),s[DisableEmitter]&&s[DisableEmitter](),delete e.vnode.el.__VUE_I18N__),o.__deleteInstance(e);const l=s[DisposeSymbol];l&&(l(),delete s[DisposeSymbol])},e)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(o,e){const n=Object.create(null);return globalExportProps.forEach(a=>{const s=Object.getOwnPropertyDescriptor(e,a);if(!s)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=isRef(s.value)?{get(){return s.value.value},set(c){s.value.value=c}}:{get(){return s.get&&s.get()}};Object.defineProperty(n,a,l)}),o.config.globalProperties.$i18n=n,globalExportMethods.forEach(a=>{const s=Object.getOwnPropertyDescriptor(e,a);if(!s||!s.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(o.config.globalProperties,`$${a}`,s)}),()=>{delete o.config.globalProperties.$i18n,globalExportMethods.forEach(a=>{delete o.config.globalProperties[`$${a}`]})}}initFeatureFlags(),registerMessageCompiler(compile),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain);{const o=getGlobalThis();o.__INTLIFY__=!0,setDevToolsHook(o.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function _mitt(o){return{all:o=o||new Map,on:function(e,n){var a=o.get(e);a?a.push(n):o.set(e,[n])},off:function(e,n){var a=o.get(e);a&&(n?a.splice(a.indexOf(n)>>>0,1):o.set(e,[]))},emit:function(e,n){var a=o.get(e);a&&a.slice().map(function(s){s(n)}),(a=o.get("*"))&&a.slice().map(function(s){s(e,n)})}}}const EVENTS=["afterBlocksTrCommit","blocksDestroy"],useEventBus=()=>{const o=inject("eventBus");return{emit:o.emit,on:o.on,off:o.off,all:o.all,eventRefs:inject("eventRefs")}},eventbusPlugin={install:(o,e)=>{const n=_mitt(),a=EVENTS.reduce((s,l)=>(s[l]=ref(null),s),{});for(const s of EVENTS)n.on(s,(...l)=>{a[s].value=l});o.provide("eventBus",n),o.provide("eventRefs",a)}},messages={zh_CN:{languages:{label:"\u8BED\u8A00",zh_CN:"\u7B80\u4F53\u4E2D\u6587",en_US:"\u82F1\u8BED",zh_HK:"\u7E41\u4F53\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u4F53\u4E2D\u6587 (\u53F0\u6E7E)",ja_JP:"\u65E5\u8BED",fr_FR:"\u6CD5\u8BED"},login:{kbEditorLogin:{title:"\u6253\u5F00\u77E5\u8BC6\u5E93",serverUrlLabel:"\u670D\u52A1\u5668 URL",serverUrlPlaceholder:"\u8F93\u5165\u670D\u52A1\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u670D\u52A1\u5668\u4E0A\u6CA1\u6709\u77E5\u8BC6\u5E93\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u767B\u5F55</a>\uFF0C\u7136\u540E\u5728\u63A7\u5236\u9762\u677F\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93\u3002',kbLocationLabel:"\u77E5\u8BC6\u5E93",refreshKbListTooltip:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868",passwordLabel:"\u5BC6\u7801",adminLoginBtn:"\u7BA1\u7406\u5458\u767B\u9646",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u786E",connFailed:"\u8FDE\u63A5\u5931\u8D25",connecting:"\u8FDE\u63A5\u4E2D",connSuccess:"\u8FDE\u63A5\u6210\u529F",noKbServer:"\u6CA1\u6709\u77E5\u8BC6\u5E93\u670D\u52A1\u5668",loginFailed:"\u767B\u5F55\u5931\u8D25"},loginStatus:{idle:"\u7A7A\u95F2",loggingIn:"\u767B\u5F55\u4E2D",loginSuccess:"\u767B\u5F55\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u7801\u9519\u8BEF",loginFailed_Unknown:"\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u670D\u52A1\u5668\u7BA1\u7406\u5458"},loginBtn:{idle:"\u767B\u5F55",loggingIn:"\u767B\u5F55\u4E2D...",loginSuccess:"\u767B\u5F55\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5F55",loginFailed_Unknown:"\u767B\u5F55"}},adminLogin:{title:"\u7BA1\u7406\u5458\u767B\u5F55",serverUrlLabel:"\u670D\u52A1\u5668 URL",serverUrlPlaceholder:"\u8F93\u5165\u670D\u52A1\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u7801",kbEditorLoginBtn:"\u77E5\u8BC6\u5E93\u7F16\u8F91\u8005\u767B\u9646",loginBtn:{idle:"\u767B\u5F55",loggingIn:"\u767B\u5F55\u4E2D...",loginSuccess:"\u767B\u5F55\u6210\u529F",invalidServerUrl:"\u767B\u9646\u5931\u8D25",invalidPassword:"\u767B\u9646\u5931\u8D25",maxAttempts:"\u767B\u9646\u5931\u8D25",cannotConnectToServer:"\u767B\u9646\u5931\u8D25"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u786E",invalidPassword:"\u5BC6\u7801\u9519\u8BEF",maxAttempts:"\u8FBE\u5230\u6700\u5927\u5C1D\u8BD5\u6B21\u6570\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",cannotConnectToServer:"\u65E0\u6CD5\u8FDE\u63A5\u5230\u670D\u52A1\u5668"}}},kbView:{loadingKb:"\u52A0\u8F7D\u77E5\u8BC6\u5E93\u4E2D...",backup:{createBackup:"\u521B\u5EFA\u5907\u4EFD",createBackupSuccess:"\u5907\u4EFD\u6210\u529F",createBackupFailed:"\u5907\u4EFD\u5931\u8D25"},backlinksPanel:{nBacklinks:"{count} \u4E2A\u53CD\u5411\u94FE\u63A5",nPotentialLinks:"{count} \u4E2A\u6F5C\u5728\u94FE\u63A5"},keybindingInput:{empty:"\u70B9\u51FB\u8BBE\u7F6E\u5FEB\u6377\u952E"},codeblock:{unknownLanguage:"\u672A\u77E5\u8BED\u8A00",copyCode:"\u590D\u5236\u4EE3\u7801",copySuccess:"\u4EE3\u7801\u5757\u4E2D\u7684\u4EE3\u7801\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"},imageEditor:{title:"\u56FE\u7247\u7F16\u8F91\u5668",description:"\u652F\u6301\u56FE\u7247\u88C1\u526A\u3001\u65CB\u8F6C\uFF0C\u81EA\u52A8\u4F18\u5316\u626B\u63CF\u6587\u4EF6\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5E94\u7528\u66F4\u6539",saveAs:"\u53E6\u5B58\u4E3A",deleteOriginal:"\u662F\u5426\u5220\u9664\u539F\u56FE\uFF1F"},fusionCommand:{noResults:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9",noCommandResults:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u547D\u4EE4",allowedBlockTypes:"\u5141\u8BB8\u7684\u5757\u7C7B\u578B",searchPlaceholder:"\u641C\u7D22\u77E5\u8BC6\u5E93",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9009\u62E9\u641C\u7D22\u7ED3\u679C\uFF0C\u21B5 \u8DF3\u8F6C\u5230\u9009\u4E2D\u9879\uFF0C\u2318+\u21B5 \u63D2\u5165\u5757\u94FE\u63A5\uFF0Cesc \u5173\u95ED\u641C\u7D22\u9762\u677F",commandHelp:"\u8F93\u5165 / \u53EF\u641C\u7D22\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9009\u62E9\u547D\u4EE4\u7136\u540E \u21B5 \u6267\u884C\u547D\u4EE4\uFF0Cesc \u5173\u95ED\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52A8 {count} \u4E2A\u5757\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52A8\u540E\u7684\u5757",inputPlaceholder:"\u79FB\u52A8\u5230..."},refSuggestions:{noSuggestions:"\u6CA1\u6709\u7ED3\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u521B\u5EFA\u65B0\u5757"},pomodoro:{startWorking:"\u5F00\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8BBE\u7F6E",invalidJson:"\u65E0\u6548\u7684 JSON",reset:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",noResult:"\u6CA1\u6709\u627E\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5757",invalidBlockId:"\u65E0\u6548\u7684\u5757 ID"},syncStatus:{synced:"\u6240\u6709\u66F4\u6539\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u8D25"},sidePane:{remove:"\u4ECE\u4FA7\u680F\u79FB\u9664\u6B64\u9879",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9879",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9879",collapse:"\u6298\u53E0\u4FA7\u8FB9\u680F",moveToRight:"\u79FB\u52A8\u4FA7\u8FB9\u680F\u5230\u53F3\u4FA7",moveToBottom:"\u79FB\u52A8\u4FA7\u8FB9\u680F\u5230\u4E0B\u65B9",setFilter:"\u8BBE\u7F6E\u8FC7\u6EE4\u6761\u4EF6",setSort:"\u8BBE\u7F6E\u6392\u5E8F\u6761\u4EF6",empty:"\u{1F914} \u5F53\u524D\u4FA7\u8FB9\u680F\u4E3A\u7A7A",searchAndAdd:"\u641C\u7D22\u5757\u5E76\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F",emptyTip:`\u60A8\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u6DFB\u52A0\u5185\u5BB9\uFF1A
  - \u5728\u5757\u83DC\u5355\u4E2D\u9009\u62E9"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F"
  - \u4F7F\u7528\u5FEB\u6377\u952E Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u70B9\u51FB "+" \u6309\u94AE\u641C\u7D22\u6DFB\u52A0\u5757`},headerBar:{moreOptions:"\u66F4\u591A\u9009\u9879",dailynoteNavigator:"\u6BCF\u65E5\u7B14\u8BB0",pomodoro:"\u756A\u8304\u949F",closeMenu:"\u5173\u95ED\u83DC\u5355",openMenu:"\u6253\u5F00\u83DC\u5355",back:"\u540E\u9000",forward:"\u524D\u8FDB",search:"\u641C\u7D22",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u6362\u4E3A\u660E\u4EAE\u4E3B\u9898",switchDarkTheme:"\u5207\u6362\u4E3A\u9ED1\u6697\u4E3B\u9898",openSidepane:"\u6253\u5F00\u4FA7\u680F",closeSidepane:"\u5173\u95ED\u4FA7\u680F",export:"\u5BFC\u51FA",import:"\u5BFC\u5165",enterFocusMode:"\u8FDB\u5165\u4E13\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u4E13\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8BBE\u7F6E",timeMachine:"\u65F6\u5149\u673A",help:"\u5E2E\u52A9\u6587\u6863",exit:"\u9000\u51FA",keybindings:"\u67E5\u770B & \u7F16\u8F91\u5FEB\u6377\u952E"},command:{deleteBlock:"\u5220\u9664\u5757",copyBlockReference:"\u590D\u5236\u5757\u5F15\u7528",copyBlockMirror:"\u590D\u5236\u5757\u955C\u50CF",addToFavorite:"\u6DFB\u52A0\u5230\u6536\u85CF",addToSidepane:"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F",export:"\u5BFC\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5757",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u521B\u5EFA\u65F6\u95F4\u5347\u5E8F",ctimeDesc:"\u521B\u5EFA\u65F6\u95F4\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u65F6\u95F4\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u65F6\u95F4\u964D\u5E8F",archiveDone:"\u5F52\u6863\u5DF2\u5B8C\u6210\u4EFB\u52A1",moveBlock:"\u79FB\u52A8\u5757",moveBlockLeaveRef:"\u79FB\u52A8\u5757\uFF0C\u7559\u4E0B\u5757\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52A8\u5757\uFF0C\u7559\u4E0B\u5757\u955C\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u955C\u50CF\u5757",openFieldValuesInspector:"\u6253\u5F00\u5C5E\u6027\u68C0\u89C6\u5668",setBlockRefColor:"\u8BBE\u7F6E\u5757\u5F15\u7528\u989C\u8272",blue:"\u84DD\u8272",green:"\u7EFF\u8272",red:"\u7EA2\u8272",yellow:"\u9EC4\u8272",gray:"\u7070\u8272",orange:"\u6A59\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u6253\u5F00\u53CD\u94FE\u9762\u677F"},createNewTreeDialog:{title:"\u521B\u5EFA\u65B0\u6587\u6863",description:`\u6CA1\u6709\u627E\u5230\u6839\u5757\uFF0C\u8FD9\u53EF\u80FD\u662F\u56E0\u4E3A\uFF1A
1. \u8FD9\u662F\u4E00\u4E2A\u65B0\u6587\u6863
2. \u6570\u636E\u8FD8\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u786E\u5B9A\u8FD9\u662F\u65B0\u6587\u6863\uFF0C\u53EF\u4EE5\u70B9\u51FB"\u521B\u5EFA"\u6309\u94AE\u521B\u5EFA\u65B0\u6587\u6863\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u521B\u5EFA",creating:"\u6B63\u5728\u521B\u5EFA...",done:"\u521B\u5EFA\u6210\u529F",failed:"\u521B\u5EFA\u5931\u8D25"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u8FDB\u6765\u4F1A\u574F\u6389\u7684\uFF01\u8981\u4E0D\u8BD5\u8BD5\u5206\u6BB5\u7C98\u8D34\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u4F20",noFiles:"\u6CA1\u6709\u6587\u4EF6",refreshing:"\u6B63\u5728\u5237\u65B0...",refreshed:"\u5237\u65B0\u6210\u529F",previewPane:{openPreview:"\u9884\u89C8",download:"\u4E0B\u8F7D",reference:"\u63D2\u5165\u5757\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F84\u5F15\u7528",insertImage:"\u63D2\u5165\u56FE\u7247",fetchingImage:"\u56FE\u7247\u52A0\u8F7D\u4E2D...",closePreview:"\u5173\u95ED\u9884\u89C8",delete:"\u5220\u9664",info:"\u8BE6\u7EC6\u4FE1\u606F"},uploadStatus:{idle:"\u7A7A\u95F2",uploading:"\u4E0A\u4F20\u4E2D...",success:"\u4E0A\u4F20\u6210\u529F",failed:"\u4E0A\u4F20\u5931\u8D25"},fetchFilesStatus:{idle:"\u7A7A\u95F2",fetching:"\u6B63\u5728\u83B7\u53D6\u6587\u4EF6\u5217\u8868...",success:"\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u6210\u529F",failed:"\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u5931\u8D25"}},imageContent:{fetchingImage:"\u56FE\u7247\u52A0\u8F7D\u4E2D...",addCaption:"\u6DFB\u52A0\u56FE\u7247\u63CF\u8FF0",deleteImage:"\u5220\u9664\u56FE\u7247",blend:"\u4E0E\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u989C\u8272\uFF09",blendLuminosity:"\u4E0E\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u526A\u4E3A\u5706\u5F62",invert:"\u53CD\u8272",invertW:"\u53CD\u8272\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u8FB9",width:"\u5BBD\u5EA6",wider:"\u66F4\u5BBD",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u7F6E",download:"\u4E0B\u8F7D\u56FE\u7247",metadata:"\u8BE6\u7EC6\u4FE1\u606F",filter:"\u6EE4\u955C",clearScannedImage:"\u6E05\u9664\u626B\u63CF\u56FE\u7247\u7684\u80CC\u666F"},exporter:{title:"\u5BFC\u51FA",description:"\u5BFC\u51FA\u9009\u4E2D\u5B50\u6811\u4E3A HTML, PDF, Markdown, Plain Text \u7B49\u591A\u79CD\u683C\u5F0F",preview:"\u9884\u89C8",copyToClipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",exportToFile:"\u5BFC\u51FA\u5230\u6587\u4EF6",cancel:"\u53D6\u6D88",exportFormat:"\u5BFC\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88C5)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C5E\u6027\u68C0\u89C6\u5668",description:"\u67E5\u770B\u8FD9\u4E2A\u5757\u7684\u6240\u6709\u5C5E\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u8FD9\u4E00\u5929\u6CA1\u6709\u6BCF\u65E5\u7B14\u8BB0\uFF0C\u70B9\u51FB\u4EE5\u521B\u5EFA",gotoDailyNote:"\u70B9\u51FB\u4EE5\u524D\u5F80\u8FD9\u4E00\u5929\u7684\u6BCF\u65E5\u7B14\u8BB0",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u91CC\u521B\u5EFA\u6BCF\u65E5\u7B14\u8BB0",desc:'\u4F60\u5E94\u8BE5\u5230 "\u8BBE\u7F6E > \u6BCF\u65E5\u7B14\u8BB0 > \u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E" \u8BBE\u7F6E\u65B0\u521B\u5EFA\u7684\u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u540E\u9000\uFF0C\u53F3\u952E\u67E5\u770B\u6240\u6709\u5386\u53F2\u9879\u76EE",goToNext:"\u524D\u8FDB\uFF0C\u53F3\u952E\u67E5\u770B\u6240\u6709\u5386\u53F2\u9879\u76EE"},keybindings:{title:"\u5FEB\u6377\u952E",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u6377\u952E\u5217\u8868",close:"\u5173\u95ED",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u4EE3\u7801\u5757\u5185\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u5F00",collapse:"\u6298\u53E0",indent:"\u589E\u52A0\u7F29\u8FDB",outdent:"\u51CF\u5C11\u7F29\u8FDB",insertInlineMath:"\u63D2\u5165\u884C\u5185\u6570\u5B66\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5757\u7EA7\u6570\u5B66\u516C\u5F0F",bold:"\u52A0\u7C97",italic:"\u659C\u4F53",code:"\u4EE3\u7801",highlight:"\u9AD8\u4EAE",insertBlockRef:"\u63D2\u5165\u5757\u5F15\u7528",insertTag:"\u63D2\u5165\u6807\u7B7E",toCodeblock:"\u8F6C\u6362\u4E3A\u4EE3\u7801\u5757",undo:"\u64A4\u9500",redo:"\u91CD\u505A",softBreak:"\u8F6F\u6362\u884C",openFusionCommand:"\u6253\u5F00\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u6253\u5F00\u4FA7\u8FB9\u680F\u5E76\u805A\u7126 / \u5173\u95ED\u4FA7\u8FB9\u680F",moveSidePane:"\u79FB\u52A8\u4FA7\u8FB9\u680F\uFF08\u5230\u53F3\u4FA7 / \u4E0B\u65B9\uFF09",addToFavorite:"\u6DFB\u52A0\u5230\u6536\u85CF",addToSidePane:"\u6DFB\u52A0\u5230\u4FA7\u8FB9\u680F"}}},adminDashboard:{title:"\u7BA1\u7406\u5458\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8BC6\u5E93\u7BA1\u7406",logsAndAnalytics:"\u65E5\u5FD7\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8BC6\u5E93",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u8FD9\u91CC\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93\uFF0C\u5220\u9664\u77E5\u8BC6\u5E93\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8BC6\u5E93\u7684\u4FE1\u606F",noKbs:"\u{1F914} \u6CA1\u6709\u77E5\u8BC6\u5E93",noKbsDescription:'\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93"\u6309\u94AE\u6765\u521B\u5EFA\u4F60\u7684\u7B2C\u4E00\u4E2A\u77E5\u8BC6\u5E93',kbActions:{edit:"\u7F16\u8F91",delete:"\u5220\u9664",addKb:"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93",refreshKbList:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868"},newKbDialog:{title:"\u521B\u5EFA\u65B0\u77E5\u8BC6\u5E93",description:"\u8BF7\u586B\u5199\u4EE5\u4E0B\u4FE1\u606F\u6765\u521B\u5EFA\u65B0\u7684\u77E5\u8BC6\u5E93",nameLabel:"\u540D\u79F0",namePlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4F4D\u7F6E",passwordLabel:"\u5BC6\u7801",passwordPlaceholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u5BC6\u7801",createBtn:{idle:"\u521B\u5EFA",creating:"\u521B\u5EFA\u4E2D...",createSuccess:"\u521B\u5EFA\u6210\u529F",createFailed:"\u521B\u5EFA\u5931\u8D25"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u5220\u9664\u77E5\u8BC6\u5E93",description:'\u4F60\u786E\u5B9A\u8981\u5220\u9664\u77E5\u8BC6\u5E93 "{name}" \u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u5220\u9664",deleting:"\u6B63\u5728\u5220\u9664...",deleteSuccess:"\u5220\u9664\u6210\u529F",deleteFailed:"\u5220\u9664\u5931\u8D25"}}}}},en_US:{languages:{label:"Languages",en_US:"English",zh_CN:"Simplified Chinese",zh_HK:"Traditional Chinese (Hong Kong)",zh_TW:"Traditional Chinese (Taiwan)",ja_JP:"Japanese",fr_FR:"French"},login:{kbEditorLogin:{title:"Open Knowledge Base",serverUrlLabel:"Server URL",serverUrlPlaceholder:"Enter server URL, e.g. http://43.134.1.60/:8081",noKbServerMsg:'No knowledge base on this server. You can <a class="cursor-pointer">login as admin</a> and create a new knowledge base in the dashboard.',kbLocationLabel:"Knowledge Base",refreshKbListTooltip:"Refresh Knowledge Base List",passwordLabel:"Password",adminLoginBtn:"Admin Login",serverStatus:{invalidURL:"Invalid URL format",connFailed:"Connection failed",connecting:"Connecting",connSuccess:"Connected",noKbServer:"No knowledge base server",loginFailed:"Login failed"},loginStatus:{idle:"Idle",loggingIn:"Logging in",loginSuccess:"Login successful",loginFailed_InvalidPassword:"Invalid password",loginFailed_Unknown:"Unknown error, please contact server admin"},loginBtn:{idle:"Login",loggingIn:"Logging in...",loginSuccess:"Login successful",loginFailed_InvalidPassword:"Login",loginFailed_Unknown:"Login"}},adminLogin:{title:"Admin Login",serverUrlLabel:"Server URL",serverUrlPlaceholder:"Enter server URL, e.g. http://43.134.1.60/:8081",passwordLabel:"Password",kbEditorLoginBtn:"KB Editor Login",loginBtn:{idle:"Login",loggingIn:"Logging in...",loginSuccess:"Login successful",invalidServerUrl:"Login failed",invalidPassword:"Login failed",maxAttempts:"Login failed",cannotConnectToServer:"Login failed"},errMsg:{invalidServerUrl:"Invalid URL format",invalidPassword:"Invalid password",maxAttempts:"Maximum attempts reached, please try again later",cannotConnectToServer:"Cannot connect to server"}}},kbView:{loadingKb:"Loading knowledge base...",backup:{createBackup:"Create Backup",createBackupSuccess:"Backup created successfully",createBackupFailed:"Backup creation failed"},backlinksPanel:{nBacklinks:"{count} backlinks",nPotentialLinks:"{count} potential links"},keybindingInput:{empty:"Click to set shortcut"},codeblock:{unknownLanguage:"Unknown Language",copyCode:"Copy Code",copySuccess:"Code in code block has been copied to clipboard"},imageEditor:{title:"Image Editor",description:"Support image cropping, rotation, and automatic scan file optimization",cancel:"Cancel",save:"Apply Changes",saveAs:"Save As",deleteOriginal:"Delete original image?"},fusionCommand:{noResults:"No results found",noCommandResults:"No commands found",allowedBlockTypes:"Allowed block types",searchPlaceholder:"Search knowledge base",searchHelp:"\u2191\u2193 and Home, End to select results, \u21B5 to jump to selection, \u2318+\u21B5 to insert block reference, esc to close search panel",commandHelp:"Type / to search commands, \u2191\u2193 and Home, End to select command then \u21B5 to execute, esc to close command panel"},blockMover:{moveSuccess:"Successfully moved {count} blocks",focusMovedBlock:"Focus moved block",inputPlaceholder:"Move to..."},refSuggestions:{noSuggestions:"No results",createNewUnder1:"Create new block under",createNewUnder2:""},pomodoro:{startWorking:"Let's get started!",startResting:"Take a break",stop:"Stop",working:"Working...",resting:"Resting..."},settingsPanel:{title:"Settings",invalidJson:"Invalid JSON",reset:"Reset to defaults",noResult:"No matching blocks found",invalidBlockId:"Invalid block ID"},syncStatus:{synced:"All changes synced",syncing:"Syncing",disconnected:"Sync failed"},sidePane:{remove:"Remove from sidebar",prev:"Focus previous item",next:"Focus next item",collapse:"Collapse sidebar",moveToRight:"Move sidebar to right",moveToBottom:"Move sidebar to bottom",setFilter:"Set filter",setSort:"Set sort",empty:"\u{1F914} Sidebar is empty",searchAndAdd:"Search blocks and add to sidebar",emptyTip:`You can add content by:
  - Selecting "Add to sidebar" in block menu
  - Using shortcut Command/Ctrl + K
  - Clicking "+" button in top right to search and add blocks`},headerBar:{moreOptions:"More Options",dailynoteNavigator:"Daily Notes",pomodoro:"Pomodoro",closeMenu:"Close Menu",openMenu:"Open Menu",back:"Back",forward:"Forward",search:"Search",notifications:"Notifications",switchLightTheme:"Switch to Light Theme",switchDarkTheme:"Switch to Dark Theme",openSidepane:"Open Sidebar",closeSidepane:"Close Sidebar",export:"Export",import:"Import",enterFocusMode:"Enter Focus Mode",exitFocusMode:"Exit Focus Mode",attachmentsManager:"Attachments Manager",settings:"Settings",timeMachine:"Time Machine",help:"Help",exit:"Exit",keybindings:"View & Edit Shortcuts"},command:{deleteBlock:"Delete Block",copyBlockReference:"Copy Block Reference",copyBlockMirror:"Copy Block Mirror",addToFavorite:"Add to Favorites",addToSidepane:"Add to Sidebar",export:"Export",sortDirectChildren:"Sort Direct Children",sortDictAsc:"Dictionary Order Ascending",sortDictDesc:"Dictionary Order Descending",ctimeAsc:"Creation Time Ascending",ctimeDesc:"Creation Time Descending",mtimeAsc:"Modified Time Ascending",mtimeDesc:"Modified Time Descending",archiveDone:"Archive Completed Tasks",moveBlock:"Move Block",moveBlockLeaveRef:"Move Block, Leave Reference",moveBlockLeaveMirror:"Move Block, Leave Mirror",insertMirrorBelow:"Insert Mirror Below",openFieldValuesInspector:"Open Field Values Inspector",setBlockRefColor:"Set Block Reference Color",blue:"Blue",green:"Green",red:"Red",yellow:"Yellow",gray:"Gray",orange:"Orange",purple:"Purple"},backlinks:{openBacklinksPanel:"Open Backlinks Panel"},createNewTreeDialog:{title:"Create New Document",description:`No root block found. This could be because:
1. This is a new document
2. Data is still syncing`,waitingForSync:'Waiting for sync. If you are sure this is a new document, click "Create" to create a new document.',waitBtn:"Wait",createBtn:"Create",creating:"Creating...",done:"Created successfully",failed:"Creation failed"},pasteDialog:{title:"No No",description:"Too big! It will break if you put it in! Try pasting in segments?",cancelBtn:"Got it"},attachmentsManager:{title:"Attachments Manager",upload:"Upload",noFiles:"No files",refreshing:"Refreshing...",refreshed:"Refresh successful",previewPane:{openPreview:"Preview",download:"Download",reference:"Insert Block Reference",pathReference:"Insert Path Reference",insertImage:"Insert Image",fetchingImage:"Loading image...",closePreview:"Close Preview",delete:"Delete",info:"Details"},uploadStatus:{idle:"Idle",uploading:"Uploading...",success:"Upload successful",failed:"Upload failed"},fetchFilesStatus:{idle:"Idle",fetching:"Fetching file list...",success:"File list fetched successfully",failed:"Failed to fetch file list"}},imageContent:{fetchingImage:"Loading image...",addCaption:"Add Image Caption",deleteImage:"Delete Image",blend:"Blend with Background (by Color)",blendLuminosity:"Blend with Background (by Luminosity)",circle:"Crop to Circle",invert:"Invert",invertW:"Invert (White Background)",outline:"Outline",width:"Width",wider:"Wider",narrower:"Narrower",resetWidth:"Reset",download:"Download Image",metadata:"Details",filter:"Filter",clearScannedImage:"Clear Scanned Image Background"},exporter:{title:"Export",description:"Export selected subtree as HTML, PDF, Markdown, Plain Text and other formats",preview:"Preview",copyToClipboard:"Copy to Clipboard",exportToFile:"Export to File",cancel:"Cancel",exportFormat:"Export Format"},fontSelector:{notAvailable:"(Not Installed)",notSpecified:"(Not Specified)"},fieldValuesInspector:{title:"Field Values Inspector",description:"View all field values of this block"},dailynoteNavigator:{noDailyNote:"No daily note for this day, click to create",gotoDailyNote:"Click to go to daily note for this day",dontKnowWhereToCreate:{title:"Don't know where to create daily notes",desc:'You should go to "Settings > Daily Notes > Daily Notes Location" to set where new daily notes should be created'}},history:{goToPrev:"Back, right click to view all history items",goToNext:"Forward, right click to view all history items"},keybindings:{title:"Shortcuts",description:"List of all available shortcuts",close:"Close",groups:{normal:"Common Operations",inCodeBlock:"Code Block Specific"},commands:{swapUp:"Move Up",swapDown:"Move Down",expand:"Expand",collapse:"Collapse",indent:"Increase Indent",outdent:"Decrease Indent",insertInlineMath:"Insert Inline Math",insertBlockMath:"Insert Block Math",bold:"Bold",italic:"Italic",code:"Code",highlight:"Highlight",insertBlockRef:"Insert Block Reference",insertTag:"Insert Tag",toCodeblock:"Convert to Code Block",undo:"Undo",redo:"Redo",softBreak:"Soft Break",openFusionCommand:"Open Multi-function Panel",openAndFocusToSidePane:"Open Sidebar and Focus / Close Sidebar",moveSidePane:"Move Sidebar (to Right / Bottom)",addToFavorite:"Add to Favorites",addToSidePane:"Add to Sidebar"}}},adminDashboard:{title:"Admin Dashboard",logout:"Logout",tabs:{kbManagement:"Knowledge Base Management",logsAndAnalytics:"Logs and Analytics"},kbManagement:{allKbs:"All Knowledge Bases",allKbsDescription:"You can create new knowledge bases, delete knowledge bases, or modify existing knowledge base information here",noKbs:"\u{1F914} No Knowledge Bases",noKbsDescription:'Click the "Create New Knowledge Base" button in the top right to create your first knowledge base',kbActions:{edit:"Edit",delete:"Delete",addKb:"Create New Knowledge Base",refreshKbList:"Refresh Knowledge Base List"},newKbDialog:{title:"Create New Knowledge Base",description:"Please fill in the following information to create a new knowledge base",nameLabel:"Name",namePlaceholder:"Enter knowledge base name",locationLabel:"Location",locationPlaceholder:"Enter knowledge base location",passwordLabel:"Password",passwordPlaceholder:"Enter knowledge base password",createBtn:{idle:"Create",creating:"Creating...",createSuccess:"Creation successful",createFailed:"Creation failed"},cancelBtn:"Cancel"},deleteKbDialog:{title:"Delete Knowledge Base",description:'Are you sure you want to delete knowledge base "{name}"? This action cannot be undone.',cancelBtn:"Cancel",status:{idle:"Delete",deleting:"Deleting...",deleteSuccess:"Deletion successful",deleteFailed:"Deletion failed"}}}}},zh_HK:{languages:{label:"\u8A9E\u8A00",zh_CN:"\u7C21\u9AD4\u4E2D\u6587",zh_HK:"\u7E41\u9AD4\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",en_US:"\u82F1\u6587",ja_JP:"\u65E5\u6587",fr_FR:"\u6CD5\u6587"},login:{kbEditorLogin:{title:"\u958B\u555F\u77E5\u8B58\u5EAB",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u4F3A\u670D\u5668\u4E0A\u6C92\u6709\u77E5\u8B58\u5EAB\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u54E1\u8EAB\u4EFD\u767B\u5165</a>\uFF0C\u7136\u5F8C\u5728\u63A7\u5236\u53F0\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\u3002',kbLocationLabel:"\u77E5\u8B58\u5EAB",refreshKbListTooltip:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE",passwordLabel:"\u5BC6\u78BC",adminLoginBtn:"\u7BA1\u7406\u54E1\u767B\u5165",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",connFailed:"\u9023\u7DDA\u5931\u6557",connecting:"\u9023\u7DDA\u4E2D",connSuccess:"\u9023\u7DDA\u6210\u529F",noKbServer:"\u6C92\u6709\u77E5\u8B58\u5EAB\u4F3A\u670D\u5668",loginFailed:"\u767B\u5165\u5931\u6557"},loginStatus:{idle:"\u9592\u7F6E",loggingIn:"\u767B\u5165\u4E2D",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u78BC\u932F\u8AA4",loginFailed_Unknown:"\u672A\u77E5\u932F\u8AA4\uFF0C\u8ACB\u806F\u7D61\u4F3A\u670D\u5668\u7BA1\u7406\u54E1"},loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5165",loginFailed_Unknown:"\u767B\u5165"}},adminLogin:{title:"\u7BA1\u7406\u54E1\u767B\u5165",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u78BC",kbEditorLoginBtn:"\u77E5\u8B58\u5EAB\u7DE8\u8F2F\u8005\u767B\u5165",loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",invalidServerUrl:"\u767B\u5165\u5931\u6557",invalidPassword:"\u767B\u5165\u5931\u6557",maxAttempts:"\u767B\u5165\u5931\u6557",cannotConnectToServer:"\u767B\u5165\u5931\u6557"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4",maxAttempts:"\u9054\u5230\u6700\u5927\u5617\u8A66\u6B21\u6578\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",cannotConnectToServer:"\u7121\u6CD5\u9023\u7DDA\u5230\u4F3A\u670D\u5668"}}},kbView:{loadingKb:"\u8F09\u5165\u77E5\u8B58\u5EAB\u4E2D...",backup:{createBackup:"\u5275\u5EFA\u5099\u4EFD",createBackupSuccess:"\u5099\u4EFD\u5275\u5EFA\u6210\u529F",createBackupFailed:"\u5099\u4EFD\u5275\u5EFA\u5931\u6557"},backlinksPanel:{nBacklinks:"{count} \u500B\u53CD\u5411\u9023\u7D50",nPotentialLinks:"{count} \u500B\u6F5B\u5728\u9023\u7D50"},keybindingInput:{empty:"\u9EDE\u64CA\u8A2D\u7F6E\u5FEB\u6377\u9375"},codeblock:{unknownLanguage:"\u672A\u77E5\u8A9E\u8A00",copyCode:"\u8907\u88FD\u7A0B\u5F0F\u78BC",copySuccess:"\u7A0B\u5F0F\u78BC\u5DF2\u8907\u88FD\u5230\u526A\u8CBC\u7C3F"},imageEditor:{title:"\u5716\u7247\u7DE8\u8F2F\u5668",description:"\u652F\u63F4\u5716\u7247\u88C1\u526A\u3001\u65CB\u8F49\uFF0C\u81EA\u52D5\u6700\u4F73\u5316\u6383\u63CF\u6A94\u6848\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5957\u7528\u8B8A\u66F4",saveAs:"\u53E6\u5B58\u65B0\u6A94",deleteOriginal:"\u662F\u5426\u522A\u9664\u539F\u5716\uFF1F"},fusionCommand:{noResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u5167\u5BB9",noCommandResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u547D\u4EE4",allowedBlockTypes:"\u5141\u8A31\u7684\u5340\u584A\u985E\u578B",searchPlaceholder:"\u641C\u5C0B\u77E5\u8B58\u5EAB",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9078\u64C7\u641C\u5C0B\u7D50\u679C\uFF0C\u21B5 \u8DF3\u8F49\u5230\u9078\u4E2D\u9805\uFF0C\u2318+\u21B5 \u63D2\u5165\u5340\u584A\u9023\u7D50\uFF0Cesc \u95DC\u9589\u641C\u5C0B\u9762\u677F",commandHelp:"\u8F38\u5165 / \u53EF\u641C\u5C0B\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9078\u64C7\u547D\u4EE4\u7136\u5F8C \u21B5 \u57F7\u884C\u547D\u4EE4\uFF0Cesc \u95DC\u9589\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52D5 {count} \u500B\u5340\u584A\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52D5\u5F8C\u7684\u5340\u584A",inputPlaceholder:"\u79FB\u52D5\u5230..."},refSuggestions:{noSuggestions:"\u6C92\u6709\u7D50\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u5EFA\u7ACB\u65B0\u5340\u584A"},pomodoro:{startWorking:"\u958B\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u6548\u7684 JSON",reset:"\u91CD\u8A2D\u70BA\u9810\u8A2D\u503C",noResult:"\u6C92\u6709\u627E\u5230\u7B26\u5408\u689D\u4EF6\u7684\u5340\u584A",invalidBlockId:"\u7121\u6548\u7684\u5340\u584A ID"},syncStatus:{synced:"\u6240\u6709\u8B8A\u66F4\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u6557"},sidePane:{remove:"\u5F9E\u5074\u908A\u6B04\u79FB\u9664\u6B64\u9805",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9805",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9805",collapse:"\u647A\u758A\u5074\u908A\u6B04",moveToRight:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u53F3\u5074",moveToBottom:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u4E0B\u65B9",setFilter:"\u8A2D\u5B9A\u904E\u6FFE\u689D\u4EF6",setSort:"\u8A2D\u5B9A\u6392\u5E8F\u689D\u4EF6",empty:"\u{1F914} \u76EE\u524D\u5074\u908A\u6B04\u70BA\u7A7A",searchAndAdd:"\u641C\u5C0B\u5340\u584A\u4E26\u65B0\u589E\u5230\u5074\u908A\u6B04",emptyTip:`\u60A8\u53EF\u4EE5\u900F\u904E\u4EE5\u4E0B\u65B9\u5F0F\u65B0\u589E\u5167\u5BB9\uFF1A
  - \u5728\u5340\u584A\u9078\u55AE\u4E2D\u9078\u64C7"\u65B0\u589E\u5230\u5074\u908A\u6B04"
  - \u4F7F\u7528\u5FEB\u901F\u9375 Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u9EDE\u64CA "+" \u6309\u9215\u641C\u5C0B\u65B0\u589E\u5340\u584A`},headerBar:{moreOptions:"\u66F4\u591A\u9078\u9805",dailynoteNavigator:"\u6BCF\u65E5\u7B46\u8A18",pomodoro:"\u756A\u8304\u9418",closeMenu:"\u95DC\u9589\u9078\u55AE",openMenu:"\u958B\u555F\u9078\u55AE",back:"\u5F8C\u9000",forward:"\u524D\u9032",search:"\u641C\u5C0B",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u63DB\u70BA\u660E\u4EAE\u4E3B\u984C",switchDarkTheme:"\u5207\u63DB\u70BA\u9ED1\u6697\u4E3B\u984C",openSidepane:"\u958B\u555F\u5074\u908A\u6B04",closeSidepane:"\u95DC\u9589\u5074\u908A\u6B04",export:"\u532F\u51FA",import:"\u532F\u5165",enterFocusMode:"\u9032\u5165\u5C08\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u5C08\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u6642\u5149\u6A5F",help:"\u8AAA\u660E\u6587\u4EF6",exit:"\u9000\u51FA",keybindings:"\u6AA2\u8996 & \u7DE8\u8F2F\u5FEB\u901F\u9375"},command:{deleteBlock:"\u522A\u9664\u5340\u584A",copyBlockReference:"\u8907\u88FD\u5340\u584A\u5F15\u7528",copyBlockMirror:"\u8907\u88FD\u5340\u584A\u93E1\u50CF",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidepane:"\u65B0\u589E\u5230\u5074\u908A\u6B04",export:"\u532F\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5340\u584A",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u5EFA\u7ACB\u6642\u9593\u5347\u5E8F",ctimeDesc:"\u5EFA\u7ACB\u6642\u9593\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u6642\u9593\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u6642\u9593\u964D\u5E8F",archiveDone:"\u5C01\u5B58\u5DF2\u5B8C\u6210\u4EFB\u52D9",moveBlock:"\u79FB\u52D5\u5340\u584A",moveBlockLeaveRef:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u93E1\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u93E1\u50CF\u5340\u584A",openFieldValuesInspector:"\u958B\u555F\u5C6C\u6027\u6AA2\u8996\u5668",setBlockRefColor:"\u8A2D\u5B9A\u5340\u584A\u5F15\u7528\u984F\u8272",blue:"\u85CD\u8272",green:"\u7DA0\u8272",red:"\u7D05\u8272",yellow:"\u9EC3\u8272",gray:"\u7070\u8272",orange:"\u6A58\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u958B\u555F\u53CD\u5411\u9023\u7D50\u9762\u677F"},createNewTreeDialog:{title:"\u5EFA\u7ACB\u65B0\u6587\u4EF6",description:`\u6C92\u6709\u627E\u5230\u6839\u5340\u584A\uFF0C\u9019\u53EF\u80FD\u662F\u56E0\u70BA\uFF1A
1. \u9019\u662F\u4E00\u500B\u65B0\u6587\u4EF6
2. \u8CC7\u6599\u9084\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u78BA\u5B9A\u9019\u662F\u65B0\u6587\u4EF6\uFF0C\u53EF\u4EE5\u9EDE\u64CA"\u5EFA\u7ACB"\u6309\u9215\u5EFA\u7ACB\u65B0\u6587\u4EF6\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u5EFA\u7ACB",creating:"\u6B63\u5728\u5EFA\u7ACB...",done:"\u5EFA\u7ACB\u6210\u529F",failed:"\u5EFA\u7ACB\u5931\u6557"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u9032\u4F86\u6703\u58DE\u6389\u7684\uFF01\u8981\u4E0D\u8A66\u8A66\u5206\u6BB5\u8CBC\u4E0A\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u50B3",noFiles:"\u6C92\u6709\u6A94\u6848",refreshing:"\u6B63\u5728\u91CD\u65B0\u6574\u7406...",refreshed:"\u91CD\u65B0\u6574\u7406\u6210\u529F",previewPane:{openPreview:"\u9810\u89BD",download:"\u4E0B\u8F09",reference:"\u63D2\u5165\u5340\u584A\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F91\u5F15\u7528",insertImage:"\u63D2\u5165\u5716\u7247",fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",closePreview:"\u95DC\u9589\u9810\u89BD",delete:"\u522A\u9664",info:"\u8A73\u7D30\u8CC7\u8A0A"},uploadStatus:{idle:"\u9592\u7F6E",uploading:"\u4E0A\u50B3\u4E2D...",success:"\u4E0A\u50B3\u6210\u529F",failed:"\u4E0A\u50B3\u5931\u6557"},fetchFilesStatus:{idle:"\u9592\u7F6E",fetching:"\u6B63\u5728\u53D6\u5F97\u6A94\u6848\u6E05\u55AE...",success:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u6210\u529F",failed:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u5931\u6557"}},imageContent:{fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",addCaption:"\u65B0\u589E\u5716\u7247\u8AAA\u660E",deleteImage:"\u522A\u9664\u5716\u7247",blend:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u984F\u8272\uFF09",blendLuminosity:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u5207\u70BA\u5713\u5F62",invert:"\u53CD\u76F8",invertW:"\u53CD\u76F8\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u908A",width:"\u5BEC\u5EA6",wider:"\u66F4\u5BEC",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u8A2D",download:"\u4E0B\u8F09\u5716\u7247",metadata:"\u8A73\u7D30\u8CC7\u8A0A",filter:"\u6FFE\u93E1",clearScannedImage:"\u6E05\u9664\u6383\u63CF\u5716\u7247\u7684\u80CC\u666F"},exporter:{title:"\u532F\u51FA",description:"\u532F\u51FA\u9078\u4E2D\u5B50\u6A39\u70BA HTML, PDF, Markdown, Plain Text \u7B49\u591A\u7A2E\u683C\u5F0F",preview:"\u9810\u89BD",copyToClipboard:"\u8907\u88FD\u5230\u526A\u8CBC\u7C3F",exportToFile:"\u532F\u51FA\u5230\u6A94\u6848",cancel:"\u53D6\u6D88",exportFormat:"\u532F\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88DD)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C6C\u6027\u6AA2\u8996\u5668",description:"\u6AA2\u8996\u9019\u500B\u5340\u584A\u7684\u6240\u6709\u5C6C\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u9019\u4E00\u5929\u6C92\u6709\u6BCF\u65E5\u7B46\u8A18\uFF0C\u9EDE\u64CA\u4EE5\u5EFA\u7ACB",gotoDailyNote:"\u9EDE\u64CA\u4EE5\u524D\u5F80\u9019\u4E00\u5929\u7684\u6BCF\u65E5\u7B46\u8A18",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u88E1\u5EFA\u7ACB\u6BCF\u65E5\u7B46\u8A18",desc:'\u4F60\u61C9\u8A72\u5230 "\u8A2D\u5B9A > \u6BCF\u65E5\u7B46\u8A18 > \u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E" \u8A2D\u5B9A\u65B0\u5EFA\u7ACB\u7684\u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u5F8C\u9000\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE",goToNext:"\u524D\u9032\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE"},keybindings:{title:"\u5FEB\u901F\u9375",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u901F\u9375\u6E05\u55AE",close:"\u95DC\u9589",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u7A0B\u5F0F\u78BC\u5340\u584A\u5167\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u958B",collapse:"\u647A\u758A",indent:"\u589E\u52A0\u7E2E\u6392",outdent:"\u6E1B\u5C11\u7E2E\u6392",insertInlineMath:"\u63D2\u5165\u884C\u5167\u6578\u5B78\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5340\u584A\u7D1A\u6578\u5B78\u516C\u5F0F",bold:"\u7C97\u9AD4",italic:"\u659C\u9AD4",code:"\u7A0B\u5F0F\u78BC",highlight:"\u6A19\u793A",insertBlockRef:"\u63D2\u5165\u5340\u584A\u5F15\u7528",insertTag:"\u63D2\u5165\u6A19\u7C64",toCodeblock:"\u8F49\u63DB\u70BA\u7A0B\u5F0F\u78BC\u5340\u584A",undo:"\u5FA9\u539F",redo:"\u91CD\u505A",softBreak:"\u8EDF\u63DB\u884C",openFusionCommand:"\u958B\u555F\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u958B\u555F\u5074\u908A\u6B04\u4E26\u805A\u7126 / \u95DC\u9589\u5074\u908A\u6B04",moveSidePane:"\u79FB\u52D5\u5074\u908A\u6B04\uFF08\u5230\u53F3\u5074 / \u4E0B\u65B9\uFF09",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidePane:"\u65B0\u589E\u5230\u5074\u908A\u6B04"}}},adminDashboard:{title:"\u7BA1\u7406\u54E1\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8B58\u5EAB\u7BA1\u7406",logsAndAnalytics:"\u65E5\u8A8C\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8B58\u5EAB",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u9019\u88E1\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\uFF0C\u522A\u9664\u77E5\u8B58\u5EAB\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8B58\u5EAB\u7684\u8CC7\u8A0A",noKbs:"\u{1F914} \u6C92\u6709\u77E5\u8B58\u5EAB",noKbsDescription:'\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB"\u6309\u9215\u4F86\u5EFA\u7ACB\u4F60\u7684\u7B2C\u4E00\u500B\u77E5\u8B58\u5EAB',kbActions:{edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",addKb:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",refreshKbList:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE"},newKbDialog:{title:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",description:"\u8ACB\u586B\u5BEB\u4EE5\u4E0B\u8CC7\u8A0A\u4F86\u5EFA\u7ACB\u65B0\u7684\u77E5\u8B58\u5EAB",nameLabel:"\u540D\u7A31",namePlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u540D\u7A31",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u4F4D\u7F6E",passwordLabel:"\u5BC6\u78BC",passwordPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u5BC6\u78BC",createBtn:{idle:"\u5EFA\u7ACB",creating:"\u5EFA\u7ACB\u4E2D...",createSuccess:"\u5EFA\u7ACB\u6210\u529F",createFailed:"\u5EFA\u7ACB\u5931\u6557"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u522A\u9664\u77E5\u8B58\u5EAB",description:'\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u77E5\u8B58\u5EAB "{name}" \u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u5FA9\u539F\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u522A\u9664",deleting:"\u6B63\u5728\u522A\u9664...",deleteSuccess:"\u522A\u9664\u6210\u529F",deleteFailed:"\u522A\u9664\u5931\u6557"}}}}},zh_TW:{languages:{label:"\u8A9E\u8A00",zh_CN:"\u7C21\u9AD4\u4E2D\u6587",zh_HK:"\u7E41\u9AD4\u4E2D\u6587 (\u9999\u6E2F)",zh_TW:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",en_US:"\u82F1\u6587",ja_JP:"\u65E5\u6587",fr_FR:"\u6CD5\u6587"},login:{kbEditorLogin:{title:"\u958B\u555F\u77E5\u8B58\u5EAB",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",noKbServerMsg:'\u6B64\u4F3A\u670D\u5668\u4E0A\u6C92\u6709\u77E5\u8B58\u5EAB\uFF0C\u4F60\u53EF\u4EE5<a class="cursor-pointer">\u4EE5\u7BA1\u7406\u54E1\u8EAB\u5206\u767B\u5165</a>\uFF0C\u7136\u5F8C\u5728\u63A7\u5236\u53F0\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\u3002',kbLocationLabel:"\u77E5\u8B58\u5EAB",refreshKbListTooltip:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE",passwordLabel:"\u5BC6\u78BC",adminLoginBtn:"\u7BA1\u7406\u54E1\u767B\u5165",serverStatus:{invalidURL:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",connFailed:"\u9023\u7DDA\u5931\u6557",connecting:"\u9023\u7DDA\u4E2D",connSuccess:"\u9023\u7DDA\u6210\u529F",noKbServer:"\u6C92\u6709\u77E5\u8B58\u5EAB\u4F3A\u670D\u5668",loginFailed:"\u767B\u5165\u5931\u6557"},loginStatus:{idle:"\u9592\u7F6E",loggingIn:"\u767B\u5165\u4E2D",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u5BC6\u78BC\u932F\u8AA4",loginFailed_Unknown:"\u672A\u77E5\u932F\u8AA4\uFF0C\u8ACB\u806F\u7D61\u4F3A\u670D\u5668\u7BA1\u7406\u54E1"},loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",loginFailed_InvalidPassword:"\u767B\u5165",loginFailed_Unknown:"\u767B\u5165"}},adminLogin:{title:"\u7BA1\u7406\u54E1\u767B\u5165",serverUrlLabel:"\u4F3A\u670D\u5668 URL",serverUrlPlaceholder:"\u8F38\u5165\u4F3A\u670D\u5668 URL\uFF0C\u4F8B\u5982 http://43.134.1.60/:8081",passwordLabel:"\u5BC6\u78BC",kbEditorLoginBtn:"\u77E5\u8B58\u5EAB\u7DE8\u8F2F\u8005\u767B\u5165",loginBtn:{idle:"\u767B\u5165",loggingIn:"\u767B\u5165\u4E2D...",loginSuccess:"\u767B\u5165\u6210\u529F",invalidServerUrl:"\u767B\u5165\u5931\u6557",invalidPassword:"\u767B\u5165\u5931\u6557",maxAttempts:"\u767B\u5165\u5931\u6557",cannotConnectToServer:"\u767B\u5165\u5931\u6557"},errMsg:{invalidServerUrl:"URL \u683C\u5F0F\u4E0D\u6B63\u78BA",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4",maxAttempts:"\u9054\u5230\u6700\u5927\u5617\u8A66\u6B21\u6578\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",cannotConnectToServer:"\u7121\u6CD5\u9023\u7DDA\u5230\u4F3A\u670D\u5668"}}},kbView:{loadingKb:"\u8F09\u5165\u77E5\u8B58\u5EAB\u4E2D...",backup:{createBackup:"\u5275\u5EFA\u5099\u4EFD",createBackupSuccess:"\u5099\u4EFD\u5275\u5EFA\u6210\u529F",createBackupFailed:"\u5099\u4EFD\u5275\u5EFA\u5931\u6557"},backlinksPanel:{nBacklinks:"{count} \u500B\u53CD\u5411\u9023\u7D50",nPotentialLinks:"{count} \u500B\u6F5B\u5728\u9023\u7D50"},keybindingInput:{empty:"\u9EDE\u64CA\u8A2D\u7F6E\u5FEB\u6377\u9375"},codeblock:{unknownLanguage:"\u672A\u77E5\u8A9E\u8A00",copyCode:"\u8907\u88FD\u7A0B\u5F0F\u78BC",copySuccess:"\u7A0B\u5F0F\u78BC\u5DF2\u8907\u88FD\u5230\u526A\u8CBC\u7C3F"},imageEditor:{title:"\u5716\u7247\u7DE8\u8F2F\u5668",description:"\u652F\u63F4\u5716\u7247\u88C1\u526A\u3001\u65CB\u8F49\uFF0C\u81EA\u52D5\u6700\u4F73\u5316\u6383\u63CF\u6A94\u6848\u7B49\u529F\u80FD",cancel:"\u53D6\u6D88",save:"\u5957\u7528\u8B8A\u66F4",saveAs:"\u53E6\u5B58\u65B0\u6A94",deleteOriginal:"\u662F\u5426\u522A\u9664\u539F\u5716\uFF1F"},fusionCommand:{noResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u5167\u5BB9",noCommandResults:"\u6C92\u6709\u627E\u5230\u76F8\u95DC\u547D\u4EE4",allowedBlockTypes:"\u5141\u8A31\u7684\u5340\u584A\u985E\u578B",searchPlaceholder:"\u641C\u5C0B\u77E5\u8B58\u5EAB",searchHelp:"\u2191\u2193 \u548C Home, End \u53EF\u9078\u64C7\u641C\u5C0B\u7D50\u679C\uFF0C\u21B5 \u8DF3\u8F49\u5230\u9078\u4E2D\u9805\uFF0C\u2318+\u21B5 \u63D2\u5165\u5340\u584A\u9023\u7D50\uFF0Cesc \u95DC\u9589\u641C\u5C0B\u9762\u677F",commandHelp:"\u8F38\u5165 / \u53EF\u641C\u5C0B\u547D\u4EE4\uFF0C\u2191\u2193 \u548C Home, End \u9078\u64C7\u547D\u4EE4\u7136\u5F8C \u21B5 \u57F7\u884C\u547D\u4EE4\uFF0Cesc \u95DC\u9589\u547D\u4EE4\u9762\u677F"},blockMover:{moveSuccess:"\u79FB\u52D5 {count} \u500B\u5340\u584A\u6210\u529F",focusMovedBlock:"\u805A\u7126\u5230\u79FB\u52D5\u5F8C\u7684\u5340\u584A",inputPlaceholder:"\u79FB\u52D5\u5230..."},refSuggestions:{noSuggestions:"\u6C92\u6709\u7D50\u679C",createNewUnder1:"\u5728",createNewUnder2:"\u4E0B\u5EFA\u7ACB\u65B0\u5340\u584A"},pomodoro:{startWorking:"\u958B\u5DE5\u5427\uFF01",startResting:"\u4F11\u606F\u4E00\u4E0B",stop:"\u505C\u6B62",working:"\u5DE5\u4F5C\u4E2D...",resting:"\u4F11\u606F\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u6548\u7684 JSON",reset:"\u91CD\u8A2D\u70BA\u9810\u8A2D\u503C",noResult:"\u6C92\u6709\u627E\u5230\u7B26\u5408\u689D\u4EF6\u7684\u5340\u584A",invalidBlockId:"\u7121\u6548\u7684\u5340\u584A ID"},syncStatus:{synced:"\u6240\u6709\u8B8A\u66F4\u5DF2\u540C\u6B65",syncing:"\u540C\u6B65\u4E2D",disconnected:"\u540C\u6B65\u5931\u6557"},sidePane:{remove:"\u5F9E\u5074\u908A\u6B04\u79FB\u9664\u6B64\u9805",prev:"\u805A\u7126\u5230\u4E0A\u4E00\u9805",next:"\u805A\u7126\u5230\u4E0B\u4E00\u9805",collapse:"\u647A\u758A\u5074\u908A\u6B04",moveToRight:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u53F3\u5074",moveToBottom:"\u79FB\u52D5\u5074\u908A\u6B04\u5230\u4E0B\u65B9",setFilter:"\u8A2D\u5B9A\u904E\u6FFE\u689D\u4EF6",setSort:"\u8A2D\u5B9A\u6392\u5E8F\u689D\u4EF6",empty:"\u{1F914} \u76EE\u524D\u5074\u908A\u6B04\u70BA\u7A7A",searchAndAdd:"\u641C\u5C0B\u5340\u584A\u4E26\u65B0\u589E\u5230\u5074\u908A\u6B04",emptyTip:`\u60A8\u53EF\u4EE5\u900F\u904E\u4EE5\u4E0B\u65B9\u5F0F\u65B0\u589E\u5167\u5BB9\uFF1A
  - \u5728\u5340\u584A\u9078\u55AE\u4E2D\u9078\u64C7"\u65B0\u589E\u5230\u5074\u908A\u6B04"
  - \u4F7F\u7528\u5FEB\u901F\u9375 Command/Ctrl + K
  - \u53F3\u4E0A\u89D2\u9EDE\u64CA "+" \u6309\u9215\u641C\u5C0B\u65B0\u589E\u5340\u584A`},headerBar:{moreOptions:"\u66F4\u591A\u9078\u9805",dailynoteNavigator:"\u6BCF\u65E5\u7B46\u8A18",pomodoro:"\u756A\u8304\u9418",closeMenu:"\u95DC\u9589\u9078\u55AE",openMenu:"\u958B\u555F\u9078\u55AE",back:"\u5F8C\u9000",forward:"\u524D\u9032",search:"\u641C\u5C0B",notifications:"\u901A\u77E5",switchLightTheme:"\u5207\u63DB\u70BA\u660E\u4EAE\u4E3B\u984C",switchDarkTheme:"\u5207\u63DB\u70BA\u9ED1\u6697\u4E3B\u984C",openSidepane:"\u958B\u555F\u5074\u908A\u6B04",closeSidepane:"\u95DC\u9589\u5074\u908A\u6B04",export:"\u532F\u51FA",import:"\u532F\u5165",enterFocusMode:"\u9032\u5165\u5C08\u6CE8\u6A21\u5F0F",exitFocusMode:"\u9000\u51FA\u5C08\u6CE8\u6A21\u5F0F",attachmentsManager:"\u9644\u4EF6\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u6642\u5149\u6A5F",help:"\u8AAA\u660E\u6587\u4EF6",exit:"\u9000\u51FA",keybindings:"\u6AA2\u8996 & \u7DE8\u8F2F\u5FEB\u901F\u9375"},command:{deleteBlock:"\u522A\u9664\u5340\u584A",copyBlockReference:"\u8907\u88FD\u5340\u584A\u5F15\u7528",copyBlockMirror:"\u8907\u88FD\u5340\u584A\u93E1\u50CF",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidepane:"\u65B0\u589E\u5230\u5074\u908A\u6B04",export:"\u532F\u51FA",sortDirectChildren:"\u6392\u5E8F\u76F4\u63A5\u5B50\u5340\u584A",sortDictAsc:"\u5B57\u5178\u5E8F\u5347\u5E8F",sortDictDesc:"\u5B57\u5178\u5E8F\u964D\u5E8F",ctimeAsc:"\u5EFA\u7ACB\u6642\u9593\u5347\u5E8F",ctimeDesc:"\u5EFA\u7ACB\u6642\u9593\u964D\u5E8F",mtimeAsc:"\u4FEE\u6539\u6642\u9593\u5347\u5E8F",mtimeDesc:"\u4FEE\u6539\u6642\u9593\u964D\u5E8F",archiveDone:"\u5C01\u5B58\u5DF2\u5B8C\u6210\u4EFB\u52D9",moveBlock:"\u79FB\u52D5\u5340\u584A",moveBlockLeaveRef:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u5F15\u7528",moveBlockLeaveMirror:"\u79FB\u52D5\u5340\u584A\uFF0C\u7559\u4E0B\u5340\u584A\u93E1\u50CF",insertMirrorBelow:"\u4E0B\u65B9\u63D2\u5165\u93E1\u50CF\u5340\u584A",openFieldValuesInspector:"\u958B\u555F\u5C6C\u6027\u6AA2\u8996\u5668",setBlockRefColor:"\u8A2D\u5B9A\u5340\u584A\u5F15\u7528\u984F\u8272",blue:"\u85CD\u8272",green:"\u7DA0\u8272",red:"\u7D05\u8272",yellow:"\u9EC3\u8272",gray:"\u7070\u8272",orange:"\u6A58\u8272",purple:"\u7D2B\u8272"},backlinks:{openBacklinksPanel:"\u958B\u555F\u53CD\u5411\u9023\u7D50\u9762\u677F"},createNewTreeDialog:{title:"\u5EFA\u7ACB\u65B0\u6587\u4EF6",description:`\u6C92\u6709\u627E\u5230\u6839\u5340\u584A\uFF0C\u9019\u53EF\u80FD\u662F\u56E0\u70BA\uFF1A
1. \u9019\u662F\u4E00\u500B\u65B0\u6587\u4EF6
2. \u8CC7\u6599\u9084\u5728\u540C\u6B65\u4E2D`,waitingForSync:'\u6B63\u5728\u7B49\u5F85\u540C\u6B65\uFF0C\u5982\u679C\u78BA\u5B9A\u9019\u662F\u65B0\u6587\u4EF6\uFF0C\u53EF\u4EE5\u9EDE\u64CA"\u5EFA\u7ACB"\u6309\u9215\u5EFA\u7ACB\u65B0\u6587\u4EF6\u3002',waitBtn:"\u7B49\u5F85",createBtn:"\u5EFA\u7ACB",creating:"\u6B63\u5728\u5EFA\u7ACB...",done:"\u5EFA\u7ACB\u6210\u529F",failed:"\u5EFA\u7ACB\u5931\u6557"},pasteDialog:{title:"\u4E0D\u8981\u4E0D\u8981",description:"\u592A\u5927\u5566\uFF01\u653E\u9032\u4F86\u6703\u58DE\u6389\u7684\uFF01\u8981\u4E0D\u8A66\u8A66\u5206\u6BB5\u8CBC\u4E0A\uFF1F",cancelBtn:"\u6211\u77E5\u9053\u4E86"},attachmentsManager:{title:"\u9644\u4EF6\u7BA1\u7406\u5668",upload:"\u4E0A\u50B3",noFiles:"\u6C92\u6709\u6A94\u6848",refreshing:"\u6B63\u5728\u91CD\u65B0\u6574\u7406...",refreshed:"\u91CD\u65B0\u6574\u7406\u6210\u529F",previewPane:{openPreview:"\u9810\u89BD",download:"\u4E0B\u8F09",reference:"\u63D2\u5165\u5340\u584A\u5F15\u7528",pathReference:"\u63D2\u5165\u8DEF\u5F91\u5F15\u7528",insertImage:"\u63D2\u5165\u5716\u7247",fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",closePreview:"\u95DC\u9589\u9810\u89BD",delete:"\u522A\u9664",info:"\u8A73\u7D30\u8CC7\u8A0A"},uploadStatus:{idle:"\u9592\u7F6E",uploading:"\u4E0A\u50B3\u4E2D...",success:"\u4E0A\u50B3\u6210\u529F",failed:"\u4E0A\u50B3\u5931\u6557"},fetchFilesStatus:{idle:"\u9592\u7F6E",fetching:"\u6B63\u5728\u53D6\u5F97\u6A94\u6848\u6E05\u55AE...",success:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u6210\u529F",failed:"\u53D6\u5F97\u6A94\u6848\u6E05\u55AE\u5931\u6557"}},imageContent:{fetchingImage:"\u5716\u7247\u8F09\u5165\u4E2D...",addCaption:"\u65B0\u589E\u5716\u7247\u8AAA\u660E",deleteImage:"\u522A\u9664\u5716\u7247",blend:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u984F\u8272\uFF09",blendLuminosity:"\u8207\u80CC\u666F\u6DF7\u5408\uFF08\u6309\u4EAE\u5EA6\uFF09",circle:"\u88C1\u5207\u70BA\u5713\u5F62",invert:"\u53CD\u76F8",invertW:"\u53CD\u76F8\uFF08\u767D\u5E95\uFF09",outline:"\u63CF\u908A",width:"\u5BEC\u5EA6",wider:"\u66F4\u5BEC",narrower:"\u66F4\u7A84",resetWidth:"\u91CD\u8A2D",download:"\u4E0B\u8F09\u5716\u7247",metadata:"\u8A73\u7D30\u8CC7\u8A0A",filter:"\u6FFE\u93E1",clearScannedImage:"\u6E05\u9664\u6383\u63CF\u5716\u7247\u7684\u80CC\u666F"},exporter:{title:"\u532F\u51FA",description:"\u532F\u51FA\u9078\u4E2D\u5B50\u6A39\u70BA HTML, PDF, Markdown, Plain Text \u7B49\u591A\u7A2E\u683C\u5F0F",preview:"\u9810\u89BD",copyToClipboard:"\u8907\u88FD\u5230\u526A\u8CBC\u7C3F",exportToFile:"\u532F\u51FA\u5230\u6A94\u6848",cancel:"\u53D6\u6D88",exportFormat:"\u532F\u51FA\u683C\u5F0F"},fontSelector:{notAvailable:"(\u672A\u5B89\u88DD)",notSpecified:"(\u672A\u6307\u5B9A)"},fieldValuesInspector:{title:"\u5C6C\u6027\u6AA2\u8996\u5668",description:"\u6AA2\u8996\u9019\u500B\u5340\u584A\u7684\u6240\u6709\u5C6C\u6027\u503C"},dailynoteNavigator:{noDailyNote:"\u9019\u4E00\u5929\u6C92\u6709\u6BCF\u65E5\u7B46\u8A18\uFF0C\u9EDE\u64CA\u4EE5\u5EFA\u7ACB",gotoDailyNote:"\u9EDE\u64CA\u4EE5\u524D\u5F80\u9019\u4E00\u5929\u7684\u6BCF\u65E5\u7B46\u8A18",dontKnowWhereToCreate:{title:"\u4E0D\u77E5\u9053\u5728\u54EA\u88E1\u5EFA\u7ACB\u6BCF\u65E5\u7B46\u8A18",desc:'\u4F60\u61C9\u8A72\u5230 "\u8A2D\u5B9A > \u6BCF\u65E5\u7B46\u8A18 > \u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E" \u8A2D\u5B9A\u65B0\u5EFA\u7ACB\u7684\u6BCF\u65E5\u7B46\u8A18\u7684\u5B58\u653E\u4F4D\u7F6E'}},history:{goToPrev:"\u5F8C\u9000\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE",goToNext:"\u524D\u9032\uFF0C\u53F3\u9375\u6AA2\u8996\u6240\u6709\u6B77\u53F2\u9805\u76EE"},keybindings:{title:"\u5FEB\u901F\u9375",description:"\u6240\u6709\u53EF\u7528\u7684\u5FEB\u901F\u9375\u6E05\u55AE",close:"\u95DC\u9589",groups:{normal:"\u5E38\u7528\u64CD\u4F5C",inCodeBlock:"\u7A0B\u5F0F\u78BC\u5340\u584A\u5167\u7279\u6709"},commands:{swapUp:"\u4E0A\u79FB",swapDown:"\u4E0B\u79FB",expand:"\u5C55\u958B",collapse:"\u647A\u758A",indent:"\u589E\u52A0\u7E2E\u6392",outdent:"\u6E1B\u5C11\u7E2E\u6392",insertInlineMath:"\u63D2\u5165\u884C\u5167\u6578\u5B78\u516C\u5F0F",insertBlockMath:"\u63D2\u5165\u5340\u584A\u7D1A\u6578\u5B78\u516C\u5F0F",bold:"\u7C97\u9AD4",italic:"\u659C\u9AD4",code:"\u7A0B\u5F0F\u78BC",highlight:"\u6A19\u793A",insertBlockRef:"\u63D2\u5165\u5340\u584A\u5F15\u7528",insertTag:"\u63D2\u5165\u6A19\u7C64",toCodeblock:"\u8F49\u63DB\u70BA\u7A0B\u5F0F\u78BC\u5340\u584A",undo:"\u5FA9\u539F",redo:"\u91CD\u505A",softBreak:"\u8EDF\u63DB\u884C",openFusionCommand:"\u958B\u555F\u591A\u529F\u80FD\u9762\u677F",openAndFocusToSidePane:"\u958B\u555F\u5074\u908A\u6B04\u4E26\u805A\u7126 / \u95DC\u9589\u5074\u908A\u6B04",moveSidePane:"\u79FB\u52D5\u5074\u908A\u6B04\uFF08\u5230\u53F3\u5074 / \u4E0B\u65B9\uFF09",addToFavorite:"\u65B0\u589E\u5230\u6536\u85CF",addToSidePane:"\u65B0\u589E\u5230\u5074\u908A\u6B04"}}},adminDashboard:{title:"\u7BA1\u7406\u54E1\u9762\u677F",logout:"\u767B\u51FA",tabs:{kbManagement:"\u77E5\u8B58\u5EAB\u7BA1\u7406",logsAndAnalytics:"\u65E5\u8A8C\u548C\u5206\u6790"},kbManagement:{allKbs:"\u6240\u6709\u77E5\u8B58\u5EAB",allKbsDescription:"\u4F60\u53EF\u4EE5\u5728\u9019\u88E1\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB\uFF0C\u522A\u9664\u77E5\u8B58\u5EAB\uFF0C\u6216\u4FEE\u6539\u5DF2\u6709\u77E5\u8B58\u5EAB\u7684\u8CC7\u8A0A",noKbs:"\u{1F914} \u6C92\u6709\u77E5\u8B58\u5EAB",noKbsDescription:'\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB"\u6309\u9215\u4F86\u5EFA\u7ACB\u4F60\u7684\u7B2C\u4E00\u500B\u77E5\u8B58\u5EAB',kbActions:{edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",addKb:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",refreshKbList:"\u91CD\u65B0\u6574\u7406\u77E5\u8B58\u5EAB\u6E05\u55AE"},newKbDialog:{title:"\u5EFA\u7ACB\u65B0\u77E5\u8B58\u5EAB",description:"\u8ACB\u586B\u5BEB\u4EE5\u4E0B\u8CC7\u8A0A\u4F86\u5EFA\u7ACB\u65B0\u7684\u77E5\u8B58\u5EAB",nameLabel:"\u540D\u7A31",namePlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u540D\u7A31",locationLabel:"\u4F4D\u7F6E",locationPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u4F4D\u7F6E",passwordLabel:"\u5BC6\u78BC",passwordPlaceholder:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u5BC6\u78BC",createBtn:{idle:"\u5EFA\u7ACB",creating:"\u5EFA\u7ACB\u4E2D...",createSuccess:"\u5EFA\u7ACB\u6210\u529F",createFailed:"\u5EFA\u7ACB\u5931\u6557"},cancelBtn:"\u53D6\u6D88"},deleteKbDialog:{title:"\u522A\u9664\u77E5\u8B58\u5EAB",description:'\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u77E5\u8B58\u5EAB "{name}" \u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u5FA9\u539F\u3002',cancelBtn:"\u53D6\u6D88",status:{idle:"\u522A\u9664",deleting:"\u6B63\u5728\u522A\u9664...",deleteSuccess:"\u522A\u9664\u6210\u529F",deleteFailed:"\u522A\u9664\u5931\u6557"}}}}},fr_FR:{languages:{label:"Langues",zh_CN:"Chinois simplifi\xE9",zh_HK:"Chinois traditionnel (Hong Kong)",zh_TW:"Chinois traditionnel (Taiwan)",en_US:"Anglais",ja_JP:"Japonais",fr_FR:"Fran\xE7ais"},login:{kbEditorLogin:{title:"Ouvrir la base de connaissances",serverUrlLabel:"URL du serveur",serverUrlPlaceholder:"Entrez l'URL du serveur, ex: http://43.134.1.60/:8081",noKbServerMsg:`Aucune base de connaissances sur ce serveur. Vous pouvez <a class="cursor-pointer">vous connecter en tant qu'administrateur</a> et cr\xE9er une nouvelle base de connaissances dans le tableau de bord.`,kbLocationLabel:"Base de connaissances",refreshKbListTooltip:"Actualiser la liste des bases de connaissances",passwordLabel:"Mot de passe",adminLoginBtn:"Connexion administrateur",serverStatus:{invalidURL:"Format d'URL invalide",connFailed:"\xC9chec de la connexion",connecting:"Connexion en cours",connSuccess:"Connect\xE9",noKbServer:"Aucun serveur de base de connaissances",loginFailed:"\xC9chec de la connexion"},loginStatus:{idle:"En attente",loggingIn:"Connexion en cours",loginSuccess:"Connexion r\xE9ussie",loginFailed_InvalidPassword:"Mot de passe incorrect",loginFailed_Unknown:"Erreur inconnue, veuillez contacter l'administrateur du serveur"},loginBtn:{idle:"Se connecter",loggingIn:"Connexion...",loginSuccess:"Connexion r\xE9ussie",loginFailed_InvalidPassword:"Se connecter",loginFailed_Unknown:"Se connecter"}},adminLogin:{title:"Connexion administrateur",serverUrlLabel:"URL du serveur",serverUrlPlaceholder:"Entrez l'URL du serveur, ex: http://43.134.1.60/:8081",passwordLabel:"Mot de passe",kbEditorLoginBtn:"Connexion \xE9diteur",loginBtn:{idle:"Se connecter",loggingIn:"Connexion...",loginSuccess:"Connexion r\xE9ussie",invalidServerUrl:"\xC9chec de la connexion",invalidPassword:"\xC9chec de la connexion",maxAttempts:"\xC9chec de la connexion",cannotConnectToServer:"\xC9chec de la connexion"},errMsg:{invalidServerUrl:"Format d'URL invalide",invalidPassword:"Mot de passe incorrect",maxAttempts:"Nombre maximal de tentatives atteint, veuillez r\xE9essayer plus tard",cannotConnectToServer:"Impossible de se connecter au serveur"}}},kbView:{loadingKb:"Chargement de la base de connaissances...",backup:{createBackup:"Cr\xE9er une sauvegarde",createBackupSuccess:"Sauvegarde cr\xE9\xE9e avec succ\xE8s",createBackupFailed:"\xC9chec de la cr\xE9ation de la sauvegarde"},backlinksPanel:{nBacklinks:"{count} r\xE9troliens",nPotentialLinks:"{count} liens potentiels"},keybindingInput:{empty:"Cliquez pour d\xE9finir le raccourci"},codeblock:{unknownLanguage:"Langue inconnue",copyCode:"Copier le code",copySuccess:"Le code dans le bloc de code a \xE9t\xE9 copi\xE9 dans le presse-papiers"},imageEditor:{title:"\xC9diteur d'images",description:"Prend en charge le recadrage d'images, la rotation et l'optimisation automatique des fichiers num\xE9ris\xE9s",cancel:"Annuler",save:"Appliquer les modifications",saveAs:"Enregistrer sous",deleteOriginal:"Supprimer l'image originale ?"},fusionCommand:{noResults:"Aucun r\xE9sultat trouv\xE9",noCommandResults:"Aucune commande trouv\xE9e",allowedBlockTypes:"Types de blocs autoris\xE9s",searchPlaceholder:"Rechercher dans la base de connaissances",searchHelp:"\u2191\u2193 et Home, End pour s\xE9lectionner les r\xE9sultats, \u21B5 pour aller \xE0 la s\xE9lection, \u2318+\u21B5 pour ins\xE9rer une r\xE9f\xE9rence de bloc, esc pour fermer le panneau de recherche",commandHelp:"Tapez / pour rechercher des commandes, \u2191\u2193 et Home, End pour s\xE9lectionner une commande puis \u21B5 pour ex\xE9cuter, esc pour fermer le panneau de commandes"},blockMover:{moveSuccess:"{count} blocs d\xE9plac\xE9s avec succ\xE8s",focusMovedBlock:"Focaliser sur le bloc d\xE9plac\xE9",inputPlaceholder:"D\xE9placer vers..."},refSuggestions:{noSuggestions:"Aucun r\xE9sultat",createNewUnder1:"Cr\xE9er un nouveau bloc sous",createNewUnder2:""},pomodoro:{startWorking:"Commen\xE7ons !",startResting:"Faites une pause",stop:"Arr\xEAter",working:"Travail en cours...",resting:"Pause en cours..."},settingsPanel:{title:"Param\xE8tres",invalidJson:"JSON invalide",reset:"R\xE9initialiser aux valeurs par d\xE9faut",noResult:"Aucun bloc correspondant trouv\xE9",invalidBlockId:"ID de bloc invalide"},syncStatus:{synced:"Toutes les modifications sont synchronis\xE9es",syncing:"Synchronisation en cours",disconnected:"\xC9chec de la synchronisation"},sidePane:{remove:"Retirer de la barre lat\xE9rale",prev:"\xC9l\xE9ment pr\xE9c\xE9dent",next:"\xC9l\xE9ment suivant",collapse:"R\xE9duire la barre lat\xE9rale",moveToRight:"D\xE9placer la barre lat\xE9rale \xE0 droite",moveToBottom:"D\xE9placer la barre lat\xE9rale en bas",setFilter:"D\xE9finir le filtre",setSort:"D\xE9finir le tri",empty:"\u{1F914} La barre lat\xE9rale est vide",searchAndAdd:"Rechercher des blocs et ajouter \xE0 la barre lat\xE9rale",emptyTip:`Vous pouvez ajouter du contenu en :
  - S\xE9lectionnant "Ajouter \xE0 la barre lat\xE9rale" dans le menu du bloc
  - Utilisant le raccourci Command/Ctrl + K
  - Cliquant sur le bouton "+" en haut \xE0 droite pour rechercher et ajouter des blocs`},headerBar:{moreOptions:"Plus d'options",dailynoteNavigator:"Notes quotidiennes",pomodoro:"Pomodoro",closeMenu:"Fermer le menu",openMenu:"Ouvrir le menu",back:"Retour",forward:"Avancer",search:"Rechercher",notifications:"Notifications",switchLightTheme:"Passer au th\xE8me clair",switchDarkTheme:"Passer au th\xE8me sombre",openSidepane:"Ouvrir la barre lat\xE9rale",closeSidepane:"Fermer la barre lat\xE9rale",export:"Exporter",import:"Importer",enterFocusMode:"Entrer en mode focus",exitFocusMode:"Quitter le mode focus",attachmentsManager:"Gestionnaire de pi\xE8ces jointes",settings:"Param\xE8tres",timeMachine:"Machine \xE0 remonter le temps",help:"Aide",exit:"Quitter",keybindings:"Voir & Modifier les raccourcis"},command:{deleteBlock:"Supprimer le bloc",copyBlockReference:"Copier la r\xE9f\xE9rence du bloc",copyBlockMirror:"Copier le miroir du bloc",addToFavorite:"Ajouter aux favoris",addToSidepane:"Ajouter \xE0 la barre lat\xE9rale",export:"Exporter",sortDirectChildren:"Trier les enfants directs",sortDictAsc:"Tri alphab\xE9tique croissant",sortDictDesc:"Tri alphab\xE9tique d\xE9croissant",ctimeAsc:"Date de cr\xE9ation croissante",ctimeDesc:"Date de cr\xE9ation d\xE9croissante",mtimeAsc:"Date de modification croissante",mtimeDesc:"Date de modification d\xE9croissante",archiveDone:"Archiver les t\xE2ches termin\xE9es",moveBlock:"D\xE9placer le bloc",moveBlockLeaveRef:"D\xE9placer le bloc, laisser une r\xE9f\xE9rence",moveBlockLeaveMirror:"D\xE9placer le bloc, laisser un miroir",insertMirrorBelow:"Ins\xE9rer un miroir en dessous",openFieldValuesInspector:"Ouvrir l'inspecteur de valeurs",setBlockRefColor:"D\xE9finir la couleur de la r\xE9f\xE9rence",blue:"Bleu",green:"Vert",red:"Rouge",yellow:"Jaune",gray:"Gris",orange:"Orange",purple:"Violet"},backlinks:{openBacklinksPanel:"Ouvrir le panneau des r\xE9troliens"},createNewTreeDialog:{title:"Cr\xE9er un nouveau document",description:`Aucun bloc racine trouv\xE9. Cela peut \xEAtre d\xFB \xE0 :
1. C'est un nouveau document
2. Les donn\xE9es sont encore en cours de synchronisation`,waitingForSync:`En attente de synchronisation. Si vous \xEAtes s\xFBr que c'est un nouveau document, cliquez sur "Cr\xE9er" pour cr\xE9er un nouveau document.`,waitBtn:"Attendre",createBtn:"Cr\xE9er",creating:"Cr\xE9ation en cours...",done:"Cr\xE9ation r\xE9ussie",failed:"\xC9chec de la cr\xE9ation"},pasteDialog:{title:"Non Non",description:"Trop grand ! \xC7a va casser si vous le mettez dedans ! Essayez de coller par morceaux ?",cancelBtn:"J'ai compris"},attachmentsManager:{title:"Gestionnaire de pi\xE8ces jointes",upload:"T\xE9l\xE9verser",noFiles:"Aucun fichier",refreshing:"Actualisation en cours...",refreshed:"Actualisation r\xE9ussie",previewPane:{openPreview:"Aper\xE7u",download:"T\xE9l\xE9charger",reference:"Ins\xE9rer une r\xE9f\xE9rence de bloc",pathReference:"Ins\xE9rer une r\xE9f\xE9rence de chemin",insertImage:"Ins\xE9rer une image",fetchingImage:"Chargement de l'image...",closePreview:"Fermer l'aper\xE7u",delete:"Supprimer",info:"D\xE9tails"},uploadStatus:{idle:"En attente",uploading:"T\xE9l\xE9versement en cours...",success:"T\xE9l\xE9versement r\xE9ussi",failed:"\xC9chec du t\xE9l\xE9versement"},fetchFilesStatus:{idle:"En attente",fetching:"R\xE9cup\xE9ration de la liste des fichiers...",success:"Liste des fichiers r\xE9cup\xE9r\xE9e avec succ\xE8s",failed:"\xC9chec de la r\xE9cup\xE9ration de la liste des fichiers"}},imageContent:{fetchingImage:"Chargement de l'image...",addCaption:"Ajouter une l\xE9gende",deleteImage:"Supprimer l'image",blend:"Fusionner avec l'arri\xE8re-plan (par couleur)",blendLuminosity:"Fusionner avec l'arri\xE8re-plan (par luminosit\xE9)",circle:"Recadrer en cercle",invert:"Inverser",invertW:"Inverser (fond blanc)",outline:"Contour",width:"Largeur",wider:"Plus large",narrower:"Plus \xE9troit",resetWidth:"R\xE9initialiser",download:"T\xE9l\xE9charger l'image",metadata:"D\xE9tails",filter:"Filtre",clearScannedImage:"Nettoyer l'arri\xE8re-plan de l'image num\xE9ris\xE9e"},exporter:{title:"Exporter",description:"Exporter le sous-arbre s\xE9lectionn\xE9 en HTML, PDF, Markdown, Texte brut et autres formats",preview:"Aper\xE7u",copyToClipboard:"Copier dans le presse-papiers",exportToFile:"Exporter vers un fichier",cancel:"Annuler",exportFormat:"Format d'exportation"},fontSelector:{notAvailable:"(Non install\xE9)",notSpecified:"(Non sp\xE9cifi\xE9)"},fieldValuesInspector:{title:"Inspecteur de valeurs",description:"Voir toutes les valeurs de champ de ce bloc"},dailynoteNavigator:{noDailyNote:"Pas de note quotidienne pour ce jour, cliquez pour en cr\xE9er une",gotoDailyNote:"Cliquez pour aller \xE0 la note quotidienne de ce jour",dontKnowWhereToCreate:{title:"Ne sait pas o\xF9 cr\xE9er les notes quotidiennes",desc:'Vous devriez aller dans "Param\xE8tres > Notes quotidiennes > Emplacement des notes quotidiennes" pour d\xE9finir o\xF9 les nouvelles notes quotidiennes doivent \xEAtre cr\xE9\xE9es'}},history:{goToPrev:"Retour, clic droit pour voir tous les \xE9l\xE9ments d'historique",goToNext:"Avancer, clic droit pour voir tous les \xE9l\xE9ments d'historique"},keybindings:{title:"Raccourcis",description:"Liste de tous les raccourcis disponibles",close:"Fermer",groups:{normal:"Op\xE9rations courantes",inCodeBlock:"Sp\xE9cifique aux blocs de code"},commands:{swapUp:"D\xE9placer vers le haut",swapDown:"D\xE9placer vers le bas",expand:"D\xE9velopper",collapse:"R\xE9duire",indent:"Augmenter l'indentation",outdent:"Diminuer l'indentation",insertInlineMath:"Ins\xE9rer des math\xE9matiques en ligne",insertBlockMath:"Ins\xE9rer un bloc math\xE9matique",bold:"Gras",italic:"Italique",code:"Code",highlight:"Surligner",insertBlockRef:"Ins\xE9rer une r\xE9f\xE9rence de bloc",insertTag:"Ins\xE9rer une \xE9tiquette",toCodeblock:"Convertir en bloc de code",undo:"Annuler",redo:"R\xE9tablir",softBreak:"Saut de ligne doux",openFusionCommand:"Ouvrir le panneau multifonction",openAndFocusToSidePane:"Ouvrir la barre lat\xE9rale et focaliser / Fermer la barre lat\xE9rale",moveSidePane:"D\xE9placer la barre lat\xE9rale (\xE0 droite / en bas)",addToFavorite:"Ajouter aux favoris",addToSidePane:"Ajouter \xE0 la barre lat\xE9rale"}}},adminDashboard:{title:"Tableau de bord administrateur",logout:"D\xE9connexion",tabs:{kbManagement:"Gestion des bases de connaissances",logsAndAnalytics:"Journaux et analyses"},kbManagement:{allKbs:"Toutes les bases de connaissances",allKbsDescription:"Vous pouvez cr\xE9er de nouvelles bases de connaissances, supprimer des bases de connaissances ou modifier les informations des bases existantes ici",noKbs:"\u{1F914} Aucune base de connaissances",noKbsDescription:'Cliquez sur le bouton "Cr\xE9er une nouvelle base de connaissances" en haut \xE0 droite pour cr\xE9er votre premi\xE8re base de connaissances',kbActions:{edit:"Modifier",delete:"Supprimer",addKb:"Cr\xE9er une nouvelle base de connaissances",refreshKbList:"Actualiser la liste des bases de connaissances"},newKbDialog:{title:"Cr\xE9er une nouvelle base de connaissances",description:"Veuillez remplir les informations suivantes pour cr\xE9er une nouvelle base de connaissances",nameLabel:"Nom",namePlaceholder:"Entrez le nom de la base de connaissances",locationLabel:"Emplacement",locationPlaceholder:"Entrez l'emplacement de la base de connaissances",passwordLabel:"Mot de passe",passwordPlaceholder:"Entrez le mot de passe de la base de connaissances",createBtn:{idle:"Cr\xE9er",creating:"Cr\xE9ation en cours...",createSuccess:"Cr\xE9ation r\xE9ussie",createFailed:"\xC9chec de la cr\xE9ation"},cancelBtn:"Annuler"},deleteKbDialog:{title:"Supprimer la base de connaissances",description:'\xCAtes-vous s\xFBr de vouloir supprimer la base de connaissances "{name}" ? Cette action ne peut pas \xEAtre annul\xE9e.',cancelBtn:"Annuler",status:{idle:"Supprimer",deleting:"Suppression en cours...",deleteSuccess:"Suppression r\xE9ussie",deleteFailed:"\xC9chec de la suppression"}}}}},ja_JP:{languages:{zh_CN:"\u4E2D\u56FD\u8A9E\uFF08\u7C21\u4F53\u5B57\uFF09",zh_HK:"\u4E2D\u56FD\u8A9E\uFF08\u7E41\u4F53\u5B57\u30FB\u9999\u6E2F\uFF09",zh_TW:"\u4E2D\u56FD\u8A9E\uFF08\u7E41\u4F53\u5B57\u30FB\u53F0\u6E7E\uFF09",en_US:"\u82F1\u8A9E",ja_JP:"\u65E5\u672C\u8A9E",fr_FR:"\u30D5\u30E9\u30F3\u30B9\u8A9E"},login:{kbEditorLogin:{title:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u958B\u304F",serverUrlLabel:"\u30B5\u30FC\u30D0\u30FCURL",serverUrlPlaceholder:"\u30B5\u30FC\u30D0\u30FCURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1Ahttp://43.134.1.60/:8081\uFF09",noKbServerMsg:'\u3053\u306E\u30B5\u30FC\u30D0\u30FC\u306B\u306F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u304C\u3042\u308A\u307E\u305B\u3093\u3002<a class="cursor-pointer">\u7BA1\u7406\u8005\u3068\u3057\u3066\u30ED\u30B0\u30A4\u30F3</a>\u3057\u3066\u3001\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3067\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3067\u304D\u307E\u3059\u3002',kbLocationLabel:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9",refreshKbListTooltip:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4E00\u89A7\u3092\u66F4\u65B0",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",adminLoginBtn:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",serverStatus:{invalidURL:"URL\u306E\u5F62\u5F0F\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",connFailed:"\u63A5\u7D9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F",connecting:"\u63A5\u7D9A\u4E2D",connSuccess:"\u63A5\u7D9A\u6210\u529F",noKbServer:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u30B5\u30FC\u30D0\u30FC\u304C\u3042\u308A\u307E\u305B\u3093",loginFailed:"\u30ED\u30B0\u30A4\u30F3\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},loginStatus:{idle:"\u5F85\u6A5F\u4E2D",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",loginFailed_InvalidPassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",loginFailed_Unknown:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u3067\u3059\u3002\u30B5\u30FC\u30D0\u30FC\u7BA1\u7406\u8005\u306B\u9023\u7D61\u3057\u3066\u304F\u3060\u3055\u3044"},loginBtn:{idle:"\u30ED\u30B0\u30A4\u30F3",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D...",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",loginFailed_InvalidPassword:"\u30ED\u30B0\u30A4\u30F3",loginFailed_Unknown:"\u30ED\u30B0\u30A4\u30F3"}},adminLogin:{title:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",serverUrlLabel:"\u30B5\u30FC\u30D0\u30FCURL",serverUrlPlaceholder:"\u30B5\u30FC\u30D0\u30FCURL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1Ahttp://43.134.1.60/:8081\uFF09",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",kbEditorLoginBtn:"\u30A8\u30C7\u30A3\u30BF\u30FC\u30ED\u30B0\u30A4\u30F3",loginBtn:{idle:"\u30ED\u30B0\u30A4\u30F3",loggingIn:"\u30ED\u30B0\u30A4\u30F3\u4E2D...",loginSuccess:"\u30ED\u30B0\u30A4\u30F3\u6210\u529F",invalidServerUrl:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",invalidPassword:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",maxAttempts:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557",cannotConnectToServer:"\u30ED\u30B0\u30A4\u30F3\u5931\u6557"},errMsg:{invalidServerUrl:"URL\u306E\u5F62\u5F0F\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",invalidPassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",maxAttempts:"\u8A66\u884C\u56DE\u6570\u306E\u4E0A\u9650\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u3057\u3066\u304B\u3089\u518D\u8A66\u884C\u3057\u3066\u304F\u3060\u3055\u3044",cannotConnectToServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3067\u304D\u307E\u305B\u3093"}}},kbView:{loadingKb:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",backup:{createBackup:"\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3092\u4F5C\u6210",createBackupSuccess:"\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u4F5C\u6210\u6210\u529F",createBackupFailed:"\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u4F5C\u6210\u5931\u6557"},backlinksPanel:{nBacklinks:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF {count} \u4EF6",nPotentialLinks:"\u6F5C\u5728\u7684\u306A\u30EA\u30F3\u30AF {count} \u4EF6"},keybindingInput:{empty:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u3092\u8A2D\u5B9A"},codeblock:{unknownLanguage:"\u4E0D\u660E\u306A\u8A00\u8A9E",copyCode:"\u30B3\u30FC\u30C9\u3092\u30B3\u30D4\u30FC",copySuccess:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u306E\u30B3\u30FC\u30C9\u304C\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3055\u308C\u307E\u3057\u305F"},imageEditor:{title:"\u753B\u50CF\u30A8\u30C7\u30A3\u30BF\u30FC",description:"\u753B\u50CF\u306E\u30C8\u30EA\u30DF\u30F3\u30B0\u3001\u56DE\u8EE2\u3001\u30B9\u30AD\u30E3\u30F3\u30D5\u30A1\u30A4\u30EB\u306E\u81EA\u52D5\u6700\u9069\u5316\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",save:"\u5909\u66F4\u3092\u9069\u7528",saveAs:"\u540D\u524D\u3092\u4ED8\u3051\u3066\u4FDD\u5B58",deleteOriginal:"\u5143\u306E\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F"},fusionCommand:{noResults:"\u7D50\u679C\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",noCommandResults:"\u30B3\u30DE\u30F3\u30C9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",allowedBlockTypes:"\u8A31\u53EF\u3055\u308C\u305F\u30D6\u30ED\u30C3\u30AF\u30BF\u30A4\u30D7",searchPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u691C\u7D22",searchHelp:"\u2191\u2193\u3068Home\u3001End\u3067\u7D50\u679C\u3092\u9078\u629E\u3001\u21B5\u3067\u9078\u629E\u9805\u76EE\u306B\u79FB\u52D5\u3001\u2318+\u21B5\u3067\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165\u3001esc\u3067\u691C\u7D22\u30D1\u30CD\u30EB\u3092\u9589\u3058\u308B",commandHelp:"/\u3092\u5165\u529B\u3057\u3066\u30B3\u30DE\u30F3\u30C9\u3092\u691C\u7D22\u3001\u2191\u2193\u3068Home\u3001End\u3067\u30B3\u30DE\u30F3\u30C9\u3092\u9078\u629E\u3057\u3066\u21B5\u3067\u5B9F\u884C\u3001esc\u3067\u30B3\u30DE\u30F3\u30C9\u30D1\u30CD\u30EB\u3092\u9589\u3058\u308B"},blockMover:{moveSuccess:"{count} \u500B\u306E\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u307E\u3057\u305F",focusMovedBlock:"\u79FB\u52D5\u3057\u305F\u30D6\u30ED\u30C3\u30AF\u306B\u30D5\u30A9\u30FC\u30AB\u30B9",inputPlaceholder:"\u79FB\u52D5\u5148..."},refSuggestions:{noSuggestions:"\u7D50\u679C\u304C\u3042\u308A\u307E\u305B\u3093",createNewUnder1:"\u65B0\u3057\u3044\u30D6\u30ED\u30C3\u30AF\u3092\u4F5C\u6210",createNewUnder2:""},pomodoro:{startWorking:"\u3055\u3042\u3001\u59CB\u3081\u307E\u3057\u3087\u3046\uFF01",startResting:"\u4F11\u61A9\u3057\u307E\u3057\u3087\u3046",stop:"\u505C\u6B62",working:"\u4F5C\u696D\u4E2D...",resting:"\u4F11\u61A9\u4E2D..."},settingsPanel:{title:"\u8A2D\u5B9A",invalidJson:"\u7121\u52B9\u306AJSON",reset:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8",noResult:"\u4E00\u81F4\u3059\u308B\u30D6\u30ED\u30C3\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",invalidBlockId:"\u7121\u52B9\u306A\u30D6\u30ED\u30C3\u30AFID"},syncStatus:{synced:"\u3059\u3079\u3066\u306E\u5909\u66F4\u304C\u540C\u671F\u3055\u308C\u307E\u3057\u305F",syncing:"\u540C\u671F\u4E2D",disconnected:"\u540C\u671F\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},sidePane:{remove:"\u30B5\u30A4\u30C9\u30D0\u30FC\u304B\u3089\u524A\u9664",prev:"\u524D\u306E\u9805\u76EE",next:"\u6B21\u306E\u9805\u76EE",collapse:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u6298\u308A\u305F\u305F\u3080",moveToRight:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u53F3\u306B\u79FB\u52D5",moveToBottom:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u4E0B\u306B\u79FB\u52D5",setFilter:"\u30D5\u30A3\u30EB\u30BF\u30FC\u3092\u8A2D\u5B9A",setSort:"\u4E26\u3073\u66FF\u3048\u3092\u8A2D\u5B9A",empty:"\u{1F914} \u30B5\u30A4\u30C9\u30D0\u30FC\u304C\u7A7A\u3067\u3059",searchAndAdd:"\u30D6\u30ED\u30C3\u30AF\u3092\u691C\u7D22\u3057\u3066\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0",emptyTip:`\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8FFD\u52A0\u3059\u308B\u306B\u306F\uFF1A
  - \u30D6\u30ED\u30C3\u30AF\u30E1\u30CB\u30E5\u30FC\u304B\u3089"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0"\u3092\u9078\u629E
  - \u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8Command/Ctrl + K\u3092\u4F7F\u7528
  - \u53F3\u4E0A\u306E"+"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30D6\u30ED\u30C3\u30AF\u3092\u691C\u7D22\u3057\u3066\u8FFD\u52A0`},headerBar:{moreOptions:"\u3088\u308A\u591A\u304F\u306E\u30AA\u30D7\u30B7\u30E7\u30F3",dailynoteNavigator:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8",pomodoro:"\u30DD\u30E2\u30C9\u30FC\u30ED",closeMenu:"\u30E1\u30CB\u30E5\u30FC\u3092\u9589\u3058\u308B",openMenu:"\u30E1\u30CB\u30E5\u30FC\u3092\u958B\u304F",back:"\u623B\u308B",forward:"\u9032\u3080",search:"\u691C\u7D22",notifications:"\u901A\u77E5",switchLightTheme:"\u30E9\u30A4\u30C8\u30C6\u30FC\u30DE\u306B\u5207\u308A\u66FF\u3048",switchDarkTheme:"\u30C0\u30FC\u30AF\u30C6\u30FC\u30DE\u306B\u5207\u308A\u66FF\u3048",openSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u958B\u304F",closeSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u9589\u3058\u308B",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",enterFocusMode:"\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9\u306B\u5165\u308B",exitFocusMode:"\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9\u3092\u7D42\u4E86",attachmentsManager:"\u6DFB\u4ED8\u30D5\u30A1\u30A4\u30EB\u7BA1\u7406",settings:"\u8A2D\u5B9A",timeMachine:"\u30BF\u30A4\u30E0\u30DE\u30B7\u30F3",help:"\u30D8\u30EB\u30D7",exit:"\u7D42\u4E86",keybindings:"\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u306E\u8868\u793A\u3068\u7DE8\u96C6"},command:{deleteBlock:"\u30D6\u30ED\u30C3\u30AF\u3092\u524A\u9664",copyBlockReference:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u30B3\u30D4\u30FC",copyBlockMirror:"\u30D6\u30ED\u30C3\u30AF\u30DF\u30E9\u30FC\u3092\u30B3\u30D4\u30FC",addToFavorite:"\u304A\u6C17\u306B\u5165\u308A\u306B\u8FFD\u52A0",addToSidepane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",sortDirectChildren:"\u76F4\u63A5\u306E\u5B50\u3092\u4E26\u3073\u66FF\u3048",sortDictAsc:"\u8F9E\u66F8\u9806\u6607\u9806",sortDictDesc:"\u8F9E\u66F8\u9806\u964D\u9806",ctimeAsc:"\u4F5C\u6210\u65E5\u6642\u6607\u9806",ctimeDesc:"\u4F5C\u6210\u65E5\u6642\u964D\u9806",mtimeAsc:"\u66F4\u65B0\u65E5\u6642\u6607\u9806",mtimeDesc:"\u66F4\u65B0\u65E5\u6642\u964D\u9806",archiveDone:"\u5B8C\u4E86\u3057\u305F\u30BF\u30B9\u30AF\u3092\u30A2\u30FC\u30AB\u30A4\u30D6",moveBlock:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5",moveBlockLeaveRef:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u3066\u53C2\u7167\u3092\u6B8B\u3059",moveBlockLeaveMirror:"\u30D6\u30ED\u30C3\u30AF\u3092\u79FB\u52D5\u3057\u3066\u30DF\u30E9\u30FC\u3092\u6B8B\u3059",insertMirrorBelow:"\u4E0B\u306B\u30DF\u30E9\u30FC\u3092\u633F\u5165",openFieldValuesInspector:"\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u30A4\u30F3\u30B9\u30DA\u30AF\u30BF\u30FC\u3092\u958B\u304F",setBlockRefColor:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u306E\u8272\u3092\u8A2D\u5B9A",blue:"\u9752",green:"\u7DD1",red:"\u8D64",yellow:"\u9EC4",gray:"\u7070\u8272",orange:"\u30AA\u30EC\u30F3\u30B8",purple:"\u7D2B"},backlinks:{openBacklinksPanel:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u30D1\u30CD\u30EB\u3092\u958B\u304F"},createNewTreeDialog:{title:"\u65B0\u898F\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u4F5C\u6210",description:`\u30EB\u30FC\u30C8\u30D6\u30ED\u30C3\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u3053\u308C\u306F\u4EE5\u4E0B\u306E\u7406\u7531\u304C\u8003\u3048\u3089\u308C\u307E\u3059\uFF1A
1. \u3053\u308C\u306F\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3067\u3059
2. \u30C7\u30FC\u30BF\u306F\u307E\u3060\u540C\u671F\u4E2D\u3067\u3059`,waitingForSync:'\u540C\u671F\u3092\u5F85\u3063\u3066\u3044\u307E\u3059\u3002\u3053\u308C\u304C\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3067\u3042\u308B\u3053\u3068\u304C\u78BA\u304B\u306A\u5834\u5408\u306F\u3001"\u4F5C\u6210"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u65B0\u3057\u3044\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044\u3002',waitBtn:"\u5F85\u6A5F",createBtn:"\u4F5C\u6210",creating:"\u4F5C\u6210\u4E2D...",done:"\u4F5C\u6210\u6210\u529F",failed:"\u4F5C\u6210\u5931\u6557"},pasteDialog:{title:"\u30C0\u30E1\u3067\u3059",description:"\u5927\u304D\u3059\u304E\u307E\u3059\uFF01\u3053\u306E\u307E\u307E\u5165\u308C\u308B\u3068\u58CA\u308C\u3066\u3057\u307E\u3044\u307E\u3059\uFF01\u5206\u5272\u3057\u3066\u8CBC\u308A\u4ED8\u3051\u3066\u307F\u307E\u305B\u3093\u304B\uFF1F",cancelBtn:"\u4E86\u89E3\u3057\u307E\u3057\u305F"},attachmentsManager:{title:"\u6DFB\u4ED8\u30D5\u30A1\u30A4\u30EB\u7BA1\u7406",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",noFiles:"\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u305B\u3093",refreshing:"\u66F4\u65B0\u4E2D...",refreshed:"\u66F4\u65B0\u6210\u529F",previewPane:{openPreview:"\u30D7\u30EC\u30D3\u30E5\u30FC",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",reference:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165",pathReference:"\u30D1\u30B9\u53C2\u7167\u3092\u633F\u5165",insertImage:"\u753B\u50CF\u3092\u633F\u5165",fetchingImage:"\u753B\u50CF\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",closePreview:"\u30D7\u30EC\u30D3\u30E5\u30FC\u3092\u9589\u3058\u308B",delete:"\u524A\u9664",info:"\u8A73\u7D30\u60C5\u5831"},uploadStatus:{idle:"\u5F85\u6A5F\u4E2D",uploading:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",success:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u6210\u529F",failed:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u5931\u6557"},fetchFilesStatus:{idle:"\u5F85\u6A5F\u4E2D",fetching:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u3092\u53D6\u5F97\u4E2D...",success:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u306E\u53D6\u5F97\u306B\u6210\u529F",failed:"\u30D5\u30A1\u30A4\u30EB\u4E00\u89A7\u306E\u53D6\u5F97\u306B\u5931\u6557"}},imageContent:{fetchingImage:"\u753B\u50CF\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",addCaption:"\u30AD\u30E3\u30D7\u30B7\u30E7\u30F3\u3092\u8FFD\u52A0",deleteImage:"\u753B\u50CF\u3092\u524A\u9664",blend:"\u80CC\u666F\u3068\u30D6\u30EC\u30F3\u30C9\uFF08\u8272\u5225\uFF09",blendLuminosity:"\u80CC\u666F\u3068\u30D6\u30EC\u30F3\u30C9\uFF08\u660E\u5EA6\u5225\uFF09",circle:"\u5186\u5F62\u306B\u30C8\u30EA\u30DF\u30F3\u30B0",invert:"\u53CD\u8EE2",invertW:"\u53CD\u8EE2\uFF08\u767D\u80CC\u666F\uFF09",outline:"\u30A2\u30A6\u30C8\u30E9\u30A4\u30F3",width:"\u5E45",wider:"\u3088\u308A\u5E83\u304F",narrower:"\u3088\u308A\u72ED\u304F",resetWidth:"\u30EA\u30BB\u30C3\u30C8",download:"\u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",metadata:"\u8A73\u7D30\u60C5\u5831",filter:"\u30D5\u30A3\u30EB\u30BF\u30FC",clearScannedImage:"\u30B9\u30AD\u30E3\u30F3\u3057\u305F\u753B\u50CF\u306E\u80CC\u666F\u3092\u30AF\u30EA\u30A2"},exporter:{title:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",description:"\u9078\u629E\u3057\u305F\u30B5\u30D6\u30C4\u30EA\u30FC\u3092HTML\u3001PDF\u3001Markdown\u3001\u30D7\u30EC\u30FC\u30F3\u30C6\u30AD\u30B9\u30C8\u306A\u3069\u69D8\u3005\u306A\u5F62\u5F0F\u3067\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",preview:"\u30D7\u30EC\u30D3\u30E5\u30FC",copyToClipboard:"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC",exportToFile:"\u30D5\u30A1\u30A4\u30EB\u306B\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",exportFormat:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F"},fontSelector:{notAvailable:"\uFF08\u672A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\uFF09",notSpecified:"\uFF08\u672A\u6307\u5B9A\uFF09"},fieldValuesInspector:{title:"\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u30A4\u30F3\u30B9\u30DA\u30AF\u30BF\u30FC",description:"\u3053\u306E\u30D6\u30ED\u30C3\u30AF\u306E\u3059\u3079\u3066\u306E\u30D5\u30A3\u30FC\u30EB\u30C9\u5024\u3092\u8868\u793A"},dailynoteNavigator:{noDailyNote:"\u3053\u306E\u65E5\u306E\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306F\u3042\u308A\u307E\u305B\u3093\u3002\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u4F5C\u6210",gotoDailyNote:"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3053\u306E\u65E5\u306E\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306B\u79FB\u52D5",dontKnowWhereToCreate:{title:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u5834\u6240\u304C\u4E0D\u660E\u3067\u3059",desc:'"\u8A2D\u5B9A > \u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8 > \u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4FDD\u5B58\u5834\u6240"\u3067\u3001\u65B0\u3057\u3044\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u5834\u6240\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044'}},history:{goToPrev:"\u623B\u308B\u3001\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u3059\u3079\u3066\u306E\u5C65\u6B74\u9805\u76EE\u3092\u8868\u793A",goToNext:"\u9032\u3080\u3001\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u3059\u3079\u3066\u306E\u5C65\u6B74\u9805\u76EE\u3092\u8868\u793A"},keybindings:{title:"\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8",description:"\u5229\u7528\u53EF\u80FD\u306A\u3059\u3079\u3066\u306E\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u306E\u4E00\u89A7",close:"\u9589\u3058\u308B",groups:{normal:"\u4E00\u822C\u7684\u306A\u64CD\u4F5C",inCodeBlock:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u56FA\u6709"},commands:{swapUp:"\u4E0A\u306B\u79FB\u52D5",swapDown:"\u4E0B\u306B\u79FB\u52D5",expand:"\u5C55\u958B",collapse:"\u6298\u308A\u305F\u305F\u3080",indent:"\u30A4\u30F3\u30C7\u30F3\u30C8\u5897\u52A0",outdent:"\u30A4\u30F3\u30C7\u30F3\u30C8\u6E1B\u5C11",insertInlineMath:"\u30A4\u30F3\u30E9\u30A4\u30F3\u6570\u5F0F\u3092\u633F\u5165",insertBlockMath:"\u30D6\u30ED\u30C3\u30AF\u6570\u5F0F\u3092\u633F\u5165",bold:"\u592A\u5B57",italic:"\u659C\u4F53",code:"\u30B3\u30FC\u30C9",highlight:"\u30CF\u30A4\u30E9\u30A4\u30C8",insertBlockRef:"\u30D6\u30ED\u30C3\u30AF\u53C2\u7167\u3092\u633F\u5165",insertTag:"\u30BF\u30B0\u3092\u633F\u5165",toCodeblock:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u306B\u5909\u63DB",undo:"\u5143\u306B\u623B\u3059",redo:"\u3084\u308A\u76F4\u3057",softBreak:"\u30BD\u30D5\u30C8\u6539\u884C",openFusionCommand:"\u30DE\u30EB\u30C1\u30D5\u30A1\u30F3\u30AF\u30B7\u30E7\u30F3\u30D1\u30CD\u30EB\u3092\u958B\u304F",openAndFocusToSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u958B\u3044\u3066\u30D5\u30A9\u30FC\u30AB\u30B9 / \u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u9589\u3058\u308B",moveSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u3092\u79FB\u52D5\uFF08\u53F3/\u4E0B\uFF09",addToFavorite:"\u304A\u6C17\u306B\u5165\u308A\u306B\u8FFD\u52A0",addToSidePane:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u8FFD\u52A0"}}},adminDashboard:{title:"\u7BA1\u7406\u8005\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8",tabs:{kbManagement:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u7BA1\u7406",logsAndAnalytics:"\u30ED\u30B0\u3068\u5206\u6790"},kbManagement:{allKbs:"\u3059\u3079\u3066\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9",allKbsDescription:"\u3053\u3053\u3067\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u4F5C\u6210\u3001\u524A\u9664\u3001\u65E2\u5B58\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u60C5\u5831\u306E\u4FEE\u6B63\u304C\u3067\u304D\u307E\u3059",noKbs:"\u{1F914} \u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u304C\u3042\u308A\u307E\u305B\u3093",noKbsDescription:'\u53F3\u4E0A\u306E"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210"\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u6700\u521D\u306E\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044',kbActions:{edit:"\u7DE8\u96C6",delete:"\u524A\u9664",addKb:"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210",refreshKbList:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4E00\u89A7\u3092\u66F4\u65B0"},newKbDialog:{title:"\u65B0\u898F\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u4F5C\u6210",description:"\u65B0\u3057\u3044\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3059\u308B\u305F\u3081\u306B\u4EE5\u4E0B\u306E\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",nameLabel:"\u540D\u524D",namePlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u540D\u3092\u5165\u529B",locationLabel:"\u5834\u6240",locationPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u5834\u6240\u3092\u5165\u529B",passwordLabel:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordPlaceholder:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B",createBtn:{idle:"\u4F5C\u6210",creating:"\u4F5C\u6210\u4E2D...",createSuccess:"\u4F5C\u6210\u6210\u529F",createFailed:"\u4F5C\u6210\u5931\u6557"},cancelBtn:"\u30AD\u30E3\u30F3\u30BB\u30EB"},deleteKbDialog:{title:"\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9\u3092\u524A\u9664",description:'\u30CA\u30EC\u30C3\u30B8\u30D9\u30FC\u30B9"{name}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F\u3053\u306E\u64CD\u4F5C\u306F\u53D6\u308A\u6D88\u305B\u307E\u305B\u3093\u3002',cancelBtn:"\u30AD\u30E3\u30F3\u30BB\u30EB",status:{idle:"\u524A\u9664",deleting:"\u524A\u9664\u4E2D...",deleteSuccess:"\u524A\u9664\u6210\u529F",deleteFailed:"\u524A\u9664\u5931\u6557"}}}}}};function r(o){var e,n,a="";if(typeof o=="string"||typeof o=="number")a+=o;else if(typeof o=="object")if(Array.isArray(o)){var s=o.length;for(e=0;e<s;e++)o[e]&&(n=r(o[e]))&&(a&&(a+=" "),a+=n)}else for(n in o)o[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var o,e,n=0,a="",s=arguments.length;n<s;n++)(o=arguments[n])&&(e=r(o))&&(a&&(a+=" "),a+=e);return a}const falsyToString=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,cx=clsx,cva=(o,e)=>n=>{var a;if((e==null?void 0:e.variants)==null)return cx(o,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(f=>{const v=n==null?void 0:n[f],b=l==null?void 0:l[f];if(v===null)return null;const k=falsyToString(v)||falsyToString(b);return s[f][k]}),d=n&&Object.entries(n).reduce((f,v)=>{let[b,k]=v;return k===void 0||(f[b]=k),f},{}),u=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((f,v)=>{let{class:b,className:k,...x}=v;return Object.entries(x).every(_=>{let[E,B]=_;return Array.isArray(B)?B.includes({...l,...d}[E]):{...l,...d}[E]===B})?[...f,b,k]:f},[]);return cx(o,c,u,n==null?void 0:n.class,n==null?void 0:n.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=o=>{const e=createClassMap(o),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=o;return{getClassGroupId:s=>{const l=s.split(CLASS_PART_SEPARATOR);return l[0]===""&&l.length!==1&&l.shift(),getGroupRecursive(l,e)||getGroupIdForArbitraryProperty(s)},getConflictingClassGroupIds:(s,l)=>{const c=n[s]||[];return l&&a[s]?[...c,...a[s]]:c}}},getGroupRecursive=(o,e)=>{var c;if(o.length===0)return e.classGroupId;const n=o[0],a=e.nextPart.get(n),s=a?getGroupRecursive(o.slice(1),a):void 0;if(s)return s;if(e.validators.length===0)return;const l=o.join(CLASS_PART_SEPARATOR);return(c=e.validators.find(({validator:d})=>d(l)))==null?void 0:c.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=o=>{if(arbitraryPropertyRegex.test(o)){const e=arbitraryPropertyRegex.exec(o)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=o=>{const{theme:e,prefix:n}=o,a={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(o.classGroups),n).forEach(([s,l])=>{processClassesRecursively(l,a,s,e)}),a},processClassesRecursively=(o,e,n,a)=>{o.forEach(s=>{if(typeof s=="string"){const l=s===""?e:getPart(e,s);l.classGroupId=n;return}if(typeof s=="function"){if(isThemeGetter(s)){processClassesRecursively(s(a),e,n,a);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([l,c])=>{processClassesRecursively(c,getPart(e,l),n,a)})})},getPart=(o,e)=>{let n=o;return e.split(CLASS_PART_SEPARATOR).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},isThemeGetter=o=>o.isThemeGetter,getPrefixedClassGroupEntries=(o,e)=>e?o.map(([n,a])=>{const s=a.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([c,d])=>[e+c,d])):l);return[n,s]}):o,createLruCache=o=>{if(o<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,a=new Map;const s=(l,c)=>{n.set(l,c),e++,e>o&&(e=0,a=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=a.get(l))!==void 0)return s(l,c),c},set(l,c){n.has(l)?n.set(l,c):s(l,c)}}},IMPORTANT_MODIFIER="!",createParseClassName=o=>{const{separator:e,experimentalParseClassName:n}=o,a=e.length===1,s=e[0],l=e.length,c=d=>{const u=[];let f=0,v=0,b;for(let B=0;B<d.length;B++){let M=d[B];if(f===0){if(M===s&&(a||d.slice(B,B+l)===e)){u.push(d.slice(v,B)),v=B+l;continue}if(M==="/"){b=B;continue}}M==="["?f++:M==="]"&&f--}const k=u.length===0?d:d.substring(v),x=k.startsWith(IMPORTANT_MODIFIER),_=x?k.substring(1):k,E=b&&b>v?b-v:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return n?d=>n({className:d,parseClassName:c}):c},sortModifiers=o=>{if(o.length<=1)return o;const e=[];let n=[];return o.forEach(a=>{a[0]==="["?(e.push(...n.sort(),a),n=[]):n.push(a)}),e.push(...n.sort()),e},createConfigUtils=o=>({cache:createLruCache(o.cacheSize),parseClassName:createParseClassName(o),...createClassGroupUtils(o)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(o,e)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s}=e,l=[],c=o.trim().split(SPLIT_CLASSES_REGEX);let d="";for(let u=c.length-1;u>=0;u-=1){const f=c[u],{modifiers:v,hasImportantModifier:b,baseClassName:k,maybePostfixModifierPosition:x}=n(f);let _=!!x,E=a(_?k.substring(0,x):k);if(!E){if(!_){d=f+(d.length>0?" "+d:d);continue}if(E=a(k),!E){d=f+(d.length>0?" "+d:d);continue}_=!1}const B=sortModifiers(v).join(":"),M=b?B+IMPORTANT_MODIFIER:B,I=M+E;if(l.includes(I))continue;l.push(I);const F=s(E,_);for(let V=0;V<F.length;++V){const L=F[V];l.push(M+L)}d=f+(d.length>0?" "+d:d)}return d};function twJoin(){let o=0,e,n,a="";for(;o<arguments.length;)(e=arguments[o++])&&(n=toValue$1(e))&&(a&&(a+=" "),a+=n);return a}const toValue$1=o=>{if(typeof o=="string")return o;let e,n="";for(let a=0;a<o.length;a++)o[a]&&(e=toValue$1(o[a]))&&(n&&(n+=" "),n+=e);return n};function createTailwindMerge(o,...e){let n,a,s,l=c;function c(u){const f=e.reduce((v,b)=>b(v),o());return n=createConfigUtils(f),a=n.cache.get,s=n.cache.set,l=d,d(u)}function d(u){const f=a(u);if(f)return f;const v=mergeClassList(u,n);return s(u,v),v}return function(){return l(twJoin.apply(null,arguments))}}const fromTheme=o=>{const e=n=>n[o]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=o=>isNumber$1(o)||stringLengths.has(o)||fractionRegex.test(o),isArbitraryLength=o=>getIsArbitraryValue(o,"length",isLengthOnly),isNumber$1=o=>!!o&&!Number.isNaN(Number(o)),isArbitraryNumber=o=>getIsArbitraryValue(o,"number",isNumber$1),isInteger=o=>!!o&&Number.isInteger(Number(o)),isPercent=o=>o.endsWith("%")&&isNumber$1(o.slice(0,-1)),isArbitraryValue=o=>arbitraryValueRegex.test(o),isTshirtSize=o=>tshirtUnitRegex.test(o),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=o=>getIsArbitraryValue(o,sizeLabels,isNever),isArbitraryPosition=o=>getIsArbitraryValue(o,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=o=>getIsArbitraryValue(o,imageLabels,isImage$1),isArbitraryShadow=o=>getIsArbitraryValue(o,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(o,e,n)=>{const a=arbitraryValueRegex.exec(o);return a?a[1]?typeof e=="string"?a[1]===e:e.has(a[1]):n(a[2]):!1},isLengthOnly=o=>lengthUnitRegex.test(o)&&!colorFunctionRegex.test(o),isNever=()=>!1,isShadow=o=>shadowRegex.test(o),isImage$1=o=>imageRegex.test(o),getDefaultConfig=()=>{const o=fromTheme("colors"),e=fromTheme("spacing"),n=fromTheme("blur"),a=fromTheme("brightness"),s=fromTheme("borderColor"),l=fromTheme("borderRadius"),c=fromTheme("borderSpacing"),d=fromTheme("borderWidth"),u=fromTheme("contrast"),f=fromTheme("grayscale"),v=fromTheme("hueRotate"),b=fromTheme("invert"),k=fromTheme("gap"),x=fromTheme("gradientColorStops"),_=fromTheme("gradientColorStopPositions"),E=fromTheme("inset"),B=fromTheme("margin"),M=fromTheme("opacity"),I=fromTheme("padding"),F=fromTheme("saturate"),V=fromTheme("scale"),L=fromTheme("sepia"),U=fromTheme("skew"),j=fromTheme("space"),oe=fromTheme("translate"),Y=()=>["auto","contain","none"],K=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",isArbitraryValue,e],G=()=>[isArbitraryValue,e],ce=()=>["",isLength,isArbitraryLength],se=()=>["auto",isNumber$1,isArbitraryValue],me=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ge=()=>["solid","dashed","dotted","double","none"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Be=()=>["start","end","center","between","around","evenly","stretch"],Ge=()=>["","0",isArbitraryValue],We=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Oe=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Oe(),borderColor:[o],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:G(),borderWidth:ce(),contrast:Oe(),grayscale:Ge(),hueRotate:Oe(),invert:Ge(),gap:G(),gradientColorStops:[o],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:W(),margin:W(),opacity:Oe(),padding:G(),saturate:Oe(),scale:Oe(),sepia:Ge(),skew:Oe(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":We()}],"break-before":[{"break-before":We()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...me(),isArbitraryValue]}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:Y()}],"overscroll-x":[{"overscroll-x":Y()}],"overscroll-y":[{"overscroll-y":Y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Ge()}],shrink:[{shrink:Ge()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":se()}],"col-end":[{"col-end":se()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":se()}],"row-end":[{"row-end":se()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...Be()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Be(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Be(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[B]}],mx:[{mx:[B]}],my:[{my:[B]}],ms:[{ms:[B]}],me:[{me:[B]}],mt:[{mt:[B]}],mr:[{mr:[B]}],mb:[{mb:[B]}],ml:[{ml:[B]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[o]}],"placeholder-opacity":[{"placeholder-opacity":[M]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[o]}],"text-opacity":[{"text-opacity":[M]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[o]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[M]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...me(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[o]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[M]}],"border-style":[{border:[...ge(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[M]}],"divide-style":[{divide:ge()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ge()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[o]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[o]}],"ring-opacity":[{"ring-opacity":[M]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[o]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[M]}],"mix-blend":[{"mix-blend":[...Te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[b]}],saturate:[{saturate:[F]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[M]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Oe()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[oe]}],"translate-y":[{"translate-y":[oe]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",o]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[o]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[o,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[o,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...o){return twMerge(clsx(o))}function $2b4dce13dd5a17fa$export$842a2cf37af977e1(o,e){return o-e*Math.floor(o/e)}const $3b62074eb05584b2$var$EPOCH=1721426;function $3b62074eb05584b2$export$f297eb839006d339(o,e,n,a){e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o,e);let s=e-1,l=-2;return n<=2?l=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(e)&&(l=-1),$3b62074eb05584b2$var$EPOCH-1+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)+Math.floor((367*n-362)/12+l+a)}function $3b62074eb05584b2$export$553d7fa8e3805fc0(o){return o%4===0&&(o%100!==0||o%400===0)}function $3b62074eb05584b2$export$c36e0ecb2d4fa69d(o,e){return o==="BC"?1-e:e}function $3b62074eb05584b2$export$4475b7e617eb123c(o){let e="AD";return o<=0&&(e="BC",o=1-o),[e,o]}const $3b62074eb05584b2$var$daysInMonth={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=e,a=n-$3b62074eb05584b2$var$EPOCH,s=Math.floor(a/146097),l=$2b4dce13dd5a17fa$export$842a2cf37af977e1(a,146097),c=Math.floor(l/36524),d=$2b4dce13dd5a17fa$export$842a2cf37af977e1(l,36524),u=Math.floor(d/1461),f=$2b4dce13dd5a17fa$export$842a2cf37af977e1(d,1461),v=Math.floor(f/365),b=s*400+c*100+u*4+v+(c!==4&&v!==4?1:0),[k,x]=$3b62074eb05584b2$export$4475b7e617eb123c(b),_=n-$3b62074eb05584b2$export$f297eb839006d339(k,x,1,1),E=2;n<$3b62074eb05584b2$export$f297eb839006d339(k,x,3,1)?E=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(x)&&(E=1);let B=Math.floor(((_+E)*12+373)/367),M=n-$3b62074eb05584b2$export$f297eb839006d339(k,x,B,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(k,x,B,M)}toJulianDay(e){return $3b62074eb05584b2$export$f297eb839006d339(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return $3b62074eb05584b2$var$daysInMonth[$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return $3b62074eb05584b2$export$553d7fa8e3805fc0(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const $2fe286d2fb449abb$export$7a5acbd77d414bd9={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function $14e0f24ef4ac5c92$export$ea39ec197993aef0(o,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,o.calendar),o.era===e.era&&o.year===e.year&&o.month===e.month&&o.day===e.day}function $14e0f24ef4ac5c92$export$a18c89cbd24170ff(o,e){return e=$11d87f3f76e88657$export$b4a036af3fc0b032(e,o.calendar),o=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(o),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),o.era===e.era&&o.year===e.year&&o.month===e.month}function $14e0f24ef4ac5c92$export$91b62ebf2ba703ee(o,e){return o.calendar.identifier===e.calendar.identifier&&o.era===e.era&&o.year===e.year&&o.month===e.month&&o.day===e.day}function $14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(o,e){return o=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(o),e=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),o.calendar.identifier===e.calendar.identifier&&o.era===e.era&&o.year===e.year&&o.month===e.month}function $14e0f24ef4ac5c92$export$629b0a497aa65267(o,e){return $14e0f24ef4ac5c92$export$ea39ec197993aef0(o,$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(e))}function $14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,e){let n=o.calendar.toJulianDay(o),a=Math.ceil(n+1-$14e0f24ef4ac5c92$var$getWeekStart(e))%7;return a<0&&(a+=7),a}function $14e0f24ef4ac5c92$export$461939dd4422153(o){return $11d87f3f76e88657$export$1b96692a1ba042ac(Date.now(),o)}function $14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(o){return $11d87f3f76e88657$export$93522d1a439f3617($14e0f24ef4ac5c92$export$461939dd4422153(o))}function $14e0f24ef4ac5c92$export$68781ddf31c0090f(o,e){return o.calendar.toJulianDay(o)-e.calendar.toJulianDay(e)}function $14e0f24ef4ac5c92$export$c19a80a9721b80f6(o,e){return $14e0f24ef4ac5c92$var$timeToMs(o)-$14e0f24ef4ac5c92$var$timeToMs(e)}function $14e0f24ef4ac5c92$var$timeToMs(o){return o.hour*36e5+o.minute*6e4+o.second*1e3+o.millisecond}let $14e0f24ef4ac5c92$var$localTimeZone=null;function $14e0f24ef4ac5c92$export$aa8b41735afcabd2(){return $14e0f24ef4ac5c92$var$localTimeZone==null&&($14e0f24ef4ac5c92$var$localTimeZone=new Intl.DateTimeFormat().resolvedOptions().timeZone),$14e0f24ef4ac5c92$var$localTimeZone}function $14e0f24ef4ac5c92$export$a5a3b454ada2268e(o){return o.subtract({days:o.day-1})}function $14e0f24ef4ac5c92$export$a2258d9c4118825c(o){return o.add({days:o.calendar.getDaysInMonth(o)-o.day})}const $14e0f24ef4ac5c92$var$cachedRegions=new Map;function $14e0f24ef4ac5c92$var$getRegion(o){if(Intl.Locale){let n=$14e0f24ef4ac5c92$var$cachedRegions.get(o);return n||(n=new Intl.Locale(o).maximize().region,n&&$14e0f24ef4ac5c92$var$cachedRegions.set(o,n)),n}let e=o.split("-")[1];return e==="u"?void 0:e}function $14e0f24ef4ac5c92$var$getWeekStart(o){let e=$14e0f24ef4ac5c92$var$getRegion(o);return e&&$2fe286d2fb449abb$export$7a5acbd77d414bd9[e]||0}function $11d87f3f76e88657$export$bd4fb2bc8bb06fb(o){o=$11d87f3f76e88657$export$b4a036af3fc0b032(o,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let e=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(o.era,o.year);return $11d87f3f76e88657$var$epochFromParts(e,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)}function $11d87f3f76e88657$var$epochFromParts(o,e,n,a,s,l,c){let d=new Date;return d.setUTCHours(a,s,l,c),d.setUTCFullYear(o,e-1,n),d.getTime()}function $11d87f3f76e88657$export$59c99f3515d3493f(o,e){if(e==="UTC")return 0;if(o>0&&e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2())return new Date(o).getTimezoneOffset()*-6e4;let{year:n,month:a,day:s,hour:l,minute:c,second:d}=$11d87f3f76e88657$var$getTimeZoneParts(o,e);return $11d87f3f76e88657$var$epochFromParts(n,a,s,l,c,d,0)-Math.floor(o/1e3)*1e3}const $11d87f3f76e88657$var$formattersByTimeZone=new Map;function $11d87f3f76e88657$var$getTimeZoneParts(o,e){let n=$11d87f3f76e88657$var$formattersByTimeZone.get(e);n||(n=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),$11d87f3f76e88657$var$formattersByTimeZone.set(e,n));let a=n.formatToParts(new Date(o)),s={};for(let l of a)l.type!=="literal"&&(s[l.type]=l.value);return{year:s.era==="BC"||s.era==="B"?-s.year+1:+s.year,month:+s.month,day:+s.day,hour:s.hour==="24"?0:+s.hour,minute:+s.minute,second:+s.second}}const $11d87f3f76e88657$var$DAYMILLIS=864e5;function $11d87f3f76e88657$var$getValidWallTimes(o,e,n,a){return(n===a?[n]:[n,a]).filter(s=>$11d87f3f76e88657$var$isValidWallTime(o,e,s))}function $11d87f3f76e88657$var$isValidWallTime(o,e,n){let a=$11d87f3f76e88657$var$getTimeZoneParts(n,e);return o.year===a.year&&o.month===a.month&&o.day===a.day&&o.hour===a.hour&&o.minute===a.minute&&o.second===a.second}function $11d87f3f76e88657$export$5107c82f94518f5c(o,e,n="compatible"){let a=$11d87f3f76e88657$export$b21e0b124e224484(o);if(e==="UTC")return $11d87f3f76e88657$export$bd4fb2bc8bb06fb(a);if(e===$14e0f24ef4ac5c92$export$aa8b41735afcabd2()&&n==="compatible"){a=$11d87f3f76e88657$export$b4a036af3fc0b032(a,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let u=new Date,f=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(a.era,a.year);return u.setFullYear(f,a.month-1,a.day),u.setHours(a.hour,a.minute,a.second,a.millisecond),u.getTime()}let s=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(a),l=$11d87f3f76e88657$export$59c99f3515d3493f(s-$11d87f3f76e88657$var$DAYMILLIS,e),c=$11d87f3f76e88657$export$59c99f3515d3493f(s+$11d87f3f76e88657$var$DAYMILLIS,e),d=$11d87f3f76e88657$var$getValidWallTimes(a,e,s-l,s-c);if(d.length===1)return d[0];if(d.length>1)switch(n){case"compatible":case"earlier":return d[0];case"later":return d[d.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(n){case"earlier":return Math.min(s-l,s-c);case"compatible":case"later":return Math.max(s-l,s-c);case"reject":throw new RangeError("No such absolute time found")}}function $11d87f3f76e88657$export$e67a095c620b86fe(o,e,n="compatible"){return new Date($11d87f3f76e88657$export$5107c82f94518f5c(o,e,n))}function $11d87f3f76e88657$export$1b96692a1ba042ac(o,e){let n=$11d87f3f76e88657$export$59c99f3515d3493f(o,e),a=new Date(o+n),s=a.getUTCFullYear(),l=a.getUTCMonth()+1,c=a.getUTCDate(),d=a.getUTCHours(),u=a.getUTCMinutes(),f=a.getUTCSeconds(),v=a.getUTCMilliseconds();return new $35ea8db9cb2ccb90$export$d3b7288e7994edea(s<1?"BC":"AD",s<1?-s+1:s,l,c,e,n,d,u,f,v)}function $11d87f3f76e88657$export$93522d1a439f3617(o){return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o.calendar,o.era,o.year,o.month,o.day)}function $11d87f3f76e88657$export$b21e0b124e224484(o,e){let n=0,a=0,s=0,l=0;if("timeZone"in o)({hour:n,minute:a,second:s,millisecond:l}=o);else if("hour"in o&&!e)return o;return e&&({hour:n,minute:a,second:s,millisecond:l}=e),new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(o.calendar,o.era,o.year,o.month,o.day,n,a,s,l)}function $11d87f3f76e88657$export$b4a036af3fc0b032(o,e){if(o.calendar.identifier===e.identifier)return o;let n=e.fromJulianDay(o.calendar.toJulianDay(o)),a=o.copy();return a.calendar=e,a.era=n.era,a.year=n.year,a.month=n.month,a.day=n.day,$735220c2d4774dd3$export$c4e2ecac49351ef2(a),a}function $11d87f3f76e88657$export$84c95a83c799e074(o,e,n){if(o instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea)return o.timeZone===e?o:$11d87f3f76e88657$export$538b00033cc11c75(o,e);let a=$11d87f3f76e88657$export$5107c82f94518f5c(o,e,n);return $11d87f3f76e88657$export$1b96692a1ba042ac(a,e)}function $11d87f3f76e88657$export$83aac07b4c37b25(o){let e=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;return new Date(e)}function $11d87f3f76e88657$export$538b00033cc11c75(o,e){let n=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(n,e),o.calendar)}const $735220c2d4774dd3$var$ONE_HOUR=36e5;function $735220c2d4774dd3$export$e16d8520af44a096(o,e){let n=o.copy(),a="hour"in n?$735220c2d4774dd3$var$addTimeFields(n,e):0;$735220c2d4774dd3$var$addYears(n,e.years||0),n.calendar.balanceYearMonth&&n.calendar.balanceYearMonth(n,o),n.month+=e.months||0,$735220c2d4774dd3$var$balanceYearMonth(n),$735220c2d4774dd3$var$constrainMonthDay(n),n.day+=(e.weeks||0)*7,n.day+=e.days||0,n.day+=a,$735220c2d4774dd3$var$balanceDay(n),n.calendar.balanceDate&&n.calendar.balanceDate(n),n.year<1&&(n.year=1,n.month=1,n.day=1);let s=n.calendar.getYearsInEra(n);if(n.year>s){var l,c;let u=(l=(c=n.calendar).isInverseEra)===null||l===void 0?void 0:l.call(c,n);n.year=s,n.month=u?1:n.calendar.getMonthsInYear(n),n.day=u?1:n.calendar.getDaysInMonth(n)}n.month<1&&(n.month=1,n.day=1);let d=n.calendar.getMonthsInYear(n);return n.month>d&&(n.month=d,n.day=n.calendar.getDaysInMonth(n)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day)),n}function $735220c2d4774dd3$var$addYears(o,e){var n,a;!((n=(a=o.calendar).isInverseEra)===null||n===void 0)&&n.call(a,o)&&(e=-e),o.year+=e}function $735220c2d4774dd3$var$balanceYearMonth(o){for(;o.month<1;)$735220c2d4774dd3$var$addYears(o,-1),o.month+=o.calendar.getMonthsInYear(o);let e=0;for(;o.month>(e=o.calendar.getMonthsInYear(o));)o.month-=e,$735220c2d4774dd3$var$addYears(o,1)}function $735220c2d4774dd3$var$balanceDay(o){for(;o.day<1;)o.month--,$735220c2d4774dd3$var$balanceYearMonth(o),o.day+=o.calendar.getDaysInMonth(o);for(;o.day>o.calendar.getDaysInMonth(o);)o.day-=o.calendar.getDaysInMonth(o),o.month++,$735220c2d4774dd3$var$balanceYearMonth(o)}function $735220c2d4774dd3$var$constrainMonthDay(o){o.month=Math.max(1,Math.min(o.calendar.getMonthsInYear(o),o.month)),o.day=Math.max(1,Math.min(o.calendar.getDaysInMonth(o),o.day))}function $735220c2d4774dd3$export$c4e2ecac49351ef2(o){o.calendar.constrainDate&&o.calendar.constrainDate(o),o.year=Math.max(1,Math.min(o.calendar.getYearsInEra(o),o.year)),$735220c2d4774dd3$var$constrainMonthDay(o)}function $735220c2d4774dd3$export$3e2544e88a25bff8(o){let e={};for(let n in o)typeof o[n]=="number"&&(e[n]=-o[n]);return e}function $735220c2d4774dd3$export$4e2d2ead65e5f7e3(o,e){return $735220c2d4774dd3$export$e16d8520af44a096(o,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$adaa4cf7ef1b65be(o,e){let n=o.copy();return e.era!=null&&(n.era=e.era),e.year!=null&&(n.year=e.year),e.month!=null&&(n.month=e.month),e.day!=null&&(n.day=e.day),$735220c2d4774dd3$export$c4e2ecac49351ef2(n),n}function $735220c2d4774dd3$export$e5d5e1c1822b6e56(o,e){let n=o.copy();return e.hour!=null&&(n.hour=e.hour),e.minute!=null&&(n.minute=e.minute),e.second!=null&&(n.second=e.second),e.millisecond!=null&&(n.millisecond=e.millisecond),$735220c2d4774dd3$export$7555de1e070510cb(n),n}function $735220c2d4774dd3$var$balanceTime(o){o.second+=Math.floor(o.millisecond/1e3),o.millisecond=$735220c2d4774dd3$var$nonNegativeMod(o.millisecond,1e3),o.minute+=Math.floor(o.second/60),o.second=$735220c2d4774dd3$var$nonNegativeMod(o.second,60),o.hour+=Math.floor(o.minute/60),o.minute=$735220c2d4774dd3$var$nonNegativeMod(o.minute,60);let e=Math.floor(o.hour/24);return o.hour=$735220c2d4774dd3$var$nonNegativeMod(o.hour,24),e}function $735220c2d4774dd3$export$7555de1e070510cb(o){o.millisecond=Math.max(0,Math.min(o.millisecond,1e3)),o.second=Math.max(0,Math.min(o.second,59)),o.minute=Math.max(0,Math.min(o.minute,59)),o.hour=Math.max(0,Math.min(o.hour,23))}function $735220c2d4774dd3$var$nonNegativeMod(o,e){let n=o%e;return n<0&&(n+=e),n}function $735220c2d4774dd3$var$addTimeFields(o,e){return o.hour+=e.hours||0,o.minute+=e.minutes||0,o.second+=e.seconds||0,o.millisecond+=e.milliseconds||0,$735220c2d4774dd3$var$balanceTime(o)}function $735220c2d4774dd3$export$d52ced6badfb9a4c(o,e,n,a){let s=o.copy();switch(e){case"era":{let d=o.calendar.getEras(),u=d.indexOf(o.era);if(u<0)throw new Error("Invalid era: "+o.era);u=$735220c2d4774dd3$var$cycleValue(u,n,0,d.length-1,a==null?void 0:a.round),s.era=d[u],$735220c2d4774dd3$export$c4e2ecac49351ef2(s);break}case"year":var l,c;!((l=(c=s.calendar).isInverseEra)===null||l===void 0)&&l.call(c,s)&&(n=-n),s.year=$735220c2d4774dd3$var$cycleValue(o.year,n,-1/0,9999,a==null?void 0:a.round),s.year===-1/0&&(s.year=1),s.calendar.balanceYearMonth&&s.calendar.balanceYearMonth(s,o);break;case"month":s.month=$735220c2d4774dd3$var$cycleValue(o.month,n,1,o.calendar.getMonthsInYear(o),a==null?void 0:a.round);break;case"day":s.day=$735220c2d4774dd3$var$cycleValue(o.day,n,1,o.calendar.getDaysInMonth(o),a==null?void 0:a.round);break;default:throw new Error("Unsupported field "+e)}return o.calendar.balanceDate&&o.calendar.balanceDate(s),$735220c2d4774dd3$export$c4e2ecac49351ef2(s),s}function $735220c2d4774dd3$export$dd02b3e0007dfe28(o,e,n,a){let s=o.copy();switch(e){case"hour":{let l=o.hour,c=0,d=23;if((a==null?void 0:a.hourCycle)===12){let u=l>=12;c=u?12:0,d=u?23:11}s.hour=$735220c2d4774dd3$var$cycleValue(l,n,c,d,a==null?void 0:a.round);break}case"minute":s.minute=$735220c2d4774dd3$var$cycleValue(o.minute,n,0,59,a==null?void 0:a.round);break;case"second":s.second=$735220c2d4774dd3$var$cycleValue(o.second,n,0,59,a==null?void 0:a.round);break;case"millisecond":s.millisecond=$735220c2d4774dd3$var$cycleValue(o.millisecond,n,0,999,a==null?void 0:a.round);break;default:throw new Error("Unsupported field "+e)}return s}function $735220c2d4774dd3$var$cycleValue(o,e,n,a,s=!1){if(s){o+=Math.sign(e),o<n&&(o=a);let l=Math.abs(e);e>0?o=Math.ceil(o/l)*l:o=Math.floor(o/l)*l,o>a&&(o=n)}else o+=e,o<n?o=a-(n-o-1):o>a&&(o=n+(o-a-1));return o}function $735220c2d4774dd3$export$96b1d28349274637(o,e){let n;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let s=$735220c2d4774dd3$export$e16d8520af44a096($11d87f3f76e88657$export$b21e0b124e224484(o),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});n=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone)}else n=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset;n+=e.milliseconds||0,n+=(e.seconds||0)*1e3,n+=(e.minutes||0)*6e4,n+=(e.hours||0)*36e5;let a=$11d87f3f76e88657$export$1b96692a1ba042ac(n,o.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032(a,o.calendar)}function $735220c2d4774dd3$export$6814caac34ca03c7(o,e){return $735220c2d4774dd3$export$96b1d28349274637(o,$735220c2d4774dd3$export$3e2544e88a25bff8(e))}function $735220c2d4774dd3$export$9a297d111fc86b79(o,e,n,a){switch(e){case"hour":{let s=0,l=23;if((a==null?void 0:a.hourCycle)===12){let _=o.hour>=12;s=_?12:0,l=_?23:11}let c=$11d87f3f76e88657$export$b21e0b124e224484(o),d=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:s}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),u=[$11d87f3f76e88657$export$5107c82f94518f5c(d,o.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(d,o.timeZone,"later")].filter(_=>$11d87f3f76e88657$export$1b96692a1ba042ac(_,o.timeZone).day===d.day)[0],f=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(c,{hour:l}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),v=[$11d87f3f76e88657$export$5107c82f94518f5c(f,o.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(f,o.timeZone,"later")].filter(_=>$11d87f3f76e88657$export$1b96692a1ba042ac(_,o.timeZone).day===f.day).pop(),b=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(o)-o.offset,k=Math.floor(b/$735220c2d4774dd3$var$ONE_HOUR),x=b%$735220c2d4774dd3$var$ONE_HOUR;return b=$735220c2d4774dd3$var$cycleValue(k,n,Math.floor(u/$735220c2d4774dd3$var$ONE_HOUR),Math.floor(v/$735220c2d4774dd3$var$ONE_HOUR),a==null?void 0:a.round)*$735220c2d4774dd3$var$ONE_HOUR+x,$11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(b,o.timeZone),o.calendar)}case"minute":case"second":case"millisecond":return $735220c2d4774dd3$export$dd02b3e0007dfe28(o,e,n,a);case"era":case"year":case"month":case"day":{let s=$735220c2d4774dd3$export$d52ced6badfb9a4c($11d87f3f76e88657$export$b21e0b124e224484(o),e,n,a),l=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,o.timeZone),o.calendar)}default:throw new Error("Unsupported field "+e)}}function $735220c2d4774dd3$export$31b5430eb18be4f8(o,e,n){let a=$11d87f3f76e88657$export$b21e0b124e224484(o),s=$735220c2d4774dd3$export$e5d5e1c1822b6e56($735220c2d4774dd3$export$adaa4cf7ef1b65be(a,e),e);if(s.compare(a)===0)return o;let l=$11d87f3f76e88657$export$5107c82f94518f5c(s,o.timeZone,n);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(l,o.timeZone),o.calendar)}function $fae977aafc393c5c$export$f59dee82248f5ad4(o){return`${String(o.hour).padStart(2,"0")}:${String(o.minute).padStart(2,"0")}:${String(o.second).padStart(2,"0")}${o.millisecond?String(o.millisecond/1e3).slice(1):""}`}function $fae977aafc393c5c$export$60dfd74aa96791bd(o){let e=$11d87f3f76e88657$export$b4a036af3fc0b032(o,new $3b62074eb05584b2$export$80ee6245ec4f29ec),n;return e.era==="BC"?n=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):n=String(e.year).padStart(4,"0"),`${n}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function $fae977aafc393c5c$export$4223de14708adc63(o){return`${$fae977aafc393c5c$export$60dfd74aa96791bd(o)}T${$fae977aafc393c5c$export$f59dee82248f5ad4(o)}`}function $fae977aafc393c5c$var$offsetToString(o){let e=Math.sign(o)<0?"-":"+";o=Math.abs(o);let n=Math.floor(o/36e5),a=o%36e5/6e4;return`${e}${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function $fae977aafc393c5c$export$bf79f1ebf4b18792(o){return`${$fae977aafc393c5c$export$4223de14708adc63(o)}${$fae977aafc393c5c$var$offsetToString(o.offset)}[${o.timeZone}]`}function _check_private_redeclaration(o,e){if(e.has(o))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _class_private_field_init(o,e,n){_check_private_redeclaration(o,e),e.set(o,n)}function $35ea8db9cb2ccb90$var$shiftArgs(o){let e=typeof o[0]=="object"?o.shift():new $3b62074eb05584b2$export$80ee6245ec4f29ec,n;if(typeof o[0]=="string")n=o.shift();else{let c=e.getEras();n=c[c.length-1]}let a=o.shift(),s=o.shift(),l=o.shift();return[e,n,a,s,l]}var $35ea8db9cb2ccb90$var$_type=new WeakMap;class $35ea8db9cb2ccb90$export$99faa760c7908e4f{copy(){return this.era?new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.era,this.year,this.month,this.day):new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.year,this.month,this.day)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be(this,e)}cycle(e,n,a){return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,n,a)}toDate(e){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e)}toString(){return $fae977aafc393c5c$export$60dfd74aa96791bd(this)}compare(e){return $14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e)}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type2=new WeakMap;class $35ea8db9cb2ccb90$export$ca871e8dbb80966f{copy(){return this.era?new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$e16d8520af44a096(this,e)}subtract(e){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,e)}set(e){return $735220c2d4774dd3$export$adaa4cf7ef1b65be($735220c2d4774dd3$export$e5d5e1c1822b6e56(this,e),e)}cycle(e,n,a){switch(e){case"era":case"year":case"month":case"day":return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,e,n,a);default:return $735220c2d4774dd3$export$dd02b3e0007dfe28(this,e,n,a)}}toDate(e,n){return $11d87f3f76e88657$export$e67a095c620b86fe(this,e,n)}toString(){return $fae977aafc393c5c$export$4223de14708adc63(this)}compare(e){let n=$14e0f24ef4ac5c92$export$68781ddf31c0090f(this,e);return n===0?$14e0f24ef4ac5c92$export$c19a80a9721b80f6(this,$11d87f3f76e88657$export$b21e0b124e224484(e)):n}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type2,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e);this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type3=new WeakMap;class $35ea8db9cb2ccb90$export$d3b7288e7994edea{copy(){return this.era?new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return $735220c2d4774dd3$export$96b1d28349274637(this,e)}subtract(e){return $735220c2d4774dd3$export$6814caac34ca03c7(this,e)}set(e,n){return $735220c2d4774dd3$export$31b5430eb18be4f8(this,e,n)}cycle(e,n,a){return $735220c2d4774dd3$export$9a297d111fc86b79(this,e,n,a)}toDate(){return $11d87f3f76e88657$export$83aac07b4c37b25(this)}toString(){return $fae977aafc393c5c$export$bf79f1ebf4b18792(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-$11d87f3f76e88657$export$84c95a83c799e074(e,this.timeZone).toDate().getTime()}constructor(...e){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type3,{writable:!0,value:void 0});let[n,a,s,l,c]=$35ea8db9cb2ccb90$var$shiftArgs(e),d=e.shift(),u=e.shift();this.calendar=n,this.era=a,this.year=s,this.month=l,this.day=c,this.timeZone=d,this.offset=u,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}const $62225008020f0a13$var$ERA_START_DATES=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],$62225008020f0a13$var$ERA_END_DATES=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],$62225008020f0a13$var$ERA_ADDENDS=[1867,1911,1925,1988,2018],$62225008020f0a13$var$ERA_NAMES=["meiji","taisho","showa","heisei","reiwa"];function $62225008020f0a13$var$findEraFromGregorianDate(o){const e=$62225008020f0a13$var$ERA_START_DATES.findIndex(([n,a,s])=>o.year<n||o.year===n&&o.month<a||o.year===n&&o.month===a&&o.day<s);return e===-1?$62225008020f0a13$var$ERA_START_DATES.length-1:e===0?0:e-1}function $62225008020f0a13$var$toGregorian(o){let e=$62225008020f0a13$var$ERA_ADDENDS[$62225008020f0a13$var$ERA_NAMES.indexOf(o.era)];if(!e)throw new Error("Unknown era: "+o.era);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o.year+e,o.month,o.day)}class $62225008020f0a13$export$b746ab2b60cdffbf extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$62225008020f0a13$var$findEraFromGregorianDate(n);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,$62225008020f0a13$var$ERA_NAMES[a],n.year-$62225008020f0a13$var$ERA_ADDENDS[a],n.month,n.day)}toJulianDay(e){return super.toJulianDay($62225008020f0a13$var$toGregorian(e))}balanceDate(e){let n=$62225008020f0a13$var$toGregorian(e),a=$62225008020f0a13$var$findEraFromGregorianDate(n);$62225008020f0a13$var$ERA_NAMES[a]!==e.era&&(e.era=$62225008020f0a13$var$ERA_NAMES[a],e.year=n.year-$62225008020f0a13$var$ERA_ADDENDS[a]),this.constrainDate(e)}constrainDate(e){let n=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_END_DATES[n];if(a!=null){let[s,l,c]=a,d=s-$62225008020f0a13$var$ERA_ADDENDS[n];e.year=Math.max(1,Math.min(d,e.year)),e.year===d&&(e.month=Math.min(l,e.month),e.month===l&&(e.day=Math.min(c,e.day)))}if(e.year===1&&n>=0){let[,s,l]=$62225008020f0a13$var$ERA_START_DATES[n];e.month=Math.max(s,e.month),e.month===s&&(e.day=Math.max(l,e.day))}}getEras(){return $62225008020f0a13$var$ERA_NAMES}getYearsInEra(e){let n=$62225008020f0a13$var$ERA_NAMES.indexOf(e.era),a=$62225008020f0a13$var$ERA_START_DATES[n],s=$62225008020f0a13$var$ERA_START_DATES[n+1];if(s==null)return 9999-a[0]+1;let l=s[0]-a[0];return(e.month<s[1]||e.month===s[1]&&e.day<s[2])&&l++,l}getDaysInMonth(e){return super.getDaysInMonth($62225008020f0a13$var$toGregorian(e))}getMinimumMonthInYear(e){let n=$62225008020f0a13$var$getMinimums(e);return n?n[1]:1}getMinimumDayInMonth(e){let n=$62225008020f0a13$var$getMinimums(e);return n&&e.month===n[1]?n[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function $62225008020f0a13$var$getMinimums(o){if(o.year===1){let e=$62225008020f0a13$var$ERA_NAMES.indexOf(o.era);return $62225008020f0a13$var$ERA_START_DATES[e]}}const $8d73d47422ca7302$var$BUDDHIST_ERA_START=-543;class $8d73d47422ca7302$export$42d20a78301dee44 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n.era,n.year);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a-$8d73d47422ca7302$var$BUDDHIST_ERA_START,n.month,n.day)}toJulianDay(e){return super.toJulianDay($8d73d47422ca7302$var$toGregorian(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth($8d73d47422ca7302$var$toGregorian(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function $8d73d47422ca7302$var$toGregorian(o){let[e,n]=$3b62074eb05584b2$export$4475b7e617eb123c(o.year+$8d73d47422ca7302$var$BUDDHIST_ERA_START);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,n,o.month,o.day)}const $5f31bd6f0c8940b2$var$TAIWAN_ERA_START=1911;function $5f31bd6f0c8940b2$var$gregorianYear(o){return o.era==="minguo"?o.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START:1-o.year+$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}function $5f31bd6f0c8940b2$var$gregorianToTaiwan(o){let e=o-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START;return e>0?["minguo",e]:["before_minguo",1-e]}class $5f31bd6f0c8940b2$export$65e01080afcb0799 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(n.era,n.year),[s,l]=$5f31bd6f0c8940b2$var$gregorianToTaiwan(a);return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,l,n.month,n.day)}toJulianDay(e){return super.toJulianDay($5f31bd6f0c8940b2$var$toGregorian(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[n,a]=$5f31bd6f0c8940b2$var$gregorianToTaiwan($5f31bd6f0c8940b2$var$gregorianYear(e));e.era=n,e.year=a}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth($5f31bd6f0c8940b2$var$toGregorian(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-$5f31bd6f0c8940b2$var$TAIWAN_ERA_START}constructor(...e){super(...e),this.identifier="roc"}}function $5f31bd6f0c8940b2$var$toGregorian(o){let[e,n]=$3b62074eb05584b2$export$4475b7e617eb123c($5f31bd6f0c8940b2$var$gregorianYear(o));return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(e,n,o.month,o.day)}const $f3ed2e4472ae7e25$var$PERSIAN_EPOCH=1948320,$f3ed2e4472ae7e25$var$MONTH_START=[0,31,62,93,124,155,186,216,246,276,306,336];class $f3ed2e4472ae7e25$export$37fccdbfd14c5939{fromJulianDay(e){let n=e-$f3ed2e4472ae7e25$var$PERSIAN_EPOCH,a=1+Math.floor((33*n+3)/12053),s=365*(a-1)+Math.floor((8*a+21)/33),l=n-s,c=l<216?Math.floor(l/31):Math.floor((l-6)/30),d=l-$f3ed2e4472ae7e25$var$MONTH_START[c]+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c+1,d)}toJulianDay(e){let n=$f3ed2e4472ae7e25$var$PERSIAN_EPOCH-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return n+=$f3ed2e4472ae7e25$var$MONTH_START[e.month-1],n+=e.day,n}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||$2b4dce13dd5a17fa$export$842a2cf37af977e1(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const $82c358003bdda0a8$var$INDIAN_ERA_START=78,$82c358003bdda0a8$var$INDIAN_YEAR_START=80;class $82c358003bdda0a8$export$39f31c639fa15726 extends $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(e){let n=super.fromJulianDay(e),a=n.year-$82c358003bdda0a8$var$INDIAN_ERA_START,s=e-$3b62074eb05584b2$export$f297eb839006d339(n.era,n.year,1,1),l;s<$82c358003bdda0a8$var$INDIAN_YEAR_START?(a--,l=$3b62074eb05584b2$export$553d7fa8e3805fc0(n.year-1)?31:30,s+=l+155+90+10):(l=$3b62074eb05584b2$export$553d7fa8e3805fc0(n.year)?31:30,s-=$82c358003bdda0a8$var$INDIAN_YEAR_START);let c,d;if(s<l)c=1,d=s+1;else{let u=s-l;u<155?(c=Math.floor(u/31)+2,d=u%31+1):(u-=155,c=Math.floor(u/30)+7,d=u%30+1)}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,a,c,d)}toJulianDay(e){let n=e.year+$82c358003bdda0a8$var$INDIAN_ERA_START,[a,s]=$3b62074eb05584b2$export$4475b7e617eb123c(n),l,c;return $3b62074eb05584b2$export$553d7fa8e3805fc0(s)?(l=31,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,21)):(l=30,c=$3b62074eb05584b2$export$f297eb839006d339(a,s,3,22)),e.month===1?c+e.day-1:(c+=l+Math.min(e.month-2,5)*31,e.month>=8&&(c+=(e.month-7)*30),c+=e.day-1,c)}getDaysInMonth(e){return e.month===1&&$3b62074eb05584b2$export$553d7fa8e3805fc0(e.year+$82c358003bdda0a8$var$INDIAN_ERA_START)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const $f2f3e0e3a817edbd$var$CIVIL_EPOC=1948440,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC=1948439,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START=1300,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END=1600,$f2f3e0e3a817edbd$var$UMALQURA_START_DAYS=460322;function $f2f3e0e3a817edbd$var$islamicToJulianDay(o,e,n,a){return a+Math.ceil(29.5*(n-1))+(e-1)*354+Math.floor((3+11*e)/30)+o-1}function $f2f3e0e3a817edbd$var$julianDayToIslamic(o,e,n){let a=Math.floor((30*(n-e)+10646)/10631),s=Math.min(12,Math.ceil((n-(29+$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,1,1)))/29.5)+1),l=n-$f2f3e0e3a817edbd$var$islamicToJulianDay(e,a,s,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(o,a,s,l)}function $f2f3e0e3a817edbd$var$isLeapYear(o){return(14+11*o)%30<11}class $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$CIVIL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$CIVIL_EPOC,e.year,e.month,e.day)}getDaysInMonth(e){let n=29+e.month%2;return e.month===12&&$f2f3e0e3a817edbd$var$isLeapYear(e.year)&&n++,n}getMonthsInYear(){return 12}getDaysInYear(e){return $f2f3e0e3a817edbd$var$isLeapYear(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class $f2f3e0e3a817edbd$export$37f0887f2f9d22f7 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){return $f2f3e0e3a817edbd$var$julianDayToIslamic(this,$f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e)}toJulianDay(e){return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const $f2f3e0e3a817edbd$var$UMALQURA_DATA="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH,$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE;function $f2f3e0e3a817edbd$var$umalquraYearStart(o){return $f2f3e0e3a817edbd$var$UMALQURA_START_DAYS+$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}function $f2f3e0e3a817edbd$var$umalquraMonthLength(o,e){let n=o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START,a=1<<11-(e-1);return $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH[n]&a?30:29}function $f2f3e0e3a817edbd$var$umalquraMonthStart(o,e){let n=$f2f3e0e3a817edbd$var$umalquraYearStart(o);for(let a=1;a<e;a++)n+=$f2f3e0e3a817edbd$var$umalquraMonthLength(o,a);return n}function $f2f3e0e3a817edbd$var$umalquraYearLength(o){return $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o+1-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[o-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]}class $f2f3e0e3a817edbd$export$5baab4758c231076 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc{fromJulianDay(e){let n=e-$f2f3e0e3a817edbd$var$CIVIL_EPOC,a=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_START),s=$f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END);if(n<a||n>s)return super.fromJulianDay(e);{let l=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START-1,c=1,d=1;for(;d>0;){l++,d=n-$f2f3e0e3a817edbd$var$umalquraYearStart(l)+1;let u=$f2f3e0e3a817edbd$var$umalquraYearLength(l);if(d===u){c=12;break}else if(d<u){let f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);for(c=1;d>f;)d-=f,c++,f=$f2f3e0e3a817edbd$var$umalquraMonthLength(l,c);break}}return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,c,n-$f2f3e0e3a817edbd$var$umalquraMonthStart(l,c)+1)}}toJulianDay(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.toJulianDay(e):$f2f3e0e3a817edbd$var$CIVIL_EPOC+$f2f3e0e3a817edbd$var$umalquraMonthStart(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInMonth(e):$f2f3e0e3a817edbd$var$umalquraMonthLength(e.year,e.month)}getDaysInYear(e){return e.year<$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START||e.year>$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END?super.getDaysInYear(e):$f2f3e0e3a817edbd$var$umalquraYearLength(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",$f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH||($f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH=new Uint16Array(Uint8Array.from(atob($f2f3e0e3a817edbd$var$UMALQURA_DATA),e=>e.charCodeAt(0)).buffer)),!$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE=new Uint32Array($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START+1);let e=0;for(let n=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START;n<=$f2f3e0e3a817edbd$var$UMALQURA_YEAR_END;n++){$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[n-$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START]=e;for(let a=1;a<=12;a++)e+=$f2f3e0e3a817edbd$var$umalquraMonthLength(n,a)}}}}const $7c5f6fbf42389787$var$HEBREW_EPOCH=347997,$7c5f6fbf42389787$var$HOUR_PARTS=1080,$7c5f6fbf42389787$var$DAY_PARTS=24*$7c5f6fbf42389787$var$HOUR_PARTS,$7c5f6fbf42389787$var$MONTH_DAYS=29,$7c5f6fbf42389787$var$MONTH_FRACT=12*$7c5f6fbf42389787$var$HOUR_PARTS+793,$7c5f6fbf42389787$var$MONTH_PARTS=$7c5f6fbf42389787$var$MONTH_DAYS*$7c5f6fbf42389787$var$DAY_PARTS+$7c5f6fbf42389787$var$MONTH_FRACT;function $7c5f6fbf42389787$var$isLeapYear(o){return $2b4dce13dd5a17fa$export$842a2cf37af977e1(o*7+1,19)<7}function $7c5f6fbf42389787$var$hebrewDelay1(o){let e=Math.floor((235*o-234)/19),n=12084+13753*e,a=e*29+Math.floor(n/25920);return $2b4dce13dd5a17fa$export$842a2cf37af977e1(3*(a+1),7)<3&&(a+=1),a}function $7c5f6fbf42389787$var$hebrewDelay2(o){let e=$7c5f6fbf42389787$var$hebrewDelay1(o-1),n=$7c5f6fbf42389787$var$hebrewDelay1(o);return $7c5f6fbf42389787$var$hebrewDelay1(o+1)-n===356?2:n-e===382?1:0}function $7c5f6fbf42389787$var$startOfYear(o){return $7c5f6fbf42389787$var$hebrewDelay1(o)+$7c5f6fbf42389787$var$hebrewDelay2(o)}function $7c5f6fbf42389787$var$getDaysInYear(o){return $7c5f6fbf42389787$var$startOfYear(o+1)-$7c5f6fbf42389787$var$startOfYear(o)}function $7c5f6fbf42389787$var$getYearType(o){let e=$7c5f6fbf42389787$var$getDaysInYear(o);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function $7c5f6fbf42389787$var$getDaysInMonth(o,e){if(e>=6&&!$7c5f6fbf42389787$var$isLeapYear(o)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let n=$7c5f6fbf42389787$var$getYearType(o);return e===2?n===2?30:29:e===3?n===0?29:30:e===6?$7c5f6fbf42389787$var$isLeapYear(o)?30:0:30}class $7c5f6fbf42389787$export$ca405048b8fb5af{fromJulianDay(e){let n=e-$7c5f6fbf42389787$var$HEBREW_EPOCH,a=n*$7c5f6fbf42389787$var$DAY_PARTS/$7c5f6fbf42389787$var$MONTH_PARTS,s=Math.floor((19*a+234)/235)+1,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(n-l);for(;c<1;)s--,l=$7c5f6fbf42389787$var$startOfYear(s),c=Math.floor(n-l);let d=1,u=0;for(;u<c;)u+=$7c5f6fbf42389787$var$getDaysInMonth(s,d),d++;d--,u-=$7c5f6fbf42389787$var$getDaysInMonth(s,d);let f=c-u;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,s,d,f)}toJulianDay(e){let n=$7c5f6fbf42389787$var$startOfYear(e.year);for(let a=1;a<e.month;a++)n+=$7c5f6fbf42389787$var$getDaysInMonth(e.year,a);return n+e.day+$7c5f6fbf42389787$var$HEBREW_EPOCH}getDaysInMonth(e){return $7c5f6fbf42389787$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(e){return $7c5f6fbf42389787$var$isLeapYear(e.year)?13:12}getDaysInYear(e){return $7c5f6fbf42389787$var$getDaysInYear(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,n){n.year!==e.year&&($7c5f6fbf42389787$var$isLeapYear(n.year)&&!$7c5f6fbf42389787$var$isLeapYear(e.year)&&n.month>6?e.month--:!$7c5f6fbf42389787$var$isLeapYear(n.year)&&$7c5f6fbf42389787$var$isLeapYear(e.year)&&n.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const $b956b2d7a6cf451f$var$ETHIOPIC_EPOCH=1723856,$b956b2d7a6cf451f$var$COPTIC_EPOCH=1824665,$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA=5500;function $b956b2d7a6cf451f$var$ceToJulianDay(o,e,n,a){return o+365*e+Math.floor(e/4)+30*(n-1)+a-1}function $b956b2d7a6cf451f$var$julianDayToCE(o,e){let n=Math.floor(4*(e-o)/1461),a=1+Math.floor((e-$b956b2d7a6cf451f$var$ceToJulianDay(o,n,1,1))/30),s=e+1-$b956b2d7a6cf451f$var$ceToJulianDay(o,n,a,1);return[n,a,s]}function $b956b2d7a6cf451f$var$getLeapDay(o){return Math.floor(o%4/3)}function $b956b2d7a6cf451f$var$getDaysInMonth(o,e){return e%13!==0?30:$b956b2d7a6cf451f$var$getLeapDay(o)+5}class $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e),l="AM";return n<=0&&(l="AA",n+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,n,a,s)}toJulianDay(e){let n=e.year;return e.era==="AA"&&(n-=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,n,e.month,e.day)}getDaysInMonth(e){return $b956b2d7a6cf451f$var$getDaysInMonth(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+$b956b2d7a6cf451f$var$getLeapDay(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class $b956b2d7a6cf451f$export$d72e0c37005a4914 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$ETHIOPIC_EPOCH,e);return n+=$b956b2d7a6cf451f$var$AMETE_MIHRET_DELTA,new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,"AA",n,a,s)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1 extends $b956b2d7a6cf451f$export$26ba6eab5e20cd7d{fromJulianDay(e){let[n,a,s]=$b956b2d7a6cf451f$var$julianDayToCE($b956b2d7a6cf451f$var$COPTIC_EPOCH,e),l="CE";return n<=0&&(l="BCE",n=1-n),new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this,l,n,a,s)}toJulianDay(e){let n=e.year;return e.era==="BCE"&&(n=1-n),$b956b2d7a6cf451f$var$ceToJulianDay($b956b2d7a6cf451f$var$COPTIC_EPOCH,n,e.month,e.day)}getDaysInMonth(e){let n=e.year;return e.era==="BCE"&&(n=1-n),$b956b2d7a6cf451f$var$getDaysInMonth(n,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function $64244302c3013299$export$dd0bbc9b26defe37(o){switch(o){case"buddhist":return new $8d73d47422ca7302$export$42d20a78301dee44;case"ethiopic":return new $b956b2d7a6cf451f$export$26ba6eab5e20cd7d;case"ethioaa":return new $b956b2d7a6cf451f$export$d72e0c37005a4914;case"coptic":return new $b956b2d7a6cf451f$export$fe6243cbe1a4b7c1;case"hebrew":return new $7c5f6fbf42389787$export$ca405048b8fb5af;case"indian":return new $82c358003bdda0a8$export$39f31c639fa15726;case"islamic-civil":return new $f2f3e0e3a817edbd$export$2066795aadd37bfc;case"islamic-tbla":return new $f2f3e0e3a817edbd$export$37f0887f2f9d22f7;case"islamic-umalqura":return new $f2f3e0e3a817edbd$export$5baab4758c231076;case"japanese":return new $62225008020f0a13$export$b746ab2b60cdffbf;case"persian":return new $f3ed2e4472ae7e25$export$37fccdbfd14c5939;case"roc":return new $5f31bd6f0c8940b2$export$65e01080afcb0799;case"gregory":default:return new $3b62074eb05584b2$export$80ee6245ec4f29ec}}let $fb18d541ea1ad717$var$formatterCache=new Map;class $fb18d541ea1ad717$export$ad991b66133851cf{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,n){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} \u2013 ${this.formatter.format(n)}`}formatRangeToParts(e,n){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let a=this.formatter.formatToParts(e),s=this.formatter.formatToParts(n);return[...a.map(l=>({...l,source:"startRange"})),{type:"literal",value:" \u2013 ",source:"shared"},...s.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle()&&(this.resolvedHourCycle||(this.resolvedHourCycle=$fb18d541ea1ad717$var$getResolvedHourCycle(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,n={}){this.formatter=$fb18d541ea1ad717$var$getCachedDateFormatter(e,n),this.options=n}}const $fb18d541ea1ad717$var$hour12Preferences={true:{ja:"h11"},false:{}};function $fb18d541ea1ad717$var$getCachedDateFormatter(o,e={}){if(typeof e.hour12=="boolean"&&$fb18d541ea1ad717$var$hasBuggyHour12Behavior()){e={...e};let s=$fb18d541ea1ad717$var$hour12Preferences[String(e.hour12)][o.split("-")[0]],l=e.hour12?"h12":"h23";e.hourCycle=s??l,delete e.hour12}let n=o+(e?Object.entries(e).sort((s,l)=>s[0]<l[0]?-1:1).join():"");if($fb18d541ea1ad717$var$formatterCache.has(n))return $fb18d541ea1ad717$var$formatterCache.get(n);let a=new Intl.DateTimeFormat(o,e);return $fb18d541ea1ad717$var$formatterCache.set(n,a),a}let $fb18d541ea1ad717$var$_hasBuggyHour12Behavior=null;function $fb18d541ea1ad717$var$hasBuggyHour12Behavior(){return $fb18d541ea1ad717$var$_hasBuggyHour12Behavior==null&&($fb18d541ea1ad717$var$_hasBuggyHour12Behavior=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),$fb18d541ea1ad717$var$_hasBuggyHour12Behavior}let $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=null;function $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle(){return $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle==null&&($fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),$fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle}function $fb18d541ea1ad717$var$getResolvedHourCycle(o,e){if(!e.timeStyle&&!e.hour)return;o=o.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),o+=(o.includes("-u-")?"":"-u")+"-nu-latn";let n=$fb18d541ea1ad717$var$getCachedDateFormatter(o,{...e,timeZone:void 0}),a=parseInt(n.formatToParts(new Date(2020,2,3,0)).find(l=>l.type==="hour").value,10),s=parseInt(n.formatToParts(new Date(2020,2,3,23)).find(l=>l.type==="hour").value,10);if(a===0&&s===23)return"h23";if(a===24&&s===23)return"h24";if(a===0&&s===11)return"h11";if(a===12&&s===11)return"h12";throw new Error("Unexpected hour cycle result")}function N$1(o,e){const n=[];for(let a=0;a<o.length;a+=e)n.push(o.slice(a,a+e));return n}function $$1(o,e=$14e0f24ef4ac5c92$export$aa8b41735afcabd2()){return m(o)?o.toDate():o.toDate(e)}function w(o){return o instanceof $35ea8db9cb2ccb90$export$ca871e8dbb80966f}function m(o){return o instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea}function z$1(o){return w(o)||m(o)}function R$1(o){if(o instanceof Date){const e=o.getFullYear(),n=o.getMonth()+1;return new Date(e,n,0).getDate()}else return o.set({day:100}).day}function q$1(o,e){return o.compare(e)<0}function P(o,e){return o.compare(e)>0}function H(o,e,n){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,n);return e>a?o.subtract({days:a+7-e}):e===a?o:o.subtract({days:a-e})}function J(o,e,n){const a=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(o,n),s=e===0?6:e-1;return a===s?o:a>s?o.add({days:7-a+s}):o.add({days:s-a})}function A(o,e){const n=[];let a=o.add({days:1});const s=e;for(;a.compare(s)<0;)n.push(a),a=a.add({days:1});return n}function y(o){const{dateObj:e,weekStartsOn:n,fixedWeeks:a,locale:s}=o,l=R$1(e),c=Array.from({length:l},(B,M)=>e.set({day:M+1})),d=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(e),u=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e),f=H(d,n,s),v=J(u,n,s),b=A(f.subtract({days:1}),d),k=A(u,v.add({days:1})),x=b.length+c.length+k.length;if(a&&x<42){const B=42-x;let M=k[k.length-1];M||(M=$14e0f24ef4ac5c92$export$a2258d9c4118825c(e));const I=Array.from({length:B},(F,V)=>{const L=V+1;return M.add({days:L})});k.push(...I)}const _=b.concat(c,k),E=N$1(_,7);return{value:e,cells:_,rows:E}}function rt$1(o){const{numberOfMonths:e,dateObj:n,...a}=o,s=[];if(!e||e===1)return s.push(y({...a,dateObj:n})),s;s.push(y({...a,dateObj:n}));for(let l=1;l<e;l++){const c=n.add({months:l});s.push(y({...a,dateObj:c}))}return s}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(o,e,n){return max(o,min(e,n))}function evaluate(o,e){return typeof o=="function"?o(e):o}function getSide$1(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}function getSideAxis(o){return["top","bottom"].includes(getSide$1(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,e,n){n===void 0&&(n=!1);const a=getAlignment(o),s=getAlignmentAxis(o),l=getAxisLength(s);let c=s==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=getOppositePlacement(c)),[c,getOppositePlacement(c)]}function getExpandedPlacements(o){const e=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(o,e,n){const a=["left","right"],s=["right","left"],l=["top","bottom"],c=["bottom","top"];switch(o){case"top":case"bottom":return n?e?s:a:e?a:s;case"left":case"right":return e?l:c;default:return[]}}function getOppositeAxisPlacements(o,e,n,a){const s=getAlignment(o);let l=getSideList(getSide$1(o),n==="start",a);return s&&(l=l.map(c=>c+"-"+s),e&&(l=l.concat(l.map(getOppositeAlignmentPlacement)))),l}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:e,y:n,width:a,height:s}=o;return{width:a,height:s,top:n,left:e,right:e+a,bottom:n+s,x:e,y:n}}function computeCoordsFromPlacement(o,e,n){let{reference:a,floating:s}=o;const l=getSideAxis(e),c=getAlignmentAxis(e),d=getAxisLength(c),u=getSide$1(e),f=l==="y",v=a.x+a.width/2-s.width/2,b=a.y+a.height/2-s.height/2,k=a[d]/2-s[d]/2;let x;switch(u){case"top":x={x:v,y:a.y-s.height};break;case"bottom":x={x:v,y:a.y+a.height};break;case"right":x={x:a.x+a.width,y:b};break;case"left":x={x:a.x-s.width,y:b};break;default:x={x:a.x,y:a.y}}switch(getAlignment(e)){case"start":x[c]-=k*(n&&f?-1:1);break;case"end":x[c]+=k*(n&&f?-1:1);break}return x}const computePosition$1=async(o,e,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:l=[],platform:c}=n,d=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:o,floating:e,strategy:s}),{x:v,y:b}=computeCoordsFromPlacement(f,a,u),k=a,x={},_=0;for(let E=0;E<d.length;E++){const{name:B,fn:M}=d[E],{x:I,y:F,data:V,reset:L}=await M({x:v,y:b,initialPlacement:a,placement:k,strategy:s,middlewareData:x,rects:f,platform:c,elements:{reference:o,floating:e}});v=I??v,b=F??b,x={...x,[B]:{...x[B],...V}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(k=L.placement),L.rects&&(f=L.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:s}):L.rects),{x:v,y:b}=computeCoordsFromPlacement(f,k,u)),E=-1)}return{x:v,y:b,placement:k,strategy:s,middlewareData:x}};async function detectOverflow(o,e){var n;e===void 0&&(e={});const{x:a,y:s,platform:l,rects:c,elements:d,strategy:u}=o,{boundary:f="clippingAncestors",rootBoundary:v="viewport",elementContext:b="floating",altBoundary:k=!1,padding:x=0}=evaluate(e,o),_=getPaddingObject(x),E=d[k?b==="floating"?"reference":"floating":b],B=rectToClientRect(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(E)))==null||n?E:E.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:f,rootBoundary:v,strategy:u})),M=b==="floating"?{x:a,y:s,width:c.floating.width,height:c.floating.height}:c.reference,I=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),F=await(l.isElement==null?void 0:l.isElement(I))?await(l.getScale==null?void 0:l.getScale(I))||{x:1,y:1}:{x:1,y:1},V=rectToClientRect(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:M,offsetParent:I,strategy:u}):M);return{top:(B.top-V.top+_.top)/F.y,bottom:(V.bottom-B.bottom+_.bottom)/F.y,left:(B.left-V.left+_.left)/F.x,right:(V.right-B.right+_.right)/F.x}}const arrow$2=o=>({name:"arrow",options:o,async fn(e){const{x:n,y:a,placement:s,rects:l,platform:c,elements:d,middlewareData:u}=e,{element:f,padding:v=0}=evaluate(o,e)||{};if(f==null)return{};const b=getPaddingObject(v),k={x:n,y:a},x=getAlignmentAxis(s),_=getAxisLength(x),E=await c.getDimensions(f),B=x==="y",M=B?"top":"left",I=B?"bottom":"right",F=B?"clientHeight":"clientWidth",V=l.reference[_]+l.reference[x]-k[x]-l.floating[_],L=k[x]-l.reference[x],U=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let j=U?U[F]:0;(!j||!await(c.isElement==null?void 0:c.isElement(U)))&&(j=d.floating[F]||l.floating[_]);const oe=V/2-L/2,Y=j/2-E[_]/2-1,K=min(b[M],Y),W=min(b[I],Y),G=K,ce=j-E[_]-W,se=j/2-E[_]/2+oe,me=clamp(G,se,ce),ge=!u.arrow&&getAlignment(s)!=null&&se!==me&&l.reference[_]/2-(se<G?K:W)-E[_]/2<0,Te=ge?se<G?se-G:se-ce:0;return{[x]:k[x]+Te,data:{[x]:me,centerOffset:se-me-Te,...ge&&{alignmentOffset:Te}},reset:ge}}}),flip$1=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var n,a;const{placement:s,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:f}=e,{mainAxis:v=!0,crossAxis:b=!0,fallbackPlacements:k,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...B}=evaluate(o,e);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const M=getSide$1(s),I=getSideAxis(d),F=getSide$1(d)===d,V=await(u.isRTL==null?void 0:u.isRTL(f.floating)),L=k||(F||!E?[getOppositePlacement(d)]:getExpandedPlacements(d)),U=_!=="none";!k&&U&&L.push(...getOppositeAxisPlacements(d,E,_,V));const j=[d,...L],oe=await detectOverflow(e,B),Y=[];let K=((a=l.flip)==null?void 0:a.overflows)||[];if(v&&Y.push(oe[M]),b){const se=getAlignmentSides(s,c,V);Y.push(oe[se[0]],oe[se[1]])}if(K=[...K,{placement:s,overflows:Y}],!Y.every(se=>se<=0)){var W,G;const se=(((W=l.flip)==null?void 0:W.index)||0)+1,me=j[se];if(me)return{data:{index:se,overflows:K},reset:{placement:me}};let ge=(G=K.filter(Te=>Te.overflows[0]<=0).sort((Te,Be)=>Te.overflows[1]-Be.overflows[1])[0])==null?void 0:G.placement;if(!ge)switch(x){case"bestFit":{var ce;const Te=(ce=K.filter(Be=>{if(U){const Ge=getSideAxis(Be.placement);return Ge===I||Ge==="y"}return!0}).map(Be=>[Be.placement,Be.overflows.filter(Ge=>Ge>0).reduce((Ge,We)=>Ge+We,0)]).sort((Be,Ge)=>Be[1]-Ge[1])[0])==null?void 0:ce[0];Te&&(ge=Te);break}case"initialPlacement":ge=d;break}if(s!==ge)return{reset:{placement:ge}}}return{}}}};function getSideOffsets(o,e){return{top:o.top-e.height,right:o.right-e.width,bottom:o.bottom-e.height,left:o.left-e.width}}function isAnySideFullyClipped(o){return sides.some(e=>o[e]>=0)}const hide$1=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(e){const{rects:n}=e,{strategy:a="referenceHidden",...s}=evaluate(o,e);switch(a){case"referenceHidden":{const l=await detectOverflow(e,{...s,elementContext:"reference"}),c=getSideOffsets(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:isAnySideFullyClipped(c)}}}case"escaped":{const l=await detectOverflow(e,{...s,altBoundary:!0}),c=getSideOffsets(l,n.floating);return{data:{escapedOffsets:c,escaped:isAnySideFullyClipped(c)}}}default:return{}}}}};async function convertValueToCoords(o,e){const{placement:n,platform:a,elements:s}=o,l=await(a.isRTL==null?void 0:a.isRTL(s.floating)),c=getSide$1(n),d=getAlignment(n),u=getSideAxis(n)==="y",f=["left","top"].includes(c)?-1:1,v=l&&u?-1:1,b=evaluate(e,o);let{mainAxis:k,crossAxis:x,alignmentAxis:_}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return d&&typeof _=="number"&&(x=d==="end"?_*-1:_),u?{x:x*v,y:k*f}:{x:k*f,y:x*v}}const offset$1=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var n,a;const{x:s,y:l,placement:c,middlewareData:d}=e,u=await convertValueToCoords(e,o);return c===((n=d.offset)==null?void 0:n.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:s+u.x,y:l+u.y,data:{...u,placement:c}}}}},shift$2=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:n,y:a,placement:s}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:B=>{let{x:M,y:I}=B;return{x:M,y:I}}},...u}=evaluate(o,e),f={x:n,y:a},v=await detectOverflow(e,u),b=getSideAxis(getSide$1(s)),k=getOppositeAxis(b);let x=f[k],_=f[b];if(l){const B=k==="y"?"top":"left",M=k==="y"?"bottom":"right",I=x+v[B],F=x-v[M];x=clamp(I,x,F)}if(c){const B=b==="y"?"top":"left",M=b==="y"?"bottom":"right",I=_+v[B],F=_-v[M];_=clamp(I,_,F)}const E=d.fn({...e,[k]:x,[b]:_});return{...E,data:{x:E.x-n,y:E.y-a,enabled:{[k]:l,[b]:c}}}}}},limitShift$1=function(o){return o===void 0&&(o={}),{options:o,fn(e){const{x:n,y:a,placement:s,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:u=!0,crossAxis:f=!0}=evaluate(o,e),v={x:n,y:a},b=getSideAxis(s),k=getOppositeAxis(b);let x=v[k],_=v[b];const E=evaluate(d,e),B=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(u){const F=k==="y"?"height":"width",V=l.reference[k]-l.floating[F]+B.mainAxis,L=l.reference[k]+l.reference[F]-B.mainAxis;x<V?x=V:x>L&&(x=L)}if(f){var M,I;const F=k==="y"?"width":"height",V=["top","left"].includes(getSide$1(s)),L=l.reference[b]-l.floating[F]+(V&&((M=c.offset)==null?void 0:M[b])||0)+(V?0:B.crossAxis),U=l.reference[b]+l.reference[F]+(V?0:((I=c.offset)==null?void 0:I[b])||0)-(V?B.crossAxis:0);_<L?_=L:_>U&&(_=U)}return{[k]:x,[b]:_}}}},size$1=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){var n,a;const{placement:s,rects:l,platform:c,elements:d}=e,{apply:u=()=>{},...f}=evaluate(o,e),v=await detectOverflow(e,f),b=getSide$1(s),k=getAlignment(s),x=getSideAxis(s)==="y",{width:_,height:E}=l.floating;let B,M;b==="top"||b==="bottom"?(B=b,M=k===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(M=b,B=k==="end"?"top":"bottom");const I=E-v.top-v.bottom,F=_-v.left-v.right,V=min(E-v[B],I),L=min(_-v[M],F),U=!e.middlewareData.shift;let j=V,oe=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(oe=F),(a=e.middlewareData.shift)!=null&&a.enabled.y&&(j=I),U&&!k){const K=max(v.left,0),W=max(v.right,0),G=max(v.top,0),ce=max(v.bottom,0);x?oe=_-2*(K!==0||W!==0?K+W:max(v.left,v.right)):j=E-2*(G!==0||ce!==0?G+ce:max(v.top,v.bottom))}await u({...e,availableWidth:oe,availableHeight:j});const Y=await c.getDimensions(d.floating);return _!==Y.width||E!==Y.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(o){return isNode(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var e;return(o==null||(e=o.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(o){var e;return(e=(isNode(o)?o.ownerDocument:o.document)||window.document)==null?void 0:e.documentElement}function isNode(o){return hasWindow()?o instanceof Node||o instanceof getWindow(o).Node:!1}function isElement(o){return hasWindow()?o instanceof Element||o instanceof getWindow(o).Element:!1}function isHTMLElement(o){return hasWindow()?o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement:!1}function isShadowRoot(o){return!hasWindow()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot}function isOverflowElement(o){const{overflow:e,overflowX:n,overflowY:a,display:s}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!["inline","contents"].includes(s)}function isTableElement(o){return["table","td","th"].includes(getNodeName(o))}function isTopLayer(o){return[":popover-open",":modal"].some(e=>{try{return o.matches(e)}catch{return!1}})}function isContainingBlock(o){const e=isWebKit(),n=isElement(o)?getComputedStyle$1(o):o;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function getContainingBlock(o){let e=getParentNode(o);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(o){return["html","body","#document"].includes(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function getParentNode(o){if(getNodeName(o)==="html")return o;const e=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement(o);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(o){const e=getParentNode(o);return isLastTraversableNode(e)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(o,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=getNearestOverflowAncestor(o),l=s===((a=o.ownerDocument)==null?void 0:a.body),c=getWindow(s);if(l){const d=getFrameElement(c);return e.concat(c,c.visualViewport||[],isOverflowElement(s)?s:[],d&&n?getOverflowAncestors(d):[])}return e.concat(s,getOverflowAncestors(s,[],n))}function getFrameElement(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}function getCssDimensions(o){const e=getComputedStyle$1(o);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const s=isHTMLElement(o),l=s?o.offsetWidth:n,c=s?o.offsetHeight:a,d=round(n)!==l||round(a)!==c;return d&&(n=l,a=c),{width:n,height:a,$:d}}function unwrapElement$1(o){return isElement(o)?o:o.contextElement}function getScale$1(o){const e=unwrapElement$1(o);if(!isHTMLElement(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:a,height:s,$:l}=getCssDimensions(e);let c=(l?round(n.width):n.width)/a,d=(l?round(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const noOffsets=createCoords(0);function getVisualOffsets(o){const e=getWindow(o);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(o,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow(o)?!1:e}function getBoundingClientRect(o,e,n,a){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=o.getBoundingClientRect(),l=unwrapElement$1(o);let c=createCoords(1);e&&(a?isElement(a)&&(c=getScale$1(a)):c=getScale$1(o));const d=shouldAddVisualOffsets(l,n,a)?getVisualOffsets(l):createCoords(0);let u=(s.left+d.x)/c.x,f=(s.top+d.y)/c.y,v=s.width/c.x,b=s.height/c.y;if(l){const k=getWindow(l),x=a&&isElement(a)?getWindow(a):a;let _=k,E=getFrameElement(_);for(;E&&a&&x!==_;){const B=getScale$1(E),M=E.getBoundingClientRect(),I=getComputedStyle$1(E),F=M.left+(E.clientLeft+parseFloat(I.paddingLeft))*B.x,V=M.top+(E.clientTop+parseFloat(I.paddingTop))*B.y;u*=B.x,f*=B.y,v*=B.x,b*=B.y,u+=F,f+=V,_=getWindow(E),E=getFrameElement(_)}}return rectToClientRect({width:v,height:b,x:u,y:f})}function getWindowScrollBarX(o,e){const n=getNodeScroll(o).scrollLeft;return e?e.left+n:getBoundingClientRect(getDocumentElement(o)).left+n}function getHTMLOffset(o,e,n){n===void 0&&(n=!1);const a=o.getBoundingClientRect(),s=a.left+e.scrollLeft-(n?0:getWindowScrollBarX(o,a)),l=a.top+e.scrollTop;return{x:s,y:l}}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:e,rect:n,offsetParent:a,strategy:s}=o;const l=s==="fixed",c=getDocumentElement(a),d=e?isTopLayer(e.floating):!1;if(a===c||d&&l)return n;let u={scrollLeft:0,scrollTop:0},f=createCoords(1);const v=createCoords(0),b=isHTMLElement(a);if((b||!b&&!l)&&((getNodeName(a)!=="body"||isOverflowElement(c))&&(u=getNodeScroll(a)),isHTMLElement(a))){const x=getBoundingClientRect(a);f=getScale$1(a),v.x=x.x+a.clientLeft,v.y=x.y+a.clientTop}const k=c&&!b&&!l?getHTMLOffset(c,u,!0):createCoords(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+v.x+k.x,y:n.y*f.y-u.scrollTop*f.y+v.y+k.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getDocumentRect(o){const e=getDocumentElement(o),n=getNodeScroll(o),a=o.ownerDocument.body,s=max(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),l=max(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-n.scrollLeft+getWindowScrollBarX(o);const d=-n.scrollTop;return getComputedStyle$1(a).direction==="rtl"&&(c+=max(e.clientWidth,a.clientWidth)-s),{width:s,height:l,x:c,y:d}}function getViewportRect(o,e){const n=getWindow(o),a=getDocumentElement(o),s=n.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,u=0;if(s){l=s.width,c=s.height;const f=isWebKit();(!f||f&&e==="fixed")&&(d=s.offsetLeft,u=s.offsetTop)}return{width:l,height:c,x:d,y:u}}function getInnerBoundingClientRect(o,e){const n=getBoundingClientRect(o,!0,e==="fixed"),a=n.top+o.clientTop,s=n.left+o.clientLeft,l=isHTMLElement(o)?getScale$1(o):createCoords(1),c=o.clientWidth*l.x,d=o.clientHeight*l.y,u=s*l.x,f=a*l.y;return{width:c,height:d,x:u,y:f}}function getClientRectFromClippingAncestor(o,e,n){let a;if(e==="viewport")a=getViewportRect(o,n);else if(e==="document")a=getDocumentRect(getDocumentElement(o));else if(isElement(e))a=getInnerBoundingClientRect(e,n);else{const s=getVisualOffsets(o);a={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rectToClientRect(a)}function hasFixedPositionAncestor(o,e){const n=getParentNode(o);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(o,e){const n=e.get(o);if(n)return n;let a=getOverflowAncestors(o,[],!1).filter(d=>isElement(d)&&getNodeName(d)!=="body"),s=null;const l=getComputedStyle$1(o).position==="fixed";let c=l?getParentNode(o):o;for(;isElement(c)&&!isLastTraversableNode(c);){const d=getComputedStyle$1(c),u=isContainingBlock(c);!u&&d.position==="fixed"&&(s=null),(l?!u&&!s:!u&&d.position==="static"&&s&&["absolute","fixed"].includes(s.position)||isOverflowElement(c)&&!u&&hasFixedPositionAncestor(o,c))?a=a.filter(f=>f!==c):s=d,c=getParentNode(c)}return e.set(o,a),a}function getClippingRect(o){let{element:e,boundary:n,rootBoundary:a,strategy:s}=o;const l=[...n==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(n),a],c=l[0],d=l.reduce((u,f)=>{const v=getClientRectFromClippingAncestor(e,f,s);return u.top=max(v.top,u.top),u.right=min(v.right,u.right),u.bottom=min(v.bottom,u.bottom),u.left=max(v.left,u.left),u},getClientRectFromClippingAncestor(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function getDimensions(o){const{width:e,height:n}=getCssDimensions(o);return{width:e,height:n}}function getRectRelativeToOffsetParent(o,e,n){const a=isHTMLElement(e),s=getDocumentElement(e),l=n==="fixed",c=getBoundingClientRect(o,!0,l,e);let d={scrollLeft:0,scrollTop:0};const u=createCoords(0);if(a||!a&&!l)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(d=getNodeScroll(e)),a){const k=getBoundingClientRect(e,!0,l,e);u.x=k.x+e.clientLeft,u.y=k.y+e.clientTop}else s&&(u.x=getWindowScrollBarX(s));const f=s&&!a&&!l?getHTMLOffset(s,d):createCoords(0),v=c.left+d.scrollLeft-u.x-f.x,b=c.top+d.scrollTop-u.y-f.y;return{x:v,y:b,width:c.width,height:c.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,e){if(!isHTMLElement(o)||getComputedStyle$1(o).position==="fixed")return null;if(e)return e(o);let n=o.offsetParent;return getDocumentElement(o)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(o,e){const n=getWindow(o);if(isTopLayer(o))return n;if(!isHTMLElement(o)){let s=getParentNode(o);for(;s&&!isLastTraversableNode(s);){if(isElement(s)&&!isStaticPositioned(s))return s;s=getParentNode(s)}return n}let a=getTrueOffsetParent(o,e);for(;a&&isTableElement(a)&&isStaticPositioned(a);)a=getTrueOffsetParent(a,e);return a&&isLastTraversableNode(a)&&isStaticPositioned(a)&&!isContainingBlock(a)?n:a||getContainingBlock(o)||n}const getElementRects=async function(o){const e=this.getOffsetParent||getOffsetParent,n=this.getDimensions,a=await n(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await e(o.floating),o.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform$2={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement,isRTL};function rectsAreEqual(o,e){return o.x===e.x&&o.y===e.y&&o.width===e.width&&o.height===e.height}function observeMove(o,e){let n=null,a;const s=getDocumentElement(o);function l(){var d;clearTimeout(a),(d=n)==null||d.disconnect(),n=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const f=o.getBoundingClientRect(),{left:v,top:b,width:k,height:x}=f;if(d||e(),!k||!x)return;const _=floor(b),E=floor(s.clientWidth-(v+k)),B=floor(s.clientHeight-(b+x)),M=floor(v),I={rootMargin:-_+"px "+-E+"px "+-B+"px "+-M+"px",threshold:max(0,min(1,u))||1};let F=!0;function V(L){const U=L[0].intersectionRatio;if(U!==u){if(!F)return c();U?c(!1,U):a=setTimeout(()=>{c(!1,1e-7)},1e3)}U===1&&!rectsAreEqual(f,o.getBoundingClientRect())&&c(),F=!1}try{n=new IntersectionObserver(V,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(V,I)}n.observe(o)}return c(!0),l}function autoUpdate(o,e,n,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=a,f=unwrapElement$1(o),v=s||l?[...f?getOverflowAncestors(f):[],...getOverflowAncestors(e)]:[];v.forEach(M=>{s&&M.addEventListener("scroll",n,{passive:!0}),l&&M.addEventListener("resize",n)});const b=f&&d?observeMove(f,n):null;let k=-1,x=null;c&&(x=new ResizeObserver(M=>{let[I]=M;I&&I.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var F;(F=x)==null||F.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?getBoundingClientRect(o):null;u&&B();function B(){const M=getBoundingClientRect(o);E&&!rectsAreEqual(E,M)&&n(),E=M,_=requestAnimationFrame(B)}return n(),()=>{var M;v.forEach(I=>{s&&I.removeEventListener("scroll",n),l&&I.removeEventListener("resize",n)}),b==null||b(),(M=x)==null||M.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const offset=offset$1,shift$1=shift$2,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(o,e,n)=>{const a=new Map,s={platform:platform$2,...n},l={...s.platform,_c:a};return computePosition$1(o,e,{...s,platform:l})};function isComponentPublicInstance(o){return o!=null&&typeof o=="object"&&"$el"in o}function unwrapElement(o){if(isComponentPublicInstance(o)){const e=o.$el;return isNode(e)&&getNodeName(e)==="#comment"?null:e}return o}function toValue(o){return typeof o=="function"?o():unref(o)}function arrow(o){return{name:"arrow",options:o,fn(e){const n=unwrapElement(toValue(o.element));return n==null?{}:arrow$1({element:n,padding:o.padding}).fn(e)}}}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,e){const n=getDPR(o);return Math.round(e*n)/n}function useFloating(o,e,n){n===void 0&&(n={});const a=n.whileElementsMounted,s=computed(()=>{var j;return(j=toValue(n.open))!=null?j:!0}),l=computed(()=>toValue(n.middleware)),c=computed(()=>{var j;return(j=toValue(n.placement))!=null?j:"bottom"}),d=computed(()=>{var j;return(j=toValue(n.strategy))!=null?j:"absolute"}),u=computed(()=>{var j;return(j=toValue(n.transform))!=null?j:!0}),f=computed(()=>unwrapElement(o.value)),v=computed(()=>unwrapElement(e.value)),b=ref(0),k=ref(0),x=ref(d.value),_=ref(c.value),E=shallowRef({}),B=ref(!1),M=computed(()=>{const j={position:x.value,left:"0",top:"0"};if(!v.value)return j;const oe=roundByDPR(v.value,b.value),Y=roundByDPR(v.value,k.value);return u.value?{...j,transform:"translate("+oe+"px, "+Y+"px)",...getDPR(v.value)>=1.5&&{willChange:"transform"}}:{position:x.value,left:oe+"px",top:Y+"px"}});let I;function F(){if(f.value==null||v.value==null)return;const j=s.value;computePosition(f.value,v.value,{middleware:l.value,placement:c.value,strategy:d.value}).then(oe=>{b.value=oe.x,k.value=oe.y,x.value=oe.strategy,_.value=oe.placement,E.value=oe.middlewareData,B.value=j!==!1})}function V(){typeof I=="function"&&(I(),I=void 0)}function L(){if(V(),a===void 0){F();return}if(f.value!=null&&v.value!=null){I=a(f.value,v.value,F);return}}function U(){s.value||(B.value=!1)}return watch([l,c,d,s],F,{flush:"sync"}),watch([f,v],L,{flush:"sync"}),watch(s,U,{flush:"sync"}),getCurrentScope()&&onScopeDispose(V),{x:shallowReadonly(b),y:shallowReadonly(k),strategy:shallowReadonly(x),placement:shallowReadonly(_),middlewareData:shallowReadonly(E),isPositioned:shallowReadonly(B),floatingStyles:M,update:F}}function Q$1(o,e){const n=typeof o=="string"&&!e?`${o}Context`:e,a=Symbol(n);return[s=>{const l=inject(a,s);if(l||l===null)return l;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(o)?`one of the following components: ${o.join(", ")}`:`\`${o}\``}`)},s=>(provide(a,s),s)]}function Wt(o,e,n){const a=n.originalEvent.target,s=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(o,e,{once:!0}),a.dispatchEvent(s)}function jt(o,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,o))}function vt$1(o){return o==null}function qt(o){const{defaultValue:e,defaultPlaceholder:n,granularity:a="day",locale:s="en"}=o;if(Array.isArray(e)&&e.length)return e.at(-1).copy();if(e&&!Array.isArray(e))return e.copy();if(n)return n.copy();const l=new Date,c=l.getFullYear(),d=l.getMonth()+1,u=l.getDate(),f=["hour","minute","second"],v=new $fb18d541ea1ad717$export$ad991b66133851cf(s),b=$64244302c3013299$export$dd0bbc9b26defe37(v.resolvedOptions().calendar);return f.includes(a??"day")?$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(c,d,u,0,0,0),b):$11d87f3f76e88657$export$b4a036af3fc0b032(new $35ea8db9cb2ccb90$export$99faa760c7908e4f(c,d,u),b)}function xl(o){const e=o.querySelector("[data-selected]");if(e)return e.focus();const n=o.querySelector("[data-today]");if(n)return n.focus();const a=o.querySelector("[data-radix-vue-calendar-day]");if(a)return a.focus()}function ei(o,e){var n;const a=shallowRef();return watchEffect(()=>{a.value=o()},{...e,flush:(n=void 0)!=null?n:"sync"}),readonly(a)}function yt(o){return getCurrentScope()?(onScopeDispose(o),!0):!1}function ia(){const o=new Set,e=n=>{o.delete(n)};return{on:n=>{o.add(n);const a=()=>e(n);return yt(a),{off:a}},off:e,trigger:(...n)=>Promise.all(Array.from(o).map(a=>a(...n)))}}function ai(o){let e=!1,n;const a=effectScope(!0);return(...s)=>(e||(n=a.run(()=>o(...s)),e=!0),n)}function Sl(o){let e=0,n,a;const s=()=>{e-=1,a&&e<=0&&(a.stop(),n=void 0,a=void 0)};return(...l)=>(e+=1,n||(a=effectScope(!0),n=a.run(()=>o(...l))),yt(s),n)}function Ke(o){return typeof o=="function"?o():unref(o)}const Ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oi=o=>typeof o<"u",si=Object.prototype.toString,ri=o=>si.call(o)==="[object Object]",Va=()=>{},Ko=ii();function ii(){var o,e;return Ye&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Pl(o,e){function n(...a){return new Promise((s,l)=>{Promise.resolve(o(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return n}function ui(o,e={}){let n,a,s=Va;const l=c=>{clearTimeout(c),s(),s=Va};return c=>{const d=Ke(o),u=Ke(e.maxWait);return n&&l(n),d<=0||u!==void 0&&u<=0?(a&&(l(a),a=null),Promise.resolve(c())):new Promise((f,v)=>{s=e.rejectOnCancel?v:f,u&&!a&&(a=setTimeout(()=>{n&&l(n),a=null,f(c())},u)),n=setTimeout(()=>{a&&l(a),a=null,f(c())},d)})}}function $l(o){return getCurrentInstance()}function It(o,e=1e4){return customRef((n,a)=>{let s=Ke(o),l;const c=()=>setTimeout(()=>{s=Ke(o),a()},Ke(e));return yt(()=>{clearTimeout(l)}),{get(){return n(),s},set(d){s=d,a(),clearTimeout(l),l=c()}}})}function Hn(o,e=200,n={}){return Pl(ui(e,n),o)}function pi(o,e){$l()&&onBeforeUnmount(o,e)}function Wn(o,e,n={}){const{immediate:a=!0}=n,s=ref(!1);let l=null;function c(){l&&(clearTimeout(l),l=null)}function d(){s.value=!1,c()}function u(...f){c(),s.value=!0,l=setTimeout(()=>{s.value=!1,l=null,o(...f)},Ke(e))}return a&&(s.value=!0,Ye&&u()),yt(d),{isPending:readonly(s),start:u,stop:d}}function mi(o=1e3,e={}){const{controls:n=!1,callback:a}=e,s=Wn(a??Va,o,e),l=computed(()=>!s.isPending.value);return n?{ready:l,...s}:l}function hi(o,e,n){const a=watch(o,(...s)=>(nextTick(()=>a()),e(...s)),n);return a}function $e(o){var e;const n=Ke(o);return(e=n==null?void 0:n.$el)!=null?e:n}const Tt=Ye?window:void 0;function Le(...o){let e,n,a,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([n,a,s]=o,e=Tt):[e,n,a,s]=o,!e)return Va;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const l=[],c=()=>{l.forEach(v=>v()),l.length=0},d=(v,b,k,x)=>(v.addEventListener(b,k,x),()=>v.removeEventListener(b,k,x)),u=watch(()=>[$e(e),Ke(s)],([v,b])=>{if(c(),!v)return;const k=ri(b)?{...b}:b;l.push(...n.flatMap(x=>a.map(_=>d(v,x,_,k))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return yt(f),f}function yi(o){return typeof o=="function"?o:typeof o=="string"?e=>e.key===o:Array.isArray(o)?e=>o.includes(e.key):()=>!0}function jn(...o){let e,n,a={};o.length===3?(e=o[0],n=o[1],a=o[2]):o.length===2?typeof o[1]=="object"?(e=!0,n=o[0],a=o[1]):(e=o[0],n=o[1]):(e=!0,n=o[0]);const{target:s=Tt,eventName:l="keydown",passive:c=!1,dedupe:d=!1}=a,u=yi(e);return Le(s,l,f=>{f.repeat&&Ke(d)||u(f)&&n(f)},c)}function ja(){const o=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{o.value=!0},e),o}function Bl(o){const e=ja();return computed(()=>(e.value,!!o()))}function Tl(o,e={}){const{immediate:n=!0,fpsLimit:a=void 0,window:s=Tt}=e,l=ref(!1),c=a?1e3/a:null;let d=0,u=null;function f(k){if(!l.value||!s)return;d||(d=k);const x=k-d;if(c&&x<c){u=s.requestAnimationFrame(f);return}d=k,o({delta:x,timestamp:k}),u=s.requestAnimationFrame(f)}function v(){!l.value&&s&&(l.value=!0,d=0,u=s.requestAnimationFrame(f))}function b(){l.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&v(),yt(b),{isActive:readonly(l),pause:b,resume:v}}function bi(o){return JSON.parse(JSON.stringify(o))}function Je(o,e,n={}){const{window:a=Tt,...s}=n;let l;const c=Bl(()=>a&&"ResizeObserver"in a),d=()=>{l&&(l.disconnect(),l=void 0)},u=computed(()=>Array.isArray(o)?o.map(b=>$e(b)):[$e(o)]),f=watch(u,b=>{if(d(),c.value&&a){l=new ResizeObserver(e);for(const k of b)k&&l.observe(k,s)}},{immediate:!0,flush:"post"}),v=()=>{d(),f()};return yt(v),{isSupported:c,stop:v}}function ne$1(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=n||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;e||(e="modelValue"),E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):bi(F):F,M=()=>oi(o[e])?B(o[e]):b,I=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),V=ref(F);let L=!1;return watch(()=>o[e],U=>{L||(L=!0,V.value=B(U),nextTick(()=>L=!1))}),watch(V,U=>{!L&&(U!==o[e]||v)&&I(U)},{deep:v}),V}else return computed({get(){return M()},set(F){I(F)}})}function Ua(o){return o?o.flatMap(e=>e.type===Fragment$1?Ua(e.children):[e]):[]}const _i$1=["INPUT","TEXTAREA"];function Rt(o,e,n,a={}){if(!e||a.enableIgnoredElement&&_i$1.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:l="[data-radix-vue-collection-item]",itemsArray:c=[],loop:d=!0,dir:u="ltr",preventScroll:f=!0,focus:v=!1}=a,[b,k,x,_,E,B]=[o.key==="ArrowRight",o.key==="ArrowLeft",o.key==="ArrowUp",o.key==="ArrowDown",o.key==="Home",o.key==="End"],M=x||_,I=b||k;if(!E&&!B&&(!M&&!I||s==="vertical"&&I||s==="horizontal"&&M))return null;const F=n?Array.from(n.querySelectorAll(l)):c;if(!F.length)return null;f&&o.preventDefault();let V=null;return I||M?V=Al(F,e,{goForward:M?_:u==="ltr"?b:k,loop:d}):E?V=F.at(0)||null:B&&(V=F.at(-1)||null),v&&(V==null||V.focus()),V}function Al(o,e,n,a=o.length){if(--a===0)return null;const s=o.indexOf(e),l=n.goForward?s+1:s-1;if(!n.loop&&(l<0||l>=o.length))return null;const c=(l+o.length)%o.length,d=o[c];return d?d.hasAttribute("disabled")&&d.getAttribute("disabled")!=="false"?Al(o,d,n,a):d:null}function gn(o){if(o===null||typeof o!="object")return!1;const e=Object.getPrototypeOf(o);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in o?!1:Symbol.toStringTag in o?Object.prototype.toString.call(o)==="[object Module]":!0}function Pn(o,e,n=".",a){if(!gn(e))return Pn(o,{},n);const s=Object.assign({},e);for(const l in o){if(l==="__proto__"||l==="constructor")continue;const c=o[l];c!=null&&(Array.isArray(c)&&Array.isArray(s[l])?s[l]=[...c,...s[l]]:gn(c)&&gn(s[l])?s[l]=Pn(c,s[l],(n?`${n}.`:"")+l.toString()):s[l]=c)}return s}function xi(o){return(...e)=>e.reduce((n,a)=>Pn(n,a,""),{})}const Si=xi(),[Ga,Ei]=Q$1("ConfigProvider");let Pi="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Di=(o=21)=>{let e="",n=o;for(;n--;)e+=Pi[Math.random()*64|0];return e};const $i=Sl(()=>{const o=ref(new Map),e=ref(),n=computed(()=>{for(const c of o.value.values())if(c)return!0;return!1}),a=Ga({scrollBody:ref(!0)});let s=null;const l=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Ko&&(s==null||s()),e.value=void 0};return watch(n,(c,d)=>{var u;if(!Ye)return;if(!c){d&&l();return}e.value===void 0&&(e.value=document.body.style.overflow);const f=window.innerWidth-document.documentElement.clientWidth,v={padding:f,margin:0},b=(u=a.scrollBody)!=null&&u.value?typeof a.scrollBody.value=="object"?Si({padding:a.scrollBody.value.padding===!0?f:a.scrollBody.value.padding,margin:a.scrollBody.value.margin===!0?f:a.scrollBody.value.margin},v):v:{padding:0,margin:0};f>0&&(document.body.style.paddingRight=typeof b.padding=="number"?`${b.padding}px`:String(b.padding),document.body.style.marginRight=typeof b.margin=="number"?`${b.margin}px`:String(b.margin),document.body.style.setProperty("--scrollbar-width",`${f}px`),document.body.style.overflow="hidden"),Ko&&(s=Le(document,"touchmove",k=>Bi(k),{passive:!1})),nextTick(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),o});function ha(o){const e=Di(6),n=$i();n.value.set(e,o??!1);const a=computed({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return pi(()=>{n.value.delete(e)}),a}function Ol(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const n=o.parentNode;return!n||n.tagName==="BODY"?!1:Ol(n)}}function Bi(o){const e=o||window.event,n=e.target;return n instanceof Element&&Ol(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const Ii="data-radix-vue-collection-item";function Me(o,e=Ii){const n=Symbol();return{createCollection:a=>{const s=ref([]);function l(){const c=$e(a);return c?s.value=Array.from(c.querySelectorAll(`[${e}]:not([data-disabled])`)):s.value=[]}return onBeforeUpdate(()=>{s.value=[]}),onMounted(l),onUpdated(l),watch(()=>a==null?void 0:a.value,l,{immediate:!0}),provide(n,s),s},injectCollection:()=>inject(n,ref([]))}}function Un(o){const e=ref(o);function n(){return e.value}function a(E){e.value=E}function s(E,B){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,B).format(E)}function l(E,B=!0){return z$1(E)&&B?s($$1(E),{dateStyle:"long",timeStyle:"long"}):s($$1(E),{dateStyle:"long"})}function c(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",year:"numeric",...B}).format(E)}function d(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{month:"long",...B}).format(E)}function u(){const E=$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3($14e0f24ef4ac5c92$export$aa8b41735afcabd2());return[1,2,3,4,5,6,7,8,9,10,11,12].map(B=>({label:d($$1(E.set({month:B}))),value:B}))}function f(E,B={}){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{year:"numeric",...B}).format(E)}function v(E,B){return m(E)?new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{...B,timeZone:E.timeZone}).formatToParts($$1(E)):new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,B).formatToParts($$1(E))}function b(E,B="narrow"){return new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{weekday:B}).format(E)}function k(E){var B;return((B=new $fb18d541ea1ad717$export$ad991b66133851cf(e.value,{hour:"numeric",minute:"numeric"}).formatToParts(E).find(M=>M.type==="dayPeriod"))==null?void 0:B.value)==="PM"?"PM":"AM"}const x={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function _(E,B,M={}){const I={...x,...M},F=v(E,I).find(V=>V.type===B);return F?F.value:""}return{setLocale:a,getLocale:n,fullMonth:d,fullYear:f,fullMonthAndYear:c,toParts:v,custom:s,part:_,dayPeriod:k,selectedDate:l,dayOfWeek:b,getMonths:u}}function be(o){const e=Ga({dir:ref("ltr")});return computed(()=>{var n;return(o==null?void 0:o.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function Ae(o){const e=getCurrentInstance(),n=e==null?void 0:e.type.emits,a={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{a[toHandlerKey(camelize(s))]=(...l)=>o(s,...l)}),a}let bn=0;function Gn(){watchEffect(o=>{if(!Ye)return;const e=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Wo()),document.body.insertAdjacentElement("beforeend",e[1]??Wo()),bn++,o(()=>{bn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),bn--})})}function Wo(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}function Qe(o){return computed(()=>{var e;return Ke(o)?!!((e=$e(o))!=null&&e.closest("form")):!0})}function At(o){const e=getCurrentInstance(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,l)=>{const c=(e==null?void 0:e.type.props[l]).default;return c!==void 0&&(s[l]=c),s},{}),a=toRef$1(o);return computed(()=>{const s={},l=(e==null?void 0:e.vnode.props)??{};return Object.keys(l).forEach(c=>{s[camelize(c)]=l[c]}),Object.keys({...n,...s}).reduce((c,d)=>(a.value[d]!==void 0&&(c[d]=a.value[d]),c),{})})}function xe(o,e){const n=At(o),a=e?Ae(e):{};return computed(()=>({...n.value,...a}))}function R(){const o=getCurrentInstance(),e=ref(),n=computed(()=>{var c,d;return["#text","#comment"].includes((c=e.value)==null?void 0:c.$el.nodeName)?(d=e.value)==null?void 0:d.$el.nextElementSibling:$e(e)}),a=Object.assign({},o.exposed),s={};for(const c in o.props)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>o.props[c]});if(Object.keys(a).length>0)for(const c in a)Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>a[c]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o.vnode.el}),o.exposed=s;function l(c){e.value=c,!(c instanceof Element||!c)&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>c.$el}),o.exposed=s)}return{forwardRef:l,currentRef:e,currentElement:n}}function kl(o,e){const n=It(!1,300),a=ref(null),s=ia();function l(){a.value=null,n.value=!1}function c(d,u){const f=d.currentTarget,v={x:d.clientX,y:d.clientY},b=Ti(v,f.getBoundingClientRect()),k=Ri(v,b),x=Ai(u.getBoundingClientRect()),_=ki([...k,...x]);a.value=_,n.value=!0}return watchEffect(d=>{if(o.value&&e.value){const u=v=>c(v,e.value),f=v=>c(v,o.value);o.value.addEventListener("pointerleave",u),e.value.addEventListener("pointerleave",f),d(()=>{var v,b;(v=o.value)==null||v.removeEventListener("pointerleave",u),(b=e.value)==null||b.removeEventListener("pointerleave",f)})}}),watchEffect(d=>{var u;if(a.value){const f=v=>{var b,k;if(!a.value)return;const x=v.target,_={x:v.clientX,y:v.clientY},E=((b=o.value)==null?void 0:b.contains(x))||((k=e.value)==null?void 0:k.contains(x)),B=!Oi(_,a.value),M=x.hasAttribute("data-grace-area-trigger");E?l():(B||M)&&(l(),s.trigger())};(u=o.value)==null||u.ownerDocument.addEventListener("pointermove",f),d(()=>{var v;return(v=o.value)==null?void 0:v.ownerDocument.removeEventListener("pointermove",f)})}}),{isPointerInTransit:n,onPointerExit:s.on}}function Ti(o,e){const n=Math.abs(e.top-o.y),a=Math.abs(e.bottom-o.y),s=Math.abs(e.right-o.x),l=Math.abs(e.left-o.x);switch(Math.min(n,a,s,l)){case l:return"left";case s:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Ri(o,e,n=5){const a=[];switch(e){case"top":a.push({x:o.x-n,y:o.y+n},{x:o.x+n,y:o.y+n});break;case"bottom":a.push({x:o.x-n,y:o.y-n},{x:o.x+n,y:o.y-n});break;case"left":a.push({x:o.x+n,y:o.y-n},{x:o.x+n,y:o.y+n});break;case"right":a.push({x:o.x-n,y:o.y-n},{x:o.x-n,y:o.y+n});break}return a}function Ai(o){const{top:e,right:n,bottom:a,left:s}=o;return[{x:s,y:e},{x:n,y:e},{x:n,y:a},{x:s,y:a}]}function Oi(o,e){const{x:n,y:a}=o;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,v=e[c].y;u>a!=v>a&&n<(f-d)*(a-u)/(v-u)+d&&(s=!s)}return s}function ki(o){const e=o.slice();return e.sort((n,a)=>n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0),Mi(e)}function Mi(o){if(o.length<=1)return o.slice();const e=[];for(let a=0;a<o.length;a++){const s=o[a];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let a=o.length-1;a>=0;a--){const s=o[a];for(;n.length>=2;){const l=n[n.length-1],c=n[n.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Vi=function(o){if(typeof document>"u")return null;var e=Array.isArray(o)?o[0]:o;return e.ownerDocument.body},zt=new WeakMap,Pa=new WeakMap,Da={},Cn=0,Ml=function(o){return o&&(o.host||Ml(o.parentNode))},Fi=function(o,e){return e.map(function(n){if(o.contains(n))return n;var a=Ml(n);return a&&o.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",o,". Doing nothing"),null)}).filter(function(n){return!!n})},Ni=function(o,e,n,a){var s=Fi(e,Array.isArray(o)?o:[o]);Da[n]||(Da[n]=new WeakMap);var l=Da[n],c=[],d=new Set,u=new Set(s),f=function(b){!b||d.has(b)||(d.add(b),f(b.parentNode))};s.forEach(f);var v=function(b){!b||u.has(b)||Array.prototype.forEach.call(b.children,function(k){if(d.has(k))v(k);else try{var x=k.getAttribute(a),_=x!==null&&x!=="false",E=(zt.get(k)||0)+1,B=(l.get(k)||0)+1;zt.set(k,E),l.set(k,B),c.push(k),E===1&&_&&Pa.set(k,!0),B===1&&k.setAttribute(n,"true"),_||k.setAttribute(a,"true")}catch(M){console.error("aria-hidden: cannot operate on ",k,M)}})};return v(e),d.clear(),Cn++,function(){c.forEach(function(b){var k=zt.get(b)-1,x=l.get(b)-1;zt.set(b,k),l.set(b,x),k||(Pa.has(b)||b.removeAttribute(a),Pa.delete(b)),x||b.removeAttribute(n)}),Cn--,Cn||(zt=new WeakMap,zt=new WeakMap,Pa=new WeakMap,Da={})}},Li=function(o,e,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(o)?o:[o]),s=Vi(o);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live]"))),Ni(a,s,n,"aria-hidden")):function(){return null}};function ya(o){let e;watch(()=>$e(o),n=>{n?e=Li(n):e&&e()}),onUnmounted(()=>{e&&e()})}function he(o,e="radix"){return Ga({useId:void 0}),`${e}-${useId()}`}function Vl(o){const e=ref(),n=computed(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),a=computed(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return onMounted(()=>{const s=$e(o);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let u,f;if("borderBoxSize"in d){const v=d.borderBoxSize,b=Array.isArray(v)?v[0]:v;u=b.inlineSize,f=b.blockSize}else u=s.offsetWidth,f=s.offsetHeight;e.value={width:u,height:f}});return l.observe(s,{box:"border-box"}),()=>l.unobserve(s)}else e.value=void 0}),{width:n,height:a}}function Fl(o,e){const n=ref(o);function a(s){return e[n.value][s]??n.value}return{state:n,dispatch:s=>{n.value=a(s)}}}const Hi="data-item-text";function ga(o){const e=It("",1e3);return{search:e,handleTypeaheadSearch:(n,a)=>{if(!(o!=null&&o.value)&&!a)return;e.value=e.value+n;const s=(o==null?void 0:o.value)??a,l=document.activeElement,c=s.map(b=>{var k;return{ref:b,textValue:((k=(b.querySelector(`[${Hi}]`)??b).textContent)==null?void 0:k.trim())??""}}),d=c.find(b=>b.ref===l),u=c.map(b=>b.textValue),f=Yn(u,e.value,d==null?void 0:d.textValue),v=c.find(b=>b.textValue===f);return v&&v.ref.focus(),v==null?void 0:v.ref},resetTypeahead:()=>{e.value=""}}}function qn(o,e){return o.map((n,a)=>o[(e+a)%o.length])}function Yn(o,e,n){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?o.indexOf(n):-1;let l=qn(o,Math.max(s,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function et$1(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}const Xn=defineComponent({name:"PrimitiveSlot",inheritAttrs:!1,setup(o,{attrs:e,slots:n}){return()=>{var a,s;if(!n.default)return null;const l=Ua(n.default()),c=l.findIndex(v=>v.type!==Comment);if(c===-1)return l;const d=l[c];(a=d.props)==null||delete a.ref;const u=d.props?mergeProps(e,d.props):e;e.class&&(s=d.props)!=null&&s.class&&delete d.props.class;const f=cloneVNode(d,u);for(const v in u)v.startsWith("on")&&(f.props||(f.props={}),f.props[v]=u[v]);return l.length===1?f:(l[c]=f,l)}}}),O=defineComponent({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(o,{attrs:e,slots:n}){const a=o.asChild?"template":o.as;return typeof a=="string"&&["area","img","input"].includes(a)?()=>h(a,e):a!=="template"?()=>h(o.as,e,{default:n.default}):()=>h(Xn,e,{default:n.default})}});function Ie(){const o=ref(),e=computed(()=>{var n,a;return["#text","#comment"].includes((n=o.value)==null?void 0:n.$el.nodeName)?(a=o.value)==null?void 0:a.$el.nextElementSibling:$e(o)});return{primitiveElement:o,currentElement:e}}const[Nl,Wi]=Q$1("CollapsibleRoot"),ji=defineComponent({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(o,{expose:e,emit:n}){const a=o,s=ne$1(a,"open",n,{defaultValue:a.defaultOpen,passive:a.open===void 0}),l=ne$1(a,"disabled");return Wi({contentId:"",disabled:l,open:s,onOpenToggle:()=>{s.value=!s.value}}),e({open:s}),R(),(c,d)=>(openBlock(),createBlock(unref(O),{as:c.as,"as-child":a.asChild,"data-state":unref(s)?"open":"closed","data-disabled":unref(l)?"":void 0},{default:withCtx(()=>[renderSlot(c.$slots,"default",{open:unref(s)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),Ui=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;R();const n=Nl();return(a,s)=>{var l,c;return openBlock(),createBlock(unref(O),{type:a.as==="button"?"button":void 0,as:a.as,"as-child":e.asChild,"aria-controls":unref(n).contentId,"aria-expanded":unref(n).open.value,"data-state":unref(n).open.value?"open":"closed","data-disabled":(l=unref(n).disabled)!=null&&l.value?"":void 0,disabled:(c=unref(n).disabled)==null?void 0:c.value,onClick:unref(n).onOpenToggle},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}});function Gi(o,e){var n;const a=ref({}),s=ref("none"),l=ref(o),c=o.value?"mounted":"unmounted";let d;const u=((n=e.value)==null?void 0:n.ownerDocument.defaultView)??Tt,{state:f,dispatch:v}=Fl(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),b=B=>{var M;if(Ye){const I=new CustomEvent(B,{bubbles:!1,cancelable:!1});(M=e.value)==null||M.dispatchEvent(I)}};watch(o,async(B,M)=>{var I;const F=M!==B;if(await nextTick(),F){const V=s.value,L=$a(e.value);B?(v("MOUNT"),b("enter"),L==="none"&&b("after-enter")):L==="none"||((I=a.value)==null?void 0:I.display)==="none"?(v("UNMOUNT"),b("leave"),b("after-leave")):M&&V!==L?(v("ANIMATION_OUT"),b("leave")):(v("UNMOUNT"),b("after-leave"))}},{immediate:!0});const k=B=>{const M=$a(e.value),I=M.includes(B.animationName),F=f.value==="mounted"?"enter":"leave";if(B.target===e.value&&I&&(b(`after-${F}`),v("ANIMATION_END"),!l.value)){const V=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",d=u==null?void 0:u.setTimeout(()=>{var L;((L=e.value)==null?void 0:L.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=V)})}B.target===e.value&&M==="none"&&v("ANIMATION_END")},x=B=>{B.target===e.value&&(s.value=$a(e.value))},_=watch(e,(B,M)=>{B?(a.value=getComputedStyle(B),B.addEventListener("animationstart",x),B.addEventListener("animationcancel",k),B.addEventListener("animationend",k)):(v("ANIMATION_END"),u==null||u.clearTimeout(d),M==null||M.removeEventListener("animationstart",x),M==null||M.removeEventListener("animationcancel",k),M==null||M.removeEventListener("animationend",k))},{immediate:!0}),E=watch(f,()=>{const B=$a(e.value);s.value=f.value==="mounted"?B:"none"});return onUnmounted(()=>{_(),E()}),{isPresent:computed(()=>["mounted","unmountSuspended"].includes(f.value))}}function $a(o){return o&&getComputedStyle(o).animationName||"none"}const Pe$1=defineComponent({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(o,{slots:e,expose:n}){var a;const{present:s,forceMount:l}=toRefs(o),c=ref(),{isPresent:d}=Gi(s,c);n({present:d});let u=e.default({present:d});u=Ua(u||[]);const f=getCurrentInstance();if(u&&(u==null?void 0:u.length)>1){const v=(a=f==null?void 0:f.parent)!=null&&a.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${v}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(b=>`  - ${b}`).join(`
`)].join(`
`))}return()=>l.value||s.value||d.value?h(e.default({present:d})[0],{ref:v=>{const b=$e(v);return typeof(b==null?void 0:b.hasAttribute)>"u"||(b!=null&&b.hasAttribute("data-radix-popper-content-wrapper")?c.value=b.firstElementChild:c.value=b),b}}):null}}),qi=defineComponent({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=Nl();n.contentId||(n.contentId=he(void 0,"radix-vue-collapsible-content"));const a=ref(),{forwardRef:s,currentElement:l}=R(),c=ref(0),d=ref(0),u=computed(()=>n.open.value),f=ref(u.value),v=ref();return watch(()=>{var b;return[u.value,(b=a.value)==null?void 0:b.present]},async()=>{await nextTick();const b=l.value;if(!b)return;v.value=v.value||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const k=b.getBoundingClientRect();d.value=k.height,c.value=k.width,f.value||(b.style.transitionDuration=v.value.transitionDuration,b.style.animationName=v.value.animationName)},{immediate:!0}),onMounted(()=>{requestAnimationFrame(()=>{f.value=!1})}),(b,k)=>(openBlock(),createBlock(unref(Pe$1),{ref_key:"presentRef",ref:a,present:b.forceMount||unref(n).open.value,"force-mount":!0},{default:withCtx(()=>{var x,_;return[createVNode(unref(O),mergeProps(b.$attrs,{id:unref(n).contentId,ref:unref(s),"as-child":e.asChild,as:b.as,"data-state":unref(n).open.value?"open":"closed","data-disabled":(x=unref(n).disabled)!=null&&x.value?"":void 0,hidden:!((_=a.value)!=null&&_.present),style:{"--radix-collapsible-content-height":`${d.value}px`,"--radix-collapsible-content-width":`${c.value}px`}}),{default:withCtx(()=>{var E;return[(E=a.value)!=null&&E.present?renderSlot(b.$slots,"default",{key:0}):createCommentVNode("",!0)]}),_:3},16,["id","as-child","as","data-state","data-disabled","hidden","style"])]}),_:3},8,["present"]))}}),[tt$1,Qi]=Q$1("DialogRoot"),eu=defineComponent({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),s=ref(),l=ref(),{modal:c}=toRefs(n);return Qi({open:a,modal:c,openModal:()=>{a.value=!0},onOpenChange:d=>{a.value=d},onOpenToggle:()=>{a.value=!a.value},contentId:"",titleId:"",descriptionId:"",triggerElement:s,contentElement:l}),(d,u)=>renderSlot(d.$slots,"default",{open:unref(a)})}}),tu=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=tt$1(),{forwardRef:a,currentElement:s}=R();return n.contentId||(n.contentId=he(void 0,"radix-vue-dialog-content")),onMounted(()=>{n.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(n).open.value||!1,"aria-controls":unref(n).open.value?unref(n).contentId:void 0,"data-state":unref(n).open.value?"open":"closed",onClick:unref(n).onOpenToggle}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),ot$1=defineComponent({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=ja();return(n,a)=>unref(e)||n.forceMount?(openBlock(),createBlock(Teleport,{key:0,to:n.to,disabled:n.disabled},[renderSlot(n.$slots,"default")],8,["to","disabled"])):createCommentVNode("",!0)}}),Dv=defineComponent({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),au="dismissableLayer.pointerDownOutside",nu="dismissableLayer.focusOutside";function Kl(o,e){const n=e.closest("[data-dismissable-layer]"),a=o.dataset.dismissableLayer===""?o:o.querySelector("[data-dismissable-layer]"),s=Array.from(o.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&a===n||s.indexOf(a)<s.indexOf(n))}function Hl(o,e){var n;const a=((n=e==null?void 0:e.value)==null?void 0:n.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ref(!1),l=ref(()=>{});return watchEffect(c=>{if(!Ye)return;const d=async f=>{const v=f.target;if(e!=null&&e.value){if(Kl(e.value,v)){s.value=!1;return}if(f.target&&!s.value){let b=function(){Wt(au,o,k)};const k={originalEvent:f};f.pointerType==="touch"?(a.removeEventListener("click",l.value),l.value=b,a.addEventListener("click",l.value,{once:!0})):b()}else a.removeEventListener("click",l.value);s.value=!1}},u=window.setTimeout(()=>{a.addEventListener("pointerdown",d)},0);c(()=>{window.clearTimeout(u),a.removeEventListener("pointerdown",d),a.removeEventListener("click",l.value)})}),{onPointerDownCapture:()=>s.value=!0}}function Wl(o,e){var n;const a=((n=e==null?void 0:e.value)==null?void 0:n.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ref(!1);return watchEffect(l=>{if(!Ye)return;const c=async d=>{e!=null&&e.value&&(await nextTick(),!(!e.value||Kl(e.value,d.target))&&d.target&&!s.value&&Wt(nu,o,{originalEvent:d}))};a.addEventListener("focusin",c),l(()=>a.removeEventListener("focusin",c))}),{onFocusCapture:()=>s.value=!0,onBlurCapture:()=>s.value=!1}}const je=reactive({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gt$1=defineComponent({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s,currentElement:l}=R(),c=computed(()=>{var _;return((_=l.value)==null?void 0:_.ownerDocument)??globalThis.document}),d=computed(()=>je.layersRoot),u=computed(()=>l.value?Array.from(d.value).indexOf(l.value):-1),f=computed(()=>je.layersWithOutsidePointerEventsDisabled.size>0),v=computed(()=>{const _=Array.from(d.value),[E]=[...je.layersWithOutsidePointerEventsDisabled].slice(-1),B=_.indexOf(E);return u.value>=B}),b=Hl(async _=>{const E=[...je.branches].some(B=>B==null?void 0:B.contains(_.target));!v.value||E||(a("pointerDownOutside",_),a("interactOutside",_),await nextTick(),_.defaultPrevented||a("dismiss"))},l),k=Wl(_=>{[...je.branches].some(E=>E==null?void 0:E.contains(_.target))||(a("focusOutside",_),a("interactOutside",_),_.defaultPrevented||a("dismiss"))},l);jn("Escape",_=>{u.value===d.value.size-1&&(a("escapeKeyDown",_),_.defaultPrevented||a("dismiss"))});let x;return watchEffect(_=>{l.value&&(n.disableOutsidePointerEvents&&(je.layersWithOutsidePointerEventsDisabled.size===0&&(x=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),je.layersWithOutsidePointerEventsDisabled.add(l.value)),d.value.add(l.value),_(()=>{n.disableOutsidePointerEvents&&je.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=x)}))}),watchEffect(_=>{_(()=>{l.value&&(d.value.delete(l.value),je.layersWithOutsidePointerEventsDisabled.delete(l.value))})}),(_,E)=>(openBlock(),createBlock(unref(O),{ref:unref(s),"as-child":_.asChild,as:_.as,"data-dismissable-layer":"",style:normalizeStyle({pointerEvents:f.value?v.value?"auto":"none":void 0}),onFocusCapture:unref(k).onFocusCapture,onBlurCapture:unref(k).onBlurCapture,onPointerdownCapture:unref(b).onPointerDownCapture},{default:withCtx(()=>[renderSlot(_.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ou=defineComponent({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n,currentElement:a}=R();return onMounted(()=>{je.branches.add(a.value)}),onUnmounted(()=>{je.branches.delete(a.value)}),(s,l)=>(openBlock(),createBlock(unref(O),mergeProps({ref:unref(n)},e),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),wn="focusScope.autoFocusOnMount",_n="focusScope.autoFocusOnUnmount",jo={bubbles:!1,cancelable:!0};function Oa(o,{select:e=!1}={}){const n=document.activeElement;for(const a of o)if(ct$1(a,{select:e}),document.activeElement!==n)return!0}function lu(o){const e=Jn(o),n=Uo(e,o),a=Uo(e.reverse(),o);return[n,a]}function Jn(o){const e=[],n=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Uo(o,e){for(const n of o)if(!su(n,{upTo:e}))return n}function su(o,{upTo:e}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(e!==void 0&&o===e)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function ru(o){return o instanceof HTMLInputElement&&"select"in o}function ct$1(o,{select:e=!1}={}){if(o&&o.focus){const n=document.activeElement;o.focus({preventScroll:!0}),o!==n&&ru(o)&&e&&o.select()}}const iu=ai(()=>ref([]));function uu(){const o=iu();return{add(e){const n=o.value[0];e!==n&&(n==null||n.pause()),o.value=Go(o.value,e),o.value.unshift(e)},remove(e){var n;o.value=Go(o.value,e),(n=o.value[0])==null||n.resume()}}}function Go(o,e){const n=[...o],a=n.indexOf(e);return a!==-1&&n.splice(a,1),n}function du(o){return o.filter(e=>e.tagName!=="A")}const Ya=defineComponent({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(o,{emit:e}){const n=o,a=e,{currentRef:s,currentElement:l}=R(),c=ref(null),d=uu(),u=reactive({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});watchEffect(v=>{if(!Ye)return;const b=l.value;if(!n.trapped)return;function k(B){if(u.paused||!b)return;const M=B.target;b.contains(M)?c.value=M:ct$1(c.value,{select:!0})}function x(B){if(u.paused||!b)return;const M=B.relatedTarget;M!==null&&(b.contains(M)||ct$1(c.value,{select:!0}))}function _(B){b.contains(c.value)||ct$1(b)}document.addEventListener("focusin",k),document.addEventListener("focusout",x);const E=new MutationObserver(_);b&&E.observe(b,{childList:!0,subtree:!0}),v(()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",x),E.disconnect()})}),watchEffect(async v=>{const b=l.value;if(await nextTick(),!b)return;d.add(u);const k=document.activeElement;if(!b.contains(k)){const x=new CustomEvent(wn,jo);b.addEventListener(wn,_=>a("mountAutoFocus",_)),b.dispatchEvent(x),x.defaultPrevented||(Oa(du(Jn(b)),{select:!0}),document.activeElement===k&&ct$1(b))}v(()=>{b.removeEventListener(wn,E=>a("mountAutoFocus",E));const x=new CustomEvent(_n,jo),_=E=>{a("unmountAutoFocus",E)};b.addEventListener(_n,_),b.dispatchEvent(x),setTimeout(()=>{x.defaultPrevented||ct$1(k??document.body,{select:!0}),b.removeEventListener(_n,_),d.remove(u)},0)})});function f(v){if(!n.loop&&!n.trapped||u.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,k=document.activeElement;if(b&&k){const x=v.currentTarget,[_,E]=lu(x);_&&E?!v.shiftKey&&k===E?(v.preventDefault(),n.loop&&ct$1(_,{select:!0})):v.shiftKey&&k===_&&(v.preventDefault(),n.loop&&ct$1(E,{select:!0})):k===x&&v.preventDefault()}}return(v,b)=>(openBlock(),createBlock(unref(O),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":v.asChild,as:v.as,onKeydown:f},{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},8,["as-child","as"]))}}),cu="menu.itemSelect",Dn=["Enter"," "],fu=["ArrowDown","PageUp","Home"],jl=["ArrowUp","PageDown","End"],pu=[...fu,...jl],vu={ltr:[...Dn,"ArrowRight"],rtl:[...Dn,"ArrowLeft"]},mu={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Qn(o){return o?"open":"closed"}function Fa(o){return o==="indeterminate"}function eo(o){return Fa(o)?"indeterminate":o?"checked":"unchecked"}function $n(o){const e=document.activeElement;for(const n of o)if(n===e||(n.focus(),document.activeElement!==e))return}function hu(o,e){const{x:n,y:a}=o;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l].x,u=e[l].y,f=e[c].x,v=e[c].y;u>a!=v>a&&n<(f-d)*(a-u)/(v-u)+d&&(s=!s)}return s}function yu(o,e){if(!e)return!1;const n={x:o.clientX,y:o.clientY};return hu(n,e)}function ua(o){return o.pointerType==="mouse"}const gu="DialogTitle",bu="DialogContent";function Cu({titleName:o=gu,contentName:e=bu,componentLink:n="dialog.html#title",titleId:a,descriptionId:s,contentElement:l}){const c=`Warning: \`${e}\` requires a \`${o}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://www.radix-vue.com/components/${n}`,d=`Warning: Missing \`Description\` or \`aria-describedby="undefined"\` for ${e}.`;onMounted(()=>{var u;document.getElementById(a)||console.warn(c);const f=(u=l.value)==null?void 0:u.getAttribute("aria-describedby");s&&f&&(document.getElementById(s)||console.warn(d))})}const Ul=defineComponent({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),{forwardRef:l,currentElement:c}=R();return s.titleId||(s.titleId=he(void 0,"radix-vue-dialog-title")),s.descriptionId||(s.descriptionId=he(void 0,"radix-vue-dialog-description")),onMounted(()=>{s.contentElement=c,document.activeElement!==document.body&&(s.triggerElement.value=document.activeElement)}),Cu({titleName:"DialogTitle",contentName:"DialogContent",componentLink:"dialog.html#title",titleId:s.titleId,descriptionId:s.descriptionId,contentElement:c}),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),mergeProps({id:unref(s).contentId,ref:unref(l),as:d.as,"as-child":d.asChild,"disable-outside-pointer-events":d.disableOutsidePointerEvents,role:"dialog","aria-describedby":unref(s).descriptionId,"aria-labelledby":unref(s).titleId,"data-state":unref(Qn)(unref(s).open.value)},d.$attrs,{onDismiss:u[0]||(u[0]=f=>unref(s).onOpenChange(!1)),onEscapeKeyDown:u[1]||(u[1]=f=>a("escapeKeyDown",f)),onFocusOutside:u[2]||(u[2]=f=>a("focusOutside",f)),onInteractOutside:u[3]||(u[3]=f=>a("interactOutside",f)),onPointerDownOutside:u[4]||(u[4]=f=>a("pointerDownOutside",f))}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),wu=defineComponent({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),l=Ae(a),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(Ul,mergeProps({...n,...unref(l)},{ref:unref(c),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:f[0]||(f[0]=v=>{var b;v.defaultPrevented||(v.preventDefault(),(b=unref(s).triggerElement.value)==null||b.focus())}),onPointerDownOutside:f[1]||(f[1]=v=>{const b=v.detail.originalEvent,k=b.button===0&&b.ctrlKey===!0;(b.button===2||k)&&v.preventDefault()}),onFocusOutside:f[2]||(f[2]=v=>{v.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus"]))}}),_u=defineComponent({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=Ae(e);R();const s=tt$1(),l=ref(!1),c=ref(!1);return(d,u)=>(openBlock(),createBlock(Ul,mergeProps({...n,...unref(a)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=f=>{var v;f.defaultPrevented||(l.value||(v=unref(s).triggerElement.value)==null||v.focus(),f.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:u[1]||(u[1]=f=>{var v;f.defaultPrevented||(l.value=!0,f.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const b=f.target;(v=unref(s).triggerElement.value)!=null&&v.contains(b)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&c.value&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))}}),xu=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=tt$1(),l=Ae(a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(wu,mergeProps({key:0,ref:unref(c)},{...n,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(_u,mergeProps({key:1,ref:unref(c)},{...n,...unref(l),...d.$attrs}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Su=defineComponent({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(o){const e=tt$1();return ha(!0),R(),(n,a)=>(openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,"data-state":unref(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Eu=defineComponent({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=tt$1(),{forwardRef:n}=R();return(a,s)=>{var l;return(l=unref(e))!=null&&l.modal.value?(openBlock(),createBlock(unref(Pe$1),{key:0,present:a.forceMount||unref(e).open.value},{default:withCtx(()=>[createVNode(Su,mergeProps(a.$attrs,{ref:unref(n),as:a.as,"as-child":a.asChild}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):createCommentVNode("",!0)}}}),Gl=defineComponent({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;R();const n=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{type:a.as==="button"?"button":void 0,onClick:s[0]||(s[0]=l=>unref(n).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["type"]))}}),Pu=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(o){const e=o,n=tt$1();return R(),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(n).titleId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),Du=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(o){const e=o;R();const n=tt$1();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{id:unref(n).descriptionId}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["id"]))}}),$v=defineComponent({__name:"AlertDialogRoot",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const n=xe(o,e);return R(),(a,s)=>(openBlock(),createBlock(unref(eu),mergeProps(unref(n),{modal:!0}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),Bv=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(tu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Iv=defineComponent({__name:"AlertDialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[$u,Bu]=Q$1("AlertDialogContent"),Tv=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=Ae(e);R();const s=ref();return Bu({onCancelElementChange:l=>{s.value=l}}),(l,c)=>(openBlock(),createBlock(unref(xu),mergeProps({...n,...unref(a)},{role:"alertdialog",onPointerDownOutside:c[0]||(c[0]=withModifiers(()=>{},["prevent"])),onInteractOutside:c[1]||(c[1]=withModifiers(()=>{},["prevent"])),onOpenAutoFocus:c[2]||(c[2]=()=>{nextTick(()=>{var d;(d=s.value)==null||d.focus({preventScroll:!0})})})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Rv=defineComponent({__name:"AlertDialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Eu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Av=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=$u(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.onCancelElementChange(s.value)}),(l,c)=>(openBlock(),createBlock(unref(Gl),mergeProps(e,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),Ov=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Pu),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),kv=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Du),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});function Ru(o){function e(a){return Array.isArray(o.date.value)?o.date.value.some(s=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(s,a)):o.date.value?$14e0f24ef4ac5c92$export$ea39ec197993aef0(o.date.value,a):!1}const n=computed(()=>{var a,s,l,c;if(Array.isArray(o.date.value)){if(!o.date.value.length)return!1;for(const d of o.date.value)if((a=o.isDateDisabled)!=null&&a.call(o,d)||(s=o.isDateUnavailable)!=null&&s.call(o,d))return!0}else{if(!o.date.value)return!1;if((l=o.isDateDisabled)!=null&&l.call(o,o.date.value)||(c=o.isDateUnavailable)!=null&&c.call(o,o.date.value))return!0}return!1});return{isDateSelected:e,isInvalid:n}}function Au(o,e){const n=e(o),a=n.compare(o),s={};return a>=7&&(s.day=1),a>=R$1(o)&&(s.month=1),n.set({...s})}function Ou(o,e){const n=e(o),a=o.compare(n),s={};return a>=7&&(s.day=35),a>=R$1(o)&&(s.month=13),n.set({...s})}function ku(o,e){return e(o)}function Mu(o,e){return e(o)}function Yl(o){const e=Un(o.locale.value),n=computed(()=>{const E={calendar:o.placeholder.value.calendar.identifier};return o.placeholder.value.calendar.identifier==="gregory"&&o.placeholder.value.era==="BC"&&(E.era="short"),E}),a=ref(rt$1({dateObj:o.placeholder.value,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value})),s=computed(()=>a.value.map(E=>E.value));function l(E){return!s.value.some(B=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(E,B))}const c=(E="month",B)=>{if(!o.maxValue.value||!a.value.length)return!1;if(o.disabled.value)return!0;const M=a.value[a.value.length-1].value;if(B||o.nextPage.value){const F=Au(M,B||o.nextPage.value);return P(F,o.maxValue.value)}if(E==="year"){const F=M.add({years:1}).set({day:1,month:1});return P(F,o.maxValue.value)}const I=M.add({months:1}).set({day:1});return P(I,o.maxValue.value)},d=(E="month",B)=>{if(!o.minValue.value||!a.value.length)return!1;if(o.disabled.value)return!0;const M=a.value[0].value;if(B||o.prevPage.value){const F=Ou(M,B||o.prevPage.value);return q$1(F,o.minValue.value)}if(E==="year"){const F=M.subtract({years:1}).set({day:35,month:13});return q$1(F,o.minValue.value)}const I=M.subtract({months:1}).set({day:35});return q$1(I,o.minValue.value)};function u(E){var B;return!!((B=o.isDateDisabled)!=null&&B.call(o,E)||o.disabled.value||o.maxValue.value&&P(E,o.maxValue.value)||o.minValue.value&&q$1(E,o.minValue.value))}const f=E=>{var B;return!!((B=o.isDateUnavailable)!=null&&B.call(o,E))},v=computed(()=>a.value.length?a.value[0].rows[0].map(E=>e.dayOfWeek($$1(E),o.weekdayFormat.value)):[]),b=(E="month",B)=>{const M=a.value[0].value;if(B||o.nextPage.value){const V=ku(M,B||o.nextPage.value),L=rt$1({dateObj:V,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=L;const U={};if(!B){const j=L[0].value.compare(M);j>=R$1(M)&&(U.day=1),j>=365&&(U.month=1)}o.placeholder.value=L[0].value.set({...U});return}const I=E==="month"?M.add({months:o.pagedNavigation.value?o.numberOfMonths.value:1}):M.add({years:1}),F=rt$1({dateObj:I,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=F,o.placeholder.value=F[0].value.set({day:1})},k=(E="month",B)=>{const M=a.value[0].value;if(B||o.prevPage.value){const V=Mu(M,B||o.prevPage.value),L=rt$1({dateObj:V,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=L;const U={};if(!B){const j=M.compare(L[0].value);j>=R$1(M)&&(U.day=1),j>=365&&(U.month=1)}o.placeholder.value=L[0].value.set({...U});return}const I=E==="month"?M.subtract({months:o.pagedNavigation.value?o.numberOfMonths.value:1}):M.subtract({years:1}),F=rt$1({dateObj:I,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value});a.value=F,o.placeholder.value=F[0].value.set({day:1})};watch(o.placeholder,E=>{s.value.some(B=>$14e0f24ef4ac5c92$export$5a8da0c44a3afdf2(B,E))||(a.value=rt$1({dateObj:E,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value}))}),watch([o.locale,o.weekStartsOn,o.fixedWeeks,o.numberOfMonths],()=>{a.value=rt$1({dateObj:o.placeholder.value,weekStartsOn:o.weekStartsOn.value,locale:o.locale.value,fixedWeeks:o.fixedWeeks.value,numberOfMonths:o.numberOfMonths.value})});const x=computed(()=>{if(!a.value.length)return"";if(o.locale.value!==e.getLocale()&&e.setLocale(o.locale.value),a.value.length===1){const L=a.value[0].value;return`${e.fullMonthAndYear($$1(L),n.value)}`}const E=$$1(a.value[0].value),B=$$1(a.value[a.value.length-1].value),M=e.fullMonth(E,n.value),I=e.fullMonth(B,n.value),F=e.fullYear(E,n.value),V=e.fullYear(B,n.value);return F===V?`${M} - ${I} ${V}`:`${M} ${F} - ${I} ${V}`}),_=computed(()=>`${o.calendarLabel.value??"Event Date"}, ${x.value}`);return{isDateDisabled:u,isDateUnavailable:f,isNextButtonDisabled:c,isPrevButtonDisabled:d,grid:a,weekdays:v,visibleView:s,isOutsideVisibleView:l,formatter:e,nextPage:b,prevPage:k,headingValue:x,fullCalendarLabel:_}}const Vu={style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"}},Fu={role:"heading","aria-level":"2"},[Yt,Nu]=Q$1("CalendarRoot"),Lu=defineComponent({__name:"CalendarRoot",props:{modelValue:{},multiple:{type:Boolean,default:!1},defaultValue:{default:void 0},defaultPlaceholder:{},placeholder:{default:void 0},pagedNavigation:{type:Boolean,default:!1},preventDeselect:{type:Boolean,default:!1},weekStartsOn:{default:0},weekdayFormat:{default:"narrow"},calendarLabel:{},fixedWeeks:{type:Boolean,default:!1},maxValue:{},minValue:{},locale:{default:"en"},numberOfMonths:{default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},initialFocus:{type:Boolean,default:!1},isDateDisabled:{type:Function,default:void 0},isDateUnavailable:{type:Function,default:void 0},dir:{},nextPage:{},prevPage:{},asChild:{type:Boolean},as:{default:"div"}},emits:["update:modelValue","update:placeholder"],setup(o,{emit:e}){const n=o,a=e,{locale:s,disabled:l,readonly:c,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:v,fixedWeeks:b,multiple:k,minValue:x,maxValue:_,numberOfMonths:E,preventDeselect:B,isDateDisabled:M,isDateUnavailable:I,calendarLabel:F,defaultValue:V,nextPage:L,prevPage:U,dir:j}=toRefs(n),{primitiveElement:oe,currentElement:Y}=Ie(),K=be(j),W=ne$1(n,"modelValue",a,{defaultValue:V.value,passive:n.modelValue===void 0}),G=qt({defaultPlaceholder:n.placeholder,defaultValue:W.value,locale:n.locale}),ce=ne$1(n,"placeholder",a,{defaultValue:n.defaultPlaceholder??G.copy(),passive:n.placeholder===void 0});function se(pe){ce.value=pe.copy()}const{fullCalendarLabel:me,headingValue:ge,isDateDisabled:Te,isDateUnavailable:Be,isNextButtonDisabled:Ge,isPrevButtonDisabled:We,weekdays:Oe,isOutsideVisibleView:Ve,nextPage:Xe,prevPage:dt,formatter:pt,grid:ft}=Yl({locale:s,placeholder:ce,weekStartsOn:f,fixedWeeks:b,numberOfMonths:E,minValue:x,maxValue:_,disabled:l,weekdayFormat:v,pagedNavigation:u,isDateDisabled:M.value,isDateUnavailable:I.value,calendarLabel:F,nextPage:L,prevPage:U}),{isInvalid:Ce,isDateSelected:ze}=Ru({date:W,isDateDisabled:Te,isDateUnavailable:Be});watch(W,pe=>{if(Array.isArray(pe)&&pe.length){const ue=pe[pe.length-1];ue&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(ce.value,ue)&&se(ue)}else!Array.isArray(pe)&&pe&&!$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(ce.value,pe)&&se(pe)});function Ze(pe){if(k.value){if(!W.value)W.value=[pe.copy()];else if(Array.isArray(W.value)){if(W.value.findIndex(ue=>$14e0f24ef4ac5c92$export$ea39ec197993aef0(ue,pe))===-1)W.value=[...W.value,pe];else if(!B.value){const ue=W.value.filter(Z=>!$14e0f24ef4ac5c92$export$ea39ec197993aef0(Z,pe));if(!ue.length){ce.value=pe.copy(),W.value=void 0;return}W.value=ue.map(Z=>Z.copy())}}}else{if(!W.value){W.value=pe.copy();return}!B.value&&$14e0f24ef4ac5c92$export$91b62ebf2ba703ee(W.value,pe)?(ce.value=pe.copy(),W.value=void 0):W.value=pe.copy()}}return onMounted(()=>{d.value&&xl(Y.value)}),Nu({isDateUnavailable:Be,dir:K,isDateDisabled:Te,locale:s,formatter:pt,modelValue:W,placeholder:ce,disabled:l,initialFocus:d,pagedNavigation:u,weekStartsOn:f,weekdayFormat:v,fixedWeeks:b,multiple:k,numberOfMonths:E,readonly:c,preventDeselect:B,fullCalendarLabel:me,headingValue:ge,isInvalid:Ce,isDateSelected:ze,isNextButtonDisabled:Ge,isPrevButtonDisabled:We,isOutsideVisibleView:Ve,nextPage:Xe,prevPage:dt,parentElement:Y,onPlaceholderChange:se,onDateChange:Ze}),(pe,ue)=>(openBlock(),createBlock(unref(O),{ref_key:"primitiveElement",ref:oe,as:pe.as,"as-child":pe.asChild,role:"application","aria-label":unref(me),"data-readonly":unref(c)?"":void 0,"data-disabled":unref(l)?"":void 0,"data-invalid":unref(Ce)?"":void 0,dir:unref(K)},{default:withCtx(()=>[renderSlot(pe.$slots,"default",{date:unref(ce),grid:unref(ft),weekDays:unref(Oe),weekStartsOn:unref(f),locale:unref(s),fixedWeeks:unref(b)}),createBaseVNode("div",Vu,[createBaseVNode("div",Fu,toDisplayString$1(unref(me)),1)])]),_:3},8,["as","as-child","aria-label","data-readonly","data-disabled","data-invalid","dir"]))}}),zu=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Ku=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,n=Yt();return(a,s)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"data-disabled":unref(n).disabled.value?"":void 0}),{default:withCtx(()=>[renderSlot(a.$slots,"default",{headingValue:unref(n).headingValue.value},()=>[createTextVNode(toDisplayString$1(unref(n).headingValue.value),1)])]),_:3},16,["data-disabled"]))}}),Hu=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{default:"table"}},setup(o){const e=o,n=Yt(),a=computed(()=>n.disabled.value?!0:void 0),s=computed(()=>n.readonly.value?!0:void 0);return(l,c)=>(openBlock(),createBlock(unref(O),mergeProps(e,{tabindex:"-1",role:"grid","aria-readonly":s.value,"aria-disabled":a.value,"data-readonly":s.value&&"","data-disabled":a.value&&""}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16,["aria-readonly","aria-disabled","data-readonly","data-disabled"]))}}),Wu=defineComponent({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{default:"td"}},setup(o){const e=Yt();return(n,a)=>{var s,l;return openBlock(),createBlock(unref(O),{as:n.as,"as-child":n.asChild,role:"gridcell","aria-selected":unref(e).isDateSelected(n.date)?!0:void 0,"aria-disabled":unref(e).isDateDisabled(n.date)||((l=(s=unref(e)).isDateUnavailable)==null?void 0:l.call(s,n.date)),"data-disabled":unref(e).isDateDisabled(n.date)?"":void 0},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","aria-selected","aria-disabled","data-disabled"])}}}),ju=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{default:"th"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Uu=defineComponent({__name:"CalendarNext",props:{step:{default:"month"},nextPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=computed(()=>a.disabled.value||a.isNextButtonDisabled(e.step,e.nextPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"aria-label":"Next page",type:s.as==="button"?"button":void 0,"aria-disabled":n.value||void 0,"data-disabled":n.value||void 0,disabled:n.value,onClick:l[0]||(l[0]=c=>unref(a).nextPage(e.step,e.nextPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Next page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),Gu=defineComponent({__name:"CalendarPrev",props:{step:{default:"month"},prevPage:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=computed(()=>a.disabled.value||a.isPrevButtonDisabled(e.step,e.prevPage)),a=Yt();return(s,l)=>(openBlock(),createBlock(unref(O),{"aria-label":"Previous page",as:e.as,"as-child":e.asChild,type:s.as==="button"?"button":void 0,"aria-disabled":n.value||void 0,"data-disabled":n.value||void 0,disabled:n.value,onClick:l[0]||(l[0]=c=>unref(a).prevPage(e.step,e.prevPage))},{default:withCtx(()=>[renderSlot(s.$slots,"default",{},()=>[createTextVNode("Prev page")])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),qu=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{default:"thead"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{"aria-hidden":"true"}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Yu=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{default:"tbody"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Xu=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{default:"tr"}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Zu=defineComponent({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,n=et$1(),a=Yt(),{primitiveElement:s,currentElement:l}=Ie(),c=computed(()=>e.day.day.toLocaleString(a.locale.value)),d=computed(()=>a.formatter.custom($$1(e.day),{weekday:"long",month:"long",day:"numeric",year:"numeric"})),u=computed(()=>a.isDateDisabled(e.day)),f=computed(()=>{var F;return(F=a.isDateUnavailable)==null?void 0:F.call(a,e.day)}),v=computed(()=>$14e0f24ef4ac5c92$export$629b0a497aa65267(e.day,$14e0f24ef4ac5c92$export$aa8b41735afcabd2())),b=computed(()=>!$14e0f24ef4ac5c92$export$a18c89cbd24170ff(e.day,e.month)),k=computed(()=>a.isOutsideVisibleView(e.day)),x=computed(()=>!a.disabled.value&&$14e0f24ef4ac5c92$export$ea39ec197993aef0(e.day,a.placeholder.value)),_=computed(()=>a.isDateSelected(e.day)),E="[data-radix-vue-calendar-cell-trigger]:not([data-disabled]):not([data-outside-month]):not([data-outside-visible-months])";function B(F){var V;a.readonly.value||a.isDateDisabled(F)||(V=a.isDateUnavailable)!=null&&V.call(a,F)||a.onDateChange(F)}function M(){B(e.day)}function I(F){F.preventDefault(),F.stopPropagation();const V=a.parentElement.value,L=V?Array.from(V.querySelectorAll(E)):[];let U=L.indexOf(l.value);const j=7,oe=a.dir.value==="rtl"?-1:1;switch(F.code){case n.ARROW_RIGHT:U+=oe;break;case n.ARROW_LEFT:U-=oe;break;case n.ARROW_UP:U-=j;break;case n.ARROW_DOWN:U+=j;break;case n.ENTER:case n.SPACE_CODE:B(e.day);return;default:return}if(U>=0&&U<L.length){L[U].focus();return}if(U<0){if(a.isPrevButtonDisabled("month"))return;a.prevPage(),nextTick(()=>{const Y=V?Array.from(V.querySelectorAll(E)):[];Y[Y.length-Math.abs(U)].focus()});return}if(U>=L.length){if(a.isNextButtonDisabled("month"))return;a.nextPage(),nextTick(()=>{(V?Array.from(V.querySelectorAll(E)):[])[U-L.length].focus()})}}return(F,V)=>(openBlock(),createBlock(unref(O),mergeProps({ref_key:"primitiveElement",ref:s},e,{role:"button","aria-label":d.value,"data-radix-vue-calendar-cell-trigger":"","aria-disabled":b.value||u.value||f.value?!0:void 0,"data-selected":_.value?!0:void 0,"data-value":F.day.toString(),"data-disabled":u.value||b.value?"":void 0,"data-unavailable":f.value?"":void 0,"data-today":v.value?"":void 0,"data-outside-view":b.value?"":void 0,"data-outside-visible-view":k.value?"":void 0,"data-focused":x.value?"":void 0,tabindex:x.value?0:b.value||u.value?void 0:-1,onClick:M,onKeydown:[withKeys(I,["up","down","left","right","space","enter"]),V[0]||(V[0]=withKeys(withModifiers(()=>{},["prevent"]),["enter"]))]}),{default:withCtx(()=>[renderSlot(F.$slots,"default",{dayValue:c.value},()=>[createTextVNode(toDisplayString$1(c.value),1)])]),_:3},16,["aria-label","aria-disabled","data-selected","data-value","data-disabled","data-unavailable","data-today","data-outside-view","data-outside-visible-view","data-focused","tabindex"]))}});function Na(o){return o==="indeterminate"}function Xl(o){return Na(o)?"indeterminate":o?"checked":"unchecked"}const Ju=["value","checked","name","disabled","required"],[Qu,ed]=Q$1("CheckboxRoot"),zv=defineComponent({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String],default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{default:"on"},id:{},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,{disabled:s}=toRefs(n),l=ne$1(n,"checked",a,{defaultValue:n.defaultChecked,passive:n.checked===void 0}),{forwardRef:c,currentElement:d}=R(),u=Qe(d),f=computed(()=>{var v;return n.id&&d.value?(v=document.querySelector(`[for="${n.id}"]`))==null?void 0:v.innerText:void 0});return ed({disabled:s,state:l}),(v,b)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps(v.$attrs,{id:v.id,ref:unref(c),role:"checkbox","as-child":n.asChild,as:v.as,type:v.as==="button"?"button":void 0,"aria-checked":unref(Na)(unref(l))?"mixed":unref(l),"aria-required":!1,"aria-label":v.$attrs["aria-label"]||f.value,"data-state":unref(Xl)(unref(l)),"data-disabled":unref(s)?"":void 0,disabled:unref(s),onKeydown:withKeys(withModifiers(()=>{},["prevent"]),["enter"]),onClick:b[0]||(b[0]=k=>l.value=unref(Na)(unref(l))?!0:!unref(l))}),{default:withCtx(()=>[renderSlot(v.$slots,"default",{checked:unref(l)})]),_:3},16,["id","as-child","as","type","aria-checked","aria-label","data-state","data-disabled","disabled","onKeydown"]),unref(u)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",tabindex:"-1","aria-hidden":"true",value:v.value,checked:!!unref(l),name:n.name,disabled:n.disabled,required:n.required,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Ju)):createCommentVNode("",!0)],64))}}),Kv=defineComponent({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(o){const{forwardRef:e}=R(),n=Qu();return(a,s)=>(openBlock(),createBlock(unref(Pe$1),{present:a.forceMount||unref(Na)(unref(n).state.value)||unref(n).state.value===!0},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(e),"data-state":unref(Xl)(unref(n).state.value),"data-disabled":unref(n).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":a.asChild,as:a.as},a.$attrs),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),[Zl,td]=Q$1("PopperRoot"),Ot=defineComponent({inheritAttrs:!1,__name:"PopperRoot",setup(o){const e=ref();return td({anchor:e,onAnchorChange:n=>e.value=n}),(n,a)=>renderSlot(n.$slots,"default")}}),kt=defineComponent({__name:"PopperAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n,currentElement:a}=R(),s=Zl();return watchEffect(()=>{s.onAnchorChange(e.element??a.value)}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(n),as:l.as,"as-child":l.asChild},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["as","as-child"]))}});function ad(o){return o!==null}function nd(o){return{name:"transformOrigin",options:o,fn(e){var n,a,s;const{placement:l,rects:c,middlewareData:d}=e,u=((n=d.arrow)==null?void 0:n.centerOffset)!==0,f=u?0:o.arrowWidth,v=u?0:o.arrowHeight,[b,k]=Bn(l),x={start:"0%",center:"50%",end:"100%"}[k],_=(((a=d.arrow)==null?void 0:a.x)??0)+f/2,E=(((s=d.arrow)==null?void 0:s.y)??0)+v/2;let B="",M="";return b==="bottom"?(B=u?x:`${_}px`,M=`${-v}px`):b==="top"?(B=u?x:`${_}px`,M=`${c.floating.height+v}px`):b==="right"?(B=`${-v}px`,M=u?x:`${E}px`):b==="left"&&(B=`${c.floating.width+v}px`,M=u?x:`${E}px`),{data:{x:B,y:M}}}}}function Bn(o){const[e,n="center"]=o.split("-");return[e,n]}const Jl={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,updatePositionStrategy:"optimized",prioritizePosition:!1},[od,ld]=Q$1("PopperContent"),Bt=defineComponent({inheritAttrs:!1,__name:"PopperContent",props:mergeDefaults({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["placed"],setup(o,{emit:e}){const n=o,a=e,s=Zl(),{forwardRef:l,currentElement:c}=R(),d=ref(),u=ref(),{width:f,height:v}=Vl(u),b=computed(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),k=computed(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),x=computed(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),_=computed(()=>({padding:k.value,boundary:x.value.filter(ad),altBoundary:x.value.length>0})),E=ei(()=>[offset({mainAxis:n.sideOffset+v.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&flip({..._.value}),n.avoidCollisions&&shift$1({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?limitShift():void 0,..._.value}),!n.prioritizePosition&&n.avoidCollisions&&flip({..._.value}),size({..._.value,apply:({elements:K,rects:W,availableWidth:G,availableHeight:ce})=>{const{width:se,height:me}=W.reference,ge=K.floating.style;ge.setProperty("--radix-popper-available-width",`${G}px`),ge.setProperty("--radix-popper-available-height",`${ce}px`),ge.setProperty("--radix-popper-anchor-width",`${se}px`),ge.setProperty("--radix-popper-anchor-height",`${me}px`)}}),u.value&&arrow({element:u.value,padding:n.arrowPadding}),nd({arrowWidth:f.value,arrowHeight:v.value}),n.hideWhenDetached&&hide({strategy:"referenceHidden",..._.value})]),{floatingStyles:B,placement:M,isPositioned:I,middlewareData:F}=useFloating(s.anchor,d,{strategy:"fixed",placement:b,whileElementsMounted:(...K)=>autoUpdate(...K,{animationFrame:n.updatePositionStrategy==="always"}),middleware:E}),V=computed(()=>Bn(M.value)[0]),L=computed(()=>Bn(M.value)[1]);watchPostEffect(()=>{I.value&&a("placed")});const U=computed(()=>{var K;return((K=F.value.arrow)==null?void 0:K.centerOffset)!==0}),j=ref("");watchEffect(()=>{c.value&&(j.value=window.getComputedStyle(c.value).zIndex)});const oe=computed(()=>{var K;return((K=F.value.arrow)==null?void 0:K.x)??0}),Y=computed(()=>{var K;return((K=F.value.arrow)==null?void 0:K.y)??0});return ld({placedSide:V,onArrowChange:K=>u.value=K,arrowX:oe,arrowY:Y,shouldHideArrow:U}),(K,W)=>{var G,ce,se;return openBlock(),createElementBlock("div",{ref_key:"floatingRef",ref:d,"data-radix-popper-content-wrapper":"",style:normalizeStyle({...unref(B),transform:unref(I)?unref(B).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j.value,"--radix-popper-transform-origin":[(G=unref(F).transformOrigin)==null?void 0:G.x,(ce=unref(F).transformOrigin)==null?void 0:ce.y].join(" "),...((se=unref(F).hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[createVNode(unref(O),mergeProps({ref:unref(l)},K.$attrs,{"as-child":n.asChild,as:K.as,"data-side":V.value,"data-align":L.value,style:{animation:unref(I)?void 0:"none"}}),{default:withCtx(()=>[renderSlot(K.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),Zt=defineComponent({__name:"VisuallyHidden",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return R(),(e,n)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,style:{position:"absolute",border:0,width:"1px",display:"inline-block",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child"]))}}),ud="data-radix-vue-collection-item",[ao,dd]=Q$1("CollectionProvider");function ba(o=ud){const e=ref(new Map),n=ref(),a=dd({collectionRef:n,itemMap:e,attrName:o}),{getItems:s}=Qt(a),l=computed(()=>Array.from(a.itemMap.value.values())),c=computed(()=>a.itemMap.value.size);return{getItems:s,reactiveItems:l,itemMapSize:c}}const Ca=defineComponent({name:"CollectionSlot",setup(o,{slots:e}){const n=ao(),{primitiveElement:a,currentElement:s}=Ie();return watch(s,()=>{n.collectionRef.value=s.value}),()=>h(Xn,{ref:a},e)}}),Jt=defineComponent({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(o,{slots:e,attrs:n}){const a=ao(),{primitiveElement:s,currentElement:l}=Ie();return watchEffect(c=>{if(l.value){const d=markRaw(l.value);a.itemMap.value.set(d,{ref:l.value,value:o.value}),c(()=>a.itemMap.value.delete(d))}}),()=>h(Xn,{...n,[a.attrName]:"",ref:s},e)}});function Qt(o){const e=o??ao();return{getItems:()=>{const n=e.collectionRef.value;if(!n)return[];const a=Array.from(n.querySelectorAll(`[${e.attrName}]`));return Array.from(e.itemMap.value.values()).sort((s,l)=>a.indexOf(s.ref)-a.indexOf(l.ref))}}}function Xa(o){const e=Ga({nonce:ref()});return computed(()=>{var n;return(o==null?void 0:o.value)||((n=e.nonce)==null?void 0:n.value)})}const Za=defineComponent({__name:"MenuAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(kt),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}});function bd(){const o=ref(!1);return onMounted(()=>{Le("keydown",()=>{o.value=!0},{capture:!0,passive:!0}),Le(["pointerdown","pointermove"],()=>{o.value=!1},{capture:!0,passive:!0})}),o}const Cd=Sl(bd),[Mt,es]=Q$1(["MenuRoot","MenuSub"],"MenuContext"),[wa,wd]=Q$1("MenuRoot"),oo=defineComponent({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{modal:s,dir:l}=toRefs(n),c=be(l),d=ne$1(n,"open",a),u=ref(),f=Cd();return es({open:d,onOpenChange:v=>{d.value=v},content:u,onContentChange:v=>{u.value=v}}),wd({onClose:()=>{d.value=!1},isUsingKeyboardRef:f,dir:c,modal:s}),(v,b)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3}))}}),_d="rovingFocusGroup.onEntryFocus",xd={bubbles:!1,cancelable:!0},Ja={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sd(o,e){return e!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function ts(o,e,n){const a=Sd(o.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Ja[a]}function as(o,e=!1,n){const a=(n==null?void 0:n.activeElement)??document.activeElement;for(const s of o)if(s===a||(s.focus({preventScroll:e}),document.activeElement!==a))return}function Ed(o,e){return o.map((n,a)=>o[(e+a)%o.length])}const[Pd,Dd]=Q$1("RovingFocusGroup"),Vt=defineComponent({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(o,{expose:e,emit:n}){const a=o,s=n,{loop:l,orientation:c,dir:d}=toRefs(a),u=be(d),f=ne$1(a,"currentTabStopId",s,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),v=ref(!1),b=ref(!1),k=ref(0),{getItems:x}=ba();function _(B){const M=!b.value;if(B.currentTarget&&B.target===B.currentTarget&&M&&!v.value){const I=new CustomEvent(_d,xd);if(B.currentTarget.dispatchEvent(I),s("entryFocus",I),!I.defaultPrevented){const F=x().map(j=>j.ref).filter(j=>j.dataset.disabled!==""),V=F.find(j=>j.getAttribute("data-active")==="true"),L=F.find(j=>j.id===f.value),U=[V,L,...F].filter(Boolean);as(U,a.preventScrollOnEntryFocus)}}b.value=!1}function E(){setTimeout(()=>{b.value=!1},1)}return e({getItems:x}),Dd({loop:l,dir:u,orientation:c,currentTabStopId:f,onItemFocus:B=>{f.value=B},onItemShiftTab:()=>{v.value=!0},onFocusableItemAdd:()=>{k.value++},onFocusableItemRemove:()=>{k.value--}}),(B,M)=>(openBlock(),createBlock(unref(Ca),null,{default:withCtx(()=>[createVNode(unref(O),{tabindex:v.value||k.value===0?-1:0,"data-orientation":unref(c),as:B.as,"as-child":B.asChild,dir:unref(u),style:{outline:"none"},onMousedown:M[0]||(M[0]=I=>b.value=!0),onMouseup:E,onFocus:_,onBlur:M[1]||(M[1]=I=>v.value=!1)},{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Ft=defineComponent({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=Pd(),a=computed(()=>e.tabStopId||he()),s=computed(()=>n.currentTabStopId.value===a.value),{getItems:l}=Qt(),{primitiveElement:c,currentElement:d}=Ie(),u=computed(()=>{var v;return(v=d.value)==null?void 0:v.getRootNode()});onMounted(()=>{e.focusable&&n.onFocusableItemAdd()}),onUnmounted(()=>{e.focusable&&n.onFocusableItemRemove()});function f(v){if(v.key==="Tab"&&v.shiftKey){n.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=ts(v,n.orientation.value,n.dir.value);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||!e.allowShiftKey&&v.shiftKey)return;v.preventDefault();let k=[...l().map(x=>x.ref).filter(x=>x.dataset.disabled!=="")];if(b==="last")k.reverse();else if(b==="prev"||b==="next"){b==="prev"&&k.reverse();const x=k.indexOf(v.currentTarget);k=n.loop.value?Ed(k,x+1):k.slice(x+1)}nextTick(()=>as(k,!1,u.value))}}return(v,b)=>(openBlock(),createBlock(unref(Jt),null,{default:withCtx(()=>[createVNode(unref(O),{ref_key:"primitiveElement",ref:c,tabindex:s.value?0:-1,"data-orientation":unref(n).orientation.value,"data-active":v.active,"data-disabled":v.focusable?void 0:"",as:v.as,"as-child":v.asChild,onMousedown:b[0]||(b[0]=k=>{v.focusable?unref(n).onItemFocus(a.value):k.preventDefault()}),onFocus:b[1]||(b[1]=k=>unref(n).onItemFocus(a.value)),onKeydown:f},{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),[lo,$d]=Q$1("MenuContent"),so=defineComponent({__name:"MenuContentImpl",props:mergeDefaults({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},{...Jl}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(o,{emit:e}){const n=o,a=e,s=Mt(),l=wa(),{trapFocus:c,disableOutsidePointerEvents:d,loop:u}=toRefs(n);Gn(),ha(d.value);const f=ref(""),v=ref(0),b=ref(0),k=ref(null),x=ref("right"),_=ref(0),E=ref(null),{createCollection:B}=Me(),{forwardRef:M,currentElement:I}=R(),F=B(I);watch(I,K=>{s.onContentChange(K)});const{handleTypeaheadSearch:V}=ga(F);onUnmounted(()=>{window.clearTimeout(v.value)});function L(K){var W,G;return x.value===((W=k.value)==null?void 0:W.side)&&yu(K,(G=k.value)==null?void 0:G.area)}async function U(K){var W;a("openAutoFocus",K),!K.defaultPrevented&&(K.preventDefault(),(W=I.value)==null||W.focus({preventScroll:!0}))}function j(K){if(K.defaultPrevented)return;const W=K.target.closest("[data-radix-menu-content]")===K.currentTarget,G=K.ctrlKey||K.altKey||K.metaKey,ce=K.key.length===1,se=Rt(K,document.activeElement,I.value,{loop:u.value,arrowKeyOptions:"vertical",dir:l==null?void 0:l.dir.value,focus:!0,attributeName:"[data-radix-vue-collection-item]:not([data-disabled])"});if(se)return se==null?void 0:se.focus();if(K.code==="Space"||(W&&(K.key==="Tab"&&K.preventDefault(),!G&&ce&&V(K.key)),K.target!==I.value)||!pu.includes(K.key))return;K.preventDefault();const me=F.value;jl.includes(K.key)&&me.reverse(),$n(me)}function oe(K){var W,G;(G=(W=K==null?void 0:K.currentTarget)==null?void 0:W.contains)!=null&&G.call(W,K.target)||(window.clearTimeout(v.value),f.value="")}function Y(K){var W;if(!ua(K))return;const G=K.target,ce=_.value!==K.clientX;if((W=K==null?void 0:K.currentTarget)!=null&&W.contains(G)&&ce){const se=K.clientX>_.value?"right":"left";x.value=se,_.value=K.clientX}}return $d({onItemEnter:K=>!!L(K),onItemLeave:K=>{var W;L(K)||((W=I.value)==null||W.focus(),E.value=null)},onTriggerLeave:K=>!!L(K),searchRef:f,pointerGraceTimerRef:b,onPointerGraceIntentChange:K=>{k.value=K}}),(K,W)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",trapped:unref(c),onMountAutoFocus:U,onUnmountAutoFocus:W[7]||(W[7]=G=>a("closeAutoFocus",G))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":unref(d),onEscapeKeyDown:W[2]||(W[2]=G=>a("escapeKeyDown",G)),onPointerDownOutside:W[3]||(W[3]=G=>a("pointerDownOutside",G)),onFocusOutside:W[4]||(W[4]=G=>a("focusOutside",G)),onInteractOutside:W[5]||(W[5]=G=>a("interactOutside",G)),onDismiss:W[6]||(W[6]=G=>a("dismiss"))},{default:withCtx(()=>[createVNode(unref(Vt),{"current-tab-stop-id":E.value,"onUpdate:currentTabStopId":W[0]||(W[0]=G=>E.value=G),"as-child":"",orientation:"vertical",dir:unref(l).dir.value,loop:unref(u),onEntryFocus:W[1]||(W[1]=G=>{a("entryFocus",G),unref(l).isUsingKeyboardRef.value||G.preventDefault()})},{default:withCtx(()=>[createVNode(unref(Bt),{ref:unref(M),role:"menu",as:K.as,"as-child":K.asChild,"aria-orientation":"vertical","data-radix-menu-content":"","data-state":unref(Qn)(unref(s).open.value),dir:unref(l).dir.value,side:K.side,"side-offset":K.sideOffset,align:K.align,"align-offset":K.alignOffset,"avoid-collisions":K.avoidCollisions,"collision-boundary":K.collisionBoundary,"collision-padding":K.collisionPadding,"arrow-padding":K.arrowPadding,"prioritize-position":K.prioritizePosition,sticky:K.sticky,"hide-when-detached":K.hideWhenDetached,onKeydown:j,onBlur:oe,onPointermove:Y},{default:withCtx(()=>[renderSlot(K.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","sticky","hide-when-detached"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),ns=defineComponent({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=lo(),{forwardRef:a}=R(),s=ref(!1);async function l(d){if(!d.defaultPrevented&&ua(d)){if(e.disabled)n.onItemLeave(d);else if(!n.onItemEnter(d)){const u=d.currentTarget;u==null||u.focus({preventScroll:!0})}}}async function c(d){await nextTick(),!d.defaultPrevented&&ua(d)&&n.onItemLeave(d)}return(d,u)=>(openBlock(),createBlock(unref(Jt),{value:{textValue:d.textValue}},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(a),role:"menuitem",tabindex:"-1"},d.$attrs,{as:d.as,"as-child":d.asChild,"data-radix-vue-collection-item":"","aria-disabled":d.disabled||void 0,"data-disabled":d.disabled?"":void 0,"data-highlighted":s.value?"":void 0,onPointermove:l,onPointerleave:c,onFocus:u[0]||(u[0]=async f=>{await nextTick(),!(f.defaultPrevented||d.disabled)&&(s.value=!0)}),onBlur:u[1]||(u[1]=async f=>{await nextTick(),!f.defaultPrevented&&(s.value=!1)})}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),_a$1=defineComponent({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s,currentElement:l}=R(),c=wa(),d=lo(),u=ref(!1);async function f(){const v=l.value;if(!n.disabled&&v){const b=new CustomEvent(cu,{bubbles:!0,cancelable:!0});a("select",b),await nextTick(),b.defaultPrevented?u.value=!1:c.onClose()}}return(v,b)=>(openBlock(),createBlock(ns,mergeProps(n,{ref:unref(s),onClick:f,onPointerdown:b[0]||(b[0]=()=>{u.value=!0}),onPointerup:b[1]||(b[1]=async k=>{var x;await nextTick(),!k.defaultPrevented&&(u.value||(x=k.currentTarget)==null||x.click())}),onKeydown:b[2]||(b[2]=async k=>{const x=unref(d).searchRef.value!=="";v.disabled||x&&k.key===" "||unref(Dn).includes(k.key)&&(k.currentTarget.click(),k.preventDefault())})}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16))}}),[Bd,os$1]=Q$1(["MenuCheckboxItem","MenuRadioItem"],"MenuItemIndicatorContext"),ro=defineComponent({__name:"MenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=Bd({checked:ref(!1)});return(n,a)=>(openBlock(),createBlock(unref(Pe$1),{present:n.forceMount||unref(Fa)(unref(e).checked.value)||unref(e).checked.value===!0},{default:withCtx(()=>[createVNode(unref(O),{as:n.as,"as-child":n.asChild,"data-state":unref(eo)(unref(e).checked.value)},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child","data-state"])]),_:3},8,["present"]))}}),io=defineComponent({__name:"MenuCheckboxItem",props:{checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:checked"],setup(o,{emit:e}){const n=o,a=e,s=ne$1(n,"checked",a);return os$1({checked:s}),(l,c)=>(openBlock(),createBlock(_a$1,mergeProps({role:"menuitemcheckbox"},n,{"aria-checked":unref(Fa)(unref(s))?"mixed":unref(s),"data-state":unref(eo)(unref(s)),onSelect:c[0]||(c[0]=async d=>{a("select",d),unref(Fa)(unref(s))?s.value=!0:s.value=!unref(s)})}),{default:withCtx(()=>[renderSlot(l.$slots,"default",{checked:unref(s)})]),_:3},16,["aria-checked","data-state"]))}}),Id=defineComponent({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=xe(n,a),l=Mt(),{forwardRef:c,currentElement:d}=R();return ya(d),(u,f)=>(openBlock(),createBlock(so,mergeProps(unref(s),{ref:unref(c),"trap-focus":unref(l).open.value,"disable-outside-pointer-events":unref(l).open.value,"disable-outside-scroll":!0,onDismiss:f[0]||(f[0]=v=>unref(l).onOpenChange(!1)),onFocusOutside:f[1]||(f[1]=withModifiers(v=>a("focusOutside",v),["prevent"]))}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Td=defineComponent({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt();return(s,l)=>(openBlock(),createBlock(so,mergeProps(unref(n),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:l[0]||(l[0]=c=>unref(a).onOpenChange(!1))}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),uo=defineComponent({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt(),s=wa();return(l,c)=>(openBlock(),createBlock(unref(Pe$1),{present:l.forceMount||unref(a).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Id,normalizeProps(mergeProps({key:0},{...l.$attrs,...unref(n)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Td,normalizeProps(mergeProps({key:1},{...l.$attrs,...unref(n)})),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Qa=defineComponent({__name:"MenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),fo=defineComponent({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[ls,Od]=Q$1("MenuSub"),ho=defineComponent({__name:"MenuSub",props:{open:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{defaultValue:!1,passive:n.open===void 0}),s=Mt(),l=ref(),c=ref();return watchEffect(d=>{(s==null?void 0:s.open.value)===!1&&(a.value=!1),d(()=>a.value=!1)}),es({open:a,onOpenChange:d=>{a.value=d},content:c,onContentChange:d=>{c.value=d}}),Od({triggerId:"",contentId:"",trigger:l,onTriggerChange:d=>{l.value=d}}),(d,u)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3}))}}),yo=defineComponent({__name:"MenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e),a=Mt(),s=wa(),l=ls(),{forwardRef:c,currentElement:d}=R();return l.contentId||(l.contentId=he(void 0,"radix-vue-menu-sub-content")),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:u.forceMount||unref(a).open.value},{default:withCtx(()=>[createVNode(so,mergeProps(unref(n),{id:unref(l).contentId,ref:unref(c),"aria-labelledby":unref(l).triggerId,align:"start",side:unref(s).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:f[0]||(f[0]=withModifiers(v=>{var b;unref(s).isUsingKeyboardRef.value&&((b=unref(d))==null||b.focus())},["prevent"])),onCloseAutoFocus:f[1]||(f[1]=withModifiers(()=>{},["prevent"])),onFocusOutside:f[2]||(f[2]=v=>{v.defaultPrevented||v.target!==unref(l).trigger.value&&unref(a).onOpenChange(!1)}),onEscapeKeyDown:f[3]||(f[3]=v=>{unref(s).onClose(),v.preventDefault()}),onKeydown:f[4]||(f[4]=v=>{var b,k;const x=(b=v.currentTarget)==null?void 0:b.contains(v.target),_=unref(mu)[unref(s).dir.value].includes(v.key);x&&_&&(unref(a).onOpenChange(!1),(k=unref(l).trigger.value)==null||k.focus(),v.preventDefault())})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),go=defineComponent({__name:"MenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,n=Mt(),a=wa(),s=ls(),l=lo(),c=ref(null);s.triggerId||(s.triggerId=he(void 0,"radix-vue-menu-sub-trigger"));function d(){c.value&&window.clearTimeout(c.value),c.value=null}onUnmounted(()=>{d()});function u(b){!ua(b)||l.onItemEnter(b)||!e.disabled&&!n.open.value&&!c.value&&(l.onPointerGraceIntentChange(null),c.value=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))}async function f(b){var k,x;if(!ua(b))return;d();const _=(k=n.content.value)==null?void 0:k.getBoundingClientRect();if(_!=null&&_.width){const E=(x=n.content.value)==null?void 0:x.dataset.side,B=E==="right",M=B?-5:5,I=_[B?"left":"right"],F=_[B?"right":"left"];l.onPointerGraceIntentChange({area:[{x:b.clientX+M,y:b.clientY},{x:I,y:_.top},{x:F,y:_.top},{x:F,y:_.bottom},{x:I,y:_.bottom}],side:E}),window.clearTimeout(l.pointerGraceTimerRef.value),l.pointerGraceTimerRef.value=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(b))return;l.onPointerGraceIntentChange(null)}}async function v(b){var k;const x=l.searchRef.value!=="";e.disabled||x&&b.key===" "||vu[a.dir.value].includes(b.key)&&(n.onOpenChange(!0),await nextTick(),(k=n.content.value)==null||k.focus(),b.preventDefault())}return(b,k)=>(openBlock(),createBlock(Za,{"as-child":""},{default:withCtx(()=>[createVNode(ns,mergeProps(e,{id:unref(s).triggerId,ref:x=>{var _;(_=unref(s))==null||_.onTriggerChange(x==null?void 0:x.$el)},"aria-haspopup":"menu","aria-expanded":unref(n).open.value,"aria-controls":unref(s).contentId,"data-state":unref(Qn)(unref(n).open.value),onClick:k[0]||(k[0]=async x=>{e.disabled||x.defaultPrevented||(x.currentTarget.focus(),unref(n).open.value||unref(n).onOpenChange(!0))}),onPointermove:u,onPointerleave:f,onKeydown:v}),{default:withCtx(()=>[renderSlot(b.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),[ss,kd]=Q$1("ContextMenuRoot"),om=defineComponent({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{dir:s,modal:l}=toRefs(n);R();const c=be(s),d=ref(!1);return kd({open:d,onOpenChange:u=>{d.value=u},dir:c,modal:l}),watch(d,u=>{a("update:open",u)}),(u,f)=>(openBlock(),createBlock(unref(oo),{open:d.value,"onUpdate:open":f[0]||(f[0]=v=>d.value=v),dir:unref(c),modal:unref(l)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["open","dir","modal"]))}});function qo(o){return o.pointerType!=="mouse"}const lm=defineComponent({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,{disabled:n}=toRefs(e),{forwardRef:a}=R(),s=ss(),l=ref({x:0,y:0}),c=computed(()=>({getBoundingClientRect:()=>({width:0,height:0,left:l.value.x,right:l.value.x,top:l.value.y,bottom:l.value.y,...l.value})})),d=ref(0);function u(){window.clearTimeout(d.value)}function f(x){l.value={x:x.clientX,y:x.clientY},s.onOpenChange(!0)}async function v(x){n.value||(await nextTick(),x.defaultPrevented||(u(),f(x),x.preventDefault()))}async function b(x){n.value||(await nextTick(),qo(x)&&!x.defaultPrevented&&(u(),d.value=window.setTimeout(()=>f(x),700)))}async function k(x){n.value||(await nextTick(),qo(x)&&!x.defaultPrevented&&u())}return(x,_)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(Za),{as:"template",element:c.value},null,8,["element"]),createVNode(unref(O),mergeProps({ref:unref(a),as:x.as,"as-child":x.asChild,"data-state":unref(s).open.value?"open":"closed","data-disabled":unref(n)?"":void 0,style:{WebkitTouchCallout:"none"}},x.$attrs,{onContextmenu:v,onPointerdown:b,onPointermove:k,onPointercancel:k,onPointerup:k}),{default:withCtx(()=>[renderSlot(x.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),sm=defineComponent({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),rm$2=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);R();const a=ss(),s=ref(!1);return(l,c)=>(openBlock(),createBlock(unref(uo),mergeProps(unref(n),{side:"right","side-offset":2,align:"start",style:{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:c[0]||(c[0]=d=>{!d.defaultPrevented&&s.value&&d.preventDefault(),s.value=!1}),onInteractOutside:c[1]||(c[1]=d=>{!d.defaultPrevented&&!unref(a).modal.value&&(s.value=!0)})}),{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},16))}}),[us,ic]=Q$1("DropdownMenuRoot"),sh=defineComponent({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e;R();const s=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),l=ref(),{modal:c,dir:d}=toRefs(n),u=be(d);return ic({open:s,onOpenChange:f=>{s.value=f},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:l,contentId:"",modal:c,dir:u}),(f,v)=>(openBlock(),createBlock(unref(oo),{open:unref(s),"onUpdate:open":v[0]||(v[0]=b=>isRef(s)?s.value=b:null),dir:unref(u),modal:unref(c)},{default:withCtx(()=>[renderSlot(f.$slots,"default",{open:unref(s)})]),_:3},8,["open","dir","modal"]))}}),rh=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=us(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=he(void 0,"radix-vue-dropdown-menu-trigger")),(l,c)=>(openBlock(),createBlock(unref(Za),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{id:unref(n).triggerId,ref:unref(a),type:l.as==="button"?"button":void 0,"as-child":e.asChild,as:l.as,"aria-haspopup":"menu","aria-expanded":unref(n).open.value,"aria-controls":unref(n).open.value?unref(n).contentId:void 0,"data-disabled":l.disabled?"":void 0,disabled:l.disabled,"data-state":unref(n).open.value?"open":"closed",onClick:c[0]||(c[0]=async d=>{var u;!l.disabled&&d.button===0&&d.ctrlKey===!1&&((u=unref(n))==null||u.onOpenToggle(),await nextTick(),unref(n).open.value&&d.preventDefault())}),onKeydown:c[1]||(c[1]=withKeys(d=>{l.disabled||(["Enter"," "].includes(d.key)&&unref(n).onOpenToggle(),d.key==="ArrowDown"&&unref(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())},["enter","space","arrow-down"]))},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),ih=defineComponent({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(fo),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),uh=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);R();const a=us(),s=ref(!1);function l(c){c.defaultPrevented||(s.value||setTimeout(()=>{var d;(d=a.triggerElement.value)==null||d.focus()},0),s.value=!1,c.preventDefault())}return a.contentId||(a.contentId=he(void 0,"radix-vue-dropdown-menu-content")),(c,d)=>{var u;return openBlock(),createBlock(unref(uo),mergeProps(unref(n),{id:unref(a).contentId,"aria-labelledby":(u=unref(a))==null?void 0:u.triggerId,style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"},onCloseAutoFocus:l,onInteractOutside:d[0]||(d[0]=f=>{var v;if(f.defaultPrevented)return;const b=f.detail.originalEvent,k=b.button===0&&b.ctrlKey===!0,x=b.button===2||k;(!unref(a).modal.value||x)&&(s.value=!0),(v=unref(a).triggerElement.value)!=null&&v.contains(f.target)&&f.preventDefault()})}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),ch$1=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(o,{emit:e}){const n=o,a=Ae(e);return R(),(s,l)=>(openBlock(),createBlock(unref(_a$1),normalizeProps(guardReactiveProps({...n,...unref(a)})),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),fh=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(Qa),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),vh=defineComponent({__name:"DropdownMenuCheckboxItem",props:{checked:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:checked"],setup(o,{emit:e}){const n=o,a=Ae(e);return R(),(s,l)=>(openBlock(),createBlock(unref(io),normalizeProps(guardReactiveProps({...n,...unref(a)})),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16))}}),mh=defineComponent({__name:"DropdownMenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(ro),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),bh=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=ne$1(n,"open",e,{passive:n.open===void 0,defaultValue:n.defaultOpen??!1});return R(),(s,l)=>(openBlock(),createBlock(unref(ho),{open:unref(a),"onUpdate:open":l[0]||(l[0]=c=>isRef(a)?a.value=c:null)},{default:withCtx(()=>[renderSlot(s.$slots,"default",{open:unref(a)})]),_:3},8,["open"]))}}),Ch=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=xe(o,e);return R(),(a,s)=>(openBlock(),createBlock(unref(yo),mergeProps(unref(n),{style:{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16))}}),wh=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(go),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Oh=defineComponent({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(O),mergeProps(e,{onMousedown:a[0]||(a[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[Nt,Xc]=Q$1("PopoverRoot"),ys=defineComponent({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},modal:{type:Boolean,default:!1}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e,{modal:s}=toRefs(n),l=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=ref(),d=ref(!1);return Xc({contentId:"",modal:s,open:l,onOpenChange:u=>{l.value=u},onOpenToggle:()=>{l.value=!l.value},triggerElement:c,hasCustomAnchor:d}),(u,f)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(u.$slots,"default",{open:unref(l)})]),_:3}))}}),gs=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=Nt(),{forwardRef:a,currentElement:s}=R();return onMounted(()=>{n.triggerElement.value=s.value}),(l,c)=>(openBlock(),createBlock(resolveDynamicComponent(unref(n).hasCustomAnchor.value?unref(O):unref(kt)),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),type:l.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":unref(n).open.value,"aria-controls":unref(n).contentId,"data-state":unref(n).open.value?"open":"closed",as:l.as,"as-child":e.asChild,onClick:unref(n).onOpenToggle},{default:withCtx(()=>[renderSlot(l.$slots,"default")]),_:3},8,["type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),bs=defineComponent({__name:"PopoverPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Cs=defineComponent({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=At(n),{forwardRef:l}=R(),c=Nt();return Gn(),(d,u)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",loop:"",trapped:d.trapFocus,onMountAutoFocus:u[5]||(u[5]=f=>a("openAutoFocus",f)),onUnmountAutoFocus:u[6]||(u[6]=f=>a("closeAutoFocus",f))},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":d.disableOutsidePointerEvents,onPointerDownOutside:u[0]||(u[0]=f=>a("pointerDownOutside",f)),onInteractOutside:u[1]||(u[1]=f=>a("interactOutside",f)),onEscapeKeyDown:u[2]||(u[2]=f=>a("escapeKeyDown",f)),onFocusOutside:u[3]||(u[3]=f=>a("focusOutside",f)),onDismiss:u[4]||(u[4]=f=>unref(c).onOpenChange(!1))},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps(unref(s),{id:unref(c).contentId,ref:unref(l),"data-state":unref(c).open.value?"open":"closed",role:"dialog",style:{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["id","data-state"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Zc=defineComponent({__name:"PopoverContentModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=ref(!1);ha(!0);const c=xe(n,a),{forwardRef:d,currentElement:u}=R();return ya(u),(f,v)=>(openBlock(),createBlock(Cs,mergeProps(unref(c),{ref:unref(d),"trap-focus":unref(s).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:v[0]||(v[0]=withModifiers(b=>{var k;a("closeAutoFocus",b),l.value||(k=unref(s).triggerElement.value)==null||k.focus()},["prevent"])),onPointerDownOutside:v[1]||(v[1]=b=>{a("pointerDownOutside",b);const k=b.detail.originalEvent,x=k.button===0&&k.ctrlKey===!0,_=k.button===2||x;l.value=_}),onFocusOutside:v[2]||(v[2]=withModifiers(()=>{},["prevent"]))}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["trap-focus"]))}}),Jc=defineComponent({__name:"PopoverContentNonModal",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=ref(!1),c=ref(!1),d=xe(n,a);return(u,f)=>(openBlock(),createBlock(Cs,mergeProps(unref(d),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:f[0]||(f[0]=v=>{var b;a("closeAutoFocus",v),v.defaultPrevented||(l.value||(b=unref(s).triggerElement.value)==null||b.focus(),v.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:f[1]||(f[1]=async v=>{var b;a("interactOutside",v),v.defaultPrevented||(l.value=!0,v.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const k=v.target;(b=unref(s).triggerElement.value)!=null&&b.contains(k)&&v.preventDefault(),v.detail.originalEvent.type==="focusin"&&c.value&&v.preventDefault()})}),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16))}}),ws=defineComponent({__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const n=o,a=e,s=Nt(),l=xe(n,a),{forwardRef:c}=R();return s.contentId||(s.contentId=he(void 0,"radix-vue-popover-content")),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[unref(s).modal.value?(openBlock(),createBlock(Zc,mergeProps({key:0},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)):(openBlock(),createBlock(Jc,mergeProps({key:1},unref(l),{ref:unref(c)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),[He,Pf]=Q$1("ScrollAreaRoot"),Oy=defineComponent({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(o,{expose:e}){const n=o,a=ref(0),s=ref(0),l=ref(),c=ref(),d=ref(),u=ref(),f=ref(!1),v=ref(!1),{type:b,dir:k,scrollHideDelay:x}=toRefs(n),_=be(k);function E(){var F;(F=l.value)==null||F.scrollTo({top:0})}function B(){var F;(F=l.value)==null||F.scrollTo({top:0,left:0})}e({viewport:l,scrollTop:E,scrollTopLeft:B});const{forwardRef:M,currentElement:I}=R();return Pf({type:b,dir:_,scrollHideDelay:x,scrollArea:I,viewport:l,onViewportChange:F=>{l.value=F||void 0},content:c,onContentChange:F=>{c.value=F},scrollbarX:d,scrollbarXEnabled:f,scrollbarY:u,scrollbarYEnabled:v,onScrollbarXChange:F=>{d.value=F||void 0},onScrollbarYChange:F=>{u.value=F||void 0},onScrollbarXEnabledChange:F=>{f.value=F},onScrollbarYEnabledChange:F=>{v.value=F},onCornerWidthChange:F=>{a.value=F},onCornerHeightChange:F=>{s.value=F}}),(F,V)=>(openBlock(),createBlock(unref(O),{ref:unref(M),"as-child":n.asChild,as:F.as,dir:unref(_),style:normalizeStyle({position:"relative","--radix-scroll-area-corner-width":`${a.value}px`,"--radix-scroll-area-corner-height":`${s.value}px`})},{default:withCtx(()=>[renderSlot(F.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),ky=defineComponent({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(o,{expose:e}){const n=o,{nonce:a}=toRefs(n),s=Xa(a),l=He(),c=ref();onMounted(()=>{l.onViewportChange(c.value),l.onContentChange(u.value)}),e({viewportElement:c});const{forwardRef:d,currentElement:u}=R();return(f,v)=>(openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",mergeProps({ref_key:"viewportElement",ref:c,"data-radix-scroll-area-viewport":"",style:{overflowX:unref(l).scrollbarXEnabled.value?"scroll":"hidden",overflowY:unref(l).scrollbarYEnabled.value?"scroll":"hidden"}},f.$attrs,{tabindex:0}),[createVNode(unref(O),{ref:unref(d),style:normalizeStyle({minWidth:unref(l).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":n.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},8,["style","as-child","as"])],16),createVNode(unref(O),{as:"style",nonce:unref(s)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-radix-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")]),_:1},8,["nonce"])],64))}});function Es(o,e){return n=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(o[1]-o[0]);return e[0]+a*(n-o[0])}}function nn(o){const e=Ps(o.viewport,o.content),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,a=(o.scrollbar.size-n)*e;return Math.max(a,18)}function Ps(o,e){const n=o/e;return Number.isNaN(n)?0:n}function Df(o,e=()=>{}){let n={left:o.scrollLeft,top:o.scrollTop},a=0;return function s(){const l={left:o.scrollLeft,top:o.scrollTop},c=n.left!==l.left,d=n.top!==l.top;(c||d)&&e(),n=l,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)}function Jo(o,e,n="ltr"){const a=nn(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=e.scrollbar.size-s,c=e.content-e.viewport,d=l-a,u=n==="ltr"?[0,c]:[c*-1,0],f=jt(o,u[0],u[1]);return Es([0,c],[0,d])(f)}function Ia(o){return o?Number.parseInt(o,10):0}function $f(o,e,n,a="ltr"){const s=nn(n),l=s/2,c=e||l,d=s-c,u=n.scrollbar.paddingStart+c,f=n.scrollbar.size-n.scrollbar.paddingEnd-d,v=n.content-n.viewport,b=a==="ltr"?[0,v]:[v*-1,0];return Es([u,f],b)(o)}function Qo(o,e){return o>0&&o<e}const Ds=defineComponent({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(o,{emit:e}){const n=o,a=e,s=He(),l=on(),c=ln(),{forwardRef:d,currentElement:u}=R(),f=ref(""),v=ref();function b(M){var I,F;if(v.value){const V=M.clientX-((I=v.value)==null?void 0:I.left),L=M.clientY-((F=v.value)==null?void 0:F.top);a("onDragScroll",{x:V,y:L})}}function k(M){M.button===0&&(M.target.setPointerCapture(M.pointerId),v.value=u.value.getBoundingClientRect(),f.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",s.viewport&&(s.viewport.value.style.scrollBehavior="auto"),b(M))}function x(M){b(M)}function _(M){const I=M.target;I.hasPointerCapture(M.pointerId)&&I.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=f.value,s.viewport&&(s.viewport.value.style.scrollBehavior=""),v.value=void 0}function E(M){var I;const F=M.target,V=(I=u.value)==null?void 0:I.contains(F),L=l.sizes.value.content-l.sizes.value.viewport;V&&l.handleWheelScroll(M,L)}onMounted(()=>{document.addEventListener("wheel",E,{passive:!1})}),onUnmounted(()=>{document.removeEventListener("wheel",E)});function B(){var M,I,F,V,L;u.value&&(n.isHorizontal?l.handleSizeChange({content:((M=s.viewport.value)==null?void 0:M.scrollWidth)??0,viewport:((I=s.viewport.value)==null?void 0:I.offsetWidth)??0,scrollbar:{size:u.value.clientWidth??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}):l.handleSizeChange({content:((F=s.viewport.value)==null?void 0:F.scrollHeight)??0,viewport:((V=s.viewport.value)==null?void 0:V.offsetHeight)??0,scrollbar:{size:((L=u.value)==null?void 0:L.clientHeight)??0,paddingStart:Ia(getComputedStyle(u.value).paddingLeft),paddingEnd:Ia(getComputedStyle(u.value).paddingRight)}}))}return Je(u,B),Je(s.content,B),(M,I)=>(openBlock(),createBlock(unref(O),{ref:unref(d),style:{position:"absolute"},"data-scrollbarimpl":"",as:unref(c).as.value,"as-child":unref(c).asChild.value,onPointerdown:k,onPointermove:x,onPointerup:_},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["as","as-child"]))}}),Bf=defineComponent({__name:"ScrollAreaScrollbarX",setup(o){const e=He(),n=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarXChange(s.value)});const l=computed(()=>n.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!0,"data-orientation":"horizontal",style:normalizeStyle({bottom:0,left:unref(e).dir.value==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:unref(e).dir.value==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(n).onDragScroll(u.x))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),If=defineComponent({__name:"ScrollAreaScrollbarY",setup(o){const e=He(),n=on(),{forwardRef:a,currentElement:s}=R();onMounted(()=>{s.value&&e.onScrollbarYChange(s.value)});const l=computed(()=>n.sizes.value);return(c,d)=>(openBlock(),createBlock(Ds,{ref:unref(a),"is-horizontal":!1,"data-orientation":"vertical",style:normalizeStyle({top:0,right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":l.value?`${unref(nn)(l.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=u=>unref(n).onDragScroll(u.y))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["style"]))}}),[on,Tf]=Q$1("ScrollAreaScrollbarVisible"),Do=defineComponent({__name:"ScrollAreaScrollbarVisible",setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),s=ref({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=computed(()=>{const M=Ps(s.value.viewport,s.value.content);return M>0&&M<1}),c=ref(),d=ref(0);function u(M,I){if(x.value){const F=e.viewport.value.scrollLeft+M.deltaY;e.viewport.value.scrollLeft=F,Qo(F,I)&&M.preventDefault()}else{const F=e.viewport.value.scrollTop+M.deltaY;e.viewport.value.scrollTop=F,Qo(F,I)&&M.preventDefault()}}function f(M,I){x.value?d.value=I.x:d.value=I.y}function v(M){d.value=0}function b(M){s.value=M}function k(M,I){return $f(M,d.value,s.value,I)}const x=computed(()=>n.isHorizontal.value);function _(M){x.value?e.viewport.value.scrollLeft=k(M,e.dir.value):e.viewport.value.scrollTop=k(M)}function E(){if(x.value){if(e.viewport.value&&c.value){const M=e.viewport.value.scrollLeft,I=Jo(M,s.value,e.dir.value);c.value.style.transform=`translate3d(${I}px, 0, 0)`}}else if(e.viewport.value&&c.value){const M=e.viewport.value.scrollTop,I=Jo(M,s.value);c.value.style.transform=`translate3d(0, ${I}px, 0)`}}function B(M){c.value=M}return Tf({sizes:s,hasThumb:l,handleWheelScroll:u,handleThumbDown:f,handleThumbUp:v,handleSizeChange:b,onThumbPositionChange:E,onThumbChange:B,onDragScroll:_}),(M,I)=>x.value?(openBlock(),createBlock(Bf,mergeProps({key:0},M.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},16)):(openBlock(),createBlock(If,mergeProps({key:1},M.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},16))}}),$s=defineComponent({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),s=ref(!1),l=Hn(()=>{if(e.viewport.value){const c=e.viewport.value.offsetWidth<e.viewport.value.scrollWidth,d=e.viewport.value.offsetHeight<e.viewport.value.scrollHeight;s.value=n.isHorizontal.value?c:d}},10);return onMounted(()=>l()),Je(e.viewport,l),Je(e.content,l),(c,d)=>(openBlock(),createBlock(unref(Pe$1),{present:c.forceMount||s.value},{default:withCtx(()=>[createVNode(Do,mergeProps(c.$attrs,{ref:unref(a),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Rf=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(o){const e=He(),{forwardRef:n}=R();let a;const s=ref(!1);function l(){window.clearTimeout(a),s.value=!0}function c(){a=window.setTimeout(()=>{s.value=!1},e.scrollHideDelay.value)}return onMounted(()=>{const d=e.scrollArea.value;d&&(d.addEventListener("pointerenter",l),d.addEventListener("pointerleave",c))}),onUnmounted(()=>{const d=e.scrollArea.value;d&&(window.clearTimeout(a),d.removeEventListener("pointerenter",l),d.removeEventListener("pointerleave",c))}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||s.value},{default:withCtx(()=>[createVNode($s,mergeProps(d.$attrs,{ref:unref(n),"data-state":s.value?"visible":"hidden"}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Af=defineComponent({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(o){const e=He(),n=ln(),{forwardRef:a}=R(),{state:s,dispatch:l}=Fl("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});watchEffect(d=>{if(s.value==="idle"){const u=window.setTimeout(()=>l("HIDE"),e.scrollHideDelay.value);d(()=>{window.clearTimeout(u)})}});const c=Hn(()=>l("SCROLL_END"),100);return watchEffect(d=>{const u=e.viewport.value,f=n.isHorizontal.value?"scrollLeft":"scrollTop";if(u){let v=u[f];const b=()=>{const k=u[f];v!==k&&(l("SCROLL"),c()),v=k};u.addEventListener("scroll",b),d(()=>{u.removeEventListener("scroll",b)})}}),(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s)!=="hidden"},{default:withCtx(()=>[createVNode(Do,mergeProps(d.$attrs,{ref:unref(a)}),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[ln,Of]=Q$1("ScrollAreaScrollbar"),My=defineComponent({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(o){const e=o,{forwardRef:n}=R(),a=He(),s=computed(()=>e.orientation==="horizontal");watch(s,()=>{s.value?a.onScrollbarXEnabledChange(!0):a.onScrollbarYEnabledChange(!0)},{immediate:!0}),onUnmounted(()=>{a.onScrollbarXEnabledChange(!1),a.onScrollbarYEnabledChange(!1)});const{orientation:l,forceMount:c,asChild:d,as:u}=toRefs(e);return Of({orientation:l,forceMount:c,isHorizontal:s,as:u,asChild:d}),(f,v)=>unref(a).type.value==="hover"?(openBlock(),createBlock(Rf,mergeProps({key:0},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="scroll"?(openBlock(),createBlock(Af,mergeProps({key:1},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="auto"?(openBlock(),createBlock($s,mergeProps({key:2},f.$attrs,{ref:unref(n),"force-mount":unref(c)}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["force-mount"])):unref(a).type.value==="always"?(openBlock(),createBlock(Do,mergeProps({key:3},f.$attrs,{ref:unref(n),"data-state":"visible"}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Vy=defineComponent({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,n=He(),a=on();function s(k){const x=k.target.getBoundingClientRect(),_=k.clientX-x.left,E=k.clientY-x.top;a.handleThumbDown(k,{x:_,y:E})}function l(k){a.handleThumbUp(k)}const{forwardRef:c,currentElement:d}=R(),u=ref(),f=computed(()=>n.viewport.value);function v(){if(!u.value){const k=Df(f.value,a.onThumbPositionChange);u.value=k,a.onThumbPositionChange()}}const b=computed(()=>a.sizes.value);return hi(b,()=>{a.onThumbChange(d.value),f.value&&(a.onThumbPositionChange(),f.value.addEventListener("scroll",v))}),onUnmounted(()=>{var k;f.value.removeEventListener("scroll",v),(k=n.viewport.value)==null||k.removeEventListener("scroll",v)}),(k,x)=>(openBlock(),createBlock(unref(O),{ref:unref(c),"data-state":unref(a).hasThumb?"visible":"hidden",style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},"as-child":e.asChild,as:k.as,onPointerdown:s,onPointerup:l},{default:withCtx(()=>[renderSlot(k.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),kf=defineComponent({__name:"ScrollAreaCornerImpl",setup(o){const e=He(),n=ref(0),a=ref(0),s=computed(()=>!!n.value&&!!a.value);function l(){var d;const u=((d=e.scrollbarX.value)==null?void 0:d.offsetHeight)||0;e.onCornerHeightChange(u),a.value=u}function c(){var d;const u=((d=e.scrollbarY.value)==null?void 0:d.offsetWidth)||0;e.onCornerWidthChange(u),n.value=u}return Je(e.scrollbarX.value,l),Je(e.scrollbarY.value,c),watch(()=>e.scrollbarX.value,l),watch(()=>e.scrollbarY.value,c),(d,u)=>{var f;return s.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,style:{width:`${n.value}px`,height:`${a.value}px`,position:"absolute",right:unref(e).dir.value==="ltr"?0:void 0,left:unref(e).dir.value==="rtl"?0:void 0,bottom:0}},(f=d.$parent)==null?void 0:f.$props),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16,["style"])):createCommentVNode("",!0)}}}),Fy=defineComponent({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n}=R(),a=He(),s=computed(()=>!!a.scrollbarX.value&&!!a.scrollbarY.value),l=computed(()=>a.type.value!=="scroll"&&s.value);return(c,d)=>l.value?(openBlock(),createBlock(kf,mergeProps({key:0},e,{ref:unref(n)}),{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),Mf=["default-value"],Vf=defineComponent({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(o){const e=o,{value:n}=toRefs(e),a=ref();return(s,l)=>(openBlock(),createBlock(unref(Zt),{"as-child":""},{default:withCtx(()=>[withDirectives(createBaseVNode("select",mergeProps({ref_key:"selectElement",ref:a},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>isRef(n)?n.value=c:null),"default-value":unref(n)}),[renderSlot(s.$slots,"default")],16,Mf),[[vModelSelect,unref(n)]])]),_:3}))}}),Ff={key:0,value:""},[wt,Bs]=Q$1("SelectRoot"),[Nf,Lf]=Q$1("SelectRoot"),Ny=defineComponent({__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{default:""},modelValue:{default:void 0},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(o,{emit:e}){const n=o,a=e,s=ne$1(n,"modelValue",a,{defaultValue:n.defaultValue,passive:n.modelValue===void 0}),l=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=ref(),d=ref(),u=ref({x:0,y:0}),f=ref(!1),{required:v,disabled:b,dir:k}=toRefs(n),x=be(k);Bs({triggerElement:c,onTriggerChange:M=>{c.value=M},valueElement:d,onValueElementChange:M=>{d.value=M},valueElementHasChildren:f,onValueElementHasChildrenChange:M=>{f.value=M},contentId:"",modelValue:s,onValueChange:M=>{s.value=M},open:l,required:v,onOpenChange:M=>{l.value=M},dir:x,triggerPointerDownPosRef:u,disabled:b});const _=Qe(c),E=ref(new Set),B=computed(()=>Array.from(E.value).map(M=>{var I;return(I=M.props)==null?void 0:I.value}).join(";"));return Lf({onNativeOptionAdd:M=>{E.value.add(M)},onNativeOptionRemove:M=>{E.value.delete(M)}}),(M,I)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(M.$slots,"default",{modelValue:unref(s),open:unref(l)}),unref(_)?(openBlock(),createBlock(Vf,mergeProps({key:B.value},M.$attrs,{"aria-hidden":"true",tabindex:"-1",required:unref(v),name:M.name,autocomplete:M.autocomplete,disabled:unref(b),value:unref(s),onChange:I[0]||(I[0]=F=>s.value=F.target.value)}),{default:withCtx(()=>[unref(s)===void 0?(openBlock(),createElementBlock("option",Ff)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(Array.from(E.value),F=>(openBlock(),createBlock(resolveDynamicComponent(F),mergeProps({ref_for:!0},F.props,{key:F.key??""}),null,16))),128))]),_:1},16,["required","name","autocomplete","disabled","value"])):createCommentVNode("",!0)]),_:3}))}}),zf=[" ","Enter","ArrowUp","ArrowDown"],Kf=[" ","Enter"],Ue=10;function Is(o){return o===""||vt$1(o)}const Ly=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=wt(),a=computed(()=>{var x;return((x=n.disabled)==null?void 0:x.value)||e.disabled}),{forwardRef:s,currentElement:l}=R();n.contentId||(n.contentId=he(void 0,"radix-vue-select-content")),onMounted(()=>{n.triggerElement=l});const{injectCollection:c}=Me(),d=c(),{search:u,handleTypeaheadSearch:f,resetTypeahead:v}=ga(d);function b(){a.value||(n.onOpenChange(!0),v())}function k(x){b(),n.triggerPointerDownPosRef.value={x:Math.round(x.pageX),y:Math.round(x.pageY)}}return(x,_)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>{var E,B,M,I;return[createVNode(unref(O),{ref:unref(s),role:"combobox",type:x.as==="button"?"button":void 0,"aria-controls":unref(n).contentId,"aria-expanded":unref(n).open.value||!1,"aria-required":(E=unref(n).required)==null?void 0:E.value,"aria-autocomplete":"none",disabled:a.value,dir:(B=unref(n))==null?void 0:B.dir.value,"data-state":(M=unref(n))!=null&&M.open.value?"open":"closed","data-disabled":a.value?"":void 0,"data-placeholder":unref(Is)((I=unref(n).modelValue)==null?void 0:I.value)?"":void 0,"as-child":x.asChild,as:x.as,onClick:_[0]||(_[0]=F=>{var V;(V=F==null?void 0:F.currentTarget)==null||V.focus()}),onPointerdown:_[1]||(_[1]=F=>{if(F.pointerType==="touch")return F.preventDefault();const V=F.target;V.hasPointerCapture(F.pointerId)&&V.releasePointerCapture(F.pointerId),F.button===0&&F.ctrlKey===!1&&(k(F),F.preventDefault())}),onPointerup:_[2]||(_[2]=withModifiers(F=>{F.pointerType==="touch"&&k(F)},["prevent"])),onKeydown:_[3]||(_[3]=F=>{const V=unref(u)!=="";!(F.ctrlKey||F.altKey||F.metaKey)&&F.key.length===1&&V&&F.key===" "||(unref(f)(F.key),unref(zf).includes(F.key)&&(b(),F.preventDefault()))})},{default:withCtx(()=>[renderSlot(x.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3}))}}),zy=defineComponent({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),[$o,Hf]=Q$1("SelectItemAlignedPosition"),Wf=defineComponent({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(o,{emit:e}){const n=o,a=e,{injectCollection:s}=Me(),l=wt(),c=_t(),d=s(),u=ref(!1),f=ref(!0),v=ref(),{forwardRef:b,currentElement:k}=R(),{viewport:x,selectedItem:_,selectedItemText:E,focusSelectedItem:B}=c;function M(){if(l.triggerElement.value&&l.valueElement.value&&v.value&&k.value&&x!=null&&x.value&&_!=null&&_.value&&E!=null&&E.value){const V=l.triggerElement.value.getBoundingClientRect(),L=k.value.getBoundingClientRect(),U=l.valueElement.value.getBoundingClientRect(),j=E.value.getBoundingClientRect();if(l.dir.value!=="rtl"){const Ce=j.left-L.left,ze=U.left-Ce,Ze=V.left-ze,pe=V.width+Ze,ue=Math.max(pe,L.width),Z=window.innerWidth-Ue,ee=jt(ze,Ue,Math.max(Ue,Z-ue));v.value.style.minWidth=`${pe}px`,v.value.style.left=`${ee}px`}else{const Ce=L.right-j.right,ze=window.innerWidth-U.right-Ce,Ze=window.innerWidth-V.right-ze,pe=V.width+Ze,ue=Math.max(pe,L.width),Z=window.innerWidth-Ue,ee=jt(ze,Ue,Math.max(Ue,Z-ue));v.value.style.minWidth=`${pe}px`,v.value.style.right=`${ee}px`}const oe=d.value,Y=window.innerHeight-Ue*2,K=x.value.scrollHeight,W=window.getComputedStyle(k.value),G=Number.parseInt(W.borderTopWidth,10),ce=Number.parseInt(W.paddingTop,10),se=Number.parseInt(W.borderBottomWidth,10),me=Number.parseInt(W.paddingBottom,10),ge=G+ce+K+me+se,Te=Math.min(_.value.offsetHeight*5,ge),Be=window.getComputedStyle(x.value),Ge=Number.parseInt(Be.paddingTop,10),We=Number.parseInt(Be.paddingBottom,10),Oe=V.top+V.height/2-Ue,Ve=Y-Oe,Xe=_.value.offsetHeight/2,dt=_.value.offsetTop+Xe,pt=G+ce+dt,ft=ge-pt;if(pt<=Oe){const Ce=_.value===oe[oe.length-1];v.value.style.bottom="0px";const ze=k.value.clientHeight-x.value.offsetTop-x.value.offsetHeight,Ze=Math.max(Ve,Xe+(Ce?We:0)+ze+se),pe=pt+Ze;v.value.style.height=`${pe}px`}else{const Ce=_.value===oe[0];v.value.style.top="0px";const ze=Math.max(Oe,G+x.value.offsetTop+(Ce?Ge:0)+Xe)+ft;v.value.style.height=`${ze}px`,x.value.scrollTop=pt-Oe+x.value.offsetTop}v.value.style.margin=`${Ue}px 0`,v.value.style.minHeight=`${Te}px`,v.value.style.maxHeight=`${Y}px`,a("placed"),requestAnimationFrame(()=>u.value=!0)}}const I=ref("");onMounted(async()=>{await nextTick(),M(),k.value&&(I.value=window.getComputedStyle(k.value).zIndex)});function F(V){V&&f.value===!0&&(M(),B==null||B(),f.value=!1)}return Hf({contentWrapper:v,shouldExpandOnScrollRef:u,onScrollButtonChange:F}),(V,L)=>(openBlock(),createElementBlock("div",{ref_key:"contentWrapperElement",ref:v,style:normalizeStyle({display:"flex",flexDirection:"column",position:"fixed",zIndex:I.value})},[createVNode(unref(O),mergeProps({ref:unref(b),style:{boxSizing:"border-box",maxHeight:"100%"}},{...V.$attrs,...n}),{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16)],4))}}),jf=defineComponent({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:Ue},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=At(o);return(n,a)=>(openBlock(),createBlock(unref(Bt),mergeProps(unref(e),{style:{boxSizing:"border-box","--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Lt={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[_t,Uf]=Q$1("SelectContent"),Gf=defineComponent({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=wt();Gn(),ha(n.bodyLock);const{createCollection:l}=Me(),c=ref();ya(c);const d=l(c),{search:u,handleTypeaheadSearch:f}=ga(d),v=ref(),b=ref(),k=ref(),x=ref(!1),_=ref(!1);function E(){b.value&&c.value&&$n([b.value,c.value])}watch(x,()=>{E()});const{onOpenChange:B,triggerPointerDownPosRef:M}=s;watchEffect(L=>{if(!c.value)return;let U={x:0,y:0};const j=Y=>{var K,W;U={x:Math.abs(Math.round(Y.pageX)-(((K=M.value)==null?void 0:K.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((W=M.value)==null?void 0:W.y)??0))}},oe=Y=>{var K;Y.pointerType!=="touch"&&(U.x<=10&&U.y<=10?Y.preventDefault():(K=c.value)!=null&&K.contains(Y.target)||B(!1),document.removeEventListener("pointermove",j),M.value=null)};M.value!==null&&(document.addEventListener("pointermove",j),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),L(()=>{document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",oe,{capture:!0})})});function I(L){const U=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!U&&L.key.length===1&&f(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let j=d.value;if(["ArrowUp","End"].includes(L.key)&&(j=j.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const oe=L.target,Y=j.indexOf(oe);j=j.slice(Y+1)}setTimeout(()=>$n(j)),L.preventDefault()}}const F=computed(()=>n.position==="popper"?n:{}),V=At(F.value);return Uf({content:c,viewport:v,onViewportChange:L=>{v.value=L},itemRefCallback:(L,U,j)=>{var oe,Y;const K=!_.value&&!j;(((oe=s.modelValue)==null?void 0:oe.value)!==void 0&&((Y=s.modelValue)==null?void 0:Y.value)===U||K)&&(b.value=L,K&&(_.value=!0))},selectedItem:b,selectedItemText:k,onItemLeave:()=>{var L;(L=c.value)==null||L.focus()},itemTextRefCallback:(L,U,j)=>{var oe,Y;const K=!_.value&&!j;(((oe=s.modelValue)==null?void 0:oe.value)!==void 0&&((Y=s.modelValue)==null?void 0:Y.value)===U||K)&&(k.value=L)},focusSelectedItem:E,position:n.position,isPositioned:x,searchRef:u}),(L,U)=>(openBlock(),createBlock(unref(Ya),{"as-child":"",onMountAutoFocus:U[6]||(U[6]=withModifiers(()=>{},["prevent"])),onUnmountAutoFocus:U[7]||(U[7]=j=>{var oe;a("closeAutoFocus",j),!j.defaultPrevented&&((oe=unref(s).triggerElement.value)==null||oe.focus({preventScroll:!0}),j.preventDefault())})},{default:withCtx(()=>[createVNode(unref(gt$1),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:U[2]||(U[2]=withModifiers(()=>{},["prevent"])),onDismiss:U[3]||(U[3]=j=>unref(s).onOpenChange(!1)),onEscapeKeyDown:U[4]||(U[4]=j=>a("escapeKeyDown",j)),onPointerDownOutside:U[5]||(U[5]=j=>a("pointerDownOutside",j))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(L.position==="popper"?jf:Wf),mergeProps({...L.$attrs,...unref(V)},{id:unref(s).contentId,ref:j=>{c.value=unref($e)(j)},role:"listbox","data-state":unref(s).open.value?"open":"closed",dir:unref(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:U[0]||(U[0]=withModifiers(()=>{},["prevent"])),onPlaced:U[1]||(U[1]=j=>x.value=!0),onKeydown:I}),{default:withCtx(()=>[renderSlot(L.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3}))}}),qf=defineComponent({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(o){return Bs(o.context),(e,n)=>renderSlot(e.$slots,"default")}}),Yf={key:1},Ky=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=xe(n,e),s=wt(),l=ref();onMounted(()=>{l.value=new DocumentFragment});const c=ref(),d=computed(()=>n.forceMount||s.open.value);return(u,f)=>{var v;return d.value?(openBlock(),createBlock(unref(Pe$1),{key:0,ref_key:"presenceRef",ref:c,present:!0},{default:withCtx(()=>[createVNode(Gf,normalizeProps(guardReactiveProps({...unref(a),...u.$attrs})),{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},16)]),_:3},512)):!((v=c.value)!=null&&v.present)&&l.value?(openBlock(),createElementBlock("div",Yf,[(openBlock(),createBlock(Teleport,{to:l.value},[createVNode(qf,{context:unref(s)},{default:withCtx(()=>[renderSlot(u.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):createCommentVNode("",!0)}}}),[Ts,Xf]=Q$1("SelectItem"),jy=defineComponent({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{disabled:n}=toRefs(e),a=wt(),s=_t(Lt),{forwardRef:l,currentElement:c}=R(),d=computed(()=>{var E;return((E=a.modelValue)==null?void 0:E.value)===e.value}),u=ref(!1),f=ref(e.textValue??""),v=he(void 0,"radix-vue-select-item-text");async function b(E){await nextTick(),!(E!=null&&E.defaultPrevented)&&(n.value||(a.onValueChange(e.value),a.onOpenChange(!1)))}async function k(E){var B;await nextTick(),!E.defaultPrevented&&(n.value?(B=s.onItemLeave)==null||B.call(s):E.currentTarget.focus({preventScroll:!0}))}async function x(E){var B;await nextTick(),!E.defaultPrevented&&E.currentTarget===document.activeElement&&((B=s.onItemLeave)==null||B.call(s))}async function _(E){var B;await nextTick(),!(E.defaultPrevented||((B=s.searchRef)==null?void 0:B.value)!==""&&E.key===" ")&&(Kf.includes(E.key)&&b(),E.key===" "&&E.preventDefault())}if(e.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return onMounted(()=>{c.value&&s.itemRefCallback(c.value,e.value,e.disabled)}),Xf({value:e.value,disabled:n,textId:v,isSelected:d,onItemTextChange:E=>{f.value=((f.value||(E==null?void 0:E.textContent))??"").trim()}}),(E,B)=>(openBlock(),createBlock(unref(O),{ref:unref(l),role:"option","data-radix-vue-collection-item":"","aria-labelledby":unref(v),"data-highlighted":u.value?"":void 0,"aria-selected":d.value,"data-state":d.value?"checked":"unchecked","aria-disabled":unref(n)||void 0,"data-disabled":unref(n)?"":void 0,tabindex:unref(n)?void 0:-1,as:E.as,"as-child":E.asChild,onFocus:B[0]||(B[0]=M=>u.value=!0),onBlur:B[1]||(B[1]=M=>u.value=!1),onPointerup:b,onPointerdown:B[2]||(B[2]=M=>{M.currentTarget.focus({preventScroll:!0})}),onTouchend:B[3]||(B[3]=withModifiers(()=>{},["prevent","stop"])),onPointermove:k,onPointerleave:x,onKeydown:_},{default:withCtx(()=>[renderSlot(E.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"]))}}),Uy=defineComponent({__name:"SelectItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=Ts();return(a,s)=>unref(n).isSelected.value?(openBlock(),createBlock(unref(O),mergeProps({key:0,"aria-hidden":"true"},e),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16)):createCommentVNode("",!0)}}),[Zf,Jf]=Q$1("SelectGroup"),Gy=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o,n=he(void 0,"radix-vue-select-group");return Jf({id:n}),(a,s)=>(openBlock(),createBlock(unref(O),mergeProps({role:"group"},e,{"aria-labelledby":unref(n)}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Yy=defineComponent({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=o,n=wt(),a=_t(Lt),s=Nf(),l=Ts(),{forwardRef:c,currentElement:d}=R(),u=computed(()=>{var f;return h("option",{key:l.value,value:l.value,disabled:l.disabled.value,textContent:(f=d.value)==null?void 0:f.textContent})});return onMounted(()=>{d.value&&(l.onItemTextChange(d.value),a.itemTextRefCallback(d.value,l.value,l.disabled.value),s.onNativeOptionAdd(u.value))}),onBeforeUnmount(()=>{s.onNativeOptionRemove(u.value)}),(f,v)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps({id:unref(l).textId,ref:unref(c)},{...e,...f.$attrs},{"data-item-text":""}),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16,["id"]),unref(l).isSelected.value&&unref(n).valueElement.value&&!unref(n).valueElementHasChildren.value?(openBlock(),createBlock(Teleport,{key:0,to:unref(n).valueElement.value},[renderSlot(f.$slots,"default")],8,["to"])):createCommentVNode("",!0)],64))}}),Xy=defineComponent({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(o){const e=o,{nonce:n}=toRefs(e),a=Xa(n),s=_t(Lt),l=s.position==="item-aligned"?$o():void 0,{forwardRef:c,currentElement:d}=R();onMounted(()=>{s==null||s.onViewportChange(d.value)});const u=ref(0);function f(v){const b=v.currentTarget,{shouldExpandOnScrollRef:k,contentWrapper:x}=l??{};if(k!=null&&k.value&&x!=null&&x.value){const _=Math.abs(u.value-b.scrollTop);if(_>0){const E=window.innerHeight-Ue*2,B=Number.parseFloat(x.value.style.minHeight),M=Number.parseFloat(x.value.style.height),I=Math.max(B,M);if(I<E){const F=I+_,V=Math.min(E,F),L=F-V;x.value.style.height=`${V}px`,x.value.style.bottom==="0px"&&(b.scrollTop=L>0?L:0,x.value.style.justifyContent="flex-end")}}}u.value=b.scrollTop}return(v,b)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps({ref:unref(c),"data-radix-select-viewport":"",role:"presentation"},{...v.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:f}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16),createVNode(unref(O),{as:"style",nonce:unref(a)},{default:withCtx(()=>[createTextVNode(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-radix-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-radix-select-viewport]::-webkit-scrollbar { display: none; } ")]),_:1},8,["nonce"])],64))}}),Rs=defineComponent({__name:"SelectScrollButtonImpl",emits:["autoScroll"],setup(o,{emit:e}){const n=e,{injectCollection:a}=Me(),s=a(),l=_t(Lt),c=ref(null);function d(){c.value!==null&&(window.clearInterval(c.value),c.value=null)}watchEffect(()=>{const v=s.value.find(b=>b===document.activeElement);v==null||v.scrollIntoView({block:"nearest"})});function u(){c.value===null&&(c.value=window.setInterval(()=>{n("autoScroll")},50))}function f(){var v;(v=l.onItemLeave)==null||v.call(l),c.value===null&&(c.value=window.setInterval(()=>{n("autoScroll")},50))}return onBeforeUnmount(()=>d()),(v,b)=>{var k;return openBlock(),createBlock(unref(O),mergeProps({"aria-hidden":"true",style:{flexShrink:0}},(k=v.$parent)==null?void 0:k.$props,{onPointerdown:u,onPointermove:f,onPointerleave:b[0]||(b[0]=()=>{d()})}),{default:withCtx(()=>[renderSlot(v.$slots,"default")]),_:3},16)}}}),Zy=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{}},setup(o){const e=_t(Lt),n=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){l.value=v.scrollTop>0};const v=e.viewport.value;f(),v.addEventListener("scroll",f),c(()=>v.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&(n==null||n.onScrollButtonChange(s.value))}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop-f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Jy=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{}},setup(o){const e=_t(Lt),n=e.position==="item-aligned"?$o():void 0,{forwardRef:a,currentElement:s}=R(),l=ref(!1);return watchEffect(c=>{var d,u;if((d=e.viewport)!=null&&d.value&&(u=e.isPositioned)!=null&&u.value){let f=function(){const b=v.scrollHeight-v.clientHeight;l.value=Math.ceil(v.scrollTop)<b};const v=e.viewport.value;f(),v.addEventListener("scroll",f),c(()=>v.removeEventListener("scroll",f))}}),watch(s,()=>{s.value&&(n==null||n.onScrollButtonChange(s.value))}),(c,d)=>l.value?(openBlock(),createBlock(Rs,{key:0,ref:unref(a),onAutoScroll:d[0]||(d[0]=()=>{const{viewport:u,selectedItem:f}=unref(e);u!=null&&u.value&&f!=null&&f.value&&(u.value.scrollTop=u.value.scrollTop+f.value.offsetHeight)})},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},512)):createCommentVNode("",!0)}}),Qy=defineComponent({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(o){const{forwardRef:e,currentElement:n}=R(),a=wt(),s=useSlots();return onBeforeMount(()=>{var l;const c=!!Ua((l=s==null?void 0:s.default)==null?void 0:l.call(s)).length;a.onValueElementHasChildrenChange(c)}),onMounted(()=>{a.valueElement=n}),(l,c)=>(openBlock(),createBlock(unref(O),{ref:unref(e),as:l.as,"as-child":l.asChild,style:{pointerEvents:"none"}},{default:withCtx(()=>{var d;return[unref(Is)((d=unref(a).modelValue)==null?void 0:d.value)?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(toDisplayString$1(l.placeholder),1)],64)):renderSlot(l.$slots,"default",{key:1})]}),_:3},8,["as","as-child"]))}}),eg=defineComponent({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return(e,n)=>(openBlock(),createBlock(unref(O),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:withCtx(()=>[renderSlot(e.$slots,"default",{},()=>[createTextVNode("\u25BC")])]),_:3},8,["as","as-child"]))}});function Cp(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}Cp();const Np=["name","disabled","required","value","checked","data-state","data-disabled"],[Lp,zp]=Q$1("SwitchRoot"),mg=defineComponent({__name:"SwitchRoot",props:{defaultChecked:{type:Boolean},checked:{type:Boolean,default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(o,{emit:e}){const n=o,a=e,{disabled:s}=toRefs(n),l=ne$1(n,"checked",a,{defaultValue:n.defaultChecked,passive:n.checked===void 0});function c(){s.value||(l.value=!l.value)}const{forwardRef:d,currentElement:u}=R(),f=Qe(u),v=computed(()=>{var b;return n.id&&u.value?(b=document.querySelector(`[for="${n.id}"]`))==null?void 0:b.innerText:void 0});return zp({checked:l,toggleCheck:c,disabled:s}),(b,k)=>(openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(O),mergeProps(b.$attrs,{id:b.id,ref:unref(d),role:"switch",type:b.as==="button"?"button":void 0,value:b.value,"aria-label":b.$attrs["aria-label"]||v.value,"aria-checked":unref(l),"aria-required":b.required,"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,"as-child":b.asChild,as:b.as,disabled:unref(s),onClick:c,onKeydown:withKeys(withModifiers(c,["prevent"]),["enter"])}),{default:withCtx(()=>[renderSlot(b.$slots,"default",{checked:unref(l)})]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]),unref(f)?(openBlock(),createElementBlock("input",{key:0,type:"checkbox",name:b.name,tabindex:"-1","aria-hidden":"true",disabled:unref(s),required:b.required,value:b.value,checked:!!unref(l),"data-state":unref(l)?"checked":"unchecked","data-disabled":unref(s)?"":void 0,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,Np)):createCommentVNode("",!0)],64))}}),hg=defineComponent({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){const e=Lp();return R(),(n,a)=>{var s;return openBlock(),createBlock(unref(O),{"data-state":(s=unref(e).checked)!=null&&s.value?"checked":"unchecked","data-disabled":unref(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),[fn,Kp]=Q$1("TabsRoot"),yg=defineComponent({__name:"TabsRoot",props:{defaultValue:{},orientation:{default:"horizontal"},dir:{},activationMode:{default:"automatic"},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(o,{emit:e}){const n=o,a=e,{orientation:s,dir:l}=toRefs(n),c=be(l);R();const d=ne$1(n,"modelValue",a,{defaultValue:n.defaultValue,passive:n.modelValue===void 0}),u=ref();return Kp({modelValue:d,changeModelValue:f=>{d.value=f},orientation:s,dir:c,activationMode:n.activationMode,baseId:he(void 0,"radix-vue-tabs"),tabsList:u}),(f,v)=>(openBlock(),createBlock(unref(O),{dir:unref(c),"data-orientation":unref(s),"as-child":f.asChild,as:f.as},{default:withCtx(()=>[renderSlot(f.$slots,"default",{modelValue:unref(d)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),gg=defineComponent({__name:"TabsList",props:{loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},setup(o){const e=o,{loop:n}=toRefs(e),{forwardRef:a,currentElement:s}=R(),l=fn();return l.tabsList=s,(c,d)=>(openBlock(),createBlock(unref(Vt),{"as-child":"",orientation:unref(l).orientation.value,dir:unref(l).dir.value,loop:unref(n)},{default:withCtx(()=>[createVNode(unref(O),{ref:unref(a),role:"tablist","as-child":c.asChild,as:c.as,"aria-orientation":unref(l).orientation.value},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}});function lr(o,e){return`${o}-trigger-${e}`}function sr(o,e){return`${o}-content-${e}`}const bg=defineComponent({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const e=o,{forwardRef:n}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value),d=ref(c.value);return onMounted(()=>{requestAnimationFrame(()=>{d.value=!1})}),(u,f)=>(openBlock(),createBlock(unref(Pe$1),{present:c.value,"force-mount":""},{default:withCtx(({present:v})=>[createVNode(unref(O),{id:l.value,ref:unref(n),"as-child":u.asChild,as:u.as,role:"tabpanel","data-state":c.value?"active":"inactive","data-orientation":unref(a).orientation.value,"aria-labelledby":s.value,hidden:!v.value,tabindex:"0",style:normalizeStyle({animationDuration:d.value?"0s":void 0})},{default:withCtx(()=>[u.forceMount||c.value?renderSlot(u.$slots,"default",{key:0}):createCommentVNode("",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Cg=defineComponent({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,{forwardRef:n}=R(),a=fn(),s=computed(()=>lr(a.baseId,e.value)),l=computed(()=>sr(a.baseId,e.value)),c=computed(()=>e.value===a.modelValue.value);return(d,u)=>(openBlock(),createBlock(unref(Ft),{"as-child":"",focusable:!d.disabled,active:c.value},{default:withCtx(()=>[createVNode(unref(O),{id:s.value,ref:unref(n),role:"tab",type:d.as==="button"?"button":void 0,as:d.as,"as-child":d.asChild,"aria-selected":c.value?"true":"false","aria-controls":l.value,"data-state":c.value?"active":"inactive",disabled:d.disabled,"data-disabled":d.disabled?"":void 0,"data-orientation":unref(a).orientation.value,onMousedown:u[0]||(u[0]=withModifiers(f=>{!d.disabled&&f.ctrlKey===!1?unref(a).changeModelValue(d.value):f.preventDefault()},["left"])),onKeydown:u[1]||(u[1]=withKeys(f=>unref(a).changeModelValue(d.value),["enter","space"])),onFocus:u[2]||(u[2]=()=>{const f=unref(a).activationMode!=="manual";!c.value&&!d.disabled&&f&&unref(a).changeModelValue(d.value)})},{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),[vn,jp]=Q$1("ToastProvider"),$g=defineComponent({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(o){const e=o,{label:n,duration:a,swipeDirection:s,swipeThreshold:l}=toRefs(e),c=ref(),d=ref(0),u=ref(!1),f=ref(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const v="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(v)}return jp({label:n,duration:a,swipeDirection:s,swipeThreshold:l,toastCount:d,viewport:c,onViewportChange(v){c.value=v},onToastAdd(){d.value++},onToastRemove(){d.value--},isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f}),(v,b)=>renderSlot(v.$slots,"default")}}),Up="toast.swipeStart",Gp="toast.swipeMove",qp="toast.swipeCancel",Yp="toast.swipeEnd",On="toast.viewportPause",kn="toast.viewportResume";function Aa(o,e,n){const a=n.originalEvent.currentTarget,s=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(o,e,{once:!0}),a.dispatchEvent(s)}function ol(o,e,n=0){const a=Math.abs(o.x),s=Math.abs(o.y),l=a>s;return e==="left"||e==="right"?l&&a>n:!l&&s>n}function Xp(o){return o.nodeType===o.ELEMENT_NODE}function ir(o){const e=[];return Array.from(o.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Xp(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...ir(n))}}),e}const Zp=defineComponent({__name:"ToastAnnounce",setup(o){const e=vn(),n=mi(1e3),a=ref(!1);return Tl(()=>{a.value=!0}),(s,l)=>unref(n)||a.value?(openBlock(),createBlock(unref(Zt),{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(e).label.value)+" ",1),renderSlot(s.$slots,"default")]),_:3})):createCommentVNode("",!0)}}),[Jp,Qp]=Q$1("ToastRoot"),ev=defineComponent({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s,currentElement:l}=R(),c=vn(),d=ref(null),u=ref(null),f=computed(()=>typeof n.duration=="number"?n.duration:c.duration.value),v=ref(0),b=ref(f.value),k=ref(0),x=ref(f.value),_=Tl(()=>{const I=new Date().getTime()-v.value;x.value=Math.max(b.value-I,0)},{fpsLimit:60});function E(I){I<=0||I===Number.POSITIVE_INFINITY||Ye&&(window.clearTimeout(k.value),v.value=new Date().getTime(),k.value=window.setTimeout(B,I))}function B(){var I,F;(I=l.value)!=null&&I.contains(document.activeElement)&&((F=c.viewport.value)==null||F.focus()),c.isClosePausedRef.value=!1,a("close")}const M=computed(()=>l.value?ir(l.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const I="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(I)}return watchEffect(I=>{const F=c.viewport.value;if(F){const V=()=>{E(b.value),_.resume(),a("resume")},L=()=>{const U=new Date().getTime()-v.value;b.value=b.value-U,window.clearTimeout(k.value),_.pause(),a("pause")};return F.addEventListener(On,L),F.addEventListener(kn,V),()=>{F.removeEventListener(On,L),F.removeEventListener(kn,V)}}}),watch(()=>[n.open,f.value],()=>{b.value=f.value,n.open&&!c.isClosePausedRef.value&&E(f.value)},{immediate:!0}),jn("Escape",I=>{a("escapeKeyDown",I),I.defaultPrevented||(c.isFocusedToastEscapeKeyDownRef.value=!0,B())}),onMounted(()=>{c.onToastAdd()}),onUnmounted(()=>{c.onToastRemove()}),Qp({onClose:B}),(I,F)=>(openBlock(),createElementBlock(Fragment$1,null,[M.value?(openBlock(),createBlock(Zp,{key:0,role:"status","aria-live":I.type==="foreground"?"assertive":"polite","aria-atomic":""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.value),1)]),_:1},8,["aria-live"])):createCommentVNode("",!0),unref(c).viewport.value?(openBlock(),createBlock(Teleport,{key:1,to:unref(c).viewport.value},[createVNode(unref(O),mergeProps({ref:unref(s),role:"status","aria-live":"off","aria-atomic":"",tabindex:"0","data-radix-vue-collection-item":""},I.$attrs,{as:I.as,"as-child":I.asChild,"data-state":I.open?"open":"closed","data-swipe-direction":unref(c).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:F[0]||(F[0]=withModifiers(V=>{d.value={x:V.clientX,y:V.clientY}},["left"])),onPointermove:F[1]||(F[1]=V=>{if(!d.value)return;const L=V.clientX-d.value.x,U=V.clientY-d.value.y,j=!!u.value,oe=["left","right"].includes(unref(c).swipeDirection.value),Y=["left","up"].includes(unref(c).swipeDirection.value)?Math.min:Math.max,K=oe?Y(0,L):0,W=oe?0:Y(0,U),G=V.pointerType==="touch"?10:2,ce={x:K,y:W},se={originalEvent:V,delta:ce};j?(u.value=ce,unref(Aa)(unref(Gp),me=>a("swipeMove",me),se)):unref(ol)(ce,unref(c).swipeDirection.value,G)?(u.value=ce,unref(Aa)(unref(Up),me=>a("swipeStart",me),se),V.target.setPointerCapture(V.pointerId)):(Math.abs(L)>G||Math.abs(U)>G)&&(d.value=null)}),onPointerup:F[2]||(F[2]=V=>{const L=u.value,U=V.target;if(U.hasPointerCapture(V.pointerId)&&U.releasePointerCapture(V.pointerId),u.value=null,d.value=null,L){const j=V.currentTarget,oe={originalEvent:V,delta:L};unref(ol)(L,unref(c).swipeDirection.value,unref(c).swipeThreshold.value)?unref(Aa)(unref(Yp),Y=>a("swipeEnd",Y),oe):unref(Aa)(unref(qp),Y=>a("swipeCancel",Y),oe),j==null||j.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})}),{default:withCtx(()=>[renderSlot(I.$slots,"default",{remaining:x.value,duration:f.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])],8,["to"])):createCommentVNode("",!0)],64))}}),Bg=defineComponent({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(o,{emit:e}){const n=o,a=e,{forwardRef:s}=R(),l=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(c,d)=>(openBlock(),createBlock(unref(Pe$1),{present:c.forceMount||unref(l)},{default:withCtx(()=>[createVNode(ev,mergeProps({ref:unref(s),open:unref(l),type:c.type,as:c.as,"as-child":c.asChild,duration:c.duration},c.$attrs,{onClose:d[0]||(d[0]=u=>l.value=!1),onPause:d[1]||(d[1]=u=>a("pause")),onResume:d[2]||(d[2]=u=>a("resume")),onEscapeKeyDown:d[3]||(d[3]=u=>a("escapeKeyDown",u)),onSwipeStart:d[4]||(d[4]=u=>{a("swipeStart",u),u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:d[5]||(d[5]=u=>{const{x:f,y:v}=u.detail.delta,b=u.currentTarget;b.setAttribute("data-swipe","move"),b.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),b.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:d[6]||(d[6]=u=>{const f=u.currentTarget;f.setAttribute("data-swipe","cancel"),f.style.removeProperty("--radix-toast-swipe-move-x"),f.style.removeProperty("--radix-toast-swipe-move-y"),f.style.removeProperty("--radix-toast-swipe-end-x"),f.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:d[7]||(d[7]=u=>{const{x:f,y:v}=u.detail.delta,b=u.currentTarget;b.setAttribute("data-swipe","end"),b.style.removeProperty("--radix-toast-swipe-move-x"),b.style.removeProperty("--radix-toast-swipe-move-y"),b.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),b.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),l.value=!1})}),{default:withCtx(({remaining:u,duration:f})=>[renderSlot(c.$slots,"default",{remaining:u,duration:f,open:unref(l)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),ur=defineComponent({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(o){return(e,n)=>(openBlock(),createBlock(unref(O),{as:e.as,"as-child":e.asChild,"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":e.altText||void 0},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["as","as-child","data-radix-toast-announce-alt"]))}}),tv=defineComponent({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=Jp(),{forwardRef:a}=R();return(s,l)=>(openBlock(),createBlock(ur,{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps(e,{ref:unref(a),type:s.as==="button"?"button":void 0,onClick:l[0]||(l[0]=c=>unref(n).onClose())}),{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3},16,["type"])]),_:3}))}}),Tg=defineComponent({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{}},setup(o){if(!o.altText)throw new Error("Missing prop `altText` expected on `ToastAction`");const{forwardRef:e}=R();return(n,a)=>n.altText?(openBlock(),createBlock(ur,{key:0,"alt-text":n.altText,"as-child":""},{default:withCtx(()=>[createVNode(tv,{ref:unref(e),as:n.as,"as-child":n.asChild},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["as","as-child"])]),_:3},8,["alt-text"])):createCommentVNode("",!0)}}),ll=defineComponent({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(o,{emit:e}){const n=e,a=vn();return(s,l)=>(openBlock(),createBlock(unref(Zt),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:l[0]||(l[0]=c=>{var d;const u=c.relatedTarget;!((d=unref(a).viewport.value)!=null&&d.contains(u))&&n("focusFromOutsideViewport")})},{default:withCtx(()=>[renderSlot(s.$slots,"default")]),_:3}))}}),Rg=defineComponent({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(o){const e=o,{hotkey:n,label:a}=toRefs(e),{forwardRef:s,currentElement:l}=R(),{createCollection:c}=Me(),d=c(l),u=vn(),f=computed(()=>u.toastCount.value>0),v=ref(),b=ref(),k=computed(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));jn(n.value,()=>{l.value.focus()}),onMounted(()=>{u.onViewportChange(l.value)}),watchEffect(_=>{const E=l.value;if(f.value&&E){const B=()=>{if(!u.isClosePausedRef.value){const L=new CustomEvent(On);E.dispatchEvent(L),u.isClosePausedRef.value=!0}},M=()=>{if(u.isClosePausedRef.value){const L=new CustomEvent(kn);E.dispatchEvent(L),u.isClosePausedRef.value=!1}},I=L=>{!E.contains(L.relatedTarget)&&M()},F=()=>{E.contains(document.activeElement)||M()},V=L=>{var U,j,oe;const Y=L.altKey||L.ctrlKey||L.metaKey;if(L.key==="Tab"&&!Y){const K=document.activeElement,W=L.shiftKey;if(L.target===E&&W){(U=v.value)==null||U.focus();return}const G=x({tabbingDirection:W?"backwards":"forwards"}),ce=G.findIndex(se=>se===K);Oa(G.slice(ce+1))?L.preventDefault():W?(j=v.value)==null||j.focus():(oe=b.value)==null||oe.focus()}};E.addEventListener("focusin",B),E.addEventListener("focusout",I),E.addEventListener("pointermove",B),E.addEventListener("pointerleave",F),E.addEventListener("keydown",V),window.addEventListener("blur",B),window.addEventListener("focus",M),_(()=>{E.removeEventListener("focusin",B),E.removeEventListener("focusout",I),E.removeEventListener("pointermove",B),E.removeEventListener("pointerleave",F),E.removeEventListener("keydown",V),window.removeEventListener("blur",B),window.removeEventListener("focus",M)})}});function x({tabbingDirection:_}){const E=d.value.map(B=>{const M=[B,...Jn(B)];return _==="forwards"?M:M.reverse()});return(_==="forwards"?E.reverse():E).flat()}return(_,E)=>(openBlock(),createBlock(unref(ou),{role:"region","aria-label":typeof unref(a)=="string"?unref(a).replace("{hotkey}",k.value):unref(a)(k.value),tabindex:"-1",style:normalizeStyle({pointerEvents:f.value?void 0:"none"})},{default:withCtx(()=>[f.value?(openBlock(),createBlock(ll,{key:0,ref:B=>{v.value=unref($e)(B)},onFocusFromOutsideViewport:E[0]||(E[0]=()=>{const B=x({tabbingDirection:"forwards"});unref(Oa)(B)})},null,512)):createCommentVNode("",!0),createVNode(unref(O),mergeProps({ref:unref(s),tabindex:"-1",as:_.as,"as-child":_.asChild},_.$attrs),{default:withCtx(()=>[renderSlot(_.$slots,"default")]),_:3},16,["as","as-child"]),f.value?(openBlock(),createBlock(ll,{key:1,ref:B=>{b.value=unref($e)(B)},onFocusFromOutsideViewport:E[1]||(E[1]=()=>{const B=x({tabbingDirection:"backwards"});unref(Oa)(B)})},null,512)):createCommentVNode("",!0)]),_:3},8,["aria-label","style"]))}}),Ag=defineComponent({__name:"ToastTitle",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),Og=defineComponent({__name:"ToastDescription",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return R(),(n,a)=>(openBlock(),createBlock(unref(O),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),cr="tooltip.open",[Oo,uv]=Q$1("TooltipProvider"),Lg=defineComponent({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{default:700},skipDelayDuration:{default:300},disableHoverableContent:{type:Boolean,default:!1},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean,default:!1}},setup(o){const e=o,{delayDuration:n,skipDelayDuration:a,disableHoverableContent:s,disableClosingTrigger:l,ignoreNonKeyboardFocus:c,disabled:d}=toRefs(e);R();const u=ref(!0),f=ref(!1),{start:v,stop:b}=Wn(()=>{u.value=!0},a,{immediate:!1});return uv({isOpenDelayed:u,delayDuration:n,onOpen(){b(),u.value=!1},onClose(){v()},isPointerInTransitRef:f,disableHoverableContent:s,disableClosingTrigger:l,disabled:d,ignoreNonKeyboardFocus:c}),(k,x)=>renderSlot(k.$slots,"default")}}),[mn,dv]=Q$1("TooltipRoot"),zg=defineComponent({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},delayDuration:{default:void 0},disableHoverableContent:{type:Boolean,default:void 0},disableClosingTrigger:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const n=o,a=e;R();const s=Oo(),l=computed(()=>n.disableHoverableContent??s.disableHoverableContent.value),c=computed(()=>n.disableClosingTrigger??s.disableClosingTrigger.value),d=computed(()=>n.disabled??s.disabled.value),u=computed(()=>n.delayDuration??s.delayDuration.value),f=computed(()=>n.ignoreNonKeyboardFocus??s.ignoreNonKeyboardFocus.value),v=ne$1(n,"open",a,{defaultValue:n.defaultOpen,passive:n.open===void 0});watch(v,F=>{s.onClose&&(F?(s.onOpen(),document.dispatchEvent(new CustomEvent(cr))):s.onClose())});const b=ref(!1),k=ref(),x=computed(()=>v.value?b.value?"delayed-open":"instant-open":"closed"),{start:_,stop:E}=Wn(()=>{b.value=!0,v.value=!0},u,{immediate:!1});function B(){E(),b.value=!1,v.value=!0}function M(){E(),v.value=!1}function I(){_()}return dv({contentId:"",open:v,stateAttribute:x,trigger:k,onTriggerChange(F){k.value=F},onTriggerEnter(){s.isOpenDelayed.value?I():B()},onTriggerLeave(){l.value?M():E()},onOpen:B,onClose:M,disableHoverableContent:l,disableClosingTrigger:c,disabled:d,ignoreNonKeyboardFocus:f}),(F,V)=>(openBlock(),createBlock(unref(Ot),null,{default:withCtx(()=>[renderSlot(F.$slots,"default",{open:unref(v)})]),_:3}))}}),Kg=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o,n=mn(),a=Oo();n.contentId||(n.contentId=he(void 0,"radix-vue-tooltip-content"));const{forwardRef:s,currentElement:l}=R(),c=ref(!1),d=ref(!1),u=computed(()=>n.disabled.value?{}:{click:E,focus:x,pointermove:b,pointerleave:k,pointerdown:v,blur:_});onMounted(()=>{n.onTriggerChange(l.value)});function f(){setTimeout(()=>{c.value=!1},1)}function v(){c.value=!0,document.addEventListener("pointerup",f,{once:!0})}function b(B){B.pointerType!=="touch"&&!d.value&&!a.isPointerInTransitRef.value&&(n.onTriggerEnter(),d.value=!0)}function k(){n.onTriggerLeave(),d.value=!1}function x(B){var M,I;c.value||n.ignoreNonKeyboardFocus.value&&!((I=(M=B.target).matches)!=null&&I.call(M,":focus-visible"))||n.onOpen()}function _(){n.onClose()}function E(){n.disableClosingTrigger.value||n.onClose()}return(B,M)=>(openBlock(),createBlock(unref(kt),{"as-child":""},{default:withCtx(()=>[createVNode(unref(O),mergeProps({ref:unref(s),"aria-describedby":unref(n).open.value?unref(n).contentId:void 0,"data-state":unref(n).stateAttribute.value,as:B.as,"as-child":e.asChild,"data-grace-area-trigger":""},toHandlers(u.value)),{default:withCtx(()=>[renderSlot(B.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3}))}}),fr=defineComponent({__name:"TooltipContentImpl",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{default:0},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},arrowPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=mn(),{forwardRef:l}=R(),c=useSlots(),d=computed(()=>{var v;return(v=c.default)==null?void 0:v.call(c)}),u=computed(()=>{var v;if(n.ariaLabel)return n.ariaLabel;let b="";function k(x){typeof x.children=="string"&&x.type!==Comment?b+=x.children:Array.isArray(x.children)&&x.children.forEach(_=>k(_))}return(v=d.value)==null||v.forEach(x=>k(x)),b}),f=computed(()=>{const{ariaLabel:v,...b}=n;return b});return onMounted(()=>{Le(window,"scroll",v=>{const b=v.target;b!=null&&b.contains(s.trigger.value)&&s.onClose()}),Le(window,cr,s.onClose)}),(v,b)=>(openBlock(),createBlock(unref(gt$1),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:b[0]||(b[0]=k=>a("escapeKeyDown",k)),onPointerDownOutside:b[1]||(b[1]=k=>{var x;unref(s).disableClosingTrigger.value&&(x=unref(s).trigger.value)!=null&&x.contains(k.target)&&k.preventDefault(),a("pointerDownOutside",k)}),onFocusOutside:b[2]||(b[2]=withModifiers(()=>{},["prevent"])),onDismiss:b[3]||(b[3]=k=>unref(s).onClose())},{default:withCtx(()=>[createVNode(unref(Bt),mergeProps({ref:unref(l),"data-state":unref(s).stateAttribute.value},{...v.$attrs,...f.value},{style:{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:withCtx(()=>[renderSlot(v.$slots,"default"),createVNode(unref(Zt),{id:unref(s).contentId,role:"tooltip"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(u.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),cv=defineComponent({__name:"TooltipContentHoverable",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},setup(o){const e=At(o),{forwardRef:n,currentElement:a}=R(),{trigger:s,onClose:l}=mn(),c=Oo(),{isPointerInTransit:d,onPointerExit:u}=kl(s,a);return c.isPointerInTransitRef=d,u(()=>{l()}),(f,v)=>(openBlock(),createBlock(fr,mergeProps({ref:unref(n)},unref(e)),{default:withCtx(()=>[renderSlot(f.$slots,"default")]),_:3},16))}}),Hg=defineComponent({__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const n=o,a=e,s=mn(),l=xe(n,a),{forwardRef:c}=R();return(d,u)=>(openBlock(),createBlock(unref(Pe$1),{present:d.forceMount||unref(s).open.value},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(s).disableHoverableContent.value?fr:cv),mergeProps({ref:unref(c)},unref(l)),{default:withCtx(()=>[renderSlot(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),jg=defineComponent({__name:"TooltipPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(o){const e=o;return(n,a)=>(openBlock(),createBlock(unref(ot$1),normalizeProps(guardReactiveProps(e)),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16))}}),_sfc_main$2v=defineComponent({__name:"Button",props:{variant:{type:null,required:!1},size:{type:null,required:!1},class:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn},get Primitive(){return O},get buttonVariants(){return buttonVariants}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_export_sfc=(o,e)=>{const n=o.__vccOpts||o;for(const[a,s]of e)n[a]=s;return n};function _sfc_render$2v(o,e,n,a,s,l){return openBlock(),createBlock(a.Primitive,{as:n.as,"as-child":n.asChild,class:normalizeClass(a.cn(a.buttonVariants({variant:n.variant,size:n.size}),a.props.class))},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","class"])}const Button=_export_sfc(_sfc_main$2v,[["render",_sfc_render$2v],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/button/Button.vue"]]),buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),_sfc_main$2u=defineComponent({__name:"Card",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2u(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("rounded-lg border bg-card text-card-foreground shadow-sm",a.props.class))},[renderSlot(o.$slots,"default")],2)}const Card=_export_sfc(_sfc_main$2u,[["render",_sfc_render$2u],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/Card.vue"]]),_sfc_main$2t=defineComponent({__name:"CardContent",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2t(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("p-6 pt-0",a.props.class))},[renderSlot(o.$slots,"default")],2)}const CardContent=_export_sfc(_sfc_main$2t,[["render",_sfc_render$2t],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/CardContent.vue"]]),_sfc_main$2s=defineComponent({__name:"CardDescription",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2s(o,e,n,a,s,l){return openBlock(),createElementBlock("p",{class:normalizeClass(a.cn("text-sm text-muted-foreground",a.props.class))},[renderSlot(o.$slots,"default")],2)}const CardDescription=_export_sfc(_sfc_main$2s,[["render",_sfc_render$2s],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/CardDescription.vue"]]),_sfc_main$2r=defineComponent({__name:"CardFooter",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2r(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex items-center p-6 pt-0",a.props.class))},[renderSlot(o.$slots,"default")],2)}const CardFooter=_export_sfc(_sfc_main$2r,[["render",_sfc_render$2r],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/CardFooter.vue"]]),_sfc_main$2q=defineComponent({__name:"CardHeader",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2q(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex flex-col gap-y-1.5 p-6",a.props.class))},[renderSlot(o.$slots,"default")],2)}const CardHeader=_export_sfc(_sfc_main$2q,[["render",_sfc_render$2q],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/CardHeader.vue"]]),_sfc_main$2p=defineComponent({__name:"CardTitle",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2p(o,e,n,a,s,l){return openBlock(),createElementBlock("h3",{class:normalizeClass(a.cn("text-2xl font-semibold leading-none tracking-tight",a.props.class))},[renderSlot(o.$slots,"default")],2)}const CardTitle=_export_sfc(_sfc_main$2p,[["render",_sfc_render$2p],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/card/CardTitle.vue"]]),_sfc_main$2o=defineComponent({__name:"Tabs",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},activationMode:{type:String,required:!1},modelValue:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get TabsRoot(){return yg}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$2o(o,e,n,a,s,l){return openBlock(),createBlock(a.TabsRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Tabs=_export_sfc(_sfc_main$2o,[["render",_sfc_render$2o],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tabs/Tabs.vue"]]),_sfc_main$2n=defineComponent({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get TabsContent(){return bg}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$2n(o,e,n,a,s,l){return openBlock(),createBlock(a.TabsContent,mergeProps({class:a.cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a.props.class)},a.delegatedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const TabsContent=_export_sfc(_sfc_main$2n,[["render",_sfc_render$2n],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tabs/TabsContent.vue"]]),_sfc_main$2m=defineComponent({__name:"TabsList",props:{loop:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get TabsList(){return gg}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$2m(o,e,n,a,s,l){return openBlock(),createBlock(a.TabsList,mergeProps(a.delegatedProps,{class:a.cn("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const TabsList=_export_sfc(_sfc_main$2m,[["render",_sfc_render$2m],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tabs/TabsList.vue"]]),_sfc_main$2l=defineComponent({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get TabsTrigger(){return Cg}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),_hoisted_1$N={class:"truncate"};function _sfc_render$2l(o,e,n,a,s,l){return openBlock(),createBlock(a.TabsTrigger,mergeProps(a.forwardedProps,{class:a.cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a.props.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$N,[renderSlot(o.$slots,"default")])]),_:3},16,["class"])}const TabsTrigger=_export_sfc(_sfc_main$2l,[["render",_sfc_render$2l],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tabs/TabsTrigger.vue"]]);var util;(function(o){o.assertEqual=s=>s;function e(s){}o.assertIs=e;function n(s){throw new Error}o.assertNever=n,o.arrayToEnum=s=>{const l={};for(const c of s)l[c]=c;return l},o.getValidEnumValues=s=>{const l=o.objectKeys(s).filter(d=>typeof s[s[d]]!="number"),c={};for(const d of l)c[d]=s[d];return o.objectValues(c)},o.objectValues=s=>o.objectKeys(s).map(function(l){return s[l]}),o.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push(c);return l},o.find=(s,l)=>{for(const c of s)if(l(c))return c},o.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function a(s,l=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}o.joinValues=a,o.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(util||(util={}));var objectUtil;(function(o){o.mergeShapes=(e,n)=>({...e,...n})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=o=>{switch(typeof o){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(o)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(o)?ZodParsedType.array:o===null?ZodParsedType.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&o instanceof Map?ZodParsedType.map:typeof Set<"u"&&o instanceof Set?ZodParsedType.set:typeof Date<"u"&&o instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=o=>JSON.stringify(o,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},a={_errors:[]},s=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)a._errors.push(n(c));else{let d=a,u=0;for(;u<c.path.length;){const f=c.path[u];u===c.path.length-1?(d[f]=d[f]||{_errors:[]},d[f]._errors.push(n(c))):d[f]=d[f]||{_errors:[]},d=d[f],u++}}};return s(this),a}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},a=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}ZodError.create=o=>new ZodError(o);const errorMap=(o,e)=>{let n;switch(o.code){case ZodIssueCode.invalid_type:o.received===ZodParsedType.undefined?n="Required":n=`Expected ${o.expected}, received ${o.received}`;break;case ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(o.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${util.joinValues(o.keys,", ")}`;break;case ZodIssueCode.invalid_union:n="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${util.joinValues(o.options)}`;break;case ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${util.joinValues(o.options)}, received '${o.received}'`;break;case ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case ZodIssueCode.invalid_date:n="Invalid date";break;case ZodIssueCode.invalid_string:typeof o.validation=="object"?"includes"in o.validation?(n=`Invalid input: must include "${o.validation.includes}"`,typeof o.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${o.validation.position}`)):"startsWith"in o.validation?n=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?n=`Invalid input: must end with "${o.validation.endsWith}"`:util.assertNever(o.validation):o.validation!=="regex"?n=`Invalid ${o.validation}`:n="Invalid";break;case ZodIssueCode.too_small:o.type==="array"?n=`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?n=`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?n=`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?n=`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(o.minimum))}`:n="Invalid input";break;case ZodIssueCode.too_big:o.type==="array"?n=`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?n=`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?n=`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="bigint"?n=`BigInt must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?n=`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(o.maximum))}`:n="Invalid input";break;case ZodIssueCode.custom:n="Invalid input";break;case ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${o.multipleOf}`;break;case ZodIssueCode.not_finite:n="Number must be finite";break;default:n=e.defaultError,util.assertNever(o)}return{message:n}};let overrideErrorMap=errorMap;function setErrorMap(o){overrideErrorMap=o}function getErrorMap(){return overrideErrorMap}const makeIssue=o=>{const{data:e,path:n,errorMaps:a,issueData:s}=o,l=[...n,...s.path||[]],c={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let d="";const u=a.filter(f=>!!f).slice().reverse();for(const f of u)d=f(c,{data:e,defaultError:d}).message;return{...s,path:l,message:d}},EMPTY_PATH=[];function addIssueToContext(o,e){const n=getErrorMap(),a=makeIssue({issueData:e,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,n,n===errorMap?void 0:errorMap].filter(s=>!!s)});o.common.issues.push(a)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const a=[];for(const s of n){if(s.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,n){const a=[];for(const s of n){const l=await s.key,c=await s.value;a.push({key:l,value:c})}return ParseStatus.mergeObjectSync(e,a)}static mergeObjectSync(e,n){const a={};for(const s of n){const{key:l,value:c}=s;if(l.status==="aborted"||c.status==="aborted")return INVALID;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(a[l.value]=c.value)}return{status:e.value,value:a}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=o=>({status:"dirty",value:o}),OK=o=>({status:"valid",value:o}),isAborted=o=>o.status==="aborted",isDirty=o=>o.status==="dirty",isValid=o=>o.status==="valid",isAsync=o=>typeof Promise<"u"&&o instanceof Promise;function __classPrivateFieldGet(o,e,n,a){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(o)}function __classPrivateFieldSet(o,e,n,a,s){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,n),n}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(o){o.errToObj=e=>typeof e=="string"?{message:e}:e||{},o.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,n,a,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(o,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ZodError(o.common.issues);return this._error=n,this._error}}};function processCreateParams(o){if(!o)return{};const{errorMap:e,invalid_type_error:n,required_error:a,description:s}=o;if(e&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,c)=>{var d,u;const{message:f}=o;return l.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(d=f??a)!==null&&d!==void 0?d:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??n)!==null&&u!==void 0?u:c.defaultError}},description:s}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(isAsync(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const a=this.safeParse(e,n);if(a.success)return a.data;throw a.error}safeParse(e,n){var a;const s={common:{issues:[],async:(a=n==null?void 0:n.async)!==null&&a!==void 0?a:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},l=this._parseSync({data:e,path:s.path,parent:s});return handleResult(s,l)}"~validate"(e){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return isValid(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((a=(n=l==null?void 0:l.message)===null||n===void 0?void 0:n.toLowerCase())===null||a===void 0)&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>isValid(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,n){const a=await this.safeParseAsync(e,n);if(a.success)return a.data;throw a.error}async safeParseAsync(e,n){const a={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parse({data:e,path:a.path,parent:a}),l=await(isAsync(s)?s:Promise.resolve(s));return handleResult(a,l)}refine(e,n){const a=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,l)=>{const c=e(s),d=()=>l.addIssue({code:ZodIssueCode.custom,...a(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof n=="function"?n(a,s):n),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:n,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:n,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(o){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return o.precision?e=`${e}\\.\\d{${o.precision}}`:o.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(o){return new RegExp(`^${timeRegexSource(o)}$`)}function datetimeRegex(o){let e=`${dateRegexSource}T${timeRegexSource(o)}`;const n=[];return n.push(o.local?"Z?":"Z"),o.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(o,e){return!!((e==="v4"||!e)&&ipv4Regex.test(o)||(e==="v6"||!e)&&ipv6Regex.test(o))}function isValidJWT(o,e){if(!jwtRegex.test(o))return!1;try{const[n]=o.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function isValidCidr(o,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(o)||(e==="v6"||!e)&&ipv6CidrRegex.test(o))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:s.parsedType}),INVALID}const n=new ParseStatus;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const l=e.data.length>s.value,c=e.data.length<s.value;(l||c)&&(a=this._getOrReturnCtx(e,a),l?addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")emailRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"email",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"emoji",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")uuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"uuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")nanoidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")cuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")cuid2Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")ulidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ulid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"url",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"regex",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?datetimeRegex(s).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?dateRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?timeRegex(s).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?durationRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"duration",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?isValidIP(e.data,s.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ip",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?isValidJWT(e.data,s.alg)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"jwt",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?isValidCidr(e.data,s.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cidr",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?base64Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?base64urlRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64url",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):util.assertNever(s);return{status:n.value,value:e.data}}_regex(e,n,a){return this.refinement(s=>e.test(s),{validation:n,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(a)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var n,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...errorUtil.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(n)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodString.create=o=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=o==null?void 0:o.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(o)})};function floatSafeRemainder(o,e){const n=(o.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=n>a?n:a,l=parseInt(o.toFixed(s).replace(".","")),c=parseInt(e.toFixed(s).replace(".",""));return l%c/Math.pow(10,s)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:s.parsedType}),INVALID}let n;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="int"?util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?floatSafeRemainder(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_finite,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,a,s){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ZodNumber.create=o=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(o==null?void 0:o.coerce)||!1,...processCreateParams(o)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let n;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:n.parsedType}),INVALID}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,a,s){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:errorUtil.toString(s)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodBigInt.create=o=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=o==null?void 0:o.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(o)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:n.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=o=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(o==null?void 0:o.coerce)||!1,...processCreateParams(o)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:s.parsedType}),INVALID}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_date}),INVALID}const n=new ParseStatus;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):util.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ZodDate.create=o=>new ZodDate({checks:[],coerce:(o==null?void 0:o.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(o)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:n.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=o=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(o)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:n.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=o=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(o)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:n.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=o=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(o)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=o=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(o)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=o=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(o)});class ZodNever extends ZodType{_parse(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:n.parsedType}),INVALID}}ZodNever.create=o=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(o)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:n.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=o=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(o)});class ZodArray extends ZodType{_parse(e){const{ctx:n,status:a}=this._processInputParams(e),s=this._def;if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,d=n.data.length<s.exactLength.value;(c||d)&&(addIssueToContext(n,{code:c?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:d?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>s.type._parseAsync(new ParseInputLazyPath(n,c,n.path,d)))).then(c=>ParseStatus.mergeArray(a,c));const l=[...n.data].map((c,d)=>s.type._parseSync(new ParseInputLazyPath(n,c,n.path,d)));return ParseStatus.mergeArray(a,l)}get element(){return this._def.type}min(e,n){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(n)}})}length(e,n){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(n)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(o,e)=>new ZodArray({type:o,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(o){if(o instanceof ZodObject){const e={};for(const n in o.shape){const a=o.shape[n];e[n]=ZodOptional.create(deepPartialify(a))}return new ZodObject({...o._def,shape:()=>e})}else return o instanceof ZodArray?new ZodArray({...o._def,type:deepPartialify(o.element)}):o instanceof ZodOptional?ZodOptional.create(deepPartialify(o.unwrap())):o instanceof ZodNullable?ZodNullable.create(deepPartialify(o.unwrap())):o instanceof ZodTuple?ZodTuple.create(o.items.map(e=>deepPartialify(e))):o}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=util.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:u.parsedType}),INVALID}const{status:n,ctx:a}=this._processInputParams(e),{shape:s,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const u in a.data)l.includes(u)||c.push(u);const d=[];for(const u of l){const f=s[u],v=a.data[u];d.push({key:{status:"valid",value:u},value:f._parse(new ParseInputLazyPath(a,v,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof ZodNever){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of c)d.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(u==="strict")c.length>0&&(addIssueToContext(a,{code:ZodIssueCode.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of c){const v=a.data[f];d.push({key:{status:"valid",value:f},value:u._parse(new ParseInputLazyPath(a,v,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of d){const v=await f.key,b=await f.value;u.push({key:v,value:b,alwaysSet:f.alwaysSet})}return u}).then(u=>ParseStatus.mergeObjectSync(n,u)):ParseStatus.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,a)=>{var s,l,c,d;const u=(c=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,n,a).message)!==null&&c!==void 0?c:a.defaultError;return n.code==="unrecognized_keys"?{message:(d=errorUtil.errToObj(e).message)!==null&&d!==void 0?d:u}:{message:u}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const n={};return util.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(n[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>n})}omit(e){const n={};return util.objectKeys(this.shape).forEach(a=>{e[a]||(n[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>n})}deepPartial(){return deepPartialify(this)}partial(e){const n={};return util.objectKeys(this.shape).forEach(a=>{const s=this.shape[a];e&&!e[a]?n[a]=s:n[a]=s.optional()}),new ZodObject({...this._def,shape:()=>n})}required(e){const n={};return util.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])n[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof ZodOptional;)s=s._def.innerType;n[a]=s}}),new ZodObject({...this._def,shape:()=>n})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(o,e)=>new ZodObject({shape:()=>o,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)}),ZodObject.strictCreate=(o,e)=>new ZodObject({shape:()=>o,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)}),ZodObject.lazycreate=(o,e)=>new ZodObject({shape:o,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a=this._def.options;function s(l){for(const d of l)if(d.result.status==="valid")return d.result;for(const d of l)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=l.map(d=>new ZodError(d.ctx.common.issues));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:c}),INVALID}if(n.common.async)return Promise.all(a.map(async l=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(s);{let l;const c=[];for(const u of a){const f={...n,common:{...n.common,issues:[]},parent:null},v=u._parseSync({data:n.data,path:n.path,parent:f});if(v.status==="valid")return v;v.status==="dirty"&&!l&&(l={result:v,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const d=c.map(u=>new ZodError(u));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(o,e)=>new ZodUnion({options:o,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=o=>o instanceof ZodLazy?getDiscriminator(o.schema):o instanceof ZodEffects?getDiscriminator(o.innerType()):o instanceof ZodLiteral?[o.value]:o instanceof ZodEnum?o.options:o instanceof ZodNativeEnum?util.objectValues(o.enum):o instanceof ZodDefault?getDiscriminator(o._def.innerType):o instanceof ZodUndefined?[void 0]:o instanceof ZodNull?[null]:o instanceof ZodOptional?[void 0,...getDiscriminator(o.unwrap())]:o instanceof ZodNullable?[null,...getDiscriminator(o.unwrap())]:o instanceof ZodBranded||o instanceof ZodReadonly?getDiscriminator(o.unwrap()):o instanceof ZodCatch?getDiscriminator(o._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const a=this.discriminator,s=n.data[a],l=this.optionsMap.get(s);return l?n.common.async?l._parseAsync({data:n.data,path:n.path,parent:n}):l._parseSync({data:n.data,path:n.path,parent:n}):(addIssueToContext(n,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,a){const s=new Map;for(const l of n){const c=getDiscriminator(l.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of c){if(s.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);s.set(d,l)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...processCreateParams(a)})}}function mergeValues(o,e){const n=getParsedType(o),a=getParsedType(e);if(o===e)return{valid:!0,data:o};if(n===ZodParsedType.object&&a===ZodParsedType.object){const s=util.objectKeys(e),l=util.objectKeys(o).filter(d=>s.indexOf(d)!==-1),c={...o,...e};for(const d of l){const u=mergeValues(o[d],e[d]);if(!u.valid)return{valid:!1};c[d]=u.data}return{valid:!0,data:c}}else if(n===ZodParsedType.array&&a===ZodParsedType.array){if(o.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<o.length;l++){const c=o[l],d=e[l],u=mergeValues(c,d);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===ZodParsedType.date&&a===ZodParsedType.date&&+o==+e?{valid:!0,data:o}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=(l,c)=>{if(isAborted(l)||isAborted(c))return INVALID;const d=mergeValues(l.value,c.value);return d.valid?((isDirty(l)||isDirty(c))&&n.dirty(),{status:n.value,value:d.data}):(addIssueToContext(a,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([l,c])=>s(l,c)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ZodIntersection.create=(o,e,n)=>new ZodIntersection({left:o,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(n)});class ZodTuple extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(a.data.length<this._def.items.length)return addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&a.data.length>this._def.items.length&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...a.data].map((l,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ParseInputLazyPath(a,l,a.path,c)):null}).filter(l=>!!l);return a.common.async?Promise.all(s).then(l=>ParseStatus.mergeArray(n,l)):ParseStatus.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(o,e)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:o,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const s=[],l=this._def.keyType,c=this._def.valueType;for(const d in a.data)s.push({key:l._parse(new ParseInputLazyPath(a,d,a.path,d)),value:c._parse(new ParseInputLazyPath(a,a.data[d],a.path,d)),alwaysSet:d in a.data});return a.common.async?ParseStatus.mergeObjectAsync(n,s):ParseStatus.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,a){return n instanceof ZodType?new ZodRecord({keyType:e,valueType:n,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.map)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:a.parsedType}),INVALID;const s=this._def.keyType,l=this._def.valueType,c=[...a.data.entries()].map(([d,u],f)=>({key:s._parse(new ParseInputLazyPath(a,d,a.path,[f,"key"])),value:l._parse(new ParseInputLazyPath(a,u,a.path,[f,"value"]))}));if(a.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const u of c){const f=await u.key,v=await u.value;if(f.status==="aborted"||v.status==="aborted")return INVALID;(f.status==="dirty"||v.status==="dirty")&&n.dirty(),d.set(f.value,v.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const u of c){const f=u.key,v=u.value;if(f.status==="aborted"||v.status==="aborted")return INVALID;(f.status==="dirty"||v.status==="dirty")&&n.dirty(),d.set(f.value,v.value)}return{status:n.value,value:d}}}}ZodMap.create=(o,e,n)=>new ZodMap({valueType:e,keyType:o,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(n)});class ZodSet extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.set)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:a.parsedType}),INVALID;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const l=this._def.valueType;function c(u){const f=new Set;for(const v of u){if(v.status==="aborted")return INVALID;v.status==="dirty"&&n.dirty(),f.add(v.value)}return{status:n.value,value:f}}const d=[...a.data.values()].map((u,f)=>l._parse(new ParseInputLazyPath(a,u,a.path,f)));return a.common.async?Promise.all(d).then(u=>c(u)):c(d)}min(e,n){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ZodSet.create=(o,e)=>new ZodSet({valueType:o,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.function)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:n.parsedType}),INVALID;function a(d,u){return makeIssue({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:u}})}function s(d,u){return makeIssue({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:u}})}const l={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof ZodPromise){const d=this;return OK(async function(...u){const f=new ZodError([]),v=await d._def.args.parseAsync(u,l).catch(k=>{throw f.addIssue(a(u,k)),f}),b=await Reflect.apply(c,this,v);return await d._def.returns._def.type.parseAsync(b,l).catch(k=>{throw f.addIssue(s(b,k)),f})})}else{const d=this;return OK(function(...u){const f=d._def.args.safeParse(u,l);if(!f.success)throw new ZodError([a(u,f.error)]);const v=Reflect.apply(c,this,f.data),b=d._def.returns.safeParse(v,l);if(!b.success)throw new ZodError([s(v,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,a){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:n||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(a)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZodLazy.create=(o,e)=>new ZodLazy({getter:o,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(o,e)=>new ZodLiteral({value:o,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(o,e){return new ZodEnum({values:o,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(n,{expected:util.joinValues(a),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const n=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ZodEnum.create(e,{...this._def,...n})}exclude(e,n=this._def){return ZodEnum.create(this.options.filter(a=>!e.includes(a)),{...this._def,...n})}}_ZodEnum_cache=new WeakMap,ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const n=util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==ZodParsedType.string&&a.parsedType!==ZodParsedType.number){const s=util.objectValues(n);return addIssueToContext(a,{expected:util.joinValues(s),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const s=util.objectValues(n);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:s}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap,ZodNativeEnum.create=(o,e)=>new ZodNativeEnum({values:o,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.promise&&n.common.async===!1)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:n.parsedType}),INVALID;const a=n.parsedType===ZodParsedType.promise?n.data:Promise.resolve(n.data);return OK(a.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ZodPromise.create=(o,e)=>new ZodPromise({type:o,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:c=>{addIssueToContext(a,c),c.fatal?n.abort():n.dirty()},get path(){return a.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const c=s.transform(a.data,l);if(a.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return INVALID;const u=await this._def.schema._parseAsync({data:d,path:a.path,parent:a});return u.status==="aborted"?INVALID:u.status==="dirty"||n.value==="dirty"?DIRTY(u.value):u});{if(n.value==="aborted")return INVALID;const d=this._def.schema._parseSync({data:c,path:a.path,parent:a});return d.status==="aborted"?INVALID:d.status==="dirty"||n.value==="dirty"?DIRTY(d.value):d}}if(s.type==="refinement"){const c=d=>{const u=s.refinement(d,l);if(a.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(a.common.async===!1){const d=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return d.status==="aborted"?INVALID:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(d=>d.status==="aborted"?INVALID:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(s.type==="transform")if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!isValid(c))return c;const d=s.transform(c.value,l);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>isValid(c)?Promise.resolve(s.transform(c.value,l)).then(d=>({status:n.value,value:d})):c);util.assertNever(s)}}ZodEffects.create=(o,e,n)=>new ZodEffects({schema:o,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(n)}),ZodEffects.createWithPreprocess=(o,e,n)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:o},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(o,e)=>new ZodOptional({innerType:o,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(o,e)=>new ZodNullable({innerType:o,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);let a=n.data;return n.parsedType===ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZodDefault.create=(o,e)=>new ZodDefault({innerType:o,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return isAsync(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(o,e)=>new ZodCatch({innerType:o,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:n.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=o=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(o)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?INVALID:s.status==="dirty"?(n.dirty(),DIRTY(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?INVALID:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,n){return new ZodPipeline({in:e,out:n,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const n=this._def.innerType._parse(e),a=s=>(isValid(s)&&(s.value=Object.freeze(s.value)),s);return isAsync(n)?n.then(s=>a(s)):a(n)}unwrap(){return this._def.innerType}}ZodReadonly.create=(o,e)=>new ZodReadonly({innerType:o,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function custom(o,e={},n){return o?ZodAny.create().superRefine((a,s)=>{var l,c;if(!o(a)){const d=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,u=(c=(l=d.fatal)!==null&&l!==void 0?l:n)!==null&&c!==void 0?c:!0,f=typeof d=="string"?{message:d}:d;s.addIssue({code:"custom",...f,fatal:u})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(o,e={message:`Input not instance of ${o.name}`})=>custom(n=>n instanceof o,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:o=>ZodString.create({...o,coerce:!0}),number:o=>ZodNumber.create({...o,coerce:!0}),boolean:o=>ZodBoolean.create({...o,coerce:!0}),bigint:o=>ZodBigInt.create({...o,coerce:!0}),date:o=>ZodDate.create({...o,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const GetAllKbInfoSchema={request:z.object({}),result:z.array(z.object({name:z.string(),location:z.string()}))},CreateKbSchema={request:z.object({location:z.string(),name:z.string(),password:z.string()}),result:z.object({})};z.object({location:z.string(),newName:z.string()}),z.object({});const DeleteKbSchema={request:z.object({location:z.string()}),result:z.object({})},BackupKbSchema={request:z.object({location:z.string()}),result:z.object({backupPath:z.string()})};z.object({location:z.string()}),z.array(z.object({name:z.string(),size:z.number()}));const BLOCK_CONTENT_TYPES={TEXT:0,IMAGE:1,CODE:2,MATH:3,QUERY:4,CAROUSEL:5},BLOCK_TYPE_ZH_NAMES=["\u6587\u672C","\u56FE\u7247","\u4EE3\u7801","\u516C\u5F0F","\u67E5\u8BE2","\u591A\u56FE"],_RESP_CODES={SUCCESS:0,INVALID_REQUEST:1,PASSWORD_INCORRECT:2,EXCEED_MAX_ATTEMPTS:3,NO_AUTHORIZATION:4,UNKNOWN_ERROR:5,TARGET_NOT_FOUND:6,INVALID_RESPONSE:7,NO_AXIOS:8,FILE_EXISTS:9,DIR_NOT_FOUND:10,TOKEN_EXPIRED:11,PATH_NOT_FOUND:12,PATH_EXISTS_AND_NOT_EMPTY:13,PATH_CANNOT_ACCESS:14},RESP_CODES_NAMES=Object.fromEntries(Object.entries(_RESP_CODES).map(([o,e])=>[e,o])),RESP_CODES={..._RESP_CODES,...RESP_CODES_NAMES},BLOCK_INFO_DOC_NAME="blockInfo",BLOCK_DATA_DOC_NAME_PREFIX="blockData_",RespSchema=o=>z.discriminatedUnion("success",[z.object({success:z.literal(!0),data:o}),z.object({success:z.literal(!1),code:z.number(),msg:z.string().optional()})]),usePostApi=(o,e,n)=>async(a,s)=>{try{let l;try{l=globalThis.getAxios()}catch(u){return console.error(`[NO_AXIOS] ${u}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const c=await l.post(o,a,s);if(!c)return console.error(`[EMPTY_RESPONSE] endpoint=${o}, params=${JSON.stringify(a)}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const d=RespSchema(n).safeParse(c.data);return d.success?d.data:(console.error(`[INVALID_RESPONSE] endpoint=${o}, params=${JSON.stringify(a)}, response=${JSON.stringify(c.data)}, validationErrors=${JSON.stringify(d.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(l){return console.error(`[UNKNOWN_ERROR] endpoint=${o}, params=${JSON.stringify(a)}, error=$`,l),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},getAllKbInfo=usePostApi("/kb/list",z.object({}),GetAllKbInfoSchema.result),createKb=usePostApi("/kb/create",CreateKbSchema.request,CreateKbSchema.result),deleteKb=usePostApi("/kb/delete",DeleteKbSchema.request,DeleteKbSchema.result),backupKb=usePostApi("/kb/backup",BackupKbSchema.request,BackupKbSchema.result),createContext=(o,e=Symbol())=>({injectionKey:e,useContext:n=>inject(e,n),Provider:defineComponent({name:"ContextProvider",inheritAttrs:!1,setup(n,{slots:a}){const s=o(n);return provide(e,s),()=>{var l;return(l=a.default)==null?void 0:l.call(a)}}})}),isBrowser=typeof document<"u";function isRouteComponent(o){return typeof o=="object"||"displayName"in o||"props"in o||"__vccOpts"in o}function isESModule(o){return o.__esModule||o[Symbol.toStringTag]==="Module"||o.default&&isRouteComponent(o.default)}const assign=Object.assign;function applyToParams(o,e){const n={};for(const a in e){const s=e[a];n[a]=isArray$1(s)?s.map(o):o(s)}return n}const noop$2=()=>{},isArray$1=Array.isArray;function warn(o){const e=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+o].concat(e))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(o){return encodeURI(""+o).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(o){return commonEncode(o).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(o){return commonEncode(o).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(o){return encodeQueryValue(o).replace(EQUAL_RE,"%3D")}function encodePath(o){return commonEncode(o).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(o){return o==null?"":encodePath(o).replace(SLASH_RE,"%2F")}function decode(o){try{return decodeURIComponent(""+o)}catch{warn(`Error decoding "${o}". Using original value`)}return""+o}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=o=>o.replace(TRAILING_SLASH_RE,"");function parseURL(o,e,n="/"){let a,s={},l="",c="";const d=e.indexOf("#");let u=e.indexOf("?");return d<u&&d>=0&&(u=-1),u>-1&&(a=e.slice(0,u),l=e.slice(u+1,d>-1?d:e.length),s=o(l)),d>-1&&(a=a||e.slice(0,d),c=e.slice(d,e.length)),a=resolveRelativePath(a??e,n),{fullPath:a+(l&&"?")+l+c,path:a,query:s,hash:decode(c)}}function stringifyURL(o,e){const n=e.query?o(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(o,e){return!e||!o.toLowerCase().startsWith(e.toLowerCase())?o:o.slice(e.length)||"/"}function isSameRouteLocation(o,e,n){const a=e.matched.length-1,s=n.matched.length-1;return a>-1&&a===s&&isSameRouteRecord(e.matched[a],n.matched[s])&&isSameRouteLocationParams(e.params,n.params)&&o(e.query)===o(n.query)&&e.hash===n.hash}function isSameRouteRecord(o,e){return(o.aliasOf||o)===(e.aliasOf||e)}function isSameRouteLocationParams(o,e){if(Object.keys(o).length!==Object.keys(e).length)return!1;for(const n in o)if(!isSameRouteLocationParamsValue(o[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(o,e){return isArray$1(o)?isEquivalentArray(o,e):isArray$1(e)?isEquivalentArray(e,o):o===e}function isEquivalentArray(o,e){return isArray$1(e)?o.length===e.length&&o.every((n,a)=>n===e[a]):o.length===1&&o[0]===e}function resolveRelativePath(o,e){if(o.startsWith("/"))return o;if(!e.startsWith("/"))return warn(`Cannot resolve a relative location without an absolute path. Trying to resolve "${o}" from "${e}". It should look like "/${e}".`),o;if(!o)return e;const n=e.split("/"),a=o.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let l=n.length-1,c,d;for(c=0;c<a.length;c++)if(d=a[c],d!==".")if(d==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+a.slice(c).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(o){o.pop="pop",o.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(o){o.back="back",o.forward="forward",o.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(o){if(!o)if(isBrowser){const e=document.querySelector("base");o=e&&e.getAttribute("href")||"/",o=o.replace(/^\w+:\/\/[^\/]+/,"")}else o="/";return o[0]!=="/"&&o[0]!=="#"&&(o="/"+o),removeTrailingSlash(o)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(o,e){return o.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(o,e){const n=document.documentElement.getBoundingClientRect(),a=o.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(o){let e;if("el"in o){const n=o.el,a=typeof n=="string"&&n.startsWith("#");if(typeof o.el=="string"&&(!a||!document.getElementById(o.el.slice(1))))try{const l=document.querySelector(o.el);if(a&&l){warn(`The selector "${o.el}" should be passed as "el: document.querySelector('${o.el}')" because it starts with "#".`);return}}catch{warn(`The selector "${o.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const s=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s){warn(`Couldn't find element using selector "${o.el}" returned by scrollBehavior.`);return}e=getElementPosition(s,o)}else e=o;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(o,e){return(history.state?history.state.position-e:-1)+o}const scrollPositions=new Map;function saveScrollPosition(o,e){scrollPositions.set(o,e)}function getSavedScrollPosition(o){const e=scrollPositions.get(o);return scrollPositions.delete(o),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(o,e){const{pathname:n,search:a,hash:s}=e,l=o.indexOf("#");if(l>-1){let c=s.includes(o.slice(l))?o.slice(l).length:1,d=s.slice(c);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(n,o)+a+s}function useHistoryListeners(o,e,n,a){let s=[],l=[],c=null;const d=({state:k})=>{const x=createCurrentLocation(o,location),_=n.value,E=e.value;let B=0;if(k){if(n.value=x,e.value=k,c&&c===_){c=null;return}B=E?k.position-E.position:0}else a(x);s.forEach(M=>{M(n.value,_,{delta:B,type:NavigationType.pop,direction:B?B>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function u(){c=n.value}function f(k){s.push(k);const x=()=>{const _=s.indexOf(k);_>-1&&s.splice(_,1)};return l.push(x),x}function v(){const{history:k}=window;k.state&&k.replaceState(assign({},k.state,{scroll:computeScrollPosition()}),"")}function b(){for(const k of l)k();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:u,listen:f,destroy:b}}function buildState(o,e,n,a=!1,s=!1){return{back:o,current:e,forward:n,replaced:a,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(o){const{history:e,location:n}=window,a={value:createCurrentLocation(o,n)},s={value:e.state};s.value||l(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(u,f,v){const b=o.indexOf("#"),k=b>-1?(n.host&&document.querySelector("base")?o:o.slice(b))+u:createBaseLocation()+o+u;try{e[v?"replaceState":"pushState"](f,"",k),s.value=f}catch(x){warn("Error with push/replace State",x),n[v?"replace":"assign"](k)}}function c(u,f){const v=assign({},e.state,buildState(s.value.back,u,s.value.forward,!0),f,{position:s.value.position});l(u,v,!0),a.value=u}function d(u,f){const v=assign({},s.value,e.state,{forward:u,scroll:computeScrollPosition()});e.state||warn(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://router.vuejs.org/guide/migration/#Usage-of-history-state`),l(v.current,v,!0);const b=assign({},buildState(a.value,u,null),{position:v.position+1},f);l(u,b,!1),a.value=u}return{location:a,state:s,push:d,replace:c}}function createWebHistory(o){o=normalizeBase(o);const e=useHistoryStateNavigation(o),n=useHistoryListeners(o,e.state,e.location,e.replace);function a(l,c=!0){c||n.pauseListeners(),history.go(l)}const s=assign({location:"",base:o,go:a,createHref:createHref.bind(null,o)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function createWebHashHistory(o){return o=location.host?o||location.pathname+location.search:"",o.includes("#")||(o+="#"),!o.endsWith("#/")&&!o.endsWith("#")&&warn(`A hash base must end with a "#":
"${o}" should be "${o.replace(/#.*$/,"#")}".`),createWebHistory(o)}function isRouteLocation(o){return typeof o=="string"||o&&typeof o=="object"}function isRouteName(o){return typeof o=="string"||typeof o=="symbol"}const NavigationFailureSymbol=Symbol("navigation failure");var NavigationFailureType;(function(o){o[o.aborted=4]="aborted",o[o.cancelled=8]="cancelled",o[o.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));const ErrorTypeMessages={1({location:o,currentLocation:e}){return`No match for
 ${JSON.stringify(o)}${e?`
while being at
`+JSON.stringify(e):""}`},2({from:o,to:e}){return`Redirected from "${o.fullPath}" to "${stringifyRoute(e)}" via a navigation guard.`},4({from:o,to:e}){return`Navigation aborted from "${o.fullPath}" to "${e.fullPath}" via a navigation guard.`},8({from:o,to:e}){return`Navigation cancelled from "${o.fullPath}" to "${e.fullPath}" with a new navigation.`},16({from:o,to:e}){return`Avoided redundant navigation to current location: "${o.fullPath}".`}};function createRouterError(o,e){return assign(new Error(ErrorTypeMessages[o](e)),{type:o,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(o,e){return o instanceof Error&&NavigationFailureSymbol in o&&(e==null||!!(o.type&e))}const propertiesToLog=["params","query","hash"];function stringifyRoute(o){if(typeof o=="string")return o;if(o.path!=null)return o.path;const e={};for(const n of propertiesToLog)n in o&&(e[n]=o[n]);return JSON.stringify(e,null,2)}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(o,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),a=[];let s=n.start?"^":"";const l=[];for(const f of o){const v=f.length?[]:[90];n.strict&&!f.length&&(s+="/");for(let b=0;b<f.length;b++){const k=f[b];let x=40+(n.sensitive?.25:0);if(k.type===0)b||(s+="/"),s+=k.value.replace(REGEX_CHARS_RE,"\\$&"),x+=40;else if(k.type===1){const{value:_,repeatable:E,optional:B,regexp:M}=k;l.push({name:_,repeatable:E,optional:B});const I=M||BASE_PARAM_PATTERN;if(I!==BASE_PARAM_PATTERN){x+=10;try{new RegExp(`(${I})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${_}" (${I}): `+V.message)}}let F=E?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;b||(F=B&&f.length<2?`(?:/${F})`:"/"+F),B&&(F+="?"),s+=F,x+=20,B&&(x+=-8),E&&(x+=-20),I===".*"&&(x+=-50)}v.push(x)}a.push(v)}if(n.strict&&n.end){const f=a.length-1;a[f][a[f].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function d(f){const v=f.match(c),b={};if(!v)return null;for(let k=1;k<v.length;k++){const x=v[k]||"",_=l[k-1];b[_.name]=x&&_.repeatable?x.split("/"):x}return b}function u(f){let v="",b=!1;for(const k of o){(!b||!v.endsWith("/"))&&(v+="/"),b=!1;for(const x of k)if(x.type===0)v+=x.value;else if(x.type===1){const{value:_,repeatable:E,optional:B}=x,M=_ in f?f[_]:"";if(isArray$1(M)&&!E)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const I=isArray$1(M)?M.join("/"):M;if(!I)if(B)k.length<2&&(v.endsWith("/")?v=v.slice(0,-1):b=!0);else throw new Error(`Missing required param "${_}"`);v+=I}}return v||"/"}return{re:c,score:a,keys:l,parse:d,stringify:u}}function compareScoreArray(o,e){let n=0;for(;n<o.length&&n<e.length;){const a=e[n]-o[n];if(a)return a;n++}return o.length<e.length?o.length===1&&o[0]===80?-1:1:o.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(o,e){let n=0;const a=o.score,s=e.score;for(;n<a.length&&n<s.length;){const l=compareScoreArray(a[n],s[n]);if(l)return l;n++}if(Math.abs(s.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(s))return-1}return s.length-a.length}function isLastScoreNegative(o){const e=o[o.length-1];return o.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(o){if(!o)return[[]];if(o==="/")return[[ROOT_TOKEN]];if(!o.startsWith("/"))throw new Error(`Route paths should start with a "/": "${o}" should be "/${o}".`);function e(x){throw new Error(`ERR (${n})/"${f}": ${x}`)}let n=0,a=n;const s=[];let l;function c(){l&&s.push(l),l=[]}let d=0,u,f="",v="";function b(){f&&(n===0?l.push({type:0,value:f}):n===1||n===2||n===3?(l.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:f,regexp:v,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),f="")}function k(){f+=u}for(;d<o.length;){if(u=o[d++],u==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:u==="/"?(f&&b(),c()):u===":"?(b(),n=1):k();break;case 4:k(),n=a;break;case 1:u==="("?n=2:VALID_PARAM_RE.test(u)?k():(b(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&d--);break;case 2:u===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+u:n=3:v+=u;break;case 3:b(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&d--,v="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${f}"`),b(),c(),s}function createRouteRecordMatcher(o,e,n){const a=tokensToParser(tokenizePath(o.path),n);{const l=new Set;for(const c of a.keys)l.has(c.name)&&warn(`Found duplicated params with name "${c.name}" for path "${o.path}". Only the last one will be available on "$route.params".`),l.add(c.name)}const s=assign(a,{record:o,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(o,e){const n=[],a=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(b){return a.get(b)}function l(b,k,x){const _=!x,E=normalizeRouteRecord(b);checkChildMissingNameWithEmptyPath(E,k),E.aliasOf=x&&x.record;const B=mergeOptions(e,b),M=[E];if("alias"in b){const V=typeof b.alias=="string"?[b.alias]:b.alias;for(const L of V)M.push(normalizeRouteRecord(assign({},E,{components:x?x.record.components:E.components,path:L,aliasOf:x?x.record:E})))}let I,F;for(const V of M){const{path:L}=V;if(k&&L[0]!=="/"){const U=k.record.path,j=U[U.length-1]==="/"?"":"/";V.path=k.record.path+(L&&j+L)}if(V.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://router.vuejs.org/guide/migration/#Removed-star-or-catch-all-routes.`);if(I=createRouteRecordMatcher(V,k,B),k&&L[0]==="/"&&checkMissingParamsInAbsolutePath(I,k),x?(x.alias.push(I),checkSameParams(x,I)):(F=F||I,F!==I&&F.alias.push(I),_&&b.name&&!isAliasRecord(I)&&(checkSameNameAsAncestor(b,k),c(b.name))),isMatchable(I)&&u(I),E.children){const U=E.children;for(let j=0;j<U.length;j++)l(U[j],I,x&&x.children[j])}x=x||I}return F?()=>{c(F)}:noop$2}function c(b){if(isRouteName(b)){const k=a.get(b);k&&(a.delete(b),n.splice(n.indexOf(k),1),k.children.forEach(c),k.alias.forEach(c))}else{const k=n.indexOf(b);k>-1&&(n.splice(k,1),b.record.name&&a.delete(b.record.name),b.children.forEach(c),b.alias.forEach(c))}}function d(){return n}function u(b){const k=findInsertionIndex(b,n);n.splice(k,0,b),b.record.name&&!isAliasRecord(b)&&a.set(b.record.name,b)}function f(b,k){let x,_={},E,B;if("name"in b&&b.name){if(x=a.get(b.name),!x)throw createRouterError(1,{location:b});{const F=Object.keys(b.params||{}).filter(V=>!x.keys.find(L=>L.name===V));F.length&&warn(`Discarded invalid param(s) "${F.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}B=x.record.name,_=assign(paramsFromLocation(k.params,x.keys.filter(F=>!F.optional).concat(x.parent?x.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),b.params&&paramsFromLocation(b.params,x.keys.map(F=>F.name))),E=x.stringify(_)}else if(b.path!=null)E=b.path,E.startsWith("/")||warn(`The Matcher cannot resolve relative paths but received "${E}". Unless you directly called \`matcher.resolve("${E}")\`, this is probably a bug in vue-router. Please open an issue at https://github.com/vuejs/router/issues/new/choose.`),x=n.find(F=>F.re.test(E)),x&&(_=x.parse(E),B=x.record.name);else{if(x=k.name?a.get(k.name):n.find(F=>F.re.test(k.path)),!x)throw createRouterError(1,{location:b,currentLocation:k});B=x.record.name,_=assign({},k.params,b.params),E=x.stringify(_)}const M=[];let I=x;for(;I;)M.unshift(I.record),I=I.parent;return{name:B,path:E,params:_,matched:M,meta:mergeMetaFields(M)}}o.forEach(b=>l(b));function v(){n.length=0,a.clear()}return{addRoute:l,resolve:f,removeRoute:c,clearRoutes:v,getRoutes:d,getRecordMatcher:s}}function paramsFromLocation(o,e){const n={};for(const a of e)a in o&&(n[a]=o[a]);return n}function normalizeRouteRecord(o){const e={path:o.path,redirect:o.redirect,name:o.name,meta:o.meta||{},aliasOf:o.aliasOf,beforeEnter:o.beforeEnter,props:normalizeRecordProps(o),children:o.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in o?o.components||null:o.component&&{default:o.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(o){const e={},n=o.props||!1;if("component"in o)e.default=n;else for(const a in o.components)e[a]=typeof n=="object"?n[a]:n;return e}function isAliasRecord(o){for(;o;){if(o.record.aliasOf)return!0;o=o.parent}return!1}function mergeMetaFields(o){return o.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(o,e){const n={};for(const a in o)n[a]=a in e?e[a]:o[a];return n}function isSameParam(o,e){return o.name===e.name&&o.optional===e.optional&&o.repeatable===e.repeatable}function checkSameParams(o,e){for(const n of o.keys)if(!n.optional&&!e.keys.find(isSameParam.bind(null,n)))return warn(`Alias "${e.record.path}" and the original record: "${o.record.path}" must have the exact same param named "${n.name}"`);for(const n of e.keys)if(!n.optional&&!o.keys.find(isSameParam.bind(null,n)))return warn(`Alias "${e.record.path}" and the original record: "${o.record.path}" must have the exact same param named "${n.name}"`)}function checkChildMissingNameWithEmptyPath(o,e){e&&e.record.name&&!o.name&&!o.path&&warn(`The route named "${String(e.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function checkSameNameAsAncestor(o,e){for(let n=e;n;n=n.parent)if(n.record.name===o.name)throw new Error(`A route named "${String(o.name)}" has been added as a ${e===n?"child":"descendant"} of a route with the same name. Route names must be unique and a nested route cannot use the same name as an ancestor.`)}function checkMissingParamsInAbsolutePath(o,e){for(const n of e.keys)if(!o.keys.find(isSameParam.bind(null,n)))return warn(`Absolute path "${o.record.path}" must have the exact same param named "${n.name}" as its parent "${e.record.path}".`)}function findInsertionIndex(o,e){let n=0,a=e.length;for(;n!==a;){const l=n+a>>1;comparePathParserScore(o,e[l])<0?a=l:n=l+1}const s=getInsertionAncestor(o);return s&&(a=e.lastIndexOf(s,a-1),a<0&&warn(`Finding ancestor route "${s.record.path}" failed for "${o.record.path}"`)),a}function getInsertionAncestor(o){let e=o;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(o,e)===0)return e}function isMatchable({record:o}){return!!(o.name||o.components&&Object.keys(o.components).length||o.redirect)}function parseQuery(o){const e={};if(o===""||o==="?")return e;const n=(o[0]==="?"?o.slice(1):o).split("&");for(let a=0;a<n.length;++a){const s=n[a].replace(PLUS_RE," "),l=s.indexOf("="),c=decode(l<0?s:s.slice(0,l)),d=l<0?null:decode(s.slice(l+1));if(c in e){let u=e[c];isArray$1(u)||(u=e[c]=[u]),u.push(d)}else e[c]=d}return e}function stringifyQuery(o){let e="";for(let n in o){const a=o[n];if(n=encodeQueryKey(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray$1(a)?a.map(s=>s&&encodeQueryValue(s)):[a&&encodeQueryValue(a)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function normalizeQuery(o){const e={};for(const n in o){const a=o[n];a!==void 0&&(e[n]=isArray$1(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return e}const matchedRouteKey=Symbol("router view location matched"),viewDepthKey=Symbol("router view depth"),routerKey=Symbol("router"),routeLocationKey=Symbol("route location"),routerViewLocationKey=Symbol("router view location");function useCallbacks(){let o=[];function e(a){return o.push(a),()=>{const s=o.indexOf(a);s>-1&&o.splice(s,1)}}function n(){o=[]}return{add:e,list:()=>o.slice(),reset:n}}function guardToPromiseFn(o,e,n,a,s,l=c=>c()){const c=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((d,u)=>{const f=k=>{k===!1?u(createRouterError(4,{from:n,to:e})):k instanceof Error?u(k):isRouteLocation(k)?u(createRouterError(2,{from:e,to:k})):(c&&a.enterCallbacks[s]===c&&typeof k=="function"&&c.push(k),d())},v=l(()=>o.call(a&&a.instances[s],e,n,canOnlyBeCalledOnce(f,e,n)));let b=Promise.resolve(v);if(o.length<3&&(b=b.then(f)),o.length>2){const k=`The "next" callback was never called inside of ${o.name?'"'+o.name+'"':""}:
${o.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof v=="object"&&"then"in v)b=b.then(x=>f._called?x:(warn(k),Promise.reject(new Error("Invalid navigation guard"))));else if(v!==void 0&&!f._called){warn(k),u(new Error("Invalid navigation guard"));return}}b.catch(k=>u(k))})}function canOnlyBeCalledOnce(o,e,n){let a=0;return function(){a++===1&&warn(`The "next" callback was called more than once in one navigation guard when going from "${n.fullPath}" to "${e.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),o._called=!0,a===1&&o.apply(null,arguments)}}function extractComponentsGuards(o,e,n,a,s=l=>l()){const l=[];for(const c of o){!c.components&&!c.children.length&&warn(`Record with path "${c.path}" is either missing a "component(s)" or "children" property.`);for(const d in c.components){let u=c.components[d];{if(!u||typeof u!="object"&&typeof u!="function")throw warn(`Component "${d}" in record with path "${c.path}" is not a valid component. Received "${String(u)}".`),new Error("Invalid route component");if("then"in u){warn(`Component "${d}" in record with path "${c.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const f=u;u=()=>f}else u.__asyncLoader&&!u.__warnedDefineAsync&&(u.__warnedDefineAsync=!0,warn(`Component "${d}" in record with path "${c.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(e!=="beforeRouteEnter"&&!c.instances[d]))if(isRouteComponent(u)){const f=(u.__vccOpts||u)[e];f&&l.push(guardToPromiseFn(f,n,a,c,d,s))}else{let f=u();"catch"in f||(warn(`Component "${d}" in record with path "${c.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),f=Promise.resolve(f)),l.push(()=>f.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const b=isESModule(v)?v.default:v;c.mods[d]=v,c.components[d]=b;const k=(b.__vccOpts||b)[e];return k&&guardToPromiseFn(k,n,a,c,d,s)()}))}}}return l}function useLink(o){const e=inject(routerKey),n=inject(routeLocationKey);let a=!1,s=null;const l=computed(()=>{const v=unref(o.to);return(!a||v!==s)&&(isRouteLocation(v)||(a?warn(`Invalid value for prop "to" in useLink()
- to:`,v,`
- previous to:`,s,`
- props:`,o):warn(`Invalid value for prop "to" in useLink()
- to:`,v,`
- props:`,o)),s=v,a=!0),e.resolve(v)}),c=computed(()=>{const{matched:v}=l.value,{length:b}=v,k=v[b-1],x=n.matched;if(!k||!x.length)return-1;const _=x.findIndex(isSameRouteRecord.bind(null,k));if(_>-1)return _;const E=getOriginalPath(v[b-2]);return b>1&&getOriginalPath(k)===E&&x[x.length-1].path!==E?x.findIndex(isSameRouteRecord.bind(null,v[b-2])):_}),d=computed(()=>c.value>-1&&includesParams(n.params,l.value.params)),u=computed(()=>c.value>-1&&c.value===n.matched.length-1&&isSameRouteLocationParams(n.params,l.value.params));function f(v={}){if(guardEvent(v)){const b=e[unref(o.replace)?"replace":"push"](unref(o.to)).catch(noop$2);return o.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>b),b}return Promise.resolve()}if(isBrowser){const v=getCurrentInstance();if(v){const b={route:l.value,isActive:d.value,isExactActive:u.value,error:null};v.__vrl_devtools=v.__vrl_devtools||[],v.__vrl_devtools.push(b),watchEffect(()=>{b.route=l.value,b.isActive=d.value,b.isExactActive=u.value,b.error=isRouteLocation(unref(o.to))?null:'Invalid "to" value'},{flush:"post"})}}return{route:l,href:computed(()=>l.value.href),isActive:d,isExactActive:u,navigate:f}}function preferSingleVNode(o){return o.length===1?o[0]:o}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(o,{slots:e}){const n=reactive(useLink(o)),{options:a}=inject(routerKey),s=computed(()=>({[getLinkClass(o.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(o.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&preferSingleVNode(e.default(n));return o.custom?l:h("a",{"aria-current":n.isExactActive?o.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(o){if(!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)&&!o.defaultPrevented&&!(o.button!==void 0&&o.button!==0)){if(o.currentTarget&&o.currentTarget.getAttribute){const e=o.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return o.preventDefault&&o.preventDefault(),!0}}function includesParams(o,e){for(const n in e){const a=e[n],s=o[n];if(typeof a=="string"){if(a!==s)return!1}else if(!isArray$1(s)||s.length!==a.length||a.some((l,c)=>l!==s[c]))return!1}return!0}function getOriginalPath(o){return o?o.aliasOf?o.aliasOf.path:o.path:""}const getLinkClass=(o,e,n)=>o??e??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(o,{attrs:e,slots:n}){warnDeprecatedUsage();const a=inject(routerViewLocationKey),s=computed(()=>o.route||a.value),l=inject(viewDepthKey,0),c=computed(()=>{let f=unref(l);const{matched:v}=s.value;let b;for(;(b=v[f])&&!b.components;)f++;return f}),d=computed(()=>s.value.matched[c.value]);provide(viewDepthKey,computed(()=>c.value+1)),provide(matchedRouteKey,d),provide(routerViewLocationKey,s);const u=ref();return watch(()=>[u.value,d.value,o.name],([f,v,b],[k,x,_])=>{v&&(v.instances[b]=f,x&&x!==v&&f&&f===k&&(v.leaveGuards.size||(v.leaveGuards=x.leaveGuards),v.updateGuards.size||(v.updateGuards=x.updateGuards))),f&&v&&(!x||!isSameRouteRecord(v,x)||!k)&&(v.enterCallbacks[b]||[]).forEach(E=>E(f))},{flush:"post"}),()=>{const f=s.value,v=o.name,b=d.value,k=b&&b.components[v];if(!k)return normalizeSlot(n.default,{Component:k,route:f});const x=b.props[v],_=x?x===!0?f.params:typeof x=="function"?x(f):x:null,E=h(k,assign({},_,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(b.instances[v]=null)},ref:u}));if(isBrowser&&E.ref){const B={depth:c.value,name:b.name,path:b.path,meta:b.meta};(isArray$1(E.ref)?E.ref.map(M=>M.i):[E.ref.i]).forEach(M=>{M.__vrv_devtools=B})}return normalizeSlot(n.default,{Component:E,route:f})||E}}});function normalizeSlot(o,e){if(!o)return null;const n=o(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function warnDeprecatedUsage(){const o=getCurrentInstance(),e=o.parent&&o.parent.type.name,n=o.parent&&o.parent.subTree&&o.parent.subTree.type;if(e&&(e==="KeepAlive"||e.includes("Transition"))&&typeof n=="object"&&n.name==="RouterView"){const a=e==="KeepAlive"?"keep-alive":"transition";warn(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${a}>
    <component :is="Component" />
  </${a}>
</router-view>`)}}function formatRouteLocation(o,e){const n=assign({},o,{matched:o.matched.map(a=>omit(a,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:o.fullPath,tooltip:e,value:n}}}function formatDisplay(o){return{_custom:{display:o}}}let routerId=0;function addDevtools(o,e,n){if(e.__hasDevtools)return;e.__hasDevtools=!0;const a=routerId++;setupDevtoolsPlugin({id:"org.vuejs.router"+(a?"."+a:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:o},s=>{typeof s.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),s.on.inspectComponent((v,b)=>{v.instanceData&&v.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:formatRouteLocation(e.currentRoute.value,"Current Route")})}),s.on.visitComponentTree(({treeNode:v,componentInstance:b})=>{if(b.__vrv_devtools){const k=b.__vrv_devtools;v.tags.push({label:(k.name?`${k.name.toString()}: `:"")+k.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:PINK_500})}isArray$1(b.__vrl_devtools)&&(b.__devtoolsApi=s,b.__vrl_devtools.forEach(k=>{let x=k.route.path,_=ORANGE_400,E="",B=0;k.error?(x=k.error,_=RED_100,B=RED_700):k.isExactActive?(_=LIME_500,E="This is exactly active"):k.isActive&&(_=BLUE_600,E="This link is active"),v.tags.push({label:x,textColor:B,tooltip:E,backgroundColor:_})}))}),watch(e.currentRoute,()=>{u(),s.notifyComponentUpdate(),s.sendInspectorTree(d),s.sendInspectorState(d)});const l="router:navigations:"+a;s.addTimelineLayer({id:l,label:`Router${a?" "+a:""} Navigations`,color:4237508}),e.onError((v,b)=>{s.addTimelineEvent({layerId:l,event:{title:"Error during Navigation",subtitle:b.fullPath,logType:"error",time:s.now(),data:{error:v},groupId:b.meta.__navigationId}})});let c=0;e.beforeEach((v,b)=>{const k={guard:formatDisplay("beforeEach"),from:formatRouteLocation(b,"Current Location during this navigation"),to:formatRouteLocation(v,"Target location")};Object.defineProperty(v.meta,"__navigationId",{value:c++}),s.addTimelineEvent({layerId:l,event:{time:s.now(),title:"Start of navigation",subtitle:v.fullPath,data:k,groupId:v.meta.__navigationId}})}),e.afterEach((v,b,k)=>{const x={guard:formatDisplay("afterEach")};k?(x.failure={_custom:{type:Error,readOnly:!0,display:k?k.message:"",tooltip:"Navigation Failure",value:k}},x.status=formatDisplay("\u274C")):x.status=formatDisplay("\u2705"),x.from=formatRouteLocation(b,"Current Location during this navigation"),x.to=formatRouteLocation(v,"Target location"),s.addTimelineEvent({layerId:l,event:{title:"End of navigation",subtitle:v.fullPath,time:s.now(),data:x,logType:k?"warning":"default",groupId:v.meta.__navigationId}})});const d="router-inspector:"+a;s.addInspector({id:d,label:"Routes"+(a?" "+a:""),icon:"book",treeFilterPlaceholder:"Search routes"});function u(){if(!f)return;const v=f;let b=n.getRoutes().filter(k=>!k.parent||!k.parent.record.components);b.forEach(resetMatchStateOnRouteRecord),v.filter&&(b=b.filter(k=>isRouteMatching(k,v.filter.toLowerCase()))),b.forEach(k=>markRouteRecordActive(k,e.currentRoute.value)),v.rootNodes=b.map(formatRouteRecordForInspector)}let f;s.on.getInspectorTree(v=>{f=v,v.app===o&&v.inspectorId===d&&u()}),s.on.getInspectorState(v=>{if(v.app===o&&v.inspectorId===d){const b=n.getRoutes().find(k=>k.record.__vd_id===v.nodeId);b&&(v.state={options:formatRouteRecordMatcherForStateInspector(b)})}}),s.sendInspectorTree(d),s.sendInspectorState(d)})}function modifierForKey(o){return o.optional?o.repeatable?"*":"?":o.repeatable?"+":""}function formatRouteRecordMatcherForStateInspector(o){const{record:e}=o,n=[{editable:!1,key:"path",value:e.path}];return e.name!=null&&n.push({editable:!1,key:"name",value:e.name}),n.push({editable:!1,key:"regexp",value:o.re}),o.keys.length&&n.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:o.keys.map(a=>`${a.name}${modifierForKey(a)}`).join(" "),tooltip:"Param keys",value:o.keys}}}),e.redirect!=null&&n.push({editable:!1,key:"redirect",value:e.redirect}),o.alias.length&&n.push({editable:!1,key:"aliases",value:o.alias.map(a=>a.record.path)}),Object.keys(o.record.meta).length&&n.push({editable:!1,key:"meta",value:o.record.meta}),n.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:o.score.map(a=>a.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:o.score}}}),n}const PINK_500=15485081,BLUE_600=2450411,LIME_500=8702998,CYAN_400=2282478,ORANGE_400=16486972,DARK=6710886,RED_100=16704226,RED_700=12131356;function formatRouteRecordForInspector(o){const e=[],{record:n}=o;n.name!=null&&e.push({label:String(n.name),textColor:0,backgroundColor:CYAN_400}),n.aliasOf&&e.push({label:"alias",textColor:0,backgroundColor:ORANGE_400}),o.__vd_match&&e.push({label:"matches",textColor:0,backgroundColor:PINK_500}),o.__vd_exactActive&&e.push({label:"exact",textColor:0,backgroundColor:LIME_500}),o.__vd_active&&e.push({label:"active",textColor:0,backgroundColor:BLUE_600}),n.redirect&&e.push({label:typeof n.redirect=="string"?`redirect: ${n.redirect}`:"redirects",textColor:16777215,backgroundColor:DARK});let a=n.__vd_id;return a==null&&(a=String(routeRecordId++),n.__vd_id=a),{id:a,label:n.path,tags:e,children:o.children.map(formatRouteRecordForInspector)}}let routeRecordId=0;const EXTRACT_REGEXP_RE=/^\/(.*)\/([a-z]*)$/;function markRouteRecordActive(o,e){const n=e.matched.length&&isSameRouteRecord(e.matched[e.matched.length-1],o.record);o.__vd_exactActive=o.__vd_active=n,n||(o.__vd_active=e.matched.some(a=>isSameRouteRecord(a,o.record))),o.children.forEach(a=>markRouteRecordActive(a,e))}function resetMatchStateOnRouteRecord(o){o.__vd_match=!1,o.children.forEach(resetMatchStateOnRouteRecord)}function isRouteMatching(o,e){const n=String(o.re).match(EXTRACT_REGEXP_RE);if(o.__vd_match=!1,!n||n.length<3)return!1;if(new RegExp(n[1].replace(/\$$/,""),n[2]).test(e))return o.children.forEach(l=>isRouteMatching(l,e)),o.record.path!=="/"||e==="/"?(o.__vd_match=o.re.test(e),!0):!1;const a=o.record.path.toLowerCase(),s=decode(a);return!e.startsWith("/")&&(s.includes(e)||a.includes(e))||s.startsWith(e)||a.startsWith(e)||o.record.name&&String(o.record.name).includes(e)?!0:o.children.some(l=>isRouteMatching(l,e))}function omit(o,e){const n={};for(const a in o)e.includes(a)||(n[a]=o[a]);return n}function createRouter(o){const e=createRouterMatcher(o.routes,o),n=o.parseQuery||parseQuery,a=o.stringifyQuery||stringifyQuery,s=o.history;if(!s)throw new Error('Provide the "history" option when calling "createRouter()": https://router.vuejs.org/api/interfaces/RouterOptions.html#history');const l=useCallbacks(),c=useCallbacks(),d=useCallbacks(),u=shallowRef(START_LOCATION_NORMALIZED);let f=START_LOCATION_NORMALIZED;isBrowser&&o.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=applyToParams.bind(null,Ce=>""+Ce),b=applyToParams.bind(null,encodeParam),k=applyToParams.bind(null,decode);function x(Ce,ze){let Ze,pe;return isRouteName(Ce)?(Ze=e.getRecordMatcher(Ce),Ze||warn(`Parent route "${String(Ce)}" not found when adding child route`,ze),pe=ze):pe=Ce,e.addRoute(pe,Ze)}function _(Ce){const ze=e.getRecordMatcher(Ce);ze?e.removeRoute(ze):warn(`Cannot remove non-existent route "${String(Ce)}"`)}function E(){return e.getRoutes().map(Ce=>Ce.record)}function B(Ce){return!!e.getRecordMatcher(Ce)}function M(Ce,ze){if(ze=assign({},ze||u.value),typeof Ce=="string"){const le=parseURL(n,Ce,ze.path),we=e.resolve({path:le.path},ze),ke=s.createHref(le.fullPath);return ke.startsWith("//")?warn(`Location "${Ce}" resolved to "${ke}". A resolved location cannot start with multiple slashes.`):we.matched.length||warn(`No match found for location with path "${Ce}"`),assign(le,we,{params:k(we.params),hash:decode(le.hash),redirectedFrom:void 0,href:ke})}if(!isRouteLocation(Ce))return warn(`router.resolve() was passed an invalid location. This will fail in production.
- Location:`,Ce),M({});let Ze;if(Ce.path!=null)"params"in Ce&&!("name"in Ce)&&Object.keys(Ce.params).length&&warn(`Path "${Ce.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),Ze=assign({},Ce,{path:parseURL(n,Ce.path,ze.path).path});else{const le=assign({},Ce.params);for(const we in le)le[we]==null&&delete le[we];Ze=assign({},Ce,{params:b(le)}),ze.params=b(ze.params)}const pe=e.resolve(Ze,ze),ue=Ce.hash||"";ue&&!ue.startsWith("#")&&warn(`A \`hash\` should always start with the character "#". Replace "${ue}" with "#${ue}".`),pe.params=v(k(pe.params));const Z=stringifyURL(a,assign({},Ce,{hash:encodeHash(ue),path:pe.path})),ee=s.createHref(Z);return ee.startsWith("//")?warn(`Location "${Ce}" resolved to "${ee}". A resolved location cannot start with multiple slashes.`):pe.matched.length||warn(`No match found for location with path "${Ce.path!=null?Ce.path:Ce}"`),assign({fullPath:Z,hash:ue,query:a===stringifyQuery?normalizeQuery(Ce.query):Ce.query||{}},pe,{redirectedFrom:void 0,href:ee})}function I(Ce){return typeof Ce=="string"?parseURL(n,Ce,u.value.path):assign({},Ce)}function F(Ce,ze){if(f!==Ce)return createRouterError(8,{from:ze,to:Ce})}function V(Ce){return j(Ce)}function L(Ce){return V(assign(I(Ce),{replace:!0}))}function U(Ce){const ze=Ce.matched[Ce.matched.length-1];if(ze&&ze.redirect){const{redirect:Ze}=ze;let pe=typeof Ze=="function"?Ze(Ce):Ze;if(typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=I(pe):{path:pe},pe.params={}),pe.path==null&&!("name"in pe))throw warn(`Invalid redirect found:
${JSON.stringify(pe,null,2)}
 when navigating to "${Ce.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return assign({query:Ce.query,hash:Ce.hash,params:pe.path!=null?{}:Ce.params},pe)}}function j(Ce,ze){const Ze=f=M(Ce),pe=u.value,ue=Ce.state,Z=Ce.force,ee=Ce.replace===!0,le=U(Ze);if(le)return j(assign(I(le),{state:typeof le=="object"?assign({},ue,le.state):ue,force:Z,replace:ee}),ze||Ze);const we=Ze;we.redirectedFrom=ze;let ke;return!Z&&isSameRouteLocation(a,pe,Ze)&&(ke=createRouterError(16,{to:we,from:pe}),Oe(pe,pe,!0,!1)),(ke?Promise.resolve(ke):K(we,pe)).catch(_e=>isNavigationFailure(_e)?isNavigationFailure(_e,2)?_e:We(_e):Be(_e,we,pe)).then(_e=>{if(_e){if(isNavigationFailure(_e,2))return isSameRouteLocation(a,M(_e.to),we)&&ze&&(ze._count=ze._count?ze._count+1:1)>30?(warn(`Detected a possibly infinite redirection in a navigation guard when going from "${pe.fullPath}" to "${we.fullPath}". Aborting to avoid a Stack Overflow.
 Are you always returning a new location within a navigation guard? That would lead to this error. Only return when redirecting or aborting, that should fix this. This might break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):j(assign({replace:ee},I(_e.to),{state:typeof _e.to=="object"?assign({},ue,_e.to.state):ue,force:Z}),ze||we)}else _e=G(we,pe,!0,ee,ue);return W(we,pe,_e),_e})}function oe(Ce,ze){const Ze=F(Ce,ze);return Ze?Promise.reject(Ze):Promise.resolve()}function Y(Ce){const ze=dt.values().next().value;return ze&&typeof ze.runWithContext=="function"?ze.runWithContext(Ce):Ce()}function K(Ce,ze){let Ze;const[pe,ue,Z]=extractChangingRecords(Ce,ze);Ze=extractComponentsGuards(pe.reverse(),"beforeRouteLeave",Ce,ze);for(const le of pe)le.leaveGuards.forEach(we=>{Ze.push(guardToPromiseFn(we,Ce,ze))});const ee=oe.bind(null,Ce,ze);return Ze.push(ee),ft(Ze).then(()=>{Ze=[];for(const le of l.list())Ze.push(guardToPromiseFn(le,Ce,ze));return Ze.push(ee),ft(Ze)}).then(()=>{Ze=extractComponentsGuards(ue,"beforeRouteUpdate",Ce,ze);for(const le of ue)le.updateGuards.forEach(we=>{Ze.push(guardToPromiseFn(we,Ce,ze))});return Ze.push(ee),ft(Ze)}).then(()=>{Ze=[];for(const le of Z)if(le.beforeEnter)if(isArray$1(le.beforeEnter))for(const we of le.beforeEnter)Ze.push(guardToPromiseFn(we,Ce,ze));else Ze.push(guardToPromiseFn(le.beforeEnter,Ce,ze));return Ze.push(ee),ft(Ze)}).then(()=>(Ce.matched.forEach(le=>le.enterCallbacks={}),Ze=extractComponentsGuards(Z,"beforeRouteEnter",Ce,ze,Y),Ze.push(ee),ft(Ze))).then(()=>{Ze=[];for(const le of c.list())Ze.push(guardToPromiseFn(le,Ce,ze));return Ze.push(ee),ft(Ze)}).catch(le=>isNavigationFailure(le,8)?le:Promise.reject(le))}function W(Ce,ze,Ze){d.list().forEach(pe=>Y(()=>pe(Ce,ze,Ze)))}function G(Ce,ze,Ze,pe,ue){const Z=F(Ce,ze);if(Z)return Z;const ee=ze===START_LOCATION_NORMALIZED,le=isBrowser?history.state:{};Ze&&(pe||ee?s.replace(Ce.fullPath,assign({scroll:ee&&le&&le.scroll},ue)):s.push(Ce.fullPath,ue)),u.value=Ce,Oe(Ce,ze,Ze,ee),We()}let ce;function se(){ce||(ce=s.listen((Ce,ze,Ze)=>{if(!pt.listening)return;const pe=M(Ce),ue=U(pe);if(ue){j(assign(ue,{replace:!0,force:!0}),pe).catch(noop$2);return}f=pe;const Z=u.value;isBrowser&&saveScrollPosition(getScrollKey(Z.fullPath,Ze.delta),computeScrollPosition()),K(pe,Z).catch(ee=>isNavigationFailure(ee,12)?ee:isNavigationFailure(ee,2)?(j(assign(I(ee.to),{force:!0}),pe).then(le=>{isNavigationFailure(le,20)&&!Ze.delta&&Ze.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$2),Promise.reject()):(Ze.delta&&s.go(-Ze.delta,!1),Be(ee,pe,Z))).then(ee=>{ee=ee||G(pe,Z,!1),ee&&(Ze.delta&&!isNavigationFailure(ee,8)?s.go(-Ze.delta,!1):Ze.type===NavigationType.pop&&isNavigationFailure(ee,20)&&s.go(-1,!1)),W(pe,Z,ee)}).catch(noop$2)}))}let me=useCallbacks(),ge=useCallbacks(),Te;function Be(Ce,ze,Ze){We(Ce);const pe=ge.list();return pe.length?pe.forEach(ue=>ue(Ce,ze,Ze)):(warn("uncaught error during route navigation:"),console.error(Ce)),Promise.reject(Ce)}function Ge(){return Te&&u.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Ce,ze)=>{me.add([Ce,ze])})}function We(Ce){return Te||(Te=!Ce,se(),me.list().forEach(([ze,Ze])=>Ce?Ze(Ce):ze()),me.reset()),Ce}function Oe(Ce,ze,Ze,pe){const{scrollBehavior:ue}=o;if(!isBrowser||!ue)return Promise.resolve();const Z=!Ze&&getSavedScrollPosition(getScrollKey(Ce.fullPath,0))||(pe||!Ze)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ue(Ce,ze,Z)).then(ee=>ee&&scrollToPosition(ee)).catch(ee=>Be(ee,Ce,ze))}const Ve=Ce=>s.go(Ce);let Xe;const dt=new Set,pt={currentRoute:u,listening:!0,addRoute:x,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:B,getRoutes:E,resolve:M,options:o,push:V,replace:L,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:l.add,beforeResolve:c.add,afterEach:d.add,onError:ge.add,isReady:Ge,install(Ce){const ze=this;Ce.component("RouterLink",RouterLink),Ce.component("RouterView",RouterView),Ce.config.globalProperties.$router=ze,Object.defineProperty(Ce.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(u)}),isBrowser&&!Xe&&u.value===START_LOCATION_NORMALIZED&&(Xe=!0,V(s.location).catch(ue=>{warn("Unexpected error when starting the router:",ue)}));const Ze={};for(const ue in START_LOCATION_NORMALIZED)Object.defineProperty(Ze,ue,{get:()=>u.value[ue],enumerable:!0});Ce.provide(routerKey,ze),Ce.provide(routeLocationKey,shallowReactive(Ze)),Ce.provide(routerViewLocationKey,u);const pe=Ce.unmount;dt.add(Ce),Ce.unmount=function(){dt.delete(Ce),dt.size<1&&(f=START_LOCATION_NORMALIZED,ce&&ce(),ce=null,u.value=START_LOCATION_NORMALIZED,Xe=!1,Te=!1),pe()},isBrowser&&addDevtools(Ce,ze,e)}};function ft(Ce){return Ce.reduce((ze,Ze)=>ze.then(()=>Y(Ze)),Promise.resolve())}return pt}function extractChangingRecords(o,e){const n=[],a=[],s=[],l=Math.max(e.matched.length,o.matched.length);for(let c=0;c<l;c++){const d=e.matched[c];d&&(o.matched.find(f=>isSameRouteRecord(f,d))?a.push(d):n.push(d));const u=o.matched[c];u&&(e.matched.find(f=>isSameRouteRecord(f,u))||s.push(u))}return[n,a,s]}function useRouter(){return inject(routerKey)}function useRoute(o){return inject(routeLocationKey)}const paramsSchema=z.object({serverUrl:z.string().optional(),location:z.string().optional(),rootBLockId:z.string().optional(),focusedBlockId:z.string().optional()}),useRouterParams=()=>{const o=useRoute(),e=useRouter();return computed({get:()=>{const n=paramsSchema.safeParse({serverUrl:o.params.serverUrl,location:o.params.location,rootBLockId:o.params.rootBLockId,focusedBlockId:o.params.focusedBlockId});if(!n.success)return;const{serverUrl:a,location:s,rootBLockId:l,focusedBlockId:c}=n.data;return{serverUrl:a?decodeURIComponent(a):void 0,location:s?decodeURIComponent(s):void 0,rootBLockId:l?decodeURIComponent(l):void 0,focusedBlockId:c?decodeURIComponent(c):void 0}},set:n=>{const a=paramsSchema.safeParse(n);if(!a.success){console.error("invalid router params",n);return}const{serverUrl:s,location:l,rootBLockId:c,focusedBlockId:d}=a.data;e.push({params:{serverUrl:s?encodeURIComponent(s):void 0,location:l?encodeURIComponent(l):void 0,rootBLockId:c?encodeURIComponent(c):void 0,focusedBlockId:d?encodeURIComponent(d):void 0}})}})},KbInfoContext=createContext(()=>{const o=ref({}),e=useRouterParams(),n=computed(()=>{var l;const s=(l=e.value)==null?void 0:l.location;return s==null?null:o.value[s]??null}),a=async(s,l,c)=>{const d=await getAllKbInfo({});if(!d.success){c==null||c(d);return}o.value=d.data.reduce((u,f)=>(u[f.location]={name:f.name,location:f.location},u),{}),l==null||l(d)};return watch(()=>{var s;return(s=e.value)==null?void 0:s.serverUrl},()=>{var s;((s=e.value)==null?void 0:s.serverUrl)!=null&&a()},{immediate:!0}),{kbs:o,refreshKbList:a,currKbInfo:n}}),JwtPayloadSchema=z.discriminatedUnion("role",[z.object({role:z.literal("admin"),serverUrl:z.string()}),z.object({role:z.literal("kb-editor"),serverUrl:z.string(),location:z.string()})]);function tryOnScopeDispose(o){return getCurrentScope()?(onScopeDispose(o),!0):!1}const localProvidedStateMap=new WeakMap,injectLocal=(...o)=>{var e;const n=o[0],a=(e=getCurrentInstance())==null?void 0:e.proxy;if(a==null&&!hasInjectionContext())throw new Error("injectLocal must be called in setup");return a&&localProvidedStateMap.has(a)&&n in localProvidedStateMap.get(a)?localProvidedStateMap.get(a)[n]:inject(...o)},isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const isDef=o=>typeof o<"u",toString$1=Object.prototype.toString,isObject$1=o=>toString$1.call(o)==="[object Object]",noop$1=()=>{};function createFilterWrapper(o,e){function n(...a){return new Promise((s,l)=>{Promise.resolve(o(()=>e.apply(this,a),{fn:e,thisArg:this,args:a})).then(s).catch(l)})}return n}const bypassFilter=o=>o();function debounceFilter(o,e={}){let n,a,s=noop$1;const l=c=>{clearTimeout(c),s(),s=noop$1};return c=>{const d=toValue$2(o),u=toValue$2(e.maxWait);return n&&l(n),d<=0||u!==void 0&&u<=0?(a&&(l(a),a=null),Promise.resolve(c())):new Promise((f,v)=>{s=e.rejectOnCancel?v:f,u&&!a&&(a=setTimeout(()=>{n&&l(n),a=null,f(c())},u)),n=setTimeout(()=>{a&&l(a),a=null,f(c())},d)})}}function throttleFilter(...o){let e=0,n,a=!0,s=noop$1,l,c,d,u,f;!isRef(o[0])&&typeof o[0]=="object"?{delay:c,trailing:d=!0,leading:u=!0,rejectOnCancel:f=!1}=o[0]:[c,d=!0,u=!0,f=!1]=o;const v=()=>{n&&(clearTimeout(n),n=void 0,s(),s=noop$1)};return b=>{const k=toValue$2(c),x=Date.now()-e,_=()=>l=b();return v(),k<=0?(e=Date.now(),_()):(x>k&&(u||!a)?(e=Date.now(),_()):d&&(l=new Promise((E,B)=>{s=f?B:E,n=setTimeout(()=>{e=Date.now(),a=!0,E(_()),v()},Math.max(0,k-x))})),!u&&!n&&(n=setTimeout(()=>a=!0,k)),a=!1,l)}}function pausableFilter(o=bypassFilter){const e=ref(!0);function n(){e.value=!1}function a(){e.value=!0}const s=(...l)=>{e.value&&o(...l)};return{isActive:readonly(e),pause:n,resume:a,eventFilter:s}}function pxValue(o){return o.endsWith("rem")?Number.parseFloat(o)*16:Number.parseFloat(o)}function getLifeCycleTarget(o){return getCurrentInstance()}function toArray$1(o){return Array.isArray(o)?o:[o]}function toRef(...o){if(o.length!==1)return toRef$1(...o);const e=o[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:noop$1}))):ref(e)}function useDebounceFn(o,e=200,n={}){return createFilterWrapper(debounceFilter(e,n),o)}function useThrottleFn(o,e=200,n=!1,a=!0,s=!1){return createFilterWrapper(throttleFilter(e,n,a,s),o)}function watchWithFilter(o,e,n={}){const{eventFilter:a=bypassFilter,...s}=n;return watch(o,createFilterWrapper(a,e),s)}function watchPausable(o,e,n={}){const{eventFilter:a,...s}=n,{eventFilter:l,pause:c,resume:d,isActive:u}=pausableFilter(a);return{stop:watchWithFilter(o,e,{...s,eventFilter:l}),pause:c,resume:d,isActive:u}}function syncRef(o,e,...[n]){const{flush:a="sync",deep:s=!1,immediate:l=!0,direction:c="both",transform:d={}}=n||{},u=[],f="ltr"in d&&d.ltr||(b=>b),v="rtl"in d&&d.rtl||(b=>b);return(c==="both"||c==="ltr")&&u.push(watchPausable(o,b=>{u.forEach(k=>k.pause()),e.value=f(b),u.forEach(k=>k.resume())},{flush:a,deep:s,immediate:l})),(c==="both"||c==="rtl")&&u.push(watchPausable(e,b=>{u.forEach(k=>k.pause()),o.value=v(b),u.forEach(k=>k.resume())},{flush:a,deep:s,immediate:l})),()=>{u.forEach(b=>b.stop())}}function tryOnMounted(o,e=!0,n){getLifeCycleTarget()?onMounted(o,n):e?o():nextTick(o)}const defaultWindow=isClient?window:void 0;function unrefElement(o){var e;const n=toValue$2(o);return(e=n==null?void 0:n.$el)!=null?e:n}function useEventListener(...o){let e,n,a,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([n,a,s]=o,e=defaultWindow):[e,n,a,s]=o,!e)return noop$1;n=toArray$1(n),a=toArray$1(a);const l=[],c=()=>{l.forEach(v=>v()),l.length=0},d=(v,b,k,x)=>(v.addEventListener(b,k,x),()=>v.removeEventListener(b,k,x)),u=watch(()=>[unrefElement(e),toValue$2(s)],([v,b])=>{if(c(),!v)return;const k=isObject$1(b)?{...b}:b;l.push(...n.flatMap(x=>a.map(_=>d(v,x,_,k))))},{immediate:!0,flush:"post"}),f=()=>{u(),c()};return tryOnScopeDispose(f),f}function useMounted(){const o=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{o.value=!0},e),o}function useSupported(o){const e=useMounted();return computed(()=>(e.value,!!o()))}const ssrWidthSymbol=Symbol("vueuse-ssr-width");function useSSRWidth(){const o=hasInjectionContext()?injectLocal(ssrWidthSymbol,null):null;return typeof o=="number"?o:void 0}function useMediaQuery(o,e={}){const{window:n=defaultWindow,ssrWidth:a=useSSRWidth()}=e,s=useSupported(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),l=ref(typeof a=="number");let c;const d=ref(!1),u=b=>{d.value=b.matches},f=()=>{c&&("removeEventListener"in c?c.removeEventListener("change",u):c.removeListener(u))},v=watchEffect(()=>{if(l.value){l.value=!s.value;const b=toValue$2(o).split(",");d.value=b.some(k=>{const x=k.includes("not all"),_=k.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),E=k.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let B=!!(_||E);return _&&B&&(B=a>=pxValue(_[1])),E&&B&&(B=a<=pxValue(E[1])),x?!B:B});return}s.value&&(f(),c=n.matchMedia(toValue$2(o)),"addEventListener"in c?c.addEventListener("change",u):c.addListener(u),d.value=c.matches)});return tryOnScopeDispose(()=>{v(),f(),c=void 0}),computed(()=>d.value)}function cloneFnJSON(o){return JSON.parse(JSON.stringify(o))}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers$2=getHandlers();function getHandlers(){return globalKey in _global$1||(_global$1[globalKey]=_global$1[globalKey]||{}),_global$1[globalKey]}function getSSRHandler(o,e){return handlers$2[o]||e}function usePreferredDark(o){return useMediaQuery("(prefers-color-scheme: dark)",o)}function guessSerializerType(o){return o==null?"any":o instanceof Set?"set":o instanceof Map?"map":o instanceof Date?"date":typeof o=="boolean"?"boolean":typeof o=="string"?"string":typeof o=="object"?"object":Number.isNaN(o)?"any":"number"}const StorageSerializers={boolean:{read:o=>o==="true",write:o=>String(o)},object:{read:o=>JSON.parse(o),write:o=>JSON.stringify(o)},number:{read:o=>Number.parseFloat(o),write:o=>String(o)},any:{read:o=>o,write:o=>String(o)},string:{read:o=>o,write:o=>String(o)},map:{read:o=>new Map(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o.entries()))},set:{read:o=>new Set(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o))},date:{read:o=>new Date(o),write:o=>o.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(o,e,n,a={}){var s;const{flush:l="pre",deep:c=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:f=!1,shallow:v,window:b=defaultWindow,eventFilter:k,onError:x=K=>{console.error(K)},initOnMounted:_}=a,E=(v?shallowRef:ref)(typeof e=="function"?e():e);if(!n)try{n=getSSRHandler("getDefaultStorage",()=>{var K;return(K=defaultWindow)==null?void 0:K.localStorage})()}catch(K){x(K)}if(!n)return E;const B=toValue$2(e),M=guessSerializerType(B),I=(s=a.serializer)!=null?s:StorageSerializers[M],{pause:F,resume:V}=watchPausable(E,()=>U(E.value),{flush:l,deep:c,eventFilter:k});b&&d&&tryOnMounted(()=>{n instanceof Storage?useEventListener(b,"storage",oe):useEventListener(b,customStorageEventName,Y),_&&oe()}),_||oe();function L(K,W){if(b){const G={key:o,oldValue:K,newValue:W,storageArea:n};b.dispatchEvent(n instanceof Storage?new StorageEvent("storage",G):new CustomEvent(customStorageEventName,{detail:G}))}}function U(K){try{const W=n.getItem(o);if(K==null)L(W,null),n.removeItem(o);else{const G=I.write(K);W!==G&&(n.setItem(o,G),L(W,G))}}catch(W){x(W)}}function j(K){const W=K?K.newValue:n.getItem(o);if(W==null)return u&&B!=null&&n.setItem(o,I.write(B)),B;if(!K&&f){const G=I.read(W);return typeof f=="function"?f(G,B):M==="object"&&!Array.isArray(G)?{...B,...G}:G}else return typeof W!="string"?W:I.read(W)}function oe(K){if(!(K&&K.storageArea!==n)){if(K&&K.key==null){E.value=B;return}if(!(K&&K.key!==o)){F();try{(K==null?void 0:K.newValue)!==I.write(E.value)&&(E.value=j(K))}catch(W){x(W)}finally{K?nextTick(V):V()}}}}function Y(K){oe(K.detail)}return E}const CSS_DISABLE_TRANS="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function useColorMode(o={}){const{selector:e="html",attribute:n="class",initialValue:a="auto",window:s=defaultWindow,storage:l,storageKey:c="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:u,emitAuto:f,disableTransition:v=!0}=o,b={auto:"",light:"light",dark:"dark",...o.modes||{}},k=usePreferredDark({window:s}),x=computed(()=>k.value?"dark":"light"),_=u||(c==null?toRef(a):useStorage(c,a,l,{window:s,listenToStorageChanges:d})),E=computed(()=>_.value==="auto"?x.value:_.value),B=getSSRHandler("updateHTMLAttrs",(V,L,U)=>{const j=typeof V=="string"?s==null?void 0:s.document.querySelector(V):unrefElement(V);if(!j)return;const oe=new Set,Y=new Set;let K=null;if(L==="class"){const G=U.split(/\s/g);Object.values(b).flatMap(ce=>(ce||"").split(/\s/g)).filter(Boolean).forEach(ce=>{G.includes(ce)?oe.add(ce):Y.add(ce)})}else K={key:L,value:U};if(oe.size===0&&Y.size===0&&K===null)return;let W;v&&(W=s.document.createElement("style"),W.appendChild(document.createTextNode(CSS_DISABLE_TRANS)),s.document.head.appendChild(W));for(const G of oe)j.classList.add(G);for(const G of Y)j.classList.remove(G);K&&j.setAttribute(K.key,K.value),v&&(s.getComputedStyle(W).opacity,document.head.removeChild(W))});function M(V){var L;B(e,n,(L=b[V])!=null?L:V)}function I(V){o.onChanged?o.onChanged(V,M):M(V)}watch(E,I,{flush:"post",immediate:!0}),tryOnMounted(()=>I(E.value));const F=computed({get(){return f?_.value:E.value},set(V){_.value=V}});return Object.assign(F,{store:_,system:x,state:E})}function useLocalStorage(o,e,n={}){const{window:a=defaultWindow}=n;return useStorage(o,e,a==null?void 0:a.localStorage,n)}function useVModel(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=n||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):cloneFnJSON(F):F,M=()=>isDef(o[e])?B(o[e]):b,I=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),V=ref(F);let L=!1;return watch(()=>o[e],U=>{L||(L=!0,V.value=B(U),nextTick(()=>L=!1))}),watch(V,U=>{!L&&(U!==o[e]||v)&&I(U)},{deep:v}),V}else return computed({get(){return M()},set(F){I(F)}})}const useLocalStorage2=(o,e)=>{const n=ref(e);return watch(o,(a,s,l)=>{if(!a)return;const c=useLocalStorage(a,e),d=syncRef(n,c,{immediate:!0,direction:"rtl"}),u=syncRef(n,c,{direction:"ltr"});l(()=>{d(),u()})},{immediate:!0}),n};function bind$1(o,e){return function(){return o.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(o=>e=>{const n=toString.call(e);return o[n]||(o[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=o=>(o=o.toLowerCase(),e=>kindOf(e)===o),typeOfTest=o=>e=>typeof e===o,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(o){return o!==null&&!isUndefined(o)&&o.constructor!==null&&!isUndefined(o.constructor)&&isFunction(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(o){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&isArrayBuffer(o.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=o=>o!==null&&typeof o=="object",isBoolean=o=>o===!0||o===!1,isPlainObject=o=>{if(kindOf(o)!=="object")return!1;const e=getPrototypeOf(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=o=>isObject(o)&&isFunction(o.pipe),isFormData=o=>{let e;return o&&(typeof FormData=="function"&&o instanceof FormData||isFunction(o.append)&&((e=kindOf(o))==="formdata"||e==="object"&&isFunction(o.toString)&&o.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(o,e,{allOwnKeys:n=!1}={}){if(o===null||typeof o>"u")return;let a,s;if(typeof o!="object"&&(o=[o]),isArray(o))for(a=0,s=o.length;a<s;a++)e.call(null,o[a],a,o);else{const l=n?Object.getOwnPropertyNames(o):Object.keys(o),c=l.length;let d;for(a=0;a<c;a++)d=l[a],e.call(null,o[d],d,o)}}function findKey(o,e){e=e.toLowerCase();const n=Object.keys(o);let a=n.length,s;for(;a-- >0;)if(s=n[a],e===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=o=>!isUndefined(o)&&o!==_global;function merge(){const{caseless:o}=isContextDefined(this)&&this||{},e={},n=(a,s)=>{const l=o&&findKey(e,s)||s;isPlainObject(e[l])&&isPlainObject(a)?e[l]=merge(e[l],a):isPlainObject(a)?e[l]=merge({},a):isArray(a)?e[l]=a.slice():e[l]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&forEach(arguments[a],n);return e}const extend=(o,e,n,{allOwnKeys:a}={})=>(forEach(e,(s,l)=>{n&&isFunction(s)?o[l]=bind$1(s,n):o[l]=s},{allOwnKeys:a}),o),stripBOM=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),inherits=(o,e,n,a)=>{o.prototype=Object.create(e.prototype,a),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:e.prototype}),n&&Object.assign(o.prototype,n)},toFlatObject=(o,e,n,a)=>{let s,l,c;const d={};if(e=e||{},o==null)return e;do{for(s=Object.getOwnPropertyNames(o),l=s.length;l-- >0;)c=s[l],(!a||a(c,o,e))&&!d[c]&&(e[c]=o[c],d[c]=!0);o=n!==!1&&getPrototypeOf(o)}while(o&&(!n||n(o,e))&&o!==Object.prototype);return e},endsWith=(o,e,n)=>{o=String(o),(n===void 0||n>o.length)&&(n=o.length),n-=e.length;const a=o.indexOf(e,n);return a!==-1&&a===n},toArray=o=>{if(!o)return null;if(isArray(o))return o;let e=o.length;if(!isNumber(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=o[e];return n},isTypedArray=(o=>e=>o&&e instanceof o)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(o,e)=>{const n=(o&&o[Symbol.iterator]).call(o);let a;for(;(a=n.next())&&!a.done;){const s=a.value;e.call(o,s[0],s[1])}},matchAll=(o,e)=>{let n;const a=[];for(;(n=o.exec(e))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),hasOwnProperty=(({hasOwnProperty:o})=>(e,n)=>o.call(e,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(o,e)=>{const n=Object.getOwnPropertyDescriptors(o),a={};forEach(n,(s,l)=>{let c;(c=e(s,l,o))!==!1&&(a[l]=c||s)}),Object.defineProperties(o,a)},freezeMethods=o=>{reduceDescriptors(o,(e,n)=>{if(isFunction(o)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=o[n];if(isFunction(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(o,e)=>{const n={},a=s=>{s.forEach(l=>{n[l]=!0})};return isArray(o)?a(o):a(String(o).split(e)),n},noop=()=>{},toFiniteNumber=(o,e)=>o!=null&&Number.isFinite(o=+o)?o:e,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(o=16,e=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:a}=e;for(;o--;)n+=e[Math.random()*a|0];return n};function isSpecCompliantForm(o){return!!(o&&isFunction(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const toJSONObject=o=>{const e=new Array(10),n=(a,s)=>{if(isObject(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[s]=a;const l=isArray(a)?[]:{};return forEach(a,(c,d)=>{const u=n(c,s+1);!isUndefined(u)&&(l[d]=u)}),e[s]=void 0,l}}return a};return n(o,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=o=>o&&(isObject(o)||isFunction(o))&&isFunction(o.then)&&isFunction(o.catch),_setImmediate=((o,e)=>o?setImmediate:e?((n,a)=>(_global.addEventListener("message",({source:s,data:l})=>{s===_global&&l===n&&a.length&&a.shift()()},!1),s=>{a.push(s),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$2={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(o,e,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}utils$2.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{descriptors[o]={value:o}}),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError.from=(o,e,n,a,s,l)=>{const c=Object.create(prototype$1);return utils$2.toFlatObject(o,c,function(d){return d!==Error.prototype},d=>d!=="isAxiosError"),AxiosError.call(c,o.message,e,n,a,s),c.cause=o,c.name=o.name,l&&Object.assign(c,l),c};const httpAdapter=null;function isVisitable(o){return utils$2.isPlainObject(o)||utils$2.isArray(o)}function removeBrackets(o){return utils$2.endsWith(o,"[]")?o.slice(0,-2):o}function renderKey(o,e,n){return o?o.concat(e).map(function(a,s){return a=removeBrackets(a),!n&&s?"["+a+"]":a}).join(n?".":""):e}function isFlatArray(o){return utils$2.isArray(o)&&!o.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(o){return/^is[A-Z]/.test(o)});function toFormData(o,e,n){if(!utils$2.isObject(o))throw new TypeError("target must be an object");e=e||new FormData,n=utils$2.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!utils$2.isUndefined(_[x])});const a=n.metaTokens,s=n.visitor||f,l=n.dots,c=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(e);if(!utils$2.isFunction(s))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(utils$2.isDate(x))return x.toISOString();if(!d&&utils$2.isBlob(x))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(x)||utils$2.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,_,E){let B=x;if(x&&!E&&typeof x=="object"){if(utils$2.endsWith(_,"{}"))_=a?_:_.slice(0,-2),x=JSON.stringify(x);else if(utils$2.isArray(x)&&isFlatArray(x)||(utils$2.isFileList(x)||utils$2.endsWith(_,"[]"))&&(B=utils$2.toArray(x)))return _=removeBrackets(_),B.forEach(function(M,I){!(utils$2.isUndefined(M)||M===null)&&e.append(c===!0?renderKey([_],I,l):c===null?_:_+"[]",u(M))}),!1}return isVisitable(x)?!0:(e.append(renderKey(E,_,l),u(x)),!1)}const v=[],b=Object.assign(predicates,{defaultVisitor:f,convertValue:u,isVisitable});function k(x,_){if(!utils$2.isUndefined(x)){if(v.indexOf(x)!==-1)throw Error("Circular reference detected in "+_.join("."));v.push(x),utils$2.forEach(x,function(E,B){(!(utils$2.isUndefined(E)||E===null)&&s.call(e,E,utils$2.isString(B)?B.trim():B,_,b))===!0&&k(E,_?_.concat(B):[B])}),v.pop()}}if(!utils$2.isObject(o))throw new TypeError("data must be an object");return k(o),e}function encode$2(o){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function AxiosURLSearchParams(o,e){this._pairs=[],o&&toFormData(o,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(o,e){this._pairs.push([o,e])},prototype.toString=function(o){const e=o?function(n){return o.call(this,n,encode$2)}:encode$2;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function encode$1(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(o,e,n){if(!e)return o;const a=n&&n.encode||encode$1;utils$2.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let l;if(s?l=s(e,n):l=utils$2.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(a),l){const c=o.indexOf("#");c!==-1&&(o=o.slice(0,c)),o+=(o.indexOf("?")===-1?"?":"&")+l}return o}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,a){return this.handlers.push({fulfilled:e,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$2.forEach(this.handlers,function(n){n!==null&&e(n)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(o,e){return toFormData(o,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,a,s,l){return platform.isNode&&utils$2.isBuffer(n)?(this.append(a,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(o){return utils$2.matchAll(/\w+|\[(\w*)]/g,o).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(o){const e={},n=Object.keys(o);let a;const s=n.length;let l;for(a=0;a<s;a++)l=n[a],e[l]=o[l];return e}function formDataToJSON(o){function e(n,a,s,l){let c=n[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),u=l>=n.length;return c=!c&&utils$2.isArray(s)?s.length:c,u?(utils$2.hasOwnProp(s,c)?s[c]=[s[c],a]:s[c]=a,!d):((!s[c]||!utils$2.isObject(s[c]))&&(s[c]=[]),e(n,a,s[c],l)&&utils$2.isArray(s[c])&&(s[c]=arrayToObject(s[c])),!d)}if(utils$2.isFormData(o)&&utils$2.isFunction(o.entries)){const n={};return utils$2.forEachEntry(o,(a,s)=>{e(parsePropPath(a),s,n,0)}),n}return null}function stringifySafely(o,e,n){if(utils$2.isString(o))try{return(e||JSON.parse)(o),utils$2.trim(o)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(o)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(o,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,s=utils$2.isObject(o);if(s&&utils$2.isHTMLForm(o)&&(o=new FormData(o)),utils$2.isFormData(o))return a?JSON.stringify(formDataToJSON(o)):o;if(utils$2.isArrayBuffer(o)||utils$2.isBuffer(o)||utils$2.isStream(o)||utils$2.isFile(o)||utils$2.isBlob(o)||utils$2.isReadableStream(o))return o;if(utils$2.isArrayBufferView(o))return o.buffer;if(utils$2.isURLSearchParams(o))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let l;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(o,this.formSerializer).toString();if((l=utils$2.isFileList(o))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return toFormData(l?{"files[]":o}:o,c&&new c,this.formSerializer)}}return s||a?(e.setContentType("application/json",!1),stringifySafely(o)):o}],transformResponse:[function(o){const e=this.transitional||defaults$1.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(utils$2.isResponse(o)||utils$2.isReadableStream(o))return o;if(o&&utils$2.isString(o)&&(n&&!this.responseType||a)){const s=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(o)}catch(l){if(s)throw l.name==="SyntaxError"?AxiosError.from(l,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):l}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],o=>{defaults$1.headers[o]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=o=>{const e={};let n,a,s;return o&&o.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(a):e[n]=[a]:e[n]=e[n]?e[n]+", "+a:a)}),e},$internals=Symbol("internals");function normalizeHeader(o){return o&&String(o).trim().toLowerCase()}function normalizeValue(o){return o===!1||o==null?o:utils$2.isArray(o)?o.map(normalizeValue):String(o)}function parseTokens(o){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(o);)e[a[1]]=a[2];return e}const isValidHeaderName=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function matchHeaderValue(o,e,n,a,s){if(utils$2.isFunction(a))return a.call(this,e,n);if(s&&(e=n),!!utils$2.isString(e)){if(utils$2.isString(a))return e.indexOf(a)!==-1;if(utils$2.isRegExp(a))return a.test(e)}}function formatHeader(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,a)=>n.toUpperCase()+a)}function buildAccessors(o,e){const n=utils$2.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(o,a+n,{value:function(s,l,c){return this[a].call(this,e,s,l,c)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,a){const s=this;function l(d,u,f){const v=normalizeHeader(u);if(!v)throw new Error("header name must be a non-empty string");const b=utils$2.findKey(s,v);(!b||s[b]===void 0||f===!0||f===void 0&&s[b]!==!1)&&(s[b||u]=normalizeValue(d))}const c=(d,u)=>utils$2.forEach(d,(f,v)=>l(f,v,u));if(utils$2.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(utils$2.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))c(parseHeaders(e),n);else if(utils$2.isHeaders(e))for(const[d,u]of e.entries())l(u,d,a);else e!=null&&l(n,e,a);return this}get(e,n){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);if(a){const s=this[a];if(!n)return s;if(n===!0)return parseTokens(s);if(utils$2.isFunction(n))return n.call(this,s,a);if(utils$2.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const a=utils$2.findKey(this,e);return!!(a&&this[a]!==void 0&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(e,n){const a=this;let s=!1;function l(c){if(c=normalizeHeader(c),c){const d=utils$2.findKey(a,c);d&&(!n||matchHeaderValue(a,a[d],d,n))&&(delete a[d],s=!0)}}return utils$2.isArray(e)?e.forEach(l):l(e),s}clear(e){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const l=n[a];(!e||matchHeaderValue(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const n=this,a={};return utils$2.forEach(this,(s,l)=>{const c=utils$2.findKey(a,l);if(c){n[c]=normalizeValue(s),delete n[l];return}const d=e?formatHeader(l):String(l).trim();d!==l&&delete n[l],n[d]=normalizeValue(s),a[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils$2.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=e&&utils$2.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const a=new this(e);return n.forEach(s=>a.set(s)),a}static accessor(e){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,a=this.prototype;function s(l){const c=normalizeHeader(l);n[c]||(buildAccessors(a,l),n[c]=!0)}return utils$2.isArray(e)?e.forEach(s):s(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:o},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>o,set(a){this[n]=a}}}),utils$2.freezeMethods(AxiosHeaders);function transformData(o,e){const n=this||defaults$1,a=e||n,s=AxiosHeaders.from(a.headers);let l=a.data;return utils$2.forEach(o,function(c){l=c.call(n,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function isCancel(o){return!!(o&&o.__CANCEL__)}function CanceledError(o,e,n){AxiosError.call(this,o??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(o,e,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?o(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(o){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return e&&e[1]||""}function speedometer(o,e){o=o||10;const n=new Array(o),a=new Array(o);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(d){const u=Date.now(),f=a[l];c||(c=u),n[s]=d,a[s]=u;let v=l,b=0;for(;v!==s;)b+=n[v++],v=v%o;if(s=(s+1)%o,s===l&&(l=(l+1)%o),u-c<e)return;const k=f&&u-f;return k?Math.round(b*1e3/k):void 0}}function throttle(o,e){let n=0,a=1e3/e,s,l;const c=(d,u=Date.now())=>{n=u,s=null,l&&(clearTimeout(l),l=null),o.apply(null,d)};return[(...d)=>{const u=Date.now(),f=u-n;f>=a?c(d,u):(s=d,l||(l=setTimeout(()=>{l=null,c(s)},a-f)))},()=>s&&c(s)]}const progressEventReducer=(o,e,n=3)=>{let a=0;const s=speedometer(50,250);return throttle(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,u=c-a,f=s(u),v=c<=d;a=c;const b={loaded:c,total:d,progress:d?c/d:void 0,bytes:u,rate:f||void 0,estimated:f&&d&&v?(d-c)/f:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};o(b)},n)},progressEventDecorator=(o,e)=>{const n=o!=null;return[a=>e[0]({lengthComputable:n,total:o,loaded:a}),e[1]]},asyncDecorator=o=>(...e)=>utils$2.asap(()=>o(...e)),isURLSameOrigin=platform.hasStandardBrowserEnv?((o,e)=>n=>(n=new URL(n,platform.origin),o.protocol===n.protocol&&o.host===n.host&&(e||o.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(o,e,n,a,s,l){const c=[o+"="+encodeURIComponent(e)];utils$2.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),utils$2.isString(a)&&c.push("path="+a),utils$2.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(o){const e=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function combineURLs(o,e){return e?o.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):o}function buildFullPath(o,e){return o&&!isAbsoluteURL(e)?combineURLs(o,e):e}const headersToObject=o=>o instanceof AxiosHeaders?{...o}:o;function mergeConfig(o,e){e=e||{};const n={};function a(f,v,b,k){return utils$2.isPlainObject(f)&&utils$2.isPlainObject(v)?utils$2.merge.call({caseless:k},f,v):utils$2.isPlainObject(v)?utils$2.merge({},v):utils$2.isArray(v)?v.slice():v}function s(f,v,b,k){if(utils$2.isUndefined(v)){if(!utils$2.isUndefined(f))return a(void 0,f,b,k)}else return a(f,v,b,k)}function l(f,v){if(!utils$2.isUndefined(v))return a(void 0,v)}function c(f,v){if(utils$2.isUndefined(v)){if(!utils$2.isUndefined(f))return a(void 0,f)}else return a(void 0,v)}function d(f,v,b){if(b in e)return a(f,v);if(b in o)return a(void 0,f)}const u={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,v,b)=>s(headersToObject(f),headersToObject(v),b,!0)};return utils$2.forEach(Object.keys(Object.assign({},o,e)),function(f){const v=u[f]||s,b=v(o[f],e[f],f);utils$2.isUndefined(b)&&v!==d||(n[f]=b)}),n}const resolveConfig=o=>{const e=mergeConfig({},o);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=AxiosHeaders.from(c),e.url=buildURL(buildFullPath(e.baseURL,e.url),o.params,o.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(utils$2.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((u=c.getContentType())!==!1){const[f,...v]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...v].join("; "))}}if(platform.hasStandardBrowserEnv&&(a&&utils$2.isFunction(a)&&(a=a(e)),a||a!==!1&&isURLSameOrigin(e.url))){const f=s&&l&&cookies.read(l);f&&c.set(s,f)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(o){return new Promise(function(e,n){const a=resolveConfig(o);let s=a.data;const l=AxiosHeaders.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=a,f,v,b,k,x;function _(){k&&k(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function B(){if(!E)return;const I=AxiosHeaders.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),F={data:!c||c==="text"||c==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:I,config:o,request:E};settle(function(V){e(V),_()},function(V){n(V),_()},F),E=null}"onloadend"in E?E.onloadend=B:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(B)},E.onabort=function(){E&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,o,E)),E=null)},E.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,o,E)),E=null},E.ontimeout=function(){let I=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const F=a.transitional||transitionalDefaults;a.timeoutErrorMessage&&(I=a.timeoutErrorMessage),n(new AxiosError(I,F.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,o,E)),E=null},s===void 0&&l.setContentType(null),"setRequestHeader"in E&&utils$2.forEach(l.toJSON(),function(I,F){E.setRequestHeader(F,I)}),utils$2.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),c&&c!=="json"&&(E.responseType=a.responseType),u&&([b,x]=progressEventReducer(u,!0),E.addEventListener("progress",b)),d&&E.upload&&([v,k]=progressEventReducer(d),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",k)),(a.cancelToken||a.signal)&&(f=I=>{E&&(n(!I||I.type?new CanceledError(null,o,E):I),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const M=parseProtocol(a.url);if(M&&platform.protocols.indexOf(M)===-1){n(new AxiosError("Unsupported protocol "+M+":",AxiosError.ERR_BAD_REQUEST,o));return}E.send(s||null)})},composeSignals=(o,e)=>{const{length:n}=o=o?o.filter(Boolean):[];if(e||n){let a=new AbortController,s;const l=function(f){if(!s){s=!0,d();const v=f instanceof Error?f:this.reason;a.abort(v instanceof AxiosError?v:new CanceledError(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new AxiosError(`timeout ${e} of ms exceeded`,AxiosError.ETIMEDOUT))},e);const d=()=>{o&&(c&&clearTimeout(c),c=null,o.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),o=null)};o.forEach(f=>f.addEventListener("abort",l));const{signal:u}=a;return u.unsubscribe=()=>utils$2.asap(d),u}},streamChunk=function*(o,e){let n=o.byteLength;if(n<e){yield o;return}let a=0,s;for(;a<n;)s=a+e,yield o.slice(a,s),a=s},readBytes=async function*(o,e){for await(const n of readStream(o))yield*streamChunk(n,e)},readStream=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const e=o.getReader();try{for(;;){const{done:n,value:a}=await e.read();if(n)break;yield a}}finally{await e.cancel()}},trackStream=(o,e,n,a)=>{const s=readBytes(o,e);let l=0,c,d=u=>{c||(c=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:f,value:v}=await s.next();if(f){d(),u.close();return}let b=v.byteLength;if(n){let k=l+=b;n(k)}u.enqueue(new Uint8Array(v))}catch(f){throw d(f),f}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(o=>e=>o.encode(e))(new TextEncoder):async o=>new Uint8Array(await new Response(o).arrayBuffer())),test=(o,...e)=>{try{return!!o(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let o=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return o=!0,"half"}}).headers.has("Content-Type");return o&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(o=>o.body)};isFetchSupported&&(o=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$2.isFunction(o[e])?n=>n[e]():(n,a)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async o=>{if(o==null)return 0;if(utils$2.isBlob(o))return o.size;if(utils$2.isSpecCompliantForm(o))return(await new Request(platform.origin,{method:"POST",body:o}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(o)||utils$2.isArrayBuffer(o))return o.byteLength;if(utils$2.isURLSearchParams(o)&&(o=o+""),utils$2.isString(o))return(await encodeText(o)).byteLength},resolveBodyLength=async(o,e)=>utils$2.toFiniteNumber(o.getContentLength())??getBodyLength(e),fetchAdapter=isFetchSupported&&(async o=>{let{url:e,method:n,data:a,signal:s,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:u,responseType:f,headers:v,withCredentials:b="same-origin",fetchOptions:k}=resolveConfig(o);f=f?(f+"").toLowerCase():"text";let x=composeSignals([s,l&&l.toAbortSignal()],c),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let B;try{if(u&&supportsRequestStream&&n!=="get"&&n!=="head"&&(B=await resolveBodyLength(v,a))!==0){let L=new Request(e,{method:"POST",body:a,duplex:"half"}),U;if(utils$2.isFormData(a)&&(U=L.headers.get("content-type"))&&v.setContentType(U),L.body){const[j,oe]=progressEventDecorator(B,progressEventReducer(asyncDecorator(u)));a=trackStream(L.body,DEFAULT_CHUNK_SIZE,j,oe)}}utils$2.isString(b)||(b=b?"include":"omit");const M="credentials"in Request.prototype;_=new Request(e,{...k,signal:x,method:n.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:M?b:void 0});let I=await fetch(_);const F=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(d||F&&E)){const L={};["status","statusText","headers"].forEach(Y=>{L[Y]=I[Y]});const U=utils$2.toFiniteNumber(I.headers.get("content-length")),[j,oe]=d&&progressEventDecorator(U,progressEventReducer(asyncDecorator(d),!0))||[];I=new Response(trackStream(I.body,DEFAULT_CHUNK_SIZE,j,()=>{oe&&oe(),E&&E()}),L)}f=f||"text";let V=await resolvers[utils$2.findKey(resolvers,f)||"text"](I,o);return!F&&E&&E(),await new Promise((L,U)=>{settle(L,U,{data:V,headers:AxiosHeaders.from(I.headers),status:I.status,statusText:I.statusText,config:o,request:_})})}catch(M){throw E&&E(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,o,_),{cause:M.cause||M}):AxiosError.from(M,M&&M.code,o,_)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(o,e)=>{if(o){try{Object.defineProperty(o,"name",{value:e})}catch{}Object.defineProperty(o,"adapterName",{value:e})}});const renderReason=o=>`- ${o}`,isResolvedHandle=o=>utils$2.isFunction(o)||o===null||o===!1,adapters={getAdapter:o=>{o=utils$2.isArray(o)?o:[o];const{length:e}=o;let n,a;const s={};for(let l=0;l<e;l++){n=o[l];let c;if(a=n,!isResolvedHandle(n)&&(a=knownAdapters[(c=String(n)).toLowerCase()],a===void 0))throw new AxiosError(`Unknown adapter '${c}'`);if(a)break;s[c||"#"+l]=a}if(!a){const l=Object.entries(s).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(renderReason).join(`
`):" "+renderReason(l[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new CanceledError(null,o)}function dispatchRequest(o){return throwIfCancellationRequested(o),o.headers=AxiosHeaders.from(o.headers),o.data=transformData.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(o.adapter||defaults$1.adapter)(o).then(function(e){return throwIfCancellationRequested(o),e.data=transformData.call(o,o.transformResponse,e),e.headers=AxiosHeaders.from(e.headers),e},function(e){return isCancel(e)||(throwIfCancellationRequested(o),e&&e.response&&(e.response.data=transformData.call(o,o.transformResponse,e.response),e.response.headers=AxiosHeaders.from(e.response.headers))),Promise.reject(e)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((o,e)=>{validators$1[o]=function(n){return typeof n===o||"a"+(e<1?"n ":" ")+o}});const deprecatedWarnings={};validators$1.transitional=function(o,e,n){function a(s,l){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return(s,l,c)=>{if(o===!1)throw new AxiosError(a(l," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(a(l," has been deprecated since v"+e+" and will be removed in the near future"))),o?o(s,l,c):!0}},validators$1.spelling=function(o){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${o}`),!0)};function assertOptions(o,e,n){if(typeof o!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(o);let s=a.length;for(;s-- >0;){const l=a[s],c=e[l];if(c){const d=o[l],u=d===void 0||c(d,l,o);if(u!==!0)throw new AxiosError("option "+l+" must be "+u,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,n){try{return await this._request(e,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:l}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$2.isFunction(s)?n.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&utils$2.merge(l.common,l[n.method]);l&&utils$2.forEach(["delete","get","head","post","put","patch","common"],_=>{delete l[_]}),n.headers=AxiosHeaders.concat(c,l);const d=[];let u=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(u=u&&_.synchronous,d.unshift(_.fulfilled,_.rejected))});const f=[];this.interceptors.response.forEach(function(_){f.push(_.fulfilled,_.rejected)});let v,b=0,k;if(!u){const _=[dispatchRequest.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,f),k=_.length,v=Promise.resolve(n);b<k;)v=v.then(_[b++],_[b++]);return v}k=d.length;let x=n;for(b=0;b<k;){const _=d[b++],E=d[b++];try{x=_(x)}catch(B){E.call(this,B);break}}try{v=dispatchRequest.call(this,x)}catch(_){return Promise.reject(_)}for(b=0,k=f.length;b<k;)v=v.then(f[b++],f[b++]);return v}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url);return buildURL(n,e.params,e.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function(o){Axios.prototype[o]=function(e,n){return this.request(mergeConfig(n||{},{method:o,url:e,data:(n||{}).data}))}}),utils$2.forEach(["post","put","patch"],function(o){function e(n){return function(a,s,l){return this.request(mergeConfig(l||{},{method:o,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Axios.prototype[o]=e(),Axios.prototype[o+"Form"]=e(!0)});class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(s=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](s);a._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{a.subscribe(d),l=d}).then(s);return c.cancel=function(){a.unsubscribe(l)},c},e(function(s,l,c){a.reason||(a.reason=new CanceledError(s,l,c),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=a=>{e.abort(a)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new CancelToken(function(n){e=n}),cancel:e}}}function spread(o){return function(e){return o.apply(null,e)}}function isAxiosError(o){return utils$2.isObject(o)&&o.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([o,e])=>{HttpStatusCode[e]=o});function createInstance(o){const e=new Axios(o),n=bind$1(Axios.prototype.request,e);return utils$2.extend(n,Axios.prototype,e,{allOwnKeys:!0}),utils$2.extend(n,e,null,{allOwnKeys:!0}),n.create=function(a){return createInstance(mergeConfig(o,a))},n}const axios=createInstance(defaults$1);axios.Axios=Axios,axios.CanceledError=CanceledError,axios.CancelToken=CancelToken,axios.isCancel=isCancel,axios.VERSION=VERSION,axios.toFormData=toFormData,axios.AxiosError=AxiosError,axios.Cancel=axios.CanceledError,axios.all=function(o){return Promise.all(o)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders,axios.formToJSON=o=>formDataToJSON(utils$2.isHTMLForm(o)?new FormData(o):o),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode,axios.default=axios;const ServerInfoContext=createContext(()=>{const o=ref(""),e=useRoute(),n=useRouterParams(),a=computed(()=>{var B,M;const _=(B=n.value)==null?void 0:B.serverUrl,E=(M=n.value)==null?void 0:M.location;return!_||!E?null:`${_}-${E}-`}),s=_=>`${_}-admin-token`,l=(_,E)=>`${_}-${E}-token`,c=computed(()=>{var B,M;const _=(B=n.value)==null?void 0:B.serverUrl,E=(M=n.value)==null?void 0:M.location;return _&&!E?s(_):_&&E?l(_,E):null}),d=useLocalStorage2(c,""),u=_=>{const E=_.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),B=decodeURIComponent(window.atob(E).split("").map(function(I){return"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)}).join("")),M=z.string().transform(I=>{try{return JSON.parse(I)}catch{return null}}).pipe(JwtPayloadSchema).safeParse(B);return M.success?M.data:null},f=computed(()=>d.value?u(d.value):null),v=()=>{d.value="",o.value="",router.replace("/login/admin")};watch(()=>e.params.serverUrl,_=>{_!=null?o.value=_:o.value=""},{immediate:!0});const b=computed(()=>axios.create({baseURL:o.value,timeout:1e4,headers:{Authorization:d.value}})),k=()=>b.value,x={token:d,buildKbEditorTokenKey:l,buildAdminTokenKey:s,tokenPayload:f,extractTokenPayload:u,kbPrefix:a,serverUrl:o,getAxios:k,logout:v};return globalThis.getAxios=k,globalThis.getServerInfoContext=()=>x,x}),toKebabCase=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Icon=({size:o,strokeWidth:e=2,absoluteStrokeWidth:n,color:a,iconNode:s,name:l,class:c,...d},{slots:u})=>h("svg",{...defaultAttributes,width:o||defaultAttributes.width,height:o||defaultAttributes.height,stroke:a||defaultAttributes.stroke,"stroke-width":n?Number(e)*24/Number(o):e,class:["lucide",`lucide-${toKebabCase(l??"icon")}`],...d},[...s.map(f=>h(...f)),...u.default?[u.default()]:[]]),createLucideIcon=(o,e)=>(n,{slots:a})=>h(Icon,{...n,iconNode:e,name:o},a),ArrowDownAZ=createLucideIcon("ArrowDownAZIcon",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]),ArrowDownWideNarrow=createLucideIcon("ArrowDownWideNarrowIcon",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),ArrowLeft=createLucideIcon("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ArrowRight=createLucideIcon("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ArrowUpAZ=createLucideIcon("ArrowUpAZIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]),ArrowUpNarrowWide=createLucideIcon("ArrowUpNarrowWideIcon",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),Bell=createLucideIcon("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Blend=createLucideIcon("BlendIcon",[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]]),Bookmark=createLucideIcon("BookmarkIcon",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),CalendarArrowDown=createLucideIcon("CalendarArrowDownIcon",[["path",{d:"m14 18 4 4 4-4",key:"1waygx"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 14v8",key:"irew45"}],["path",{d:"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343",key:"bse4f3"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),CalendarArrowUp=createLucideIcon("CalendarArrowUpIcon",[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]),CalendarDays=createLucideIcon("CalendarDaysIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Check=createLucideIcon("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ChevronDown=createLucideIcon("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ChevronLeft=createLucideIcon("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ChevronRight=createLucideIcon("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ChevronUp=createLucideIcon("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ChevronsRight=createLucideIcon("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),CircleCheck=createLucideIcon("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),CircleHelp=createLucideIcon("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Circle=createLucideIcon("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Clipboard=createLucideIcon("ClipboardIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Command=createLucideIcon("CommandIcon",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Copy=createLucideIcon("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),DatabaseBackup=createLucideIcon("DatabaseBackupIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]]),Database=createLucideIcon("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Delete=createLucideIcon("DeleteIcon",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),Diamond=createLucideIcon("DiamondIcon",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Dot=createLucideIcon("DotIcon",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),Download=createLucideIcon("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),EllipsisVertical=createLucideIcon("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ellipsis=createLucideIcon("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Eye=createLucideIcon("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),FileScan=createLucideIcon("FileScanIcon",[["path",{d:"M20 10V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4",key:"1rdf37"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M16 14a2 2 0 0 0-2 2",key:"ceaadl"}],["path",{d:"M20 14a2 2 0 0 1 2 2",key:"1ny6zw"}],["path",{d:"M20 22a2 2 0 0 0 2-2",key:"1l9q4k"}],["path",{d:"M16 22a2 2 0 0 1-2-2",key:"1wqh5n"}]]),File=createLucideIcon("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Filter=createLucideIcon("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),FlipHorizontal=createLucideIcon("FlipHorizontalIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]),Focus=createLucideIcon("FocusIcon",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),FolderClosed=createLucideIcon("FolderClosedIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]]),FolderInput=createLucideIcon("FolderInputIcon",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]),Folder=createLucideIcon("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Globe=createLucideIcon("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),History=createLucideIcon("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Image$1=createLucideIcon("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Info=createLucideIcon("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Kanban=createLucideIcon("KanbanIcon",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]),Keyboard=createLucideIcon("KeyboardIcon",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Link2=createLucideIcon("Link2Icon",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Link=createLucideIcon("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ListTree=createLucideIcon("ListTreeIcon",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]),List=createLucideIcon("ListIcon",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),LoaderCircle=createLucideIcon("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),LogOut=createLucideIcon("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),MessageSquareMore=createLucideIcon("MessageSquareMoreIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]),Moon=createLucideIcon("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Paintbrush=createLucideIcon("PaintbrushIcon",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]),PanelBottom=createLucideIcon("PanelBottomIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]]),PanelLeft=createLucideIcon("PanelLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),PanelRight=createLucideIcon("PanelRightIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),PanelsTopLeft=createLucideIcon("PanelsTopLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),Pencil=createLucideIcon("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Plus=createLucideIcon("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),RefreshCcw=createLucideIcon("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),RefreshCw=createLucideIcon("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Search=createLucideIcon("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Settings$1=createLucideIcon("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),SlidersHorizontal=createLucideIcon("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Sun=createLucideIcon("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Table=createLucideIcon("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Trash2=createLucideIcon("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Trash=createLucideIcon("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Triangle=createLucideIcon("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Undo=createLucideIcon("UndoIcon",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),Upload=createLucideIcon("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),X=createLucideIcon("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_sfc_main$2k=defineComponent({__name:"AlertDialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get AlertDialogRoot(){return $v}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$2k(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const AlertDialog=_export_sfc(_sfc_main$2k,[["render",_sfc_render$2k],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialog.vue"]]),_sfc_main$2j=defineComponent({__name:"AlertDialogCancel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get buttonVariants(){return buttonVariants},get cn(){return cn},get AlertDialogCancel(){return Av}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$2j(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogCancel,mergeProps(a.delegatedProps,{class:a.cn(a.buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const AlertDialogCancel=_export_sfc(_sfc_main$2j,[["render",_sfc_render$2j],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogCancel.vue"]]),_sfc_main$2i=defineComponent({__name:"AlertDialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get AlertDialogContent(){return Tv},get AlertDialogOverlay(){return Rv},get AlertDialogPortal(){return Iv}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$2i(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogPortal,null,{default:withCtx(()=>[createVNode(a.AlertDialogOverlay,{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(a.AlertDialogContent,mergeProps(a.forwarded,{class:a.cn("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const AlertDialogContent=_export_sfc(_sfc_main$2i,[["render",_sfc_render$2i],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogContent.vue"]]),_sfc_main$2h=defineComponent({__name:"AlertDialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get AlertDialogDescription(){return kv}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$2h(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogDescription,mergeProps(a.delegatedProps,{class:a.cn("text-sm text-muted-foreground",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const AlertDialogDescription=_export_sfc(_sfc_main$2h,[["render",_sfc_render$2h],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogDescription.vue"]]),_sfc_main$2g=defineComponent({__name:"AlertDialogFooter",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2g(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",a.props.class))},[renderSlot(o.$slots,"default")],2)}const AlertDialogFooter=_export_sfc(_sfc_main$2g,[["render",_sfc_render$2g],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogFooter.vue"]]),_sfc_main$2f=defineComponent({__name:"AlertDialogHeader",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2f(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex flex-col gap-y-2 text-center sm:text-left",a.props.class))},[renderSlot(o.$slots,"default")],2)}const AlertDialogHeader=_export_sfc(_sfc_main$2f,[["render",_sfc_render$2f],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogHeader.vue"]]),_sfc_main$2e=defineComponent({__name:"AlertDialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get AlertDialogTitle(){return Ov}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$2e(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogTitle,mergeProps(a.delegatedProps,{class:a.cn("text-lg font-semibold",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const AlertDialogTitle=_export_sfc(_sfc_main$2e,[["render",_sfc_render$2e],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogTitle.vue"]]),_sfc_main$2d=defineComponent({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get AlertDialogTrigger(){return Bv}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$2d(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialogTrigger,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const AlertDialogTrigger=_export_sfc(_sfc_main$2d,[["render",_sfc_render$2d],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/alert-dialog/AlertDialogTrigger.vue"]]),_sfc_main$2c=defineComponent({__name:"DeleteKbDialog",props:{location:{type:String,required:!0},name:{type:String,required:!0}},setup(o,{expose:e}){e();const n=o,a=ref(!1),s=ref("idle");async function l(){if(s.value!=="deleting"){if(s.value==="deleteSuccess"||s.value==="deleteFailed"){s.value="idle";return}s.value="deleting",(await deleteKb({location:n.location})).success?(s.value="deleteSuccess",setTimeout(()=>{s.value="idle",a.value=!1},1e3)):(s.value="deleteFailed",setTimeout(()=>{s.value="idle",a.value=!1},1e3))}}const c={props:n,open:a,status:s,handleDelete:l,get AlertDialog(){return AlertDialog},get AlertDialogCancel(){return AlertDialogCancel},get AlertDialogContent(){return AlertDialogContent},get AlertDialogDescription(){return AlertDialogDescription},get AlertDialogFooter(){return AlertDialogFooter},get AlertDialogHeader(){return AlertDialogHeader},get AlertDialogTitle(){return AlertDialogTitle},get AlertDialogTrigger(){return AlertDialogTrigger},get Button(){return Button},get Check(){return Check},get Loader2(){return LoaderCircle},get X(){return X}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$2c(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialog,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.AlertDialogTrigger,{asChild:""},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3}),createVNode(a.AlertDialogContent,null,{default:withCtx(()=>[createVNode(a.AlertDialogHeader,null,{default:withCtx(()=>[createVNode(a.AlertDialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.deleteKbDialog.title")),1)]),_:1}),createVNode(a.AlertDialogDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.deleteKbDialog.description",{location:a.props.location,name:a.props.name})),1)]),_:1})]),_:1}),createVNode(a.AlertDialogFooter,null,{default:withCtx(()=>[createVNode(a.AlertDialogCancel,{disabled:a.status==="deleting"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.deleteKbDialog.cancelBtn")),1)]),_:1},8,["disabled"]),createVNode(a.Button,{variant:"destructive",disabled:a.status==="deleting",onClick:a.handleDelete},{default:withCtx(()=>[a.status==="deleting"?(openBlock(),createBlock(a.Loader2,{key:0,class:"size-4 mr-2 animate-spin"})):a.status==="deleteSuccess"?(openBlock(),createBlock(a.Check,{key:1,class:"size-4 mr-2"})):a.status==="deleteFailed"?(openBlock(),createBlock(a.X,{key:2,class:"size-4 mr-2"})):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(o.$t(`adminDashboard.kbManagement.deleteKbDialog.status.${a.status}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"])}const DeleteKbDialog=_export_sfc(_sfc_main$2c,[["render",_sfc_render$2c],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/admin-dashboard/DeleteKbDialog.vue"]]),_sfc_main$2b=defineComponent({__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get DialogRoot(){return eu}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$2b(o,e,n,a,s,l){return openBlock(),createBlock(a.DialogRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Dialog=_export_sfc(_sfc_main$2b,[["render",_sfc_render$2b],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/Dialog.vue"]]),_sfc_main$2a=defineComponent({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get X(){return X},get DialogClose(){return Gl},get DialogContent(){return xu},get DialogOverlay(){return Eu},get DialogPortal(){return Dv}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$2a(o,e,n,a,s,l){return openBlock(),createBlock(a.DialogPortal,null,{default:withCtx(()=>[createVNode(a.DialogOverlay,{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),createVNode(a.DialogContent,mergeProps(a.forwarded,{class:a.cn("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default"),createVNode(a.DialogClose,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:withCtx(()=>[createVNode(a.X,{class:"w-4 h-4"}),e[0]||(e[0]=createBaseVNode("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3})}const DialogContent=_export_sfc(_sfc_main$2a,[["render",_sfc_render$2a],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogContent.vue"]]),_sfc_main$29=defineComponent({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get DialogDescription(){return Du}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$29(o,e,n,a,s,l){return openBlock(),createBlock(a.DialogDescription,mergeProps(a.forwardedProps,{class:a.cn("text-sm text-muted-foreground",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DialogDescription=_export_sfc(_sfc_main$29,[["render",_sfc_render$29],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogDescription.vue"]]),_sfc_main$28=defineComponent({__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$28(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",a.props.class))},[renderSlot(o.$slots,"default")],2)}const DialogFooter=_export_sfc(_sfc_main$28,[["render",_sfc_render$28],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogFooter.vue"]]),_sfc_main$27=defineComponent({__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$27(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("flex flex-col gap-y-1.5 text-center sm:text-left",a.props.class))},[renderSlot(o.$slots,"default")],2)}const DialogHeader=_export_sfc(_sfc_main$27,[["render",_sfc_render$27],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogHeader.vue"]]),_sfc_main$26=defineComponent({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get DialogTitle(){return Pu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$26(o,e,n,a,s,l){return openBlock(),createBlock(a.DialogTitle,mergeProps(a.forwardedProps,{class:a.cn("text-lg font-semibold leading-none tracking-tight",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DialogTitle=_export_sfc(_sfc_main$26,[["render",_sfc_render$26],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogTitle.vue"]]),_sfc_main$25=defineComponent({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get DialogTrigger(){return tu}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$25(o,e,n,a,s,l){return openBlock(),createBlock(a.DialogTrigger,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const DialogTrigger=_export_sfc(_sfc_main$25,[["render",_sfc_render$25],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dialog/DialogTrigger.vue"]]),_sfc_main$24=defineComponent({__name:"Input",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=useVModel(a,"modelValue",s,{passive:!0,defaultValue:a.defaultValue}),c={props:a,emits:s,modelValue:l,get cn(){return cn}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$24(o,e,n,a,s,l){return withDirectives((openBlock(),createElementBlock("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>a.modelValue=c),class:normalizeClass(a.cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a.props.class))},null,2)),[[vModelText,a.modelValue]])}const Input=_export_sfc(_sfc_main$24,[["render",_sfc_render$24],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/input/Input.vue"]]),_sfc_main$23=defineComponent({__name:"NewKbDialog",setup(o,{expose:e}){e();const n=ref(!1),a=ref(""),s=ref(""),l=ref(""),c=ref("idle"),d=()=>{a.value="",s.value="",l.value="",c.value="idle"};async function u(){if(c.value!=="creating"){if(c.value==="createSuccess"||c.value==="createFailed"){c.value="idle";return}c.value="creating",(await createKb({name:a.value,location:s.value,password:l.value})).success?(c.value="createSuccess",setTimeout(()=>{d(),n.value=!1},1e3)):(c.value="createFailed",setTimeout(()=>{d(),n.value=!1},1e3))}}function f(){d(),n.value=!1}const v={open:n,name:a,location:s,password:l,status:c,resetState:d,handleSubmit:u,handleCancel:f,get Dialog(){return Dialog},get DialogTrigger(){return DialogTrigger},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get DialogDescription(){return DialogDescription},get DialogFooter(){return DialogFooter},get Button(){return Button},get Input(){return Input},get Loader2(){return LoaderCircle},get Check(){return Check},get X(){return X}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),_hoisted_1$M={class:"grid gap-4 py-4"},_hoisted_2$q={class:"grid grid-cols-4 items-center gap-4"},_hoisted_3$k={for:"name",class:"text-right"},_hoisted_4$g={class:"grid grid-cols-4 items-center gap-4"},_hoisted_5$9={for:"location",class:"text-right"},_hoisted_6$4={class:"grid grid-cols-4 items-center gap-4"},_hoisted_7$3={for:"password",class:"text-right"};function _sfc_render$23(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.open,"onUpdate:open":e[3]||(e[3]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogTrigger,{asChild:""},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3}),createVNode(a.DialogContent,{class:"sm:max-w-[425px]"},{default:withCtx(()=>[createVNode(a.DialogHeader,null,{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.title")),1)]),_:1}),createVNode(a.DialogDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$M,[createBaseVNode("div",_hoisted_2$q,[createBaseVNode("label",_hoisted_3$k,toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.nameLabel")),1),createVNode(a.Input,{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=c=>a.name=c),class:"col-span-3",placeholder:o.$t("adminDashboard.kbManagement.newKbDialog.namePlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$g,[createBaseVNode("label",_hoisted_5$9,toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.locationLabel")),1),createVNode(a.Input,{id:"location",modelValue:a.location,"onUpdate:modelValue":e[1]||(e[1]=c=>a.location=c),class:"col-span-3",placeholder:o.$t("adminDashboard.kbManagement.newKbDialog.locationPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("label",_hoisted_7$3,toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.passwordLabel")),1),createVNode(a.Input,{id:"password",modelValue:a.password,"onUpdate:modelValue":e[2]||(e[2]=c=>a.password=c),type:"password",class:"col-span-3",placeholder:o.$t("adminDashboard.kbManagement.newKbDialog.passwordPlaceholder")},null,8,["modelValue","placeholder"])])]),createVNode(a.DialogFooter,{class:"flex gap-2"},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",onClick:a.handleCancel},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.newKbDialog.cancelBtn")),1)]),_:1}),createVNode(a.Button,{type:"submit",onClick:a.handleSubmit,disabled:a.status==="creating"},{default:withCtx(()=>[a.status==="creating"?(openBlock(),createBlock(a.Loader2,{key:0,class:"size-4 mr-2 animate-spin"})):a.status==="createSuccess"?(openBlock(),createBlock(a.Check,{key:1,class:"size-4 mr-2"})):a.status==="createFailed"?(openBlock(),createBlock(a.X,{key:2,class:"size-4 mr-2"})):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(o.$t(`adminDashboard.kbManagement.newKbDialog.createBtn.${a.status}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["open"])}const NewKbDialog=_export_sfc(_sfc_main$23,[["render",_sfc_render$23],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/admin-dashboard/NewKbDialog.vue"]]),_sfc_main$22=defineComponent({__name:"AdminDashboard",setup(o,{expose:e}){e();const{serverUrl:n,logout:a}=ServerInfoContext.useContext(),{kbs:s,refreshKbList:l}=KbInfoContext.useContext();watch(n,()=>{l(n.value)},{immediate:!0});const c={serverUrl:n,logout:a,kbs:s,refreshKbList:l,get Button(){return Button},get Card(){return Card},get CardContent(){return CardContent},get CardDescription(){return CardDescription},get CardHeader(){return CardHeader},get CardTitle(){return CardTitle},get Tabs(){return Tabs},get TabsContent(){return TabsContent},get TabsList(){return TabsList},get TabsTrigger(){return TabsTrigger},get LogOut(){return LogOut},get Pencil(){return Pencil},get Plus(){return Plus},get RefreshCcw(){return RefreshCcw},get Trash2(){return Trash2},DeleteKbDialog,NewKbDialog};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),_hoisted_1$L={class:"flex-1 space-y-4 p-8 pt-6"},_hoisted_2$p={class:"flex items-center justify-between space-y-2"},_hoisted_3$j={class:"flex items-baseline"},_hoisted_4$f={class:"text-3xl font-bold tracking-tight"},_hoisted_5$8={class:"text-muted-foreground ml-4"},_hoisted_6$3={class:"flex items-center space-x-2"},_hoisted_7$2={class:"flex flex-col space-y-2"},_hoisted_8$2={class:"flex items-center space-x-2"},_hoisted_9$2={class:"space-y-2"},_hoisted_10$2={key:0,class:"flex flex-col items-center justify-center py-8 text-center space-y-2"},_hoisted_11$2={class:"text-2xl font-semibold text-muted-foreground"},_hoisted_12={class:"text-sm text-muted-foreground"},_hoisted_13={class:"space-y-1"},_hoisted_14={class:"font-medium"},_hoisted_15={class:"text-sm text-muted-foreground"},_hoisted_16={class:"flex space-x-2"};function _sfc_render$22(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$L,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("div",_hoisted_3$j,[createBaseVNode("h2",_hoisted_4$f,toDisplayString$1(o.$t("adminDashboard.title")),1),createBaseVNode("div",_hoisted_5$8,toDisplayString$1(a.serverUrl),1)]),createBaseVNode("div",_hoisted_6$3,[createVNode(a.Button,{variant:"outline",onClick:a.logout},{default:withCtx(()=>[createVNode(a.LogOut,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("adminDashboard.logout")),1)]),_:1},8,["onClick"])])]),createVNode(a.Tabs,{"default-value":"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(a.TabsList,null,{default:withCtx(()=>[createVNode(a.TabsTrigger,{value:"kbManagement"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.tabs.kbManagement")),1)]),_:1}),createVNode(a.TabsTrigger,{value:"logsAndAnalytics"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.tabs.logsAndAnalytics")),1)]),_:1})]),_:1}),createVNode(a.TabsContent,{value:"kbManagement",class:"space-y-4"},{default:withCtx(()=>[createVNode(a.Card,null,{default:withCtx(()=>[createVNode(a.CardHeader,{class:"flex flex-row items-center justify-between"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$2,[createVNode(a.CardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.allKbs")),1)]),_:1}),createVNode(a.CardDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("adminDashboard.kbManagement.allKbsDescription")),1)]),_:1})]),createBaseVNode("div",_hoisted_8$2,[createVNode(a.Button,{size:"sm",variant:"outline",onClick:a.refreshKbList},{default:withCtx(()=>[createVNode(a.RefreshCcw,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("adminDashboard.kbManagement.kbActions.refreshKbList")),1)]),_:1},8,["onClick"]),createVNode(a.NewKbDialog,null,{default:withCtx(()=>[createVNode(a.Button,{size:"sm"},{default:withCtx(()=>[createVNode(a.Plus,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("adminDashboard.kbManagement.kbActions.addKb")),1)]),_:1})]),_:1})])]),_:1}),createVNode(a.CardContent,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$2,[Object.keys(a.kbs).length===0?(openBlock(),createElementBlock("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,toDisplayString$1(o.$t("adminDashboard.kbManagement.noKbs")),1),createBaseVNode("div",_hoisted_12,toDisplayString$1(o.$t("adminDashboard.kbManagement.noKbsDescription")),1)])):(openBlock(!0),createElementBlock(Fragment$1,{key:1},renderList(a.kbs,(c,d)=>(openBlock(),createElementBlock("div",{key:d,class:"flex items-center justify-between p-4 border rounded-lg"},[createBaseVNode("div",_hoisted_13,[createBaseVNode("h4",_hoisted_14,toDisplayString$1(c.name),1),createBaseVNode("p",_hoisted_15,toDisplayString$1(d),1)]),createBaseVNode("div",_hoisted_16,[createVNode(a.Button,{variant:"outline",size:"sm"},{default:withCtx(()=>[createVNode(a.Pencil,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("adminDashboard.kbManagement.kbActions.edit")),1)]),_:1}),createVNode(a.DeleteKbDialog,{location:d,name:c.name},{default:withCtx(()=>[createVNode(a.Button,{variant:"destructive",size:"sm"},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("adminDashboard.kbManagement.kbActions.delete")),1)]),_:1})]),_:2},1032,["location","name"])])]))),128))])]),_:1})]),_:1})]),_:1}),createVNode(a.TabsContent,{value:"logsAndAnalytics",class:"space-y-4"})]),_:1})])}const AdminDashboard=_export_sfc(_sfc_main$22,[["render",_sfc_render$22],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/admin-dashboard/AdminDashboard.vue"]]),createPromise=()=>{let o;return{promise:new Promise(e=>{o=e}),resolve:o}},createSyncLayer=()=>{const o=_mitt(),{promise:e,resolve:n}=createPromise(),a=new Worker(new URL(""+new URL("syncWorker-l2Mz1j2i.js",import.meta.url).href,import.meta.url),{type:"module"});a.addEventListener("message",k=>{const x=k.data;if(x.type==="init"){n(void 0);return}console.debug("[syncLayer] Received message from syncWorker:",x),o.emit(x.type,x)});const s=k=>{(async()=>(await e,a.postMessage(k)))()},l=(k,x,_)=>{s({type:"connect",serverUrl:k,location:x,token:_})},c=()=>{s({type:"disconnect"})},d=k=>{s({type:"loadDataDoc",docId:k})},u=k=>{s({type:"unloadDataDoc",docId:k})},f=k=>{s({type:"_printBlockInfo",blockId:k})},v=(k,x)=>{s({type:"_printBlockData",docId:k,blockId:x})},b=k=>{const x={_tr:{patches:[],origin:k},upsertBlockInfo:(_,E)=>{x._tr.patches.push({op:"upsertBlockInfo",blockId:_,blockInfo:E})},deleteBlockInfo:_=>{x._tr.patches.push({op:"deleteBlockInfo",blockId:_})},upsertBlockData:(_,E,B)=>{x._tr.patches.push({op:"upsertBlockData",docId:_,blockId:E,blockData:B})},deleteBlockData:(_,E)=>{x._tr.patches.push({op:"deleteBlockData",docId:_,blockId:E})},commit:()=>{x._tr.patches.length!==0&&s({type:"postYjsLayerTransaction",transaction:x._tr})}};return x};return{connect:l,disconnect:c,on:o.on,off:o.off,createSyncLayerTransaction:b,loadDataDoc:d,unloadDataDoc:u,_printBlockInfo:f,_printBlockData:v}},extractBlockStatus=o=>{const e=o&3,n=o&4;return{type:e==0?"normalBlock":e==1?"mirrorBlock":"virtualBlock",fold:n!=0}},calcBlockStatus=(o,e)=>(o=="normalBlock"?0:o=="mirrorBlock"?1:2)|(e?4:0),TextContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.TEXT),z.any()]),ImageFilterSchema=z.enum(["blend","circle","invert","invertW","outline","blendLuminosity"]),ImageContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.IMAGE),z.string(),z.enum(["left","center"]),z.string().nullable(),z.number().nullable(),z.array(ImageFilterSchema).nullable()]);z.tuple([z.literal(BLOCK_CONTENT_TYPES.CAROUSEL),z.array(z.string()),z.string().nullable(),z.number().nullable(),z.array(ImageFilterSchema).nullable()]);const CodeContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.CODE),z.string(),z.string()]),MathDisplayContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.MATH),z.string()]),QueryContentSchema=z.tuple([z.literal(BLOCK_CONTENT_TYPES.QUERY),z.any(),z.string(),z.boolean(),z.boolean()]),BlockContentSchema=z.union([TextContentSchema,ImageContentSchema,CodeContentSchema,MathDisplayContentSchema,QueryContentSchema]);z.tuple([BlockContentSchema.nullable(),z.record(z.any())]);const BlockIdSchema=z.string(),BlockStatusSchema=z.number().min(0).max(5);z.tuple([BlockStatusSchema,BlockIdSchema,z.array(BlockIdSchema),z.number().nullable(),BlockIdSchema.nullable()]);const getPlatform=()=>{const o=globalThis.process;if(typeof o<"u"&&o.platform)switch(o.platform){case"win32":return"win32";case"darwin":return"macos";case"linux":return"linux";default:throw new Error("Unsupported platform")}if(typeof navigator<"u"){const e=navigator.platform.toLowerCase();if(e.includes("win"))return"win32";if(e.includes("mac"))return"macos";if(e.includes("linux"))return"linux";throw new Error("Unsupported platform")}throw new Error("Platform detection failed")},getSeperator=()=>getPlatform()==="win32"?"\\":"/",getPathSegments=o=>o.split(getSeperator()),joinPathSegments=o=>{const e=getSeperator(),n=[];for(const a of o){let s=a;s.startsWith(e)&&(s=s.slice(1)),s.endsWith(e)&&(s=s.slice(0,-1)),s.length!==0&&n.push(s)}return n.join(e)},getBasename=o=>{const e=getPathSegments(o);return e[e.length-1]};function OrderedMap(o){this.content=o}OrderedMap.prototype={constructor:OrderedMap,find:function(o){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===o)return e;return-1},get:function(o){var e=this.find(o);return e==-1?void 0:this.content[e+1]},update:function(o,e,n){var a=n&&n!=o?this.remove(n):this,s=a.find(o),l=a.content.slice();return s==-1?l.push(n||o,e):(l[s+1]=e,n&&(l[s]=n)),new OrderedMap(l)},remove:function(o){var e=this.find(o);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new OrderedMap(n)},addToStart:function(o,e){return new OrderedMap([o,e].concat(this.remove(o).content))},addToEnd:function(o,e){var n=this.remove(o).content.slice();return n.push(o,e),new OrderedMap(n)},addBefore:function(o,e,n){var a=this.remove(e),s=a.content.slice(),l=a.find(o);return s.splice(l==-1?s.length:l,0,e,n),new OrderedMap(s)},forEach:function(o){for(var e=0;e<this.content.length;e+=2)o(this.content[e],this.content[e+1])},prepend:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(o.content.concat(this.subtract(o).content)):this},append:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(this.subtract(o).content.concat(o.content)):this},subtract:function(o){var e=this;o=OrderedMap.from(o);for(var n=0;n<o.content.length;n+=2)e=e.remove(o.content[n]);return e},toObject:function(){var o={};return this.forEach(function(e,n){o[e]=n}),o},get size(){return this.content.length>>1}},OrderedMap.from=function(o){if(o instanceof OrderedMap)return o;var e=[];if(o)for(var n in o)e.push(n,o[n]);return new OrderedMap(e)};function findDiffStart(o,e,n){for(let a=0;;a++){if(a==o.childCount||a==e.childCount)return o.childCount==e.childCount?null:n;let s=o.child(a),l=e.child(a);if(s==l){n+=s.nodeSize;continue}if(!s.sameMarkup(l))return n;if(s.isText&&s.text!=l.text){for(let c=0;s.text[c]==l.text[c];c++)n++;return n}if(s.content.size||l.content.size){let c=findDiffStart(s.content,l.content,n+1);if(c!=null)return c}n+=s.nodeSize}}function findDiffEnd(o,e,n,a){for(let s=o.childCount,l=e.childCount;;){if(s==0||l==0)return s==l?null:{a:n,b:a};let c=o.child(--s),d=e.child(--l),u=c.nodeSize;if(c==d){n-=u,a-=u;continue}if(!c.sameMarkup(d))return{a:n,b:a};if(c.isText&&c.text!=d.text){let f=0,v=Math.min(c.text.length,d.text.length);for(;f<v&&c.text[c.text.length-f-1]==d.text[d.text.length-f-1];)f++,n--,a--;return{a:n,b:a}}if(c.content.size||d.content.size){let f=findDiffEnd(c.content,d.content,n-1,a-1);if(f)return f}n-=u,a-=u}}class Fragment{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,n,a,s=0,l){for(let c=0,d=0;d<n;c++){let u=this.content[c],f=d+u.nodeSize;if(f>e&&a(u,s+d,l||null,c)!==!1&&u.content.size){let v=d+1;u.nodesBetween(Math.max(0,e-v),Math.min(u.content.size,n-v),a,s+v)}d=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,a,s){let l="",c=!0;return this.nodesBetween(e,n,(d,u)=>{let f=d.isText?d.text.slice(Math.max(e,u)-u,n-u):d.isLeaf?s?typeof s=="function"?s(d):s:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&f||d.isTextblock)&&a&&(c?c=!1:l+=a),l+=f},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,a=e.firstChild,s=this.content.slice(),l=0;for(n.isText&&n.sameMarkup(a)&&(s[s.length-1]=n.withText(n.text+a.text),l=1);l<e.content.length;l++)s.push(e.content[l]);return new Fragment(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let a=[],s=0;if(n>e)for(let l=0,c=0;c<n;l++){let d=this.content[l],u=c+d.nodeSize;u>e&&((c<e||u>n)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,n-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,n-c-1))),a.push(d),s+=d.nodeSize),c=u}return new Fragment(a,s)}cutByIndex(e,n){return e==n?Fragment.empty:e==0&&n==this.content.length?this:new Fragment(this.content.slice(e,n))}replaceChild(e,n){let a=this.content[e];if(a==n)return this;let s=this.content.slice(),l=this.size+n.nodeSize-a.nodeSize;return s[e]=n,new Fragment(s,l)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,a=0;n<this.content.length;n++){let s=this.content[n];e(s,a,n),a+=s.nodeSize}}findDiffStart(e,n=0){return findDiffStart(this,e,n)}findDiffEnd(e,n=this.size,a=e.size){return findDiffEnd(this,e,n,a)}findIndex(e,n=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let a=0,s=0;;a++){let l=this.child(a),c=s+l.nodeSize;if(c>=e)return c==e||n>0?retIndex(a+1,c):retIndex(a,s);s=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Fragment.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let n,a=0;for(let s=0;s<e.length;s++){let l=e[s];a+=l.nodeSize,s&&l.isText&&e[s-1].sameMarkup(l)?(n||(n=e.slice(0,s)),n[n.length-1]=l.withText(n[n.length-1].text+l.text)):n&&n.push(l)}return new Fragment(n||e,a)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(o,e){return found.index=o,found.offset=e,found}function compareDeep(o,e){if(o===e)return!0;if(!(o&&typeof o=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(o);if(Array.isArray(e)!=n)return!1;if(n){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!compareDeep(o[a],e[a]))return!1}else{for(let a in o)if(!(a in e)||!compareDeep(o[a],e[a]))return!1;for(let a in e)if(!(a in o))return!1}return!0}class Mark{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,a=!1;for(let s=0;s<e.length;s++){let l=e[s];if(this.eq(l))return e;if(this.type.excludes(l.type))n||(n=e.slice(0,s));else{if(l.type.excludes(this.type))return e;!a&&l.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),a=!0),n&&n.push(l)}}return n||(n=e.slice()),a||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[n.type];if(!a)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=a.create(n.attrs);return a.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(n[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mark.none;if(e instanceof Mark)return[e];let n=e.slice();return n.sort((a,s)=>a.type.rank-s.type.rank),n}}Mark.none=[];class ReplaceError extends Error{}class Slice{constructor(e,n,a){this.content=e,this.openStart=n,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let a=insertInto(this.content,e+this.openStart,n);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,n){return new Slice(removeRange(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Slice.empty;let a=n.openStart||0,s=n.openEnd||0;if(typeof a!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,n.content),a,s)}static maxOpen(e,n=!0){let a=0,s=0;for(let l=e.firstChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.firstChild)a++;for(let l=e.lastChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.lastChild)s++;return new Slice(e,a,s)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(o,e,n){let{index:a,offset:s}=o.findIndex(e),l=o.maybeChild(a),{index:c,offset:d}=o.findIndex(n);if(s==e||l.isText){if(d!=n&&!o.child(c).isText)throw new RangeError("Removing non-flat range");return o.cut(0,e).append(o.cut(n))}if(a!=c)throw new RangeError("Removing non-flat range");return o.replaceChild(a,l.copy(removeRange(l.content,e-s-1,n-s-1)))}function insertInto(o,e,n,a){let{index:s,offset:l}=o.findIndex(e),c=o.maybeChild(s);if(l==e||c.isText)return o.cut(0,e).append(n).append(o.cut(e));let d=insertInto(c.content,e-l-1,n);return d&&o.replaceChild(s,c.copy(d))}function replace$2(o,e,n){if(n.openStart>o.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(o.depth-n.openStart!=e.depth-n.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(o,e,n,0)}function replaceOuter(o,e,n,a){let s=o.index(a),l=o.node(a);if(s==e.index(a)&&a<o.depth-n.openStart){let c=replaceOuter(o,e,n,a+1);return l.copy(l.content.replaceChild(s,c))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&o.depth==a&&e.depth==a){let c=o.parent,d=c.content;return close$1(c,d.cut(0,o.parentOffset).append(n.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=prepareSliceForReplace(n,o);return close$1(l,replaceThreeWay(o,c,d,e,a))}else return close$1(l,replaceTwoWay(o,e,a))}function checkJoin(o,e){if(!e.type.compatibleContent(o.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+o.type.name)}function joinable(o,e,n){let a=o.node(n);return checkJoin(a,e.node(n)),a}function addNode(o,e){let n=e.length-1;n>=0&&o.isText&&o.sameMarkup(e[n])?e[n]=o.withText(e[n].text+o.text):e.push(o)}function addRange$1(o,e,n,a){let s=(e||o).node(n),l=0,c=e?e.index(n):s.childCount;o&&(l=o.index(n),o.depth>n?l++:o.textOffset&&(addNode(o.nodeAfter,a),l++));for(let d=l;d<c;d++)addNode(s.child(d),a);e&&e.depth==n&&e.textOffset&&addNode(e.nodeBefore,a)}function close$1(o,e){return o.type.checkContent(e),o.copy(e)}function replaceThreeWay(o,e,n,a,s){let l=o.depth>s&&joinable(o,e,s+1),c=a.depth>s&&joinable(n,a,s+1),d=[];return addRange$1(null,o,s,d),l&&c&&e.index(s)==n.index(s)?(checkJoin(l,c),addNode(close$1(l,replaceThreeWay(o,e,n,a,s+1)),d)):(l&&addNode(close$1(l,replaceTwoWay(o,e,s+1)),d),addRange$1(e,n,s,d),c&&addNode(close$1(c,replaceTwoWay(n,a,s+1)),d)),addRange$1(a,null,s,d),new Fragment(d)}function replaceTwoWay(o,e,n){let a=[];if(addRange$1(null,o,n,a),o.depth>n){let s=joinable(o,e,n+1);addNode(close$1(s,replaceTwoWay(o,e,n+1)),a)}return addRange$1(e,null,n,a),new Fragment(a)}function prepareSliceForReplace(o,e){let n=e.depth-o.openStart,a=e.node(n).copy(o.content);for(let s=n-1;s>=0;s--)a=e.node(s).copy(Fragment.from(a));return{start:a.resolveNoCache(o.openStart+n),end:a.resolveNoCache(a.content.size-o.openEnd-n)}}class ResolvedPos{constructor(e,n,a){this.pos=e,this.path=n,this.parentOffset=a,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],s=e.child(n);return a?e.child(n).cut(a):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let a=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let l=0;l<e;l++)s+=a.child(l).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mark.none;if(this.textOffset)return e.child(n).marks;let a=e.maybeChild(n-1),s=e.maybeChild(n);if(!a){let d=a;a=s,s=d}let l=a.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!s||!l[c].isInSet(s.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let a=n.marks,s=e.parent.maybeChild(e.index());for(var l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!s||!a[l].isInSet(s.marks))&&(a=a[l--].removeFromSet(a));return a}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!n||n(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let a=[],s=0,l=n;for(let c=e;;){let{index:d,offset:u}=c.content.findIndex(l),f=l-u;if(a.push(c,d,s+u),!f||(c=c.child(d),c.isText))break;l=f-1,s+=u+1}return new ResolvedPos(n,a,l)}static resolveCached(e,n){let a=resolveCache.get(e);if(a)for(let l=0;l<a.elts.length;l++){let c=a.elts[l];if(c.pos==n)return c}else resolveCache.set(e,a=new ResolveCache);let s=a.elts[a.i]=ResolvedPos.resolve(e,n);return a.i=(a.i+1)%resolveCacheSize,s}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,n,a){this.$from=e,this.$to=n,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class or{constructor(e,n,a,s=Mark.none){this.type=e,this.attrs=n,this.marks=s,this.content=a||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,a,s=0){this.content.nodesBetween(e,n,a,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,a,s){return this.content.textBetween(e,n,a,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,a){return this.type==e&&compareDeep(this.attrs,n||e.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,a||Mark.none)}copy(e=null){return e==this.content?this:new or(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new or(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,a=!1){if(e==n)return Slice.empty;let s=this.resolve(e),l=this.resolve(n),c=a?0:s.sharedDepth(n),d=s.start(c),u=s.node(c).content.cut(s.pos-d,l.pos-d);return new Slice(u,s.depth-c,l.depth-c)}replace(e,n,a){return replace$2(this.resolve(e),this.resolve(n),a)}nodeAt(e){for(let n=this;;){let{index:a,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(a),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(n),index:n,offset:a};let s=this.content.child(n-1);return{node:s,index:n-1,offset:a-s.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,n,a){let s=!1;return n>e&&this.nodesBetween(e,n,l=>(a.isInSet(l.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks$1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,a=Fragment.empty,s=0,l=a.childCount){let c=this.contentMatchAt(e).matchFragment(a,s,l),d=c&&c.matchFragment(this.content,n);if(!d||!d.validEnd)return!1;for(let u=s;u<l;u++)if(!this.type.allowsMarks(a.child(u).marks))return!1;return!0}canReplaceWith(e,n,a,s){if(s&&!this.type.allowsMarks(s))return!1;let l=this.contentMatchAt(e).matchType(a),c=l&&l.matchFragment(this.content,n);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark.none;for(let n=0;n<this.marks.length;n++){let a=this.marks[n];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let a;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,a)}let s=Fragment.fromJSON(e,n.content),l=e.nodeType(n.type).create(n.attrs,s,a);return l.type.checkAttrs(l.attrs),l}};Node$1.prototype.text=void 0;let TextNode$2=class nr extends Node$1{constructor(e,n,a,s){if(super(e,n,null,s),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks$1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new nr(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new nr(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks$1(o,e){for(let n=o.length-1;n>=0;n--)e=o[n].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let a=new TokenStream(e,n);if(a.next==null)return ContentMatch.empty;let s=parseExpr(a);a.next&&a.err("Unexpected trailing text");let l=dfa(nfa(s));return checkForDeadEnds(l,a),l}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,a=e.childCount){let s=this;for(let l=n;s&&l<a;l++)s=s.matchType(e.child(l).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let a=0;a<e.next.length;a++)if(this.next[n].type==e.next[a].type)return!0;return!1}fillBefore(e,n=!1,a=0){let s=[this];function l(c,d){let u=c.matchFragment(e,a);if(u&&(!n||u.validEnd))return Fragment.from(d.map(f=>f.createAndFill()));for(let f=0;f<c.next.length;f++){let{type:v,next:b}=c.next[f];if(!(v.isText||v.hasRequiredAttrs())&&s.indexOf(b)==-1){s.push(b);let k=l(b,d.concat(v));if(k)return k}}return null}return l(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let s=a.shift(),l=s.match;if(l.matchType(e)){let c=[];for(let d=s;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:d,next:u}=l.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in n)&&(!s.type||u.validEnd)&&(a.push({match:d.contentMatch,type:d,via:s}),n[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(a){e.push(a);for(let s=0;s<a.next.length;s++)e.indexOf(a.next[s].next)==-1&&n(a.next[s].next)}return n(this),e.map((a,s)=>{let l=s+(a.validEnd?"*":" ")+" ";for(let c=0;c<a.next.length;c++)l+=(c?", ":"")+a.next[c].type.name+"->"+e.indexOf(a.next[c].next);return l}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(o){let e=[];do e.push(parseExprSeq(o));while(o.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(o){let e=[];do e.push(parseExprSubscript(o));while(o.next&&o.next!=")"&&o.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(o){let e=parseExprAtom(o);for(;;)if(o.eat("+"))e={type:"plus",expr:e};else if(o.eat("*"))e={type:"star",expr:e};else if(o.eat("?"))e={type:"opt",expr:e};else if(o.eat("{"))e=parseExprRange(o,e);else break;return e}function parseNum(o){/\D/.test(o.next)&&o.err("Expected number, got '"+o.next+"'");let e=Number(o.next);return o.pos++,e}function parseExprRange(o,e){let n=parseNum(o),a=n;return o.eat(",")&&(o.next!="}"?a=parseNum(o):a=-1),o.eat("}")||o.err("Unclosed braced range"),{type:"range",min:n,max:a,expr:e}}function resolveName(o,e){let n=o.nodeTypes,a=n[e];if(a)return[a];let s=[];for(let l in n){let c=n[l];c.isInGroup(e)&&s.push(c)}return s.length==0&&o.err("No node type or group '"+e+"' found"),s}function parseExprAtom(o){if(o.eat("(")){let e=parseExpr(o);return o.eat(")")||o.err("Missing closing paren"),e}else if(/\W/.test(o.next))o.err("Unexpected token '"+o.next+"'");else{let e=resolveName(o,o.next).map(n=>(o.inline==null?o.inline=n.isInline:o.inline!=n.isInline&&o.err("Mixing inline and block content"),{type:"name",value:n}));return o.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(o){let e=[[]];return s(l(o,0),n()),e;function n(){return e.push([])-1}function a(c,d,u){let f={term:u,to:d};return e[c].push(f),f}function s(c,d){c.forEach(u=>u.to=d)}function l(c,d){if(c.type=="choice")return c.exprs.reduce((u,f)=>u.concat(l(f,d)),[]);if(c.type=="seq")for(let u=0;;u++){let f=l(c.exprs[u],d);if(u==c.exprs.length-1)return f;s(f,d=n())}else if(c.type=="star"){let u=n();return a(d,u),s(l(c.expr,u),u),[a(u)]}else if(c.type=="plus"){let u=n();return s(l(c.expr,d),u),s(l(c.expr,u),u),[a(u)]}else{if(c.type=="opt")return[a(d)].concat(l(c.expr,d));if(c.type=="range"){let u=d;for(let f=0;f<c.min;f++){let v=n();s(l(c.expr,u),v),u=v}if(c.max==-1)s(l(c.expr,u),u);else for(let f=c.min;f<c.max;f++){let v=n();a(u,v),s(l(c.expr,u),v),u=v}return[a(u)]}else{if(c.type=="name")return[a(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function cmp(o,e){return e-o}function nullFrom(o,e){let n=[];return a(e),n.sort(cmp);function a(s){let l=o[s];if(l.length==1&&!l[0].term)return a(l[0].to);n.push(s);for(let c=0;c<l.length;c++){let{term:d,to:u}=l[c];!d&&n.indexOf(u)==-1&&a(u)}}}function dfa(o){let e=Object.create(null);return n(nullFrom(o,0));function n(a){let s=[];a.forEach(c=>{o[c].forEach(({term:d,to:u})=>{if(!d)return;let f;for(let v=0;v<s.length;v++)s[v][0]==d&&(f=s[v][1]);nullFrom(o,u).forEach(v=>{f||s.push([d,f=[]]),f.indexOf(v)==-1&&f.push(v)})})});let l=e[a.join(",")]=new ContentMatch(a.indexOf(o.length-1)>-1);for(let c=0;c<s.length;c++){let d=s[c][1].sort(cmp);l.next.push({type:s[c][0],next:e[d.join(",")]||n(d)})}return l}}function checkForDeadEnds(o,e){for(let n=0,a=[o];n<a.length;n++){let s=a[n],l=!s.validEnd,c=[];for(let d=0;d<s.next.length;d++){let{type:u,next:f}=s.next[d];c.push(u.name),l&&!(u.isText||u.hasRequiredAttrs())&&(l=!1),a.indexOf(f)==-1&&a.push(f)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(o){let e=Object.create(null);for(let n in o){let a=o[n];if(!a.hasDefault)return null;e[n]=a.default}return e}function computeAttrs(o,e){let n=Object.create(null);for(let a in o){let s=e&&e[a];if(s===void 0){let l=o[a];if(l.hasDefault)s=l.default;else throw new RangeError("No value supplied for attribute "+a)}n[a]=s}return n}function checkAttrs(o,e,n,a){for(let s in e)if(!(s in o))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in o){let l=o[s];l.validate&&l.validate(e[s])}}function initAttrs(o,e){let n=Object.create(null);if(e)for(let a in e)n[a]=new Attribute(o,a,e[a]);return n}let NodeType$2=class pr{constructor(e,n,a){this.name=e,this.schema=n,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,n,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(e),Fragment.from(n),Mark.setFrom(a))}createChecked(e=null,n,a){return n=Fragment.from(n),this.checkContent(n),new Node$1(this,this.computeAttrs(e),n,Mark.setFrom(a))}createAndFill(e=null,n,a){if(e=this.computeAttrs(e),n=Fragment.from(n),n.size){let c=this.contentMatch.fillBefore(n);if(!c)return null;n=c.append(n)}let s=this.contentMatch.matchFragment(n),l=s&&s.fillBefore(Fragment.empty,!0);return l?new Node$1(this,e,n.append(l),Mark.setFrom(a)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?n&&n.push(e[a]):n||(n=e.slice(0,a));return n?n.length?n:Mark.none:e}static compile(e,n){let a=Object.create(null);e.forEach((l,c)=>a[l]=new pr(l,n,c));let s=n.spec.topNode||"doc";if(!a[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let l in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(o,e,n){let a=n.split("|");return s=>{let l=s===null?"null":typeof s;if(a.indexOf(l)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${o}, got ${l}`)}}class Attribute{constructor(e,n,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,n,a.validate):a.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,n,a,s){this.name=e,this.rank=n,this.schema=a,this.spec=s,this.attrs=initAttrs(e,s.attrs),this.excluded=null;let l=defaultAttrs(this.attrs);this.instance=l?new Mark(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,e))}static compile(e,n){let a=Object.create(null),s=0;return e.forEach((l,c)=>a[l]=new MarkType(l,s++,n,c)),a}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=OrderedMap.from(e.nodes),n.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$2.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let l=this.nodes[s],c=l.spec.content||"",d=l.spec.marks;if(l.contentMatch=a[c]||(a[c]=ContentMatch.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=d=="_"?null:d?gatherMarks(this,d.split(" ")):d==""||!l.inlineContent?[]:null}for(let s in this.marks){let l=this.marks[s],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:gatherMarks(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,a,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,a,s)}text(e,n){let a=this.nodes.text;return new TextNode$2(a,a.defaultAttrs,e,Mark.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Node$1.fromJSON(this,e)}markFromJSON(e){return Mark.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gatherMarks(o,e){let n=[];for(let a=0;a<e.length;a++){let s=e[a],l=o.marks[s],c=l;if(l)n.push(l);else for(let d in o.marks){let u=o.marks[d];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&n.push(c=u)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return n}function isTagRule(o){return o.tag!=null}function isStyleRule(o){return o.style!=null}let DOMParser$1=class ar{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let a=this.matchedStyles=[];n.forEach(s=>{if(isTagRule(s))this.tags.push(s);else if(isStyleRule(s)){let l=/[^=]*/.exec(s.style)[0];a.indexOf(l)<0&&a.push(l),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let l=e.nodes[s.node];return l.contentMatch.matchType(l)})}parse(e,n={}){let a=new ParseContext$1(this,n,!1);return a.addAll(e,Mark.none,n.from,n.to),a.finish()}parseSlice(e,n={}){let a=new ParseContext$1(this,n,!0);return a.addAll(e,Mark.none,n.from,n.to),Slice.maxOpen(a.finish())}matchTag(e,n,a){for(let s=a?this.tags.indexOf(a)+1:0;s<this.tags.length;s++){let l=this.tags[s];if(matches(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||n.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,n,a,s){for(let l=s?this.styles.indexOf(s)+1:0;l<this.styles.length;l++){let c=this.styles[l],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!a.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=n))){if(c.getAttrs){let u=c.getAttrs(n);if(u===!1)continue;c.attrs=u||void 0}return c}}}static schemaRules(e){let n=[];function a(s){let l=s.priority==null?50:s.priority,c=0;for(;c<n.length;c++){let d=n[c];if((d.priority==null?50:d.priority)<l)break}n.splice(c,0,s)}for(let s in e.marks){let l=e.marks[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let l=e.nodes[s].spec.parseDOM;l&&l.forEach(c=>{a(c=copy(c)),c.node||c.ignore||c.mark||(c.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ar(e,ar.schemaRules(e)))}};const blockTags$1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags$1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(o,e,n){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):o&&o.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:n&-5}class NodeContext{constructor(e,n,a,s,l,c){this.type=e,this.attrs=n,this.marks=a,this.solid=s,this.options=c,this.content=[],this.activeMarks=Mark.none,this.match=l||(c&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fragment.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let a=this.type.contentMatch,s;return(s=a.findWrapping(e.type))?(this.match=a,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],s;if(a&&a.isText&&(s=/[ \t\r\n\u000c]+$/.exec(a.text))){let l=a;a.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-s[0].length))}}let n=Fragment.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags$1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}let ParseContext$1=class{constructor(o,e,n){this.parser=o,this.options=e,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let a=e.topNode,s,l=wsOptionsFor(null,e.preserveWhitespace,0)|(n?OPT_OPEN_LEFT:0);a?s=new NodeContext(a.type,a.attrs,Mark.none,!0,e.topMatch||a.type.contentMatch,l):n?s=new NodeContext(null,null,Mark.none,!0,null,l):s=new NodeContext(o.schema.topNodeType,null,Mark.none,!0,null,l),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(o,e){o.nodeType==3?this.addTextNode(o,e):o.nodeType==1&&this.addElement(o,e)}addTextNode(o,e){let n=o.nodeValue,a=this.top,s=a.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(a.options&OPT_PRESERVE_WS)>0;if(s==="full"||a.inlineContext(o)||/[^ \t\r\n\u000c]/.test(n)){if(s)s!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let l=a.content[a.content.length-1],c=o.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),e),this.findInText(o)}else this.findInside(o)}addElement(o,e,n){let a=this.localPreserveWS,s=this.top;(o.tagName=="PRE"||/pre/.test(o.style&&o.style.whiteSpace))&&(this.localPreserveWS=!0);let l=o.nodeName.toLowerCase(),c;listTags.hasOwnProperty(l)&&this.parser.normalizeLists&&normalizeList(o);let d=this.options.ruleFromNode&&this.options.ruleFromNode(o)||(c=this.parser.matchTag(o,this,n));e:if(d?d.ignore:ignoreTags$1.hasOwnProperty(l))this.findInside(o),this.ignoreFallback(o,e);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(o=d.skip);let u,f=this.needsBlock;if(blockTags$1.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!o.firstChild){this.leafFallback(o,e);break e}let v=d&&d.skip?e:this.readStyles(o,e);v&&this.addAll(o,v),u&&this.sync(s),this.needsBlock=f}else{let u=this.readStyles(o,e);u&&this.addElementByRule(o,d,u,d.consuming===!1?c:void 0)}this.localPreserveWS=a}leafFallback(o,e){o.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(o.ownerDocument.createTextNode(`
`),e)}ignoreFallback(o,e){o.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(o,e){let n=o.style;if(n&&n.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let s=this.parser.matchedStyles[a],l=n.getPropertyValue(s);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(s,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?e=e.filter(u=>!d.clearMark(u)):e=e.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return e}addElementByRule(o,e,n,a){let s,l;if(e.node)if(l=this.parser.schema.nodes[e.node],l.isLeaf)this.insertNode(l.create(e.attrs),n)||this.leafFallback(o,n);else{let d=this.enter(l,e.attrs||null,n,e.preserveWhitespace);d&&(s=!0,n=d)}else{let d=this.parser.schema.marks[e.mark];n=n.concat(d.create(e.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(o);else if(a)this.addElement(o,n,a);else if(e.getContent)this.findInside(o),e.getContent(o,this.parser.schema).forEach(d=>this.insertNode(d,n));else{let d=o;typeof e.contentElement=="string"?d=o.querySelector(e.contentElement):typeof e.contentElement=="function"?d=e.contentElement(o):e.contentElement&&(d=e.contentElement),this.findAround(o,d,!0),this.addAll(d,n),this.findAround(o,d,!1)}s&&this.sync(c)&&this.open--}addAll(o,e,n,a){let s=n||0;for(let l=n?o.childNodes[n]:o.firstChild,c=a==null?null:o.childNodes[a];l!=c;l=l.nextSibling,++s)this.findAtPoint(o,s),this.addDOM(l,e);this.findAtPoint(o,s)}findPlace(o,e){let n,a;for(let s=this.open;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(o);if(c&&(!n||n.length>c.length)&&(n=c,a=l,!c.length)||l.solid)break}if(!n)return null;this.sync(a);for(let s=0;s<n.length;s++)e=this.enterInner(n[s],null,e,!1);return e}insertNode(o,e){if(o.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(e=this.enterInner(a,null,e))}let n=this.findPlace(o,e);if(n){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(o.type));let s=Mark.none;for(let l of n.concat(o.marks))(a.type?a.type.allowsMarkType(l.type):markMayApply(l.type,o.type))&&(s=l.addToSet(s));return a.content.push(o.mark(s)),!0}return!1}enter(o,e,n,a){let s=this.findPlace(o.create(e),n);return s&&(s=this.enterInner(o,e,n,!0,a)),s}enterInner(o,e,n,a=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(o);let c=wsOptionsFor(o,s,l.options);l.options&OPT_OPEN_LEFT&&l.content.length==0&&(c|=OPT_OPEN_LEFT);let d=Mark.none;return n=n.filter(u=>(l.type?l.type.allowsMarkType(u.type):markMayApply(u.type,o))?(d=u.addToSet(d),!1):!0),this.nodes.push(new NodeContext(o,e,d,a,null,c)),this.open++,n}closeExtra(o=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(o));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(o){for(let e=this.open;e>=0;e--){if(this.nodes[e]==o)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let o=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let a=n.length-1;a>=0;a--)o+=n[a].nodeSize;e&&o++}return o}findAtPoint(o,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==o&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(o){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&o.nodeType==1&&o.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(o,e,n){if(o!=e&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&o.nodeType==1&&o.contains(this.find[a].node)&&e.compareDocumentPosition(this.find[a].node)&(n?2:4)&&(this.find[a].pos=this.currentPos)}findInText(o){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==o&&(this.find[e].pos=this.currentPos-(o.nodeValue.length-this.find[e].offset))}matchesContext(o){if(o.indexOf("|")>-1)return o.split(/\s*\|\s*/).some(this.matchesContext,this);let e=o.split("/"),n=this.options.context,a=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(a?0:1),l=(c,d)=>{for(;c>=0;c--){let u=e[c];if(u==""){if(c==e.length-1||c==0)continue;for(;d>=s;d--)if(l(c-1,d))return!0;return!1}else{let f=d>0||d==0&&a?this.nodes[d].type:n&&d>=s?n.node(d-s).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;d--}}return!0};return l(e.length-1,this.open)}textblockFromContext(){let o=this.options.context;if(o)for(let e=o.depth;e>=0;e--){let n=o.node(e).contentMatchAt(o.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let n=this.parser.schema.nodes[e];if(n.isTextblock&&n.defaultAttrs)return n}}};function normalizeList(o){for(let e=o.firstChild,n=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&n?(n.appendChild(e),e=n):a=="li"?n=e:a&&(n=null)}}function matches(o,e){return(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,e)}function copy(o){let e={};for(let n in o)e[n]=o[n];return e}function markMayApply(o,e){let n=e.schema.nodes;for(let a in n){let s=n[a];if(!s.allowsMarkType(o))continue;let l=[],c=d=>{l.push(d);for(let u=0;u<d.edgeCount;u++){let{type:f,next:v}=d.edge(u);if(f==e||l.indexOf(v)<0&&c(v))return!0}};if(c(s.contentMatch))return!0}}class DOMSerializer{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},a){a||(a=doc$2(n).createDocumentFragment());let s=a,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let d=0,u=0;for(;d<l.length&&u<c.marks.length;){let f=c.marks[u];if(!this.marks[f.type.name]){u++;continue}if(!f.eq(l[d][0])||f.type.spec.spanning===!1)break;d++,u++}for(;d<l.length;)s=l.pop()[1];for(;u<c.marks.length;){let f=c.marks[u++],v=this.serializeMark(f,c.isInline,n);v&&(l.push([f,s]),s.appendChild(v.dom),s=v.contentDOM||v.dom)}}s.appendChild(this.serializeNodeInner(c,n))}),a}serializeNodeInner(e,n){let{dom:a,contentDOM:s}=renderSpec(doc$2(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return a}serializeNode(e,n={}){let a=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let l=this.serializeMark(e.marks[s],e.isInline,n);l&&((l.contentDOM||l.dom).appendChild(a),a=l.dom)}return a}serializeMark(e,n,a={}){let s=this.marks[e.type.name];return s&&renderSpec(doc$2(a),s(e,n),null,e.attrs)}static renderSpec(e,n,a=null,s){return renderSpec(e,n,a,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=gatherToDOM(e.nodes);return n.text||(n.text=a=>a.text),n}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(o){let e={};for(let n in o){let a=o[n].spec.toDOM;a&&(e[n]=a)}return e}function doc$2(o){return o.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(o){let e=suspiciousAttributeCache.get(o);return e===void 0&&suspiciousAttributeCache.set(o,e=suspiciousAttributesInner(o)),e}function suspiciousAttributesInner(o){let e=null;function n(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let s=0;s<a.length;s++)n(a[s]);else for(let s in a)n(a[s])}return n(o),e}function renderSpec(o,e,n,a){if(typeof e=="string")return{dom:o.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],l;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(l=suspiciousAttributes(a))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(n=s.slice(0,c),s=s.slice(c+1));let d,u=n?o.createElementNS(n,s):o.createElement(s),f=e[1],v=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){v=2;for(let b in f)if(f[b]!=null){let k=b.indexOf(" ");k>0?u.setAttributeNS(b.slice(0,k),b.slice(k+1),f[b]):u.setAttribute(b,f[b])}}for(let b=v;b<e.length;b++){let k=e[b];if(k===0){if(b<e.length-1||b>v)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:x,contentDOM:_}=renderSpec(o,k,n,a);if(u.appendChild(x),_){if(d)throw new RangeError("Multiple content holes");d=_}}}return{dom:u,contentDOM:d}}const getPmSchema=o=>new Schema({nodes:{doc:{content:"inline*"},text:{group:"inline"},pathRef:{inline:!0,atom:!0,attrs:{path:{}},group:"inline",selectable:!0,toDOM:e=>{const n=document.createElement("span");n.classList.add("path-ref"),n.dataset.path=e.attrs.path;const a=getBasename(e.attrs.path);return n.innerHTML=a,n},parseDOM:[{tag:"span.path-ref",getAttrs:e=>({path:e.getAttribute("path")})}],leafText:e=>e.attrs.path},blockRef_v2:{inline:!0,atom:!0,attrs:{toBlockId:{},tag:{default:!1}},group:"inline",selectable:!0,toDOM:e=>{const{toBlockId:n}=e.attrs,a=document.createElement("span");a.classList.add("block-ref-v2"),e.attrs.tag&&a.classList.add("tag"),a.addEventListener("click",l=>{var d,u;l.preventDefault(),l.stopPropagation(),(d=o.pushHistoryItem)==null||d.call(o);const c=(u=o.getMainTree)==null?void 0:u.call(o);c&&c.focusBlock(n,{highlight:!0,expandIfFold:!0})});const s=o.getBlockRef(n);return watch(s,l=>{var c,d;if(l){const u=l.ctext??"";a.innerHTML=u.trim(),a.dataset.blockId=l.id,a.dataset.ctext=u,(c=l.metadata)!=null&&c.blockRefColor?a.dataset.blockRefColor=(d=l.metadata)==null?void 0:d.blockRefColor:delete a.dataset.blockRefColor,a.classList.remove("invalid")}else a.innerHTML="Invalid Ref",a.classList.add("invalid")},{immediate:!0}),a},parseDOM:[{tag:"span.block-ref-v2",getAttrs(e){return e instanceof HTMLElement?{toBlockId:e.dataset.blockId,tag:e.classList.contains("tag")}:{}}}],leafText:e=>{var a;const{toBlockId:n}=e.attrs;return n?((a=o.getBlockRef(n).value)==null?void 0:a.ctext)??"":""}},mathInline:{inline:!0,atom:!0,attrs:{src:{}},leafText:e=>e.attrs.src,group:"inline",selectable:!0,toDOM:e=>["span",{class:"math-inline",src:e.attrs.src,contenteditable:!0}],parseDOM:[{tag:"span.math-inline",getAttrs:e=>({src:e.getAttribute("src")})}]},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{link:{attrs:{href:{}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href")})}],toDOM(e){const{href:n}=e.attrs,a=document.createElement("a");return a.href=n,a.spellcheck=!1,a.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),window.open(n,"_blank")}),a}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code",{spellcheck:!1},0]}},italic:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em",0]}},bold:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]},strikethrough:{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration: line-through"}],toDOM:()=>["s",0]},underline:{parseDOM:[{tag:"u"},{style:"text-decoration: underline"}],toDOM:()=>["u",0]},cloze:{attrs:{clozeId:{}},inclusive:!1,toDOM(e){const n=document.createElement("span");return n.classList.add("cloze"),n.setAttribute("clozeid",e.attrs.clozeId),{dom:n,contentDom:n}},parseDOM:[{tag:"span.cloze",getAttrs:e=>({clozeId:e.getAttribute("clozeId")})}]},highlight:{attrs:{bg:{default:"bg4"},fg:{default:null}},inclusive:!1,toDOM(e){const{bg:n,fg:a}=e.attrs;return["span",{class:"highlight",bg:n,fg:a},0]},parseDOM:[{tag:"span.highlight",getAttrs:e=>({bg:e.getAttribute("bg"),fg:e.getAttribute("fg")})}]}}}),HTTP_LINK_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,linkify=function(o,e){const n=[];return o.forEach(a=>{if(a.isText){const s=a.text;let l=0,c;for(;c=HTTP_LINK_REGEX.exec(s);){const d=c.index,u=d+c[0].length,f=a.type.schema.marks.link;d>0&&n.push(a.cut(l,d));const v=s.slice(d,u),b=f.create({href:v});n.push(a.cut(d,u).mark(b.addToSet(a.marks))),e.push(v),l=u}l<s.length&&n.push(a.cut(l))}else n.push(a.copy(linkify(a.content,e)))}),Fragment.fromArray(n)},contentNodesToPmNode=o=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:o.map(e=>e.toJSON())}],plainTextToPmNode=(o,e)=>{let n;if(o.length===0)n=Fragment.empty;else{const a=e.text(o);n=linkify(Fragment.from(a),[])}return e.nodes.doc.create({},n)},plainTextToTextContent=(o,e)=>{let n;if(o.length===0)n=Fragment.empty;else{const s=e.text(o);n=linkify(Fragment.from(s),[])}const a=e.nodes.doc.create({},n);return[BLOCK_CONTENT_TYPES.TEXT,a.toJSON()]},blockRefToTextContent=o=>[BLOCK_CONTENT_TYPES.TEXT,{type:"doc",content:[{type:"blockRef_v2",attrs:{toBlockId:o,tag:!1}}]}];var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var dayjs_min={exports:{}};(function(o,e){(function(n,a){o.exports=a()})(commonjsGlobal,function(){var n=1e3,a=6e4,s=36e5,l="millisecond",c="second",d="minute",u="hour",f="day",v="week",b="month",k="quarter",x="year",_="date",E="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(se){var me=["th","st","nd","rd"],ge=se%100;return"["+se+(me[(ge-20)%10]||me[ge]||me[0])+"]"}},F=function(se,me,ge){var Te=String(se);return!Te||Te.length>=me?se:""+Array(me+1-Te.length).join(ge)+se},V={s:F,z:function(se){var me=-se.utcOffset(),ge=Math.abs(me),Te=Math.floor(ge/60),Be=ge%60;return(me<=0?"+":"-")+F(Te,2,"0")+":"+F(Be,2,"0")},m:function se(me,ge){if(me.date()<ge.date())return-se(ge,me);var Te=12*(ge.year()-me.year())+(ge.month()-me.month()),Be=me.clone().add(Te,b),Ge=ge-Be<0,We=me.clone().add(Te+(Ge?-1:1),b);return+(-(Te+(ge-Be)/(Ge?Be-We:We-Be))||0)},a:function(se){return se<0?Math.ceil(se)||0:Math.floor(se)},p:function(se){return{M:b,y:x,w:v,d:f,D:_,h:u,m:d,s:c,ms:l,Q:k}[se]||String(se||"").toLowerCase().replace(/s$/,"")},u:function(se){return se===void 0}},L="en",U={};U[L]=I;var j="$isDayjsObject",oe=function(se){return se instanceof G||!(!se||!se[j])},Y=function se(me,ge,Te){var Be;if(!me)return L;if(typeof me=="string"){var Ge=me.toLowerCase();U[Ge]&&(Be=Ge),ge&&(U[Ge]=ge,Be=Ge);var We=me.split("-");if(!Be&&We.length>1)return se(We[0])}else{var Oe=me.name;U[Oe]=me,Be=Oe}return!Te&&Be&&(L=Be),Be||!Te&&L},K=function(se,me){if(oe(se))return se.clone();var ge=typeof me=="object"?me:{};return ge.date=se,ge.args=arguments,new G(ge)},W=V;W.l=Y,W.i=oe,W.w=function(se,me){return K(se,{locale:me.$L,utc:me.$u,x:me.$x,$offset:me.$offset})};var G=function(){function se(ge){this.$L=Y(ge.locale,null,!0),this.parse(ge),this.$x=this.$x||ge.x||{},this[j]=!0}var me=se.prototype;return me.parse=function(ge){this.$d=function(Te){var Be=Te.date,Ge=Te.utc;if(Be===null)return new Date(NaN);if(W.u(Be))return new Date;if(Be instanceof Date)return new Date(Be);if(typeof Be=="string"&&!/Z$/i.test(Be)){var We=Be.match(B);if(We){var Oe=We[2]-1||0,Ve=(We[7]||"0").substring(0,3);return Ge?new Date(Date.UTC(We[1],Oe,We[3]||1,We[4]||0,We[5]||0,We[6]||0,Ve)):new Date(We[1],Oe,We[3]||1,We[4]||0,We[5]||0,We[6]||0,Ve)}}return new Date(Be)}(ge),this.init()},me.init=function(){var ge=this.$d;this.$y=ge.getFullYear(),this.$M=ge.getMonth(),this.$D=ge.getDate(),this.$W=ge.getDay(),this.$H=ge.getHours(),this.$m=ge.getMinutes(),this.$s=ge.getSeconds(),this.$ms=ge.getMilliseconds()},me.$utils=function(){return W},me.isValid=function(){return this.$d.toString()!==E},me.isSame=function(ge,Te){var Be=K(ge);return this.startOf(Te)<=Be&&Be<=this.endOf(Te)},me.isAfter=function(ge,Te){return K(ge)<this.startOf(Te)},me.isBefore=function(ge,Te){return this.endOf(Te)<K(ge)},me.$g=function(ge,Te,Be){return W.u(ge)?this[Te]:this.set(Be,ge)},me.unix=function(){return Math.floor(this.valueOf()/1e3)},me.valueOf=function(){return this.$d.getTime()},me.startOf=function(ge,Te){var Be=this,Ge=!!W.u(Te)||Te,We=W.p(ge),Oe=function(Ze,pe){var ue=W.w(Be.$u?Date.UTC(Be.$y,pe,Ze):new Date(Be.$y,pe,Ze),Be);return Ge?ue:ue.endOf(f)},Ve=function(Ze,pe){return W.w(Be.toDate()[Ze].apply(Be.toDate("s"),(Ge?[0,0,0,0]:[23,59,59,999]).slice(pe)),Be)},Xe=this.$W,dt=this.$M,pt=this.$D,ft="set"+(this.$u?"UTC":"");switch(We){case x:return Ge?Oe(1,0):Oe(31,11);case b:return Ge?Oe(1,dt):Oe(0,dt+1);case v:var Ce=this.$locale().weekStart||0,ze=(Xe<Ce?Xe+7:Xe)-Ce;return Oe(Ge?pt-ze:pt+(6-ze),dt);case f:case _:return Ve(ft+"Hours",0);case u:return Ve(ft+"Minutes",1);case d:return Ve(ft+"Seconds",2);case c:return Ve(ft+"Milliseconds",3);default:return this.clone()}},me.endOf=function(ge){return this.startOf(ge,!1)},me.$set=function(ge,Te){var Be,Ge=W.p(ge),We="set"+(this.$u?"UTC":""),Oe=(Be={},Be[f]=We+"Date",Be[_]=We+"Date",Be[b]=We+"Month",Be[x]=We+"FullYear",Be[u]=We+"Hours",Be[d]=We+"Minutes",Be[c]=We+"Seconds",Be[l]=We+"Milliseconds",Be)[Ge],Ve=Ge===f?this.$D+(Te-this.$W):Te;if(Ge===b||Ge===x){var Xe=this.clone().set(_,1);Xe.$d[Oe](Ve),Xe.init(),this.$d=Xe.set(_,Math.min(this.$D,Xe.daysInMonth())).$d}else Oe&&this.$d[Oe](Ve);return this.init(),this},me.set=function(ge,Te){return this.clone().$set(ge,Te)},me.get=function(ge){return this[W.p(ge)]()},me.add=function(ge,Te){var Be,Ge=this;ge=Number(ge);var We=W.p(Te),Oe=function(dt){var pt=K(Ge);return W.w(pt.date(pt.date()+Math.round(dt*ge)),Ge)};if(We===b)return this.set(b,this.$M+ge);if(We===x)return this.set(x,this.$y+ge);if(We===f)return Oe(1);if(We===v)return Oe(7);var Ve=(Be={},Be[d]=a,Be[u]=s,Be[c]=n,Be)[We]||1,Xe=this.$d.getTime()+ge*Ve;return W.w(Xe,this)},me.subtract=function(ge,Te){return this.add(-1*ge,Te)},me.format=function(ge){var Te=this,Be=this.$locale();if(!this.isValid())return Be.invalidDate||E;var Ge=ge||"YYYY-MM-DDTHH:mm:ssZ",We=W.z(this),Oe=this.$H,Ve=this.$m,Xe=this.$M,dt=Be.weekdays,pt=Be.months,ft=Be.meridiem,Ce=function(pe,ue,Z,ee){return pe&&(pe[ue]||pe(Te,Ge))||Z[ue].slice(0,ee)},ze=function(pe){return W.s(Oe%12||12,pe,"0")},Ze=ft||function(pe,ue,Z){var ee=pe<12?"AM":"PM";return Z?ee.toLowerCase():ee};return Ge.replace(M,function(pe,ue){return ue||function(Z){switch(Z){case"YY":return String(Te.$y).slice(-2);case"YYYY":return W.s(Te.$y,4,"0");case"M":return Xe+1;case"MM":return W.s(Xe+1,2,"0");case"MMM":return Ce(Be.monthsShort,Xe,pt,3);case"MMMM":return Ce(pt,Xe);case"D":return Te.$D;case"DD":return W.s(Te.$D,2,"0");case"d":return String(Te.$W);case"dd":return Ce(Be.weekdaysMin,Te.$W,dt,2);case"ddd":return Ce(Be.weekdaysShort,Te.$W,dt,3);case"dddd":return dt[Te.$W];case"H":return String(Oe);case"HH":return W.s(Oe,2,"0");case"h":return ze(1);case"hh":return ze(2);case"a":return Ze(Oe,Ve,!0);case"A":return Ze(Oe,Ve,!1);case"m":return String(Ve);case"mm":return W.s(Ve,2,"0");case"s":return String(Te.$s);case"ss":return W.s(Te.$s,2,"0");case"SSS":return W.s(Te.$ms,3,"0");case"Z":return We}return null}(pe)||We.replace(":","")})},me.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},me.diff=function(ge,Te,Be){var Ge,We=this,Oe=W.p(Te),Ve=K(ge),Xe=(Ve.utcOffset()-this.utcOffset())*a,dt=this-Ve,pt=function(){return W.m(We,Ve)};switch(Oe){case x:Ge=pt()/12;break;case b:Ge=pt();break;case k:Ge=pt()/3;break;case v:Ge=(dt-Xe)/6048e5;break;case f:Ge=(dt-Xe)/864e5;break;case u:Ge=dt/s;break;case d:Ge=dt/a;break;case c:Ge=dt/n;break;default:Ge=dt}return Be?Ge:W.a(Ge)},me.daysInMonth=function(){return this.endOf(b).$D},me.$locale=function(){return U[this.$L]},me.locale=function(ge,Te){if(!ge)return this.$L;var Be=this.clone(),Ge=Y(ge,Te,!0);return Ge&&(Be.$L=Ge),Be},me.clone=function(){return W.w(this.$d,this)},me.toDate=function(){return new Date(this.valueOf())},me.toJSON=function(){return this.isValid()?this.toISOString():null},me.toISOString=function(){return this.$d.toISOString()},me.toString=function(){return this.$d.toUTCString()},se}(),ce=G.prototype;return K.prototype=ce,[["$ms",l],["$s",c],["$m",d],["$H",u],["$W",f],["$M",b],["$y",x],["$D",_]].forEach(function(se){ce[se[1]]=function(me){return this.$g(me,se[0],se[1])}}),K.extend=function(se,me){return se.$i||(se(me,G,K),se.$i=!0),K},K.locale=Y,K.isDayjs=oe,K.unix=function(se){return K(1e3*se)},K.en=U[L],K.Ls=U,K.p={},K})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports),urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let nanoid=(o=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(o|=0));for(;o--;)e+=urlAlphabet[n[o]&63];return e};function useBlockTransaction(o){const{mainRootBlockId:e,lastFocusedBlockTree:n,lastFocusedDiId:a,blocks:s,latestBlockInfos:l,latestBlockDatas:c,yjsLayer:d,getBlockRef:u,getCtext:f,getMtext:v,getOlinks:b}=o,k=useEventBus(),x=V=>{const L={origin:V,patches:[],reversePatches:[],meta:{isUndoRedo:!1,autoAddUndoPoint:!0,canUndo:!0,envUndoStrategy:"beforeCommit"},envInfo:{onCreate:_(),beforeCommit:null,afterCommit:null},addBlock:U=>(L.patches.push({op:"add",block:U}),L.reversePatches.push({op:"delete",blockId:U.id}),L),updateBlock:U=>{var oe;const j=(oe=s.get(U.id))==null?void 0:oe.value;if(!j)throw new Error(`Cannot find old block ${U.id}, maybe you should add it first?`);return L.patches.push({op:"update",block:U}),L.reversePatches.push({op:"update",block:B(j)}),L},deleteBlock:U=>{var oe;const j=(oe=s.get(U))==null?void 0:oe.value;if(!j)throw new Error(`Cannot find old block ${U}, maybe you should add it first?`);return L.patches.push({op:"delete",blockId:U}),L.reversePatches.push({op:"add",block:B(j)}),L},commit:()=>{L.envInfo.beforeCommit=_(),E(L),L.envInfo.afterCommit=_()},setMeta:(U,j)=>(L.meta[U]=j,L),addTransaction:U=>(L.patches.push(...U.patches),L.reversePatches.push(...U.reversePatches),L),addReverseTransaction:U=>(L.patches.push(...U.reversePatches),L.reversePatches.push(...U.patches),L),getLatestBlock:(U,j=!0)=>{var Y;for(let K=L.patches.length-1;K>=0;K--){const W=L.patches[K];if(W.op==="update"&&W.block.id===U)return j?cloneMinimalBlock(W.block):W.block}const oe=(Y=s.get(U))==null?void 0:Y.value;return oe?j?cloneMinimalBlock(B(oe)):B(oe):null}};return L},_=()=>{var j,oe,Y;const V=((j=n.value)==null?void 0:j.getId())??null,L=a.value??null,U=((Y=L?(oe=n.value)==null?void 0:oe.getEditorView(L):null)==null?void 0:Y.state.selection.toJSON())??null;return{rootBlockId:e.value,focusedTreeId:V,focusedItemId:L,selection:U}},E=V=>{const{origin:L,patches:U}=V;console.debug("Committing transaction",V);const j=L.type==="ui"?d.createSyncLayerTransaction(L):void 0;for(const oe of U){const{op:Y}=oe;if(Y=="add"||Y=="update"){const K=oe.block,W=Object.assign({origin:L},M(K));W&&I(W.id,W,j)}else if(Y=="delete"){const{blockId:K}=oe;F(K,j)}}j==null||j.commit(),k.emit("afterBlocksTrCommit",[V])},B=V=>{if(V.type=="normalBlock")return{type:"normalBlock",id:V.id,fold:V.fold,parentId:V.parentId,childrenIds:V.childrenIds,content:V.content,metadata:V.metadata};if(V.type=="mirrorBlock")return{type:V.type,id:V.id,fold:V.fold,parentId:V.parentId,childrenIds:V.childrenIds,src:V.src};if(V.type=="virtualBlock")return{type:V.type,id:V.id,fold:V.fold,parentId:V.parentId,childrenIds:V.childrenIds,src:V.src,childrenCreated:V.childrenCreated};throw new Error("Invalid block type")},M=V=>{if(V.type=="normalBlock")return{type:"normalBlock",id:V.id,parentId:V.parentId,parentRef:u(V.parentId),childrenIds:V.childrenIds,childrenRefs:V.childrenIds.map(L=>u(L)),fold:V.fold,deleted:!1,content:V.content,ctext:f(V.content),metadata:V.metadata,mtext:v(V.metadata),olinks:V.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(V.content[1]):[],boosting:0,acturalSrc:V.id,docId:0};if(V.type=="mirrorBlock"){const L=u(V.src).value;return L?{type:"mirrorBlock",id:V.id,parentId:V.parentId,parentRef:u(V.parentId),childrenIds:V.childrenIds,childrenRefs:V.childrenIds.map(U=>u(U)),fold:V.fold,deleted:!1,content:V.content??L.content,ctext:f(V.content),metadata:V.metadata??L.metadata,mtext:v(V.metadata),olinks:V.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(V.content[1]):[],boosting:V.boosting??L.boosting,acturalSrc:V.acturalSrc??L.acturalSrc,src:V.src}:(console.error(`mirror block ${V.id} \u7684\u6E90\u5757 ${V.src} \u4E0D\u5B58\u5728`),null)}else if(V.type=="virtualBlock"){const L=u(V.src).value;return L?{type:"virtualBlock",id:V.id,parentId:V.parentId,parentRef:u(V.parentId),childrenIds:V.childrenIds,childrenRefs:V.childrenIds.map(U=>u(U)),fold:V.fold,deleted:!1,content:V.content??L.content,ctext:f(V.content),metadata:V.metadata??L.metadata,mtext:v(V.metadata),olinks:V.content[0]===BLOCK_CONTENT_TYPES.TEXT?b(V.content[1]):[],boosting:V.boosting??L.boosting,acturalSrc:V.acturalSrc??L.acturalSrc,src:V.src,childrenCreated:V.childrenCreated}:(console.error(`virtual block ${V.id} \u7684\u6E90\u5757 ${V.src} \u4E0D\u5B58\u5728`),null)}throw new Error("Invalid block type")},I=(V,L,U)=>{var oe;const j=(oe=s.get(V))==null?void 0:oe.value;if(s.has(V))s.get(V).value=L;else{const Y=shallowRef(L);s.set(V,Y)}if(L&&U){l.get(V);const Y=[calcBlockStatus(L.type,L.fold),L.parentId,L.childrenIds,"docId"in L?L.docId:null,"src"in L?L.src:null];if(U.upsertBlockInfo(V,Y),L.type=="normalBlock"){c.get(V);const K=[L.content,L.metadata];U.upsertBlockData(L.docId,V,K)}(j==null?void 0:j.type)=="normalBlock"&&L.type!="normalBlock"&&U.deleteBlockData(j.docId,V)}},F=(V,L)=>{var j;const U=(j=s.get(V))==null?void 0:j.value;U&&L&&(U.deleted=!0,s.delete(V),L.deleteBlockInfo(V),U.type=="normalBlock"&&L.deleteBlockData(U.docId,V))};return{createBlockTransaction:x,addBlock:(V,L)=>x(L).addBlock(V).commit(),updateBlock:(V,L)=>x(L).updateBlock(V).commit(),deleteBlock:(V,L)=>x(L).deleteBlock(V).commit()}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(o,e){return o+e*factor16}function recoverIndex(o){return o&lower16}function recoverOffset(o){return(o-(o&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,n,a){this.pos=e,this.delInfo=n,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let n=0,a=recoverIndex(e);if(!this.inverted)for(let s=0;s<a;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[a*3]+n+recoverOffset(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,a){let s=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?s:0);if(u>e)break;let f=this.ranges[d+l],v=this.ranges[d+c],b=u+f;if(e<=b){let k=f?e==u?-1:e==b?1:n:n,x=u+s+(k<0?0:v);if(a)return x;let _=e==(n<0?u:b)?null:makeRecover(d/3,e-u),E=e==u?DEL_AFTER:e==b?DEL_BEFORE:DEL_ACROSS;return(n<0?e!=u:e!=b)&&(E|=DEL_SIDE),new MapResult(x,E,_)}s+=v-f}return a?e+s:new MapResult(e+s,0,null)}touches(e,n){let a=0,s=recoverIndex(n),l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?a:0);if(u>e)break;let f=this.ranges[d+l],v=u+f;if(e<=v&&d==s*3)return!0;a+=this.ranges[d+c]-f}return!1}forEach(e){let n=this.inverted?2:1,a=this.inverted?1:2;for(let s=0,l=0;s<this.ranges.length;s+=3){let c=this.ranges[s],d=c-(this.inverted?l:0),u=c+(this.inverted?0:l),f=this.ranges[s+n],v=this.ranges[s+a];e(d,d+f,u,u+v),l+=v-f}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],n,a=0,s=e.length){this.maps=e,this.mirror=n,this.from=a,this.to=s}slice(e=0,n=this.maps.length){return new Mapping(this.maps,this.mirror,e,n)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,a=this.maps.length;n<e.maps.length;n++){let s=e.getMirror(n);this.appendMap(e.maps[n],s!=null&&s<n?a+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,a=this.maps.length+e.maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e.maps[n].invert(),s!=null&&s>n?a-s-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let a=this.from;a<this.to;a++)e=this.maps[a].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,a){let s=0;for(let l=this.from;l<this.to;l++){let c=this.maps[l],d=c.mapResult(e,n);if(d.recover!=null){let u=this.getMirror(l);if(u!=null&&u>l&&u<this.to){l=u,e=this.maps[u].recover(d.recover);continue}}s|=d.delInfo,e=d.pos}return a?e:new MapResult(e,s,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[n.stepType];if(!a)throw new RangeError(`No step type ${n.stepType} defined`);return a.fromJSON(e,n)}static jsonID(e,n){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=n,n.prototype.jsonID=e,n}}class StepResult{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,n,a,s){try{return StepResult.ok(e.replace(n,a,s))}catch(l){if(l instanceof ReplaceError)return StepResult.fail(l.message);throw l}}}function mapFragment(o,e,n){let a=[];for(let s=0;s<o.childCount;s++){let l=o.child(s);l.content.size&&(l=l.copy(mapFragment(l.content,e,l))),l.isInline&&(l=e(l,n,s)),a.push(l)}return Fragment.fromArray(a)}class AddMarkStep extends Step{constructor(e,n,a){super(),this.from=e,this.to=n,this.mark=a}apply(e){let n=e.slice(this.from,this.to),a=e.resolve(this.from),s=a.node(a.sharedDepth(this.to)),l=new Slice(mapFragment(n.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,l)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deleted&&a.deleted||n.pos>=a.pos?null:new AddMarkStep(n.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,n,a){super(),this.from=e,this.to=n,this.mark=a}apply(e){let n=e.slice(this.from,this.to),a=new Slice(mapFragment(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deleted&&a.deleted||n.pos>=a.pos?null:new RemoveMarkStep(n.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let a=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let a=this.mark.addToSet(n.marks);if(a.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(a))return new AddNodeMarkStep(this.pos,n.marks[s]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AddNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let a=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new RemoveNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,n,a,s=!1){super(),this.from=e,this.to=n,this.slice=a,this.structure=s}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return n.deletedAcross&&a.deletedAcross?null:new ReplaceStep(n.pos,Math.max(n.pos,a.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(n.from,n.to,Slice.fromJSON(e,n.slice),!!n.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,n,a,s,l,c,d=!1){super(),this.from=e,this.to=n,this.gapFrom=a,this.gapTo=s,this.slice=l,this.insert=c,this.structure=d}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,n.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return n.deletedAcross&&a.deletedAcross||s<n.pos||l>a.pos?null:new ReplaceAroundStep(n.pos,a.pos,s,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(n.from,n.to,n.gapFrom,n.gapTo,Slice.fromJSON(e,n.slice),n.insert,!!n.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(o,e,n){let a=o.resolve(e),s=n-e,l=a.depth;for(;s>0&&l>0&&a.indexAfter(l)==a.node(l).childCount;)l--,s--;if(s>0){let c=a.node(l).maybeChild(a.indexAfter(l));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function addMark(o,e,n,a){let s=[],l=[],c,d;o.doc.nodesBetween(e,n,(u,f,v)=>{if(!u.isInline)return;let b=u.marks;if(!a.isInSet(b)&&v.type.allowsMarkType(a.type)){let k=Math.max(f,e),x=Math.min(f+u.nodeSize,n),_=a.addToSet(b);for(let E=0;E<b.length;E++)b[E].isInSet(_)||(c&&c.to==k&&c.mark.eq(b[E])?c.to=x:s.push(c=new RemoveMarkStep(k,x,b[E])));d&&d.to==k?d.to=x:l.push(d=new AddMarkStep(k,x,a))}}),s.forEach(u=>o.step(u)),l.forEach(u=>o.step(u))}function removeMark(o,e,n,a){let s=[],l=0;o.doc.nodesBetween(e,n,(c,d)=>{if(!c.isInline)return;l++;let u=null;if(a instanceof MarkType){let f=c.marks,v;for(;v=a.isInSet(f);)(u||(u=[])).push(v),f=v.removeFromSet(f)}else a?a.isInSet(c.marks)&&(u=[a]):u=c.marks;if(u&&u.length){let f=Math.min(d+c.nodeSize,n);for(let v=0;v<u.length;v++){let b=u[v],k;for(let x=0;x<s.length;x++){let _=s[x];_.step==l-1&&b.eq(s[x].style)&&(k=_)}k?(k.to=f,k.step=l):s.push({style:b,from:Math.max(d,e),to:f,step:l})}}}),s.forEach(c=>o.step(new RemoveMarkStep(c.from,c.to,c.style)))}function clearIncompatible(o,e,n,a=n.contentMatch,s=!0){let l=o.doc.nodeAt(e),c=[],d=e+1;for(let u=0;u<l.childCount;u++){let f=l.child(u),v=d+f.nodeSize,b=a.matchType(f.type);if(!b)c.push(new ReplaceStep(d,v,Slice.empty));else{a=b;for(let k=0;k<f.marks.length;k++)n.allowsMarkType(f.marks[k].type)||o.step(new RemoveMarkStep(d,v,f.marks[k]));if(s&&f.isText&&n.whitespace!="pre"){let k,x=/\r?\n|\r/g,_;for(;k=x.exec(f.text);)_||(_=new Slice(Fragment.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),c.push(new ReplaceStep(d+k.index,d+k.index+k[0].length,_))}}d=v}if(!a.validEnd){let u=a.fillBefore(Fragment.empty,!0);o.replace(d,d,new Slice(u,0,0))}for(let u=c.length-1;u>=0;u--)o.step(c[u])}function lift(o,e,n){let{$from:a,$to:s,depth:l}=e,c=a.before(l+1),d=s.after(l+1),u=c,f=d,v=Fragment.empty,b=0;for(let _=l,E=!1;_>n;_--)E||a.index(_)>0?(E=!0,v=Fragment.from(a.node(_).copy(v)),b++):u--;let k=Fragment.empty,x=0;for(let _=l,E=!1;_>n;_--)E||s.after(_+1)<s.end(_)?(E=!0,k=Fragment.from(s.node(_).copy(k)),x++):f++;o.step(new ReplaceAroundStep(u,f,c,d,new Slice(v.append(k),b,x),v.size-b,!0))}function wrap(o,e,n){let a=Fragment.empty;for(let c=n.length-1;c>=0;c--){if(a.size){let d=n[c].type.contentMatch.matchFragment(a);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment.from(n[c].type.create(n[c].attrs,a))}let s=e.start,l=e.end;o.step(new ReplaceAroundStep(s,l,s,l,new Slice(a,0,0),n.length,!0))}function setBlockType(o,e,n,a,s){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=o.steps.length;o.doc.nodesBetween(e,n,(c,d)=>{let u=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(a,u)&&canChangeType(o.doc,o.mapping.slice(l).map(d),a)){let f=null;if(a.schema.linebreakReplacement){let x=a.whitespace=="pre",_=!!a.contentMatch.matchType(a.schema.linebreakReplacement);x&&!_?f=!1:!x&&_&&(f=!0)}f===!1&&replaceLinebreaks(o,c,d,l),clearIncompatible(o,o.mapping.slice(l).map(d,1),a,void 0,f===null);let v=o.mapping.slice(l),b=v.map(d,1),k=v.map(d+c.nodeSize,1);return o.step(new ReplaceAroundStep(b,k,b+1,k-1,new Slice(Fragment.from(a.create(u,null,c.marks)),0,0),1,!0)),f===!0&&replaceNewlines(o,c,d,l),!1}})}function replaceNewlines(o,e,n,a){e.forEach((s,l)=>{if(s.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(s.text);){let u=o.mapping.slice(a).map(n+1+l+c.index);o.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(o,e,n,a){e.forEach((s,l)=>{if(s.type==s.type.schema.linebreakReplacement){let c=o.mapping.slice(a).map(n+1+l);o.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function canChangeType(o,e,n){let a=o.resolve(e),s=a.index();return a.parent.canReplaceWith(s,s+1,n)}function setNodeMarkup(o,e,n,a,s){let l=o.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");n||(n=l.type);let c=n.create(a,null,s||l.marks);if(l.isLeaf)return o.replaceWith(e,e+l.nodeSize,c);if(!n.validContent(l.content))throw new RangeError("Invalid content for node type "+n.name);o.step(new ReplaceAroundStep(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new Slice(Fragment.from(c),0,0),1,!0))}function split(o,e,n=1,a){let s=o.doc.resolve(e),l=Fragment.empty,c=Fragment.empty;for(let d=s.depth,u=s.depth-n,f=n-1;d>u;d--,f--){l=Fragment.from(s.node(d).copy(l));let v=a&&a[f];c=Fragment.from(v?v.type.create(v.attrs,c):s.node(d).copy(c))}o.step(new ReplaceStep(e,e,new Slice(l.append(c),n,n),!0))}function join(o,e,n){let a=null,{linebreakReplacement:s}=o.doc.type.schema,l=o.doc.resolve(e-n),c=l.node().type;if(s&&c.inlineContent){let v=c.whitespace=="pre",b=!!c.contentMatch.matchType(s);v&&!b?a=!1:!v&&b&&(a=!0)}let d=o.steps.length;if(a===!1){let v=o.doc.resolve(e+n);replaceLinebreaks(o,v.node(),v.before(),d)}c.inlineContent&&clearIncompatible(o,e+n-1,c,l.node().contentMatchAt(l.index()),a==null);let u=o.mapping.slice(d),f=u.map(e-n);if(o.step(new ReplaceStep(f,u.map(e+n,-1),Slice.empty,!0)),a===!0){let v=o.doc.resolve(f);replaceNewlines(o,v.node(),v.before(),o.steps.length)}return o}function insertPoint(o,e,n){let a=o.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),n))return e;if(a.parentOffset==0)for(let s=a.depth-1;s>=0;s--){let l=a.index(s);if(a.node(s).canReplaceWith(l,l,n))return a.before(s+1);if(l>0)return null}if(a.parentOffset==a.parent.content.size)for(let s=a.depth-1;s>=0;s--){let l=a.indexAfter(s);if(a.node(s).canReplaceWith(l,l,n))return a.after(s+1);if(l<a.node(s).childCount)return null}return null}function dropPoint(o,e,n){let a=o.resolve(e);if(!n.content.size)return e;let s=n.content;for(let l=0;l<n.openStart;l++)s=s.firstChild.content;for(let l=1;l<=(n.openStart==0&&n.size?2:1);l++)for(let c=a.depth;c>=0;c--){let d=c==a.depth?0:a.pos<=(a.start(c+1)+a.end(c+1))/2?-1:1,u=a.index(c)+(d>0?1:0),f=a.node(c),v=!1;if(l==1)v=f.canReplace(u,u,s);else{let b=f.contentMatchAt(u).findWrapping(s.firstChild.type);v=b&&f.canReplaceWith(u,u,b[0])}if(v)return d==0?a.pos:d<0?a.before(c+1):a.after(c+1)}return null}function replaceStep(o,e,n=e,a=Slice.empty){if(e==n&&!a.size)return null;let s=o.resolve(e),l=o.resolve(n);return fitsTrivially(s,l,a)?new ReplaceStep(e,n,a):new Fitter(s,l,a).fit()}function fitsTrivially(o,e,n){return!n.openStart&&!n.openEnd&&o.start()==e.start()&&o.parent.canReplace(o.index(),e.index(),n.content)}class Fitter{constructor(e,n,a){this.$from=e,this.$to=n,this.unplaced=a,this.frontier=[],this.placed=Fragment.empty;for(let s=0;s<=e.depth;s++){let l=e.node(s);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Fragment.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,a=this.$from,s=this.close(e<0?this.$to:a.doc.resolve(e));if(!s)return null;let l=this.placed,c=a.depth,d=s.depth;for(;c&&d&&l.childCount==1;)l=l.firstChild.content,c--,d--;let u=new Slice(l,c,d);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,a=0,s=this.unplaced.openEnd;a<e;a++){let l=n.firstChild;if(n.childCount>1&&(s=0),l.type.spec.isolating&&s<=a){e=a;break}n=l.content}for(let n=1;n<=2;n++)for(let a=n==1?e:this.unplaced.openStart;a>=0;a--){let s,l=null;a?(l=contentAt(this.unplaced.content,a-1).firstChild,s=l.content):s=this.unplaced.content;let c=s.firstChild;for(let d=this.depth;d>=0;d--){let{type:u,match:f}=this.frontier[d],v,b=null;if(n==1&&(c?f.matchType(c.type)||(b=f.fillBefore(Fragment.from(c),!1)):l&&u.compatibleContent(l.type)))return{sliceDepth:a,frontierDepth:d,parent:l,inject:b};if(n==2&&c&&(v=f.findWrapping(c.type)))return{sliceDepth:a,frontierDepth:d,parent:l,wrap:v};if(l&&f.matchType(l.type))break}}}openMore(){let{content:e,openStart:n,openEnd:a}=this.unplaced,s=contentAt(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,n+1,Math.max(a,s.size+n>=e.size-a?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:a}=this.unplaced,s=contentAt(e,n);if(s.childCount<=1&&n>0){let l=e.size-n<=n+s.size;this.unplaced=new Slice(dropFromFragment(e,n-1,1),n-1,l?n-1:a)}else this.unplaced=new Slice(dropFromFragment(e,n,1),n,a)}placeNodes({sliceDepth:e,frontierDepth:n,parent:a,inject:s,wrap:l}){for(;this.depth>n;)this.closeFrontierNode();if(l)for(let E=0;E<l.length;E++)this.openFrontierNode(l[E]);let c=this.unplaced,d=a?a.content:c.content,u=c.openStart-e,f=0,v=[],{match:b,type:k}=this.frontier[n];if(s){for(let E=0;E<s.childCount;E++)v.push(s.child(E));b=b.matchFragment(s)}let x=d.size+e-(c.content.size-c.openEnd);for(;f<d.childCount;){let E=d.child(f),B=b.matchType(E.type);if(!B)break;f++,(f>1||u==0||E.content.size)&&(b=B,v.push(closeNodeStart(E.mark(k.allowedMarks(E.marks)),f==1?u:0,f==d.childCount?x:-1)))}let _=f==d.childCount;_||(x=-1),this.placed=addToFragment(this.placed,n,Fragment.from(v)),this.frontier[n].match=b,_&&x<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,B=d;E<x;E++){let M=B.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),B=M.content}this.unplaced=_?e==0?Slice.empty:new Slice(dropFromFragment(c.content,e-1,1),e-1,x<0?c.openEnd:e-1):new Slice(dropFromFragment(c.content,e,f),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:a}=this.$to,s=this.$to.after(a);for(;a>1&&s==this.$to.end(--a);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:a,type:s}=this.frontier[n],l=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),c=contentAfterFits(e,n,s,a,l);if(c){for(let d=n-1;d>=0;d--){let{match:u,type:f}=this.frontier[d],v=contentAfterFits(e,d,f,u,!0);if(!v||v.childCount)continue e}return{depth:n,fit:c,move:l?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=addToFragment(this.placed,n.depth,n.fit)),e=n.move;for(let a=n.depth+1;a<=e.depth;a++){let s=e.node(a),l=s.type.contentMatch.fillBefore(s.content,!0,e.index(a));this.openFrontierNode(s.type,s.attrs,l)}return e}openFrontierNode(e,n=null,a){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(n,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Fragment.empty,!0);e.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,e))}}function dropFromFragment(o,e,n){return e==0?o.cutByIndex(n,o.childCount):o.replaceChild(0,o.firstChild.copy(dropFromFragment(o.firstChild.content,e-1,n)))}function addToFragment(o,e,n){return e==0?o.append(n):o.replaceChild(o.childCount-1,o.lastChild.copy(addToFragment(o.lastChild.content,e-1,n)))}function contentAt(o,e){for(let n=0;n<e;n++)o=o.firstChild.content;return o}function closeNodeStart(o,e,n){if(e<=0)return o;let a=o.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?n-1:0))),e>0&&(a=o.type.contentMatch.fillBefore(a).append(a),n<=0&&(a=a.append(o.type.contentMatch.matchFragment(a).fillBefore(Fragment.empty,!0)))),o.copy(a)}function contentAfterFits(o,e,n,a,s){let l=o.node(e),c=s?o.indexAfter(e):o.index(e);if(c==l.childCount&&!n.compatibleContent(l.type))return null;let d=a.fillBefore(l.content,!0,c);return d&&!invalidMarks(n,l.content,c)?d:null}function invalidMarks(o,e,n){for(let a=n;a<e.childCount;a++)if(!o.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(o){return o.spec.defining||o.spec.definingForContent}function replaceRange$1(o,e,n,a){if(!a.size)return o.deleteRange(e,n);let s=o.doc.resolve(e),l=o.doc.resolve(n);if(fitsTrivially(s,l,a))return o.step(new ReplaceStep(e,n,a));let c=coveredDepths(s,o.doc.resolve(n));c[c.length-1]==0&&c.pop();let d=-(s.depth+1);c.unshift(d);for(let k=s.depth,x=s.pos-1;k>0;k--,x--){let _=s.node(k).type.spec;if(_.defining||_.definingAsContext||_.isolating)break;c.indexOf(k)>-1?d=k:s.before(k)==x&&c.splice(1,0,-k)}let u=c.indexOf(d),f=[],v=a.openStart;for(let k=a.content,x=0;;x++){let _=k.firstChild;if(f.push(_),x==a.openStart)break;k=_.content}for(let k=v-1;k>=0;k--){let x=f[k],_=definesContent(x.type);if(_&&!x.sameMarkup(s.node(Math.abs(d)-1)))v=k;else if(_||!x.type.isTextblock)break}for(let k=a.openStart;k>=0;k--){let x=(k+v+1)%(a.openStart+1),_=f[x];if(_)for(let E=0;E<c.length;E++){let B=c[(E+u)%c.length],M=!0;B<0&&(M=!1,B=-B);let I=s.node(B-1),F=s.index(B-1);if(I.canReplaceWith(F,F,_.type,_.marks))return o.replace(s.before(B),M?l.after(B):n,new Slice(closeFragment(a.content,0,a.openStart,x),x,a.openEnd))}}let b=o.steps.length;for(let k=c.length-1;k>=0&&(o.replace(e,n,a),!(o.steps.length>b));k--){let x=c[k];x<0||(e=s.before(x),n=l.after(x))}}function closeFragment(o,e,n,a,s){if(e<n){let l=o.firstChild;o=o.replaceChild(0,l.copy(closeFragment(l.content,e+1,n,a,l)))}if(e>a){let l=s.contentMatchAt(0),c=l.fillBefore(o).append(o);o=c.append(l.matchFragment(c).fillBefore(Fragment.empty,!0))}return o}function replaceRangeWith(o,e,n,a){if(!a.isInline&&e==n&&o.doc.resolve(e).parent.content.size){let s=insertPoint(o.doc,e,a.type);s!=null&&(e=n=s)}o.replaceRange(e,n,new Slice(Fragment.from(a),0,0))}function deleteRange(o,e,n){let a=o.doc.resolve(e),s=o.doc.resolve(n),l=coveredDepths(a,s);for(let c=0;c<l.length;c++){let d=l[c],u=c==l.length-1;if(u&&d==0||a.node(d).type.contentMatch.validEnd)return o.delete(a.start(d),s.end(d));if(d>0&&(u||a.node(d-1).canReplace(a.index(d-1),s.indexAfter(d-1))))return o.delete(a.before(d),s.after(d))}for(let c=1;c<=a.depth&&c<=s.depth;c++)if(e-a.start(c)==a.depth-c&&n>a.end(c)&&s.end(c)-n!=s.depth-c&&a.start(c-1)==s.start(c-1)&&a.node(c-1).canReplace(a.index(c-1),s.index(c-1)))return o.delete(a.before(c),n);o.delete(e,n)}function coveredDepths(o,e){let n=[],a=Math.min(o.depth,e.depth);for(let s=a;s>=0;s--){let l=o.start(s);if(l<o.pos-(o.depth-s)||e.end(s)>e.pos+(e.depth-s)||o.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(l==e.start(s)||s==o.depth&&s==e.depth&&o.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==l-1)&&n.push(s)}return n}class AttrStep extends Step{constructor(e,n,a){super(),this.pos=e,this.attr=n,this.value=a}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let l in n.attrs)a[l]=n.attrs[l];a[this.attr]=this.value;let s=n.type.create(a,null,n.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(s),0,n.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AttrStep(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(n.pos,n.attr,n.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let a=e.type.create(n,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(n.attr,n.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function o(e){let n=Error.call(this,e);return n.__proto__=o.prototype,n},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new TransformError(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,a=Slice.empty){let s=replaceStep(this.doc,e,n,a);return s&&this.step(s),this}replaceWith(e,n,a){return this.replace(e,n,new Slice(Fragment.from(a),0,0))}delete(e,n){return this.replace(e,n,Slice.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,a){return replaceRange$1(this,e,n,a),this}replaceRangeWith(e,n,a){return replaceRangeWith(this,e,n,a),this}deleteRange(e,n){return deleteRange(this,e,n),this}lift(e,n){return lift(this,e,n),this}join(e,n=1){return join(this,e,n),this}wrap(e,n){return wrap(this,e,n),this}setBlockType(e,n=e,a,s=null){return setBlockType(this,e,n,a,s),this}setNodeMarkup(e,n,a=null,s){return setNodeMarkup(this,e,n,a,s),this}setNodeAttribute(e,n,a){return this.step(new AttrStep(e,n,a)),this}setDocAttribute(e,n){return this.step(new DocAttrStep(e,n)),this}addNodeMark(e,n){return this.step(new AddNodeMarkStep(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Mark)){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(n=n.isInSet(a.marks),!n)return this}return this.step(new RemoveNodeMarkStep(e,n)),this}split(e,n=1,a){return split(this,e,n,a),this}addMark(e,n,a){return addMark(this,e,n,a),this}removeMark(e,n,a){return removeMark(this,e,n,a),this}clearIncompatible(e,n,a){return clearIncompatible(this,e,n,a),this}}const classesById=Object.create(null);class Selection{constructor(e,n,a){this.$anchor=e,this.$head=n,this.ranges=a||[new SelectionRange$1(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Slice.empty){let a=n.content.lastChild,s=null;for(let d=0;d<n.openEnd;d++)s=a,a=a.lastChild;let l=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:u,$to:f}=c[d],v=e.mapping.slice(l);e.replaceRange(v.map(u.pos),v.map(f.pos),d?Slice.empty:n),d==0&&selectionToInsertionEnd(e,l,(a?a.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let a=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:c,$to:d}=s[l],u=e.mapping.slice(a),f=u.map(c.pos),v=u.map(d.pos);l?e.deleteRange(f,v):(e.replaceRangeWith(f,v,n),selectionToInsertionEnd(e,a,n.isInline?-1:1))}}static findFrom(e,n,a=!1){let s=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),n,a);if(s)return s;for(let l=e.depth-1;l>=0;l--){let c=n<0?findSelectionIn(e.node(0),e.node(l),e.before(l+1),e.index(l),n,a):findSelectionIn(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,n,a);if(c)return c}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[n.type];if(!a)throw new RangeError(`No selection type ${n.type} defined`);return a.fromJSON(e,n)}static jsonID(e,n){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=n,n.prototype.jsonID=e,n}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;let SelectionRange$1=class{constructor(o,e){this.$from=o,this.$to=e}},warnedAboutTextSelection=!1;function checkTextSelection(o){!warnedAboutTextSelection&&!o.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+o.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,n=e){checkTextSelection(e),checkTextSelection(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let a=e.resolve(n.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let s=e.resolve(n.map(this.anchor));return new TextSelection(s.parent.inlineContent?s:a,a)}replace(e,n=Slice.empty){if(super.replace(e,n),n==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,a=n){let s=e.resolve(n);return new this(s,a==n?s:e.resolve(a))}static between(e,n,a){let s=e.pos-n.pos;if((!a||s)&&(a=s>=0?1:-1),!n.parent.inlineContent){let l=Selection.findFrom(n,a,!0)||Selection.findFrom(n,-a,!0);if(l)n=l.$head;else return Selection.near(n,a)}return e.parent.inlineContent||(s==0?e=n:(e=(Selection.findFrom(e,-a,!0)||Selection.findFrom(e,a,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new TextSelection(e,n)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,n){this.anchor=e,this.head=n}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let n=e.nodeAfter,a=e.node(0).resolve(e.pos+n.nodeSize);super(e,a),this.node=n}map(e,n){let{deleted:a,pos:s}=n.mapResult(this.anchor),l=e.resolve(s);return a?Selection.near(l):new NodeSelection(l)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(n.anchor))}static create(e,n){return new NodeSelection(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:a}=e.mapResult(this.anchor);return n?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let n=e.resolve(this.anchor),a=n.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(n):Selection.near(n)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Slice.empty){if(n==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(o){return new AllSelection(o)}};function findSelectionIn(o,e,n,a,s,l=!1){if(e.inlineContent)return TextSelection.create(o,n);for(let c=a-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let d=e.child(c);if(d.isAtom){if(!l&&NodeSelection.isSelectable(d))return NodeSelection.create(o,n-(s<0?d.nodeSize:0))}else{let u=findSelectionIn(o,d,n+s,s<0?d.childCount:0,s,l);if(u)return u}n+=d.nodeSize*s}return null}function selectionToInsertionEnd(o,e,n){let a=o.steps.length-1;if(a<e)return;let s=o.steps[a];if(!(s instanceof ReplaceStep||s instanceof ReplaceAroundStep))return;let l=o.mapping.maps[a],c;l.forEach((d,u,f,v)=>{c==null&&(c=v)}),o.setSelection(Selection.near(o.doc.resolve(c),n))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;let Transaction$1=class extends Transform{constructor(o){super(o.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=o.selection,this.storedMarks=o.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(o){if(o.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=o,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(o){return this.storedMarks=o,this.updated|=UPDATED_MARKS,this}ensureMarks(o){return Mark.sameSet(this.storedMarks||this.selection.$from.marks(),o)||this.setStoredMarks(o),this}addStoredMark(o){return this.ensureMarks(o.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(o){return this.ensureMarks(o.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(o,e){super.addStep(o,e),this.updated=this.updated&-3,this.storedMarks=null}setTime(o){return this.time=o,this}replaceSelection(o){return this.selection.replace(this,o),this}replaceSelectionWith(o,e=!0){let n=this.selection;return e&&(o=o.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Mark.none))),n.replaceWith(this,o),this}deleteSelection(){return this.selection.replace(this),this}insertText(o,e,n){let a=this.doc.type.schema;if(e==null)return o?this.replaceSelectionWith(a.text(o),!0):this.deleteSelection();{if(n==null&&(n=e),n=n??e,!o)return this.deleteRange(e,n);let s=this.storedMarks;if(!s){let l=this.doc.resolve(e);s=n==e?l.marks():l.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,a.text(o,s)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(o,e){return this.meta[typeof o=="string"?o:o.key]=e,this}getMeta(o){return this.meta[typeof o=="string"?o:o.key]}get isGeneric(){for(let o in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}};function bind(o,e){return!e||!o?o:o.bind(e)}class FieldDesc{constructor(e,n,a){this.name=e,this.init=bind(n.init,a),this.apply=bind(n.apply,a)}}const baseFields=[new FieldDesc("doc",{init(o){return o.doc||o.schema.topNodeType.createAndFill()},apply(o){return o.doc}}),new FieldDesc("selection",{init(o,e){return o.selection||Selection.atStart(e.doc)},apply(o){return o.selection}}),new FieldDesc("storedMarks",{init(o){return o.storedMarks||null},apply(o,e,n,a){return a.selection.$cursor?o.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(o,e){return o.scrolledIntoView?e+1:e}})];let Configuration$1=class{constructor(o,e){this.schema=o,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),e&&e.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new FieldDesc(n.key,n.spec.state,n))})}},EditorState$1=class tr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=n){let s=this.config.plugins[a];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],a=this.applyInner(e),s=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let u=s?s[c].n:0,f=s?s[c].state:this,v=u<n.length&&d.spec.appendTransaction.call(d,u?n.slice(u):n,f,a);if(v&&a.filterTransaction(v,c)){if(v.setMeta("appendedTransaction",e),!s){s=[];for(let b=0;b<this.config.plugins.length;b++)s.push(b<c?{state:a,n:n.length}:{state:this,n:0})}n.push(v),a=a.applyInner(v),l=!0}s&&(s[c]={state:a,n:n.length})}}if(!l)return{state:a,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new tr(this.config),a=this.config.fields;for(let s=0;s<a.length;s++){let l=a[s];n[l.name]=l.apply(e,this[l.name],this,n)}return n}get tr(){return new Transaction$1(this)}static create(e){let n=new Configuration$1(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new tr(n);for(let s=0;s<n.fields.length;s++)a[n.fields[s].name]=n.fields[s].init(e,a);return a}reconfigure(e){let n=new Configuration$1(this.schema,e.plugins),a=n.fields,s=new tr(n);for(let l=0;l<a.length;l++){let c=a[l].name;s[c]=this.hasOwnProperty(c)?this[c]:a[l].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[a],l=s.spec.state;l&&l.toJSON&&(n[a]=l.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,a){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Configuration$1(e.schema,e.plugins),l=new tr(s);return s.fields.forEach(c=>{if(c.name=="doc")l.doc=Node$1.fromJSON(e.schema,n.doc);else if(c.name=="selection")l.selection=Selection.fromJSON(l.doc,n.selection);else if(c.name=="storedMarks")n.storedMarks&&(l.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let d in a){let u=a[d],f=u.spec.state;if(u.key==c.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,d)){l[c.name]=f.fromJSON.call(u,e,n[d],l);return}}l[c.name]=c.init(e,l)}}),l}};function bindProps(o,e,n){for(let a in o){let s=o[a];s instanceof Function?s=s.bind(e):a=="handleDOMEvents"&&(s=bindProps(s,e,{})),n[a]=s}return n}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(o){return o in keys?o+"$"+ ++keys[o]:(keys[o]=0,o+"$")}const domIndex$1=function(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e},parentNode=function(o){let e=o.assignedSlot||o.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange$1=function(o,e,n){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(o,n??o.nodeValue.length),a.setStart(o,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition$1=function(o,e,n,a){return n&&(scanFor$1(o,e,n,a,-1)||scanFor$1(o,e,n,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor$1(o,e,n,a,s){for(;;){if(o==n&&e==a)return!0;if(e==(s<0?0:nodeSize$1(o))){let l=o.parentNode;if(!l||l.nodeType!=1||hasBlockDesc(o)||atomElements.test(o.nodeName)||o.contentEditable=="false")return!1;e=domIndex$1(o)+(s<0?0:1),o=l}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.contentEditable=="false")return!1;e=s<0?nodeSize$1(o):0}else return!1}}function nodeSize$1(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function textNodeBefore$1(o,e){for(;;){if(o.nodeType==3&&e)return o;if(o.nodeType==1&&e>0){if(o.contentEditable=="false")return null;o=o.childNodes[e-1],e=nodeSize$1(o)}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o),o=o.parentNode;else return null}}function textNodeAfter$1(o,e){for(;;){if(o.nodeType==3&&e<o.nodeValue.length)return o;if(o.nodeType==1&&e<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[e],e=0}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex$1(o)+1,o=o.parentNode;else return null}}function isOnEdge(o,e,n){for(let a=e==0,s=e==nodeSize$1(o);a||s;){if(o==n)return!0;let l=domIndex$1(o);if(o=o.parentNode,!o)return!1;a=a&&l==0,s=s&&l==nodeSize$1(o)}}function hasBlockDesc(o){let e;for(let n=o;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const selectionCollapsed=function(o){return o.focusNode&&isEquivalentPosition$1(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function keyEvent(o,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=o,n.key=n.code=e,n}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(o,e,n){if(o.caretPositionFromPoint)try{let a=o.caretPositionFromPoint(e,n);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize$1(a.offsetNode),a.offset)}}catch{}if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e,n);if(a)return{node:a.startContainer,offset:Math.min(nodeSize$1(a.startContainer),a.startOffset)}}}const nav$1=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav$1&&nav$1.userAgent||"",ie_edge$1=/Edge\/(\d+)/.exec(agent),ie_upto10$1=/MSIE \d/.exec(agent),ie_11up$1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10$1||ie_11up$1||ie_edge$1),ie_version=ie_upto10$1?document.documentMode:ie_11up$1?+ie_11up$1[1]:ie_edge$1?+ie_edge$1[1]:0,gecko$1=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko$1&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome$1=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$2&&!!nav$1&&/Apple Computer/.test(nav$1.vendor),ios$1=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav$1&&nav$1.maxTouchPoints>2),mac$2=ios$1||(nav$1?/Mac/.test(nav$1.platform):!1),windows=nav$1?/Win/.test(nav$1.platform):!1,android$1=/Android \d/.test(agent),webkit$1=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit$1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect$1(o){let e=o.defaultView&&o.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function getSide(o,e){return typeof o=="number"?o:o[e]}function clientRect(o){let e=o.getBoundingClientRect(),n=e.width/o.offsetWidth||1,a=e.height/o.offsetHeight||1;return{left:e.left,right:e.left+o.clientWidth*n,top:e.top,bottom:e.top+o.clientHeight*a}}function scrollRectIntoView$1(o,e,n){let a=o.someProp("scrollThreshold")||0,s=o.someProp("scrollMargin")||5,l=o.dom.ownerDocument;for(let c=n||o.dom;c;c=parentNode(c)){if(c.nodeType!=1)continue;let d=c,u=d==l.body,f=u?windowRect$1(l):clientRect(d),v=0,b=0;if(e.top<f.top+getSide(a,"top")?b=-(f.top-e.top+getSide(s,"top")):e.bottom>f.bottom-getSide(a,"bottom")&&(b=e.bottom-e.top>f.bottom-f.top?e.top+getSide(s,"top")-f.top:e.bottom-f.bottom+getSide(s,"bottom")),e.left<f.left+getSide(a,"left")?v=-(f.left-e.left+getSide(s,"left")):e.right>f.right-getSide(a,"right")&&(v=e.right-f.right+getSide(s,"right")),v||b)if(u)l.defaultView.scrollBy(v,b);else{let k=d.scrollLeft,x=d.scrollTop;b&&(d.scrollTop+=b),v&&(d.scrollLeft+=v);let _=d.scrollLeft-k,E=d.scrollTop-x;e={left:e.left-_,top:e.top-E,right:e.right-_,bottom:e.bottom-E}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(c).position))break}}function storeScrollPos(o){let e=o.dom.getBoundingClientRect(),n=Math.max(0,e.top),a,s;for(let l=(e.left+e.right)/2,c=n+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=o.root.elementFromPoint(l,c);if(!d||d==o.dom||!o.dom.contains(d))continue;let u=d.getBoundingClientRect();if(u.top>=n-20){a=d,s=u.top;break}}return{refDOM:a,refTop:s,stack:scrollStack(o.dom)}}function scrollStack(o){let e=[],n=o.ownerDocument;for(let a=o;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),o!=n);a=parentNode(a));return e}function resetScrollPos({refDOM:o,refTop:e,stack:n}){let a=o?o.getBoundingClientRect().top:0;restoreScrollStack(n,a==0?0:a-e)}function restoreScrollStack(o,e){for(let n=0;n<o.length;n++){let{dom:a,top:s,left:l}=o[n];a.scrollTop!=s+e&&(a.scrollTop=s+e),a.scrollLeft!=l&&(a.scrollLeft=l)}}let preventScrollSupported$1=null;function focusPreventScroll$1(o){if(o.setActive)return o.setActive();if(preventScrollSupported$1)return o.focus(preventScrollSupported$1);let e=scrollStack(o);o.focus(preventScrollSupported$1==null?{get preventScroll(){return preventScrollSupported$1={preventScroll:!0},!0}}:void 0),preventScrollSupported$1||(preventScrollSupported$1=!1,restoreScrollStack(e,0))}function findOffsetInNode(o,e){let n,a=2e8,s,l=0,c=e.top,d=e.top,u,f;for(let v=o.firstChild,b=0;v;v=v.nextSibling,b++){let k;if(v.nodeType==1)k=v.getClientRects();else if(v.nodeType==3)k=textRange$1(v).getClientRects();else continue;for(let x=0;x<k.length;x++){let _=k[x];if(_.top<=c&&_.bottom>=d){c=Math.max(_.bottom,c),d=Math.min(_.top,d);let E=_.left>e.left?_.left-e.left:_.right<e.left?e.left-_.right:0;if(E<a){n=v,a=E,s=E&&n.nodeType==3?{left:_.right<e.left?_.right:_.left,top:e.top}:e,v.nodeType==1&&E&&(l=b+(e.left>=(_.left+_.right)/2?1:0));continue}}else _.top>e.top&&!u&&_.left<=e.left&&_.right>=e.left&&(u=v,f={left:Math.max(_.left,Math.min(_.right,e.left)),top:_.top});!n&&(e.left>=_.right&&e.top>=_.top||e.left>=_.left&&e.top>=_.bottom)&&(l=b+1)}}return!n&&u&&(n=u,s=f,a=0),n&&n.nodeType==3?findOffsetInText(n,s):!n||a&&n.nodeType==1?{node:o,offset:l}:findOffsetInNode(n,s)}function findOffsetInText(o,e){let n=o.nodeValue.length,a=document.createRange();for(let s=0;s<n;s++){a.setEnd(o,s+1),a.setStart(o,s);let l=singleRect(a,1);if(l.top!=l.bottom&&inRect(e,l))return{node:o,offset:s+(e.left>=(l.left+l.right)/2?1:0)}}return{node:o,offset:0}}function inRect(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function targetKludge(o,e){let n=o.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<o.getBoundingClientRect().left?n:o}function posFromElement(o,e,n){let{node:a,offset:s}=findOffsetInNode(e,n),l=-1;if(a.nodeType==1&&!a.firstChild){let c=a.getBoundingClientRect();l=c.left!=c.right&&n.left>(c.left+c.right)/2?1:-1}return o.docView.posFromDOM(a,s,l)}function posFromCaret(o,e,n,a){let s=-1;for(let l=e,c=!1;l!=o.dom;){let d=o.docView.nearestDesc(l,!0),u;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((u=d.dom.getBoundingClientRect()).width||u.height)&&(d.node.isBlock&&d.parent&&(!c&&u.left>a.left||u.top>a.top?s=d.posBefore:(!c&&u.right<a.left||u.bottom<a.top)&&(s=d.posAfter),c=!0),!d.contentDOM&&s<0&&!d.node.isText))return(d.node.isBlock?a.top<(u.top+u.bottom)/2:a.left<(u.left+u.right)/2)?d.posBefore:d.posAfter;l=d.dom.parentNode}return s>-1?s:o.docView.posFromDOM(e,n,-1)}function elementFromPoint(o,e,n){let a=o.childNodes.length;if(a&&n.top<n.bottom)for(let s=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-n.top)/(n.bottom-n.top))-2)),l=s;;){let c=o.childNodes[l];if(c.nodeType==1){let d=c.getClientRects();for(let u=0;u<d.length;u++){let f=d[u];if(inRect(e,f))return elementFromPoint(c,e,f)}}if((l=(l+1)%a)==s)break}return o}function posAtCoords$1(o,e){let n=o.dom.ownerDocument,a,s=0,l=caretFromPoint(n,e.left,e.top);l&&({node:a,offset:s}=l);let c=(o.root.elementFromPoint?o.root:n).elementFromPoint(e.left,e.top),d;if(!c||!o.dom.contains(c.nodeType!=1?c.parentNode:c)){let f=o.dom.getBoundingClientRect();if(!inRect(e,f)||(c=elementFromPoint(o.dom,e,f),!c))return null}if(safari$1)for(let f=c;a&&f;f=parentNode(f))f.draggable&&(a=void 0);if(c=targetKludge(c,e),a){if(gecko$1&&a.nodeType==1&&(s=Math.min(s,a.childNodes.length),s<a.childNodes.length)){let v=a.childNodes[s],b;v.nodeName=="IMG"&&(b=v.getBoundingClientRect()).right<=e.left&&b.bottom>e.top&&s++}let f;webkit$1&&s&&a.nodeType==1&&(f=a.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,a==o.dom&&s==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?d=o.state.doc.content.size:(s==0||a.nodeType!=1||a.childNodes[s-1].nodeName!="BR")&&(d=posFromCaret(o,a,s,e))}d==null&&(d=posFromElement(o,c,e));let u=o.docView.nearestDesc(c,!0);return{pos:d,inside:u?u.posAtStart-u.border:-1}}function nonZero(o){return o.top<o.bottom||o.left<o.right}function singleRect(o,e){let n=o.getClientRects();if(n.length){let a=n[e<0?0:n.length-1];if(nonZero(a))return a}return Array.prototype.find.call(n,nonZero)||o.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(o,e,n){let{node:a,offset:s,atom:l}=o.docView.domFromPos(e,n<0?-1:1),c=webkit$1||gecko$1;if(a.nodeType==3)if(c&&(BIDI.test(a.nodeValue)||(n<0?!s:s==a.nodeValue.length))){let d=singleRect(textRange$1(a,s,s),n);if(gecko$1&&s&&/\s/.test(a.nodeValue[s-1])&&s<a.nodeValue.length){let u=singleRect(textRange$1(a,s-1,s-1),-1);if(u.top==d.top){let f=singleRect(textRange$1(a,s,s+1),-1);if(f.top!=d.top)return flattenV(f,f.left<u.left)}}return d}else{let d=s,u=s,f=n<0?1:-1;return n<0&&!s?(u++,f=-1):n>=0&&s==a.nodeValue.length?(d--,f=1):n<0?d--:u++,flattenV(singleRect(textRange$1(a,d,u),f),f<0)}if(!o.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&s&&(n<0||s==nodeSize$1(a))){let d=a.childNodes[s-1];if(d.nodeType==1)return flattenH(d.getBoundingClientRect(),!1)}if(l==null&&s<nodeSize$1(a)){let d=a.childNodes[s];if(d.nodeType==1)return flattenH(d.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),n>=0)}if(l==null&&s&&(n<0||s==nodeSize$1(a))){let d=a.childNodes[s-1],u=d.nodeType==3?textRange$1(d,nodeSize$1(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(u)return flattenV(singleRect(u,1),!1)}if(l==null&&s<nodeSize$1(a)){let d=a.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let u=d?d.nodeType==3?textRange$1(d,0,c?0:1):d.nodeType==1?d:null:null;if(u)return flattenV(singleRect(u,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange$1(a):a,-n),n>=0)}function flattenV(o,e){if(o.width==0)return o;let n=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:n,right:n}}function flattenH(o,e){if(o.height==0)return o;let n=e?o.top:o.bottom;return{top:n,bottom:n,left:o.left,right:o.right}}function withFlushedState(o,e,n){let a=o.state,s=o.root.activeElement;a!=e&&o.updateState(e),s!=o.dom&&o.focus();try{return n()}finally{a!=e&&o.updateState(a),s!=o.dom&&s&&s.focus()}}function endOfTextblockVertical(o,e,n){let a=e.selection,s=n=="up"?a.$from:a.$to;return withFlushedState(o,e,()=>{let{node:l}=o.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let d=o.docView.nearestDesc(l,!0);if(!d)break;if(d.node.isBlock){l=d.contentDOM||d.dom;break}l=d.dom.parentNode}let c=coordsAtPos(o,s.pos,1);for(let d=l.firstChild;d;d=d.nextSibling){let u;if(d.nodeType==1)u=d.getClientRects();else if(d.nodeType==3)u=textRange$1(d,0,d.nodeValue.length).getClientRects();else continue;for(let f=0;f<u.length;f++){let v=u[f];if(v.bottom>v.top+1&&(n=="up"?c.top-v.top>(v.bottom-c.top)*2:v.bottom-c.bottom>(c.bottom-v.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(o,e,n){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let s=a.parentOffset,l=!s,c=s==a.parent.content.size,d=o.domSelection();return d?!maybeRTL.test(a.parent.textContent)||!d.modify?n=="left"||n=="backward"?l:c:withFlushedState(o,e,()=>{let{focusNode:u,focusOffset:f,anchorNode:v,anchorOffset:b}=o.domSelectionRange(),k=d.caretBidiLevel;d.modify("move",n,"character");let x=a.depth?o.docView.domAfterPos(a.before()):o.dom,{focusNode:_,focusOffset:E}=o.domSelectionRange(),B=_&&!x.contains(_.nodeType==1?_:_.parentNode)||u==_&&f==E;try{d.collapse(v,b),u&&(u!=v||f!=b)&&d.extend&&d.extend(u,f)}catch{}return k!=null&&(d.caretBidiLevel=k),B}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(o,e,n){return cachedState==e&&cachedDir==n?cachedResult:(cachedState=e,cachedDir=n,cachedResult=n=="up"||n=="down"?endOfTextblockVertical(o,e,n):endOfTextblockHorizontal(o,e,n))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,n,a,s){this.parent=e,this.children=n,this.dom=a,this.contentDOM=s,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,a=this.posAtStart;;n++){let s=this.children[n];if(s==e)return a;a+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let l,c;if(e==this.contentDOM)l=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>domIndex$1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return s??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let a=!0,s=e;s;s=s.parentNode){let l=this.getDesc(s),c;if(l&&(!n||l.node))if(a&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))a=!1;else return l}}getDesc(e){let n=e.pmViewDesc;for(let a=n;a;a=a.parent)if(a==this)return n}posFromDOM(e,n,a){for(let s=e;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(e,n,a)}return-1}descAt(e){for(let n=0,a=0;n<this.children.length;n++){let s=this.children[n],l=a+s.size;if(a==e&&l!=a){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<l)return s.descAt(e-a-s.border);a=l}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,s=0;for(let l=0;a<this.children.length;a++){let c=this.children[a],d=l+c.size;if(d>e||c instanceof TrailingHackViewDesc){s=e-l;break}l=d}if(s)return this.children[a].domFromPos(s-this.children[a].border,n);for(let l;a&&!(l=this.children[a-1]).size&&l instanceof WidgetViewDesc&&l.side>=0;a--);if(n<=0){let l,c=!0;for(;l=a?this.children[a-1]:null,!(!l||l.dom.parentNode==this.contentDOM);a--,c=!1);return l&&n&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,n):{node:this.contentDOM,offset:l?domIndex$1(l.dom)+1:0}}else{let l,c=!0;for(;l=a<this.children.length?this.children[a]:null,!(!l||l.dom.parentNode==this.contentDOM);a++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,n):{node:this.contentDOM,offset:l?domIndex$1(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let c=a,d=0;;d++){let u=this.children[d],f=c+u.size;if(s==-1&&e<=f){let v=c+u.border;if(e>=v&&n<=f-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,v);e=c;for(let b=d;b>0;b--){let k=this.children[b-1];if(k.size&&k.dom.parentNode==this.contentDOM&&!k.emptyChildAt(1)){s=domIndex$1(k.dom)+1;break}e-=k.size}s==-1&&(s=0)}if(s>-1&&(f>n||d==this.children.length-1)){n=f;for(let v=d+1;v<this.children.length;v++){let b=this.children[v];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(-1)){l=domIndex$1(b.dom);break}n+=b.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=f}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:a}=this.domFromPos(e,0);if(n.nodeType!=1||a==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[a]}setSelection(e,n,a,s=!1){let l=Math.min(e,n),c=Math.max(e,n);for(let x=0,_=0;x<this.children.length;x++){let E=this.children[x],B=_+E.size;if(l>_&&c<B)return E.setSelection(e-_-E.border,n-_-E.border,a,s);_=B}let d=this.domFromPos(e,e?-1:1),u=n==e?d:this.domFromPos(n,n?-1:1),f=a.root.getSelection(),v=a.domSelectionRange(),b=!1;if((gecko$1||safari$1)&&e==n){let{node:x,offset:_}=d;if(x.nodeType==3){if(b=!!(_&&x.nodeValue[_-1]==`
`),b&&_==x.nodeValue.length)for(let E=x,B;E;E=E.parentNode){if(B=E.nextSibling){B.nodeName=="BR"&&(d=u={node:B.parentNode,offset:domIndex$1(B)+1});break}let M=E.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let E=x.childNodes[_-1];b=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(gecko$1&&v.focusNode&&v.focusNode!=u.node&&v.focusNode.nodeType==1){let x=v.focusNode.childNodes[v.focusOffset];x&&x.contentEditable=="false"&&(s=!0)}if(!(s||b&&safari$1)&&isEquivalentPosition$1(d.node,d.offset,v.anchorNode,v.anchorOffset)&&isEquivalentPosition$1(u.node,u.offset,v.focusNode,v.focusOffset))return;let k=!1;if((f.extend||e==n)&&!b){f.collapse(d.node,d.offset);try{e!=n&&f.extend(u.node,u.offset),k=!0}catch{}}if(!k){if(e>n){let _=d;d=u,u=_}let x=document.createRange();x.setEnd(u.node,u.offset),x.setStart(d.node,d.offset),f.removeAllRanges(),f.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let a=0,s=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(a==c?e<=c&&n>=a:e<c&&n>a){let d=a+l.border,u=c-l.border;if(e>=d&&n<=u){this.dirty=e==a||n==c?CONTENT_DIRTY:CHILD_DIRTY,e==d&&n==u&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=NODE_DIRTY:l.markDirty(e-d,n-d);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?CONTENT_DIRTY:NODE_DIRTY}a=c}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;n.dirty<a&&(n.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,n,a,s){let l,c=n.type.toDOM;if(typeof c=="function"&&(c=c(a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!n.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=n,this.widget=n,l=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,n,a,s){super(e,[],n,null),this.textDOM=a,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,n,a,s,l){super(e,[],a,s),this.mark=n,this.spec=l}static create(e,n,a,s){let l=s.nodeViews[n.type.name],c=l&&l(n,s,a);return(!c||!c.dom)&&(c=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,a),null,n.attrs)),new MarkViewDesc(e,n,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,n,a){let s=MarkViewDesc.create(this.parent,this.mark,!0,a),l=this.children,c=this.size;n<c&&(l=replaceNodes(l,n,c,a)),e>0&&(l=replaceNodes(l,0,e,a));for(let d=0;d<l.length;d++)l[d].parent=s;return s.children=l,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,n,a,s,l,c,d,u,f){super(e,[],l,c),this.node=n,this.outerDeco=a,this.innerDeco=s,this.nodeDOM=d}static create(e,n,a,s,l,c){let d=l.nodeViews[n.type.name],u,f=d&&d(n,l,()=>{if(!u)return c;if(u.parent)return u.parent.posBeforeChild(u)},a,s),v=f&&f.dom,b=f&&f.contentDOM;if(n.isText){if(!v)v=document.createTextNode(n.text);else if(v.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else v||({dom:v,contentDOM:b}=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!b&&!n.isText&&v.nodeName!="BR"&&(v.hasAttribute("contenteditable")||(v.contentEditable="false"),n.type.spec.draggable&&(v.draggable=!0));let k=v;return v=applyOuterDeco(v,a,n),f?u=new CustomNodeViewDesc(e,n,a,s,v,b||null,k,f,l,c+1):n.isText?new TextViewDesc(e,n,a,s,v,k,l):new NodeViewDesc(e,n,a,s,v,b||null,k,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let a=this.children[n];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,n,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(n,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let a=this.node.inlineContent,s=n,l=e.composing?this.localCompositionInfo(e,n):null,c=l&&l.pos>-1?l:null,d=l&&l.pos<0,u=new ViewTreeUpdater(this,c&&c.node,e);iterDeco(this.node,this.innerDeco,(f,v,b)=>{f.spec.marks?u.syncToMarks(f.spec.marks,a,e):f.type.side>=0&&!b&&u.syncToMarks(v==this.node.childCount?Mark.none:this.node.child(v).marks,a,e),u.placeWidget(f,e,s)},(f,v,b,k)=>{u.syncToMarks(f.marks,a,e);let x;u.findNodeMatch(f,v,b,k)||d&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(x=u.findIndexWithChild(l.node))>-1&&u.updateNodeAt(f,v,b,x,e)||u.updateNextNode(f,v,b,e,k,s)||u.addNode(f,v,b,e,s),s+=f.nodeSize}),u.syncToMarks([],a,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==CONTENT_DIRTY)&&(c&&this.protectLocalComposition(e,c),renderDescs(this.contentDOM,this.children,e),ios$1&&iosHacks(this.dom))}localCompositionInfo(e,n){let{from:a,to:s}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<n||s>n+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,d=findTextInFragment(this.node.content,c,a-n,s-n);return d<0?null:{node:l,pos:d,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:a,text:s}){if(this.getDesc(n))return;let l=n;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new CompositionViewDesc(this,l,n,s);e.input.compositionNodes.push(c),this.children=replaceNodes(this.children,a,a+s.length,e,c)}update(e,n,a,s){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,a,s),!0)}updateInner(e,n,a,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,n),computeOuterDeco(e,this.node,n)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(o,e,n,a,s){applyOuterDeco(a,e,o);let l=new NodeViewDesc(void 0,o,e,n,a,a,a,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class TextViewDesc extends NodeViewDesc{constructor(e,n,a,s,l,c,d){super(e,n,a,s,l,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,a,s){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,a){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,a){let s=this.node.cut(e,n),l=document.createTextNode(s.text);return new TextViewDesc(this.parent,s,this.outerDeco,this.innerDeco,l,l,a)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,n,a,s,l,c,d,u,f,v){super(e,n,a,s,l,c,d,f,v),this.spec=u}update(e,n,a,s){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,n,a);return l&&this.updateInner(e,n,a,s),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,a,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,a,s){this.spec.setSelection?this.spec.setSelection(e,n,a.root):super.setSelection(e,n,a,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(o,e,n){let a=o.firstChild,s=!1;for(let l=0;l<e.length;l++){let c=e[l],d=c.dom;if(d.parentNode==o){for(;d!=a;)a=rm(a),s=!0;a=a.nextSibling}else s=!0,o.insertBefore(d,a);if(c instanceof MarkViewDesc){let u=a?a.previousSibling:o.lastChild;renderDescs(c.contentDOM,c.children,n),a=u?u.nextSibling:o.firstChild}}for(;a;)a=rm(a),s=!0;s&&n.trackWrites==o&&(n.trackWrites=null)}const OuterDecoLevel=function(o){o&&(this.nodeName=o)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(o,e,n){if(o.length==0)return noDeco;let a=n?noDeco[0]:new OuterDecoLevel,s=[a];for(let l=0;l<o.length;l++){let c=o[l].type.attrs;if(c){c.nodeName&&s.push(a=new OuterDecoLevel(c.nodeName));for(let d in c){let u=c[d];u!=null&&(n&&s.length==1&&s.push(a=new OuterDecoLevel(e.isInline?"span":"div")),d=="class"?a.class=(a.class?a.class+" ":"")+u:d=="style"?a.style=(a.style?a.style+";":"")+u:d!="nodeName"&&(a[d]=u))}}}return s}function patchOuterDeco(o,e,n,a){if(n==noDeco&&a==noDeco)return e;let s=e;for(let l=0;l<a.length;l++){let c=a[l],d=n[l];if(l){let u;d&&d.nodeName==c.nodeName&&s!=o&&(u=s.parentNode)&&u.nodeName.toLowerCase()==c.nodeName||(u=document.createElement(c.nodeName),u.pmIsDeco=!0,u.appendChild(s),d=noDeco[0]),s=u}patchAttributes(s,d||noDeco[0],c)}return s}function patchAttributes(o,e,n){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in n)&&o.removeAttribute(a);for(let a in n)a!="class"&&a!="style"&&a!="nodeName"&&n[a]!=e[a]&&o.setAttribute(a,n[a]);if(e.class!=n.class){let a=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let l=0;l<a.length;l++)s.indexOf(a[l])==-1&&o.classList.remove(a[l]);for(let l=0;l<s.length;l++)a.indexOf(s[l])==-1&&o.classList.add(s[l]);o.classList.length==0&&o.removeAttribute("class")}if(e.style!=n.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=a.exec(e.style);)o.style.removeProperty(s[1])}n.style&&(o.style.cssText+=n.style)}}function applyOuterDeco(o,e,n){return patchOuterDeco(o,o,noDeco,computeOuterDeco(e,n,o.nodeType!=1))}function sameOuterDeco(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++)if(!o[n].type.eq(e[n].type))return!1;return!0}function rm(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ViewTreeUpdater{constructor(e,n,a){this.lock=n,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let a=e;a<n;a++)this.top.children[a].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,a){let s=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;s<c&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let f=this.top.children[u];if(f.matchesMark(e[l])&&!this.isLocked(f.dom)){d=u;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let u=MarkViewDesc.create(this.top,e[l],n,a);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,a,s){let l=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,n,a))l=this.top.children.indexOf(c,this.index);else for(let d=this.index,u=Math.min(this.top.children.length,d+5);d<u;d++){let f=this.top.children[d];if(f.matchesNode(e,n,a)&&!this.preMatch.matched.has(f)){l=d;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,n,a,s,l){let c=this.top.children[s];return c.dirty==NODE_DIRTY&&c.dom==c.contentDOM&&(c.dirty=CONTENT_DIRTY),c.update(e,n,a,l)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==a)return s}return-1}e=n}}updateNextNode(e,n,a,s,l,c){for(let d=this.index;d<this.top.children.length;d++){let u=this.top.children[d];if(u instanceof NodeViewDesc){let f=this.preMatch.matched.get(u);if(f!=null&&f!=l)return!1;let v=u.dom,b,k=this.isLocked(v)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=NODE_DIRTY&&sameOuterDeco(n,u.outerDeco));if(!k&&u.update(e,n,a,s))return this.destroyBetween(this.index,d),u.dom!=v&&(this.changed=!0),this.index++,!0;if(!k&&(b=this.recreateWrapper(u,e,n,a,s,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=b,b.contentDOM&&(b.dirty=CONTENT_DIRTY,b.updateChildren(s,c+1),b.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,a,s,l,c){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!sameOuterDeco(a,e.outerDeco)||!s.eq(e.innerDeco))return null;let d=NodeViewDesc.create(this.top,n,a,s,l,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let u of d.children)u.parent=d}return e.destroy(),d}addNode(e,n,a,s,l){let c=NodeViewDesc.create(this.top,e,n,a,s,l);c.contentDOM&&c.updateChildren(s,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,n,a){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let l=new WidgetViewDesc(this.top,e,n,a);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof MarkViewDesc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari$1||chrome$1)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let s=new TrailingHackViewDesc(this.top,[],a,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(o,e){let n=e,a=n.children.length,s=o.childCount,l=new Map,c=[];e:for(;s>0;){let d;for(;;)if(a){let f=n.children[a-1];if(f instanceof MarkViewDesc)n=f,a=f.children.length;else{d=f,a--;break}}else{if(n==e)break e;a=n.parent.children.indexOf(n),n=n.parent}let u=d.node;if(u){if(u!=o.child(s-1))break;--s,l.set(d,s),c.push(d)}}return{index:s,matched:l,matches:c.reverse()}}function compareSide(o,e){return o.type.side-e.type.side}function iterDeco(o,e,n,a){let s=e.locals(o),l=0;if(s.length==0){for(let f=0;f<o.childCount;f++){let v=o.child(f);a(v,s,e.forChild(l,v),f),l+=v.nodeSize}return}let c=0,d=[],u=null;for(let f=0;;){let v,b;for(;c<s.length&&s[c].to==l;){let B=s[c++];B.widget&&(v?(b||(b=[v])).push(B):v=B)}if(v)if(b){b.sort(compareSide);for(let B=0;B<b.length;B++)n(b[B],f,!!u)}else n(v,f,!!u);let k,x;if(u)x=-1,k=u,u=null;else if(f<o.childCount)x=f,k=o.child(f++);else break;for(let B=0;B<d.length;B++)d[B].to<=l&&d.splice(B--,1);for(;c<s.length&&s[c].from<=l&&s[c].to>l;)d.push(s[c++]);let _=l+k.nodeSize;if(k.isText){let B=_;c<s.length&&s[c].from<B&&(B=s[c].from);for(let M=0;M<d.length;M++)d[M].to<B&&(B=d[M].to);B<_&&(u=k.cut(B-l),k=k.cut(0,B-l),_=B,x=-1)}else for(;c<s.length&&s[c].to<_;)c++;let E=k.isInline&&!k.isLeaf?d.filter(B=>!B.inline):d.slice();a(k,E,e.forChild(l,k),x),l=_}}function iosHacks(o){if(o.nodeName=="UL"||o.nodeName=="OL"){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o).listStyle,o.style.cssText=e}}function findTextInFragment(o,e,n,a){for(let s=0,l=0;s<o.childCount&&l<=a;){let c=o.child(s++),d=l;if(l+=c.nodeSize,!c.isText)continue;let u=c.text;for(;s<o.childCount;){let f=o.child(s++);if(l+=f.nodeSize,!f.isText)break;u+=f.text}if(l>=n){if(l>=a&&u.slice(a-e.length-d,a-d)==e)return a-e.length;let f=d<a?u.lastIndexOf(e,a-d-1):-1;if(f>=0&&f+e.length+d>=n)return d+f;if(n==a&&u.length>=a+e.length-d&&u.slice(a-d,a-d+e.length)==e)return a}}return-1}function replaceNodes(o,e,n,a,s){let l=[];for(let c=0,d=0;c<o.length;c++){let u=o[c],f=d,v=d+=u.size;f>=n||v<=e?l.push(u):(f<e&&l.push(u.slice(0,e-f,a)),s&&(l.push(s),s=void 0),v>n&&l.push(u.slice(n-f,u.size,a)))}return l}function selectionFromDOM(o,e=null){let n=o.domSelectionRange(),a=o.state.doc;if(!n.focusNode)return null;let s=o.docView.nearestDesc(n.focusNode),l=s&&s.size==0,c=o.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(c<0)return null;let d=a.resolve(c),u,f;if(selectionCollapsed(n)){for(u=c;s&&!s.node;)s=s.parent;let b=s.node;if(s&&b.isAtom&&NodeSelection.isSelectable(b)&&s.parent&&!(b.isInline&&isOnEdge(n.focusNode,n.focusOffset,s.dom))){let k=s.posBefore;f=new NodeSelection(c==k?d:a.resolve(k))}}else{if(n instanceof o.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let b=c,k=c;for(let x=0;x<n.rangeCount;x++){let _=n.getRangeAt(x);b=Math.min(b,o.docView.posFromDOM(_.startContainer,_.startOffset,1)),k=Math.max(k,o.docView.posFromDOM(_.endContainer,_.endOffset,-1))}if(b<0)return null;[u,c]=k==o.state.selection.anchor?[k,b]:[b,k],d=a.resolve(c)}else u=o.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let v=a.resolve(u);if(!f){let b=e=="pointer"||o.state.selection.head<d.pos&&!l?1:-1;f=selectionBetween(o,v,d,b)}return f}function editorOwnsSelection(o){return o.editable?o.hasFocus():hasSelection$1(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function selectionToDOM(o,e=!1){let n=o.state.selection;if(syncNodeSelection(o,n),!!editorOwnsSelection(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&chrome$1){let a=o.domSelectionRange(),s=o.domObserver.currentSelection;if(a.anchorNode&&s.anchorNode&&isEquivalentPosition$1(a.anchorNode,a.anchorOffset,s.anchorNode,s.anchorOffset)){o.input.mouseDown.delayedSelectionSync=!0,o.domObserver.setCurSelection();return}}if(o.domObserver.disconnectSelection(),o.cursorWrapper)selectCursorWrapper(o);else{let{anchor:a,head:s}=n,l,c;brokenSelectBetweenUneditable&&!(n instanceof TextSelection)&&(n.$from.parent.inlineContent||(l=temporarilyEditableNear(o,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(c=temporarilyEditableNear(o,n.to))),o.docView.setSelection(a,s,o,e),brokenSelectBetweenUneditable&&(l&&resetEditable(l),c&&resetEditable(c)),n.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome$1&&chrome_version<63;function temporarilyEditableNear(o,e){let{node:n,offset:a}=o.docView.domFromPos(e,0),s=a<n.childNodes.length?n.childNodes[a]:null,l=a?n.childNodes[a-1]:null;if(safari$1&&s&&s.contentEditable=="false")return setEditable(s);if((!s||s.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(s)return setEditable(s);if(l)return setEditable(l)}}function setEditable(o){return o.contentEditable="true",safari$1&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function resetEditable(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function removeClassOnSelectionChange(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let n=o.domSelectionRange(),a=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(n.anchorNode!=a||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(o){let e=o.domSelection(),n=document.createRange();if(!e)return;let a=o.cursorWrapper.dom,s=a.nodeName=="IMG";s?n.setStart(a.parentNode,domIndex$1(a)+1):n.setStart(a,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!o.state.selection.visible&&ie$2&&ie_version<=11&&(a.disabled=!0,a.disabled=!1)}function syncNodeSelection(o,e){if(e instanceof NodeSelection){let n=o.docView.descAt(e.from);n!=o.lastSelectedViewDesc&&(clearNodeSelection(o),n&&n.selectNode(),o.lastSelectedViewDesc=n)}else clearNodeSelection(o)}function clearNodeSelection(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function selectionBetween(o,e,n,a){return o.someProp("createSelectionBetween",s=>s(o,e,n))||TextSelection.between(e,n,a)}function hasFocusAndSelection(o){return o.editable&&!o.hasFocus()?!1:hasSelection$1(o)}function hasSelection$1(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),n=o.domSelectionRange();return isEquivalentPosition$1(e.node,e.offset,n.anchorNode,n.anchorOffset)}function moveSelectionBlock(o,e){let{$anchor:n,$head:a}=o.selection,s=e>0?n.max(a):n.min(a),l=s.parent.inlineContent?s.depth?o.doc.resolve(e>0?s.after():s.before()):null:s;return l&&Selection.findFrom(l,e)}function apply(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(o,e,n){let a=o.state.selection;if(a instanceof TextSelection)if(n.indexOf("s")>-1){let{$head:s}=a,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=o.state.doc.resolve(s.pos+l.nodeSize*(e<0?-1:1));return apply(o,new TextSelection(a.$anchor,c))}else if(a.empty){if(o.endOfTextblock(e>0?"forward":"backward")){let s=moveSelectionBlock(o.state,e);return s&&s instanceof NodeSelection?apply(o,s):!1}else if(!(mac$2&&n.indexOf("m")>-1)){let s=a.$head,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!l||l.isText)return!1;let d=e<0?s.pos-l.nodeSize:s.pos;return l.isAtom||(c=o.docView.descAt(d))&&!c.contentDOM?NodeSelection.isSelectable(l)?apply(o,new NodeSelection(e<0?o.state.doc.resolve(s.pos-l.nodeSize):s)):webkit$1?apply(o,new TextSelection(o.state.doc.resolve(e<0?d:d+l.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(o,new TextSelection(e>0?a.$to:a.$from));{let s=moveSelectionBlock(o.state,e);return s?apply(o,s):!1}}}function nodeLen(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function isIgnorable(o,e){let n=o.pmViewDesc;return n&&n.size==0&&(e<0||o.nextSibling||o.nodeName!="BR")}function skipIgnoredNodes(o,e){return e<0?skipIgnoredNodesBefore(o):skipIgnoredNodesAfter(o)}function skipIgnoredNodesBefore(o){let e=o.domSelectionRange(),n=e.focusNode,a=e.focusOffset;if(!n)return;let s,l,c=!1;for(gecko$1&&n.nodeType==1&&a<nodeLen(n)&&isIgnorable(n.childNodes[a],-1)&&(c=!0);;)if(a>0){if(n.nodeType!=1)break;{let d=n.childNodes[a-1];if(isIgnorable(d,-1))s=n,l=--a;else if(d.nodeType==3)n=d,a=n.nodeValue.length;else break}}else{if(isBlockNode(n))break;{let d=n.previousSibling;for(;d&&isIgnorable(d,-1);)s=n.parentNode,l=domIndex$1(d),d=d.previousSibling;if(d)n=d,a=nodeLen(n);else{if(n=n.parentNode,n==o.dom)break;a=0}}}c?setSelFocus(o,n,a):s&&setSelFocus(o,s,l)}function skipIgnoredNodesAfter(o){let e=o.domSelectionRange(),n=e.focusNode,a=e.focusOffset;if(!n)return;let s=nodeLen(n),l,c;for(;;)if(a<s){if(n.nodeType!=1)break;let d=n.childNodes[a];if(isIgnorable(d,1))l=n,c=++a;else break}else{if(isBlockNode(n))break;{let d=n.nextSibling;for(;d&&isIgnorable(d,1);)l=d.parentNode,c=domIndex$1(d)+1,d=d.nextSibling;if(d)n=d,a=0,s=nodeLen(n);else{if(n=n.parentNode,n==o.dom)break;a=s=0}}}l&&setSelFocus(o,l,c)}function isBlockNode(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter$2(o,e){for(;o&&e==o.childNodes.length&&!hasBlockDesc(o);)e=domIndex$1(o)+1,o=o.parentNode;for(;o&&e<o.childNodes.length;){let n=o.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;o=n,e=0}}function textNodeBefore$2(o,e){for(;o&&!e&&!hasBlockDesc(o);)e=domIndex$1(o),o=o.parentNode;for(;o&&e;){let n=o.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;o=n,e=o.childNodes.length}}function setSelFocus(o,e,n){if(e.nodeType!=3){let l,c;(c=textNodeAfter$2(e,n))?(e=c,n=0):(l=textNodeBefore$2(e,n))&&(e=l,n=l.nodeValue.length)}let a=o.domSelection();if(!a)return;if(selectionCollapsed(a)){let l=document.createRange();l.setEnd(e,n),l.setStart(e,n),a.removeAllRanges(),a.addRange(l)}else a.extend&&a.extend(e,n);o.domObserver.setCurSelection();let{state:s}=o;setTimeout(()=>{o.state==s&&selectionToDOM(o)},50)}function findDirection(o,e){let n=o.state.doc.resolve(e);if(!(chrome$1||windows)&&n.parent.inlineContent){let a=o.coordsAtPos(e);if(e>n.start()){let s=o.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(s.left-a.left)>1)return s.left<a.left?"ltr":"rtl"}if(e<n.end()){let s=o.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(s.left-a.left)>1)return s.left>a.left?"ltr":"rtl"}}return getComputedStyle(o.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(o,e,n){let a=o.state.selection;if(a instanceof TextSelection&&!a.empty||n.indexOf("s")>-1||mac$2&&n.indexOf("m")>-1)return!1;let{$from:s,$to:l}=a;if(!s.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let c=moveSelectionBlock(o.state,e);if(c&&c instanceof NodeSelection)return apply(o,c)}if(!s.parent.inlineContent){let c=e<0?s:l,d=a instanceof AllSelection?Selection.near(c,e):Selection.findFrom(c,e);return d?apply(o,d):!1}return!1}function stopNativeHorizontalDelete(o,e){if(!(o.state.selection instanceof TextSelection))return!0;let{$head:n,$anchor:a,empty:s}=o.state.selection;if(!n.sameParent(a))return!0;if(!s)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(l&&!l.isText){let c=o.state.tr;return e<0?c.delete(n.pos-l.nodeSize,n.pos):c.delete(n.pos,n.pos+l.nodeSize),o.dispatch(c),!0}return!1}function switchEditable(o,e,n){o.domObserver.stop(),e.contentEditable=n,o.domObserver.start()}function safariDownArrowBug(o){if(!safari$1||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=o.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(o,a,"true"),setTimeout(()=>switchEditable(o,a,"false"),20)}return!1}function getMods(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}function captureKeyDown(o,e){let n=e.keyCode,a=getMods(e);if(n==8||mac$2&&n==72&&a=="c")return stopNativeHorizontalDelete(o,-1)||skipIgnoredNodes(o,-1);if(n==46&&!e.shiftKey||mac$2&&n==68&&a=="c")return stopNativeHorizontalDelete(o,1)||skipIgnoredNodes(o,1);if(n==13||n==27)return!0;if(n==37||mac$2&&n==66&&a=="c"){let s=n==37?findDirection(o,o.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(o,s,a)||skipIgnoredNodes(o,s)}else if(n==39||mac$2&&n==70&&a=="c"){let s=n==39?findDirection(o,o.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(o,s,a)||skipIgnoredNodes(o,s)}else{if(n==38||mac$2&&n==80&&a=="c")return selectVertically(o,-1,a)||skipIgnoredNodes(o,-1);if(n==40||mac$2&&n==78&&a=="c")return safariDownArrowBug(o)||selectVertically(o,1,a)||skipIgnoredNodes(o,1);if(a==(mac$2?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function serializeForClipboard(o,e){o.someProp("transformCopied",x=>{e=x(e,o)});let n=[],{content:a,openStart:s,openEnd:l}=e;for(;s>1&&l>1&&a.childCount==1&&a.firstChild.childCount==1;){s--,l--;let x=a.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),a=x.content}let c=o.someProp("clipboardSerializer")||DOMSerializer.fromSchema(o.state.schema),d=detachedDoc(),u=d.createElement("div");u.appendChild(c.serializeFragment(a,{document:d}));let f=u.firstChild,v,b=0;for(;f&&f.nodeType==1&&(v=wrapMap[f.nodeName.toLowerCase()]);){for(let x=v.length-1;x>=0;x--){let _=d.createElement(v[x]);for(;u.firstChild;)_.appendChild(u.firstChild);u.appendChild(_),b++}f=u.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${l}${b?` -${b}`:""} ${JSON.stringify(n)}`);let k=o.someProp("clipboardTextSerializer",x=>x(e,o))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:k,slice:e}}function parseFromClipboard(o,e,n,a,s){let l=s.parent.type.spec.code,c,d;if(!n&&!e)return null;let u=e&&(a||l||!n);if(u){if(o.someProp("transformPastedText",k=>{e=k(e,l||a,o)}),l)return e?new Slice(Fragment.from(o.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let b=o.someProp("clipboardTextParser",k=>k(e,s,a,o));if(b)d=b;else{let k=s.marks(),{schema:x}=o.state,_=DOMSerializer.fromSchema(x);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let B=c.appendChild(document.createElement("p"));E&&B.appendChild(_.serializeNode(x.text(E,k)))})}}else o.someProp("transformPastedHTML",b=>{n=b(n,o)}),c=readHTML(n),webkit$1&&restoreReplacedSpaces(c);let f=c&&c.querySelector("[data-pm-slice]"),v=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(v&&v[3])for(let b=+v[3];b>0;b--){let k=c.firstChild;for(;k&&k.nodeType!=1;)k=k.nextSibling;if(!k)break;c=k}if(d||(d=(o.someProp("clipboardParser")||o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema)).parseSlice(c,{preserveWhitespace:!!(u||v),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!inlineParents.test(b.parentNode.nodeName)?{ignore:!0}:null}})),v)d=addContext(closeSlice(d,+v[1],+v[2]),v[4]);else if(d=Slice.maxOpen(normalizeSiblings(d.content,s),!0),d.openStart||d.openEnd){let b=0,k=0;for(let x=d.content.firstChild;b<d.openStart&&!x.type.spec.isolating;b++,x=x.firstChild);for(let x=d.content.lastChild;k<d.openEnd&&!x.type.spec.isolating;k++,x=x.lastChild);d=closeSlice(d,b,k)}return o.someProp("transformPasted",b=>{d=b(d,o)}),d}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(o,e){if(o.childCount<2)return o;for(let n=e.depth;n>=0;n--){let a=e.node(n).contentMatchAt(e.index(n)),s,l=[];if(o.forEach(c=>{if(!l)return;let d=a.findWrapping(c.type),u;if(!d)return l=null;if(u=l.length&&s.length&&addToSibling(d,s,c,l[l.length-1],0))l[l.length-1]=u;else{l.length&&(l[l.length-1]=closeRight(l[l.length-1],s.length));let f=withWrappers(c,d);l.push(f),a=a.matchType(f.type),s=d}}),l)return Fragment.from(l)}return o}function withWrappers(o,e,n=0){for(let a=e.length-1;a>=n;a--)o=e[a].create(null,Fragment.from(o));return o}function addToSibling(o,e,n,a,s){if(s<o.length&&s<e.length&&o[s]==e[s]){let l=addToSibling(o,e,n,a.lastChild,s+1);if(l)return a.copy(a.content.replaceChild(a.childCount-1,l));if(a.contentMatchAt(a.childCount).matchType(s==o.length-1?n.type:o[s+1]))return a.copy(a.content.append(Fragment.from(withWrappers(n,o,s+1))))}}function closeRight(o,e){if(e==0)return o;let n=o.content.replaceChild(o.childCount-1,closeRight(o.lastChild,e-1)),a=o.contentMatchAt(o.childCount).fillBefore(Fragment.empty,!0);return o.copy(n.append(a))}function closeRange(o,e,n,a,s,l){let c=e<0?o.firstChild:o.lastChild,d=c.content;return o.childCount>1&&(l=0),s<a-1&&(d=closeRange(d,e,n,a,s+1,l)),s>=n&&(d=e<0?c.contentMatchAt(0).fillBefore(d,l<=s).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(Fragment.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,c.copy(d))}function closeSlice(o,e,n){return e<o.openStart&&(o=new Slice(closeRange(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),n<o.openEnd&&(o=new Slice(closeRange(o.content,1,n,o.openEnd,0,0),o.openStart,n)),o}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(o){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_policy.createHTML(o)):o}function readHTML(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let n=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(o),s;if((s=a&&wrapMap[a[1].toLowerCase()])&&(o=s.map(l=>"<"+l+">").join("")+o+s.map(l=>"</"+l+">").reverse().join("")),n.innerHTML=maybeWrapTrusted(o),s)for(let l=0;l<s.length;l++)n=n.querySelector(s[l])||n;return n}function restoreReplacedSpaces(o){let e=o.querySelectorAll(chrome$1?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let a=e[n];a.childNodes.length==1&&a.textContent=="\xA0"&&a.parentNode&&a.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),a)}}function addContext(o,e){if(!o.size)return o;let n=o.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return o}let{content:s,openStart:l,openEnd:c}=o;for(let d=a.length-2;d>=0;d-=2){let u=n.nodes[a[d]];if(!u||u.hasRequiredAttrs())break;s=Fragment.from(u.create(a[d+1],s)),l++,c++}return new Slice(s,l,c)}const handlers$1={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};let InputState$1=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function initInput(o){for(let e in handlers$1){let n=handlers$1[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=a=>{eventBelongsToView(o,a)&&!runCustomHandler(o,a)&&(o.editable||!(a.type in editHandlers))&&n(o,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari$1&&o.dom.addEventListener("input",()=>null),ensureListeners(o)}function setSelectionOrigin(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function destroyInput(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}function ensureListeners(o){o.someProp("handleDOMEvents",e=>{for(let n in e)o.input.eventHandlers[n]||o.dom.addEventListener(n,o.input.eventHandlers[n]=a=>runCustomHandler(o,a))})}function runCustomHandler(o,e){return o.someProp("handleDOMEvents",n=>{let a=n[e.type];return a?a(o,e)||e.defaultPrevented:!1})}function eventBelongsToView(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=o.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(o,e){!runCustomHandler(o,e)&&handlers$1[e.type]&&(o.editable||!(e.type in editHandlers))&&handlers$1[e.type](o,e)}editHandlers.keydown=(o,e)=>{let n=e;if(o.input.shiftKey=n.keyCode==16||n.shiftKey,!inOrNearComposition(o,n)&&(o.input.lastKeyCode=n.keyCode,o.input.lastKeyCodeTime=Date.now(),!(android$1&&chrome$1&&n.keyCode==13)))if(n.keyCode!=229&&o.domObserver.forceFlush(),ios$1&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let a=Date.now();o.input.lastIOSEnter=a,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==a&&(o.someProp("handleKeyDown",s=>s(o,keyEvent(13,"Enter"))),o.input.lastIOSEnter=0)},200)}else o.someProp("handleKeyDown",a=>a(o,n))||captureKeyDown(o,n)?n.preventDefault():setSelectionOrigin(o,"key")},editHandlers.keyup=(o,e)=>{e.keyCode==16&&(o.input.shiftKey=!1)},editHandlers.keypress=(o,e)=>{let n=e;if(inOrNearComposition(o,n)||!n.charCode||n.ctrlKey&&!n.altKey||mac$2&&n.metaKey)return;if(o.someProp("handleKeyPress",s=>s(o,n))){n.preventDefault();return}let a=o.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!o.someProp("handleTextInput",l=>l(o,a.$from.pos,a.$to.pos,s))&&o.dispatch(o.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function eventCoords(o){return{left:o.clientX,top:o.clientY}}function isNear(o,e){let n=e.x-o.clientX,a=e.y-o.clientY;return n*n+a*a<100}function runHandlerOnContext(o,e,n,a,s){if(a==-1)return!1;let l=o.state.doc.resolve(a);for(let c=l.depth+1;c>0;c--)if(o.someProp(e,d=>c>l.depth?d(o,n,l.nodeAfter,l.before(c),s,!0):d(o,n,l.node(c),l.before(c),s,!1)))return!0;return!1}function updateSelection(o,e,n){if(o.focused||o.focus(),o.state.selection.eq(e))return;let a=o.state.tr.setSelection(e);a.setMeta("pointer",!0),o.dispatch(a)}function selectClickedLeaf(o,e){if(e==-1)return!1;let n=o.state.doc.resolve(e),a=n.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(o,new NodeSelection(n)),!0):!1}function selectClickedNode(o,e){if(e==-1)return!1;let n=o.state.selection,a,s;n instanceof NodeSelection&&(a=n.node);let l=o.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let d=c>l.depth?l.nodeAfter:l.node(c);if(NodeSelection.isSelectable(d)){a&&n.$from.depth>0&&c>=n.$from.depth&&l.before(n.$from.depth+1)==n.$from.pos?s=l.before(n.$from.depth):s=l.before(c);break}}return s!=null?(updateSelection(o,NodeSelection.create(o.state.doc,s)),!0):!1}function handleSingleClick(o,e,n,a,s){return runHandlerOnContext(o,"handleClickOn",e,n,a)||o.someProp("handleClick",l=>l(o,e,a))||(s?selectClickedNode(o,n):selectClickedLeaf(o,n))}function handleDoubleClick(o,e,n,a){return runHandlerOnContext(o,"handleDoubleClickOn",e,n,a)||o.someProp("handleDoubleClick",s=>s(o,e,a))}function handleTripleClick(o,e,n,a){return runHandlerOnContext(o,"handleTripleClickOn",e,n,a)||o.someProp("handleTripleClick",s=>s(o,e,a))||defaultTripleClick(o,n,a)}function defaultTripleClick(o,e,n){if(n.button!=0)return!1;let a=o.state.doc;if(e==-1)return a.inlineContent?(updateSelection(o,TextSelection.create(a,0,a.content.size)),!0):!1;let s=a.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l),d=s.before(l);if(c.inlineContent)updateSelection(o,TextSelection.create(a,d+1,d+1+c.content.size));else if(NodeSelection.isSelectable(c))updateSelection(o,NodeSelection.create(a,d));else continue;return!0}}function forceDOMFlush(o){return endComposition(o)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers$1.mousedown=(o,e)=>{let n=e;o.input.shiftKey=n.shiftKey;let a=forceDOMFlush(o),s=Date.now(),l="singleClick";s-o.input.lastClick.time<500&&isNear(n,o.input.lastClick)&&!n[selectNodeModifier]&&(o.input.lastClick.type=="singleClick"?l="doubleClick":o.input.lastClick.type=="doubleClick"&&(l="tripleClick")),o.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:l};let c=o.posAtCoords(eventCoords(n));c&&(l=="singleClick"?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new MouseDown(o,c,n,!!a)):(l=="doubleClick"?handleDoubleClick:handleTripleClick)(o,c.pos,c.inside,n)?n.preventDefault():setSelectionOrigin(o,"pointer"))};class MouseDown{constructor(e,n,a,s){this.view=e,this.pos=n,this.event=a,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let l,c;if(n.inside>-1)l=e.state.doc.nodeAt(n.inside),c=n.inside;else{let v=e.state.doc.resolve(n.pos);l=v.parent,c=v.depth?v.before():0}const d=s?null:a.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:f}=e.state;(a.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||f instanceof NodeSelection&&f.from<=c&&f.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko$1&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!n?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome$1&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers$1.touchstart=o=>{o.input.lastTouch=Date.now(),forceDOMFlush(o),setSelectionOrigin(o,"pointer")},handlers$1.touchmove=o=>{o.input.lastTouch=Date.now(),setSelectionOrigin(o,"pointer")},handlers$1.contextmenu=o=>forceDOMFlush(o);function inOrNearComposition(o,e){return o.composing?!0:safari$1&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500?(o.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android$1?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,n=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)))o.markCursor=o.state.storedMarks||n.marks(),endComposition(o,!0),o.markCursor=null;else if(endComposition(o,!e.selection.empty),gecko$1&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let a=o.domSelectionRange();for(let s=a.focusNode,l=a.focusOffset;s&&s.nodeType==1&&l!=0;){let c=l<0?s.lastChild:s.childNodes[l-1];if(!c)break;if(c.nodeType==3){let d=o.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else s=c,l=-1}}o.input.composing=!0}scheduleComposeEnd(o,timeoutComposition)},editHandlers.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,o.input.compositionPendingChanges=o.domObserver.pendingRecords().length?o.input.compositionID:0,o.input.compositionNode=null,o.input.compositionPendingChanges&&Promise.resolve().then(()=>o.domObserver.flush()),o.input.compositionID++,scheduleComposeEnd(o,20))};function scheduleComposeEnd(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>endComposition(o),e))}function clearComposition(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=timestampFromCustomEvent());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode$1(o){let e=o.domSelectionRange();if(!e.focusNode)return null;let n=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(n&&a&&n!=a){let s=a.pmViewDesc,l=o.domObserver.lastChangedTextNode;if(n==l||a==l)return l;if(!s||!s.isText(a.nodeValue))return a;if(o.input.compositionNode==a){let c=n.pmViewDesc;if(!(!c||!c.isText(n.nodeValue)))return a}}return n||a}function timestampFromCustomEvent(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}function endComposition(o,e=!1){if(!(android$1&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),clearComposition(o),e||o.docView&&o.docView.dirty){let n=selectionFromDOM(o);return n&&!n.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(n)):(o.markCursor||e)&&!o.state.selection.empty?o.dispatch(o.state.tr.deleteSelection()):o.updateState(o.state),!0}return!1}}function captureCopy$1(o,e){if(!o.dom.parentNode)return;let n=o.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),s=document.createRange();s.selectNodeContents(e),o.dom.blur(),a.removeAllRanges(),a.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),o.focus()},50)}const brokenClipboardAPI$1=ie$2&&ie_version<15||ios$1&&webkit_version<604;handlers$1.copy=editHandlers.cut=(o,e)=>{let n=e,a=o.state.selection,s=n.type=="cut";if(a.empty)return;let l=brokenClipboardAPI$1?null:n.clipboardData,c=a.content(),{dom:d,text:u}=serializeForClipboard(o,c);l?(n.preventDefault(),l.clearData(),l.setData("text/html",d.innerHTML),l.setData("text/plain",u)):captureCopy$1(o,d),s&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(o){return o.openStart==0&&o.openEnd==0&&o.content.childCount==1?o.content.firstChild:null}function capturePaste$1(o,e){if(!o.dom.parentNode)return;let n=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,a=o.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let s=o.input.shiftKey&&o.input.lastKeyCode!=45;setTimeout(()=>{o.focus(),a.parentNode&&a.parentNode.removeChild(a),n?doPaste$1(o,a.value,null,s,e):doPaste$1(o,a.textContent,a.innerHTML,s,e)},50)}function doPaste$1(o,e,n,a,s){let l=parseFromClipboard(o,e,n,a,o.state.selection.$from);if(o.someProp("handlePaste",u=>u(o,s,l||Slice.empty)))return!0;if(!l)return!1;let c=sliceSingleNode(l),d=c?o.state.tr.replaceSelectionWith(c,a):o.state.tr.replaceSelection(l);return o.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText(o){let e=o.getData("text/plain")||o.getData("Text");if(e)return e;let n=o.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}editHandlers.paste=(o,e)=>{let n=e;if(o.composing&&!android$1)return;let a=brokenClipboardAPI$1?null:n.clipboardData,s=o.input.shiftKey&&o.input.lastKeyCode!=45;a&&doPaste$1(o,getText(a),a.getData("text/html"),s,n)?n.preventDefault():capturePaste$1(o,n)};class Dragging{constructor(e,n,a){this.slice=e,this.move=n,this.node=a}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers$1.dragstart=(o,e)=>{let n=e,a=o.input.mouseDown;if(a&&a.done(),!n.dataTransfer)return;let s=o.state.selection,l=s.empty?null:o.posAtCoords(eventCoords(n)),c;if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof NodeSelection?s.to-1:s.to))){if(a&&a.mightDrag)c=NodeSelection.create(o.state.doc,a.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let b=o.docView.nearestDesc(n.target,!0);b&&b.node.type.spec.draggable&&b!=o.docView&&(c=NodeSelection.create(o.state.doc,b.posBefore))}}let d=(c||o.state.selection).content(),{dom:u,text:f,slice:v}=serializeForClipboard(o,d);(!n.dataTransfer.files.length||!chrome$1||chrome_version>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(brokenClipboardAPI$1?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI$1||n.dataTransfer.setData("text/plain",f),o.dragging=new Dragging(v,!n[dragCopyModifier],c)},handlers$1.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)},editHandlers.dragover=editHandlers.dragenter=(o,e)=>e.preventDefault(),editHandlers.drop=(o,e)=>{let n=e,a=o.dragging;if(o.dragging=null,!n.dataTransfer)return;let s=o.posAtCoords(eventCoords(n));if(!s)return;let l=o.state.doc.resolve(s.pos),c=a&&a.slice;c?o.someProp("transformPasted",_=>{c=_(c,o)}):c=parseFromClipboard(o,getText(n.dataTransfer),brokenClipboardAPI$1?null:n.dataTransfer.getData("text/html"),!1,l);let d=!!(a&&!n[dragCopyModifier]);if(o.someProp("handleDrop",_=>_(o,n,c||Slice.empty,d))){n.preventDefault();return}if(!c)return;n.preventDefault();let u=c?dropPoint(o.state.doc,l.pos,c):l.pos;u==null&&(u=l.pos);let f=o.state.tr;if(d){let{node:_}=a;_?_.replace(f):f.deleteSelection()}let v=f.mapping.map(u),b=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,k=f.doc;if(b?f.replaceRangeWith(v,v,c.content.firstChild):f.replaceRange(v,v,c),f.doc.eq(k))return;let x=f.doc.resolve(v);if(b&&NodeSelection.isSelectable(c.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(c.content.firstChild))f.setSelection(new NodeSelection(x));else{let _=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((E,B,M,I)=>_=I),f.setSelection(selectionBetween(o,x,f.doc.resolve(_)))}o.focus(),o.dispatch(f.setMeta("uiEvent","drop"))},handlers$1.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&selectionToDOM(o)},20))},handlers$1.blur=(o,e)=>{let n=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),n.relatedTarget&&o.dom.contains(n.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)},handlers$1.beforeinput=(o,e)=>{if(chrome$1&&android$1&&e.inputType=="deleteContentBackward"){o.domObserver.flushSoon();let{domChangeCount:n}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=n||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",s=>s(o,keyEvent(8,"Backspace")))))return;let{$cursor:a}=o.state.selection;a&&a.pos>0&&o.dispatch(o.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let o in editHandlers)handlers$1[o]=editHandlers[o];function compareObjs(o,e){if(o==e)return!0;for(let n in o)if(o[n]!==e[n])return!1;for(let n in e)if(!(n in o))return!1;return!0}let WidgetType$1=class hr{constructor(e,n){this.toDOM=e,this.spec=n||noSpec,this.side=this.spec.side||0}map(e,n,a,s){let{pos:l,deleted:c}=e.mapResult(n.from+s,this.side<0?-1:1);return c?null:new Decoration$1(l-a,l-a,this)}valid(){return!0}eq(e){return this==e||e instanceof hr&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}};class InlineType{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,a,s){let l=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-a,c=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-a;return l>=c?null:new Decoration$1(l,c,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}let NodeType$1=class mr{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,a,s){let l=e.mapResult(n.from+s,1);if(l.deleted)return null;let c=e.mapResult(n.to+s,-1);return c.deleted||c.pos<=l.pos?null:new Decoration$1(l.pos-a,c.pos-a,this)}valid(e,n){let{index:a,offset:s}=e.content.findIndex(n.from),l;return s==n.from&&!(l=e.child(a)).isText&&s+l.nodeSize==n.to}eq(e){return this==e||e instanceof mr&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}},Decoration$1=class rr{constructor(e,n,a){this.from=e,this.to=n,this.type=a}copy(e,n){return new rr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,a){return this.type.map(e,this,n,a)}static widget(e,n,a){return new rr(e,e,new WidgetType$1(n,a))}static inline(e,n,a,s){return new rr(e,n,new InlineType(a,s))}static node(e,n,a,s){return new rr(e,n,new NodeType$1(a,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType$1}};const none$2=[],noSpec={};class DecorationSet{constructor(e,n){this.local=e.length?e:none$2,this.children=n.length?n:none$2}static create(e,n){return n.length?buildTree$2(n,e,0,noSpec):empty}find(e,n,a){let s=[];return this.findInner(e??0,n??1e9,s,0,a),s}findInner(e,n,a,s,l){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=n&&d.to>=e&&(!l||l(d.spec))&&a.push(d.copy(d.from+s,d.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<n&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,n-d,a,s+d,l)}}map(e,n,a){return this==empty||e.maps.length==0?this:this.mapInner(e,n,0,0,a||noSpec)}mapInner(e,n,a,s,l){let c;for(let d=0;d<this.local.length;d++){let u=this.local[d].map(e,a,s);u&&u.type.valid(n,u)?(c||(c=[])).push(u):l.onRemove&&l.onRemove(this.local[d].spec)}return this.children.length?mapChildren(this.children,c||[],e,n,a,s,l):c?new DecorationSet(c.sort(byPos),none$2):empty}add(e,n){return n.length?this==empty?DecorationSet.create(e,n):this.addInner(e,n,0):this}addInner(e,n,a){let s,l=0;e.forEach((d,u)=>{let f=u+a,v;if(v=takeSpansForNode(n,d,f)){for(s||(s=this.children.slice());l<s.length&&s[l]<u;)l+=3;s[l]==u?s[l+2]=s[l+2].addInner(d,v,f+1):s.splice(l,0,u,u+d.nodeSize,buildTree$2(v,d,f+1,noSpec)),l+=3}});let c=moveSpans(l?withoutNulls(n):n,-a);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new DecorationSet(c.length?this.local.concat(c).sort(byPos):this.local,s||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,n){let a=this.children,s=this.local;for(let l=0;l<a.length;l+=3){let c,d=a[l]+n,u=a[l+1]+n;for(let v=0,b;v<e.length;v++)(b=e[v])&&b.from>d&&b.to<u&&(e[v]=null,(c||(c=[])).push(b));if(!c)continue;a==this.children&&(a=this.children.slice());let f=a[l+2].removeInner(c,d+1);f!=empty?a[l+2]=f:(a.splice(l,3),l-=3)}if(s.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let d=0;d<s.length;d++)s[d].eq(c,n)&&(s==this.local&&(s=this.local.slice()),s.splice(d--,1))}return a==this.children&&s==this.local?this:s.length||a.length?new DecorationSet(s,a):empty}forChild(e,n){if(this==empty)return this;if(n.isLeaf)return DecorationSet.empty;let a,s;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(a=this.children[d+2]);break}let l=e+1,c=l+n.content.size;for(let d=0;d<this.local.length;d++){let u=this.local[d];if(u.from<c&&u.to>l&&u.type instanceof InlineType){let f=Math.max(l,u.from)-l,v=Math.min(c,u.to)-l;f<v&&(s||(s=[])).push(u.copy(f,v))}}if(s){let d=new DecorationSet(s.sort(byPos),none$2);return a?new DecorationGroup([d,a]):d}return a||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none$2;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let n=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||n.push(this.local[a]);return n}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,n){const a=this.members.map(s=>s.map(e,n,noSpec));return DecorationGroup.from(a)}forChild(e,n){if(n.isLeaf)return DecorationSet.empty;let a=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(e,n);l!=empty&&(l instanceof DecorationGroup?a=a.concat(l.members):a.push(l))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,a=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(e);if(l.length)if(!n)n=l;else{a&&(n=n.slice(),a=!1);for(let c=0;c<l.length;c++)n.push(l[c])}}return n?removeOverlap(a?n:n.sort(byPos)):none$2}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(n=>n instanceof DecorationSet)?e:e.reduce((n,a)=>n.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function mapChildren(o,e,n,a,s,l,c){let d=o.slice();for(let f=0,v=l;f<n.maps.length;f++){let b=0;n.maps[f].forEach((k,x,_,E)=>{let B=E-_-(x-k);for(let M=0;M<d.length;M+=3){let I=d[M+1];if(I<0||k>I+v-b)continue;let F=d[M]+v-b;x>=F?d[M+1]=k<=F?-2:-1:k>=v&&B&&(d[M]+=B,d[M+1]+=B)}b+=B}),v=n.maps[f].map(v,-1)}let u=!1;for(let f=0;f<d.length;f+=3)if(d[f+1]<0){if(d[f+1]==-2){u=!0,d[f+1]=-1;continue}let v=n.map(o[f]+l),b=v-s;if(b<0||b>=a.content.size){u=!0;continue}let k=n.map(o[f+1]+l,-1),x=k-s,{index:_,offset:E}=a.content.findIndex(b),B=a.maybeChild(_);if(B&&E==b&&E+B.nodeSize==x){let M=d[f+2].mapInner(n,B,v+1,o[f]+l+1,c);M!=empty?(d[f]=b,d[f+1]=x,d[f+2]=M):(d[f+1]=-2,u=!0)}else u=!0}if(u){let f=mapAndGatherRemainingDecorations(d,o,e,n,s,l,c),v=buildTree$2(f,a,0,c);e=v.local;for(let b=0;b<d.length;b+=3)d[b+1]<0&&(d.splice(b,3),b-=3);for(let b=0,k=0;b<v.children.length;b+=3){let x=v.children[b];for(;k<d.length&&d[k]<x;)k+=3;d.splice(k,0,v.children[b],v.children[b+1],v.children[b+2])}}return new DecorationSet(e.sort(byPos),d)}function moveSpans(o,e){if(!e||!o.length)return o;let n=[];for(let a=0;a<o.length;a++){let s=o[a];n.push(new Decoration$1(s.from+e,s.to+e,s.type))}return n}function mapAndGatherRemainingDecorations(o,e,n,a,s,l,c){function d(u,f){for(let v=0;v<u.local.length;v++){let b=u.local[v].map(a,s,f);b?n.push(b):c.onRemove&&c.onRemove(u.local[v].spec)}for(let v=0;v<u.children.length;v+=3)d(u.children[v+2],u.children[v]+f+1)}for(let u=0;u<o.length;u+=3)o[u+1]==-1&&d(o[u+2],e[u]+l+1);return n}function takeSpansForNode(o,e,n){if(e.isLeaf)return null;let a=n+e.nodeSize,s=null;for(let l=0,c;l<o.length;l++)(c=o[l])&&c.from>n&&c.to<a&&((s||(s=[])).push(c),o[l]=null);return s}function withoutNulls(o){let e=[];for(let n=0;n<o.length;n++)o[n]!=null&&e.push(o[n]);return e}function buildTree$2(o,e,n,a){let s=[],l=!1;e.forEach((d,u)=>{let f=takeSpansForNode(o,d,u+n);if(f){l=!0;let v=buildTree$2(f,d,n+u+1,a);v!=empty&&s.push(u,u+d.nodeSize,v)}});let c=moveSpans(l?withoutNulls(o):o,-n).sort(byPos);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(a.onRemove&&a.onRemove(c[d].spec),c.splice(d--,1));return c.length||s.length?new DecorationSet(c,s):empty}function byPos(o,e){return o.from-e.from||o.to-e.to}function removeOverlap(o){let e=o;for(let n=0;n<e.length-1;n++){let a=e[n];if(a.from!=a.to)for(let s=n+1;s<e.length;s++){let l=e[s];if(l.from==a.from){l.to!=a.to&&(e==o&&(e=o.slice()),e[s]=l.copy(l.from,a.to),insertAhead(e,s+1,l.copy(a.to,l.to)));continue}else{l.from<a.to&&(e==o&&(e=o.slice()),e[n]=a.copy(a.from,l.from),insertAhead(e,s,a.copy(l.from,a.to)));break}}}return e}function insertAhead(o,e,n){for(;e<o.length&&byPos(n,o[e])>0;)e++;o.splice(e,0,n)}function viewDecorations(o){let e=[];return o.someProp("decorations",n=>{let a=n(o.state);a&&a!=empty&&e.push(a)}),o.cursorWrapper&&e.push(DecorationSet.create(o.state.doc,[o.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions$1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData$1=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}let DOMObserver$1=class{constructor(o,e){this.view=o,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let a=0;a<n.length;a++)this.queue.push(n[a]);ie$2&&ie_version<=11&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData$1&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions$1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let o=this.observer.takeRecords();if(o.length){for(let e=0;e<o.length;e++)this.queue.push(o[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let o=this.view.domSelectionRange();if(o.focusNode&&isEquivalentPosition$1(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(o){if(!o.focusNode)return!0;let e=new Set,n;for(let s=o.focusNode;s;s=parentNode(s))e.add(s);for(let s=o.anchorNode;s;s=parentNode(s))if(e.has(s)){n=s;break}let a=n&&this.view.docView.nearestDesc(n);if(a&&a.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let o of this.observer.takeRecords())this.queue.push(o);return this.queue}flush(){let{view:o}=this;if(!o.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let n=o.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&hasFocusAndSelection(o)&&!this.ignoreSelectionChange(n),s=-1,l=-1,c=!1,d=[];if(o.editable)for(let f=0;f<e.length;f++){let v=this.registerMutation(e[f],d);v&&(s=s<0?v.from:Math.min(v.from,s),l=l<0?v.to:Math.max(v.to,l),v.typeOver&&(c=!0))}if(gecko$1&&d.length){let f=d.filter(v=>v.nodeName=="BR");if(f.length==2){let[v,b]=f;v.parentNode&&v.parentNode.parentNode==b.parentNode?b.remove():v.remove()}else{let{focusNode:v}=this.currentSelection;for(let b of f){let k=b.parentNode;k&&k.nodeName=="LI"&&(!v||blockParent(o,v)!=k)&&b.remove()}}}let u=null;s<0&&a&&o.input.lastFocus>Date.now()-200&&Math.max(o.input.lastTouch,o.input.lastClick.time)<Date.now()-300&&selectionCollapsed(n)&&(u=selectionFromDOM(o))&&u.eq(Selection.near(o.state.doc.resolve(0),1))?(o.input.lastFocus=0,selectionToDOM(o),this.currentSelection.set(n),o.scrollToSelection()):(s>-1||a)&&(s>-1&&(o.docView.markDirty(s,l),checkCSS(o)),this.handleDOMChange(s,l,c,d),o.docView&&o.docView.dirty?o.updateState(o.state):this.currentSelection.eq(n)||selectionToDOM(o),this.currentSelection.set(n))}registerMutation(o,e){if(e.indexOf(o.target)>-1)return null;let n=this.view.docView.nearestDesc(o.target);if(o.type=="attributes"&&(n==this.view.docView||o.attributeName=="contenteditable"||o.attributeName=="style"&&!o.oldValue&&!o.target.getAttribute("style"))||!n||n.ignoreMutation(o))return null;if(o.type=="childList"){for(let f=0;f<o.addedNodes.length;f++){let v=o.addedNodes[f];e.push(v),v.nodeType==3&&(this.lastChangedTextNode=v)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(o.target))return{from:n.posBefore,to:n.posAfter};let a=o.previousSibling,s=o.nextSibling;if(ie$2&&ie_version<=11&&o.addedNodes.length)for(let f=0;f<o.addedNodes.length;f++){let{previousSibling:v,nextSibling:b}=o.addedNodes[f];(!v||Array.prototype.indexOf.call(o.addedNodes,v)<0)&&(a=v),(!b||Array.prototype.indexOf.call(o.addedNodes,b)<0)&&(s=b)}let l=a&&a.parentNode==o.target?domIndex$1(a)+1:0,c=n.localPosFromDOM(o.target,l,-1),d=s&&s.parentNode==o.target?domIndex$1(s):o.target.childNodes.length,u=n.localPosFromDOM(o.target,d,1);return{from:c,to:u}}else return o.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=o.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:o.target.nodeValue==o.oldValue})}},cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(o){if(!cssChecked.has(o)&&(cssChecked.set(o,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace)!==-1)){if(o.requiresGeckoHackNode=gecko$1,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(o,e){let n=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=o.domAtPos(o.state.selection.anchor);return isEquivalentPosition$1(c.node,c.offset,s,l)&&([n,a,s,l]=[s,l,n,a]),{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}}function safariShadowSelectionRange(o,e){if(e.getComposedRanges){let s=e.getComposedRanges(o.root)[0];if(s)return rangeToSelectionRange(o,s)}let n;function a(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return o.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",a,!0),n?rangeToSelectionRange(o,n):null}function blockParent(o,e){for(let n=e.parentNode;n&&n!=o.dom;n=n.parentNode){let a=o.docView.nearestDesc(n,!0);if(a&&a.node.isBlock)return n}return null}function parseBetween(o,e,n){let{node:a,fromOffset:s,toOffset:l,from:c,to:d}=o.docView.parseRange(e,n),u=o.domSelectionRange(),f,v=u.anchorNode;if(v&&o.dom.contains(v.nodeType==1?v:v.parentNode)&&(f=[{node:v,offset:u.anchorOffset}],selectionCollapsed(u)||f.push({node:u.focusNode,offset:u.focusOffset})),chrome$1&&o.input.lastKeyCode===8)for(let B=l;B>s;B--){let M=a.childNodes[B-1],I=M.pmViewDesc;if(M.nodeName=="BR"&&!I){l=B;break}if(!I||I.size)break}let b=o.state.doc,k=o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema),x=b.resolve(c),_=null,E=k.parse(a,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:s,to:l,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode,context:x});if(f&&f[0].pos!=null){let B=f[0].pos,M=f[1]&&f[1].pos;M==null&&(M=B),_={anchor:B+c,head:M+c}}return{doc:E,sel:_,from:c,to:d}}function ruleFromNode(o){let e=o.pmViewDesc;if(e)return e.parseRule();if(o.nodeName=="BR"&&o.parentNode){if(safari$1&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(o.parentNode.lastChild==o||safari$1&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if(o.nodeName=="IMG"&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(o,e,n,a,s){let l=o.input.compositionPendingChanges||(o.composing?o.input.compositionID:0);if(o.input.compositionPendingChanges=0,e<0){let Y=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,K=selectionFromDOM(o,Y);if(K&&!o.state.selection.eq(K)){if(chrome$1&&android$1&&o.input.lastKeyCode===13&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",G=>G(o,keyEvent(13,"Enter"))))return;let W=o.state.tr.setSelection(K);Y=="pointer"?W.setMeta("pointer",!0):Y=="key"&&W.scrollIntoView(),l&&W.setMeta("composition",l),o.dispatch(W)}return}let c=o.state.doc.resolve(e),d=c.sharedDepth(n);e=c.before(d+1),n=o.state.doc.resolve(n).after(d+1);let u=o.state.selection,f=parseBetween(o,e,n),v=o.state.doc,b=v.slice(f.from,f.to),k,x;o.input.lastKeyCode===8&&Date.now()-100<o.input.lastKeyCodeTime?(k=o.state.selection.to,x="end"):(k=o.state.selection.from,x="start"),o.input.lastKeyCode=null;let _=findDiff$1(b.content,f.doc.content,f.from,k,x);if(_&&o.input.domChangeCount++,(ios$1&&o.input.lastIOSEnter>Date.now()-225||android$1)&&s.some(Y=>Y.nodeType==1&&!isInline.test(Y.nodeName))&&(!_||_.endA>=_.endB)&&o.someProp("handleKeyDown",Y=>Y(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(!_)if(a&&u instanceof TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor)&&!o.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))_={start:u.from,endA:u.to,endB:u.to};else{if(f.sel){let Y=resolveSelection(o,o.state.doc,f.sel);if(Y&&!Y.eq(o.state.selection)){let K=o.state.tr.setSelection(Y);l&&K.setMeta("composition",l),o.dispatch(K)}}return}o.state.selection.from<o.state.selection.to&&_.start==_.endB&&o.state.selection instanceof TextSelection&&(_.start>o.state.selection.from&&_.start<=o.state.selection.from+2&&o.state.selection.from>=f.from?_.start=o.state.selection.from:_.endA<o.state.selection.to&&_.endA>=o.state.selection.to-2&&o.state.selection.to<=f.to&&(_.endB+=o.state.selection.to-_.endA,_.endA=o.state.selection.to)),ie$2&&ie_version<=11&&_.endB==_.start+1&&_.endA==_.start&&_.start>f.from&&f.doc.textBetween(_.start-f.from-1,_.start-f.from+1)==" \xA0"&&(_.start--,_.endA--,_.endB--);let E=f.doc.resolveNoCache(_.start-f.from),B=f.doc.resolveNoCache(_.endB-f.from),M=v.resolve(_.start),I=E.sameParent(B)&&E.parent.inlineContent&&M.end()>=_.endA,F;if((ios$1&&o.input.lastIOSEnter>Date.now()-225&&(!I||s.some(Y=>Y.nodeName=="DIV"||Y.nodeName=="P"))||!I&&E.pos<f.doc.content.size&&!E.sameParent(B)&&(F=Selection.findFrom(f.doc.resolve(E.pos+1),1,!0))&&F.head==B.pos)&&o.someProp("handleKeyDown",Y=>Y(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(o.state.selection.anchor>_.start&&looksLikeBackspace(v,_.start,_.endA,E,B)&&o.someProp("handleKeyDown",Y=>Y(o,keyEvent(8,"Backspace")))){android$1&&chrome$1&&o.domObserver.suppressSelectionUpdates();return}chrome$1&&_.endB==_.start&&(o.input.lastChromeDelete=Date.now()),android$1&&!I&&E.start()!=B.start()&&B.parentOffset==0&&E.depth==B.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==_.endA&&(_.endB-=2,B=f.doc.resolveNoCache(_.endB-f.from),setTimeout(()=>{o.someProp("handleKeyDown",function(Y){return Y(o,keyEvent(13,"Enter"))})},20));let V=_.start,L=_.endA,U,j,oe;if(I){if(E.pos==B.pos)ie$2&&ie_version<=11&&E.parentOffset==0&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(o),20)),U=o.state.tr.delete(V,L),j=v.resolve(_.start).marksAcross(v.resolve(_.endA));else if(_.endA==_.endB&&(oe=isMarkChange(E.parent.content.cut(E.parentOffset,B.parentOffset),M.parent.content.cut(M.parentOffset,_.endA-M.start()))))U=o.state.tr,oe.type=="add"?U.addMark(V,L,oe.mark):U.removeMark(V,L,oe.mark);else if(E.parent.child(E.index()).isText&&E.index()==B.index()-(B.textOffset?0:1)){let Y=E.parent.textBetween(E.parentOffset,B.parentOffset);if(o.someProp("handleTextInput",K=>K(o,V,L,Y)))return;U=o.state.tr.insertText(Y,V,L)}}if(U||(U=o.state.tr.replace(V,L,f.doc.slice(_.start-f.from,_.endB-f.from))),f.sel){let Y=resolveSelection(o,U.doc,f.sel);Y&&!(chrome$1&&o.composing&&Y.empty&&(_.start!=_.endB||o.input.lastChromeDelete<Date.now()-100)&&(Y.head==V||Y.head==U.mapping.map(L)-1)||ie$2&&Y.empty&&Y.head==V)&&U.setSelection(Y)}j&&U.ensureMarks(j),l&&U.setMeta("composition",l),o.dispatch(U.scrollIntoView())}function resolveSelection(o,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:selectionBetween(o,e.resolve(n.anchor),e.resolve(n.head))}function isMarkChange(o,e){let n=o.firstChild.marks,a=e.firstChild.marks,s=n,l=a,c,d,u;for(let v=0;v<a.length;v++)s=a[v].removeFromSet(s);for(let v=0;v<n.length;v++)l=n[v].removeFromSet(l);if(s.length==1&&l.length==0)d=s[0],c="add",u=v=>v.mark(d.addToSet(v.marks));else if(s.length==0&&l.length==1)d=l[0],c="remove",u=v=>v.mark(d.removeFromSet(v.marks));else return null;let f=[];for(let v=0;v<e.childCount;v++)f.push(u(e.child(v)));if(Fragment.from(f).eq(o))return{mark:d,type:c}}function looksLikeBackspace(o,e,n,a,s){if(n-e<=s.pos-a.pos||skipClosingAndOpening(a,!0,!1)<s.pos)return!1;let l=o.resolve(e);if(!a.parent.isTextblock){let d=l.nodeAfter;return d!=null&&n==e+d.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=o.resolve(skipClosingAndOpening(l,!0,!0));return!c.parent.isTextblock||c.pos>n||skipClosingAndOpening(c,!0,!1)<n?!1:a.parent.content.cut(a.parentOffset).eq(c.parent.content)}function skipClosingAndOpening(o,e,n){let a=o.depth,s=e?o.end():o.pos;for(;a>0&&(e||o.indexAfter(a)==o.node(a).childCount);)a--,s++,e=!1;if(n){let l=o.node(a).maybeChild(o.indexAfter(a));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}function findDiff$1(o,e,n,a,s){let l=o.findDiffStart(e,n);if(l==null)return null;let{a:c,b:d}=o.findDiffEnd(e,n+o.size,n+e.size);if(s=="end"){let u=Math.max(0,l-Math.min(c,d));a-=c+u-l}if(c<l&&o.size<e.size){let u=a<=l&&a>=c?l-a:0;l-=u,l&&l<e.size&&isSurrogatePair(e.textBetween(l-1,l+1))&&(l+=u?1:-1),d=l+(d-c),c=l}else if(d<l){let u=a<=l&&a>=d?l-a:0;l-=u,l&&l<o.size&&isSurrogatePair(o.textBetween(l-1,l+1))&&(l+=u?1:-1),c=l+(c-d),d=l}return{start:l,endA:c,endB:d}}function isSurrogatePair(o){if(o.length!=2)return!1;let e=o.charCodeAt(0),n=o.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}let EditorView$1=class{constructor(o,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState$1,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=o&&o.mount||document.createElement("div"),o&&(o.appendChild?o.appendChild(this.dom):typeof o=="function"?o(this.dom):o.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver$1(this,(n,a,s,l)=>readDOMChange(this,n,a,s,l)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let o=this._props;this._props={};for(let e in o)this._props[e]=o[e];this._props.state=this.state}return this._props}update(o){o.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let e=this._props;this._props=o,o.plugins&&(o.plugins.forEach(checkStateComponent),this.directPlugins=o.plugins),this.updateStateInner(o.state,e)}setProps(o){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in o)e[n]=o[n];this.update(e)}updateState(o){this.updateStateInner(o,this._props)}updateStateInner(o,e){var n;let a=this.state,s=!1,l=!1;o.storedMarks&&this.composing&&(clearComposition(this),l=!0),this.state=o;let c=a.plugins!=o.plugins||this._props.plugins!=e.plugins;if(c||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let k=buildNodeViews(this);changedNodeViews(k,this.nodeViews)&&(this.nodeViews=k,s=!0)}(c||e.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let d=viewDecorations(this),u=computeDocDeco(this),f=a.plugins!=o.plugins&&!a.doc.eq(o.doc)?"reset":o.scrollToSelection>a.scrollToSelection?"to selection":"preserve",v=s||!this.docView.matchesNode(o.doc,u,d);(v||!o.selection.eq(a.selection))&&(l=!0);let b=f=="preserve"&&l&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(l){this.domObserver.stop();let k=v&&(ie$2||chrome$1)&&!this.composing&&!a.selection.empty&&!o.selection.empty&&selectionContextChanged(a.selection,o.selection);if(v){let x=chrome$1?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode$1(this)),(s||!this.docView.update(o.doc,u,d,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=docViewDesc(o.doc,u,d,this.dom,this)),x&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,k):(syncNodeSelection(this,o.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((n=this.dragging)===null||n===void 0)&&n.node&&!a.doc.eq(o.doc)&&this.updateDraggedNode(this.dragging,a),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():b&&resetScrollPos(b)}scrollToSelection(){let o=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof NodeSelection){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&scrollRectIntoView$1(this,e.getBoundingClientRect(),o)}else scrollRectIntoView$1(this,this.coordsAtPos(this.state.selection.head,1),o)}destroyPluginViews(){let o;for(;o=this.pluginViews.pop();)o.destroy&&o.destroy()}updatePluginViews(o){if(!o||o.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let n=this.directPlugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let n=this.state.plugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,o)}}updateDraggedNode(o,e){let n=o.node,a=-1;if(this.state.doc.nodeAt(n.from)==n.node)a=n.from;else{let s=n.from+(this.state.doc.content.size-e.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(a=s)}this.dragging=new Dragging(o.slice,o.move,a<0?void 0:NodeSelection.create(this.state.doc,a))}someProp(o,e){let n=this._props&&this._props[o],a;if(n!=null&&(a=e?e(n):n))return a;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[o];if(c!=null&&(a=e?e(c):c))return a}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let c=s[l].props[o];if(c!=null&&(a=e?e(c):c))return a}}hasFocus(){if(ie$2){let o=this.root.activeElement;if(o==this.dom)return!0;if(!o||!this.dom.contains(o))return!1;for(;o&&this.dom!=o&&this.dom.contains(o);){if(o.contentEditable=="false")return!1;o=o.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll$1(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let o=this._root;if(o==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return o||document}updateRoot(){this._root=null}posAtCoords(o){return posAtCoords$1(this,o)}coordsAtPos(o,e=1){return coordsAtPos(this,o,e)}domAtPos(o,e=0){return this.docView.domFromPos(o,e)}nodeDOM(o){let e=this.docView.descAt(o);return e?e.nodeDOM:null}posAtDOM(o,e,n=-1){let a=this.docView.posFromDOM(o,e,n);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(o,e){return endOfTextblock(this,e||this.state,o)}pasteHTML(o,e){return doPaste$1(this,"",o,!1,e||new ClipboardEvent("paste"))}pasteText(o,e){return doPaste$1(this,o,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(o){return dispatchEvent(this,o)}dispatch(o){let e=this._props.dispatchTransaction;e?e.call(this,o):this.updateState(this.state.apply(o))}domSelectionRange(){let o=this.domSelection();return o?safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,o)||o:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function computeDocDeco(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),o.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(o.state)),n)for(let a in n)a=="class"?e.class+=" "+n[a]:a=="style"?e.style=(e.style?e.style+";":"")+n[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(n[a]))}),e.translate||(e.translate="no"),[Decoration$1.node(0,o.state.doc.content.size,e)]}function updateCursorWrapper(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:Decoration$1.widget(o.state.selection.from,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function getEditable(o){return!o.someProp("editable",e=>e(o.state)===!1)}function selectionContextChanged(o,e){let n=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(n)!=e.$anchor.start(n)}function buildNodeViews(o){let e=Object.create(null);function n(a){for(let s in a)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=a[s])}return o.someProp("nodeViews",n),o.someProp("markViews",n),e}function changedNodeViews(o,e){let n=0,a=0;for(let s in o){if(o[s]!=e[s])return!0;n++}for(let s in e)a++;return n!=a}function checkStateComponent(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}let rangeFrom=[],rangeTo=[];(()=>{let o="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<o.length;e++)(e%2?rangeTo:rangeFrom).push(n=n+o[e])})();function isExtendingChar(o){if(o<768)return!1;for(let e=0,n=rangeFrom.length;;){let a=e+n>>1;if(o<rangeFrom[a])n=a;else if(o>=rangeTo[a])e=a+1;else return!0;if(e==n)return!1}}function isRegionalIndicator(o){return o>=127462&&o<=127487}const ZWJ=8205;function findClusterBreak$1(o,e,n=!0,a=!0){return(n?nextClusterBreak:prevClusterBreak)(o,e,a)}function nextClusterBreak(o,e,n){if(e==o.length)return e;e&&surrogateLow$1(o.charCodeAt(e))&&surrogateHigh$1(o.charCodeAt(e-1))&&e--;let a=codePointAt$1(o,e);for(e+=codePointSize$1(a);e<o.length;){let s=codePointAt$1(o,e);if(a==ZWJ||s==ZWJ||n&&isExtendingChar(s))e+=codePointSize$1(s),a=s;else if(isRegionalIndicator(s)){let l=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt$1(o,c));)l++,c-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(o,e,n){for(;e>0;){let a=nextClusterBreak(o,e-2,n);if(a<e)return a;e--}return 0}function codePointAt$1(o,e){let n=o.charCodeAt(e);if(!surrogateHigh$1(n)||e+1==o.length)return n;let a=o.charCodeAt(e+1);return surrogateLow$1(a)?(n-55296<<10)+(a-56320)+65536:n}function surrogateLow$1(o){return o>=56320&&o<57344}function surrogateHigh$1(o){return o>=55296&&o<56320}function codePointSize$1(o){return o<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,a){[e,n]=clip$1(this,e,n);let s=[];return this.decompose(0,e,s,2),a.length&&a.decompose(0,a.length,s,3),this.decompose(n,this.length,s,1),TextNode$1.from(s,this.length-(n-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=clip$1(this,e,n);let a=[];return this.decompose(e,n,a,0),TextNode$1.from(a,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),s=new RawTextCursor(this),l=new RawTextCursor(e);for(let c=n,d=n;;){if(s.next(c),l.next(c),c=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(d+=s.value.length,s.done||d>=a)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let a;if(e==null)a=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;a=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode$1.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,a,s){for(let l=0;;l++){let c=this.text[l],d=s+c.length;if((n?a:d)>=e)return new Line(s,d,a,c);s=d+1,a++}}decompose(e,n,a,s){let l=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let c=a.pop(),d=appendText(l.text,c.text.slice(),0,l.length);if(d.length<=32)a.push(new TextLeaf(d,c.length+l.length));else{let u=d.length>>1;a.push(new TextLeaf(d.slice(0,u)),new TextLeaf(d.slice(u)))}}else a.push(l)}replace(e,n,a){if(!(a instanceof TextLeaf))return super.replace(e,n,a);[e,n]=clip$1(this,e,n);let s=appendText(this.text,appendText(a.text,sliceText(this.text,0,e)),n),l=this.length+a.length-(n-e);return s.length<=32?new TextLeaf(s,l):TextNode$1.from(TextLeaf.split(s,[]),l)}sliceString(e,n=this.length,a=`
`){[e,n]=clip$1(this,e,n);let s="";for(let l=0,c=0;l<=n&&c<this.text.length;c++){let d=this.text[c],u=l+d.length;l>e&&c&&(s+=a),e<u&&n>l&&(s+=d.slice(Math.max(0,e-l),n-l)),l=u+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let a=[],s=-1;for(let l of e)a.push(l),s+=l.length+1,a.length==32&&(n.push(new TextLeaf(a,s)),a=[],s=-1);return s>-1&&n.push(new TextLeaf(a,s)),n}}let TextNode$1=class Xt extends Text{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,n,a,s){for(let l=0;;l++){let c=this.children[l],d=s+c.length,u=a+c.lines-1;if((n?u:d)>=e)return c.lineInner(e,n,a,s);s=d+1,a=u+1}}decompose(e,n,a,s){for(let l=0,c=0;c<=n&&l<this.children.length;l++){let d=this.children[l],u=c+d.length;if(e<=u&&n>=c){let f=s&((c<=e?1:0)|(u>=n?2:0));c>=e&&u<=n&&!f?a.push(d):d.decompose(e-c,n-c,a,f)}c=u+1}}replace(e,n,a){if([e,n]=clip$1(this,e,n),a.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let c=this.children[s],d=l+c.length;if(e>=l&&n<=d){let u=c.replace(e-l,n-l,a),f=this.lines-c.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let v=this.children.slice();return v[s]=u,new Xt(v,this.length-(n-e)+a.length)}return super.replace(l,d,u)}l=d+1}return super.replace(e,n,a)}sliceString(e,n=this.length,a=`
`){[e,n]=clip$1(this,e,n);let s="";for(let l=0,c=0;l<this.children.length&&c<=n;l++){let d=this.children[l],u=c+d.length;c>e&&l&&(s+=a),e<u&&n>c&&(s+=d.sliceString(e-c,n-c,a)),c=u+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Xt))return 0;let a=0,[s,l,c,d]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,l+=n){if(s==c||l==d)return a;let u=this.children[s],f=e.children[l];if(u!=f)return a+u.scanIdentical(f,n);a+=u.length+1}}static from(e,n=e.reduce((a,s)=>a+s.length+1,-1)){let a=0;for(let x of e)a+=x.lines;if(a<32){let x=[];for(let _ of e)_.flatten(x);return new TextLeaf(x,n)}let s=Math.max(32,a>>5),l=s<<1,c=s>>1,d=[],u=0,f=-1,v=[];function b(x){let _;if(x.lines>l&&x instanceof Xt)for(let E of x.children)b(E);else x.lines>c&&(u>c||!u)?(k(),d.push(x)):x instanceof TextLeaf&&u&&(_=v[v.length-1])instanceof TextLeaf&&x.lines+_.lines<=32?(u+=x.lines,f+=x.length+1,v[v.length-1]=new TextLeaf(_.text.concat(x.text),_.length+1+x.length)):(u+x.lines>s&&k(),u+=x.lines,f+=x.length+1,v.push(x))}function k(){u!=0&&(d.push(v.length==1?v[0]:Xt.from(v,f)),f=-1,u=v.length=0)}for(let x of e)b(x);return k(),d.length==1?d[0]:new Xt(d,n)}};Text.empty=new TextLeaf([""],0);function textLength(o){let e=-1;for(let n of o)e+=n.length+1;return e}function appendText(o,e,n=0,a=1e9){for(let s=0,l=0,c=!0;l<o.length&&s<=a;l++){let d=o[l],u=s+d.length;u>=n&&(u>a&&(d=d.slice(0,a-s)),s<n&&(d=d.slice(n-s)),c?(e[e.length-1]+=d,c=!1):e.push(d)),s=u+1}return e}function sliceText(o,e,n){return appendText(o,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,s=this.nodes[a],l=this.offsets[a],c=l>>1,d=s instanceof TextLeaf?s.text.length:s.children.length;if(c==(n>0?d:0)){if(a==0)return this.done=!0,this.value="",this;n>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(n>0?0:1)){if(this.offsets[a]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof TextLeaf){let u=s.text[c+(n<0?-1:0)];if(this.offsets[a]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=s.children[c+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[a]+=n):(n<0&&this.offsets[a]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof TextLeaf?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,a){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>a?-1:1),this.pos=n>a?e.length:0,this.from=Math.min(n,a),this.to=Math.max(n,a)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let a=n<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=a?s:n<0?s.slice(s.length-a):s.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:a,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,n,a,s){this.from=e,this.to=n,this.number=a,this.text=s}get length(){return this.to-this.from}}function clip$1(o,e,n){return e=Math.max(0,Math.min(o.length,e)),[e,Math.max(e,Math.min(o.length,n))]}function findClusterBreak(o,e,n=!0,a=!0){return findClusterBreak$1(o,e,n,a)}function surrogateLow(o){return o>=56320&&o<57344}function surrogateHigh(o){return o>=55296&&o<56320}function codePointAt(o,e){let n=o.charCodeAt(e);if(!surrogateHigh(n)||e+1==o.length)return n;let a=o.charCodeAt(e+1);return surrogateLow(a)?(n-55296<<10)+(a-56320)+65536:n}function fromCodePoint(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}function codePointSize(o){return o<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(o){return o[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n+1];e+=a<0?this.sections[n]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,a=0,s=0;n<this.sections.length;){let l=this.sections[n++],c=this.sections[n++];c<0?(e(a,s,l),s+=l):s+=c,a+=l}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let a=this.sections[n++],s=this.sections[n++];s<0?e.push(a,s):e.push(s,a)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,a=MapMode.Simple){let s=0,l=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],u=this.sections[c++],f=s+d;if(u<0){if(f>e)return l+(e-s);l+=d}else{if(a!=MapMode.Simple&&f>=e&&(a==MapMode.TrackDel&&s<e&&f>e||a==MapMode.TrackBefore&&s<e||a==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&n<0&&!d)return e==s||n<0?l:l+u;l+=u}s=f}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,n=e){for(let a=0,s=0;a<this.sections.length&&s<=n;){let l=this.sections[a++],c=this.sections[a++],d=s+l;if(c>=0&&s<=n&&d>=e)return s<e&&d>n?"cover":!0;s=d}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let a=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+a+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,a,s,l,c)=>e=e.replace(s,s+(a-n),c),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),a=[];for(let s=0,l=0;s<n.length;s+=2){let c=n[s],d=n[s+1];if(d>=0){n[s]=d,n[s+1]=c;let u=s>>1;for(;a.length<u;)a.push(Text.empty);a.push(c?e.slice(l,l+c):Text.empty)}l+=c}return new ChangeSet(n,a)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],a=[],s=[],l=new SectionIter(this);e:for(let c=0,d=0;;){let u=c==e.length?1e9:e[c++];for(;d<u||d==u&&l.len==0;){if(l.done)break e;let v=Math.min(l.len,u-d);addSection(s,v,-1);let b=l.ins==-1?-1:l.off==0?l.ins:0;addSection(n,v,b),b>0&&addInsert(a,n,l.text),l.forward(v),d+=v}let f=e[c++];for(;d<f;){if(l.done)break e;let v=Math.min(l.len,f-d);addSection(n,v,-1),addSection(s,v,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(v),d+=v}}return{changes:new ChangeSet(n,a),filtered:ChangeDesc.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n],s=this.sections[n+1];s<0?e.push(a):s==0?e.push([a]):e.push([a].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,a){let s=[],l=[],c=0,d=null;function u(v=!1){if(!v&&!s.length)return;c<n&&addSection(s,n-c,-1);let b=new ChangeSet(s,l);d=d?d.compose(b.map(d)):b,s=[],l=[],c=0}function f(v){if(Array.isArray(v))for(let b of v)f(b);else if(v instanceof ChangeSet){if(v.length!=n)throw new RangeError(`Mismatched change set length (got ${v.length}, expected ${n})`);u(),d=d?d.compose(v.map(d)):v}else{let{from:b,to:k=b,insert:x}=v;if(b>k||b<0||k>n)throw new RangeError(`Invalid change range ${b} to ${k} (in doc of length ${n})`);let _=x?typeof x=="string"?Text.of(x.split(a||DefaultSplit)):x:Text.empty,E=_.length;if(b==k&&E==0)return;b<c&&u(),b>c&&addSection(s,b-c,-1),addSection(s,k-b,E),addInsert(l,s,_),c=k}}return f(e),u(!d),d}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],a=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")n.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)n.push(l[0],0);else{for(;a.length<s;)a.push(Text.empty);a[s]=Text.of(l.slice(1)),n.push(l[0],a[s].length)}}}return new ChangeSet(n,a)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(o,e,n,a=!1){if(e==0&&n<=0)return;let s=o.length-2;s>=0&&n<=0&&n==o[s+1]?o[s]+=e:s>=0&&e==0&&o[s]==0?o[s+1]+=n:a?(o[s]+=e,o[s+1]+=n):o.push(e,n)}function addInsert(o,e,n){if(n.length==0)return;let a=e.length-2>>1;if(a<o.length)o[o.length-1]=o[o.length-1].append(n);else{for(;o.length<a;)o.push(Text.empty);o.push(n)}}function iterChanges(o,e,n){let a=o.inserted;for(let s=0,l=0,c=0;c<o.sections.length;){let d=o.sections[c++],u=o.sections[c++];if(u<0)s+=d,l+=d;else{let f=s,v=l,b=Text.empty;for(;f+=d,v+=u,u&&a&&(b=b.append(a[c-2>>1])),!(n||c==o.sections.length||o.sections[c+1]<0);)d=o.sections[c++],u=o.sections[c++];e(s,f,l,v,b),s=f,l=v}}}function mapSet(o,e,n,a=!1){let s=[],l=a?[]:null,c=new SectionIter(o),d=new SectionIter(e);for(let u=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let f=Math.min(c.len,d.len);addSection(s,f,-1),c.forward(f),d.forward(f)}else if(d.ins>=0&&(c.ins<0||u==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!n))){let f=d.len;for(addSection(s,d.ins,-1);f;){let v=Math.min(c.len,f);c.ins>=0&&u<c.i&&c.len<=v&&(addSection(s,0,c.ins),l&&addInsert(l,s,c.text),u=c.i),c.forward(v),f-=v}d.next()}else if(c.ins>=0){let f=0,v=c.len;for(;v;)if(d.ins==-1){let b=Math.min(v,d.len);f+=b,v-=b,d.forward(b)}else if(d.ins==0&&d.len<v)v-=d.len,d.next();else break;addSection(s,f,u<c.i?c.ins:0),l&&u<c.i&&addInsert(l,s,c.text),u=c.i,c.forward(c.len-v)}else{if(c.done&&d.done)return l?ChangeSet.createSet(s,l):ChangeDesc.create(s);throw new Error("Mismatched change set lengths")}}}function composeSets(o,e,n=!1){let a=[],s=n?[]:null,l=new SectionIter(o),c=new SectionIter(e);for(let d=!1;;){if(l.done&&c.done)return s?ChangeSet.createSet(a,s):ChangeDesc.create(a);if(l.ins==0)addSection(a,l.len,0,d),l.next();else if(c.len==0&&!c.done)addSection(a,0,c.ins,d),s&&addInsert(s,a,c.text),c.next();else{if(l.done||c.done)throw new Error("Mismatched change set lengths");{let u=Math.min(l.len2,c.len),f=a.length;if(l.ins==-1){let v=c.ins==-1?-1:c.off?0:c.ins;addSection(a,u,v,d),s&&v&&addInsert(s,a,c.text)}else c.ins==-1?(addSection(a,l.off?0:l.len,u,d),s&&addInsert(s,a,l.textBit(u))):(addSection(a,l.off?0:l.len,c.off?0:c.ins,d),s&&!c.off&&addInsert(s,a,c.text));d=(l.ins>u||c.ins>=0&&c.len>u)&&(d||a.length>f),l.forward2(u),c.forward(u)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text.empty:e[n]}textBit(e){let{inserted:n}=this.set,a=this.i-2>>1;return a>=n.length&&!e?Text.empty:n[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,a){this.from=e,this.to=n,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let a,s;return this.empty?a=s=e.mapPos(this.from,n):(a=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),a==this.from&&s==this.to?this:new SelectionRange(a,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let a=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,a)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,a){return new SelectionRange(e,n,a)}}EditorSelection=class{constructor(o,e){this.ranges=o,this.mainIndex=e}map(o,e=-1){return o.empty?this:EditorSelection.create(this.ranges.map(n=>n.map(o,e)),this.mainIndex)}eq(o,e=!1){if(this.ranges.length!=o.ranges.length||this.mainIndex!=o.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(o.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(o,e=!0){return EditorSelection.create([o].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(o,e=this.mainIndex){let n=this.ranges.slice();return n[e]=o,EditorSelection.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(o=>o.toJSON()),main:this.mainIndex}}static fromJSON(o){if(!o||!Array.isArray(o.ranges)||typeof o.main!="number"||o.main>=o.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(o.ranges.map(e=>SelectionRange.fromJSON(e)),o.main)}static single(o,e=o){return new EditorSelection([EditorSelection.range(o,e)],0)}static create(o,e=0){if(o.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,a=0;a<o.length;a++){let s=o[a];if(s.empty?s.from<=n:s.from<n)return EditorSelection.normalized(o.slice(),e);n=s.to}return new EditorSelection(o,e)}static cursor(o,e=0,n,a){return SelectionRange.create(o,o,(e==0?0:e<0?8:16)|(n==null?7:Math.min(6,n))|(a??16777215)<<6)}static range(o,e,n,a){let s=(n??16777215)<<6|(a==null?7:Math.min(6,a));return e<o?SelectionRange.create(e,o,48|s):SelectionRange.create(o,e,(e>o?8:0)|s)}static normalized(o,e=0){let n=o[e];o.sort((a,s)=>a.from-s.from),e=o.indexOf(n);for(let a=1;a<o.length;a++){let s=o[a],l=o[a-1];if(s.empty?s.from<=l.to:s.from<l.to){let c=l.from,d=Math.max(s.to,l.to);a<=e&&e--,o.splice(--a,2,s.anchor>s.head?EditorSelection.range(d,c):EditorSelection.range(c,d))}}return new EditorSelection(o,e)}};function checkSelection(o,e){for(let n of o.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,a,s,l){this.combine=e,this.compareInput=n,this.compare=a,this.isStatic=s,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,a)=>n===a),e.compare||(e.combine?(n,a)=>n===a:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=a=>a),this.compute([e],a=>n(a.field(e)))}}function sameArray$1(o,e){return o==e||o.length==e.length&&o.every((n,a)=>n===e[a])}class FacetProvider{constructor(e,n,a,s){this.dependencies=e,this.facet=n,this.type=a,this.value=s,this.id=nextID++}dynamicSlot(e){var n;let a=this.value,s=this.facet.compareInput,l=this.id,c=e[l]>>1,d=this.type==2,u=!1,f=!1,v=[];for(let b of this.dependencies)b=="doc"?u=!0:b=="selection"?f=!0:((n=e[b.id])!==null&&n!==void 0?n:1)&1||v.push(e[b.id]);return{create(b){return b.values[c]=a(b),1},update(b,k){if(u&&k.docChanged||f&&(k.docChanged||k.selection)||ensureAll(b,v)){let x=a(b);if(d?!compareArray(x,b.values[c],s):!s(x,b.values[c]))return b.values[c]=x,1}return 0},reconfigure:(b,k)=>{let x,_=k.config.address[l];if(_!=null){let E=getAddr(k,_);if(this.dependencies.every(B=>B instanceof Facet?k.facet(B)===b.facet(B):B instanceof StateField?k.field(B,!1)==b.field(B,!1):!0)||(d?compareArray(x=a(b),E,s):s(x=a(b),E)))return b.values[c]=E,0}else x=a(b);return b.values[c]=x,1}}}}function compareArray(o,e,n){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!n(o[a],e[a]))return!1;return!0}function ensureAll(o,e){let n=!1;for(let a of e)ensureAddr(o,a)&1&&(n=!0);return n}function dynamicFacetSlot(o,e,n){let a=n.map(u=>o[u.id]),s=n.map(u=>u.type),l=a.filter(u=>!(u&1)),c=o[e.id]>>1;function d(u){let f=[];for(let v=0;v<a.length;v++){let b=getAddr(u,a[v]);if(s[v]==2)for(let k of b)f.push(k);else f.push(b)}return e.combine(f)}return{create(u){for(let f of a)ensureAddr(u,f);return u.values[c]=d(u),1},update(u,f){if(!ensureAll(u,l))return 0;let v=d(u);return e.compare(v,u.values[c])?0:(u.values[c]=v,1)},reconfigure(u,f){let v=ensureAll(u,a),b=f.config.facets[e.id],k=f.facet(e);if(b&&!v&&sameArray$1(n,b))return u.values[c]=k,0;let x=d(u);return e.compare(x,k)?(u.values[c]=k,0):(u.values[c]=x,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,a,s,l){this.id=e,this.createF=n,this.updateF=a,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((a,s)=>a===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(a=>a.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:a=>(a.values[n]=this.create(a),1),update:(a,s)=>{let l=a.values[n],c=this.updateF(l,s);return this.compareF(l,c)?0:(a.values[n]=c,1)},reconfigure:(a,s)=>s.config.address[this.id]!=null?(a.values[n]=s.field(this),0):(a.values[n]=this.create(a),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(o){return e=>new PrecExtension(e,o)}Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,a,s,l,c){for(this.base=e,this.compartments=n,this.dynamicSlots=a,this.address=s,this.staticValues=l,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,a){let s=[],l=Object.create(null),c=new Map;for(let k of flatten(e,n,c))k instanceof StateField?s.push(k):(l[k.facet.id]||(l[k.facet.id]=[])).push(k);let d=Object.create(null),u=[],f=[];for(let k of s)d[k.id]=f.length<<1,f.push(x=>k.slot(x));let v=a==null?void 0:a.config.facets;for(let k in l){let x=l[k],_=x[0].facet,E=v&&v[k]||[];if(x.every(B=>B.type==0))if(d[_.id]=u.length<<1|1,sameArray$1(E,x))u.push(a.facet(_));else{let B=_.combine(x.map(M=>M.value));u.push(a&&_.compare(B,a.facet(_))?a.facet(_):B)}else{for(let B of x)B.type==0?(d[B.id]=u.length<<1|1,u.push(B.value)):(d[B.id]=f.length<<1,f.push(M=>B.dynamicSlot(M)));d[_.id]=f.length<<1,f.push(B=>dynamicFacetSlot(B,_,x))}}let b=f.map(k=>k(d));return new Configuration(e,c,b,d,u,l)}}function flatten(o,e,n){let a=[[],[],[],[],[]],s=new Map;function l(c,d){let u=s.get(c);if(u!=null){if(u<=d)return;let f=a[u].indexOf(c);f>-1&&a[u].splice(f,1),c instanceof CompartmentInstance&&n.delete(c.compartment)}if(s.set(c,d),Array.isArray(c))for(let f of c)l(f,d);else if(c instanceof CompartmentInstance){if(n.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(c.compartment)||c.inner;n.set(c.compartment,f),l(f,d)}else if(c instanceof PrecExtension)l(c.inner,c.prec);else if(c instanceof StateField)a[d].push(c),c.provides&&l(c.provides,d);else if(c instanceof FacetProvider)a[d].push(c),c.facet.extensions&&l(c.facet.extensions,Prec_.default);else{let f=c.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(f,d)}}return l(o,Prec_.default),a.reduce((c,d)=>c.concat(d))}function ensureAddr(o,e){if(e&1)return 2;let n=e>>1,a=o.status[n];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;o.status[n]=4;let s=o.computeSlot(o,o.config.dynamicSlots[n]);return o.status[n]=2|s}function getAddr(o,e){return e&1?o.config.staticValues[e>>1]:o.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:o=>o.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:o=>o.length?o[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:o=>o.length?o[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let a=[];for(let s of e){let l=s.map(n);l&&a.push(l)}return a}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,a,s,l,c){this.startState=e,this.changes=n,this.selection=a,this.effects=s,this.annotations=l,this.scrollIntoView=c,this._doc=null,this._state=null,a&&checkSelection(a,n.newLength),l.some(d=>d.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,n,a,s,l,c){return new Transaction(e,n,a,s,l,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(o,e){let n=[];for(let a=0,s=0;;){let l,c;if(a<o.length&&(s==e.length||e[s]>=o[a]))l=o[a++],c=o[a++];else if(s<e.length)l=e[s++],c=e[s++];else return n;!n.length||n[n.length-1]<l?n.push(l,c):n[n.length-1]<c&&(n[n.length-1]=c)}}function mergeTransaction(o,e,n){var a;let s,l,c;return n?(s=e.changes,l=ChangeSet.empty(e.changes.length),c=o.changes.compose(e.changes)):(s=e.changes.map(o.changes),l=o.changes.mapDesc(e.changes,!0),c=o.changes.compose(s)),{changes:c,selection:e.selection?e.selection.map(l):(a=o.selection)===null||a===void 0?void 0:a.map(s),effects:StateEffect.mapEffects(o.effects,s).concat(StateEffect.mapEffects(e.effects,l)),annotations:o.annotations.length?o.annotations.concat(e.annotations):e.annotations,scrollIntoView:o.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(o,e,n){let a=e.selection,s=asArray(e.annotations);return e.userEvent&&(s=s.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,o.facet(lineSeparator)),selection:a&&(a instanceof EditorSelection?a:EditorSelection.single(a.anchor,a.head)),effects:asArray(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(o,e,n){let a=resolveTransactionInner(o,e.length?e[0]:{},o.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(n=!1);let c=!!e[l].sequential;a=mergeTransaction(a,resolveTransactionInner(o,e[l],c?a.changes.newLength:o.doc.length),c)}let s=Transaction.create(o,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return extendTransaction(n?filterTransaction(s):s)}function filterTransaction(o){let e=o.startState,n=!0;for(let s of e.facet(changeFilter)){let l=s(o);if(l===!1){n=!1;break}Array.isArray(l)&&(n=n===!0?l:joinRanges(n,l))}if(n!==!0){let s,l;if(n===!1)l=o.changes.invertedDesc,s=ChangeSet.empty(e.doc.length);else{let c=o.changes.filter(n);s=c.changes,l=c.filtered.mapDesc(c.changes).invertedDesc}o=Transaction.create(e,s,o.selection&&o.selection.map(l),StateEffect.mapEffects(o.effects,l),o.annotations,o.scrollIntoView)}let a=e.facet(transactionFilter);for(let s=a.length-1;s>=0;s--){let l=a[s](o);l instanceof Transaction?o=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?o=l[0]:o=resolveTransaction(e,asArray(l),!1)}return o}function extendTransaction(o){let e=o.startState,n=e.facet(transactionExtender),a=o;for(let s=n.length-1;s>=0;s--){let l=n[s](o);l&&Object.keys(l).length&&(a=mergeTransaction(a,resolveTransactionInner(e,l,o.changes.newLength),!0))}return a==o?o:Transaction.create(e,o.changes,o.selection,a.effects,a.annotations,a.scrollIntoView)}const none$1=[];function asArray(o){return o==null?none$1:Array.isArray(o)?o:[o]}var CharCategory=function(o){return o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other",o}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(o){if(wordChar)return wordChar.test(o);for(let e=0;e<o.length;e++){let n=o[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(o){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<o.length;n++)if(e.indexOf(o[n])>-1)return CharCategory.Word;return CharCategory.Other}}EditorState=class{constructor(o,e,n,a,s,l){this.config=o,this.doc=e,this.selection=n,this.values=a,this.status=o.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)ensureAddr(this,c<<1);this.computeSlot=null}field(o,e=!0){let n=this.config.address[o.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,n),getAddr(this,n)}update(...o){return resolveTransaction(this,o,!0)}applyTransaction(o){let e=this.config,{base:n,compartments:a}=e;for(let c of o.effects)c.is(Compartment.reconfigure)?(e&&(a=new Map,e.compartments.forEach((d,u)=>a.set(u,d)),e=null),a.set(c.value.compartment,c.value.extension)):c.is(StateEffect.reconfigure)?(e=null,n=c.value):c.is(StateEffect.appendConfig)&&(e=null,n=asArray(n).concat(c.value));let s;e?s=o.startState.values.slice():(e=Configuration.resolve(n,a,this),s=new EditorState(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(c,d)=>d.reconfigure(c,this),null).values);let l=o.startState.facet(allowMultipleSelections)?o.newSelection:o.newSelection.asSingle();new EditorState(e,o.newDoc,l,s,(c,d)=>d.update(c,o),o)}replaceSelection(o){return typeof o=="string"&&(o=this.toText(o)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:o},range:EditorSelection.cursor(e.from+o.length)}))}changeByRange(o){let e=this.selection,n=o(e.ranges[0]),a=this.changes(n.changes),s=[n.range],l=asArray(n.effects);for(let c=1;c<e.ranges.length;c++){let d=o(e.ranges[c]),u=this.changes(d.changes),f=u.map(a);for(let b=0;b<c;b++)s[b]=s[b].map(f);let v=a.mapDesc(u,!0);s.push(d.range.map(v)),a=a.compose(f),l=StateEffect.mapEffects(l,f).concat(StateEffect.mapEffects(asArray(d.effects),v))}return{changes:a,selection:EditorSelection.create(s,e.mainIndex),effects:l}}changes(o=[]){return o instanceof ChangeSet?o:ChangeSet.of(o,this.doc.length,this.facet(EditorState.lineSeparator))}toText(o){return Text.of(o.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(o=0,e=this.doc.length){return this.doc.sliceString(o,e,this.lineBreak)}facet(o){let e=this.config.address[o.id];return e==null?o.default:(ensureAddr(this,e),getAddr(this,e))}toJSON(o){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(o)for(let n in o){let a=o[n];a instanceof StateField&&this.config.address[a.id]!=null&&(e[n]=a.spec.toJSON(this.field(o[n]),this))}return e}static fromJSON(o,e={},n){if(!o||typeof o.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let a=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(o,s)){let l=n[s],c=o[s];a.push(l.init(d=>l.spec.fromJSON(c,d)))}}return EditorState.create({doc:o.doc,selection:EditorSelection.fromJSON(o.selection),extensions:e.extensions?a.concat([e.extensions]):a})}static create(o={}){let e=Configuration.resolve(o.extensions||[],new Map),n=o.doc instanceof Text?o.doc:Text.of((o.doc||"").split(e.staticFacet(EditorState.lineSeparator)||DefaultSplit)),a=o.selection?o.selection instanceof EditorSelection?o.selection:EditorSelection.single(o.selection.anchor,o.selection.head):EditorSelection.single(0);return checkSelection(a,n.length),e.staticFacet(allowMultipleSelections)||(a=a.asSingle()),new EditorState(e,n,a,e.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(o,...e){for(let n of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(n,o)){o=n[o];break}return e.length&&(o=o.replace(/\$(\$|\d*)/g,(n,a)=>{if(a=="$")return"$";let s=+(a||1);return!s||s>e.length?n:e[s-1]})),o}languageDataAt(o,e,n=-1){let a=[];for(let s of this.facet(languageData))for(let l of s(this,e,n))Object.prototype.hasOwnProperty.call(l,o)&&a.push(l[o]);return a}charCategorizer(o){return makeCategorizer(this.languageDataAt("wordChars",o).join(""))}wordAt(o){let{text:e,from:n,length:a}=this.doc.lineAt(o),s=this.charCategorizer(o),l=o-n,c=o-n;for(;l>0;){let d=findClusterBreak(e,l,!1);if(s(e.slice(d,l))!=CharCategory.Word)break;l=d}for(;c<a;){let d=findClusterBreak(e,c);if(s(e.slice(c,d))!=CharCategory.Word)break;c=d}return l==c?null:EditorSelection.range(l+n,c+n)}},EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:o=>o.length?o[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(o,e){let n=Object.keys(o),a=Object.keys(e);return n.length==a.length&&n.every(s=>o[s]==e[s])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(o,e,n={}){let a={};for(let s of o)for(let l of Object.keys(s)){let c=s[l],d=a[l];if(d===void 0)a[l]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(n,l))a[l]=n[l](d,c);else throw new Error("Config merge conflict for field "+l)}for(let s in e)a[s]===void 0&&(a[s]=e[s]);return a}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class gr{constructor(e,n,a){this.from=e,this.to=n,this.value=a}static create(e,n,a){return new gr(e,n,a)}};function cmpRange(o,e){return o.from-e.from||o.value.startSide-e.value.startSide}class Chunk{constructor(e,n,a,s){this.from=e,this.to=n,this.value=a,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,a,s=0){let l=a?this.to:this.from;for(let c=s,d=l.length;;){if(c==d)return c;let u=c+d>>1,f=l[u]-e||(a?this.value[u].endSide:this.value[u].startSide)-n;if(u==c)return f>=0?c:d;f>=0?d=u:c=u+1}}between(e,n,a,s){for(let l=this.findIndex(n,-1e9,!0),c=this.findIndex(a,1e9,!1,l);l<c;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,n){let a=[],s=[],l=[],c=-1,d=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],v=this.from[u]+e,b=this.to[u]+e,k,x;if(v==b){let _=n.mapPos(v,f.startSide,f.mapMode);if(_==null||(k=x=_,f.startSide!=f.endSide&&(x=n.mapPos(v,f.endSide),x<k)))continue}else if(k=n.mapPos(v,f.startSide),x=n.mapPos(b,f.endSide),k>x||k==x&&f.startSide>0&&f.endSide<=0)continue;(x-k||f.endSide-f.startSide)<0||(c<0&&(c=k),f.point&&(d=Math.max(d,x-k)),a.push(f),s.push(k-c),l.push(x-c))}return{mapped:a.length?new Chunk(s,l,a,d):null,pos:c}}}class RangeSet{constructor(e,n,a,s){this.chunkPos=e,this.chunk=n,this.nextLayer=a,this.maxPoint=s}static create(e,n,a,s){return new RangeSet(e,n,a,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:a=!1,filterFrom:s=0,filterTo:l=this.length}=e,c=e.filter;if(n.length==0&&!c)return this;if(a&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let d=new LayerCursor(this,null,-1).goto(0),u=0,f=[],v=new RangeSetBuilder;for(;d.value||u<n.length;)if(u<n.length&&(d.from-n[u].from||d.startSide-n[u].value.startSide)>=0){let b=n[u++];v.addInner(b.from,b.to,b.value)||f.push(b)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(d.chunkIndex)<n[u].from)&&(!c||s>this.chunkEnd(d.chunkIndex)||l<this.chunkPos[d.chunkIndex])&&v.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||s>d.to||l<d.from||c(d.from,d.to,d.value))&&(v.addInner(d.from,d.to,d.value)||f.push(Range$1.create(d.from,d.to,d.value))),d.next());return v.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:c,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],a=[],s=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],u=this.chunk[c],f=e.touchesRange(d,d+u.length);if(f===!1)s=Math.max(s,u.maxPoint),n.push(u),a.push(e.mapPos(d));else if(f===!0){let{mapped:v,pos:b}=u.map(d,e);v&&(s=Math.max(s,v.maxPoint),n.push(v),a.push(b))}}let l=this.nextLayer.map(e);return n.length==0?l:new RangeSet(a,n,l||RangeSet.empty,s)}between(e,n,a){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],c=this.chunk[s];if(n>=l&&e<=l+c.length&&c.between(l,e-l,n-l,a)===!1)return}this.nextLayer.between(e,n,a)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,a,s,l=-1){let c=e.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=l),d=n.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=l),u=findSharedChunks(c,d,a),f=new SpanCursor(c,u,l),v=new SpanCursor(d,u,l);a.iterGaps((b,k,x)=>compare(f,b,v,k,x,s)),a.empty&&a.length==0&&compare(f,0,v,0,0,s)}static eq(e,n,a=0,s){s==null&&(s=999999999);let l=e.filter(v=>!v.isEmpty&&n.indexOf(v)<0),c=n.filter(v=>!v.isEmpty&&e.indexOf(v)<0);if(l.length!=c.length)return!1;if(!l.length)return!0;let d=findSharedChunks(l,c),u=new SpanCursor(l,d,0).goto(a),f=new SpanCursor(c,d,0).goto(a);for(;;){if(u.to!=f.to||!sameValues(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>s)return!0;u.next(),f.next()}}static spans(e,n,a,s,l=-1){let c=new SpanCursor(e,null,l).goto(n),d=n,u=c.openStart;for(;;){let f=Math.min(c.to,a);if(c.point){let v=c.activeForPoint(c.to),b=c.pointFrom<n?v.length+1:c.point.startSide<0?v.length:Math.min(v.length,u);s.point(d,f,c.point,v,b,c.pointRank),u=Math.min(c.openEnd(f),v.length)}else f>d&&(s.span(d,f,c.active,u),u=c.openEnd(f));if(c.to>a)return u+(c.point&&c.to>a?1:0);d=c.to,c.next()}}static of(e,n=!1){let a=new RangeSetBuilder;for(let s of e instanceof Range$1?[e]:n?lazySort(e):e)a.add(s.from,s.to,s.value);return a.finish()}static join(e){if(!e.length)return RangeSet.empty;let n=e[e.length-1];for(let a=e.length-2;a>=0;a--)for(let s=e[a];s!=RangeSet.empty;s=s.nextLayer)n=new RangeSet(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(o){if(o.length>1)for(let e=o[0],n=1;n<o.length;n++){let a=o[n];if(cmpRange(e,a)>0)return o.slice().sort(cmpRange);e=a}return o}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,a){this.addInner(e,n,a)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,a)}addInner(e,n,a){let s=e-this.lastTo||a.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=n,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let a=n.value.length-1;return this.last=n.value[a],this.lastFrom=n.from[a]+e,this.lastTo=n.to[a]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(o,e,n){let a=new Map;for(let l of o)for(let c=0;c<l.chunk.length;c++)l.chunk[c].maxPoint<=0&&a.set(l.chunk[c],l.chunkPos[c]);let s=new Set;for(let l of e)for(let c=0;c<l.chunk.length;c++){let d=a.get(l.chunk[c]);d!=null&&(n?n.mapPos(d):d)==l.chunkPos[c]&&!(n!=null&&n.touchesRange(d,d+l.chunk[c].length))&&s.add(l.chunk[c])}return s}class LayerCursor{constructor(e,n,a,s=0){this.layer=e,this.skip=n,this.minPoint=a,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,a){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!a||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],a=e+n.from[this.rangeIndex];if(this.from=a,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,a=-1){let s=[];for(let l=0;l<e.length;l++)for(let c=e[l];!c.isEmpty;c=c.nextLayer)c.maxPoint>=a&&s.push(new LayerCursor(c,n,a,l));return s.length==1?s[0]:new HeapCursor(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let a of this.heap)a.goto(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);return this.next(),this}forward(e,n){for(let a of this.heap)a.forward(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(o,e){for(let n=o[e];;){let a=(e<<1)+1;if(a>=o.length)break;let s=o[a];if(a+1<o.length&&s.compare(o[a+1])>=0&&(s=o[a+1],a++),n.compare(s)<0)break;o[a]=n,o[e]=s,e=a}}class SpanCursor{constructor(e,n,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,a)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:a,to:s,rank:l}=this.cursor;for(;n<this.activeRank.length&&(l-this.activeRank[n]||s-this.activeTo[n])>0;)n++;insert(this.active,n,a),insert(this.activeTo,n,s),insert(this.activeRank,n,l),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),a&&remove(a,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(a),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let s=a.length-1;s>=0&&a[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&n.push(this.active[a]);return n.reverse()}openEnd(e){let n=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)n++;return n}}function compare(o,e,n,a,s,l){o.goto(e),n.goto(a);let c=a+s,d=a,u=a-e;for(;;){let f=o.to+u-n.to,v=f||o.endSide-n.endSide,b=v<0?o.to+u:n.to,k=Math.min(b,c);if(o.point||n.point?o.point&&n.point&&(o.point==n.point||o.point.eq(n.point))&&sameValues(o.activeForPoint(o.to),n.activeForPoint(n.to))||l.comparePoint(d,k,o.point,n.point):k>d&&!sameValues(o.active,n.active)&&l.compareRange(d,k,o.active,n.active),b>c)break;(f||o.openEnd!=n.openEnd)&&l.boundChange&&l.boundChange(b),d=b,v<=0&&o.next(),v>=0&&n.next()}}function sameValues(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++)if(o[n]!=e[n]&&!o[n].eq(e[n]))return!1;return!0}function remove(o,e){for(let n=e,a=o.length-1;n<a;n++)o[n]=o[n+1];o.pop()}function insert(o,e,n){for(let a=o.length-1;a>=e;a--)o[a+1]=o[a];o[e]=n}function findMinIndex(o,e){let n=-1,a=1e9;for(let s=0;s<e.length;s++)(e[s]-a||o[s].endSide-o[n].endSide)<0&&(n=s,a=e[s]);return n}countColumn=function(o,e,n=o.length){let a=0;for(let s=0;s<n;)o.charCodeAt(s)==9?(a+=e-a%e,s++):(a++,s=findClusterBreak(o,s));return a};function findColumn(o,e,n,a){for(let s=0,l=0;;){if(l>=e)return s;if(s==o.length)break;l+=o.charCodeAt(s)==9?n-l%n:1,s=findClusterBreak(o,s)}return a===!0?-1:o.length}const C="\u037C",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:a}=n||{};function s(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function l(c,d,u,f){let v=[],b=/^@(\w+)\b/.exec(c[0]),k=b&&b[1]=="keyframes";if(b&&d==null)return u.push(c[0]+";");for(let x in d){let _=d[x];if(/&/.test(x))l(x.split(/,\s*/).map(E=>c.map(B=>E.replace(/&/,B))).reduce((E,B)=>E.concat(B)),_,u);else if(_&&typeof _=="object"){if(!b)throw new RangeError("The value of a property ("+x+") should be a primitive value.");l(s(x),_,v,k)}else _!=null&&v.push(x.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+_+";")}(v.length||k)&&u.push((a&&!b&&!f?c.map(a):c).join(", ")+" {"+v.join(" ")+"}")}for(let c in e)l(s(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,n,a){let s=e[SET],l=a&&a.nonce;s?l&&s.setNonce(l):s=new StyleSet(e,l),s.mount(Array.isArray(n)?n:[n],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,n){let a=e.ownerDocument||e,s=a.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=adoptedSet.get(a);if(l)return e[SET]=l;this.sheet=new s.CSSStyleSheet,adoptedSet.set(a,this)}else this.styleTag=a.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[SET]=this}mount(e,n){let a=this.sheet,s=0,l=0;for(let c=0;c<e.length;c++){let d=e[c],u=this.modules.indexOf(d);if(u<l&&u>-1&&(this.modules.splice(u,1),l--,u=-1),u==-1){if(this.modules.splice(l++,0,d),a)for(let f=0;f<d.rules.length;f++)a.insertRule(d.rules[f],s++)}else{for(;l<u;)s+=this.modules[l++].rules.length;s+=d.rules.length,l++}}if(a)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c;let d=n.head||n;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i$1=0;i$1<10;i$1++)base[48+i$1]=base[96+i$1]=String(i$1);for(var i$1=1;i$1<=24;i$1++)base[i$1+111]="F"+i$1;for(var i$1=65;i$1<=90;i$1++)base[i$1]=String.fromCharCode(i$1+32),shift[i$1]=String.fromCharCode(i$1);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(o){var e=mac$1&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||ie$1&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",n=!e&&o.key||(o.shiftKey?shift:base)[o.keyCode]||o.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function getSelection$1(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function contains$1(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(o,e){if(!e.anchorNode)return!1;try{return contains$1(o,e.anchorNode)}catch{return!1}}function clientRectsFor(o){return o.nodeType==3?textRange(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function isEquivalentPosition(o,e,n,a){return n?scanFor(o,e,n,a,-1)||scanFor(o,e,n,a,1):!1}function domIndex(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function isBlockElement(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}function scanFor(o,e,n,a,s){for(;;){if(o==n&&e==a)return!0;if(e==(s<0?0:maxOffset(o))){if(o.nodeName=="DIV")return!1;let l=o.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(o)+(s<0?0:1),o=l}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=s<0?maxOffset(o):0}else return!1}}function maxOffset(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function flattenRect(o,e){let n=e?o.left:o.right;return{left:n,right:n,top:o.top,bottom:o.bottom}}function windowRect(o){let e=o.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function getScale(o,e){let n=e.width/o.offsetWidth,a=e.height/o.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-o.offsetWidth)<1)&&(n=1),(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.height-o.offsetHeight)<1)&&(a=1),{scaleX:n,scaleY:a}}function scrollRectIntoView(o,e,n,a,s,l,c,d){let u=o.ownerDocument,f=u.defaultView||window;for(let v=o,b=!1;v&&!b;)if(v.nodeType==1){let k,x=v==u.body,_=1,E=1;if(x)k=windowRect(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(v).position)&&(b=!0),v.scrollHeight<=v.clientHeight&&v.scrollWidth<=v.clientWidth){v=v.assignedSlot||v.parentNode;continue}let I=v.getBoundingClientRect();({scaleX:_,scaleY:E}=getScale(v,I)),k={left:I.left,right:I.left+v.clientWidth*_,top:I.top,bottom:I.top+v.clientHeight*E}}let B=0,M=0;if(s=="nearest")e.top<k.top?(M=-(k.top-e.top+c),n>0&&e.bottom>k.bottom+M&&(M=e.bottom-k.bottom+M+c)):e.bottom>k.bottom&&(M=e.bottom-k.bottom+c,n<0&&e.top-M<k.top&&(M=-(k.top+M-e.top+c)));else{let I=e.bottom-e.top,F=k.bottom-k.top;M=(s=="center"&&I<=F?e.top+I/2-F/2:s=="start"||s=="center"&&n<0?e.top-c:e.bottom-F+c)-k.top}if(a=="nearest"?e.left<k.left?(B=-(k.left-e.left+l),n>0&&e.right>k.right+B&&(B=e.right-k.right+B+l)):e.right>k.right&&(B=e.right-k.right+l,n<0&&e.left<k.left+B&&(B=-(k.left+B-e.left+l))):B=(a=="center"?e.left+(e.right-e.left)/2-(k.right-k.left)/2:a=="start"==d?e.left-l:e.right-(k.right-k.left)+l)-k.left,B||M)if(x)f.scrollBy(B,M);else{let I=0,F=0;if(M){let V=v.scrollTop;v.scrollTop+=M/E,F=(v.scrollTop-V)*E}if(B){let V=v.scrollLeft;v.scrollLeft+=B/_,I=(v.scrollLeft-V)*_}e={left:e.left-I,top:e.top-F,right:e.right-I,bottom:e.bottom-F},I&&Math.abs(I-B)<1&&(a="nearest"),F&&Math.abs(F-M)<1&&(s="nearest")}if(x)break;v=v.assignedSlot||v.parentNode}else if(v.nodeType==11)v=v.host;else break}function scrollableParents(o){let e=o.ownerDocument,n,a;for(let s=o.parentNode;s&&!(s==e.body||n&&a);)if(s.nodeType==1)!a&&s.scrollHeight>s.clientHeight&&(a=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:a}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:a}=e;this.set(n,Math.min(e.anchorOffset,n?maxOffset(n):0),a,Math.min(e.focusOffset,a?maxOffset(a):0))}set(e,n,a,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=a,this.focusOffset=s}}let preventScrollSupported=null;function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=[];for(let n=o;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let a=e[n++],s=e[n++],l=e[n++];a.scrollTop!=s&&(a.scrollTop=s),a.scrollLeft!=l&&(a.scrollLeft=l)}}}let scratchRange;function textRange(o,e,n=e){let a=scratchRange||(scratchRange=document.createRange());return a.setEnd(o,n),a.setStart(o,e),a}function dispatchKey(o,e,n,a){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};a&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=a);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,o.dispatchEvent(l);let c=new KeyboardEvent("keyup",s);return c.synthetic=!0,o.dispatchEvent(c),l.defaultPrevented||c.defaultPrevented}function getRoot(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function clearAttributes(o){for(;o.attributes.length;)o.removeAttributeNode(o.attributes[0])}function atElementStart(o,e){let n=e.focusNode,a=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=a)return!1;for(a=Math.min(a,maxOffset(n));;)if(a){if(n.nodeType!=1)return!1;let s=n.childNodes[a-1];s.contentEditable=="false"?a--:(n=s,a=maxOffset(n))}else{if(n==o)return!0;a=domIndex(n),n=n.parentNode}}function isScrolledToBottom(o){return o.scrollTop>Math.max(1,o.scrollHeight-o.clientHeight-4)}function textNodeBefore(o,e){for(let n=o,a=e;;){if(n.nodeType==3&&a>0)return{node:n,offset:a};if(n.nodeType==1&&a>0){if(n.contentEditable=="false")return null;n=n.childNodes[a-1],a=maxOffset(n)}else if(n.parentNode&&!isBlockElement(n))a=domIndex(n),n=n.parentNode;else return null}}function textNodeAfter(o,e){for(let n=o,a=e;;){if(n.nodeType==3&&a<n.nodeValue.length)return{node:n,offset:a};if(n.nodeType==1&&a<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[a],a=0}else if(n.parentNode&&!isBlockElement(n))a=domIndex(n)+1,n=n.parentNode;else return null}}class DOMPos{constructor(e,n,a=!0){this.node=e,this.offset=n,this.precise=a}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let a of this.children){if(a==e)return n;n+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let a=this.dom,s=null,l;for(let c of this.children){if(c.flags&7){if(!c.dom&&(l=s?s.nextSibling:a.firstChild)){let d=ContentView.get(l);(!d||!d.parent&&d.canReuseDOM(c))&&c.reuseDOM(l)}c.sync(e,n),c.flags&=-8}if(l=s?s.nextSibling:a.firstChild,n&&!n.written&&n.node==a&&l!=c.dom&&(n.written=!0),c.dom.parentNode==a)for(;l&&l!=c.dom;)l=rm$1(l);else a.insertBefore(c.dom,l);s=c.dom}for(l=s?s.nextSibling:a.firstChild,l&&n&&n.node==a&&(n.written=!0);l;)l=rm$1(l)}else if(this.flags&1)for(let a of this.children)a.flags&7&&(a.sync(e,n),a.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let a;if(e==this.dom)a=this.dom.childNodes[n];else{let s=maxOffset(e)==0?0:n==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!ContentView.get(a);)a=a.nextSibling;if(!a)return this.length;for(let s=0,l=0;;s++){let c=this.children[s];if(c.dom==a)return l;l+=c.length+c.breakAfter}}domBoundsAround(e,n,a=0){let s=-1,l=-1,c=-1,d=-1;for(let u=0,f=a,v=a;u<this.children.length;u++){let b=this.children[u],k=f+b.length;if(f<e&&k>n)return b.domBoundsAround(e,n,f);if(k>=e&&s==-1&&(s=u,l=f),f>n&&b.dom.parentNode==this.dom){c=u,d=v;break}v=k,f=k+b.breakAfter}return{from:l,to:d<0?a+this.length:d,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,a=noChildren){this.markDirty();for(let s=e;s<n;s++){let l=this.children[s];l.parent==this&&a.indexOf(l)<0&&l.destroy()}a.length<250?this.children.splice(e,n-e,...a):this.children=[].concat(this.children.slice(0,e),a,this.children.slice(n));for(let s=0;s<a.length;s++)a[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,a,s,l,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ChildCursor{constructor(e,n,a){this.children=e,this.pos=n,this.i=a,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function replaceRange(o,e,n,a,s,l,c,d,u){let{children:f}=o,v=f.length?f[e]:null,b=l.length?l[l.length-1]:null,k=b?b.breakAfter:c;if(!(e==a&&v&&!c&&!k&&l.length<2&&v.merge(n,s,l.length?b:null,n==0,d,u))){if(a<f.length){let x=f[a];x&&(s<x.length||x.breakAfter&&(b!=null&&b.breakAfter))?(e==a&&(x=x.split(s),s=0),!k&&b&&x.merge(0,s,b,!0,0,u)?l[l.length-1]=x:((s||x.children.length&&!x.children[0].length)&&x.merge(0,s,null,!1,0,u),l.push(x))):x!=null&&x.breakAfter&&(b?b.breakAfter=1:c=1),a++}for(v&&(v.breakAfter=c,n>0&&(!c&&l.length&&v.merge(n,v.length,l[0],!1,d,0)?v.breakAfter=l.shift().breakAfter:(n<v.length||v.children.length&&v.children[v.children.length-1].length==0)&&v.merge(n,v.length,null,!1,d,0),e++));e<a&&l.length;)if(f[a-1].become(l[l.length-1]))a--,l.pop(),u=l.length?0:d;else if(f[e].become(l[0]))e++,l.shift(),d=l.length?0:u;else break;!l.length&&e&&a<f.length&&!f[e-1].breakAfter&&f[a].merge(0,0,f[e-1],!1,d,u)&&e--,(e<a||l.length)&&o.replaceChildren(e,a,l)}}function mergeChildrenInto(o,e,n,a,s,l){let c=o.childCursor(),{i:d,off:u}=c.findPos(n,1),{i:f,off:v}=c.findPos(e,-1),b=e-n;for(let k of a)b+=k.length;o.length+=b,replaceRange(o,f,v,d,u,a,0,s,l)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,a){return this.flags&8||a&&(!(a instanceof TextView)||this.length-(n-e)+a.length>MaxJoinLen||a.flags&8)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,n,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return textCoords(this.dom,e,n)}}class MarkView extends ContentView{constructor(e,n=[],a=0){super(),this.mark=e,this.children=n,this.length=a;for(let s of n)s.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,a,s,l,c){return a&&(!(a instanceof MarkView&&a.mark.eq(this.mark))||e&&l<=0||n<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,n,a?a.children.slice():[],l-1,c-1),this.markDirty(),!0)}split(e){let n=[],a=0,s=-1,l=0;for(let d of this.children){let u=a+d.length;u>e&&n.push(a<e?d.split(e-a):d),s<0&&a>=e&&(s=l),a=u,l++}let c=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new MarkView(this.mark,n,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,n){return coordsInChildren(this,e,n)}}function textCoords(o,e,n){let a=o.nodeValue.length;e>a&&(e=a);let s=e,l=e,c=0;e==0&&n<0||e==a&&n>=0?browser.chrome||browser.gecko||(e?(s--,c=1):l<a&&(l++,c=-1)):n<0?s--:l<a&&l++;let d=textRange(o,s,l).getClientRects();if(!d.length)return null;let u=d[(c?c<0:n>=0)?0:d.length-1];return browser.safari&&!c&&u.width==0&&(u=Array.prototype.find.call(d,f=>f.width)||u),c?flattenRect(u,c<0):u||null}class WidgetView extends ContentView{static create(e,n,a){return new WidgetView(e,n,a)}constructor(e,n,a){super(),this.widget=e,this.length=n,this.side=a,this.prevWidget=null}split(e){let n=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,a,s,l,c){return a&&(!(a instanceof WidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,a=n&&n.state.doc,s=this.posAtStart;return a?a.slice(s,s+this.length):Text.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let a=this.widget.coordsAt(this.dom,e,n);if(a)return a;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let c=this.side?this.side<0:e>0;for(let d=c?s.length-1:0;l=s[d],!(e>0?d==0:d==s.length-1||l.top<l.bottom);d+=c?-1:1);return flattenRect(l,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(o,e){let n=o.dom,{children:a}=o,s=0;for(let l=0;s<a.length;s++){let c=a[s],d=l+c.length;if(!(d==l&&c.getSide()<=0)){if(e>l&&e<d&&c.dom.parentNode==n)return c.domAtPos(e-l);if(e<=l)break;l=d}}for(let l=s;l>0;l--){let c=a[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(let l=s;l<a.length;l++){let c=a[l];if(c.dom.parentNode==n)return c.domAtPos(0)}return new DOMPos(n,0)}function joinInlineInto(o,e,n){let a,{children:s}=o;n>0&&e instanceof MarkView&&s.length&&(a=s[s.length-1])instanceof MarkView&&a.mark.eq(e.mark)?joinInlineInto(a,e.children[0],n-1):(s.push(e),e.setParent(o)),o.length+=e.length}function coordsInChildren(o,e,n){let a=null,s=-1,l=null,c=-1;function d(f,v){for(let b=0,k=0;b<f.children.length&&k<=v;b++){let x=f.children[b],_=k+x.length;_>=v&&(x.children.length?d(x,v-k):(!l||l.isHidden&&n>0)&&(_>v||k==_&&x.getSide()>0)?(l=x,c=v-k):(k<v||k==_&&x.getSide()<0&&!x.isHidden)&&(a=x,s=v-k)),k=_}}d(o,e);let u=(n<0?a:l)||a||l;return u?u.coordsAt(Math.max(0,u==a?s:c),n):fallbackRect(o)}function fallbackRect(o){let e=o.dom.lastChild;if(!e)return o.dom.getBoundingClientRect();let n=clientRectsFor(e);return n[n.length-1]||null}function combineAttrs(o,e){for(let n in o)n=="class"&&e.class?e.class+=" "+o.class:n=="style"&&e.style?e.style+=";"+o.style:e[n]=o[n];return e}const noAttrs=Object.create(null);function attrsEq(o,e,n){if(o==e)return!0;o||(o=noAttrs),e||(e=noAttrs);let a=Object.keys(o),s=Object.keys(e);if(a.length-(n&&a.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let l of a)if(l!=n&&(s.indexOf(l)==-1||o[l]!==e[l]))return!1;return!0}function updateAttrs(o,e,n){let a=!1;if(e)for(let s in e)n&&s in n||(a=!0,s=="style"?o.style.cssText="":o.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(a=!0,s=="style"?o.style.cssText=n[s]:o.setAttribute(s,n[s]));return a}function getAttrs(o){let e=Object.create(null);for(let n=0;n<o.attributes.length;n++){let a=o.attributes[n];e[a.name]=a.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,a){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,a,s){super(),this.startSide=e,this.endSide=n,this.widget=a,this.spec=s}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),a=!!e.block;return n+=a&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,a,e.widget||null,!1)}static replace(e){let n=!!e.block,a,s;if(e.isBlockGap)a=-5e8,s=4e8;else{let{start:l,end:c}=getInclusive(e,n);a=(l?n?-3e8:-1:5e8)-1,s=(c?n?2e8:1:-6e8)+1}return new PointDecoration(e,a,s,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:a}=getInclusive(e);super(n?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,a;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((a=e.attrs)===null||a===void 0?void 0:a.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,a,s,l,c){super(n,a,l,e),this.block=s,this.isReplace=c,this.mapMode=s?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(o,e=!1){let{inclusiveStart:n,inclusiveEnd:a}=o;return n==null&&(n=o.inclusive),a==null&&(a=o.inclusive),{start:n??e,end:a??e}}function widgetsEq(o,e){return o==e||!!(o&&e&&o.compare(e))}function addRange(o,e,n,a=0){let s=n.length-1;s>=0&&n[s]+a>=o?n[s]=Math.max(n[s],e):n.push(o,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,a,s,l,c){if(a){if(!(a instanceof LineView))return!1;this.dom||a.transferDOM(this)}return s&&this.setDeco(a?a.attrs:null),mergeChildrenInto(this,e,n,a?a.children.slice():[],l,c),!0}split(e){let n=new LineView;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:a,off:s}=this.childPos(e);s&&(n.append(this.children[a].split(s),0),this.children[a].merge(s,this.children[a].length,null,!1,0,0),a++);for(let l=a;l<this.children.length;l++)n.append(this.children[l],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){joinInlineInto(this,e,n)}addLineDeco(e){let n=e.spec.attributes,a=e.spec.class;n&&(this.attrs=combineAttrs(n,this.attrs||{})),a&&(this.attrs=combineAttrs({class:a},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var a;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&ContentView.get(s)instanceof MarkView;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((a=ContentView.get(s))===null||a===void 0?void 0:a.isEditable)==!1&&(!browser.ios||!this.children.some(l=>l instanceof TextView))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let a of this.children){if(!(a instanceof TextView)||/[^ -~]/.test(a.text))return null;let s=clientRectsFor(a.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let a=coordsInChildren(this,e,n);if(!this.children.length&&a&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=a.bottom-a.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let c=(l-s.textHeight)/2;return{top:a.top+c,bottom:a.bottom-c,left:a.left,right:a.left}}}return a}become(e){return e instanceof LineView&&this.children.length==0&&e.children.length==0&&attrsEq(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let a=0,s=0;a<e.children.length;a++){let l=e.children[a],c=s+l.length;if(c>=n){if(l instanceof LineView)return l;if(c>n)break}s=c+l.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,n,a){super(),this.widget=e,this.length=n,this.deco=a,this.breakAfter=0,this.prevWidget=null}merge(e,n,a,s,l,c){return a&&(!(a instanceof BlockWidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let a=new BlockWidgetView(this.widget,n,this.deco);return a.breakAfter=this.breakAfter,a}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:a}=this.deco;return n==a?!1:e<0?n<0:a>0}}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(e,n,a,s){this.doc=e,this.pos=n,this.end=a,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,n,a){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:c,done:d}=this.cursor.next(this.skip);if(this.skip=0,d)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-a)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+s)),n),a),this.atCursorPos=!0,this.textOff+=s,e-=s,a=0}}span(e,n,a,s){this.buildText(n-e,a,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,a,s,l,c){if(this.disallowBlockEffectsFor[c]&&a instanceof PointDecoration){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let d=n-e;if(a instanceof PointDecoration)if(a.block)a.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(a.widget||NullWidget.block,d,a));else{let u=WidgetView.create(a.widget||NullWidget.inline,d,d?0:a.startSide),f=this.atCursorPos&&!u.isEditable&&l<=s.length&&(e<n||a.startSide>0),v=!u.isEditable&&(e<n||l>s.length||a.startSide<=0),b=this.getLine();this.pendingBuffer==2&&!f&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),f&&(b.append(wrapMarks(new WidgetBufferView(1),s),l),l=s.length+Math.max(0,l-s.length)),b.append(wrapMarks(u,s),l),this.atCursorPos=v,this.pendingBuffer=v?e<n||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);d&&(this.textOff+d<=this.text.length?this.textOff+=d:(this.skip+=d-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=l)}static build(e,n,a,s,l){let c=new ContentBuilder(e,n,a,l);return c.openEnd=RangeSet.spans(s,n,a,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(o,e){for(let n of e)o=new MarkView(n,[o],o.length);return o}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");var Direction=function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(o){let e=[];for(let n=0;n<o.length;n++)e.push(1<<+o[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),n=o.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(o){return o<=247?LowTypes[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?ArabicTypes[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,n,a){this.from=e,this.to=n,this.level=a}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,a,s){let l=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=n&&d.to>=n){if(d.level==a)return c;(l<0||(s!=0?s<0?d.from<n:d.to>n:e[l].level>d.level))&&(l=c)}}if(l<0)throw new RangeError("Index out of range");return l}}function isolatesEq(o,e){if(o.length!=e.length)return!1;for(let n=0;n<o.length;n++){let a=o[n],s=e[n];if(a.from!=s.from||a.to!=s.to||a.direction!=s.direction||!isolatesEq(a.inner,s.inner))return!1}return!0}const types=[];function computeCharTypes(o,e,n,a,s){for(let l=0;l<=a.length;l++){let c=l?a[l-1].to:e,d=l<a.length?a[l].from:n,u=l?256:s;for(let f=c,v=u,b=u;f<d;f++){let k=charType(o.charCodeAt(f));k==512?k=v:k==8&&b==4&&(k=16),types[f]=k==4?2:k,k&7&&(b=k),v=k}for(let f=c,v=u,b=u;f<d;f++){let k=types[f];if(k==128)f<d-1&&v==types[f+1]&&v&24?k=types[f]=v:types[f]=256;else if(k==64){let x=f+1;for(;x<d&&types[x]==64;)x++;let _=f&&v==8||x<n&&types[x]==8?b==1?1:8:256;for(let E=f;E<x;E++)types[E]=_;f=x-1}else k==8&&b==1&&(types[f]=1);v=k,k&7&&(b=k)}}}function processBracketPairs(o,e,n,a,s){let l=s==1?2:1;for(let c=0,d=0,u=0;c<=a.length;c++){let f=c?a[c-1].to:e,v=c<a.length?a[c].from:n;for(let b=f,k,x,_;b<v;b++)if(x=Brackets[k=o.charCodeAt(b)])if(x<0){for(let E=d-3;E>=0;E-=3)if(BracketStack[E+1]==-x){let B=BracketStack[E+2],M=B&2?s:B&4?B&1?l:s:0;M&&(types[b]=types[BracketStack[E]]=M),d=E;break}}else{if(BracketStack.length==189)break;BracketStack[d++]=b,BracketStack[d++]=k,BracketStack[d++]=u}else if((_=types[b])==2||_==1){let E=_==s;u=E?0:1;for(let B=d-3;B>=0;B-=3){let M=BracketStack[B+2];if(M&2)break;if(E)BracketStack[B+2]|=2;else{if(M&4)break;BracketStack[B+2]|=4}}}}}function processNeutrals(o,e,n,a){for(let s=0,l=a;s<=n.length;s++){let c=s?n[s-1].to:o,d=s<n.length?n[s].from:e;for(let u=c;u<d;){let f=types[u];if(f==256){let v=u+1;for(;;)if(v==d){if(s==n.length)break;v=n[s++].to,d=s<n.length?n[s].from:e}else if(types[v]==256)v++;else break;let b=l==1,k=(v<e?types[v]:a)==1,x=b==k?b?1:2:a;for(let _=v,E=s,B=E?n[E-1].to:o;_>u;)_==B&&(_=n[--E].from,B=E?n[E-1].to:o),types[--_]=x;u=v}else l=f,u++}}}function emitSpans(o,e,n,a,s,l,c){let d=a%2?2:1;if(a%2==s%2)for(let u=e,f=0;u<n;){let v=!0,b=!1;if(f==l.length||u<l[f].from){let E=types[u];E!=d&&(v=!1,b=E==16)}let k=!v&&d==1?[]:null,x=v?a:a+1,_=u;e:for(;;)if(f<l.length&&_==l[f].from){if(b)break e;let E=l[f];if(!v)for(let B=E.to,M=f+1;;){if(B==n)break e;if(M<l.length&&l[M].from==B)B=l[M++].to;else{if(types[B]==d)break e;break}}if(f++,k)k.push(E);else{E.from>u&&c.push(new BidiSpan(u,E.from,x));let B=E.direction==LTR!=!(x%2);computeSectionOrder(o,B?a+1:a,s,E.inner,E.from,E.to,c),u=E.to}_=E.to}else{if(_==n||(v?types[_]!=d:types[_]==d))break;_++}k?emitSpans(o,u,_,a+1,s,k,c):u<_&&c.push(new BidiSpan(u,_,x)),u=_}else for(let u=n,f=l.length;u>e;){let v=!0,b=!1;if(!f||u>l[f-1].to){let E=types[u-1];E!=d&&(v=!1,b=E==16)}let k=!v&&d==1?[]:null,x=v?a:a+1,_=u;e:for(;;)if(f&&_==l[f-1].to){if(b)break e;let E=l[--f];if(!v)for(let B=E.from,M=f;;){if(B==e)break e;if(M&&l[M-1].to==B)B=l[--M].from;else{if(types[B-1]==d)break e;break}}if(k)k.push(E);else{E.to<u&&c.push(new BidiSpan(E.to,u,x));let B=E.direction==LTR!=!(x%2);computeSectionOrder(o,B?a+1:a,s,E.inner,E.from,E.to,c),u=E.from}_=E.from}else{if(_==e||(v?types[_-1]!=d:types[_-1]==d))break;_--}k?emitSpans(o,_,u,a+1,s,k,c):_<u&&c.push(new BidiSpan(_,u,x)),u=_}}function computeSectionOrder(o,e,n,a,s,l,c){let d=e%2?2:1;computeCharTypes(o,s,l,a,d),processBracketPairs(o,s,l,a,d),processNeutrals(s,l,a,d),emitSpans(o,s,l,e,n,a,c)}function computeOrder(o,e,n){if(!o)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!n.length&&!BidiRE.test(o))return trivialOrder(o.length);if(n.length)for(;o.length>types.length;)types[types.length]=256;let a=[],s=e==LTR?0:1;return computeSectionOrder(o,s,s,n,0,o.length,a),a}function trivialOrder(o){return[new BidiSpan(0,o,0)]}let movedOver="";function moveVisually(o,e,n,a,s){var l;let c=a.head-o.from,d=BidiSpan.find(e,c,(l=a.bidiLevel)!==null&&l!==void 0?l:-1,a.assoc),u=e[d],f=u.side(s,n);if(c==f){let k=d+=s?1:-1;if(k<0||k>=e.length)return null;u=e[d=k],c=u.side(!s,n),f=u.side(s,n)}let v=findClusterBreak(o.text,c,u.forward(s,n));(v<u.from||v>u.to)&&(v=f),movedOver=o.text.slice(Math.min(c,v),Math.max(c,v));let b=d==(s?e.length-1:0)?null:e[d+(s?1:-1)];return b&&v==f&&b.level+(s?0:1)<u.level?EditorSelection.cursor(b.side(!s,n)+o.from,b.forward(s,n)?1:-1,b.level):EditorSelection.cursor(v+o.from,u.forward(s,n)?-1:1,u.level)}function autoDirection(o,e,n){for(let a=e;a<n;a++){let s=charType(o.charCodeAt(a));if(s==1)return LTR;if(s==2||s==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:o=>o.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:o=>o.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,n="nearest",a="nearest",s=5,l=5,c=!1){this.range=e,this.y=n,this.x=a,this.yMargin=s,this.xMargin=l,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView=StateEffect.define({map:(o,e)=>o.map(e)}),setEditContextFormatting=StateEffect.define();function logException(o,e,n){let a=o.facet(exceptionSink);a.length?a[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const editable=Facet.define({combine:o=>o.length?o[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,n,a,s,l){this.id=e,this.create=n,this.domEventHandlers=a,this.domEventObservers=s,this.extension=l(this)}static define(e,n){const{eventHandlers:a,eventObservers:s,provide:l,decorations:c}=n||{};return new ViewPlugin(nextPluginID++,e,a,s,d=>{let u=[viewPlugin.of(d)];return c&&u.push(decorations.of(f=>{let v=f.plugin(d);return v?c(v):Decoration.none})),l&&u.push(l(d)),u})}static fromClass(e,n){return ViewPlugin.define(a=>new e(a),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(a){if(logException(n.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(a){logException(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(o,e){let n=o.state.facet(bidiIsolatedRanges);if(!n.length)return n;let a=n.map(l=>l instanceof Function?l(o):l),s=[];return RangeSet.spans(a,e.from,e.to,{point(){},span(l,c,d,u){let f=l-e.from,v=c-e.from,b=s;for(let k=d.length-1;k>=0;k--,u--){let x=d[k].spec.bidiIsolate,_;if(x==null&&(x=autoDirection(e.text,f,v)),u>0&&b.length&&(_=b[b.length-1]).to==f&&_.direction==x)_.to=v,b=_.inner;else{let E={from:f,to:v,direction:x,inner:[]};b.push(E),b=E.inner}}}}),s}const scrollMargins=Facet.define();function getScrollMargins(o){let e=0,n=0,a=0,s=0;for(let l of o.state.facet(scrollMargins)){let c=l(o);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(n=Math.max(n,c.right)),c.top!=null&&(a=Math.max(a,c.top)),c.bottom!=null&&(s=Math.max(s,c.bottom)))}return{left:e,right:n,top:a,bottom:s}}const styleModule=Facet.define();class ChangedRange{constructor(e,n,a,s){this.fromA=e,this.toA=n,this.fromB=a,this.toB=s}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,a=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>a.toA)){if(s.toA<a.fromA)break;a=a.join(s),e.splice(n-1,1)}}return e.splice(n,0,a),e}static extendWithRanges(e,n){if(n.length==0)return e;let a=[];for(let s=0,l=0,c=0,d=0;;s++){let u=s==e.length?null:e[s],f=c-d,v=u?u.fromB:1e9;for(;l<n.length&&n[l]<v;){let b=n[l],k=n[l+1],x=Math.max(d,b),_=Math.min(v,k);if(x<=_&&new ChangedRange(x+f,_+f,x,_).addToSet(a),k>v)break;l+=2}if(!u)return a;new ChangedRange(u.fromA,u.toA,u.fromB,u.toB).addToSet(a),c=u.toA,d=u.toB}}}class ViewUpdate{constructor(e,n,a){this.view=e,this.state=n,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of a)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,c,d,u)=>s.push(new ChangedRange(l,c,d,u))),this.changedRanges=s}static create(e,n,a){return new ViewUpdate(e,n,a)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let a=e.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:f,toA:v})=>v<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?findCompositionRange(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:v}=this.hasComposition;a=new ChangedRange(f,v,e.changes.mapPos(f,-1),e.changes.mapPos(v,1)).addToSet(a.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(browser.ie||browser.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.updateDeco(),u=findChangedDeco(c,d,e.changes);return a=ChangedRange.extendWithRanges(a,u),!(this.flags&7)&&a.length==0?!1:(this.updateInner(a,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,a);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||s.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&l.push(c.dom);s.updateGaps(l)}updateChildren(e,n,a){let s=a?a.range.addToSet(e.slice()):e,l=this.childCursor(n);for(let c=s.length-1;;c--){let d=c>=0?s[c]:null;if(!d)break;let{fromA:u,toA:f,fromB:v,toB:b}=d,k,x,_,E;if(a&&a.range.fromB<b&&a.range.toB>v){let V=ContentBuilder.build(this.view.state.doc,v,a.range.fromB,this.decorations,this.dynamicDecorationMap),L=ContentBuilder.build(this.view.state.doc,a.range.toB,b,this.decorations,this.dynamicDecorationMap);x=V.breakAtStart,_=V.openStart,E=L.openEnd;let U=this.compositionView(a);L.breakAtStart?U.breakAfter=1:L.content.length&&U.merge(U.length,U.length,L.content[0],!1,L.openStart,0)&&(U.breakAfter=L.content[0].breakAfter,L.content.shift()),V.content.length&&U.merge(0,0,V.content[V.content.length-1],!0,0,V.openEnd)&&V.content.pop(),k=V.content.concat(U).concat(L.content)}else({content:k,breakAtStart:x,openStart:_,openEnd:E}=ContentBuilder.build(this.view.state.doc,v,b,this.decorations,this.dynamicDecorationMap));let{i:B,off:M}=l.findPos(f,1),{i:I,off:F}=l.findPos(u,-1);replaceRange(this,I,F,B,M,k,x,_,E)}a&&this.fixCompositionDOM(a)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let a of n.effects)a.is(setEditContextFormatting)&&(this.editContextFormatting=a.value)}compositionView(e){let n=new TextView(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new MarkView(s,[n],n.length);let a=new LineView;return a.append(n,0),a}fixCompositionDOM(e){let n=(l,c)=>{c.flags|=8|(c.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(c);let d=ContentView.get(l);d&&d!=c&&(d.dom=null),c.setDOM(l)},a=this.childPos(e.range.fromB,1),s=this.children[a.i];n(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)a=s.childPos(a.off,1),s=s.children[a.i],n(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,s=a==this.dom,l=!s&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(s||n||l))return;let c=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(d.anchor)),f=d.empty?u:this.moveToLine(this.domAtPos(d.head));if(browser.gecko&&d.empty&&!this.hasComposition&&betweenUneditable(u)){let b=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(b,u.node.childNodes[u.offset]||null)),u=f=new DOMPos(b,0),c=!0}let v=this.view.observer.selectionRange;(c||!v.focusNode||(!isEquivalentPosition(u.node,u.offset,v.anchorNode,v.anchorOffset)||!isEquivalentPosition(f.node,f.offset,v.focusNode,v.focusOffset))&&!this.suppressWidgetCursorChange(v,d))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(v.focusNode)&&inUneditable(v.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let b=getSelection$1(this.view.root);if(b)if(d.empty){if(browser.gecko){let k=nextToUneditable(u.node,u.offset);if(k&&k!=3){let x=(k==1?textNodeBefore:textNodeAfter)(u.node,u.offset);x&&(u=new DOMPos(x.node,x.offset))}}b.collapse(u.node,u.offset),d.bidiLevel!=null&&b.caretBidiLevel!==void 0&&(b.caretBidiLevel=d.bidiLevel)}else if(b.extend){b.collapse(u.node,u.offset);try{b.extend(f.node,f.offset)}catch{}}else{let k=document.createRange();d.anchor>d.head&&([u,f]=[f,u]),k.setEnd(f.node,f.offset),k.setStart(u.node,u.offset),b.removeAllRanges(),b.addRange(k)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(u,f)),this.impreciseAnchor=u.precise?null:new DOMPos(v.anchorNode,v.anchorOffset),this.impreciseHead=f.precise?null:new DOMPos(v.focusNode,v.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,a=getSelection$1(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!a||!n.empty||!n.assoc||!a.modify)return;let c=LineView.find(this,n.head);if(!c)return;let d=c.posAtStart;if(n.head==d||n.head==d+c.length)return;let u=this.coordsAt(n.head,-1),f=this.coordsAt(n.head,1);if(!u||!f||u.bottom>f.top)return;let v=this.domAtPos(n.head+n.assoc);a.collapse(v.node,v.offset),a.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let b=e.observer.selectionRange;e.docView.posFromDOM(b.anchorNode,b.anchorOffset)!=n.from&&a.collapse(s,l)}moveToLine(e){let n=this.dom,a;if(e.node!=n)return e;for(let s=e.offset;!a&&s<n.childNodes.length;s++){let l=ContentView.get(n.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(0))}for(let s=e.offset-1;!a&&s>=0;s--){let l=ContentView.get(n.childNodes[s]);l instanceof LineView&&(a=l.domAtPos(l.length))}return a?new DOMPos(a.node,a.offset,!0):e}nearest(e){for(let n=e;n;){let a=ContentView.get(n);if(a&&a.rootView==this)return a;n=n.parentNode}return null}posFromDOM(e,n){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,n)+a.posAtStart}domAtPos(e){let{i:n,off:a}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(a<s.length||s instanceof LineView)break;n++,a=0}return this.children[n].domAtPos(a)}coordsAt(e,n){let a=null,s=0;for(let l=this.length,c=this.children.length-1;c>=0;c--){let d=this.children[c],u=l-d.breakAfter,f=u-d.length;if(u<e)break;if(f<=e&&(f<e||d.covers(-1))&&(u>e||d.covers(1))&&(!a||d instanceof LineView&&!(a instanceof LineView&&n>=0)))a=d,s=f;else if(a&&f==e&&u==e&&d instanceof BlockWidgetView&&Math.abs(n)<2){if(d.deco.startSide<0)break;c&&(a=null)}l=f}return a?a.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:a}=this.childPos(e,1),s=this.children[n];if(!(s instanceof LineView))return null;for(;s.children.length;){let{i:d,off:u}=s.childPos(a,1);for(;;d++){if(d==s.children.length)return null;if((s=s.children[d]).length)break}a=u}if(!(s instanceof TextView))return null;let l=findClusterBreak(s.text,a);if(l==a)return null;let c=textRange(s.dom,a,l).getClientRects();for(let d=0;d<c.length;d++){let u=c[d];if(d==c.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let n=[],{from:a,to:s}=e,l=this.view.contentDOM.clientWidth,c=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,u=this.view.textDirection==Direction.LTR;for(let f=0,v=0;v<this.children.length;v++){let b=this.children[v],k=f+b.length;if(k>s)break;if(f>=a){let x=b.dom.getBoundingClientRect();if(n.push(x.height),c){let _=b.dom.lastChild,E=_?clientRectsFor(_):[];if(E.length){let B=E[E.length-1],M=u?B.right-x.left:x.right-B.left;M>d&&(d=M,this.minWidth=l,this.minWidthFrom=f,this.minWidthTo=k)}}}f=k+b.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let l of this.children)if(l instanceof LineView){let c=l.measureTextSize();if(c)return c}let e=document.createElement("div"),n,a,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=clientRectsFor(e.firstChild)[0];n=e.getBoundingClientRect().height,a=l?l.width/27:7,s=l?l.height:n,e.remove()}),{lineHeight:n,charWidth:a,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ChildCursor(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let a=0,s=0;;s++){let l=s==n.viewports.length?null:n.viewports[s],c=l?l.from-1:this.length;if(c>a){let d=(n.lineBlockAt(c).bottom-n.lineBlockAt(a).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(d),block:!0,inclusive:!0,isBlockGap:!0}).range(a,c))}if(!l)break;a=l.to+1}return Decoration.set(e)}updateDeco(){let e=1,n=this.view.state.facet(decorations).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),a=!1,s=this.view.state.facet(outerDecorations).map((l,c)=>{let d=typeof l=="function";return d&&(a=!0),d?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=a,n.push(RangeSet.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(scrollHandler))try{if(f(this.view,e.range,e))return!0}catch(v){logException(this.view.state,v,"scroll handler")}let{range:n}=e,a=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!a)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(a={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top),right:Math.max(a.right,s.right),bottom:Math.max(a.bottom,s.bottom)});let l=getScrollMargins(this.view),c={left:a.left-l.left,top:a.top-l.top,right:a.right+l.right,bottom:a.bottom+l.bottom},{offsetWidth:d,offsetHeight:u}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Direction.LTR)}}function betweenUneditable(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}function findCompositionNode(o,e){let n=o.observer.selectionRange;if(!n.focusNode)return null;let a=textNodeBefore(n.focusNode,n.focusOffset),s=textNodeAfter(n.focusNode,n.focusOffset),l=a||s;if(s&&a&&s.node!=a.node){let d=ContentView.get(s.node);if(!d||d instanceof TextView&&d.text!=s.node.nodeValue)l=s;else if(o.docView.lastCompositionAfterCursor){let u=ContentView.get(a.node);!u||u instanceof TextView&&u.text!=a.node.nodeValue||(l=s)}}if(o.docView.lastCompositionAfterCursor=l!=a,!l)return null;let c=e-l.offset;return{from:c,to:c+l.node.nodeValue.length,node:l.node}}function findCompositionRange(o,e,n){let a=findCompositionNode(o,n);if(!a)return null;let{node:s,from:l,to:c}=a,d=s.nodeValue;if(/[\n\r]/.test(d)||o.state.doc.sliceString(a.from,a.to)!=d)return null;let u=e.invertedDesc,f=new ChangedRange(u.mapPos(l),u.mapPos(c),l,c),v=[];for(let b=s.parentNode;;b=b.parentNode){let k=ContentView.get(b);if(k instanceof MarkView)v.push({node:b,deco:k.mark});else{if(k instanceof LineView||b.nodeName=="DIV"&&b.parentNode==o.contentDOM)return{range:f,text:s,marks:v,line:b};if(b!=o.contentDOM)v.push({node:b,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(b),tagName:b.tagName.toLowerCase()})});else return null}}}function nextToUneditable(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(o,e){addRange(o,e,this.changes)}comparePoint(o,e){addRange(o,e,this.changes)}boundChange(o){addRange(o,o,this.changes)}};function findChangedDeco(o,e,n){let a=new DecorationComparator$1;return RangeSet.compare(o,e,n,a),a.changes}function inUneditable(o,e){for(let n=o;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function touchesComposition(o,e){let n=!1;return e&&o.iterChangedRanges((a,s)=>{a<e.to&&s>e.from&&(n=!0)}),n}function groupAt(o,e,n=1){let a=o.charCategorizer(e),s=o.doc.lineAt(e),l=e-s.from;if(s.length==0)return EditorSelection.cursor(e);l==0?n=1:l==s.length&&(n=-1);let c=l,d=l;n<0?c=findClusterBreak(s.text,l,!1):d=findClusterBreak(s.text,l);let u=a(s.text.slice(c,d));for(;c>0;){let f=findClusterBreak(s.text,c,!1);if(a(s.text.slice(f,c))!=u)break;c=f}for(;d<s.length;){let f=findClusterBreak(s.text,d);if(a(s.text.slice(d,f))!=u)break;d=f}return EditorSelection.range(c+s.from,d+s.from)}function getdx(o,e){return e.left>o?e.left-o:Math.max(0,o-e.right)}function getdy(o,e){return e.top>o?e.top-o:Math.max(0,o-e.bottom)}function yOverlap(o,e){return o.top<e.bottom-1&&o.bottom>e.top+1}function upTop(o,e){return e<o.top?{top:e,left:o.left,right:o.right,bottom:o.bottom}:o}function upBot(o,e){return e>o.bottom?{top:o.top,left:o.left,right:o.right,bottom:e}:o}function domPosAtCoords(o,e,n){let a,s,l,c,d=!1,u,f,v,b;for(let _=o.firstChild;_;_=_.nextSibling){let E=clientRectsFor(_);for(let B=0;B<E.length;B++){let M=E[B];s&&yOverlap(s,M)&&(M=upTop(upBot(M,s.bottom),s.top));let I=getdx(e,M),F=getdy(n,M);if(I==0&&F==0)return _.nodeType==3?domPosInText(_,e,n):domPosAtCoords(_,e,n);if(!a||c>F||c==F&&l>I){a=_,s=M,l=I,c=F;let V=F?n<M.top?-1:1:I?e<M.left?-1:1:0;d=!V||(V>0?B<E.length-1:B>0)}I==0?n>M.bottom&&(!v||v.bottom<M.bottom)?(u=_,v=M):n<M.top&&(!b||b.top>M.top)&&(f=_,b=M):v&&yOverlap(v,M)?v=upBot(v,M.bottom):b&&yOverlap(b,M)&&(b=upTop(b,M.top))}}if(v&&v.bottom>=n?(a=u,s=v):b&&b.top<=n&&(a=f,s=b),!a)return{node:o,offset:0};let k=Math.max(s.left,Math.min(s.right,e));if(a.nodeType==3)return domPosInText(a,k,n);if(d&&a.contentEditable!="false")return domPosAtCoords(a,k,n);let x=Array.prototype.indexOf.call(o.childNodes,a)+(e>=(s.left+s.right)/2?1:0);return{node:o,offset:x}}function domPosInText(o,e,n){let a=o.nodeValue.length,s=-1,l=1e9,c=0;for(let d=0;d<a;d++){let u=textRange(o,d,d+1).getClientRects();for(let f=0;f<u.length;f++){let v=u[f];if(v.top==v.bottom)continue;c||(c=e-v.left);let b=(v.top>n?v.top-n:n-v.bottom)-1;if(v.left-1<=e&&v.right+1>=e&&b<l){let k=e>=(v.left+v.right)/2,x=k;if((browser.chrome||browser.gecko)&&textRange(o,d).getBoundingClientRect().left==v.right&&(x=!k),b<=0)return{node:o,offset:d+(x?1:0)};s=d+(x?1:0),l=b}}}return{node:o,offset:s>-1?s:c>0?o.nodeValue.length:0}}function posAtCoords(o,e,n,a=-1){var s,l;let c=o.contentDOM.getBoundingClientRect(),d=c.top+o.viewState.paddingTop,u,{docHeight:f}=o.viewState,{x:v,y:b}=e,k=b-d;if(k<0)return 0;if(k>f)return o.state.doc.length;for(let V=o.viewState.heightOracle.textHeight/2,L=!1;u=o.elementAtHeight(k),u.type!=BlockType.Text;)for(;k=a>0?u.bottom+V:u.top-V,!(k>=0&&k<=f);){if(L)return n?null:0;L=!0,a=-a}b=d+k;let x=u.from;if(x<o.viewport.from)return o.viewport.from==0?0:n?null:posAtCoordsImprecise(o,c,u,v,b);if(x>o.viewport.to)return o.viewport.to==o.state.doc.length?o.state.doc.length:n?null:posAtCoordsImprecise(o,c,u,v,b);let _=o.dom.ownerDocument,E=o.root.elementFromPoint?o.root:_,B=E.elementFromPoint(v,b);B&&!o.contentDOM.contains(B)&&(B=null),B||(v=Math.max(c.left+1,Math.min(c.right-1,v)),B=E.elementFromPoint(v,b),B&&!o.contentDOM.contains(B)&&(B=null));let M,I=-1;if(B&&((s=o.docView.nearest(B))===null||s===void 0?void 0:s.isEditable)!=!1){if(_.caretPositionFromPoint){let V=_.caretPositionFromPoint(v,b);V&&({offsetNode:M,offset:I}=V)}else if(_.caretRangeFromPoint){let V=_.caretRangeFromPoint(v,b);V&&({startContainer:M,startOffset:I}=V,(!o.contentDOM.contains(M)||browser.safari&&isSuspiciousSafariCaretResult(M,I,v)||browser.chrome&&isSuspiciousChromeCaretResult(M,I,v))&&(M=void 0))}M&&(I=Math.min(maxOffset(M),I))}if(!M||!o.docView.dom.contains(M)){let V=LineView.find(o.docView,x);if(!V)return k>u.top+u.height/2?u.to:u.from;({node:M,offset:I}=domPosAtCoords(V.dom,v,b))}let F=o.docView.nearest(M);if(!F)return null;if(F.isWidget&&((l=F.dom)===null||l===void 0?void 0:l.nodeType)==1){let V=F.dom.getBoundingClientRect();return e.y<V.top||e.y<=V.bottom&&e.x<=(V.left+V.right)/2?F.posAtStart:F.posAtEnd}else return F.localPosFromDOM(M,I)+F.posAtStart}function posAtCoordsImprecise(o,e,n,a,s){let l=Math.round((a-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&n.height>o.defaultLineHeight*1.5){let d=o.viewState.heightOracle.textHeight,u=Math.floor((s-n.top-(o.defaultLineHeight-d)*.5)/d);l+=u*o.viewState.heightOracle.lineLength}let c=o.state.sliceDoc(n.from,n.to);return n.from+findColumn(c,l,o.state.tabSize)}function isSuspiciousSafariCaretResult(o,e,n){let a;if(o.nodeType!=3||e!=(a=o.nodeValue.length))return!1;for(let s=o.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return textRange(o,a-1,a).getBoundingClientRect().left>n}function isSuspiciousChromeCaretResult(o,e,n){if(e!=0)return!1;for(let s=o;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let a=o.nodeType==1?o.getBoundingClientRect():textRange(o,0,Math.max(o.nodeValue.length,1)).getBoundingClientRect();return n-a.left>5}function blockAt(o,e){let n=o.lineBlockAt(e);if(Array.isArray(n.type)){for(let a of n.type)if(a.to>e||a.to==e&&(a.to==n.to||a.type==BlockType.Text))return a}return n}function moveToLineBoundary(o,e,n,a){let s=blockAt(o,e.head),l=!a||s.type!=BlockType.Text||!(o.lineWrapping||s.widgetLineBreaks)?null:o.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let c=o.dom.getBoundingClientRect(),d=o.textDirectionAt(s.from),u=o.posAtCoords({x:n==(d==Direction.LTR)?c.right-1:c.left+1,y:(l.top+l.bottom)/2});if(u!=null)return EditorSelection.cursor(u,n?-1:1)}return EditorSelection.cursor(n?s.to:s.from,n?-1:1)}function moveByChar(o,e,n,a){let s=o.state.doc.lineAt(e.head),l=o.bidiSpans(s),c=o.textDirectionAt(s.from);for(let d=e,u=null;;){let f=moveVisually(s,l,c,d,n),v=movedOver;if(!f){if(s.number==(n?o.state.doc.lines:1))return d;v=`
`,s=o.state.doc.line(s.number+(n?1:-1)),l=o.bidiSpans(s),f=o.visualLineSide(s,!n)}if(u){if(!u(v))return d}else{if(!a)return f;u=a(v)}d=f}}function byGroup(o,e,n){let a=o.state.charCategorizer(e),s=a(n);return l=>{let c=a(l);return s==CharCategory.Space&&(s=c),s==c}}function moveVertically(o,e,n,a){let s=e.head,l=n?1:-1;if(s==(n?o.state.doc.length:0))return EditorSelection.cursor(s,e.assoc);let c=e.goalColumn,d,u=o.contentDOM.getBoundingClientRect(),f=o.coordsAtPos(s,e.assoc||-1),v=o.documentTop;if(f)c==null&&(c=f.left-u.left),d=l<0?f.top:f.bottom;else{let x=o.viewState.lineBlockAt(s);c==null&&(c=Math.min(u.right-u.left,o.defaultCharacterWidth*(s-x.from))),d=(l<0?x.top:x.bottom)+v}let b=u.left+c,k=a??o.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let _=d+(k+x)*l,E=posAtCoords(o,{x:b,y:_},!1,l);if(_<u.top||_>u.bottom||(l<0?E<s:E>s)){let B=o.docView.coordsForChar(E),M=!B||_<B.top?-1:1;return EditorSelection.cursor(E,M,void 0,c)}}}function skipAtomicRanges(o,e,n){for(;;){let a=0;for(let s of o)s.between(e-1,e+1,(l,c,d)=>{if(e>l&&e<c){let u=a||n||(e-l<c-e?-1:1);e=u<0?l:c,a=u}});if(!a)return e}}function skipAtoms(o,e,n){let a=skipAtomicRanges(o.state.facet(atomicRanges).map(s=>s(o)),n.from,e.head>n.from?-1:1);return a==n.from?n:EditorSelection.cursor(a,a<n.from?1:-1)}const LineBreakPlaceholder="\uFFFF";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let a=e.parentNode;for(let s=e;;){this.findPointBefore(a,s);let l=this.text.length;this.readNode(s);let c=s.nextSibling;if(c==n)break;let d=ContentView.get(s),u=ContentView.get(c);(d&&u?d.breakAfter:(d?d.breakAfter:isBlockElement(s))||isBlockElement(c)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&this.lineBreak(),s=c}return this.findPointBefore(a,n),this}readTextNode(e){let n=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,n.length));for(let a=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,c=1,d;if(this.lineSeparator?(l=n.indexOf(this.lineSeparator,a),c=this.lineSeparator.length):(d=s.exec(n))&&(l=d.index,c=d[0].length),this.append(n.slice(a,l<0?n.length:l)),l<0)break;if(this.lineBreak(),c>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=c-1);a=l+c}}readNode(e){if(e.cmIgnore)return;let n=ContentView.get(e),a=n&&n.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let s=a.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==n&&(a.pos=this.text.length)}findPointInside(e,n){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+(isAtEnd(e,a.node,a.offset)?n:0))}}function isAtEnd(o,e,n){for(;;){if(!e||n<maxOffset(e))return!1;if(e==o)return!0;n=domIndex(e)+1,e=e.parentNode}}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DOMChange{constructor(e,n,a,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:l,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,a,0))){let d=l||c?[]:selectionPoints(e),u=new DOMReader(d,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=selectionFromPoints(d,this.bounds.from)}else{let d=e.observer.selectionRange,u=l&&l.node==d.focusNode&&l.offset==d.focusOffset||!contains$1(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),f=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!contains$1(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),v=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&u!=f&&(v.from>0||v.to<e.state.doc.length)){let b=Math.min(u,f),k=Math.max(u,f),x=v.from-b,_=v.to-k;(x==0||x==1||b==0)&&(_==0||_==-1||k==e.state.doc.length)&&(u=0,f=e.state.doc.length)}this.newSel=EditorSelection.single(f,u)}}}function applyDOMChange(o,e){let n,{newSel:a}=e,s=o.state.selection.main,l=o.inputState.lastKeyTime>Date.now()-100?o.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,u=s.from,f=null;(l===8||browser.android&&e.text.length<d-c)&&(u=s.to,f="end");let v=findDiff(o.state.doc.sliceString(c,d,LineBreakPlaceholder),e.text,u-c,f);v&&(browser.chrome&&l==13&&v.toB==v.from+2&&e.text.slice(v.from,v.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&v.toB--,n={from:c+v.from,to:c+v.toA,insert:Text.of(e.text.slice(v.from,v.toB).split(LineBreakPlaceholder))})}else a&&(!o.hasFocus&&o.state.facet(editable)||a.main.eq(s))&&(a=null);if(!n&&!a)return!1;if(!n&&e.typeOver&&!s.empty&&a&&a.main.empty?n={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,s.to)}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&o.contentDOM.getAttribute("autocorrect")=="off"?(a&&n.insert.length==2&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:n.from,to:n.to,insert:Text.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,n.from).append(n.insert).append(o.state.doc.slice(n.to,s.to))}:browser.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&o.lineWrapping&&(a&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:s.from,to:s.to,insert:Text.of([" "])}),n)return applyDOMChangeInner(o,n,a,l);if(a&&!a.main.eq(s)){let c=!1,d="select";return o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(c=!0),d=o.inputState.lastSelectionOrigin),o.dispatch({selection:a,scrollIntoView:c,userEvent:d}),!0}else return!1}function applyDOMChangeInner(o,e,n,a=-1){if(browser.ios&&o.inputState.flushIOSKey(e))return!0;let s=o.state.selection.main;if(browser.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&o.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(o.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||a==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&dispatchKey(o.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&dispatchKey(o.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();o.inputState.composing>=0&&o.inputState.composing++;let c,d=()=>c||(c=applyDefaultInsert(o,e,n));return o.state.facet(inputHandler$1).some(u=>u(o,e.from,e.to,l,d))||o.dispatch(d()),!0}function applyDefaultInsert(o,e,n){let a,s=o.state,l=s.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&o.inputState.composing<0){let d=l.from<e.from?s.sliceDoc(l.from,e.from):"",u=l.to>e.to?s.sliceDoc(e.to,l.to):"";a=s.replaceSelection(o.state.toText(d+e.insert.sliceString(0,void 0,o.state.lineBreak)+u))}else{let d=s.changes(e),u=n&&n.main.to<=d.newLength?n.main:void 0;if(s.selection.ranges.length>1&&o.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let f=o.state.sliceDoc(e.from,e.to),v,b=n&&findCompositionNode(o,n.main.head);if(b){let _=e.insert.length-(e.to-e.from);v={from:b.from,to:b.to-_}}else v=o.state.doc.lineAt(l.head);let k=l.to-e.to,x=l.to-l.from;a=s.changeByRange(_=>{if(_.from==l.from&&_.to==l.to)return{changes:d,range:u||_.map(d)};let E=_.to-k,B=E-f.length;if(_.to-_.from!=x||o.state.sliceDoc(B,E)!=f||_.to>=v.from&&_.from<=v.to)return{range:_};let M=s.changes({from:B,to:E,insert:e.insert}),I=_.to-l.to;return{changes:M,range:u?EditorSelection.range(Math.max(0,u.anchor+I),Math.max(0,u.head+I)):_.map(M)}})}else a={changes:d,selection:u&&s.selection.replaceRange(u)}}let c="input.type";return(o.composing||o.inputState.compositionPendingChange&&o.inputState.compositionEndedAt>Date.now()-50)&&(o.inputState.compositionPendingChange=!1,c+=".compose",o.inputState.compositionFirstChange&&(c+=".start",o.inputState.compositionFirstChange=!1)),s.update(a,{userEvent:c,scrollIntoView:!0})}function findDiff(o,e,n,a){let s=Math.min(o.length,e.length),l=0;for(;l<s&&o.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&o.length==e.length)return null;let c=o.length,d=e.length;for(;c>0&&d>0&&o.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(a=="end"){let u=Math.max(0,l-Math.min(c,d));n-=c+u-l}if(c<l&&o.length<e.length){let u=n<=l&&n>=c?l-n:0;l-=u,d=l+(d-c),c=l}else if(d<l){let u=n<=l&&n>=d?l-n:0;l-=u,c=l+(c-d),d=l}return{from:l,toA:c,toB:d}}function selectionPoints(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}=o.observer.selectionRange;return n&&(e.push(new DOMPoint(n,a)),(s!=n||l!=a)&&e.push(new DOMPoint(s,l))),e}function selectionFromPoints(o,e){if(o.length==0)return null;let n=o[0].pos,a=o.length==2?o[1].pos:n;return n>-1&&a>-1?EditorSelection.single(n+e,a+e):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let a=this.handlers[e];if(a){for(let s of a.observers)s(this.view,n);for(let s of a.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=computeHandlers(e),a=this.handlers,s=this.view.contentDOM;for(let l in n)if(l!="scroll"){let c=!n[l].handlers.length,d=a[l];d&&c!=!d.handlers.length&&(s.removeEventListener(l,this.handleEvent),d=null),d||s.addEventListener(l,this.handleEvent,{passive:c})}for(let l in a)l!="scroll"&&!n[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=PendingKeys.find(a=>a.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(o,e){return(n,a)=>{try{return e.call(o,a,n)}catch(s){logException(n.state,s)}}}function computeHandlers(o){let e=Object.create(null);function n(a){return e[a]||(e[a]={observers:[],handlers:[]})}for(let a of o){let s=a.spec;if(s&&s.domEventHandlers)for(let l in s.domEventHandlers){let c=s.domEventHandlers[l];c&&n(l).handlers.push(bindHandler(a.value,c))}if(s&&s.domEventObservers)for(let l in s.domEventObservers){let c=s.domEventObservers[l];c&&n(l).observers.push(bindHandler(a.value,c))}}for(let a in handlers)n(a).handlers.push(handlers[a]);for(let a in observers)n(a).observers.push(observers[a]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(o){return Math.max(0,o)*.7+8}function dist(o,e){return Math.max(Math.abs(o.clientX-e.clientX),Math.abs(o.clientY-e.clientY))}class MouseSelection{constructor(e,n,a,s){this.view=e,this.startEvent=n,this.style=a,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,a=0,s=0,l=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:d}=this.scrollParents.y.getBoundingClientRect());let u=getScrollMargins(this.view);e.clientX-u.left<=s+dragScrollMargin?n=-dragScrollSpeed(s-e.clientX):e.clientX+u.right>=c-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-c)),e.clientY-u.top<=l+dragScrollMargin?a=-dragScrollSpeed(l-e.clientY):e.clientY+u.bottom>=d-dragScrollMargin&&(a=dragScrollSpeed(e.clientY-d)),this.setScrollSpeed(n,a)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let a=0;a<e.ranges.length;a++){let s=e.ranges[a],l=null;if(s.empty){let c=skipAtomicRanges(this.atoms,s.from,0);c!=s.from&&(l=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,s.from,-1),d=skipAtomicRanges(this.atoms,s.to,1);(c!=s.from||d!=s.to)&&(l=EditorSelection.range(s.from==s.anchor?c:d,s.from==s.head?c:d))}l&&(n||(n=e.ranges.slice()),n[a]=l)}return n?EditorSelection.create(n,e.mainIndex):e}select(e){let{view:n}=this,a=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!a.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:a,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(o,e){let n=o.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(o,e){let n=o.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(o,e){let{main:n}=o.state.selection;if(n.empty)return!1;let a=getSelection$1(o.root);if(!a||a.rangeCount==0)return!0;let s=a.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let c=s[l];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,a;n!=o.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(a=ContentView.get(n))&&a.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(o){let e=o.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{o.focus(),n.remove(),doPaste(o,n.value)},50)}function textFilter(o,e,n){for(let a of o.facet(e))n=a(n,o);return n}function doPaste(o,e){e=textFilter(o.state,clipboardInputFilter,e);let{state:n}=o,a,s=1,l=n.toText(e),c=l.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(d=>d.empty)&&lastLinewiseCopy==l.toString()){let d=-1;a=n.changeByRange(u=>{let f=n.doc.lineAt(u.from);if(f.from==d)return{range:u};d=f.from;let v=n.toText((c?l.line(s++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:v},range:EditorSelection.cursor(u.from+v.length)}})}else c?a=n.changeByRange(d=>{let u=l.line(s++);return{changes:{from:d.from,to:d.to,insert:u.text},range:EditorSelection.cursor(d.from+u.length)}}):a=n.replaceSelection(l);o.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=o=>{o.inputState.lastScrollTop=o.scrollDOM.scrollTop,o.inputState.lastScrollLeft=o.scrollDOM.scrollLeft},handlers.keydown=(o,e)=>(o.inputState.setSelectionOrigin("select"),e.keyCode==27&&o.inputState.tabFocusMode!=0&&(o.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(o,e)=>{o.inputState.lastTouchTime=Date.now(),o.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(o,e)=>{if(o.observer.flush(),o.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let a of o.state.facet(mouseSelectionStyle))if(n=a(o,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(o,e)),n){let a=!o.hasFocus;o.inputState.startMouseSelection(new MouseSelection(o,e,n,a)),a&&o.observer.ignore(()=>{focusPreventScroll(o.contentDOM);let l=o.root.activeElement;l&&!l.contains(o.contentDOM)&&l.blur()});let s=o.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function rangeForClick(o,e,n,a){if(a==1)return EditorSelection.cursor(e,n);if(a==2)return groupAt(o.state,e,n);{let s=LineView.find(o.docView,e),l=o.state.doc.lineAt(s?s.posAtEnd:e),c=s?s.posAtStart:l.from,d=s?s.posAtEnd:l.to;return d<o.state.doc.length&&d==l.to&&d++,EditorSelection.range(c,d)}}let inside=(o,e,n)=>e>=n.top&&e<=n.bottom&&o>=n.left&&o<=n.right;function findPositionSide(o,e,n,a){let s=LineView.find(o.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let c=s.coordsAt(l,-1);if(c&&inside(n,a,c))return-1;let d=s.coordsAt(l,1);return d&&inside(n,a,d)?1:c&&c.bottom>=a?-1:1}function queryPos(o,e){let n=o.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:findPositionSide(o,n,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(o){if(!BadMouseDetail)return o.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=o,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(o,e){let n=queryPos(o,e),a=getClickType(e),s=o.state.selection;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),s=s.map(l.changes))},get(l,c,d){let u=queryPos(o,l),f,v=rangeForClick(o,u.pos,u.bias,a);if(n.pos!=u.pos&&!c){let b=rangeForClick(o,n.pos,n.bias,a),k=Math.min(b.from,v.from),x=Math.max(b.to,v.to);v=k<v.from?EditorSelection.range(k,x):EditorSelection.range(x,k)}return c?s.replaceRange(s.main.extend(v.from,v.to)):d&&a==1&&s.ranges.length>1&&(f=removeRangeAround(s,u.pos))?f:d?s.addRange(v):EditorSelection.create([v])}}}function removeRangeAround(o,e){for(let n=0;n<o.ranges.length;n++){let{from:a,to:s}=o.ranges[n];if(a<=e&&s>=e)return EditorSelection.create(o.ranges.slice(0,n).concat(o.ranges.slice(n+1)),o.mainIndex==n?0:o.mainIndex-(o.mainIndex>n?1:0))}return null}handlers.dragstart=(o,e)=>{let{selection:{main:n}}=o.state;if(e.target.draggable){let s=o.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,c=l+s.length;(l>=n.to||c<=n.from)&&(n=EditorSelection.range(l,c))}}let{inputState:a}=o;return a.mouseSelection&&(a.mouseSelection.dragging=!0),a.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(o.state,clipboardOutputFilter,o.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=o=>(o.inputState.draggedContent=null,!1);function dropText(o,e,n,a){if(n=textFilter(o.state,clipboardInputFilter,n),!n)return;let s=o.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=o.inputState,c=a&&l&&dragMovesSelection(o,e)?{from:l.from,to:l.to}:null,d={from:s,insert:n},u=o.state.changes(c?[c,d]:d);o.focus(),o.dispatch({changes:u,selection:{anchor:u.mapPos(s,-1),head:u.mapPos(s,1)},userEvent:c?"move.drop":"input.drop"}),o.inputState.draggedContent=null}handlers.drop=(o,e)=>{if(!e.dataTransfer)return!1;if(o.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let a=Array(n.length),s=0,l=()=>{++s==n.length&&dropText(o,e,a.filter(c=>c!=null).join(o.state.lineBreak),!1)};for(let c=0;c<n.length;c++){let d=new FileReader;d.onerror=l,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(a[c]=d.result),l()},d.readAsText(n[c])}return!0}else{let a=e.dataTransfer.getData("Text");if(a)return dropText(o,e,a,!0),!0}return!1},handlers.paste=(o,e)=>{if(o.state.readOnly)return!0;o.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;return n?(doPaste(o,n.getData("text/plain")||n.getData("text/uri-list")),!0):(capturePaste(o),!1)};function captureCopy(o,e){let n=o.dom.parentNode;if(!n)return;let a=n.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),o.focus()},50)}function copiedRange(o){let e=[],n=[],a=!1;for(let s of o.selection.ranges)s.empty||(e.push(o.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:l}of o.selection.ranges){let c=o.doc.lineAt(l);c.number>s&&(e.push(c.text),n.push({from:c.from,to:Math.min(o.doc.length,c.to+1)})),s=c.number}a=!0}return{text:textFilter(o,clipboardOutputFilter,e.join(o.lineBreak)),ranges:n,linewise:a}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(o,e)=>{let{text:n,ranges:a,linewise:s}=copiedRange(o.state);if(!n&&!s)return!1;lastLinewiseCopy=s?n:null,e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let l=brokenClipboardAPI?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",n),!0):(captureCopy(o,n),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(o,e){let n=[];for(let a of o.facet(focusChangeEffect)){let s=a(o,e);s&&n.push(s)}return n?o.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(o){setTimeout(()=>{let e=o.hasFocus;if(e!=o.inputState.notifiedFocused){let n=focusChangeTransaction(o.state,e);n?o.dispatch(n):o.update([])}},10)}observers.focus=o=>{o.inputState.lastFocusTime=Date.now(),!o.scrollDOM.scrollTop&&(o.inputState.lastScrollTop||o.inputState.lastScrollLeft)&&(o.scrollDOM.scrollTop=o.inputState.lastScrollTop,o.scrollDOM.scrollLeft=o.inputState.lastScrollLeft),updateForFocusChange(o)},observers.blur=o=>{o.observer.clearSelectionRange(),updateForFocusChange(o)},observers.compositionstart=observers.compositionupdate=o=>{o.observer.editContext||(o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0))},observers.compositionend=o=>{o.observer.editContext||(o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionPendingKey=!0,o.inputState.compositionPendingChange=o.observer.pendingRecords().length>0,o.inputState.compositionFirstChange=null,browser.chrome&&browser.android?o.observer.flushSoon():o.inputState.compositionPendingChange?Promise.resolve().then(()=>o.observer.flush()):setTimeout(()=>{o.inputState.composing<0&&o.docView.hasComposition&&o.update([])},50))},observers.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(o,e)=>{var n,a;if(e.inputType=="insertReplacementText"&&o.observer.editContext){let l=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),c=e.getTargetRanges();if(l&&c.length){let d=c[0],u=o.posAtDOM(d.startContainer,d.startOffset),f=o.posAtDOM(d.endContainer,d.endOffset);return applyDOMChangeInner(o,{from:u,to:f,insert:o.state.toText(l)},null),!0}}let s;if(browser.chrome&&browser.android&&(s=PendingKeys.find(l=>l.inputType==e.inputType))&&(o.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}return browser.ios&&e.inputType=="deleteContentForward"&&o.observer.flushSoon(),browser.safari&&e.inputType=="insertText"&&o.inputState.composing>=0&&setTimeout(()=>observers.compositionend(o,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(o){appliedFirefoxHack.has(o)||(appliedFirefoxHack.add(o),o.addEventListener("copy",()=>{}),o.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let a=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((n-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let a=0;a<e.length;a++){let s=e[a];s<0?a++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,a,s,l,c){let d=wrappingWhiteSpace.indexOf(e)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=d;if(this.lineWrapping=d,this.lineHeight=n,this.charWidth=a,this.textHeight=s,this.lineLength=l,u){this.heightSamples={};for(let f=0;f<c.length;f++){let v=c[f];v<0?f++:this.heightSamples[Math.floor(v*10)]=!0}}return u}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,a,s,l){this.from=e,this.length=n,this.top=a,this.height=s,this._content=l}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType=function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o}(QueryType||(QueryType={}));const Epsilon=.001;class HeightMap{constructor(e,n,a=2){this.length=e,this.height=n,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,n,a){return HeightMap.of(a)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,a,s){let l=this,c=a.doc;for(let d=s.length-1;d>=0;d--){let{fromA:u,toA:f,fromB:v,toB:b}=s[d],k=l.lineAt(u,QueryType.ByPosNoHeight,a.setDoc(n),0,0),x=k.to>=f?k:l.lineAt(f,QueryType.ByPosNoHeight,a,0,0);for(b+=x.to-f,f=x.to;d>0&&k.from<=s[d-1].toA;)u=s[d-1].fromA,v=s[d-1].fromB,d--,u<k.from&&(k=l.lineAt(u,QueryType.ByPosNoHeight,a,0,0));v+=k.from-u,u=k.from;let _=NodeBuilder.build(a.setDoc(c),e,v,b);l=replace$1(l,l.replace(u,f,_))}return l.updateHeight(a,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let n=0,a=e.length,s=0,l=0;for(;;)if(n==a)if(s>l*2){let d=e[n-1];d.break?e.splice(--n,1,d.left,null,d.right):e.splice(--n,1,d.left,d.right),a+=1+d.break,s-=d.size}else if(l>s*2){let d=e[a];d.break?e.splice(a,1,d.left,null,d.right):e.splice(a,1,d.left,d.right),a+=2+d.break,l-=d.size}else break;else if(s<l){let d=e[n++];d&&(s+=d.size)}else{let d=e[--a];d&&(l+=d.size)}let c=0;return e[n-1]==null?(c=1,n--):e[n]==null&&(c=1,a++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),c,HeightMap.of(e.slice(a)))}}function replace$1(o,e){return o==e?o:(o.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,n,a){super(e,n),this.deco=a}blockAt(e,n,a,s){return new BlockInfo(s,this.length,a,this.height,this.deco||0)}lineAt(e,n,a,s,l){return this.blockAt(0,a,s,l)}forEachLine(e,n,a,s,l,c){e<=l+this.length&&n>=l&&c(this.blockAt(0,a,s,l))}updateHeight(e,n=0,a=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,a,s){return new BlockInfo(s,this.length,a,this.height,this.breaks)}replace(e,n,a){let s=a[0];return a.length==1&&(s instanceof HeightMapText||s instanceof HeightMapGap&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof HeightMapGap?s=new HeightMapText(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):HeightMap.of(a)}updateHeight(e,n=0,a=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(a||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,n){let a=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,l=s-a+1,c,d=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*l);c=u/l,this.length>l+1&&(d=(this.height-u)/(this.length-l-1))}else c=this.height/l;return{firstLine:a,lastLine:s,perLine:c,perChar:d}}blockAt(e,n,a,s){let{firstLine:l,lastLine:c,perLine:d,perChar:u}=this.heightMetrics(n,s);if(n.lineWrapping){let f=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length)),v=n.doc.lineAt(f),b=d+v.length*u,k=Math.max(a,e-b/2);return new BlockInfo(v.from,v.length,k,b,0)}else{let f=Math.max(0,Math.min(c-l,Math.floor((e-a)/d))),{from:v,length:b}=n.doc.line(l+f);return new BlockInfo(v,b,a+d*f,d,0)}}lineAt(e,n,a,s,l){if(n==QueryType.ByHeight)return this.blockAt(e,a,s,l);if(n==QueryType.ByPosNoHeight){let{from:x,to:_}=a.doc.lineAt(e);return new BlockInfo(x,_-x,0,0,0)}let{firstLine:c,perLine:d,perChar:u}=this.heightMetrics(a,l),f=a.doc.lineAt(e),v=d+f.length*u,b=f.number-c,k=s+d*b+u*(f.from-l-b);return new BlockInfo(f.from,f.length,Math.max(s,Math.min(k,s+this.height-v)),v,0)}forEachLine(e,n,a,s,l,c){e=Math.max(e,l),n=Math.min(n,l+this.length);let{firstLine:d,perLine:u,perChar:f}=this.heightMetrics(a,l);for(let v=e,b=s;v<=n;){let k=a.doc.lineAt(v);if(v==e){let _=k.number-d;b+=u*_+f*(e-l-_)}let x=u+f*k.length;c(new BlockInfo(k.from,k.length,b,x,0)),b+=x,v=k.to+1}}replace(e,n,a){let s=this.length-n;if(s>0){let l=a[a.length-1];l instanceof HeightMapGap?a[a.length-1]=new HeightMapGap(l.length+s):a.push(null,new HeightMapGap(s-1))}if(e>0){let l=a[0];l instanceof HeightMapGap?a[0]=new HeightMapGap(e+l.length):a.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(a)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,a=!1,s){let l=n+this.length;if(s&&s.from<=n+this.length&&s.more){let c=[],d=Math.max(n,s.from),u=-1;for(s.from>n&&c.push(new HeightMapGap(s.from-n-1).updateHeight(e,n));d<=l&&s.more;){let v=e.doc.lineAt(d).length;c.length&&c.push(null);let b=s.heights[s.index++];u==-1?u=b:Math.abs(b-u)>=Epsilon&&(u=-2);let k=new HeightMapText(v,b);k.outdated=!1,c.push(k),d+=v+1}d<=l&&c.push(null,new HeightMapGap(l-d).updateHeight(e,d));let f=HeightMap.of(c);return(u<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(u-this.heightMetrics(e,n).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace$1(this,f)}else(a||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,a){super(e.length+n+a.length,e.height+a.height,n|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,n,a,s){let l=a+this.left.height;return e<l?this.left.blockAt(e,n,a,s):this.right.blockAt(e,n,l,s+this.left.length+this.break)}lineAt(e,n,a,s,l){let c=s+this.left.height,d=l+this.left.length+this.break,u=n==QueryType.ByHeight?e<c:e<d,f=u?this.left.lineAt(e,n,a,s,l):this.right.lineAt(e,n,a,c,d);if(this.break||(u?f.to<d:f.from>d))return f;let v=n==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return u?f.join(this.right.lineAt(d,v,a,c,d)):this.left.lineAt(d,v,a,s,l).join(f)}forEachLine(e,n,a,s,l,c){let d=s+this.left.height,u=l+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,a,s,l,c),n>=u&&this.right.forEachLine(e,n,a,d,u,c);else{let f=this.lineAt(u,QueryType.ByPos,a,s,l);e<f.from&&this.left.forEachLine(e,f.from-1,a,s,l,c),f.to>=e&&f.from<=n&&c(f),n>f.to&&this.right.forEachLine(f.to+1,n,a,d,u,c)}}replace(e,n,a){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,a));let l=[];e>0&&this.decomposeLeft(e,l);let c=l.length;for(let d of a)l.push(d);if(e>0&&mergeGaps(l,c-1),n<this.length){let d=l.length;this.decomposeRight(n,l),mergeGaps(l,d)}return HeightMap.of(l)}decomposeLeft(e,n){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(a++,e>=a&&n.push(null)),e>a&&this.right.decomposeLeft(e-a,n)}decomposeRight(e,n){let a=this.left.length,s=a+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<a&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=replace$1(this.left,e),this.right=replace$1(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,a=!1,s){let{left:l,right:c}=this,d=n+l.length+this.break,u=null;return s&&s.from<=n+l.length&&s.more?u=l=l.updateHeight(e,n,a,s):l.updateHeight(e,n,a),s&&s.from<=d+c.length&&s.more?u=c=c.updateHeight(e,d,a,s):c.updateHeight(e,d,a),u?this.balanced(l,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(o,e){let n,a;o[e]==null&&(n=o[e-1])instanceof HeightMapGap&&(a=o[e+1])instanceof HeightMapGap&&o.splice(e-1,3,new HeightMapGap(n.length+1+a.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let a=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof HeightMapText?s.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(a-this.pos,-1)),this.writtenTo=a,n>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,a){if(e<n||a.heightRelevant){let s=a.widget?a.widget.estimatedHeight:0,l=a.widget?a.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let c=n-e;a.block?this.addBlock(new HeightMapBlock(c,s,a)):(c||l||s>=relevantWidgetHeight)&&this.addLineDeco(s,l,c)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let a=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,a){let s=this.ensureLine();s.length+=a,s.collapsed+=a,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+a}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let s of this.nodes)s instanceof HeightMapText&&s.updateHeight(this.oracle,a),a+=s?s.length:1;return this.nodes}static build(e,n,a,s){let l=new NodeBuilder(a,e);return RangeSet.spans(n,a,s,l,0),l.finish(a)}}function heightRelevantDecoChanges(o,e,n){let a=new DecorationComparator;return RangeSet.compare(o,e,n,a,0),a.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,a,s){(e<n||a&&a.heightRelevant||s&&s.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(o,e){let n=o.getBoundingClientRect(),a=o.ownerDocument,s=a.defaultView||window,l=Math.max(0,n.left),c=Math.min(s.innerWidth,n.right),d=Math.max(0,n.top),u=Math.min(s.innerHeight,n.bottom);for(let f=o.parentNode;f&&f!=a.body;)if(f.nodeType==1){let v=f,b=window.getComputedStyle(v);if((v.scrollHeight>v.clientHeight||v.scrollWidth>v.clientWidth)&&b.overflow!="visible"){let k=v.getBoundingClientRect();l=Math.max(l,k.left),c=Math.min(c,k.right),d=Math.max(d,k.top),u=Math.min(f==o.parentNode?s.innerHeight:u,k.bottom)}f=b.position=="absolute"||b.position=="fixed"?v.offsetParent:v.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:l-n.left,right:Math.max(l,c)-n.left,top:d-(n.top+e),bottom:Math.max(d,u)-(n.top+e)}}function inWindow(o){let e=o.getBoundingClientRect(),n=o.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function fullPixelRange(o,e){let n=o.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,a,s){this.from=e,this.to=n,this.size=a,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++){let s=e[a],l=n[a];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,n){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(contentAttributes).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(n),this.stateDeco=e.facet(decorations).filter(a=>typeof a!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let a=0;a<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());a++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(a=>a.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let a=0;a<=1;a++){let s=a?n.head:n.anchor;if(!e.some(({from:l,to:c})=>s>=l&&s<=c)){let{from:l,to:c}=this.lineBlockAt(s);e.push(new Viewport(l,c))}}return this.viewports=e.sort((a,s)=>a.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(v=>typeof v!="function");let s=e.changedRanges,l=ChangedRange.extendWithRanges(s,heightRelevantDecoChanges(a,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=c||heightChangeFlag)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,a=window.getComputedStyle(n),s=this.heightOracle,l=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(l),d=n.getBoundingClientRect(),u=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let f=0,v=0;if(d.width&&d.height){let{scaleX:V,scaleY:L}=getScale(n,d);(V>.005&&Math.abs(this.scaleX-V)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=V,this.scaleY=L,f|=16,c=u=!0)}let b=(parseInt(a.paddingTop)||0)*this.scaleY,k=(parseInt(a.paddingBottom)||0)*this.scaleY;(this.paddingTop!=b||this.paddingBottom!=k)&&(this.paddingTop=b,this.paddingBottom=k,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let _=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),E=_.top-this.pixelViewport.top,B=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(u=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let I=d.width;if((this.contentDOMWidth!=I||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let V=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(V)&&(c=!0),c||s.lineWrapping&&Math.abs(I-this.contentDOMWidth)>s.charWidth){let{lineHeight:L,charWidth:U,textHeight:j}=e.docView.measureTextSize();c=L>0&&s.refresh(l,L,U,j,I/U,V),c&&(e.docView.minWidth=0,f|=16)}E>0&&B>0?v=Math.max(E,B):E<0&&B<0&&(v=Math.min(E,B)),clearHeightChangeFlag();for(let L of this.viewports){let U=L.from==this.viewport.from?V:e.docView.measureVisibleLineHeights(L);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,c,new MeasuredHeights(L.from,U))}heightChangeFlag&&(f|=2)}let F=!this.viewportIsAppropriate(this.viewport,v)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return F&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(v,this.scrollTarget),f|=this.updateForViewport()),(f&2||F)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,u=new Viewport(s.lineAt(c-a*1e3,QueryType.ByHeight,l,0,0).from,s.lineAt(d+(1-a)*1e3,QueryType.ByHeight,l,0,0).to);if(n){let{head:f}=n.range;if(f<u.from||f>u.to){let v=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),b=s.lineAt(f,QueryType.ByPos,l,0,0),k;n.y=="center"?k=(b.top+b.bottom)/2-v/2:n.y=="start"||n.y=="nearest"&&f<u.from?k=b.top:k=b.bottom-v,u=new Viewport(s.lineAt(k-500,QueryType.ByHeight,l,0,0).from,s.lineAt(k+v+500,QueryType.ByHeight,l,0,0).to)}}return u}mapViewport(e,n){let a=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(a,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},a=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(n,QueryType.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||s<=c-Math.max(10,Math.min(-a,250)))&&(n==this.state.doc.length||l>=d+Math.max(10,Math.min(a,250)))&&s>c-2e3&&l<d+2e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let a=[];for(let s of e)n.touchesRange(s.from,s.to)||a.push(new LineGap(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return a}ensureLineGaps(e,n){let a=this.heightOracle.lineWrapping,s=a?1e4:2e3,l=s>>1,c=s<<1;if(this.defaultTextDirection!=Direction.LTR&&!a)return[];let d=[],u=(v,b,k,x)=>{if(b-v<l)return;let _=this.state.selection.main,E=[_.from];_.empty||E.push(_.to);for(let M of E)if(M>v&&M<b){u(v,M-10,k,x),u(M+10,b,k,x);return}let B=find(e,M=>M.from>=k.from&&M.to<=k.to&&Math.abs(M.from-v)<l&&Math.abs(M.to-b)<l&&!E.some(I=>M.from<I&&M.to>I));if(!B){if(b<k.to&&n&&a&&n.visibleRanges.some(F=>F.from<=b&&F.to>=b)){let F=n.moveToLineBoundary(EditorSelection.cursor(b),!1,!0).head;F>v&&(b=F)}let M=this.gapSize(k,v,b,x),I=a||M<2e6?M:2e6;B=new LineGap(v,b,M,I)}d.push(B)},f=v=>{if(v.length<c||v.type!=BlockType.Text)return;let b=lineStructure(v.from,v.to,this.stateDeco);if(b.total<c)return;let k=this.scrollTarget?this.scrollTarget.range.head:null,x,_;if(a){let E=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,B,M;if(k!=null){let I=findFraction(b,k),F=((this.visibleBottom-this.visibleTop)/2+E)/v.height;B=I-F,M=I+F}else B=(this.visibleTop-v.top-E)/v.height,M=(this.visibleBottom-v.top+E)/v.height;x=findPosition(b,B),_=findPosition(b,M)}else{let E=b.total*this.heightOracle.charWidth,B=s*this.heightOracle.charWidth,M=0;if(E>2e6)for(let U of e)U.from>=v.from&&U.from<v.to&&U.size!=U.displaySize&&U.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=U.size-U.displaySize);let I=this.pixelViewport.left+M,F=this.pixelViewport.right+M,V,L;if(k!=null){let U=findFraction(b,k),j=((F-I)/2+B)/E;V=U-j,L=U+j}else V=(I-B)/E,L=(F+B)/E;x=findPosition(b,V),_=findPosition(b,L)}x>v.from&&u(v.from,x,v,b),_<v.to&&u(_,v.to,v,b)};for(let v of this.viewportLines)Array.isArray(v.type)?v.type.forEach(f):f(v);return d}gapSize(e,n,a,s){let l=findFraction(s,a)-findFraction(s,n);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let a=[];RangeSet.spans(n,this.viewport.from,this.viewport.to,{span(l,c){a.push({from:l,to:c})},point(){}},20);let s=0;if(a.length!=this.visibleRanges.length)s=12;else for(let l=0;l<a.length&&!(s&8);l++){let c=this.visibleRanges[l],d=a[l];(c.from!=d.from||c.to!=d.to)&&(s|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(s|=8))}return this.visibleRanges=a,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(o,e,n){let a=[],s=o,l=0;return RangeSet.spans(n,o,e,{span(){},point(c,d){c>s&&(a.push({from:s,to:c}),l+=c-s),s=d}},20),s<e&&(a.push({from:s,to:e}),l+=e-s),{total:l,ranges:a}}function findPosition({total:o,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let a=Math.floor(o*n);for(let s=0;;s++){let{from:l,to:c}=e[s],d=c-l;if(a<=d)return l+a;a-=d}}function findFraction(o,e){let n=0;for(let{from:a,to:s}of o.ranges){if(e<=s){n+=e-a;break}n+=s-a}return n/o.total}function find(o,e){for(let n of o)if(e(n))return n}const IdScaler={toDOM(o){return o},fromDOM(o){return o},scale:1,eq(o){return o==this}};class BigScaler{constructor(e,n,a){let s=0,l=0,c=0;this.viewports=a.map(({from:d,to:u})=>{let f=n.lineAt(d,QueryType.ByPos,e,0,0).top,v=n.lineAt(u,QueryType.ByPos,e,0,0).bottom;return s+=v-f,{from:d,to:u,top:f,bottom:v,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let d of this.viewports)d.domTop=c+(d.top-l)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),l=d.bottom}toDOM(e){for(let n=0,a=0,s=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.top)return s+(e-a)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);a=l.bottom,s=l.domBottom}}fromDOM(e){for(let n=0,a=0,s=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.domTop)return a+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);a=l.bottom,s=l.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,a)=>n.from==e.viewports[a].from&&n.to==e.viewports[a].to):!1}}function scaleBlock(o,e){if(e.scale==1)return o;let n=e.toDOM(o.top),a=e.toDOM(o.bottom);return new BlockInfo(o.from,o.length,n,a-n,Array.isArray(o._content)?o._content.map(s=>scaleBlock(s,e)):o._content)}const theme=Facet.define({combine:o=>o.join(" ")}),darkTheme=Facet.define({combine:o=>o.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(o,e,n){return new StyleModule(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,s=>{if(s=="&")return o;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):o+" "+a}})}const baseTheme$1$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let a of n)this.queue.push(a);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,a)=>n!=e[a]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,s=this.selectionRange;if(a.state.facet(editable)?a.root.activeElement!=this.dom:!hasSelection(this.dom,s))return;let l=s.anchorNode&&a.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!a.state.selection.main.empty&&s.focusNode&&isEquivalentPosition(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=getSelection$1(e.root);if(!n)return!1;let a=browser.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,n)||n;if(!a||this.selectionRange.eq(a))return!1;let s=hasSelection(this.dom,a);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let a=this.dom;a;)if(a.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=n)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var a;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,a=-1,s=!1;for(let l of e){let c=this.readMutation(l);c&&(c.typeOver&&(s=!0),n==-1?{from:n,to:a}=c:(n=Math.min(c.from,n),a=Math.max(c.to,a)))}return{from:n,to:a,typeOver:s}}readChange(){let{from:e,to:n,typeOver:a}=this.processRecords(),s=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new DOMChange(this.view,e,n,a);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let a=this.view.state,s=applyDOMChange(this.view,n);return this.view.state==a&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let a=findChild(n,e.previousSibling||e.target.previousSibling,-1),s=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:a?n.posAfter(a):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,n,a;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(o,e,n){for(;e;){let a=ContentView.get(e);if(a&&a.parent==o)return a;let s=e.parentNode;e=s!=o.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(o,e){let n=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,c=o.docView.domAtPos(o.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,s,l)&&([n,a,s,l]=[s,l,n,a]),{anchorNode:n,anchorOffset:a,focusNode:s,focusOffset:l}}function safariSelectionRangeHack(o,e){if(e.getComposedRanges){let s=e.getComposedRanges(o.root)[0];if(s)return buildSelectionRangeFromRange(o,s)}let n=null;function a(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return o.contentDOM.addEventListener("beforeinput",a,!0),o.dom.ownerDocument.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",a,!0),n?buildSelectionRangeFromRange(o,n):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=a=>{let s=e.state.selection.main,{anchor:l,head:c}=s,d=this.toEditorPos(a.updateRangeStart),u=this.toEditorPos(a.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:a.updateRangeStart,editorBase:d,drifted:!1});let f={from:d,to:u,insert:Text.of(a.text.split(`
`))};if(f.from==this.from&&l<this.from?f.from=l:f.to==this.to&&l>this.to&&(f.to=l),f.from==f.to&&!f.insert.length){let v=EditorSelection.single(this.toEditorPos(a.selectionStart),this.toEditorPos(a.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}if((browser.mac||browser.android)&&f.from==c-1&&/^\. ?$/.test(a.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:d,to:u,insert:Text.of([a.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let v=this.to-this.from+(f.to-f.from+f.insert.length);applyDOMChangeInner(e,f,EditorSelection.single(this.toEditorPos(a.selectionStart,v),this.toEditorPos(a.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=a=>{let s=[],l=null;for(let c=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);c<d;c++){let u=e.coordsForChar(c);l=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||l||new DOMRect,s.push(l)}n.updateCharacterBounds(a.rangeStart,s)},this.handlers.textformatupdate=a=>{let s=[];for(let l of a.getTextFormats()){let c=l.underlineStyle,d=l.underlineThickness;if(c!="None"&&d!="None"){let u=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);if(u<f){let v=`text-decoration: underline ${c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${d=="Thin"?1:2}px`;s.push(Decoration.mark({attributes:{style:v}}).range(u,f))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:a}=this.composing;this.composing=null,a&&this.reset(e.state)}};for(let a in this.handlers)n.addEventListener(a,this.handlers[a]);this.measureReq={read:a=>{this.editContext.updateControlBounds(a.contentDOM.getBoundingClientRect());let s=getSelection$1(a.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,a=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,c,d,u,f)=>{if(a)return;let v=f.length-(c-l);if(s&&c>=s.to)if(s.from==l&&s.to==c&&s.insert.eq(f)){s=this.pendingContextChange=null,n+=v,this.to+=v;return}else s=null,this.revertPending(e.state);if(l+=n,c+=n,c<=this.from)this.from+=v,this.to+=v;else if(l<this.to){if(l<this.from||c>this.to||this.to-this.from+f.length>3e4){a=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(c),f.toString()),this.to+=v}n+=v}),s&&!a&&this.revertPending(e.state),!a}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(a=>!a.isUserEvent("input.type")&&a.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,a=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=a||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(a,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>3e4)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let a=this.composing;return a&&a.drifted?a.editorBase+(e-a.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}EditorView=class{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(o={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),o.parent&&o.parent.appendChild(this.dom);let{dispatch:n}=o;this.dispatchTransactions=o.dispatchTransactions||n&&(a=>a.forEach(s=>n(s,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=o.root||getRoot(o.parent)||document,this.viewState=new ViewState(o.state||EditorState.create(o)),o.scrollTo&&o.scrollTo.is(scrollIntoView)&&(this.viewState.scrollTarget=o.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(a=>new PluginInstance(a));for(let a of this.plugins)a.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...o){let e=o.length==1&&o[0]instanceof Transaction?o:o.length==1&&Array.isArray(o[0])?o[0]:[this.state.update(...o)];this.dispatchTransactions(e,this)}update(o){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,n=!1,a,s=this.state;for(let b of o){if(b.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=b.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,c=0,d=null;o.some(b=>b.annotation(isFocusChange))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,d=focusChangeTransaction(s,l),d||(c=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(s);a=ViewUpdate.create(this,s,o),a.flags|=c;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let b of o){if(v&&(v=v.map(b.changes)),b.scrollIntoView){let{main:k}=b.state.selection;v=new ScrollTarget(k.empty?k:EditorSelection.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of b.effects)k.is(scrollIntoView)&&(v=k.value.clip(this.state))}this.viewState.update(a,v),this.bidiCache=CachedOrder.update(this.bidiCache,a.changes),a.empty||(this.updatePlugins(a),this.inputState.update(a)),e=this.docView.update(a),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(o),this.docView.updateSelection(e,o.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(a.startState.facet(theme)!=a.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(e||n||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!a.empty)for(let b of this.state.facet(updateListener))try{b(a)}catch(k){logException(this.state,k,"update listener")}(d||f)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),f&&!applyDOMChange(this,f)&&u.force&&dispatchKey(this.contentDOM,u.key,u.keyCode)})}setState(o){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=o;return}this.updateState=2;let e=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new ViewState(o),this.plugins=o.facet(viewPlugin).map(n=>new PluginInstance(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(o){let e=o.startState.facet(viewPlugin),n=o.state.facet(viewPlugin);if(e!=n){let a=[];for(let s of n){let l=e.indexOf(s);if(l<0)a.push(new PluginInstance(s));else{let c=this.plugins[l];c.mustUpdate=o,a.push(c)}}for(let s of this.plugins)s.mustUpdate!=o&&s.destroy(this);this.plugins=a,this.pluginMap.clear()}else for(let a of this.plugins)a.mustUpdate=o;for(let a=0;a<this.plugins.length;a++)this.plugins[a].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let o of this.plugins){let e=o.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(n){logException(this.state,n,"doc view update listener")}}}measure(o=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,o&&this.observer.forceFlush();let e=null,n=this.scrollDOM,a=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(a-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(isScrolledToBottom(n))s=-1,l=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(a);s=k.from,l=k.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];d&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(k=>{try{return k.read(this)}catch(x){return logException(this.state,x),BadMeasure}}),v=ViewUpdate.create(this,this.state,[]),b=!1;v.flags|=d,e?e.flags|=d:e=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),b=this.docView.update(v),b&&this.docViewUpdate());for(let k=0;k<u.length;k++)if(f[k]!=BadMeasure)try{let x=u[k];x.write&&x.write(f[k],this)}catch(x){logException(this.state,x)}if(b&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let k=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(k>1||k<-1){a=a+k,n.scrollTop=a/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let c of this.state.facet(updateListener))c(e)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let o=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,e);let n=this.observer.ignore(()=>{let a=updateAttrs(this.contentDOM,this.contentAttrs,e),s=updateAttrs(this.dom,this.editorAttrs,o);return a||s});return this.editorAttrs=o,this.contentAttrs=e,n}showAnnouncements(o){let e=!0;for(let n of o)for(let a of n.effects)if(a.is(EditorView.announce)){e&&(this.announceDOM.textContent=""),e=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=a.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let o=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$1).reverse(),o?{nonce:o}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(o){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),o){if(this.measureRequests.indexOf(o)>-1)return;if(o.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===o.key){this.measureRequests[e]=o;return}}this.measureRequests.push(o)}}plugin(o){let e=this.pluginMap.get(o);return(e===void 0||e&&e.spec!=o)&&this.pluginMap.set(o,e=this.plugins.find(n=>n.spec==o)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(o){return this.readMeasured(),this.viewState.elementAtHeight(o)}lineBlockAtHeight(o){return this.readMeasured(),this.viewState.lineBlockAtHeight(o)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(o){return this.viewState.lineBlockAt(o)}get contentHeight(){return this.viewState.contentHeight}moveByChar(o,e,n){return skipAtoms(this,o,moveByChar(this,o,e,n))}moveByGroup(o,e){return skipAtoms(this,o,moveByChar(this,o,e,n=>byGroup(this,o.head,n)))}visualLineSide(o,e){let n=this.bidiSpans(o),a=this.textDirectionAt(o.from),s=n[e?n.length-1:0];return EditorSelection.cursor(s.side(e,a)+o.from,s.forward(!e,a)?1:-1)}moveToLineBoundary(o,e,n=!0){return moveToLineBoundary(this,o,e,n)}moveVertically(o,e,n){return skipAtoms(this,o,moveVertically(this,o,e,n))}domAtPos(o){return this.docView.domAtPos(o)}posAtDOM(o,e=0){return this.docView.posFromDOM(o,e)}posAtCoords(o,e=!0){return this.readMeasured(),posAtCoords(this,o,e)}coordsAtPos(o,e=1){this.readMeasured();let n=this.docView.coordsAt(o,e);if(!n||n.left==n.right)return n;let a=this.state.doc.lineAt(o),s=this.bidiSpans(a),l=s[BidiSpan.find(s,o-a.from,-1,e)];return flattenRect(n,l.dir==Direction.LTR==e>0)}coordsForChar(o){return this.readMeasured(),this.docView.coordsForChar(o)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(o){return!this.state.facet(perLineTextDirection)||o<this.viewport.from||o>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(o))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(o){if(o.length>MaxBidiLine)return trivialOrder(o.length);let e=this.textDirectionAt(o.from),n;for(let s of this.bidiCache)if(s.from==o.from&&s.dir==e&&(s.fresh||isolatesEq(s.isolates,n=getIsolatedRanges(this,o))))return s.order;n||(n=getIsolatedRanges(this,o));let a=computeOrder(o.text,e,n);return this.bidiCache.push(new CachedOrder(o.from,o.to,e,n,!0,a)),a}get hasFocus(){var o;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((o=this.inputState)===null||o===void 0?void 0:o.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(o){this._root!=o&&(this._root=o,this.observer.setWindow((o.nodeType==9?o:o.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let o of this.plugins)o.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(o,e={}){return scrollIntoView.of(new ScrollTarget(typeof o=="number"?EditorSelection.cursor(o):o,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:o,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(o);return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(n.from),"start","start",n.top-o,e,!0))}setTabFocusMode(o){o==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof o=="boolean"?this.inputState.tabFocusMode=o?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+o)}static domEventHandlers(o){return ViewPlugin.define(()=>({}),{eventHandlers:o})}static domEventObservers(o){return ViewPlugin.define(()=>({}),{eventObservers:o})}static theme(o,e){let n=StyleModule.newName(),a=[theme.of(n),styleModule.of(buildTheme(`.${n}`,o))];return e&&e.dark&&a.push(darkTheme.of(!0)),a}static baseTheme(o){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,o,lightDarkIDs)))}static findFromDOM(o){var e;let n=o.querySelector(".cm-content"),a=n&&ContentView.get(n)||ContentView.get(o);return((e=a==null?void 0:a.rootView)===null||e===void 0?void 0:e.view)||null}},EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:o=>o.length?o[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,a,s,l,c){this.from=e,this.to=n,this.dir=a,this.isolates=s,this.fresh=l,this.order=c}static update(e,n){if(n.empty&&!e.some(l=>l.fresh))return e;let a=[],s=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let c=e[l];c.dir==s&&!n.touchesRange(c.from,c.to)&&a.push(new CachedOrder(n.mapPos(c.from,1),n.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return a}}function attrsFromFacet(o,e,n){for(let a=o.state.facet(e),s=a.length-1;s>=0;s--){let l=a[s],c=typeof l=="function"?l(o):l;c&&combineAttrs(c,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName$1(o,e){const n=o.split(/-(?!$)/);let a=n[n.length-1];a=="Space"&&(a=" ");let s,l,c,d;for(let u=0;u<n.length-1;++u){const f=n[u];if(/^(cmd|meta|m)$/i.test(f))d=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))c=!0;else if(/^mod$/i.test(f))e=="mac"?d=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return s&&(a="Alt-"+a),l&&(a="Ctrl-"+a),d&&(a="Meta-"+a),c&&(a="Shift-"+a),a}function modifiers$1(o,e,n){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),n!==!1&&e.shiftKey&&(o="Shift-"+o),o}let handleKeyEvents,Keymaps;handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(o,e){return runHandlers(getKeymap(e.state),o,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(o){let e=o.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((a,s)=>a.concat(s),[]))),n}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(o,e=currentPlatform){let n=Object.create(null),a=Object.create(null),s=(c,d)=>{let u=a[c];if(u==null)a[c]=d;else if(u!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},l=(c,d,u,f,v)=>{var b,k;let x=n[c]||(n[c]=Object.create(null)),_=d.split(/ (?!$)/).map(M=>normalizeKeyName$1(M,e));for(let M=1;M<_.length;M++){let I=_.slice(0,M).join(" ");s(I,!0),x[I]||(x[I]={preventDefault:!0,stopPropagation:!1,run:[F=>{let V=storedPrefix={view:F,prefix:I,scope:c};return setTimeout(()=>{storedPrefix==V&&(storedPrefix=null)},PrefixTimeout),!0}]})}let E=_.join(" ");s(E,!1);let B=x[E]||(x[E]={preventDefault:!1,stopPropagation:!1,run:((k=(b=x._any)===null||b===void 0?void 0:b.run)===null||k===void 0?void 0:k.slice())||[]});u&&B.run.push(u),f&&(B.preventDefault=!0),v&&(B.stopPropagation=!0)};for(let c of o){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let f of d){let v=n[f]||(n[f]=Object.create(null));v._any||(v._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:b}=c;for(let k in v)v[k].run.push(x=>b(x,currentKeyEvent))}let u=c[e]||c.key;if(u)for(let f of d)l(f,u,c.run,c.preventDefault,c.stopPropagation),c.shift&&l(f,"Shift-"+u,c.shift,c.preventDefault,c.stopPropagation)}return n}let currentKeyEvent=null;function runHandlers(o,e,n,a){currentKeyEvent=e;let s=keyName(e),l=codePointAt(s,0),c=codePointSize(l)==s.length&&s!=" ",d="",u=!1,f=!1,v=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==a&&(d=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(f=!0,storedPrefix=null));let b=new Set,k=B=>{if(B){for(let M of B.run)if(!b.has(M)&&(b.add(M),M(n)))return B.stopPropagation&&(v=!0),!0;B.preventDefault&&(B.stopPropagation&&(v=!0),f=!0)}return!1},x=o[a],_,E;return x&&(k(x[d+modifiers$1(s,e,!c)])?u=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(_=base[e.keyCode])&&_!=s?(k(x[d+modifiers$1(_,e,!0)])||e.shiftKey&&(E=shift[e.keyCode])!=s&&E!=_&&k(x[d+modifiers$1(E,e,!1)]))&&(u=!0):c&&e.shiftKey&&k(x[d+modifiers$1(s,e,!0)])&&(u=!0),!u&&k(x._any)&&(u=!0)),f&&(u=!0),u&&v&&e.stopPropagation(),currentKeyEvent=null,u}class RectangleMarker{constructor(e,n,a,s,l){this.className=e,this.left=n,this.top=a,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,a){if(a.empty){let s=e.coordsAtPos(a.head,a.assoc||1);if(!s)return[];let l=getBase(e);return[new RectangleMarker(n,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return rectanglesForRange(e,n,a)}}function getBase(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==Direction.LTR?e.left:e.right-o.scrollDOM.clientWidth*o.scaleX)-o.scrollDOM.scrollLeft*o.scaleX,top:e.top-o.scrollDOM.scrollTop*o.scaleY}}function wrappedLine(o,e,n,a){let s=o.coordsAtPos(e,n*2);if(!s)return a;let l=o.dom.getBoundingClientRect(),c=(s.top+s.bottom)/2,d=o.posAtCoords({x:l.left+1,y:c}),u=o.posAtCoords({x:l.right-1,y:c});return d==null||u==null?a:{from:Math.max(a.from,Math.min(d,u)),to:Math.min(a.to,Math.max(d,u))}}function rectanglesForRange(o,e,n){if(n.to<=o.viewport.from||n.from>=o.viewport.to)return[];let a=Math.max(n.from,o.viewport.from),s=Math.min(n.to,o.viewport.to),l=o.textDirection==Direction.LTR,c=o.contentDOM,d=c.getBoundingClientRect(),u=getBase(o),f=c.querySelector(".cm-line"),v=f&&window.getComputedStyle(f),b=d.left+(v?parseInt(v.paddingLeft)+Math.min(0,parseInt(v.textIndent)):0),k=d.right-(v?parseInt(v.paddingRight):0),x=blockAt(o,a),_=blockAt(o,s),E=x.type==BlockType.Text?x:null,B=_.type==BlockType.Text?_:null;if(E&&(o.lineWrapping||x.widgetLineBreaks)&&(E=wrappedLine(o,a,1,E)),B&&(o.lineWrapping||_.widgetLineBreaks)&&(B=wrappedLine(o,s,-1,B)),E&&B&&E.from==B.from&&E.to==B.to)return I(F(n.from,n.to,E));{let L=E?F(n.from,null,E):V(x,!1),U=B?F(null,n.to,B):V(_,!0),j=[];return(E||x).to<(B||_).from-(E&&B?1:0)||x.widgetLineBreaks>1&&L.bottom+o.defaultLineHeight/2<U.top?j.push(M(b,L.bottom,k,U.top)):L.bottom<U.top&&o.elementAtHeight((L.bottom+U.top)/2).type==BlockType.Text&&(L.bottom=U.top=(L.bottom+U.top)/2),I(L).concat(j).concat(I(U))}function M(L,U,j,oe){return new RectangleMarker(e,L-u.left,U-u.top,j-L,oe-U)}function I({top:L,bottom:U,horizontal:j}){let oe=[];for(let Y=0;Y<j.length;Y+=2)oe.push(M(j[Y],L,j[Y+1],U));return oe}function F(L,U,j){let oe=1e9,Y=-1e9,K=[];function W(se,me,ge,Te,Be){let Ge=o.coordsAtPos(se,se==j.to?-2:2),We=o.coordsAtPos(ge,ge==j.from?2:-2);!Ge||!We||(oe=Math.min(Ge.top,We.top,oe),Y=Math.max(Ge.bottom,We.bottom,Y),Be==Direction.LTR?K.push(l&&me?b:Ge.left,l&&Te?k:We.right):K.push(!l&&Te?b:We.left,!l&&me?k:Ge.right))}let G=L??j.from,ce=U??j.to;for(let se of o.visibleRanges)if(se.to>G&&se.from<ce)for(let me=Math.max(se.from,G),ge=Math.min(se.to,ce);;){let Te=o.state.doc.lineAt(me);for(let Be of o.bidiSpans(Te)){let Ge=Be.from+Te.from,We=Be.to+Te.from;if(Ge>=ge)break;We>me&&W(Math.max(Ge,me),L==null&&Ge<=G,Math.min(We,ge),U==null&&We>=ce,Be.dir)}if(me=Te.to+1,me>=ge)break}return K.length==0&&W(G,L==null,ce,U==null,o.textDirection),{top:oe,bottom:Y,horizontal:K}}function V(L,U){let j=d.top+(U?L.top:L.bottom);return{top:j,bottom:j,horizontal:[]}}}function sameMarker(o,e){return o.constructor==e.constructor&&o.eq(e)}class LayerView{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,a=e.facet(layerOrder);for(;n<a.length&&a[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,a)=>!sameMarker(n,this.drawn[a]))){let n=this.dom.firstChild,a=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[a].constructor&&s.update(n,this.drawn[a])?(n=n.nextSibling,a++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(o){return[ViewPlugin.define(e=>new LayerView(e,o)),layerOrder.of(o)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(o){return combineConfig(o,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function drawSelection(o={}){return[selectionConfig.of(o),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(o){return o.startState.facet(selectionConfig)!=o.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(o){let{state:e}=o,n=e.facet(selectionConfig),a=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty?!l||CanHidePrimary:n.drawRangeCursor){let c=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",d=s.empty?s:EditorSelection.cursor(s.head,s.head>s.anchor?-1:1);for(let u of RectangleMarker.forRange(o,c,d))a.push(u)}}return a},update(o,e){o.transactions.some(a=>a.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=configChanged(o);return n&&setBlinkRate(o.state,e),o.docChanged||o.selectionSet||n},mount(o,e){setBlinkRate(e.state,o)},class:"cm-cursorLayer"});function setBlinkRate(o,e){e.style.animationDuration=o.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(o){return o.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(o,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(o,e){return o.docChanged||o.selectionSet||o.viewportChanged||configChanged(o)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function iterMatches(o,e,n,a,s){e.lastIndex=0;for(let l=o.iterRange(n,a),c=n,d;!l.next().done;c+=l.value.length)if(!l.lineBreak)for(;d=e.exec(l.value);)s(c+d.index,d)}function matchRanges(o,e){let n=o.visibleRanges;if(n.length==1&&n[0].from==o.viewport.from&&n[0].to==o.viewport.to)return n;let a=[];for(let{from:s,to:l}of n)s=Math.max(o.state.doc.lineAt(s).from,s-e),l=Math.min(o.state.doc.lineAt(l).to,l+e),a.length&&a[a.length-1].to>=s?a[a.length-1].to=l:a.push({from:s,to:l});return a}class MatchDecorator{constructor(e){const{regexp:n,decoration:a,decorate:s,boundary:l,maxLength:c=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(d,u,f,v)=>s(v,f,f+d[0].length,d,u);else if(typeof a=="function")this.addMatch=(d,u,f,v)=>{let b=a(d,u,f);b&&v(f,f+d[0].length,b)};else if(a)this.addMatch=(d,u,f,v)=>v(f,f+d[0].length,a);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=c}createDeco(e){let n=new RangeSetBuilder,a=n.add.bind(n);for(let{from:s,to:l}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,s,l,(c,d)=>this.addMatch(d,e,c,a));return n.finish()}updateDeco(e,n){let a=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((l,c,d,u)=>{u>=e.view.viewport.from&&d<=e.view.viewport.to&&(a=Math.min(d,a),s=Math.max(u,s))}),e.viewportMoved||s-a>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),a,s):n}updateRange(e,n,a,s){for(let l of e.visibleRanges){let c=Math.max(l.from,a),d=Math.min(l.to,s);if(d>c){let u=e.state.doc.lineAt(c),f=u.to<d?e.state.doc.lineAt(d):u,v=Math.max(l.from,u.from),b=Math.min(l.to,f.to);if(this.boundary){for(;c>u.from;c--)if(this.boundary.test(u.text[c-1-u.from])){v=c;break}for(;d<f.to;d++)if(this.boundary.test(f.text[d-f.from])){b=d;break}}let k=[],x,_=(E,B,M)=>k.push(M.range(E,B));if(u==f)for(this.regexp.lastIndex=v-u.from;(x=this.regexp.exec(u.text))&&x.index<b-u.from;)this.addMatch(x,e,x.index+u.from,_);else iterMatches(e.state.doc,this.regexp,v,b,(E,B)=>this.addMatch(B,e,E,_));n=n.update({filterFrom:v,filterTo:b,filter:(E,B)=>E<v||B>b,add:k})}}return n}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var o;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((o=e.tabSize)!==null&&o!==void 0?o:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(o){let e=combineConfig(o,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(o={}){return[specialCharConfig.of(o),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(o.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(o)}makeDecorator(o){return new MatchDecorator({regexp:o.specialChars,decoration:(e,n,a)=>{let{doc:s}=n.state,l=codePointAt(e[0],0);if(l==9){let c=s.lineAt(a),d=n.state.tabSize,u=countColumn(c.text,d,a-c.from);return Decoration.replace({widget:new TabWidget((d-u%d)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Decoration.replace({widget:new SpecialCharWidget(o,l)}))},boundary:o.replaceTabs?void 0:/[^]/})}update(o){let e=o.state.facet(specialCharConfig);o.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(o.view)):this.decorations=this.decorator.updateDeco(o,this.decorations)}},{decorations:o=>o.decorations}))}const DefaultPlaceholder="\u2022";function placeholder$1(o){return o>=32?DefaultPlaceholder:o==10?"\u2424":String.fromCharCode(9216+o)}class SpecialCharWidget extends WidgetType{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=placeholder$1(this.code),a=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,a,n);if(s)return s;let l=document.createElement("span");return l.textContent=n,l.title=a,l.setAttribute("aria-label",a),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;function createUndoManager(o){const{createBlockTransaction:e}=o,n=useEventBus(),a=shallowReactive([]),s=shallowReactive([]);let l=0;const c=()=>{s.length=0,a.length=0,l=0},d=()=>{const u=a.length;s.push(u)};return n.on("afterBlocksTrCommit",([u])=>{!u.meta.isUndoRedo&&u.meta.canUndo&&(a.length=l,a.push(u),l=a.length,u.meta.autoAddUndoPoint&&d()),(!u.meta.canUndo||u.origin.type!=="ui")&&c()}),{undo:()=>{var I;const u=s[s.length-1];l>u&&s.push(l);const f=s.indexOf(l);if(f==-1||f==0)return;const v=s[f-1],b=[...a.slice(v,l)];b.reverse(),(I=document.activeElement)==null||I.blur();const k=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const F of b)k.addReverseTransaction(F);k.commit();const x=b[0].meta.envUndoStrategy==="beforeCommit"?b[0].envInfo.beforeCommit:b[0].envInfo.onCreate,{rootBlockId:_,focusedTreeId:E,focusedItemId:B,selection:M}=x??{};setTimeout(()=>{try{if(o.mainRootBlockId.value=_??null,E){const F=o.getBlockTree(E);if(F&&B&&(F.focusDi(B),M!=null)){const V=F.getEditorView(B);if(V instanceof EditorView$1){const L=Selection.fromJSON(V.state.doc,M),U=V.state.tr.setSelection(L);V.dispatch(U)}else if(V instanceof EditorView){const L=EditorSelection.fromJSON(M);V.dispatch({selection:L})}}}}catch{}}),l=v},redo:()=>{var M;const u=s.indexOf(l);if(u==-1)return;if(u==s.length-1){console.warn("Already reached the last state, cannot redo");return}const f=s[u+1],v=[...a.slice(l,f)];(M=document.activeElement)==null||M.blur();const b=e({type:"ui"}).setMeta("isUndoRedo",!0);for(const I of v)b.addTransaction(I);b.commit();const k=v[0].meta.envUndoStrategy==="beforeCommit"?v[0].envInfo.beforeCommit:v[0].envInfo.onCreate,{rootBlockId:x,focusedTreeId:_,focusedItemId:E,selection:B}=k??{};setTimeout(()=>{try{if(o.mainRootBlockId.value=x??null,_){const I=o.getBlockTree(_);if(I&&E&&(I.focusDi(E),B!=null)){const F=I.getEditorView(E);if(F instanceof EditorView$1){const V=Selection.fromJSON(F.state.doc,B),L=F.state.tr.setSelection(V);F.dispatch(L)}else if(F instanceof EditorView){const V=EditorSelection.fromJSON(B);F.dispatch({selection:V})}}}}catch{}}),l=f},addUndoPoint:d,clearUndoRedoHistory:c}}const DI_FILTERS={isBlockDi:o=>o.type==="basic-block"||o.type==="backlink-block"||o.type==="backlink-descendant"||o.type==="potential-links-block"||o.type==="potential-links-descendant"||o.type==="root-block"},BlockTreeContext=createContext(()=>{const o=new Map;return{registerBlockTree:e=>{o.set(e.getId(),e)},getBlockTree:e=>o.get(e),unregisterBlockTree:e=>{o.delete(e)}}}),LastFocusContext=createContext(()=>{const o=shallowRef(null),e=shallowRef(null);return{lastFocusedDiId:o,lastFocusedBlockTree:e}}),MainTreeContext=createContext(()=>{const{kbPrefix:o}=ServerInfoContext.useContext(),e="main.rootBlockId",n=computed(()=>`${o.value}${e}`);return{mainRootBlockId:useLocalStorage2(n,"root")}}),INTERNAL_BLOCK_PARENT_ID="_internal";z.any().pipe(z.union([z.object({type:z.literal("ui"),changeSources:z.array(z.string()).optional()}),z.object({type:z.literal("local")}),z.object({type:z.literal("remote")})]));const cloneMinimalBlock=o=>o?{type:o.type,id:o.id,fold:o.fold,parentId:o.parentId,childrenIds:[...o.childrenIds],...o.type=="normalBlock"?{content:JSON.parse(JSON.stringify(o.content)),metadata:JSON.parse(JSON.stringify(o.metadata))}:{},...o.type=="mirrorBlock"?{src:o.src}:{},...o.type=="virtualBlock"?{src:o.src,childrenCreated:o.childrenCreated}:{}}:null,cloneBlock=o=>o?{type:o.type,id:o.id,parentId:o.parentId,parentRef:o.parentRef,childrenIds:[...o.childrenIds],childrenRefs:[...o.childrenRefs],fold:o.fold,deleted:o.deleted,content:JSON.parse(JSON.stringify(o.content)),ctext:o.ctext,metadata:JSON.parse(JSON.stringify(o.metadata)),mtext:o.mtext,olinks:[...o.olinks],boosting:o.boosting,acturalSrc:o.acturalSrc,...o.type=="normalBlock"?{docId:o.docId}:{},...o.type=="mirrorBlock"?{src:o.src}:{},...o.type=="virtualBlock"?{src:o.src,childrenCreated:o.childrenCreated}:{},origin:o.origin}:null,createBlocksManager=o=>{const e=useEventBus(),n=new Map,a=new Map,s=new Map,l=new Map,c=new Set,{lastFocusedBlockTree:d,lastFocusedDiId:u}=LastFocusContext.useContext(),{mainRootBlockId:f}=MainTreeContext.useContext(),{getBlockTree:v}=BlockTreeContext.useContext(),b=ref(!1),k=ref(new Map);o.on("docSynced",({docId:Oe,hasSyncEvent:Ve})=>{Ve?k.value.set(Oe,"waitForEventProcessing"):(k.value.set(Oe,"synced"),b.value==!1&&Oe==BLOCK_INFO_DOC_NAME&&(b.value=!0))}),o.on("disconnected",()=>{for(const Oe of k.value.keys())k.value.set(Oe,"disconnected");b.value=!1});const x={getBlockInfo:new Map,getBlockData:new Map},_=Oe=>{let Ve=n.get(Oe);return Ve||(Ve=shallowRef(null),n.set(Oe,Ve)),Ve},E=(Oe,Ve=!0)=>{const Xe=_(Oe);return Xe.value?Ve?cloneBlock(Xe.value):Xe.value:null},B=Oe=>{const Ve=E(Oe);return!Ve||Ve.parentId=="null"?null:E(Ve.acturalSrc)||null},M=Oe=>{let Ve=_(Oe);if(!Ve)return[];const Xe=[];for(;Ve.value&&(Xe.push(Ve.value),Ve.value.id!="root");){const dt=Ve.value.parentRef;dt.value?Ve=dt:Ve=_(Ve.value.parentId)}return Xe},I=Oe=>M(Oe).length-1,F=({onEachBlock:Oe,onMissingBlock:Ve,rootBlockId:Xe,afterLeavingChildrens:dt,rootBlockLevel:pt,nonFoldOnly:ft,includeSelf:Ce,ignore:ze})=>{if(ft??(ft=!0),Ce??(Ce=!0),pt==null){const ue=M(Xe);if(!ue){console.error("[blocksManager] cannot get path of ",Xe);return}pt=ue.length-1}const Ze=(ue,Z)=>{const ee=ze==null?void 0:ze(ue,Z);if(ee!=="ignore-self-and-descendants"&&((Ce||ue.id!=Xe)&&Oe(ue,Z),ee!=="ignore-descendants"&&!(ee!=="keep-self-and-descendants"&&ft&&ue.fold)&&typeof ue.childrenIds!="string")){for(let le=0;le<ue.childrenIds.length;le++){const we=ue.childrenIds[le],ke=ue.childrenRefs[le];if(ke.value){const _e=toRaw(ke.value);Ze(_e,Z+1)}else a.set(we,ue.id),Ve==null||Ve(we,ue.id,Z+1)}dt&&dt(ue,Z)}},pe=E(Xe);if(!pe){console.error("[blocksManager] Cannot find root block",Xe);return}Ze(pe,pt)},V=({onEachBlock:Oe,rootBlockId:Ve,afterLeavingChildrens:Xe,rootBlockLevel:dt,nonFoldOnly:pt,includeSelf:ft,ignore:Ce})=>{if(pt??(pt=!0),ft??(ft=!0),dt==null){const pe=M(Ve);if(!pe){console.error("[blocksManager] cannot get path of ",Ve);return}dt=pe.length-1}const ze=(pe,ue)=>{const Z=Ce==null?void 0:Ce(pe,ue);if(Z!=="ignore-self-and-descendants"&&((ft||pe.id!=Ve)&&Oe(pe,ue),Z!=="ignore-descendants"&&!(Z!=="keep-self-and-descendants"&&pt&&pe.fold)&&typeof pe.childrenIds!="string")){for(const ee of pe.childrenRefs)if(ee.value&&!ee.value.deleted){const le=toRaw(ee.value);ze(le,ue+1)}Xe&&Xe(pe,ue)}},Ze=E(Ve);if(!Ze){console.error("[blocksManager] Cannot find root block",Ve);return}ze(Ze,dt)},L=(Oe,Ve)=>{if(Oe[0]===BLOCK_CONTENT_TYPES.TEXT){const Xe=getPmSchema({getBlockRef:_}),dt=Node$1.fromJSON(Xe,Oe[1]),pt=[];return dt.descendants(ft=>{!Ve&&ft.type.name=="blockRef_v2"&&ft.attrs.tag||pt.push(ft.textContent)}),pt.join("")}else return Oe[0]==BLOCK_CONTENT_TYPES.CODE?`${Oe[1]} (${Oe[2]})`:Oe[0]==BLOCK_CONTENT_TYPES.MATH?Oe[1]:(console.warn("[blocksManager] unsupported block content type"),"")},U=Oe=>{const Ve=pt=>/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(pt),Xe=[],dt=["specs","status","no","ncols","paragraph"];for(const[pt,ft]of Object.entries(Oe??{})){if(dt.includes(pt))continue;Xe.push(pt),Xe.push(": ");let Ce;if(typeof ft=="string")Ce=[ft];else if(Array.isArray(ft))Ce=ft;else continue;for(const ze of Ce){if(Ve(ze)){const Ze=E(ze);if(!Ze)continue;const pe=L(Ze.content);Xe.push(pe)}else Xe.push(ze);Xe.push(", ")}Xe.pop(),Xe.push("; ")}return Xe.pop(),Xe.join("")},j=(Oe,Ve="both")=>{const Xe=getPmSchema({getBlockRef:_}),dt=Node$1.fromJSON(Xe,Oe),pt=[];return dt.descendants(ft=>{ft.isAtom&&ft.type.name=="blockRef_v2"&&(Ve==="blockRef"&&!ft.attrs.tag||Ve==="tag"&&ft.attrs.tag||Ve==="both")&&pt.push(ft.attrs.toBlockId)}),pt},oe=async Oe=>{const Ve=x.getBlockInfo.get(Oe);Ve&&await Ve.promise;let Xe=s.get(Oe)??null;if(!Xe){let dt,pt;const ft=new Promise((Ce,ze)=>{dt=Ce,pt=ze});x.getBlockInfo.set(Oe,{promise:ft,resolve:dt,reject:pt,desc:"getBlockInfo of "+Oe}),await ft}return Xe=s.get(Oe)??null,Xe},Y=async(Oe,Ve)=>{const Xe=x.getBlockData.get(Oe);Xe&&await Xe.promise;let dt;const pt=E(Oe);if(pt?dt=[pt.content,pt.metadata]:dt=l.get(Oe)??null,!dt){c.has(Ve)||(o.loadDataDoc(Ve),c.add(Ve));let ft,Ce;const ze=new Promise((Ze,pe)=>{ft=Ze,Ce=pe});x.getBlockData.set(Oe,{promise:ze,resolve:ft,reject:Ce,desc:"getBlockData of "+Oe}),await ze}return dt=l.get(Oe)??null,dt};o.on("blockDataMapChange",({docId:Oe,origin:Ve,changes:Xe})=>{const dt=ce(Ve);if(Ve.type!="ui"){console.debug("[blocksManager] in app, blockDataMapChange",dayjs().valueOf(),Xe);for(const pt of Xe)if(pt.op=="upsert"){if(pt.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}l.set(pt.key,pt.value);const ft=x.getBlockData.get(pt.key);ft&&(ft.resolve(pt.value),x.getBlockData.delete(pt.key));const Ce=_(pt.key);if(Ce.value!=null&&Ce.value.type==="normalBlock"){const[ze,Ze]=pt.value;if(ze==null){console.error("[blocksManager] blockDataMap changed, but normal block doesn't have content",pt.key);continue}dt.updateBlock({...Ce.value,content:ze,metadata:Ze})}}else pt.op=="delete"&&l.delete(pt.key);dt.patches.length>0&&dt.commit(),k.value.set(`${BLOCK_DATA_DOC_NAME_PREFIX}${Oe}`,"synced")}}),o.on("blockInfoMapChange",({origin:Oe,changes:Ve})=>{const Xe=ce(Oe);if(Oe.type==="ui")return;console.debug("[blocksManager] in app, blockInfoMapChange",dayjs().valueOf(),Ve);const dt=[];for(const pt of Ve)if(pt.op=="delete")s.delete(pt.key),n.get(pt.key)&&(console.debug("[blocksManager] Deleting block from loadedBlocks:",pt.key),Xe.deleteBlock(pt.key));else if(pt.op=="upsert"){if(pt.value==null){console.log("[blocksManager] invalid change (no value), ignored!");continue}const[ft,Ce,ze,Ze,pe]=pt.value,{type:ue,fold:Z}=extractBlockStatus(ft);if(s.set(pt.key,pt.value),ue=="normalBlock"){if(Ze==null||!pt.value)continue;const ee=(async()=>{const le=await Y(pt.key,Ze);if(!le){console.error("[blocksManager] Cannot find block data for block",pt.key);return}Xe.addBlock({type:"normalBlock",id:pt.key,parentId:Ce,childrenIds:ze,fold:Z,content:le[0],metadata:le[1],docId:Ze})})();dt.push(ee)}else{if(!pe||!pt.value)continue;const ee=(async()=>{const le=await oe(pe);if(!le){console.error("[blocksManager] Cannot find block info for block",pe);return}const[we,ke,_e,te]=le,{type:re,fold:fe}=extractBlockStatus(we);if(re=="normalBlock"){if(te==null){console.error("[blocksManager] Src doc id is null, this should not happen",pt.key);return}if(console.debug("[blocksManager] getBlockDataOrWait",pe,te),!await Y(pe,te)){console.error("[blocksManager] Cannot find block data for block",pe);return}Xe.addBlock({type:ue,id:pt.key,parentId:Ce,childrenIds:ze,fold:Z,src:pe,...ue==="virtualBlock"?{childrenCreated:_e.length==ze.length}:{}})}else{console.error("[blocksManager] Src type must be normalBlock, but got",re);return}})();dt.push(ee)}}Promise.all(dt).then(()=>{console.debug("[blocksManager] in app, all resolved",dayjs().valueOf()),Xe.commit(),k.value.set(BLOCK_INFO_DOC_NAME,"synced"),b.value=!0,console.debug("[blocksManager] in app, transaction commit",dayjs().valueOf())})});const K=async()=>{const Oe=nanoid(),Ve=getPmSchema({getBlockRef:_});ce({type:"ui"}).addBlock({type:"normalBlock",id:Oe,fold:!1,parentId:"root",childrenIds:[],content:plainTextToTextContent("This is a test block",Ve),metadata:{}}).addBlock({type:"normalBlock",id:"root",fold:!1,parentId:"root",childrenIds:[Oe],content:plainTextToTextContent("\u{1F44B} Welcome to Next Outliner!",Ve),metadata:{}}).commit()},W=()=>_("root"),G=()=>{n.clear(),x.getBlockInfo.clear(),x.getBlockData.clear(),e.emit("blocksDestroy")},{createBlockTransaction:ce,addBlock:se,updateBlock:me,deleteBlock:ge}=useBlockTransaction({blocks:n,yjsLayer:o,latestBlockInfos:s,latestBlockDatas:l,getBlockRef:_,getCtext:L,getMtext:U,getOlinks:j,mainRootBlockId:f,lastFocusedBlockTree:d,lastFocusedDiId:u}),{undo:Te,redo:Be,addUndoPoint:Ge,clearUndoRedoHistory:We}=createUndoManager({createBlockTransaction:ce,mainRootBlockId:f,getBlockTree:v});return{loadedBlocks:n,latestBlockInfos:s,latestBlockDatas:l,pendingTasks:x,missingBlockParents:a,synced:b,getBlock:E,getBlockRef:_,getRootBlockRef:W,getBlockPath:M,getBlockLevel:I,forDescendants:V,forDescendantsWithMissingBlock:F,createBlockTransaction:ce,addBlock:se,updateBlock:me,deleteBlock:ge,destroy:G,undo:Te,redo:Be,getCtext:L,getMtext:U,getOlinks:j,getSrcBlock:B,createNewTree:K,addUndoPoint:Ge,clearUndoRedoHistory:We}},getActuralSrcBlock=(o,e)=>{if(o.type==="normalBlock")return o;if(o.type==="mirrorBlock"||o.type==="virtualBlock"){const n=e.getLatestBlock(o.src);if(!n)throw new Error(`Cannot get srcBlock, blockId=${o.id}`);return getActuralSrcBlock(n,e)}throw new Error("Invalid block type")},createBlocksEditor=(o,e,n)=>{const a=l=>{if("parentId"in l)if(typeof l.childIndex=="string"){const c=o.getBlock(l.parentId);return c?{parentId:l.parentId,childIndex:l.childIndex=="first"?0:l.childIndex=="last"?c.childrenIds.length-1:c.childrenIds.length}:null}else return l;else{const c=o.getBlock(l.baseBlockId);if(!c||c.id=="root")return null;const d=c.parentRef.value;if(!d)return null;const u=d.childrenIds.indexOf(l.baseBlockId);return{parentId:d.id,childIndex:Math.min(d.childrenIds.length,Math.max(0,u+l.offset))}}},s=(l,c)=>{const d=o.getBlock(l);d&&(c??(c=!d.fold),d.fold!=c&&(d.fold=c,o.updateBlock(d,{type:"ui"})))};return{normalizePos:a,changeBlockContent:l=>{let{blockId:c,content:d,tr:u,commit:f}=l;u??(u=o.createBlockTransaction({type:"ui",changeSources:[c]})),f??(f=!0);const v=n(),b=u.getLatestBlock(c),k=getActuralSrcBlock(b,u),x=v.getOccurs(k.id),_=o.getCtext(d),E=d[0]===BLOCK_CONTENT_TYPES.TEXT?o.getOlinks(d[1]):[],B=0;for(const M of x){const I=u.getLatestBlock(M);I&&(I.content=d,I.ctext=_,I.olinks=E,I.boosting=B,u.updateBlock(I))}f&&u.commit()},setBlockMetadata:l=>{let{blockId:c,metadata:d,tr:u,commit:f}=l;u??(u=o.createBlockTransaction({type:"ui",changeSources:[c]})),f??(f=!0);const v=n(),b=u.getLatestBlock(c),k=getActuralSrcBlock(b,u),x=v.getOccurs(k.id);for(const _ of x){const E=u.getLatestBlock(_);E&&(E.metadata=d,u.updateBlock(E))}f&&u.commit()},insertNormalBlock:l=>{let{pos:c,content:d,meta:u,childrenIds:f,tr:v,commit:b}=l;f??(f=[]),v??(v=o.createBlockTransaction({type:"ui"})),b??(b=!0);const k=n(),{parentId:x,childIndex:_}=a(c),E=v.getLatestBlock(x),B=getActuralSrcBlock(E,v);if(!B)return;const M=nanoid();v.addBlock({id:M,type:"normalBlock",parentId:x,childrenIds:f,fold:!0,content:d,metadata:u??{}}),B.childrenIds.splice(_,0,M),v.updateBlock(B);const I=k.getOccurs(B.id,!1);for(const F of I){const V=v.getLatestBlock(F);if(!V||V.type=="virtualBlock"&&!V.childrenCreated)continue;const L=nanoid();v.addBlock({id:L,type:"virtualBlock",childrenIds:[],fold:!0,parentId:V.id,src:M,childrenCreated:!1}),V.childrenIds.splice(_,0,L),v.updateBlock(V)}return E.fold&&(E.fold=!1,v.updateBlock(E)),b&&v.commit(),{newNormalBlockId:M}},insertNormalBlocks:l=>{let{pos:c,blocks:d,tr:u,commit:f}=l;if(d.length===0)return;u??(u=o.createBlockTransaction({type:"ui"})),f??(f=!0);const v=n(),{parentId:b,childIndex:k}=a(c),x=u.getLatestBlock(b),_=getActuralSrcBlock(x,u),E=d.map(M=>M.id??nanoid());d.forEach(({content:M,meta:I,childrenIds:F},V)=>{const L=E[V];u.addBlock({id:L,type:"normalBlock",parentId:b,childrenIds:F??[],fold:!1,content:M,metadata:I??{}})}),_.childrenIds.splice(k,0,...E),_.fold&&(_.fold=!1),u.updateBlock(_);const B=v.getOccurs(_.id,!1);for(const M of B){const I=u.getLatestBlock(M);if(!I||I.type=="virtualBlock"&&!I.childrenCreated)continue;const F=E.map(V=>{const L=nanoid();return u.addBlock({id:L,type:"virtualBlock",childrenIds:[],fold:!0,parentId:I.id,src:V,childrenCreated:!1}),L});I.childrenIds.splice(k,0,...F),u.updateBlock(I)}return x.fold&&(x.fold=!1,u.updateBlock(x)),f&&u.commit(),{newNormalBlockIds:E}},insertMirrorBlock:l=>{let{pos:c,srcBlockId:d,tr:u,commit:f}=l;u??(u=o.createBlockTransaction({type:"ui"})),f??(f=!0);const v=n(),{parentId:b,childIndex:k}=a(c),x=u.getLatestBlock(b),_=getActuralSrcBlock(x,u),E=u.getLatestBlock(d),B=getActuralSrcBlock(E,u),M=nanoid(),I=[];for(const L of B.childrenIds){const U=u.getLatestBlock(L);if(!U)continue;const j={...U,id:nanoid(),parentId:M,type:"virtualBlock",fold:!0,src:L,acturalSrc:"src"in U?U.src:U.id,childrenCreated:!1};u.addBlock(j),I.push(j.id)}const F={...E,id:M,parentId:b,type:"mirrorBlock",childrenIds:I,fold:!0,src:d};u.addBlock(F),_.childrenIds.splice(k,0,F.id),u.updateBlock(_);const V=v.getOccurs(_.id,!1);for(const L of V){const U=u.getLatestBlock(L);if(!U)continue;const j={...F,id:nanoid(),parentId:L,type:"virtualBlock",childrenIds:[],fold:!0,src:F.id,childrenCreated:!1};U.type==="virtualBlock"&&!U.childrenCreated||(U.childrenIds.splice(k,0,j.id),u.updateBlock(U))}return x.fold&&(x.fold=!1,u.updateBlock(x)),f&&u.commit(),{}},deleteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;u??(u=!0);const f=n();d??(d=o.createBlockTransaction({type:"ui"}));const v=d.getLatestBlock(c);if(!v){const x=o.missingBlockParents.get(c);if(!x)return;const _=d.getLatestBlock(x);if(!_)return;const E=_.childrenIds.indexOf(c);if(E<0)return;const B=getActuralSrcBlock(_,d),M=f.getOccurs(B.id,!0);for(const I of M){const F=d.getLatestBlock(I);F&&(F.childrenIds.splice(E,1),d.updateBlock(F))}d.commit();return}const b=[],k=x=>{if(x.type=="normalBlock"||x.type=="virtualBlock"){const _=getActuralSrcBlock(x,d),E=f.getOccurs(_.id,!0).map(B=>d.getLatestBlock(B)).filter(B=>B!=null);b.push(...E);for(const B of E)for(const M of B.childrenIds){const I=d.getLatestBlock(M);I&&k(I)}}else if(x.type=="mirrorBlock"){b.push(x);for(const _ of x.childrenIds){const E=d.getLatestBlock(_);E&&k(E)}}};k(v);for(const x of b)d.deleteBlock(x.id);if(v.type=="normalBlock"||v.type=="virtualBlock"){const x=d.getLatestBlock(v.parentId);if(!x)return;const _=getActuralSrcBlock(x,d),E=x.childrenIds.indexOf(v.id);if(E<0)return;const B=f.getOccurs(_.id,!0);for(const M of B){const I=d.getLatestBlock(M);I&&(I.childrenIds.splice(E,1),d.updateBlock(I))}}else{const x=d.getLatestBlock(v.parentId);if(!x)return;const _=x.childrenIds.indexOf(v.id);if(_<0)return;x.childrenIds.splice(_,1),d.updateBlock(x)}u&&d.commit()},promoteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;d??(d=o.createBlockTransaction({type:"ui"})),u??(u=!0);const f=n(),v=d.getLatestBlock(c);if(v.id=="root")return{success:!1};const b=getActuralSrcBlock(v,d),k=d.getLatestBlock(v.parentId),x=getActuralSrcBlock(k,d),_=k.childrenIds.indexOf(v.id);if(_<=0)return{success:!1};const E=d.getLatestBlock(k.childrenIds[_-1]);if(!E)return{success:!1};const B=getActuralSrcBlock(E,d),M=x.childrenIds.splice(_,1)[0],I=d.getLatestBlock(M);if(!I)return{success:!1};d.updateBlock(x),B.childrenIds.push(M),d.updateBlock(B),I.parentId=B.id,d.updateBlock(I);const F=f.getOccurs(x.id,!1);for(const L of F){const U=d.getLatestBlock(L);if(!U||U.type=="virtualBlock"&&!U.childrenCreated)continue;const j=U.childrenIds.splice(_,1)[0];d.updateBlock(U),d.deleteBlock(j)}const V=f.getOccurs(B.id,!1);for(const L of V){const U=d.getLatestBlock(L);if(!U||U.type=="virtualBlock"&&!U.childrenCreated)continue;const j={...b,id:nanoid(),parentId:U.id,type:"virtualBlock",fold:!0,src:b.id,childrenCreated:!1};U.childrenIds.push(j.id),L==E.id&&(U.fold=!1),d.updateBlock(U),d.addBlock(j)}return E.fold&&(E.fold=!1,d.updateBlock(E)),u&&d.commit(),{success:!0}},demoteBlock:l=>{let{blockId:c,tr:d,commit:u}=l;d??(d=o.createBlockTransaction({type:"ui"})),u??(u=!0);const f=n(),v=d.getLatestBlock(c);if(v.parentId=="root")return{success:!1};const b=getActuralSrcBlock(v,d),k=d.getLatestBlock(v.parentId);if(k.id=="root")return{success:!1};const x=getActuralSrcBlock(k,d),_=d.getLatestBlock(k.parentId),E=getActuralSrcBlock(_,d),B=x.childrenIds.indexOf(b.id),M=x.childrenIds.splice(B,1)[0],I=d.getLatestBlock(M);if(!I)return{success:!1};d.updateBlock(x);let F;k.type=="mirrorBlock"&&_.type=="normalBlock"?(F=_.childrenIds.indexOf(k.id),_.childrenIds.splice(F+1,0,M),d.updateBlock(_),I.parentId=_.id,d.updateBlock(I)):(F=E.childrenIds.indexOf(x.id),E.childrenIds.splice(F+1,0,M),d.updateBlock(E),I.parentId=E.id,d.updateBlock(I));const V=f.getOccurs(x.id,!1);for(const U of V){const j=d.getLatestBlock(U);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const oe=j.childrenIds.splice(B,1)[0];d.updateBlock(j),d.deleteBlock(oe)}const L=f.getOccurs(E.id,!1);for(const U of L){const j=d.getLatestBlock(U);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const oe={...b,id:nanoid(),parentId:j.id,type:"virtualBlock",fold:!0,src:b.id,childrenCreated:!1};j.childrenIds.splice(F+1,0,oe.id),d.updateBlock(j),d.addBlock(oe)}return u&&d.commit(),{success:!0}},toggleFold:s,moveBlock:l=>{let{blockId:c,pos:d,tr:u,commit:f}=l;f??(f=!0),u??(u=o.createBlockTransaction({type:"ui"}));const v=n(),{parentId:b,childIndex:k}=a(d),x=u.getLatestBlock(c),_=getActuralSrcBlock(x,u),E=u.getLatestBlock(_.parentId),B=u.getLatestBlock(b),M=getActuralSrcBlock(B,u),I=E.childrenIds.indexOf(_.id);if(I==-1)return null;let F;if(E.id===M.id?F=I<k?k-1:k:F=k,F<0||F>M.childrenIds.length)return null;if(E.id==M.id){if(I==k||I+1==k)return null;E.childrenIds.splice(I,1),E.childrenIds.splice(F,0,_.id),u.updateBlock(E)}else E.childrenIds.splice(I,1),u.updateBlock(E),M.childrenIds.splice(F,0,_.id),u.updateBlock(M),_.parentId=M.id,u.updateBlock(_);const V=v.getOccurs(E.id,!1);for(const U of V){const j=u.getLatestBlock(U);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const oe=j.childrenIds.splice(I,1)[0];u.updateBlock(j),u.deleteBlock(oe)}const L=v.getOccurs(M.id,!1);for(const U of L){const j=u.getLatestBlock(U);if(!j||j.type=="virtualBlock"&&!j.childrenCreated)continue;const oe={...structuredClone(_),id:nanoid(),parentId:j.id,type:"virtualBlock",childrenIds:[],fold:!0,src:_.id,childrenCreated:!1};j.childrenIds.splice(F,0,oe.id),u.updateBlock(j),u.addBlock(oe)}return f&&u.commit(),{}},moveBlocks:l=>{let{blockIds:c,pos:d,tr:u,commit:f}=l;f??(f=!0),u??(u=o.createBlockTransaction({type:"ui"}));const v=n(),{parentId:b,childIndex:k}=a(d),x=c[0],_=u.getLatestBlock(x),E=u.getLatestBlock(_.parentId),B=E.childrenIds.indexOf(x);if(B==-1)return null;for(let U=1;U<c.length;U++){const j=c[U],oe=E.childrenIds[B+U];if(j!==oe)return null}const M=B+c.length-1,I=getActuralSrcBlock(E,u),F=u.getLatestBlock(b),V=getActuralSrcBlock(F,u);let L;if(I.id===V.id){if(k>=B&&k<=M+1)return null;L=I.childrenIds.splice(B,c.length);const U=k<B?k:k-c.length;I.childrenIds.splice(U,0,...L),u.updateBlock(I);const j=v.getOccurs(I.id,!1);for(const oe of j){const Y=u.getLatestBlock(oe);if(!Y||Y.type=="virtualBlock"&&!Y.childrenCreated)continue;const K=Y.childrenIds.splice(B,c.length);Y.childrenIds.splice(U,0,...K),u.updateBlock(Y)}}else{L=I.childrenIds.splice(B,c.length),u.updateBlock(I),V.childrenIds.splice(k,0,...L),u.updateBlock(V);for(const oe of L){const Y=u.getLatestBlock(oe);Y&&(Y.parentId=V.id,u.updateBlock(Y))}const U=v.getOccurs(I.id,!1);for(const oe of U){const Y=u.getLatestBlock(oe);!Y||Y.type=="virtualBlock"&&!Y.childrenCreated||(Y.childrenIds.splice(B,c.length),u.updateBlock(Y))}const j=v.getOccurs(V.id,!1);for(const oe of j){const Y=u.getLatestBlock(oe);if(!Y||Y.type=="virtualBlock"&&!Y.childrenCreated)continue;const K=[];for(const W of L){const G=u.getLatestBlock(W);if(!G)continue;const ce={...G,id:nanoid(),parentId:Y.id,type:"virtualBlock",childrenIds:[],fold:!0,src:G.id,childrenCreated:!1};K.push(ce.id),u.addBlock(ce)}Y.childrenIds.splice(k,0,...K),u.updateBlock(Y)}}return f&&u.commit(),{}},locateBlock:async(l,c)=>{const d=[e.value],u=o.getBlockPath(l);if(u==null)return;let f,v;for(const b of d)if(v=u.findIndex(k=>k.id===b),v!=-1){f=b;break}if(f&&v!=null&&v>0)for(let b=v;b>0;b--){const k=u[b];k.fold&&await s(k.id,!1)}else{if((c==null?void 0:c.getId())!=="main")return;const b=o.getBlockPath(d[0]);if(!b)return;let k=b.length-1,x=u.length-1;for(;k>=0&&x>=0&&b[k].id==u[x].id;)k--,x--;const _=k<0?b[0]:x<0?u[0]:b[k+1],E=k<0?u.slice(0,x+1):x<0?b.slice(0,k+1):u.slice(x);e.value=_.id;for(const B of E)B.fold&&await s(B.id,!1)}}}},kbViewRegistry=createContext(()=>{const o={};return{register:(e,n)=>{o[e]=n},get:e=>o[e]}}),BlocksContext=createContext(()=>{const o=useRouterParams(),{token:e}=ServerInfoContext.useContext(),{get:n}=kbViewRegistry.useContext(),{mainRootBlockId:a}=MainTreeContext.useContext(),s=()=>n("index"),l=createSyncLayer(),c=createBlocksManager(l),d=createBlocksEditor(c,a,s);return watch(o,u=>{l.disconnect();const{serverUrl:f,location:v}=u??{};!f||!v||!e.value||l.connect(decodeURIComponent(f),decodeURIComponent(v),e.value)},{immediate:!0}),{blocksManager:c,blockEditor:d,syncLayer:l,synced:c.synced}}),FocusModeContext=createContext(()=>{const o=ref(!1),e=ref(!1);return{focusModeEnabled:o,focusNow:e}}),SPACE_OR_PUNCTUATION=/[|\n\r\s!"'&()*,\-./:;<=>?@[\\\]^_`{}~\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u,CJK=/[\u4E00-\u9FA5]/,ngramSplit=(o,e)=>{const n=[];for(let a=0;a<o.length-e+1;a++)n.push(o.slice(a<0?0:a,a+e));return n},extractAllPrefixies=o=>{const e=[];for(let n=1;n<=o.length;n++)e.push(o.slice(0,n));return e},splitByCjk=(o,e,n,a={})=>{let s=!1;const l=[],c=(d,u)=>{a.caseSensitive||(d=d.toLowerCase()),u?e(d):n(d)};for(const d of o)if(SPACE_OR_PUNCTUATION.test(d))l.length>0&&(c(l.join(""),s),l.length=0);else if(l.length==0)l.push(d),s=CJK.test(d);else{const u=CJK.test(d);u!=s?(c(l.join(""),s),l.length=0,l.push(d),s=u):l.push(d)}l.length>0&&c(l.join(""),s)},hybridTokenize=(o,e=!1,n=2,a=!0)=>{const s=[];return splitByCjk(o,l=>s.push(...ngramSplit(l,n)),l=>{s.push(l),a&&s.push(...extractAllPrefixies(l).slice(0,-1))},{caseSensitive:e}),s},calcMatchScore=(o,e)=>{let n=0;const a=e.toLowerCase();for(const s of o)a.includes(s)&&(n+=s.length);return n/e.length};function parse_option(o,e){return typeof o<"u"?o:e}function create_object_array(o){const e=Array(o);for(let n=0;n<o;n++)e[n]=create_object();return e}function get_keys(o){return Object.keys(o)}function create_object(){return Object.create(null)}function concat(o){return[].concat.apply([],o)}function sort_by_length_down(o,e){return e.length-o.length}function is_array(o){return o.constructor===Array}function is_string(o){return typeof o=="string"}function is_object(o){return typeof o=="object"}function is_function(o){return typeof o=="function"}function pipeline(o,e,n,a){if(o&&(e&&(o=replace(o,e)),this.matcher&&(o=replace(o,this.matcher)),this.stemmer&&1<o.length&&(o=replace(o,this.stemmer)),a&&1<o.length&&(o=collapse(o)),n||n==="")){const s=o.split(n);return this.filter?filter(s,this.filter):s}return o}const regex_whitespace=/[\p{Z}\p{S}\p{P}\p{C}]+/u;function init_filter(o){const e=create_object();for(let n=0,a=o.length;n<a;n++)e[o[n]]=1;return e}function init_stemmer_or_matcher(o,e){const n=get_keys(o),a=n.length,s=[];let l="",c=0;for(let d=0,u,f;d<a;d++)u=n[d],f=o[u],f?(s[c++]=regex(e?"(?!\\b)"+u+"(\\b|_)":u),s[c++]=f):l+=(l?"|":"")+u;return l&&(s[c++]=regex(e?"(?!\\b)("+l+")(\\b|_)":"("+l+")"),s[c]=""),s}function replace(o,e){for(let n=0,a=e.length;n<a&&(o=o.replace(e[n],e[n+1]),!!o);n+=2);return o}function regex(o){return new RegExp(o,"g")}function collapse(o){let e="",n="";for(let a=0,s=o.length,l;a<s;a++)(l=o[a])!==n&&(e+=n=l);return e}function filter(o,e){const n=o.length,a=[];for(let s=0,l=0;s<n;s++){const c=o[s];c&&!e[c]&&(a[l++]=c)}return a}function encode(o){return pipeline.call(this,(""+o).toLowerCase(),!1,regex_whitespace,!1)}const global_lang={},global_charset={};function apply_async(o){register$1(o,"add"),register$1(o,"append"),register$1(o,"search"),register$1(o,"update"),register$1(o,"remove")}function register$1(o,e){o[e+"Async"]=function(){const n=this,a=arguments,s=a[a.length-1];let l;is_function(s)&&(l=s,delete a[a.length-1]);const c=new Promise(function(d){setTimeout(function(){n.async=!0;const u=n[e].apply(n,a);n.async=!1,d(u)})});return l?(c.then(l),this):c}}function intersect(o,e,n,a){const s=o.length;let l=[],c,d,u=0;a&&(a=[]);for(let f=s-1;0<=f;f--){const v=o[f],b=v.length,k=create_object();let x=!c;for(let _=0;_<b;_++){const E=v[_],B=E.length;if(B)for(let M=0,I,F;M<B;M++)if(F=E[M],c){if(c[F]){if(!f){if(n)n--;else if(l[u++]=F,u===e)return l}(f||a)&&(k[F]=1),x=!0}if(a&&(I=(d[F]||0)+1,d[F]=I,I<s)){const V=a[I-2]||(a[I-2]=[]);V[V.length]=F}}else k[F]=1}if(a)c||(d=k);else if(!x)return[];c=k}if(a)for(let f=a.length-1,v,b;0<=f;f--){v=a[f],b=v.length;for(let k=0,x;k<b;k++)if(x=v[k],!c[x]){if(n)n--;else if(l[u++]=x,u===e)return l;c[x]=1}}return l}function intersect_union(o,e){const n=create_object(),a=create_object(),s=[];for(let l=0;l<o.length;l++)n[o[l]]=1;for(let l=0,c;l<e.length;l++){c=e[l];for(let d=0,u;d<c.length;d++)u=c[d],n[u]&&(a[u]||(a[u]=1,s[s.length]=u))}return s}function CacheClass(o){this.limit=o!==!0&&o,this.cache=create_object(),this.queue=[]}function searchCache(o,e,n){is_object(o)&&(o=o.query);let a=this.cache.get(o);return a||(a=this.search(o,e,n),this.cache.set(o,a)),a}CacheClass.prototype.set=function(o,e){if(!this.cache[o]){let n=this.queue.length;n===this.limit?delete this.cache[this.queue[n-1]]:n++;for(let a=n-1;0<a;a--)this.queue[a]=this.queue[a-1];this.queue[0]=o}this.cache[o]=e},CacheClass.prototype.get=function(o){const e=this.cache[o];if(this.limit&&e){const n=this.queue.indexOf(o);if(n){const a=this.queue[n-1];this.queue[n-1]=this.queue[n],this.queue[n]=a}}return e},CacheClass.prototype.del=function(o){for(let e=0,n,a;e<this.queue.length;e++)a=this.queue[e],n=this.cache[a],n.includes(o)&&(this.queue.splice(e--,1),delete this.cache[a])};const preset={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function apply_preset(o){if(is_string(o))o=preset[o];else{const e=o.preset;e&&(o=Object.assign({},e[e],o))}return o}function async(o,e,n,a,s,l,c,d){setTimeout(function(){const u=o(n?n+"."+a:a,JSON.stringify(c));u&&u.then?u.then(function(){e.export(o,e,n,s,l+1,d)}):e.export(o,e,n,s,l+1,d)})}function exportIndex(o,e,n,a,s,l){let c=!0;typeof l>"u"&&(c=new Promise(f=>{l=f}));let d,u;switch(s||(s=0)){case 0:if(d="reg",this.fastupdate){u=create_object();for(let f in this.register)u[f]=1}else u=this.register;break;case 1:d="cfg",u={doc:0,opt:this.optimize?1:0};break;case 2:d="map",u=this.map;break;case 3:d="ctx",u=this.ctx;break;default:typeof n>"u"&&l&&l();return}return async(o,e||this,n,d,a,s,u,l),c}function importIndex(o,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),o){case"cfg":this.optimize=!!e.opt;break;case"reg":this.fastupdate=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.ctx=e;break}}function exportDocument(o,e,n,a,s,l){let c;if(typeof l>"u"&&(c=new Promise(d=>{l=d})),s||(s=0),a||(a=0),a<this.field.length){const d=this.field[a],u=this.index[d];e=this,setTimeout(function(){u.export(o,e,s?d:"",a,s++,l)||(a++,s=1,e.export(o,e,d,a,s,l))})}else{let d,u;switch(s){case 1:d="tag",u=this.tagindex,n=null;break;case 2:d="store",u=this.store,n=null;break;default:l();return}async(o,this,n,d,a,s,u,l)}return c}function importDocument(o,e){if(e)switch(is_string(e)&&(e=JSON.parse(e)),o){case"tag":this.tagindex=e;break;case"reg":this.fastupdate=!1,this.register=e;for(let a=0,s;a<this.field.length;a++)s=this.index[this.field[a]],s.register=e,s.fastupdate=!1;break;case"store":this.store=e;break;default:o=o.split(".");const n=o[0];o=o[1],n&&o&&this.index[n].import(o,e)}}function Index(o,e){if(!(this instanceof Index))return new Index(o);let n,a,s;o?(o=apply_preset(o),n=o.charset,a=o.lang,is_string(n)&&(n.indexOf(":")===-1&&(n+=":default"),n=global_charset[n]),is_string(a)&&(a=global_lang[a])):o={};let l,c,d=o.context||{};this.encode=o.encode||n&&n.encode||encode,this.register=e||create_object(),this.resolution=l=o.resolution||9,this.tokenize=s=n&&n.tokenize||o.tokenize||"strict",this.depth=s==="strict"&&d.depth,this.bidirectional=parse_option(d.bidirectional,!0),this.optimize=c=parse_option(o.optimize,!0),this.fastupdate=parse_option(o.fastupdate,!0),this.minlength=o.minlength||1,this.boost=o.boost,this.map=c?create_object_array(l):create_object(),this.resolution_ctx=l=d.resolution||1,this.ctx=c?create_object_array(l):create_object(),this.rtl=n&&n.rtl||o.rtl,this.matcher=(s=o.matcher||a&&a.matcher)&&init_stemmer_or_matcher(s,!1),this.stemmer=(s=o.stemmer||a&&a.stemmer)&&init_stemmer_or_matcher(s,!0),this.filter=(s=o.filter||a&&a.filter)&&init_filter(s),this.cache=(s=o.cache)&&new CacheClass(s)}Index.prototype.append=function(o,e){return this.add(o,e,!0)},Index.prototype.add=function(o,e,n,a){if(e&&(o||o===0)){if(!a&&!n&&this.register[o])return this.update(o,e);e=this.encode(""+e);const s=e.length;if(s){const l=create_object(),c=create_object(),d=this.depth,u=this.resolution;for(let f=0;f<s;f++){let v=e[this.rtl?s-1-f:f],b=v.length;if(v&&b>=this.minlength&&(d||!c[v])){let k=get_score(u,s,f),x="";switch(this.tokenize){case"full":if(2<b){for(let _=0;_<b;_++)for(let E=b;E>_;E--)if(E-_>=this.minlength){const B=get_score(u,s,f,b,_);x=v.substring(_,E),this.push_index(c,x,B,o,n)}break}case"reverse":if(1<b){for(let _=b-1;0<_;_--)if(x=v[_]+x,x.length>=this.minlength){const E=get_score(u,s,f,b,_);this.push_index(c,x,E,o,n)}x=""}case"forward":if(1<b){for(let _=0;_<b;_++)x+=v[_],x.length>=this.minlength&&this.push_index(c,x,k,o,n);break}default:if(this.boost&&(k=Math.min(0|k/this.boost(e,v,f),u-1)),this.push_index(c,v,k,o,n),d&&1<s&&f<s-1){const _=create_object(),E=this.resolution_ctx,B=v,M=Math.min(d+1,s-f);_[B]=1;for(let I=1;I<M;I++)if(v=e[this.rtl?s-1-f-I:f+I],v&&v.length>=this.minlength&&!_[v]){_[v]=1;const F=get_score(E+(s/2>E?0:1),s,f,M-1,I-1),V=this.bidirectional&&v>B;this.push_index(l,V?B:v,F,o,n,V?v:B)}}}}}this.fastupdate||(this.register[o]=1)}}return this};function get_score(o,e,n,a,s){return n&&1<o?e+(a||0)<=o?n+(s||0):0|(o-1)/(e+(a||0))*(n+(s||0))+1:0}Index.prototype.push_index=function(o,e,n,a,s,l){let c=l?this.ctx:this.map;if((!o[e]||l&&!o[e][l])&&(this.optimize&&(c=c[n]),l?(o=o[e]||(o[e]=create_object()),o[l]=1,c=c[l]||(c[l]=create_object())):o[e]=1,c=c[e]||(c[e]=[]),this.optimize||(c=c[n]||(c[n]=[])),(!s||!c.includes(a))&&(c[c.length]=a,this.fastupdate))){const d=this.register[a]||(this.register[a]=[]);d[d.length]=c}},Index.prototype.search=function(o,e,n){n||(!e&&is_object(o)?(n=o,o=n.query):is_object(e)&&(n=e));let a=[],s,l,c,d=0;if(n&&(o=n.query||o,e=n.limit,d=n.offset||0,l=n.context,c=n.suggest),o&&(o=this.encode(""+o),s=o.length,1<s)){const b=create_object(),k=[];for(let x=0,_=0,E;x<s;x++)if(E=o[x],E&&E.length>=this.minlength&&!b[E]){if(!this.optimize&&!c&&!this.map[E])return a;k[_++]=E,b[E]=1}o=k,s=o.length}if(!s)return a;e||(e=100);let u=this.depth&&1<s&&l!==!1,f=0,v;u?(v=o[0],f=1):1<s&&o.sort(sort_by_length_down);for(let b,k;f<s;f++){if(k=o[f],u?(b=this.add_result(a,c,e,d,s===2,k,v),(!c||b!==!1||!a.length)&&(v=k)):b=this.add_result(a,c,e,d,s===1,k),b)return b;if(c&&f==s-1){let x=a.length;if(x){if(x===1)return single_result(a[0],e,d)}else{if(u){u=0,f=-1;continue}return a}}}return intersect(a,e,d,c)},Index.prototype.add_result=function(o,e,n,a,s,l,c){let d=[],u=c?this.ctx:this.map;if(this.optimize||(u=get_array(u,l,c,this.bidirectional)),u){let f=0;const v=Math.min(u.length,c?this.resolution_ctx:this.resolution);for(let b=0,k=0,x,_;b<v&&(x=u[b],!(x&&(this.optimize&&(x=get_array(x,l,c,this.bidirectional)),a&&x&&s&&(_=x.length,_<=a?(a-=_,x=null):(x=x.slice(a),a=0)),x&&(d[f++]=x,s&&(k+=x.length,k>=n)))));b++);if(f){if(s)return single_result(d,n,0);o[o.length]=d;return}}return!e&&d};function single_result(o,e,n){return o.length===1?o=o[0]:o=concat(o),n||o.length>e?o.slice(n,n+e):o}function get_array(o,e,n,a){if(n){const s=a&&e>n;o=o[s?e:n],o=o&&o[s?n:e]}else o=o[e];return o}Index.prototype.contain=function(o){return!!this.register[o]},Index.prototype.update=function(o,e){return this.remove(o).add(o,e)},Index.prototype.remove=function(o,e){const n=this.register[o];if(n){if(this.fastupdate)for(let a=0,s;a<n.length;a++)s=n[a],s.splice(s.indexOf(o),1);else remove_index(this.map,o,this.resolution,this.optimize),this.depth&&remove_index(this.ctx,o,this.resolution_ctx,this.optimize);e||delete this.register[o],this.cache&&this.cache.del(o)}return this};function remove_index(o,e,n,a,s){let l=0;if(is_array(o))if(s){const c=o.indexOf(e);c!==-1?1<o.length&&(o.splice(c,1),l++):l++}else{s=Math.min(o.length,n);for(let c=0,d;c<s;c++)d=o[c],d&&(l=remove_index(d,e,n,a,s),!a&&!l&&delete o[c])}else for(let c in o)l=remove_index(o[c],e,n,a,s),l||delete o[c];return l}Index.prototype.searchCache=searchCache,Index.prototype.export=exportIndex,Index.prototype.import=importIndex,apply_async(Index.prototype);function handler(o){o=o.data;const e=self._index,n=o.args,a=o.task;switch(a){case"init":const s=o.options||{},l=o.factory,c=s.encode;s.cache=!1,c&&c.indexOf("function")===0&&(s.encode=Function("return "+c)()),l?(Function("return "+l)()(self),self._index=new self.FlexSearch.Index(s),delete self.FlexSearch):self._index=new Index(s);break;default:const d=o.id,u=e[a].apply(e,n);postMessage(a==="search"?{id:d,msg:u}:{id:d})}}let pid=0;function WorkerIndex(o){if(!(this instanceof WorkerIndex))return new WorkerIndex(o);let e;o?is_function(e=o.encode)&&(o.encode=e.toString()):o={};let n=(self||window)._factory;n&&(n=n.toString());const a=typeof window>"u"&&self.exports,s=this;this.worker=create(n,a,o.worker),this.resolver=create_object(),this.worker&&(a?this.worker.on("message",function(l){s.resolver[l.id](l.msg),delete s.resolver[l.id]}):this.worker.onmessage=function(l){l=l.data,s.resolver[l.id](l.msg),delete s.resolver[l.id]},this.worker.postMessage({task:"init",factory:n,options:o}))}register("add"),register("append"),register("search"),register("update"),register("remove");function register(o){WorkerIndex.prototype[o]=WorkerIndex.prototype[o+"Async"]=function(){const e=this,n=[].slice.call(arguments),a=n[n.length-1];let s;is_function(a)&&(s=a,n.splice(n.length-1,1));const l=new Promise(function(c){setTimeout(function(){e.resolver[++pid]=c,e.worker.postMessage({task:o,id:pid,args:n})})});return s?(l.then(s),this):l}}function create(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval('new (require("worker_threads")["Worker"])(__dirname + "/node/node.js")'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+handler.toString()],{type:"text/javascript"}))):new Worker(is_string(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(o){}return worker}function Document(o){if(!(this instanceof Document))return new Document(o);const e=o.document||o.doc||o;let n;this.tree=[],this.field=[],this.marker=[],this.register=create_object(),this.key=(n=e.key||e.id)&&parse_tree(n,this.marker)||"id",this.fastupdate=parse_option(o.fastupdate,!0),this.storetree=(n=e.store)&&n!==!0&&[],this.store=n&&create_object(),this.tag=(n=e.tag)&&parse_tree(n,this.marker),this.tagindex=n&&create_object(),this.cache=(n=o.cache)&&new CacheClass(n),o.cache=!1,this.worker=o.worker,this.async=!1,this.index=parse_descriptor.call(this,o,e)}function parse_descriptor(o,e){const n=create_object();let a=e.index||e.field||e;is_string(a)&&(a=[a]);for(let s=0,l,c;s<a.length;s++)l=a[s],is_string(l)||(c=l,l=l.field),c=is_object(c)?Object.assign({},o,c):o,this.worker&&(n[l]=new WorkerIndex(c),n[l].worker||(this.worker=!1)),this.worker||(n[l]=new Index(c,this.register)),this.tree[s]=parse_tree(l,this.marker),this.field[s]=l;if(this.storetree){let s=e.store;is_string(s)&&(s=[s]);for(let l=0;l<s.length;l++)this.storetree[l]=parse_tree(s[l],this.marker)}return n}function parse_tree(o,e){const n=o.split(":");let a=0;for(let s=0;s<n.length;s++)o=n[s],0<=o.indexOf("[]")&&(o=o.substring(0,o.length-2),o&&(e[a]=!0)),o&&(n[a++]=o);return a<n.length&&(n.length=a),1<a?n:n[0]}function parse_simple(o,e){if(is_string(e))o=o[e];else for(let n=0;o&&n<e.length;n++)o=o[e[n]];return o}function store_value(o,e,n,a,s){if(o=o[s],a===n.length-1)e[s]=o;else if(o)if(is_array(o)){e=e[s]=Array(o.length);for(let l=0;l<o.length;l++)store_value(o,e,n,a,l)}else e=e[s]||(e[s]=create_object()),s=n[++a],store_value(o,e,n,a,s)}function add_index(o,e,n,a,s,l,c,d){if(o=o[c],o)if(a===e.length-1){if(is_array(o)){if(n[a]){for(let u=0;u<o.length;u++)s.add(l,o[u],!0,!0);return}o=o.join(" ")}s.add(l,o,d,!0)}else if(is_array(o))for(let u=0;u<o.length;u++)add_index(o,e,n,a,s,l,u,d);else c=e[++a],add_index(o,e,n,a,s,l,c,d)}Document.prototype.add=function(o,e,n){if(is_object(o)&&(e=o,o=parse_simple(e,this.key)),e&&(o||o===0)){if(!n&&this.register[o])return this.update(o,e);for(let a=0,s,l;a<this.field.length;a++)l=this.field[a],s=this.tree[a],is_string(s)&&(s=[s]),add_index(e,s,this.marker,0,this.index[l],o,s[0],n);if(this.tag){let a=parse_simple(e,this.tag),s=create_object();is_string(a)&&(a=[a]);for(let l=0,c,d;l<a.length;l++)if(c=a[l],!s[c]&&(s[c]=1,d=this.tagindex[c]||(this.tagindex[c]=[]),(!n||!d.includes(o))&&(d[d.length]=o,this.fastupdate))){const u=this.register[o]||(this.register[o]=[]);u[u.length]=d}}if(this.store&&(!n||!this.store[o])){let a;if(this.storetree){a=create_object();for(let s=0,l;s<this.storetree.length;s++)l=this.storetree[s],is_string(l)?a[l]=e[l]:store_value(e,a,l,0,l[0])}this.store[o]=a||e}}return this},Document.prototype.append=function(o,e){return this.add(o,e,!0)},Document.prototype.update=function(o,e){return this.remove(o).add(o,e)},Document.prototype.remove=function(o){if(is_object(o)&&(o=parse_simple(o,this.key)),this.register[o]){for(let e=0;e<this.field.length&&(this.index[this.field[e]].remove(o,!this.worker),!this.fastupdate);e++);if(this.tag&&!this.fastupdate)for(let e in this.tagindex){const n=this.tagindex[e],a=n.indexOf(o);a!==-1&&(1<n.length?n.splice(a,1):delete this.tagindex[e])}this.store&&delete this.store[o],delete this.register[o]}return this},Document.prototype.search=function(o,e,n,a){n||(!e&&is_object(o)?(n=o,o=""):is_object(e)&&(n=e,e=0));let s=[],l=[],c,d,u,f,v,b,k=0;if(n)if(is_array(n))u=n,n=null;else{if(o=n.query||o,c=n.pluck,u=c||n.index||n.field,f=n.tag,d=this.store&&n.enrich,v=n.bool==="and",e=n.limit||e||100,b=n.offset||0,f&&(is_string(f)&&(f=[f]),!o)){for(let _=0,E;_<f.length;_++)E=get_tag.call(this,f[_],e,b,d),E&&(s[s.length]=E,k++);return k?s:[]}is_string(u)&&(u=[u])}u||(u=this.field),v=v&&(1<u.length||f&&1<f.length);const x=!a&&(this.worker||this.async)&&[];for(let _=0,E,B,M;_<u.length;_++){let I;if(B=u[_],is_string(B)||(I=B,B=I.field,o=I.query||o,e=I.limit||e,d=I.enrich||d),x){x[_]=this.index[B].searchAsync(o,e,I||n);continue}else a?E=a[_]:E=this.index[B].search(o,e,I||n);if(M=E&&E.length,f&&M){const F=[];let V=0;v&&(F[0]=[E]);for(let L=0,U,j;L<f.length;L++)U=f[L],j=this.tagindex[U],M=j&&j.length,M&&(V++,F[F.length]=v?[j]:j);V&&(v?E=intersect(F,e||100,b||0):E=intersect_union(E,F),M=E.length)}if(M)l[k]=B,s[k++]=E;else if(v)return[]}if(x){const _=this;return new Promise(function(E){Promise.all(x).then(function(B){E(_.search(o,e,n,B))})})}if(!k)return[];if(c&&(!d||!this.store))return s[0];for(let _=0,E;_<l.length;_++){if(E=s[_],E.length&&d&&(E=apply_enrich.call(this,E)),c)return E;s[_]={field:l[_],result:E}}return s};function get_tag(o,e,n){let a=this.tagindex[o];a&&a.length-n}function apply_enrich(o){const e=Array(o.length);for(let n=0,a;n<o.length;n++)a=o[n],e[n]={id:a,doc:this.store[a]};return e}Document.prototype.contain=function(o){return!!this.register[o]},Document.prototype.get=function(o){return this.store[o]},Document.prototype.set=function(o,e){return this.store[o]=e,this},Document.prototype.searchCache=searchCache,Document.prototype.export=exportDocument,Document.prototype.import=importDocument,apply_async(Document.prototype);const IndexContext=createContext(()=>{const o=useEventBus(),{blocksManager:e}=BlocksContext.useContext(),{register:n}=kbViewRegistry.useContext(),a=shallowReactive(new Map),s=shallowReactive(new Map),l=(F,V,L)=>{L=L||a;const U=L.get(F);U?U.add(V):L.set(F,new Set([V]))},c=(F,V,L)=>{L=L||s;const U=L.get(F);U?U.add(V):L.set(F,new Set([V]))},d=(F,V,L)=>{L=L||a;const U=L.get(F);U&&(U.delete(V),U.size==0&&L.delete(F))},u=(F,V,L)=>{L=L||s;const U=L.get(F);U&&(U.delete(V),U.size==0&&L.delete(F))},f=F=>a.get(F)??new Set,v=F=>s.get(F)??new Set,b=(F,V=!0)=>{const L=[];return L.push(...f(F)),L.push(...v(F)),V&&L.push(F),L};o.on("afterBlocksTrCommit",([F])=>{for(let V=0;V<F.patches.length;V++){const L=F.patches[V],U=F.reversePatches[V];if(L.op==="add"){const j=L.block;j.type==="mirrorBlock"?l(j.src,j.id):j.type==="virtualBlock"&&c(j.src,j.id)}else if(L.op==="delete"&&U.op==="add"){const j=U.block;j.type==="mirrorBlock"?d(j.src,j.id):j.type==="virtualBlock"&&u(j.src,j.id)}}}),o.on("blocksDestroy",()=>{a.clear(),s.clear()});const k=ref({}),x=ref({});o.on("afterBlocksTrCommit",([F])=>{var V,L,U,j;for(let oe=0;oe<F.patches.length;oe++){const Y=F.patches[oe],K=F.reversePatches[oe];if(Y.op==="delete"){if(delete k.value[Y.blockId],delete x.value[Y.blockId],K.op!=="add")continue;const W=K.block;if(W.type!=="normalBlock"||W.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const G=e.getOlinks(W.content[1]);for(const ce of G)(V=k.value[ce])==null||V.delete(W.id),(L=x.value[ce])==null||L.delete(W.id)}else if(Y.op==="add"||Y.op==="update"){const W=Y.block;if(W.type!=="normalBlock"||W.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;const G=K.op==="delete"?[]:K.block.type!=="normalBlock"||K.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(K.block.content[1],"blockRef"),ce=K.op==="delete"?[]:K.block.type!=="normalBlock"||K.block.content[0]!==BLOCK_CONTENT_TYPES.TEXT?[]:e.getOlinks(K.block.content[1],"tag"),se=e.getOlinks(W.content[1],"blockRef"),me=e.getOlinks(W.content[1],"tag"),ge=se.filter(We=>!G.includes(We)),Te=G.filter(We=>!se.includes(We));for(const We of ge)k.value[We]=(k.value[We]??new Set).add(W.id);for(const We of Te)(U=k.value[We])==null||U.delete(W.id);const Be=me.filter(We=>!ce.includes(We)),Ge=ce.filter(We=>!me.includes(We));for(const We of Be)x.value[We]=(x.value[We]??new Set).add(W.id);for(const We of Ge)(j=x.value[We])==null||j.delete(W.id)}}}),o.on("blocksDestroy",()=>{k.value={},x.value={}});const _=(F,V="both")=>{if(V==="blockRef")return k.value[F]??new Set;if(V==="tag")return x.value[F]??new Set;{const L=k.value[F]??new Set,U=x.value[F]??new Set;return new Set([...L,...U])}},E=new Document({document:{id:"id",index:"text",store:["text"]},encode:F=>hybridTokenize(F)}),B=new Set;o.on("afterBlocksTrCommit",([F])=>{for(const V of F.patches)V.op==="delete"?B.add(V.blockId):B.add(V.block.id)}),o.on("blocksDestroy",()=>{B.clear()});const M=()=>{if(B.size!==0){for(const F of B){const V=e.getBlock(F);if(V==null&&E.contain(F))E.remove(F);else if(V&&V.type==="normalBlock"){E.contain(F)&&E.remove(F);const L=V.ctext+" "+V.mtext;E.add(F,{id:F,text:L})}}B.clear()}},I={fulltextIndex:E,blockRefsIndex:k,tagIndex:x,search:(F,V=200)=>{var oe,Y;M();const L=(Y=(oe=E.search(F,{limit:V,enrich:!0}))==null?void 0:oe[0])==null?void 0:Y.result;if(!L)return[];const U=hybridTokenize(F,!1,1,!1),j=L.map(K=>{const W=calcMatchScore(U,K.doc.text);return{id:K.id,score:W}});return j.sort((K,W)=>W.score-K.score),j.map(K=>K.id)},getMirrors:f,getVirtuals:v,getOccurs:b,getBacklinks:_};return n("index",I),I}),FusionCommandContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),n=ref(""),a=computed(()=>n.value.startsWith("/")?"searchCommand":"searchBlock"),s=ref([]),l=ref(-1),c=ref(null),d=ref(!1),u=ref(!1),f=ref([!0,!1,!1,!1,!1]),v=computed(()=>n.value.length==0?[]:hybridTokenize(n.value,!1,1,!1)??[]);return{inputText:n,mode:a,blockSearchResult:s,focusIndex:l,contentEl:c,suppressMouseOver:d,open:u,allowedBlockTypes:f,queryTerms:v,updateBlockSearchResult:()=>{const b=n.value.trim();if(b===""){s.value=[];return}s.value=e(b).map(k=>o.getBlock(k)).filter(k=>k!==null).filter(k=>k.type=="normalBlock"&&f.value[k.content[0]]),l.value=s.value.length>0?0:-1},openFusionCommand:b=>{n.value=b,u.value=!0,nextTick(()=>{var x;const k=(x=c.value)==null?void 0:x.querySelector("input");k instanceof HTMLElement&&k.focus()})}}});function markApplies(o,e,n,a){for(let s=0;s<e.length;s++){let{$from:l,$to:c}=e[s],d=l.depth==0?o.inlineContent&&o.type.allowsMarkType(n):!1;if(o.nodesBetween(l.pos,c.pos,(u,f)=>{if(d)return!1;d=u.inlineContent&&u.type.allowsMarkType(n)}),d)return!0}return!1}function toggleMark(o,e=null,n){return function(a,s){let{empty:l,$cursor:c,ranges:d}=a.selection;if(l&&!c||!markApplies(a.doc,d,o))return!1;if(s)if(c)o.isInSet(a.storedMarks||c.marks())?s(a.tr.removeStoredMark(o)):s(a.tr.addStoredMark(o.create(e)));else{let u,f=a.tr;u=!d.some(v=>a.doc.rangeHasMark(v.$from.pos,v.$to.pos,o));for(let v=0;v<d.length;v++){let{$from:b,$to:k}=d[v];if(!u)f.removeMark(b.pos,k.pos,o);else{let x=b.pos,_=k.pos,E=b.nodeAfter,B=k.nodeBefore,M=E&&E.isText?/^\s*/.exec(E.text)[0].length:0,I=B&&B.isText?/\s*$/.exec(B.text)[0].length:0;x+M<_&&(x+=M,_-=I),f.addMark(x,_,o.create(e))}}s(f.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function withTimeout(o,e){return new Promise((n,a)=>{const s=setTimeout(()=>{a(new Error("Operation timed out"))},e);o.then(l=>{clearTimeout(s),n(l)},l=>{clearTimeout(s),a(l)})})}function timeout(o){return new Promise(e=>setTimeout(e,o))}class AsyncTaskQueue{constructor(e=2e3){Ht(this,"id",0);Ht(this,"queue",[]);Ht(this,"giveupQueue",[]);Ht(this,"ongoingTask",null);Ht(this,"defaultTimeout");this.defaultTimeout=e}addTask(e,n={}){var x;const{type:a,delay:s,debounce:l,checker:c,timeout:d,meta:u}=n,f=this.id++;let v=[];if(l&&a!="null"){const _=this.queue.findIndex(E=>E.type==a);if(_!==-1){const E=this.queue[_];E.canceller&&E.canceller(),this.queue.splice(_,1),v.push(...E.awareness.mergedTasks),v.push(E)}}const b=(((x=new Error().stack)==null?void 0:x.split(`
`).filter(_=>_.includes("addTask")).length)??0)>1,k=this.ongoingTask?this.queue.findIndex(_=>_.id==this.ongoingTask.id):-1;if(s&&s>0){const _=setTimeout(async()=>{this._processQueue(f)},s),E=()=>{clearTimeout(_)};b?this.queue.splice(k+1,0,{id:f,callback:e,type:a??"null",canceller:E,recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}):this.queue.push({id:f,callback:e,type:a??"null",canceller:E,timeout:d,checker:c,meta:u,awareness:{mergedTasks:v}})}else b?this.queue.splice(k+1,0,{id:f,callback:e,type:a??"null",recursive:!0,checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}):this.queue.push({id:f,callback:e,type:a??"null",checker:c,timeout:d,meta:u,awareness:{mergedTasks:v}}),this._processQueue(f)}async addTaskAndWait(e,n={}){return new Promise(a=>{const s=async l=>{await e(l),a(void 0)};this.addTask(s,n)})}async flushQueue(){await this.addTaskAndWait(()=>{},{})}async _processQueue(e){if(this.queue.length===0)return;if(this.ongoingTask&&!this.queue[0].recursive){this.giveupQueue.push(e);return}const n=this.queue.shift(),{id:a,callback:s,canceller:l,recursive:c,checker:d,timeout:u,meta:f,awareness:v}=n;if(this.ongoingTask=n,l&&l(),!d||d())try{console.log("callback",v);const b=s(v);if(b!=null)try{await withTimeout(b,u??this.defaultTimeout)}catch(k){console.warn(k)}}catch(b){console.error(b)}this.ongoingTask=null,a!==e&&await this._processQueue(e),!c&&this.giveupQueue.length>0&&queueMicrotask(()=>{for(const b of this.giveupQueue)this.giveupQueue.shift()&&this._processQueue(b)})}}let useTaskQueue,globalTaskQueue,taskQueuePlugin;useTaskQueue=()=>globalTaskQueue,globalTaskQueue=new AsyncTaskQueue,taskQueuePlugin={install(o){o.provide("taskQueue",globalTaskQueue)}},DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}NodeProp=class{constructor(o={}){this.id=nextPropID++,this.perNode=!!o.perNode,this.deserialize=o.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(o){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof o!="function"&&(o=NodeType.match(o)),e=>{let n=o(e);return n===void 0?null:[this,n]}}},NodeProp.closedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.group=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:o=>{if(o&&o!="rtl"&&o!="ltr"&&o!="auto")throw new RangeError("Invalid value for isolate: "+o);return o||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,n,a){this.tree=e,this.overlay=n,this.parser=a}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);NodeType=class{constructor(o,e,n,a=0){this.name=o,this.props=e,this.id=n,this.flags=a}static define(o){let e=o.props&&o.props.length?Object.create(null):noProps,n=(o.top?1:0)|(o.skipped?2:0)|(o.error?4:0)|(o.name==null?8:0),a=new NodeType(o.name||"",e,o.id,n);if(o.props){for(let s of o.props)if(Array.isArray(s)||(s=s(a)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[s[0].id]=s[1]}}return a}prop(o){return this.props[o.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(o){if(typeof o=="string"){if(this.name==o)return!0;let e=this.prop(NodeProp.group);return e?e.indexOf(o)>-1:!1}return this.id==o}static match(o){let e=Object.create(null);for(let n in o)for(let a of n.split(" "))e[a]=o[n];return n=>{for(let a=n.prop(NodeProp.group),s=-1;s<(a?a.length:0);s++){let l=e[s<0?n.name:a[s]];if(l)return l}}}},NodeType.none=new NodeType("",Object.create(null),0,8),NodeSet=class{constructor(o){this.types=o;for(let e=0;e<o.length;e++)if(o[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...o){let e=[];for(let n of this.types){let a=null;for(let s of o){let l=s(n);l&&(a||(a=Object.assign({},n.props)),a[l[0].id]=l[1])}e.push(a?new NodeType(n.name,a,n.id,n.flags):n)}return new NodeSet(e)}};const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;(function(o){o[o.ExcludeBuffers=1]="ExcludeBuffers",o[o.IncludeAnonymous=2]="IncludeAnonymous",o[o.IgnoreMounts=4]="IgnoreMounts",o[o.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={})),Tree=class{constructor(o,e,n,a,s){if(this.type=o,this.children=e,this.positions=n,this.length=a,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,c]of s)this.props[typeof l=="number"?l:l.id]=c}}toString(){let o=MountedTree.get(this);if(o&&!o.overlay)return o.tree.toString();let e="";for(let n of this.children){let a=n.toString();a&&(e&&(e+=","),e+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(o=0){return new TreeCursor(this.topNode,o)}cursorAt(o,e=0,n=0){let a=CachedNode.get(this)||this.topNode,s=new TreeCursor(a);return s.moveTo(o,e),CachedNode.set(this,s._tree),s}get topNode(){return new TreeNode(this,0,0,null)}resolve(o,e=0){let n=resolveNode(CachedNode.get(this)||this.topNode,o,e,!1);return CachedNode.set(this,n),n}resolveInner(o,e=0){let n=resolveNode(CachedInnerNode.get(this)||this.topNode,o,e,!0);return CachedInnerNode.set(this,n),n}resolveStack(o,e=0){return stackIterator(this,o,e)}iterate(o){let{enter:e,leave:n,from:a=0,to:s=this.length}=o,l=o.mode||0,c=(l&IterMode.IncludeAnonymous)>0;for(let d=this.cursor(l|IterMode.IncludeAnonymous);;){let u=!1;if(d.from<=s&&d.to>=a&&(!c&&d.type.isAnonymous||e(d)!==!1)){if(d.firstChild())continue;u=!0}for(;u&&n&&(c||!d.type.isAnonymous)&&n(d),!d.nextSibling();){if(!d.parent())return;u=!0}}}prop(o){return o.perNode?this.props?this.props[o.id]:void 0:this.type.prop(o)}get propValues(){let o=[];if(this.props)for(let e in this.props)o.push([+e,this.props[e]]);return o}balance(o={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(e,n,a)=>new Tree(this.type,e,n,a,this.propValues),o.makeTree||((e,n,a)=>new Tree(NodeType.none,e,n,a)))}static build(o){return buildTree$1(o)}},Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,a){this.buffer=e,this.length=n,this.set=a}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],a=this.buffer[e+3],s=this.set.types[n],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,a==e)return l;let c=[];for(;e<a;)c.push(this.childString(e)),e=this.buffer[e+3];return l+"("+c.join(",")+")"}findChild(e,n,a,s,l){let{buffer:c}=this,d=-1;for(let u=e;u!=n&&!(checkSide(l,s,c[u+1],c[u+2])&&(d=u,a>0));u=c[u+3]);return d}slice(e,n,a){let s=this.buffer,l=new Uint16Array(n-e),c=0;for(let d=e,u=0;d<n;){l[u++]=s[d++],l[u++]=s[d++]-a;let f=l[u++]=s[d++]-a;l[u++]=s[d++]-e,c=Math.max(c,f)}return new TreeBuffer(l,c,this.set)}}function checkSide(o,e,n,a){switch(o){case-2:return n<e;case-1:return a>=e&&n<e;case 0:return n<e&&a>e;case 1:return n<=e&&a>e;case 2:return a>e;case 4:return!0}}function resolveNode(o,e,n,a){for(var s;o.from==o.to||(n<1?o.from>=e:o.from>e)||(n>-1?o.to<=e:o.to<e);){let c=!a&&o instanceof TreeNode&&o.index<0?null:o.parent;if(!c)return o;o=c}let l=a?0:IterMode.IgnoreOverlays;if(a)for(let c=o,d=c.parent;d;c=d,d=c.parent)c instanceof TreeNode&&c.index<0&&((s=d.enter(e,n,l))===null||s===void 0?void 0:s.from)!=c.from&&(o=d);for(;;){let c=o.enter(e,n,l);if(!c)return o;o=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,n=null,a=null){let s=getChildren(this,e,n,a);return s.length?s[0]:null}getChildren(e,n=null,a=null){return getChildren(this,e,n,a)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),a=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(a=n,n=s.prevSibling):n=s}return a}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,n,a,s){super(),this._tree=e,this.from=n,this.index=a,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,a,s,l=0){for(let c=this;;){for(let{children:d,positions:u}=c._tree,f=n>0?d.length:-1;e!=f;e+=n){let v=d[e],b=u[e]+c.from;if(checkSide(s,a,b,b+v.length)){if(v instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let k=v.findChild(0,v.buffer.length,n,a-b,s);if(k>-1)return new BufferNode(new BufferContext(c,v,e,b),null,k)}else if(l&IterMode.IncludeAnonymous||!v.type.isAnonymous||hasChild(v)){let k;if(!(l&IterMode.IgnoreMounts)&&(k=MountedTree.get(v))&&!k.overlay)return new TreeNode(k.tree,b,e,c);let x=new TreeNode(v,b,e,c);return l&IterMode.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(n<0?v.children.length-1:0,n,a,s)}}}if(l&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+n:e=n<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,a=0){let s;if(!(a&IterMode.IgnoreOverlays)&&(s=MountedTree.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:c,to:d}of s.overlay)if((n>0?c<=l:c<l)&&(n<0?d>=l:d>l))return new TreeNode(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(o,e,n,a){let s=o.cursor(),l=[];if(!s.firstChild())return l;if(n!=null){for(let c=!1;!c;)if(c=s.type.is(n),!s.nextSibling())return l}for(;;){if(a!=null&&s.type.is(a))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return a==null?l:[]}}function matchNodeContext(o,e,n=e.length-1){for(let a=o;n>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[n]&&e[n]!=a.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,a,s){this.parent=e,this.buffer=n,this.index=a,this.start=s}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,a){super(),this.context=e,this._parent=n,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,n,a){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,a);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,a=0){if(a&IterMode.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:a}=this.context,s=this.index+4,l=a.buffer[this.index+3];if(l>s){let c=a.buffer[this.index+1];e.push(a.slice(s,l,c)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(o){if(!o.length)return null;let e=0,n=o[0];for(let l=1;l<o.length;l++){let c=o[l];(c.from>n.from||c.to<n.to)&&(n=c,e=l)}let a=n instanceof TreeNode&&n.index<0?null:n.parent,s=o.slice();return a?s[e]=a:s.splice(e,1),new StackIterator(s,n)}class StackIterator{constructor(e,n){this.heads=e,this.node=n}get next(){return iterStack(this.heads)}}function stackIterator(o,e,n){let a=o.resolveInner(e,n),s=null;for(let l=a instanceof TreeNode?a:a.context.parent;l;l=l.parent)if(l.index<0){let c=l.parent;(s||(s=[a])).push(c.resolve(e,n)),l=c}else{let c=MountedTree.get(l.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new TreeNode(c.tree,c.overlay[0].from+l.from,-1,l);(s||(s=[a])).push(resolveNode(d,e,n,!1))}}return s?iterStack(s):a}class TreeCursor{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:a,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=a+s.buffer[e+1],this.to=a+s.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,a,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,a);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,a=this.mode){return this.buffer?a&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,a=this.stack.length-1;if(e<0){let s=a<0?0:this.stack[a]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(a<0?n.buffer.length:n.buffer[this.stack[a]+3]))return this.yieldBuf(s)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,a,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:n,parent:a}=s)}else({index:n,_parent:a}=this._tree);for(;a;{index:n,_parent:a}=a)if(n>-1)for(let l=n+e,c=e<0?-1:a._tree.children.length;l!=c;l+=e){let d=a._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||d instanceof TreeBuffer||!d.type.isAnonymous||hasChild(d))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,a=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let c=e;c;c=c._parent)if(c.index==s){if(s==this.index)return c;n=c,a=l+1;break e}s=this.stack[--l]}for(let s=a;s<this.stack.length;s++)n=new BufferNode(this.buffer,n,this.stack[s]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let a=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!a)return;if(this.nextSibling())break;this.parent(),a--,s=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:n}=this.buffer,{types:a}=n.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return matchNodeContext(this._tree,e,s);let c=a[n.buffer[this.stack[l]]];if(!c.isAnonymous){if(e[s]&&e[s]!=c.name)return!1;s--}}return!0}}function hasChild(o){return o.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree$1(o){var e;let{buffer:n,nodeSet:a,maxBufferLength:s=DefaultBufferLength,reused:l=[],minRepeatType:c=a.types.length}=o,d=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,u=a.types,f=0,v=0;function b(L,U,j,oe,Y,K){let{id:W,start:G,end:ce,size:se}=d,me=v,ge=f;for(;se<0;)if(d.next(),se==-1){let Oe=l[W];j.push(Oe),oe.push(G-L);return}else if(se==-3){f=W;return}else if(se==-4){v=W;return}else throw new RangeError(`Unrecognized record size: ${se}`);let Te=u[W],Be,Ge,We=G-L;if(ce-G<=s&&(Ge=B(d.pos-U,Y))){let Oe=new Uint16Array(Ge.size-Ge.skip),Ve=d.pos-Ge.size,Xe=Oe.length;for(;d.pos>Ve;)Xe=M(Ge.start,Oe,Xe);Be=new TreeBuffer(Oe,ce-Ge.start,a),We=Ge.start-L}else{let Oe=d.pos-se;d.next();let Ve=[],Xe=[],dt=W>=c?W:-1,pt=0,ft=ce;for(;d.pos>Oe;)dt>=0&&d.id==dt&&d.size>=0?(d.end<=ft-s&&(_(Ve,Xe,G,pt,d.end,ft,dt,me,ge),pt=Ve.length,ft=d.end),d.next()):K>2500?k(G,Oe,Ve,Xe):b(G,Oe,Ve,Xe,dt,K+1);if(dt>=0&&pt>0&&pt<Ve.length&&_(Ve,Xe,G,pt,G,ft,dt,me,ge),Ve.reverse(),Xe.reverse(),dt>-1&&pt>0){let Ce=x(Te,ge);Be=balanceRange(Te,Ve,Xe,0,Ve.length,0,ce-G,Ce,Ce)}else Be=E(Te,Ve,Xe,ce-G,me-ce,ge)}j.push(Be),oe.push(We)}function k(L,U,j,oe){let Y=[],K=0,W=-1;for(;d.pos>U;){let{id:G,start:ce,end:se,size:me}=d;if(me>4)d.next();else{if(W>-1&&ce<W)break;W<0&&(W=se-s),Y.push(G,ce,se),K++,d.next()}}if(K){let G=new Uint16Array(K*4),ce=Y[Y.length-2];for(let se=Y.length-3,me=0;se>=0;se-=3)G[me++]=Y[se],G[me++]=Y[se+1]-ce,G[me++]=Y[se+2]-ce,G[me++]=me;j.push(new TreeBuffer(G,Y[2]-ce,a)),oe.push(ce-L)}}function x(L,U){return(j,oe,Y)=>{let K=0,W=j.length-1,G,ce;if(W>=0&&(G=j[W])instanceof Tree){if(!W&&G.type==L&&G.length==Y)return G;(ce=G.prop(NodeProp.lookAhead))&&(K=oe[W]+G.length+ce)}return E(L,j,oe,Y,K,U)}}function _(L,U,j,oe,Y,K,W,G,ce){let se=[],me=[];for(;L.length>oe;)se.push(L.pop()),me.push(U.pop()+j-Y);L.push(E(a.types[W],se,me,K-Y,G-K,ce)),U.push(Y-j)}function E(L,U,j,oe,Y,K,W){if(K){let G=[NodeProp.contextHash,K];W=W?[G].concat(W):[G]}if(Y>25){let G=[NodeProp.lookAhead,Y];W=W?[G].concat(W):[G]}return new Tree(L,U,j,oe,W)}function B(L,U){let j=d.fork(),oe=0,Y=0,K=0,W=j.end-s,G={size:0,start:0,skip:0};e:for(let ce=j.pos-L;j.pos>ce;){let se=j.size;if(j.id==U&&se>=0){G.size=oe,G.start=Y,G.skip=K,K+=4,oe+=4,j.next();continue}let me=j.pos-se;if(se<0||me<ce||j.start<W)break;let ge=j.id>=c?4:0,Te=j.start;for(j.next();j.pos>me;){if(j.size<0)if(j.size==-3)ge+=4;else break e;else j.id>=c&&(ge+=4);j.next()}Y=Te,oe+=se,K+=ge}return(U<0||oe==L)&&(G.size=oe,G.start=Y,G.skip=K),G.size>4?G:void 0}function M(L,U,j){let{id:oe,start:Y,end:K,size:W}=d;if(d.next(),W>=0&&oe<c){let G=j;if(W>4){let ce=d.pos-(W-4);for(;d.pos>ce;)j=M(L,U,j)}U[--j]=G,U[--j]=K-L,U[--j]=Y-L,U[--j]=oe}else W==-3?f=oe:W==-4&&(v=oe);return j}let I=[],F=[];for(;d.pos>0;)b(o.start||0,o.bufferStart||0,I,F,-1,0);let V=(e=o.length)!==null&&e!==void 0?e:I.length?F[0]+I[0].length:0;return new Tree(u[o.topID],I.reverse(),F.reverse(),V)}const nodeSizeCache=new WeakMap;function nodeSize(o,e){if(!o.isAnonymous||e instanceof TreeBuffer||e.type!=o)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let a of e.children){if(a.type!=o||!(a instanceof Tree)){n=1;break}n+=nodeSize(o,a)}nodeSizeCache.set(e,n)}return n}function balanceRange(o,e,n,a,s,l,c,d,u){let f=0;for(let _=a;_<s;_++)f+=nodeSize(o,e[_]);let v=Math.ceil(f*1.5/8),b=[],k=[];function x(_,E,B,M,I){for(let F=B;F<M;){let V=F,L=E[F],U=nodeSize(o,_[F]);for(F++;F<M;F++){let j=nodeSize(o,_[F]);if(U+j>=v)break;U+=j}if(F==V+1){if(U>v){let j=_[V];x(j.children,j.positions,0,j.children.length,E[V]+I);continue}b.push(_[V])}else{let j=E[F-1]+_[F-1].length-L;b.push(balanceRange(o,_,E,V,F,L,j,null,u))}k.push(L+I-l)}}return x(e,n,a,s,0),(d||u)(b,k,c)}NodeWeakMap=class{constructor(){this.map=new WeakMap}setBuffer(o,e,n){let a=this.map.get(o);a||this.map.set(o,a=new Map),a.set(e,n)}getBuffer(o,e){let n=this.map.get(o);return n&&n.get(e)}set(o,e){o instanceof BufferNode?this.setBuffer(o.context.buffer,o.index,e):o instanceof TreeNode&&this.map.set(o.tree,e)}get(o){return o instanceof BufferNode?this.getBuffer(o.context.buffer,o.index):o instanceof TreeNode?this.map.get(o.tree):void 0}cursorSet(o,e){o.buffer?this.setBuffer(o.buffer.buffer,o.index,e):this.map.set(o.tree,e)}cursorGet(o){return o.buffer?this.getBuffer(o.buffer.buffer,o.index):this.map.get(o.tree)}};class TreeFragment{constructor(e,n,a,s,l=!1,c=!1){this.from=e,this.to=n,this.tree=a,this.offset=s,this.open=(l?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],a=!1){let s=[new TreeFragment(0,e.length,e,0,!1,a)];for(let l of n)l.to>e.length&&s.push(l);return s}static applyChanges(e,n,a=128){if(!n.length)return e;let s=[],l=1,c=e.length?e[0]:null;for(let d=0,u=0,f=0;;d++){let v=d<n.length?n[d]:null,b=v?v.fromA:1e9;if(b-u>=a)for(;c&&c.from<b;){let k=c;if(u>=k.from||b<=k.to||f){let x=Math.max(k.from,u)-f,_=Math.min(k.to,b)-f;k=x>=_?null:new TreeFragment(x,_,k.tree,k.offset+f,d>0,!!v)}if(k&&s.push(k),c.to>b)break;c=l<e.length?e[l++]:null}if(!v)break;u=v.toA,f=v.toA-v.toB}return s}}Parser$1=class{startParse(o,e,n){return typeof o=="string"&&(o=new StringInput(o)),n=n?n.length?n.map(a=>new Range(a.from,a.to)):[new Range(0,0)]:[new Range(0,o.length)],this.createParse(o,e||[],n)}parse(o,e,n){let a=this.startParse(o,e,n);for(;;){let s=a.advance();if(s)return s}}};class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}parseMixed=function(o){return(e,n,a,s)=>new MixedParse(e,o,n,a,s)};class InnerParse{constructor(e,n,a,s,l){this.parser=e,this.parse=n,this.overlay=a,this.target=s,this.from=l}}function checkRanges(o){if(!o.length||o.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(o))}class ActiveOverlay{constructor(e,n,a,s,l,c,d){this.parser=e,this.predicate=n,this.mounts=a,this.index=s,this.start=l,this.target=c,this.prev=d,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(e,n,a,s,l){this.nest=n,this.input=a,this.fragments=s,this.ranges=l,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let a=this.baseParse.advance();if(!a)return null;if(this.baseParse=null,this.baseTree=a,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let a=this.baseTree;return this.stoppedAt!=null&&(a=new Tree(a.type,a.children,a.positions,a.length,a.propValues.concat([[stoppedInner,this.stoppedAt]]))),a}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let a=Object.assign(Object.create(null),e.target.props);a[NodeProp.mounted.id]=new MountedTree(n,e.overlay,e.parser),e.target.props=a}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new FragmentCursor(this.fragments),n=null,a=null,s=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let l,c;;){let d=!0,u;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)d=!1;else if(e.hasNode(s)){if(n){let f=n.mounts.find(v=>v.frag.from<=s.from&&v.frag.to>=s.to&&v.mount.overlay);if(f)for(let v of f.mount.overlay){let b=v.from+f.pos,k=v.to+f.pos;b>=s.from&&k<=s.to&&!n.ranges.some(x=>x.from<k&&x.to>b)&&n.ranges.push({from:b,to:k})}}d=!1}else if(a&&(c=checkCover(a.ranges,s.from,s.to)))d=c!=2;else if(!s.type.isAnonymous&&(l=this.nest(s,this.input))&&(s.from<s.to||!l.overlay)){s.tree||materialize(s);let f=e.findMounts(s.from,l.parser);if(typeof l.overlay=="function")n=new ActiveOverlay(l.parser,l.overlay,f,this.inner.length,s.from,s.tree,n);else{let v=punchRanges(this.ranges,l.overlay||(s.from<s.to?[new Range(s.from,s.to)]:[]));v.length&&checkRanges(v),(v.length||!l.overlay)&&this.inner.push(new InnerParse(l.parser,v.length?l.parser.startParse(this.input,enterFragments(f,v),v):l.parser.startParse(""),l.overlay?l.overlay.map(b=>new Range(b.from-s.from,b.to-s.from)):null,s.tree,v.length?v[0].from:s.from)),l.overlay?v.length&&(a={ranges:v,depth:0,prev:a}):d=!1}}else if(n&&(u=n.predicate(s))&&(u===!0&&(u=new Range(s.from,s.to)),u.from<u.to)){let f=n.ranges.length-1;f>=0&&n.ranges[f].to==u.from?n.ranges[f]={from:n.ranges[f].from,to:u.to}:n.ranges.push(u)}if(d&&s.firstChild())n&&n.depth++,a&&a.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(n&&!--n.depth){let f=punchRanges(this.ranges,n.ranges);f.length&&(checkRanges(f),this.inner.splice(n.index,0,new InnerParse(n.parser,n.parser.startParse(this.input,enterFragments(n.mounts,f),f),n.ranges.map(v=>new Range(v.from-n.start,v.to-n.start)),n.target,f[0].from))),n=n.prev}a&&!--a.depth&&(a=a.prev)}}}}function checkCover(o,e,n){for(let a of o){if(a.from>=n)break;if(a.to>e)return a.from<=e&&a.to>=n?2:1}return 0}function sliceBuf(o,e,n,a,s,l){if(e<n){let c=o.buffer[e+1];a.push(o.slice(e,n,c)),s.push(c-l)}}function materialize(o){let{node:e}=o,n=[],a=e.context.buffer;do n.push(o.index),o.parent();while(!o.tree);let s=o.tree,l=s.children.indexOf(a),c=s.children[l],d=c.buffer,u=[l];function f(v,b,k,x,_,E){let B=n[E],M=[],I=[];sliceBuf(c,v,B,M,I,x);let F=d[B+1],V=d[B+2];u.push(M.length);let L=E?f(B+4,d[B+3],c.set.types[d[B]],F,V-F,E-1):e.toTree();return M.push(L),I.push(F-x),sliceBuf(c,d[B+3],b,M,I,x),new Tree(k,M,I,_)}s.children[l]=f(0,d.length,NodeType.none,0,c.length,n.length-1);for(let v of u){let b=o.tree.children[v],k=o.tree.positions[v];o.yield(new TreeNode(b,k+o.from,v,o._tree))}}class StructureCursor{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(e){let{cursor:n}=this,a=e-this.offset;for(;!this.done&&n.from<a;)n.to>=e&&n.enter(a,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Tree)n=n.children[0];else break}return!1}}class FragmentCursor{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let a=this.curFrag=e[0];this.curTo=(n=a.tree.prop(stoppedInner))!==null&&n!==void 0?n:a.to,this.inner=new StructureCursor(a.tree,-a.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(stoppedInner))!==null&&e!==void 0?e:n.to,this.inner=new StructureCursor(n.tree,-n.offset)}}findMounts(e,n){var a;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let l=this.inner.cursor.node;l;l=l.parent){let c=(a=l.tree)===null||a===void 0?void 0:a.prop(NodeProp.mounted);if(c&&c.parser==n)for(let d=this.fragI;d<this.fragments.length;d++){let u=this.fragments[d];if(u.from>=l.to)break;u.tree==this.curFrag.tree&&s.push({frag:u,pos:l.from-u.offset,mount:c})}}}return s}}function punchRanges(o,e){let n=null,a=e;for(let s=1,l=0;s<o.length;s++){let c=o[s-1].to,d=o[s].from;for(;l<a.length;l++){let u=a[l];if(u.from>=d)break;u.to<=c||(n||(a=n=e.slice()),u.from<c?(n[l]=new Range(u.from,c),u.to>d&&n.splice(l+1,0,new Range(d,u.to))):u.to>d?n[l--]=new Range(d,u.to):n.splice(l--,1))}}return a}function findCoverChanges(o,e,n,a){let s=0,l=0,c=!1,d=!1,u=-1e9,f=[];for(;;){let v=s==o.length?1e9:c?o[s].to:o[s].from,b=l==e.length?1e9:d?e[l].to:e[l].from;if(c!=d){let k=Math.max(u,n),x=Math.min(v,b,a);k<x&&f.push(new Range(k,x))}if(u=Math.min(v,b),u==1e9)break;v==u&&(c?(c=!1,s++):c=!0),b==u&&(d?(d=!1,l++):d=!0)}return f}function enterFragments(o,e){let n=[];for(let{pos:a,mount:s,frag:l}of o){let c=a+(s.overlay?s.overlay[0].from:0),d=c+s.tree.length,u=Math.max(l.from,c),f=Math.min(l.to,d);if(s.overlay){let v=s.overlay.map(k=>new Range(k.from+a,k.to+a)),b=findCoverChanges(e,v,u,f);for(let k=0,x=u;;k++){let _=k==b.length,E=_?f:b[k].from;if(E>x&&n.push(new TreeFragment(x,E,s.tree,-c,l.from>=x||l.openStart,l.to<=E||l.openEnd)),_)break;x=b[k].to}}else n.push(new TreeFragment(u,f,s.tree,-c,l.from>=c||l.openStart,l.to<=d||l.openEnd))}return n}let nextTagID=0;Tag=class{constructor(o,e,n,a){this.name=o,this.set=e,this.base=n,this.modified=a,this.id=nextTagID++}toString(){let{name:o}=this;for(let e of this.modified)e.name&&(o=`${e.name}(${o})`);return o}static define(o,e){let n=typeof o=="string"?o:"?";if(o instanceof Tag&&(e=o),e==null?void 0:e.base)throw new Error("Can not derive from a modified tag");let a=new Tag(n,[],null,[]);if(a.set.push(a),e)for(let s of e.set)a.set.push(s);return a}static defineModifier(o){let e=new Modifier(o);return n=>n.modified.indexOf(e)>-1?n:Modifier.get(n.base||n,n.modified.concat(e).sort((a,s)=>a.id-s.id))}};let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let a=n[0].instances.find(d=>d.base==e&&sameArray(n,d.modified));if(a)return a;let s=[],l=new Tag(e.name,s,e,n);for(let d of n)d.instances.push(l);let c=powerSet(n);for(let d of e.set)if(!d.modified.length)for(let u of c)s.push(Modifier.get(d,u));return l}}function sameArray(o,e){return o.length==e.length&&o.every((n,a)=>n==e[a])}function powerSet(o){let e=[[]];for(let n=0;n<o.length;n++)for(let a=0,s=e.length;a<s;a++)e.push(e[a].concat(o[n]));return e.sort((n,a)=>a.length-n.length)}styleTags=function(o){let e=Object.create(null);for(let n in o){let a=o[n];Array.isArray(a)||(a=[a]);for(let s of n.split(" "))if(s){let l=[],c=2,d=s;for(let b=0;;){if(d=="..."&&b>0&&b+3==s.length){c=1;break}let k=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!k)throw new RangeError("Invalid path: "+s);if(l.push(k[0]=="*"?"":k[0][0]=='"'?JSON.parse(k[0]):k[0]),b+=k[0].length,b==s.length)break;let x=s[b++];if(b==s.length&&x=="!"){c=0;break}if(x!="/")throw new RangeError("Invalid path: "+s);d=s.slice(b)}let u=l.length-1,f=l[u];if(!f)throw new RangeError("Invalid path: "+s);let v=new Rule(a,c,u>0?l.slice(0,u):null);e[f]=v.sort(e[f])}}return ruleNodeProp.add(e)};const ruleNodeProp=new NodeProp;class Rule{constructor(e,n,a,s){this.tags=e,this.mode=n,this.context=a,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(o,e){let n=Object.create(null);for(let l of o)if(!Array.isArray(l.tag))n[l.tag.id]=l.class;else for(let c of l.tag)n[c.id]=l.class;let{scope:a,all:s=null}=e||{};return{style:l=>{let c=s;for(let d of l)for(let u of d.set){let f=n[u.id];if(f){c=c?c+" "+f:f;break}}return c},scope:a}}function highlightTags(o,e){let n=null;for(let a of o){let s=a.style(e);s&&(n=n?n+" "+s:s)}return n}function highlightTree(o,e,n,a=0,s=o.length){let l=new HighlightBuilder(a,Array.isArray(e)?e:[e],n);l.highlightRange(o.cursor(),a,s,"",l.highlighters),l.flush(s)}class HighlightBuilder{constructor(e,n,a){this.at=e,this.highlighters=n,this.span=a,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,a,s,l){let{type:c,from:d,to:u}=e;if(d>=a||u<=n)return;c.isTop&&(l=this.highlighters.filter(x=>!x.scope||x.scope(c)));let f=s,v=getStyleTags(e)||Rule.empty,b=highlightTags(l,v.tags);if(b&&(f&&(f+=" "),f+=b,v.mode==1&&(s+=(s?" ":"")+b)),this.startSpan(Math.max(n,d),f),v.opaque)return;let k=e.tree&&e.tree.prop(NodeProp.mounted);if(k&&k.overlay){let x=e.node.enter(k.overlay[0].from+d,1),_=this.highlighters.filter(B=>!B.scope||B.scope(k.tree.type)),E=e.firstChild();for(let B=0,M=d;;B++){let I=B<k.overlay.length?k.overlay[B]:null,F=I?I.from+d:u,V=Math.max(n,M),L=Math.min(a,F);if(V<L&&E)for(;e.from<L&&(this.highlightRange(e,V,L,s,l),this.startSpan(Math.min(L,e.to),f),!(e.to>=F||!e.nextSibling())););if(!I||F>a)break;M=I.to+d,M>n&&(this.highlightRange(x.cursor(),Math.max(n,I.from+d),Math.min(a,M),"",_),this.startSpan(Math.min(a,M),f))}E&&e.parent()}else if(e.firstChild()){k&&(s="");do if(!(e.to<=n)){if(e.from>=a)break;this.highlightRange(e,n,a,s,l),this.startSpan(Math.min(a,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(o){let e=o.type.prop(ruleNodeProp);for(;e&&e.context&&!o.matchContext(e.context);)e=e.next;return e||null}let t,comment,name,typeName,propertyName,literal,string,number,content,heading,keyword,operator,punctuation,bracket,meta;t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let o in tags){let e=tags[o];e instanceof Tag&&(e.name=o)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;languageDataProp=new NodeProp,defineLanguageFacet=function(o){return Facet.define({combine:o?e=>e.concat(o):void 0})},sublanguageProp=new NodeProp,Language=class{constructor(o,e,n=[],a=""){this.data=o,this.name=a,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=e,this.extension=[language.of(this),EditorState.languageData.of((s,l,c)=>{let d=topNodeAt(s,l,c),u=d.type.prop(languageDataProp);if(!u)return[];let f=s.facet(u),v=d.type.prop(sublanguageProp);if(v){let b=d.resolve(l-d.from,c);for(let k of v)if(k.test(b,s)){let x=s.facet(k.facet);return k.type=="replace"?x:x.concat(f)}}return f})].concat(n)}isActiveAt(o,e,n=-1){return topNodeAt(o,e,n).type.prop(languageDataProp)==this.data}findRegions(o){let e=o.facet(language);if((e==null?void 0:e.data)==this.data)return[{from:0,to:o.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],a=(s,l)=>{if(s.prop(languageDataProp)==this.data){n.push({from:l,to:l+s.length});return}let c=s.prop(NodeProp.mounted);if(c){if(c.tree.prop(languageDataProp)==this.data){if(c.overlay)for(let d of c.overlay)n.push({from:d.from+l,to:d.to+l});else n.push({from:l,to:l+s.length});return}else if(c.overlay){let d=n.length;if(a(c.tree,c.overlay[0].from+l),n.length>d)return}}for(let d=0;d<s.children.length;d++){let u=s.children[d];u instanceof Tree&&a(u,s.positions[d]+l)}};return a(syntaxTree(o),0),n}get allowsNesting(){return!0}},Language.setState=StateEffect.define();function topNodeAt(o,e,n){let a=o.facet(language),s=syntaxTree(o).topNode;if(!a||a.allowsNesting)for(let l=s;l;l=l.enter(e,n,IterMode.ExcludeBuffers))l.type.isTop&&(s=l);return s}LRLanguage=class extends Language{constructor(o,e,n){super(o,e,[],n),this.parser=e}static define(o){let e=defineLanguageFacet(o.languageData);return new LRLanguage(e,o.parser.configure({props:[languageDataProp.add(n=>n.isTop?e:void 0)]}),o.name)}configure(o,e){return new LRLanguage(this.data,this.parser.configure(o),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}},syntaxTree=function(o){let e=o.field(Language.state,!1);return e?e.tree:Tree.empty};class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let a=this.cursorPos-this.string.length;return e<a||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-a,n-a)}}let currentContext=null;ParseContext=class{constructor(o,e,n=[],a,s,l,c,d){this.parser=o,this.state=e,this.fragments=n,this.tree=a,this.treeLen=s,this.viewport=l,this.skipped=c,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(o,e,n){return new ParseContext(o,e,[],Tree.empty,0,n,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(o,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Tree.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof o=="number"){let a=Date.now()+o;o=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(o())return!1}})}takeTree(){let o,e;this.parse&&(o=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>o)&&this.parse.stopAt(o),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=o,this.tree=e,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(o){let e=currentContext;currentContext=this;try{return o()}finally{currentContext=e}}withoutTempSkipped(o){for(let e;e=this.tempSkipped.pop();)o=cutFragments(o,e.from,e.to);return o}changes(o,e){let{fragments:n,tree:a,treeLen:s,viewport:l,skipped:c}=this;if(this.takeTree(),!o.empty){let d=[];if(o.iterChangedRanges((u,f,v,b)=>d.push({fromA:u,toA:f,fromB:v,toB:b})),n=TreeFragment.applyChanges(n,d),a=Tree.empty,s=0,l={from:o.mapPos(l.from,-1),to:o.mapPos(l.to,1)},this.skipped.length){c=[];for(let u of this.skipped){let f=o.mapPos(u.from,1),v=o.mapPos(u.to,-1);f<v&&c.push({from:f,to:v})}}}return new ParseContext(this.parser,e,n,a,s,l,c,this.scheduleOn)}updateViewport(o){if(this.viewport.from==o.from&&this.viewport.to==o.to)return!1;this.viewport=o;let e=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:a,to:s}=this.skipped[n];a<o.to&&s>o.from&&(this.fragments=cutFragments(this.fragments,a,s),this.skipped.splice(n--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(o,e){this.skipped.push({from:o,to:e})}static getSkippingParser(o){return new class extends Parser$1{createParse(e,n,a){let s=a[0].from,l=a[a.length-1].to;return{parsedPos:s,advance(){let c=currentContext;if(c){for(let d of a)c.tempSkipped.push(d);o&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,o]):o)}return this.parsedPos=l,new Tree(NodeType.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(o){o=Math.min(o,this.state.doc.length);let e=this.fragments;return this.treeLen>=o&&e.length&&e[0].from==0&&e[0].to>=o}static get(){return currentContext}};function cutFragments(o,e,n){return TreeFragment.applyChanges(o,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,a)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),a=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return a.work(20,n)||a.takeTree(),new LanguageState(a)}}Language.state=StateField.define({create:LanguageState.init,update(o,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):o.apply(e)}});let requestIdle=o=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=o=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(o,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(o){let e=this.view.state.field(Language.state).context;(e.updateViewport(o.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(o.docChanged||o.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:o}=this.view,e=o.field(Language.state);(e.tree!=e.context.tree||!e.context.isDone(o.doc.length))&&(this.working=requestIdle(this.work))}work(o){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:a}}=this.view,s=n.field(Language.state);if(s.tree==s.context.tree&&s.context.isDone(a+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,o&&!isInputPending?Math.max(25,o.timeRemaining()-5):1e9),c=s.context.treeLen<a&&n.doc.length>a+1e3,d=s.context.work(()=>isInputPending&&isInputPending()||Date.now()>l,a+(c?0:1e5));this.chunkBudget-=Date.now()-e,(d||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(s.context))})),this.chunkBudget>0&&!(d&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(o){o.scheduleOn&&(this.workScheduled++,o.scheduleOn.then(()=>this.scheduleWork()).catch(e=>logException(this.view.state,e)).then(()=>this.workScheduled--),o.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(o){return o.length?o[0]:null},enables:o=>[Language.state,parseWorker,EditorView.contentAttributes.compute([o],e=>{let n=e.facet(o);return n&&n.name?{"data-language":n.name}:{}})]});LanguageSupport=class{constructor(o,e=[]){this.language=o,this.support=e,this.extension=[o,e]}},LanguageDescription=class{constructor(o,e,n,a,s,l=void 0){this.name=o,this.alias=e,this.extensions=n,this.filename=a,this.loadFunc=s,this.support=l,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(o=>this.support=o,o=>{throw this.loading=null,o}))}static of(o){let{load:e,support:n}=o;if(!e){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");e=()=>Promise.resolve(n)}return new LanguageDescription(o.name,(o.alias||[]).concat(o.name).map(a=>a.toLowerCase()),o.extensions||[],o.filename,e,n)}static matchFilename(o,e){for(let a of o)if(a.filename&&a.filename.test(e))return a;let n=/\.([^.]+)$/.exec(e);if(n){for(let a of o)if(a.extensions.indexOf(n[1])>-1)return a}return null}static matchLanguageName(o,e,n=!0){e=e.toLowerCase();for(let a of o)if(a.alias.some(s=>s==e))return a;if(n)for(let a of o)for(let s of a.alias){let l=e.indexOf(s);if(l>-1&&(s.length>2||!/\w/.test(e[l-1])&&!/\w/.test(e[l+s.length])))return a}return null}};let indentService;indentService=Facet.define(),indentUnit=Facet.define({combine:o=>{if(!o.length)return"  ";let e=o[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(o[0]));return e}});function getIndentUnit(o){let e=o.facet(indentUnit);return e.charCodeAt(0)==9?o.tabSize*e.length:e.length}function indentString(o,e){let n="",a=o.tabSize,s=o.facet(indentUnit)[0];if(s=="	"){for(;e>=a;)n+="	",e-=a;s=" "}for(let l=0;l<e;l++)n+=s;return n}function getIndentation(o,e){o instanceof EditorState&&(o=new IndentContext(o));for(let a of o.state.facet(indentService)){let s=a(o,e);if(s!==void 0)return s}let n=syntaxTree(o.state);return n.length>=e?syntaxIndentation(o,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let a=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=a.from&&s<=a.to?l&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:a.text.slice(s-a.from),from:s}:{text:a.text.slice(0,s-a.from),from:a.from}:a}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:s}=this.lineAt(e,n);return a.slice(e-s,Math.min(a.length,e+100-s))}column(e,n=1){let{text:a,from:s}=this.lineAt(e,n),l=this.countColumn(a,e-s),c=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return c>-1&&(l+=c-this.countColumn(a,a.search(/\S|$/))),l}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:a,from:s}=this.lineAt(e,n),l=this.options.overrideIndentation;if(l){let c=l(s);if(c>-1)return c}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}indentNodeProp=new NodeProp;function syntaxIndentation(o,e,n){let a=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=a.node){let l=[];for(let c=s;c&&!(c.from==a.node.from&&c.type==a.node.type);c=c.parent)l.push(c);for(let c=l.length-1;c>=0;c--)a={node:l[c],next:a}}return indentFor(a,o,n)}function indentFor(o,e,n){for(let a=o;a;a=a.next){let s=indentStrategy(a.node);if(s)return s(TreeIndentContext.create(e,n,a))}return 0}function ignoreClosed(o){return o.pos==o.options.simulateBreak&&o.options.simulateDoubleBreak}function indentStrategy(o){let e=o.type.prop(indentNodeProp);if(e)return e;let n=o.firstChild,a;if(n&&(a=n.type.prop(NodeProp.closedBy))){let s=o.lastChild,l=s&&a.indexOf(s.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,l&&!ignoreClosed(c)?s.from:void 0)}return o.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,a){super(e.state,e.options),this.base=e,this.pos=n,this.context=a}get node(){return this.context.node}static create(e,n,a){return new TreeIndentContext(e,n,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let a=e.resolve(n.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(isParent(a,e))break;n=this.state.doc.lineAt(a.from)}return this.lineIndent(n.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(o,e){for(let n=e;n;n=n.parent)if(o==n)return!0;return!1}function bracketedAligned(o){let e=o.node,n=e.childAfter(e.from),a=e.lastChild;if(!n)return null;let s=o.options.simulateBreak,l=o.state.doc.lineAt(n.from),c=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let d=n.to;;){let u=e.childAfter(d);if(!u||u==a)return null;if(!u.type.isSkipped){if(u.from>=c)return null;let f=/^ */.exec(l.text.slice(n.to-l.from))[0].length;return{from:n.from,to:n.to+f}}d=u.to}}delimitedIndent=function({closing:o,align:e=!0,units:n=1}){return a=>delimitedStrategy(a,e,n,o)};function delimitedStrategy(o,e,n,a,s){let l=o.textAfter,c=l.match(/^\s*/)[0].length,d=a&&l.slice(c,c+a.length)==a||s==o.pos+c,u=e?bracketedAligned(o):null;return u?d?o.column(u.from):o.column(u.to):o.baseIndent+(d?0:o.unit*n)}flatIndent=o=>o.baseIndent,continuedIndent=function({except:o,units:e=1}={}){return n=>{let a=o&&o.test(n.textAfter);return n.baseIndent+(a?0:e*n.unit)}};const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(o=>{if(!o.docChanged||!o.isUserEvent("input.type")&&!o.isUserEvent("input.complete"))return o;let e=o.startState.languageDataAt("indentOnInput",o.startState.selection.main.head);if(!e.length)return o;let n=o.newDoc,{head:a}=o.newSelection.main,s=n.lineAt(a);if(a>s.from+DontIndentBeyond)return o;let l=n.sliceString(s.from,a);if(!e.some(f=>f.test(l)))return o;let{state:c}=o,d=-1,u=[];for(let{head:f}of c.selection.ranges){let v=c.doc.lineAt(f);if(v.from==d)continue;d=v.from;let b=getIndentation(c,v.from);if(b==null)continue;let k=/^\s*/.exec(v.text)[0],x=indentString(c,b);k!=x&&u.push({from:v.from,to:v.from+k.length,insert:x})}return u.length?[o,{changes:u,sequential:!0}]:o})}foldService=Facet.define(),foldNodeProp=new NodeProp,foldInside=function(o){let e=o.firstChild,n=o.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?o.to:n.from}:null};class HighlightStyle{constructor(e,n){this.specs=e;let a;function s(d){let u=StyleModule.newName();return(a||(a=Object.create(null)))["."+u]=d,u}const l=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,c=n.scope;this.scope=c instanceof Language?d=>d.prop(languageDataProp)==c.data:c?d=>d==c:void 0,this.style=tagHighlighter(e.map(d=>({tag:d.tag,class:d.class||s(Object.assign({},d,{tag:null}))})),{all:l}).style,this.module=a?new StyleModule(a):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(o){return o.length?[o[0]]:null}});function getHighlighters(o){let e=o.facet(highlighterFacet);return e.length?e:o.facet(fallbackHighlighter)}function syntaxHighlighting(o,e){let n=[treeHighlighter],a;return o instanceof HighlightStyle&&(o.module&&n.push(EditorView.styleModule.of(o.module)),a=o.themeType),e!=null&&e.fallback?n.push(fallbackHighlighter.of(o)):a?n.push(highlighterFacet.computeN([EditorView.darkTheme],s=>s.facet(EditorView.darkTheme)==(a=="dark")?[o]:[])):n.push(highlighterFacet.of(o)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=syntaxTree(e.state),a=getHighlighters(e.state),s=a!=getHighlighters(e.startState),{viewport:l}=e.view,c=e.changes.mapPos(this.decoratedTo,1);n.length<l.to&&!s&&n.type==this.tree.type&&c>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,a),this.decoratedTo=l.to)}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let a=new RangeSetBuilder;for(let{from:s,to:l}of e.visibleRanges)highlightTree(this.tree,n,(c,d,u)=>{a.add(c,d,this.markCache[u]||(this.markCache[u]=Decoration.mark({class:u})))},s,l);return a.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:o=>o.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$1=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(o){return combineConfig(o,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(o){let e=[],n=o.matched?matchingMark:nonmatchingMark;return e.push(n.range(o.start.from,o.start.to)),o.end&&e.push(n.range(o.end.from,o.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(o,e){if(!e.docChanged&&!e.selection)return o;let n=[],a=e.state.facet(bracketMatchingConfig);for(let s of e.state.selection.ranges){if(!s.empty)continue;let l=matchBrackets(e.state,s.head,-1,a)||s.head>0&&matchBrackets(e.state,s.head-1,1,a)||a.afterCursor&&(matchBrackets(e.state,s.head,1,a)||s.head<e.state.doc.length&&matchBrackets(e.state,s.head+1,-1,a));l&&(n=n.concat(a.renderMatch(l,e.state)))}return Decoration.set(n,!0)},provide:o=>EditorView.decorations.from(o)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$1];function bracketMatching(o={}){return[bracketMatchingConfig.of(o),bracketMatchingUnique]}bracketMatchingHandle=new NodeProp;function matchingNodes(o,e,n){let a=o.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(a)return a;if(o.name.length==1){let s=n.indexOf(o.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function findHandle(o){let e=o.type.prop(bracketMatchingHandle);return e?e(o.node):o}function matchBrackets(o,e,n,a={}){let s=a.maxScanDistance||DefaultScanDist,l=a.brackets||DefaultBrackets,c=syntaxTree(o),d=c.resolveInner(e,n);for(let u=d;u;u=u.parent){let f=matchingNodes(u.type,n,l);if(f&&u.from<u.to){let v=findHandle(u);if(v&&(n>0?e>=v.from&&e<v.to:e>v.from&&e<=v.to))return matchMarkedBrackets(o,e,n,u,v,f,l)}}return matchPlainBrackets(o,e,n,c,d.type,s,l)}function matchMarkedBrackets(o,e,n,a,s,l,c){let d=a.parent,u={from:s.from,to:s.to},f=0,v=d==null?void 0:d.cursor();if(v&&(n<0?v.childBefore(a.from):v.childAfter(a.to)))do if(n<0?v.to<=a.from:v.from>=a.to){if(f==0&&l.indexOf(v.type.name)>-1&&v.from<v.to){let b=findHandle(v);return{start:u,end:b?{from:b.from,to:b.to}:void 0,matched:!0}}else if(matchingNodes(v.type,n,c))f++;else if(matchingNodes(v.type,-n,c)){if(f==0){let b=findHandle(v);return{start:u,end:b&&b.from<b.to?{from:b.from,to:b.to}:void 0,matched:!1}}f--}}while(n<0?v.prevSibling():v.nextSibling());return{start:u,matched:!1}}function matchPlainBrackets(o,e,n,a,s,l,c){let d=n<0?o.sliceDoc(e-1,e):o.sliceDoc(e,e+1),u=c.indexOf(d);if(u<0||u%2==0!=n>0)return null;let f={from:n<0?e-1:e,to:n>0?e+1:e},v=o.doc.iterRange(e,n>0?o.doc.length:0),b=0;for(let k=0;!v.next().done&&k<=l;){let x=v.value;n<0&&(k+=x.length);let _=e+k*n;for(let E=n>0?0:x.length-1,B=n>0?x.length:-1;E!=B;E+=n){let M=c.indexOf(x[E]);if(!(M<0||a.resolveInner(_+E,1).type!=s))if(M%2==0==n>0)b++;else{if(b==1)return{start:f,end:{from:_+E,to:_+E+1},matched:M>>1==u>>1};b--}}n>0&&(k+=x.length)}return v.done?{start:f,matched:!1}:null}function countCol(o,e,n,a=0,s=0){e==null&&(e=o.search(/[^\s\u00a0]/),e==-1&&(e=o.length));let l=s;for(let c=a;c<e;c++)o.charCodeAt(c)==9?l+=n-l%n:l++;return l}class StringStream{constructor(e,n,a,s){this.string=e,this.tabSize=n,this.indentUnit=a,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),a;if(typeof e=="string"?a=n==e:a=n&&(e instanceof RegExp?e.test(n):e(n)),a)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:countCol(this.string,null,this.tabSize)}match(e,n,a){if(typeof e=="string"){let s=c=>a?c.toLowerCase():c,l=this.string.substr(this.pos,e.length);return s(l)==s(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&n!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function fullParser(o){return{name:o.name||"",token:o.token,blankLine:o.blankLine||(()=>{}),startState:o.startState||(()=>!0),copyState:o.copyState||defaultCopyState,indent:o.indent||(()=>null),languageData:o.languageData||{},tokenTable:o.tokenTable||noTokens}}function defaultCopyState(o){if(typeof o!="object")return o;let e={};for(let n in o){let a=o[n];e[n]=a instanceof Array?a.slice():a}return e}const IndentedFrom=new WeakMap;class StreamLanguage extends Language{constructor(e){let n=defineLanguageFacet(e.languageData),a=fullParser(e),s,l=new class extends Parser$1{createParse(c,d,u){return new Parse(s,c,d,u)}};super(n,l,[],e.name),this.topNode=docID(n,this),s=this,this.streamParser=a,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=e.tokenTable?new TokenTable(a.tokenTable):defaultTokenTable}static define(e){return new StreamLanguage(e)}getIndent(e){let n,{overrideIndentation:a}=e.options;a&&(n=IndentedFrom.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let s=findState(this,e.node.tree,e.node.from,e.node.from,n??e.pos),l,c;if(s?(c=s.state,l=s.pos+1):(c=this.streamParser.startState(e.unit),l=e.node.from),e.pos-l>1e4)return null;for(;l<e.pos;){let u=e.state.doc.lineAt(l),f=Math.min(e.pos,u.to);if(u.length){let v=a?a(u.from):-1,b=new StringStream(u.text,e.state.tabSize,e.unit,v<0?void 0:v);for(;b.pos<f-u.from;)readToken(this.streamParser.token,b,c)}else this.streamParser.blankLine(c,e.unit);if(f==e.pos)break;l=u.to+1}let d=e.lineAt(e.pos);return a&&n==null&&IndentedFrom.set(e.state,d.from),this.streamParser.indent(c,/^\s*(.*)/.exec(d.text)[1],e)}get allowsNesting(){return!1}}function findState(o,e,n,a,s){let l=n>=a&&n+e.length<=s&&e.prop(o.stateAfter);if(l)return{state:o.streamParser.copyState(l),pos:n+e.length};for(let c=e.children.length-1;c>=0;c--){let d=e.children[c],u=n+e.positions[c],f=d instanceof Tree&&u<s&&findState(o,d,u,a,s);if(f)return f}return null}function cutTree(o,e,n,a,s){if(s&&n<=0&&a>=e.length)return e;!s&&n==0&&e.type==o.topNode&&(s=!0);for(let l=e.children.length-1;l>=0;l--){let c=e.positions[l],d=e.children[l],u;if(c<a&&d instanceof Tree){if(!(u=cutTree(o,d,n-c,a-c,s)))break;return s?new Tree(e.type,e.children.slice(0,l).concat(u),e.positions.slice(0,l+1),c+u.length):u}}return null}function findStartInFragments(o,e,n,a,s){for(let l of e){let c=l.from+(l.openStart?25:0),d=l.to-(l.openEnd?25:0),u=c<=n&&d>n&&findState(o,l.tree,0-l.offset,n,d),f;if(u&&u.pos<=a&&(f=cutTree(o,l.tree,n+l.offset,u.pos+l.offset,!1)))return{state:u.state,tree:f}}return{state:o.streamParser.startState(s?getIndentUnit(s):4),tree:Tree.empty}}class Parse{constructor(e,n,a,s){this.lang=e,this.input=n,this.fragments=a,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let l=ParseContext.get(),c=s[0].from,{state:d,tree:u}=findStartInFragments(e,a,c,this.to,l==null?void 0:l.state);this.state=d,this.parsedPos=this.chunkStart=c+u.length;for(let f=0;f<u.children.length;f++)this.chunks.push(u.children[f]),this.chunkPos.push(u.positions[f]);l&&this.parsedPos<l.viewport.from-1e5&&s.some(f=>f.from<=l.viewport.from&&f.to>=l.viewport.from)&&(this.state=this.lang.streamParser.startState(getIndentUnit(l.state)),l.skipUntilInView(this.parsedPos,l.viewport.from),this.parsedPos=l.viewport.from),this.moveRangeIndex()}advance(){let e=ParseContext.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),a=Math.min(n,this.chunkStart+2048);for(e&&(a=Math.min(a,e.viewport.to));this.parsedPos<a;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let a=n.indexOf(`
`);a>-1&&(n=n.slice(0,a))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),a=e+n.length;for(let s=this.rangeIndex;;){let l=this.ranges[s].to;if(l>=a||(n=n.slice(0,l-(a-n.length)),s++,s==this.ranges.length))break;let c=this.ranges[s].from,d=this.lineAfter(c);n+=d,a=c+d.length}return{line:n,end:a}}skipGapsTo(e,n,a){for(;;){let s=this.ranges[this.rangeIndex].to,l=e+n;if(a>0?s>l:s>=l)break;let c=this.ranges[++this.rangeIndex].from;n+=c-s}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,a,s){let l=4;if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let d=this.chunk.length;s=this.skipGapsTo(a,s,-1),a+=s,l+=this.chunk.length-d}let c=this.chunk.length-4;return l==4&&c>=0&&this.chunk[c]==e&&this.chunk[c+2]==n?this.chunk[c+2]=a:this.chunk.push(e,n,a,l),s}parseLine(e){let{line:n,end:a}=this.nextLine(),s=0,{streamParser:l}=this.lang,c=new StringStream(n,e?e.state.tabSize:4,e?getIndentUnit(e.state):2);if(c.eol())l.blankLine(this.state,c.indentUnit);else for(;!c.eol();){let d=readToken(l.token,c,this.state);if(d&&(s=this.emitToken(this.lang.tokenTable.resolve(d),this.parsedPos+c.start,this.parsedPos+c.pos,s)),c.start>1e4)break}this.parsedPos=a,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Tree(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function readToken(o,e,n){e.start=e.pos;for(let a=0;a<10;a++){let s=o(e,n);if(e.pos>e.start)return s}throw new Error("Stream parser failed to advance stream.")}const noTokens=Object.create(null),typeArray=[NodeType.none],nodeSet=new NodeSet(typeArray),warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[o,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[o]=createTokenType(noTokens,e);class TokenTable{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),defaultTable)}resolve(e){return e?this.table[e]||(this.table[e]=createTokenType(this.extra,e)):0}}const defaultTokenTable=new TokenTable(noTokens);function warnForPart(o,e){warned.indexOf(o)>-1||(warned.push(o),console.warn(e))}function createTokenType(o,e){let n=[];for(let d of e.split(" ")){let u=[];for(let f of d.split(".")){let v=o[f]||tags[f];v?typeof v=="function"?u.length?u=u.map(v):warnForPart(f,`Modifier ${f} used at start of tag`):u.length?warnForPart(f,`Tag ${f} used as modifier`):u=Array.isArray(v)?v:[v]:warnForPart(f,`Unknown highlighting tag ${f}`)}for(let f of u)n.push(f)}if(!n.length)return 0;let a=e.replace(/ /g,"_"),s=a+" "+n.map(d=>d.id),l=byTag[s];if(l)return l.id;let c=byTag[s]=NodeType.define({id:typeArray.length,name:a,props:[styleTags({[a]:n})]});return typeArray.push(c),c.id}function docID(o,e){let n=NodeType.define({id:typeArray.length,name:"Document",props:[languageDataProp.add(()=>o),indentNodeProp.add(()=>a=>e.getIndent(a))],top:!0});return typeArray.push(n),n}Direction.RTL,Direction.LTR;const toggleComment=o=>{let{state:e}=o,n=e.doc.lineAt(e.selection.main.from),a=getConfig(o.state,n.from);return a.line?toggleLineComment(o):a.block?toggleBlockCommentByLine(o):!1};function command(o,e){return({state:n,dispatch:a})=>{if(n.readOnly)return!1;let s=o(e,n);return s?(a(n.update(s)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((o,e)=>changeBlockComment(o,e,selectedLineRanges(e)),0);function getConfig(o,e){let n=o.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(o,{open:e,close:n},a,s){let l=o.sliceDoc(a-SearchMargin,a),c=o.sliceDoc(s,s+SearchMargin),d=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(c)[0].length,f=l.length-d;if(l.slice(f-e.length,f)==e&&c.slice(u,u+n.length)==n)return{open:{pos:a-d,margin:d&&1},close:{pos:s+u,margin:u&&1}};let v,b;s-a<=2*SearchMargin?v=b=o.sliceDoc(a,s):(v=o.sliceDoc(a,a+SearchMargin),b=o.sliceDoc(s-SearchMargin,s));let k=/^\s*/.exec(v)[0].length,x=/\s*$/.exec(b)[0].length,_=b.length-x-n.length;return v.slice(k,k+e.length)==e&&b.slice(_,_+n.length)==n?{open:{pos:a+k+e.length,margin:/\s/.test(v.charAt(k+e.length))?1:0},close:{pos:s-x-n.length,margin:/\s/.test(b.charAt(_-1))?1:0}}:null}function selectedLineRanges(o){let e=[];for(let n of o.selection.ranges){let a=o.doc.lineAt(n.from),s=n.to<=a.to?a:o.doc.lineAt(n.to);s.from>a.from&&s.from==n.to&&(s=n.to==a.to+1?a:o.doc.lineAt(n.to-1));let l=e.length-1;l>=0&&e[l].to>a.from?e[l].to=s.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:s.to})}return e}function changeBlockComment(o,e,n=e.selection.ranges){let a=n.map(l=>getConfig(e,l.from).block);if(!a.every(l=>l))return null;let s=n.map((l,c)=>findBlockComment(e,a[c],l.from,l.to));if(o!=2&&!s.every(l=>l))return{changes:e.changes(n.map((l,c)=>s[c]?[]:[{from:l.from,insert:a[c].open+" "},{from:l.to,insert:" "+a[c].close}]))};if(o!=1&&s.some(l=>l)){let l=[];for(let c=0,d;c<s.length;c++)if(d=s[c]){let u=a[c],{open:f,close:v}=d;l.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:v.pos-v.margin,to:v.pos+u.close.length})}return{changes:l}}return null}function changeLineComment(o,e,n=e.selection.ranges){let a=[],s=-1;for(let{from:l,to:c}of n){let d=a.length,u=1e9,f=getConfig(e,l).line;if(f){for(let v=l;v<=c;){let b=e.doc.lineAt(v);if(b.from>s&&(l==c||c>b.from)){s=b.from;let k=/^\s*/.exec(b.text)[0].length,x=k==b.length,_=b.text.slice(k,k+f.length)==f?k:-1;k<b.text.length&&k<u&&(u=k),a.push({line:b,comment:_,token:f,indent:k,empty:x,single:!1})}v=b.to+1}if(u<1e9)for(let v=d;v<a.length;v++)a[v].indent<a[v].line.text.length&&(a[v].indent=u);a.length==d+1&&(a[d].single=!0)}}if(o!=2&&a.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:d,token:u,indent:f,empty:v,single:b}of a)(b||!v)&&l.push({from:d.from+f,insert:u+" "});let c=e.changes(l);return{changes:c,selection:e.selection.map(c,1)}}else if(o!=1&&a.some(l=>l.comment>=0)){let l=[];for(let{line:c,comment:d,token:u}of a)if(d>=0){let f=c.from+d,v=f+u.length;c.text[v-c.from]==" "&&v++,l.push({from:f,to:v})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(o){return combineConfig(o,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(a,s)=>e(a,s)||n(a,s)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(o,e){let n=e.state.facet(historyConfig),a=e.annotation(fromHistory);if(a){let u=HistEvent.fromTransaction(e,a.selection),f=a.side,v=f==0?o.undone:o.done;return u?v=updateBranch(v,v.length,n.minDepth,u):v=addSelection(v,e.startState.selection),new HistoryState(f==0?a.rest:v,f==0?v:a.rest)}let s=e.annotation(isolateHistory);if((s=="full"||s=="before")&&(o=o.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?o:o.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),d=e.annotation(Transaction.userEvent);return l?o=o.addChanges(l,c,d,n,e):e.selection&&(o=o.addSelection(e.startState.selection,c,d,n.newGroupDelay)),(s=="full"||s=="after")&&(o=o.isolate()),o},toJSON(o){return{done:o.done.map(e=>e.toJSON()),undone:o.undone.map(e=>e.toJSON())}},fromJSON(o){return new HistoryState(o.done.map(HistEvent.fromJSON),o.undone.map(HistEvent.fromJSON))}});function history$1(o={}){return[historyField_,historyConfig.of(o),EditorView.domEventHandlers({beforeinput(e,n){let a=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return a?(e.preventDefault(),a(n)):!1}})]}function cmd(o,e){return function({state:n,dispatch:a}){if(!e&&n.readOnly)return!1;let s=n.field(historyField_,!1);if(!s)return!1;let l=s.pop(o,n,e);return l?(a(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,a,s,l){this.changes=e,this.effects=n,this.mapped=a,this.startSelection=s,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let a=none;for(let s of e.startState.facet(invertedEffects)){let l=s(e);l.length&&(a=a.concat(l))}return!a.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),a,void 0,n||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(o,e,n,a){let s=e+1>n+20?e-n-1:0,l=o.slice(s,e);return l.push(a),l}function isAdjacent(o,e){let n=[],a=!1;return o.iterChangedRanges((s,l)=>n.push(s,l)),e.iterChangedRanges((s,l,c,d)=>{for(let u=0;u<n.length;){let f=n[u++],v=n[u++];d>=f&&c<=v&&(a=!0)}}),a}function eqSelectionShape(o,e){return o.ranges.length==e.ranges.length&&o.ranges.filter((n,a)=>n.empty!=e.ranges[a].empty).length===0}function conc(o,e){return o.length?e.length?o.concat(e):o:e}const none=[],MaxSelectionsPerEvent=200;function addSelection(o,e){if(o.length){let n=o[o.length-1],a=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return a.length&&a[a.length-1].eq(e)?o:(a.push(e),updateBranch(o,o.length-1,1e9,n.setSelAfter(a)))}else return[HistEvent.selection([e])]}function popSelection(o){let e=o[o.length-1],n=o.slice();return n[o.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(o,e){if(!o.length)return o;let n=o.length,a=none;for(;n;){let s=mapEvent(o[n-1],e,a);if(s.changes&&!s.changes.empty||s.effects.length){let l=o.slice(0,n);return l[n-1]=s,l}else e=s.mapped,n--,a=s.selectionsAfter}return a.length?[HistEvent.selection(a)]:none}function mapEvent(o,e,n){let a=conc(o.selectionsAfter.length?o.selectionsAfter.map(d=>d.map(e)):none,n);if(!o.changes)return HistEvent.selection(a);let s=o.changes.map(e),l=e.mapDesc(o.changes,!0),c=o.mapped?o.mapped.composeDesc(l):l;return new HistEvent(s,StateEffect.mapEffects(o.effects,e),c,o.startSelection.map(l),a)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,a=0,s=void 0){this.done=e,this.undone=n,this.prevTime=a,this.prevUserEvent=s}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,a,s,l){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!a||joinableUserEvent.test(a))&&(!d.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(l,isAdjacent(d.changes,e.changes))||a=="input.type.compose")?c=updateBranch(c,c.length-1,s.minDepth,new HistEvent(e.changes.compose(d.changes),conc(StateEffect.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,none)):c=updateBranch(c,c.length,s.minDepth,e),new HistoryState(c,none,n,a)}addSelection(e,n,a,s){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return l.length>0&&n-this.prevTime<s&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,a)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,a){let s=e==0?this.done:this.undone;if(s.length==0)return null;let l=s[s.length-1],c=l.selectionsAfter[0]||n.selection;if(a&&l.selectionsAfter.length)return n.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(s),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let d=s.length==1?none:s.slice(0,s.length-1);return l.mapped&&(d=addMappingToBranch(d,l.mapped)),n.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(o,e){return EditorSelection.create(o.ranges.map(e),o.mainIndex)}function setSel(o,e){return o.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:o,dispatch:e},n){let a=updateSel(o.selection,n);return a.eq(o.selection,!0)?!1:(e(setSel(o,a)),!0)}function rangeEnd(o,e){return EditorSelection.cursor(e?o.to:o.from)}function cursorByChar(o,e){return moveSel(o,n=>n.empty?o.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(o){return o.textDirectionAt(o.state.selection.main.head)==Direction.LTR}const cursorCharLeft=o=>cursorByChar(o,!ltrAtCursor(o)),cursorCharRight=o=>cursorByChar(o,ltrAtCursor(o));function cursorByGroup(o,e){return moveSel(o,n=>n.empty?o.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=o=>cursorByGroup(o,!ltrAtCursor(o)),cursorGroupRight=o=>cursorByGroup(o,ltrAtCursor(o));function interestingNode(o,e,n){if(e.type.prop(n))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(o.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(o,e,n){let a=syntaxTree(o).resolveInner(e.head),s=n?NodeProp.closedBy:NodeProp.openedBy;for(let u=e.head;;){let f=n?a.childAfter(u):a.childBefore(u);if(!f)break;interestingNode(o,f,s)?a=f:u=n?f.to:f.from}let l=a.type.prop(s),c,d;return l&&(c=n?matchBrackets(o,a.from,1):matchBrackets(o,a.to,-1))&&c.matched?d=n?c.end.to:c.end.from:d=n?a.to:a.from,EditorSelection.cursor(d,n?-1:1)}const cursorSyntaxLeft=o=>moveSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),cursorSyntaxRight=o=>moveSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function cursorByLine(o,e){return moveSel(o,n=>{if(!n.empty)return rangeEnd(n,e);let a=o.moveVertically(n,e);return a.head!=n.head?a:o.moveToLineBoundary(n,e)})}const cursorLineUp=o=>cursorByLine(o,!1),cursorLineDown=o=>cursorByLine(o,!0);function pageInfo(o){let e=o.scrollDOM.clientHeight<o.scrollDOM.scrollHeight-2,n=0,a=0,s;if(e){for(let l of o.state.facet(EditorView.scrollMargins)){let c=l(o);c!=null&&c.top&&(n=Math.max(c==null?void 0:c.top,n)),c!=null&&c.bottom&&(a=Math.max(c==null?void 0:c.bottom,a))}s=o.scrollDOM.clientHeight-n-a}else s=(o.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:a,selfScroll:e,height:Math.max(o.defaultLineHeight,s-5)}}function cursorByPage(o,e){let n=pageInfo(o),{state:a}=o,s=updateSel(a.selection,c=>c.empty?o.moveVertically(c,e,n.height):rangeEnd(c,e));if(s.eq(a.selection))return!1;let l;if(n.selfScroll){let c=o.coordsAtPos(a.selection.main.head),d=o.scrollDOM.getBoundingClientRect(),u=d.top+n.marginTop,f=d.bottom-n.marginBottom;c&&c.top>u&&c.bottom<f&&(l=EditorView.scrollIntoView(s.main.head,{y:"start",yMargin:c.top-u}))}return o.dispatch(setSel(a,s),{effects:l}),!0}const cursorPageUp=o=>cursorByPage(o,!1),cursorPageDown=o=>cursorByPage(o,!0);function moveByLineBoundary(o,e,n){let a=o.lineBlockAt(e.head),s=o.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?a.to:a.from)&&(s=o.moveToLineBoundary(e,n,!1)),!n&&s.head==a.from&&a.length){let l=/^\s*/.exec(o.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;l&&e.head!=a.from+l&&(s=EditorSelection.cursor(a.from+l))}return s}const cursorLineBoundaryForward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!0)),cursorLineBoundaryBackward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!1)),cursorLineBoundaryLeft=o=>moveSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),cursorLineBoundaryRight=o=>moveSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),cursorLineStart=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from,1)),cursorLineEnd=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to,-1));function toMatchingBracket(o,e,n){let a=!1,s=updateSel(o.selection,l=>{let c=matchBrackets(o,l.head,-1)||matchBrackets(o,l.head,1)||l.head>0&&matchBrackets(o,l.head-1,1)||l.head<o.doc.length&&matchBrackets(o,l.head+1,-1);if(!c||!c.end)return l;a=!0;let d=c.start.from==l.head?c.end.to:c.end.from;return EditorSelection.cursor(d)});return a?(e(setSel(o,s)),!0):!1}const cursorMatchingBracket=({state:o,dispatch:e})=>toMatchingBracket(o,e);function extendSel(o,e){let n=updateSel(o.state.selection,a=>{let s=e(a);return EditorSelection.range(a.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(o.state.selection)?!1:(o.dispatch(setSel(o.state,n)),!0)}function selectByChar(o,e){return extendSel(o,n=>o.moveByChar(n,e))}const selectCharLeft=o=>selectByChar(o,!ltrAtCursor(o)),selectCharRight=o=>selectByChar(o,ltrAtCursor(o));function selectByGroup(o,e){return extendSel(o,n=>o.moveByGroup(n,e))}const selectGroupLeft=o=>selectByGroup(o,!ltrAtCursor(o)),selectGroupRight=o=>selectByGroup(o,ltrAtCursor(o)),selectSyntaxLeft=o=>extendSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),selectSyntaxRight=o=>extendSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function selectByLine(o,e){return extendSel(o,n=>o.moveVertically(n,e))}const selectLineUp=o=>selectByLine(o,!1),selectLineDown=o=>selectByLine(o,!0);function selectByPage(o,e){return extendSel(o,n=>o.moveVertically(n,e,pageInfo(o).height))}const selectPageUp=o=>selectByPage(o,!1),selectPageDown=o=>selectByPage(o,!0),selectLineBoundaryForward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!0)),selectLineBoundaryBackward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!1)),selectLineBoundaryLeft=o=>extendSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),selectLineBoundaryRight=o=>extendSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),selectLineStart=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from)),selectLineEnd=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to)),cursorDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:0})),!0),cursorDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.doc.length})),!0),selectDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:0})),!0),selectDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:o.doc.length})),!0),selectAll=({state:o,dispatch:e})=>(e(o.update({selection:{anchor:0,head:o.doc.length},userEvent:"select"})),!0),selectLine=({state:o,dispatch:e})=>{let n=selectedLineBlocks(o).map(({from:a,to:s})=>EditorSelection.range(a,Math.min(s+1,o.doc.length)));return e(o.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:o,dispatch:e})=>{let n=updateSel(o.selection,a=>{let s=syntaxTree(o),l=s.resolveStack(a.from,1);if(a.empty){let c=s.resolveStack(a.from,-1);c.node.from>=l.node.from&&c.node.to<=l.node.to&&(l=c)}for(let c=l;c;c=c.next){let{node:d}=c;if((d.from<a.from&&d.to>=a.to||d.to>a.to&&d.from<=a.from)&&c.next)return EditorSelection.range(d.to,d.from)}return a});return n.eq(o.selection)?!1:(e(setSel(o,n)),!0)},simplifySelection=({state:o,dispatch:e})=>{let n=o.selection,a=null;return n.ranges.length>1?a=EditorSelection.create([n.main]):n.main.empty||(a=EditorSelection.create([EditorSelection.cursor(n.main.head)])),a?(e(setSel(o,a)),!0):!1};function deleteBy(o,e){if(o.state.readOnly)return!1;let n="delete.selection",{state:a}=o,s=a.changeByRange(l=>{let{from:c,to:d}=l;if(c==d){let u=e(l);u<c?(n="delete.backward",u=skipAtomic(o,u,!1)):u>c&&(n="delete.forward",u=skipAtomic(o,u,!0)),c=Math.min(c,u),d=Math.max(d,u)}else c=skipAtomic(o,c,!1),d=skipAtomic(o,d,!0);return c==d?{range:l}:{changes:{from:c,to:d},range:EditorSelection.cursor(c,c<l.head?-1:1)}});return s.changes.empty?!1:(o.dispatch(a.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?EditorView.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(o,e,n){if(o instanceof EditorView)for(let a of o.state.facet(EditorView.atomicRanges).map(s=>s(o)))a.between(e,e,(s,l)=>{s<e&&l>e&&(e=n?l:s)});return e}const deleteByChar=(o,e,n)=>deleteBy(o,a=>{let s=a.from,{state:l}=o,c=l.doc.lineAt(s),d,u;if(n&&!e&&s>c.from&&s<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,s-c.from))){if(d[d.length-1]=="	")return s-1;let f=countColumn(d,l.tabSize),v=f%getIndentUnit(l)||getIndentUnit(l);for(let b=0;b<v&&d[d.length-1-b]==" ";b++)s--;u=s}else u=findClusterBreak(c.text,s-c.from,e,e)+c.from,u==s&&c.number!=(e?l.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(u-c.from,s-c.from))&&(u=findClusterBreak(c.text,u-c.from,!1,!1)+c.from);return u}),deleteCharBackward=o=>deleteByChar(o,!1,!0),deleteCharForward=o=>deleteByChar(o,!0,!1),deleteByGroup=(o,e)=>deleteBy(o,n=>{let a=n.head,{state:s}=o,l=s.doc.lineAt(a),c=s.charCategorizer(a);for(let d=null;;){if(a==(e?l.to:l.from)){a==n.head&&l.number!=(e?s.doc.lines:1)&&(a+=e?1:-1);break}let u=findClusterBreak(l.text,a-l.from,e)+l.from,f=l.text.slice(Math.min(a,u)-l.from,Math.max(a,u)-l.from),v=c(f);if(d!=null&&v!=d)break;(f!=" "||a!=n.head)&&(d=v),a=u}return a}),deleteGroupBackward=o=>deleteByGroup(o,!1),deleteGroupForward=o=>deleteByGroup(o,!0),deleteToLineEnd=o=>deleteBy(o,e=>{let n=o.lineBlockAt(e.head).to;return e.head<n?n:Math.min(o.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=o=>deleteBy(o,e=>{let n=o.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),deleteLineBoundaryForward=o=>deleteBy(o,e=>{let n=o.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(o.state.doc.length,e.head+1)}),splitLine=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=o.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:Text.of(["",""])},range:EditorSelection.cursor(a.from)}));return e(o.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=o.changeByRange(a=>{if(!a.empty||a.from==0||a.from==o.doc.length)return{range:a};let s=a.from,l=o.doc.lineAt(s),c=s==l.from?s-1:findClusterBreak(l.text,s-l.from,!1)+l.from,d=s==l.to?s+1:findClusterBreak(l.text,s-l.from,!0)+l.from;return{changes:{from:c,to:d,insert:o.doc.slice(s,d).append(o.doc.slice(c,s))},range:EditorSelection.cursor(d)}});return n.changes.empty?!1:(e(o.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(o){let e=[],n=-1;for(let a of o.selection.ranges){let s=o.doc.lineAt(a.from),l=o.doc.lineAt(a.to);if(!a.empty&&a.to==l.from&&(l=o.doc.lineAt(a.to-1)),n>=s.number){let c=e[e.length-1];c.to=l.to,c.ranges.push(a)}else e.push({from:s.from,to:l.to,ranges:[a]});n=l.number+1}return e}function moveLine(o,e,n){if(o.readOnly)return!1;let a=[],s=[];for(let l of selectedLineBlocks(o)){if(n?l.to==o.doc.length:l.from==0)continue;let c=o.doc.lineAt(n?l.to+1:l.from-1),d=c.length+1;if(n){a.push({from:l.to,to:c.to},{from:l.from,insert:c.text+o.lineBreak});for(let u of l.ranges)s.push(EditorSelection.range(Math.min(o.doc.length,u.anchor+d),Math.min(o.doc.length,u.head+d)))}else{a.push({from:c.from,to:l.from},{from:l.to,insert:o.lineBreak+c.text});for(let u of l.ranges)s.push(EditorSelection.range(u.anchor-d,u.head-d))}}return a.length?(e(o.update({changes:a,scrollIntoView:!0,selection:EditorSelection.create(s,o.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:o,dispatch:e})=>moveLine(o,e,!1),moveLineDown=({state:o,dispatch:e})=>moveLine(o,e,!0);function copyLine(o,e,n){if(o.readOnly)return!1;let a=[];for(let s of selectedLineBlocks(o))n?a.push({from:s.from,insert:o.doc.slice(s.from,s.to)+o.lineBreak}):a.push({from:s.to,insert:o.lineBreak+o.doc.slice(s.from,s.to)});return e(o.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:o,dispatch:e})=>copyLine(o,e,!1),copyLineDown=({state:o,dispatch:e})=>copyLine(o,e,!0),deleteLine=o=>{if(o.state.readOnly)return!1;let{state:e}=o,n=e.changes(selectedLineBlocks(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),a=updateSel(e.selection,s=>{let l;if(o.lineWrapping){let c=o.lineBlockAt(s.head),d=o.coordsAtPos(s.head,s.assoc||1);d&&(l=c.bottom+o.documentTop-d.bottom+o.defaultLineHeight/2)}return o.moveVertically(s,!0,l)}).map(n);return o.dispatch({changes:n,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(o,e){if(/\(\)|\[\]|\{\}/.test(o.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(o).resolveInner(e),a=n.childBefore(e),s=n.childAfter(e),l;return a&&s&&a.to<=e&&s.from>=e&&(l=a.type.prop(NodeProp.closedBy))&&l.indexOf(s.name)>-1&&o.doc.lineAt(a.to).from==o.doc.lineAt(s.from).from&&!/\S/.test(o.sliceDoc(a.to,s.from))?{from:a.to,to:s.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(o){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let a=e.changeByRange(s=>{let{from:l,to:c}=s,d=e.doc.lineAt(l),u=!o&&l==c&&isBetweenBrackets(e,l);o&&(l=c=(c<=d.to?d:e.doc.lineAt(c)).to);let f=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!u}),v=getIndentation(f,l);for(v==null&&(v=countColumn(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;u?{from:l,to:c}=u:l>d.from&&l<d.from+100&&!/\S/.test(d.text.slice(0,l))&&(l=d.from);let b=["",indentString(e,v)];return u&&b.push(indentString(e,f.lineIndent(d.from,-1))),{changes:{from:l,to:c,insert:Text.of(b)},range:EditorSelection.cursor(l+1+b[1].length)}});return n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(o,e){let n=-1;return o.changeByRange(a=>{let s=[];for(let c=a.from;c<=a.to;){let d=o.doc.lineAt(c);d.number>n&&(a.empty||a.to>d.from)&&(e(d,s,a),n=d.number),c=d.to+1}let l=o.changes(s);return{changes:s,range:EditorSelection.range(l.mapPos(a.anchor,1),l.mapPos(a.head,1))}})}const indentSelection=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let n=Object.create(null),a=new IndentContext(o,{overrideIndentation:l=>n[l]??-1}),s=changeBySelectedLine(o,(l,c,d)=>{let u=getIndentation(a,l.from);if(u==null)return;/\S/.test(l.text)||(u=0);let f=/^\s*/.exec(l.text)[0],v=indentString(o,u);(f!=v||d.from<l.from+f.length)&&(n[l.from]=u,c.push({from:l.from,to:l.from+f.length,insert:v}))});return s.changes.empty||e(o.update(s,{userEvent:"indent"})),!0},indentMore=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(n,a)=>{a.push({from:n.from,insert:o.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(n,a)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let l=countColumn(s,o.tabSize),c=0,d=indentString(o,Math.max(0,l-getIndentUnit(o)));for(;c<s.length&&c<d.length&&s.charCodeAt(c)==d.charCodeAt(c);)c++;a.push({from:n.from+c,to:n.from+s.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=o=>(o.setTabFocusMode(),!0),insertTab=({state:o,dispatch:e})=>o.selection.ranges.some(n=>!n.empty)?indentMore({state:o,dispatch:e}):(e(o.update(o.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(o=>({mac:o.key,run:o.run,shift:o.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),SettingsContext=createContext(()=>{const o=shallowRef({}),e=shallowRef({}),n=d=>{if(o.value[d.key]){console.warn(`Setting group with key ${d.key} already exists, ignored.`);return}o.value[d.key]=d},a=d=>{if(!o.value[d]){console.warn(`Setting group with key ${d} not found, ignored.`);return}delete o.value[d]},s=d=>{if(e.value[d.id]){console.warn(`Setting item with id ${d.id} already exists, ignored.`);return}if(!o.value[d.groupKey]){console.warn(`Setting group with key ${d.groupKey} not found, ignored.`);return}e.value[d.id]=d},l=d=>{if(!e.value[d]){console.warn(`Setting item with id ${d} not found, ignored.`);return}delete e.value[d]},c=d=>Object.values(e.value).filter(u=>u.groupKey===d);return{settingItems:readonly(e),settingGroups:readonly(o),registerSettingGroup:n,unregisterSettingGroup:a,registerSettingItem:s,unregisterSettingItem:l,getAllSettingItemsInGroup:c}}),SidebarContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),{getBlockTree:n}=BlockTreeContext.useContext(),a={sidePaneOpen:"sidePaneOpen",sidePaneDir:"sidePaneDir",sidePaneWidth:"sidePaneWidth",sidePaneHeight:"sidePaneHeight",sidePaneBlockIds:"sidePaneBlockIds"},s={sidePaneOpen:computed(()=>`${e.value}${a.sidePaneOpen}`),sidePaneDir:computed(()=>`${e.value}${a.sidePaneDir}`),sidePaneWidth:computed(()=>`${e.value}${a.sidePaneWidth}`),sidePaneHeight:computed(()=>`${e.value}${a.sidePaneHeight}`),sidePaneBlockIds:computed(()=>`${e.value}${a.sidePaneBlockIds}`)},l=useLocalStorage2(s.sidePaneOpen,!1),c=useLocalStorage2(s.sidePaneDir,"right"),d=useLocalStorage2(s.sidePaneWidth,500),u=useLocalStorage2(s.sidePaneHeight,300),f=ref(!0),v=useLocalStorage2(s.sidePaneBlockIds,[]),b=computed(()=>v.value.map(k=>o.getBlock(k)).filter(k=>!!k));return{sidePaneOpen:l,sidePaneDir:c,sidePaneWidth:d,sidePaneHeight:u,enableSidePaneAnimation:f,sidePaneBlockIds:v,sidePaneBlocks:b,addToSidePane:k=>{if(l.value||(l.value=!0),!v.value.includes(k))v.value=[...v.value,k],setTimeout(()=>{const x=n("side-pane");if(!x)return;const _=x.findDi(E=>E.type==="side-pane-header"&&E.blockId===k);_&&x.focusDi(_[0].itemId,{highlight:!0,scrollIntoView:!0})});else{const x=n("side-pane");if(!x)return;const _=x.findDi(E=>E.type==="side-pane-header"&&E.blockId===k);if(!_)return;x.focusDi(_[0].itemId,{highlight:!0,scrollIntoView:!0})}},focusNext:k=>{const x=n("side-pane");if(!x)return;const _=v.value.indexOf(k);if(_===-1)return;const E=_===v.value.length-1?0:_+1,B=v.value[E],M=x.findDi(I=>I.type==="basic-block"&&I.block.id===B);M&&x.focusDi(M[0].itemId,{highlight:!0,scrollIntoView:!0})},focusPrev:k=>{const x=n("side-pane");if(!x)return;const _=v.value.indexOf(k);if(_===-1)return;const E=_===0?v.value.length-1:_-1,B=v.value[E],M=x.findDi(I=>I.type==="basic-block"&&I.block.id===B);M&&x.focusDi(M[0].itemId,{highlight:!0,scrollIntoView:!0})}}}),BlockSelectDragContext=createContext(()=>{const o=ref(null),e=ref(null),n=ref(!1);return{selectedBlockIds:o,draggingDropPos:e,dragging:n}}),CommandsContext=createContext(()=>{const{selectedBlockIds:o}=BlockSelectDragContext.useContext(),{blockEditor:e,blocksManager:n}=BlocksContext.useContext(),{lastFocusedBlockTree:a,lastFocusedDiId:s}=LastFocusContext.useContext(),{openFusionCommand:l}=FusionCommandContext.useContext(),{addToSidePane:c}=SidebarContext.useContext();return{swapUpSelected:()=>o.value&&o.value.topLevelOnly.length>0?(useTaskQueue().addTask(async()=>{const d={baseBlockId:o.value.topLevelOnly[0],offset:-1};e.moveBlocks({blockIds:o.value.topLevelOnly,pos:d})}),!0):!1,swapDownSelected:()=>o.value&&o.value.topLevelOnly.length>0?(useTaskQueue().addTask(async()=>{const d=o.value.topLevelOnly,u={baseBlockId:d[d.length-1],offset:2};e.moveBlocks({blockIds:d,pos:u})}),!0):!1,swapUpFocusedBlock:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);return!f||!DI_FILTERS.isBlockDi(f)?!1:(useTaskQueue().addTask(async()=>{const v={baseBlockId:f.block.id,offset:-1};e.moveBlock({blockId:f.block.id,pos:v}),await d.nextUpdate(),await d.focusDi(u)}),!0)},swapDownFocusedBlock:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);return!f||!DI_FILTERS.isBlockDi(f)?!1:(useTaskQueue().addTask(async()=>{const v={baseBlockId:f.block.id,offset:2};e.moveBlock({blockId:f.block.id,pos:v}),await d.nextUpdate(),await d.focusDi(u)}),!0)},splitBlockBelow:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getEditorView(u),v=d.getDi(u);return!(f instanceof EditorView$1)||!v||v.type==="backlink-block"||v.type==="potential-links-block"||!("block"in v)?!1:(useTaskQueue().addTask(async()=>{const b=f.state.selection,k=f.state.doc.cut(b.anchor),x=f.state.doc.cut(0,b.anchor),_=n.createBlockTransaction({type:"ui"});e.changeBlockContent({blockId:v.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,x.toJSON()],tr:_,commit:!1});const E={baseBlockId:v.block.id,offset:1},{newNormalBlockId:B}=e.insertNormalBlock({pos:E,content:[BLOCK_CONTENT_TYPES.TEXT,k.toJSON()],tr:_,commit:!1})??{};document.activeElement.blur(),_.commit(),await d.nextUpdate();const M=d.getDiBelow(v.itemId,I=>DI_FILTERS.isBlockDi(I)&&I.block.id===B);M&&(await d.focusDi(M[0].itemId),d.moveCursorToBegin(M[0].itemId))}),!0)},splitBlockAbove:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getEditorView(u),v=d.getDi(u);return!(f instanceof EditorView$1)||!v||v.type==="backlink-block"||v.type==="potential-links-block"||v.type==="root-block"||!("block"in v)?!1:(useTaskQueue().addTask(async()=>{const b=f.state.selection,k=f.state.doc.cut(0,b.anchor),x=f.state.doc.cut(b.anchor),_=n.createBlockTransaction({type:"ui"});e.changeBlockContent({blockId:v.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,x.toJSON()],tr:_,commit:!1});const E={baseBlockId:v.block.id,offset:0};e.insertNormalBlock({pos:E,content:[BLOCK_CONTENT_TYPES.TEXT,k.toJSON()],tr:_,commit:!1}),document.activeElement.blur(),_.commit(),await d.nextUpdate(),await d.focusDi(v.itemId),d.moveCursorToBegin(v.itemId)}),!0)},promoteSelected:()=>o.value&&o.value.topLevelOnly.length>0?(useTaskQueue().addTask(async()=>{const d=n.createBlockTransaction({type:"ui"});for(const u of o.value.topLevelOnly)if(!e.promoteBlock({blockId:u,tr:d,commit:!1}).success)return;d.commit()}),!0):!1,addFocusedToSidePane:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);return!f||!DI_FILTERS.isBlockDi(f)?!1:(c(f.block.id),!0)},openFusionCommandWithCurrentSelection:()=>{const d=a.value,u=s.value;return useTaskQueue().addTask(async()=>{if(d&&u){const f=d.getEditorView(u);if(f instanceof EditorView$1){const v=f.state.selection.content(),b=v.content.textBetween(0,v.content.size);l(b);return}}l("")}),!0},demoteSelected:()=>o.value&&o.value.topLevelOnly.length>0?(useTaskQueue().addTask(async()=>{const d=n.createBlockTransaction({type:"ui"});for(let u=o.value.topLevelOnly.length-1;u>=0;u--){const f=o.value.topLevelOnly[u];if(!e.demoteBlock({blockId:f,tr:d,commit:!1}).success)return}d.commit()}),!0):!1,deleteSelected:()=>o.value&&o.value.topLevelOnly.length>0?(useTaskQueue().addTask(async()=>{const d=n.createBlockTransaction({type:"ui"});for(const u of o.value.topLevelOnly)e.deleteBlock({blockId:u,tr:d,commit:!1});d.commit()}),!0):!1,deleteFocusedBlock:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);if(!f||!DI_FILTERS.isBlockDi(f))return!1;const v=d.getDiAbove(u,DI_FILTERS.isBlockDi);return useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:f.block.id}),await d.nextUpdate(),v&&DI_FILTERS.isBlockDi(v[0])&&(await d.focusDi(v[0].itemId),d.moveCursorToTheEnd(v[0].itemId))}),!0},createEmptyTextBlockUnder:(d="last-space",u)=>()=>{const f=a.value,v=s.value;if(!f||!v)return!1;const b=f.getDi(v);return!b||!DI_FILTERS.isBlockDi(b)?!1:(useTaskQueue().addTask(async()=>{const k={parentId:b.block.id,childIndex:d},x=getPmSchema({getBlockRef:n.getBlockRef}),{newNormalBlockId:_}=e.insertNormalBlock({pos:k,content:u??plainTextToTextContent("",x)})??{};await f.nextUpdate();const E=f.getDiBelow(b.itemId,B=>DI_FILTERS.isBlockDi(B)&&B.block.id===_);E&&await f.focusDi(E[0].itemId)}),!0)},createEmptyTextBlockBelow:d=>()=>{const u=a.value,f=s.value;if(!u||!f)return!1;const v=u.getDi(f);return!v||v.type==="backlink-block"||v.type==="potential-links-block"||v.type==="root-block"||!("block"in v)?!1:(useTaskQueue().addTask(async()=>{const b={baseBlockId:v.block.id,offset:1},k=getPmSchema({getBlockRef:n.getBlockRef}),{newNormalBlockId:x}=e.insertNormalBlock({pos:b,content:d??plainTextToTextContent("",k)})??{};await u.nextUpdate();const _=u.getDiBelow(v.itemId,E=>DI_FILTERS.isBlockDi(E)&&E.block.id===x);_&&await u.focusDi(_[0].itemId)}),!0)},createEmptyTextBlockAbove:d=>()=>{const u=a.value,f=s.value;if(!u||!f)return!1;const v=u.getDi(f);return!v||v.type==="backlink-block"||v.type==="potential-links-block"||v.type==="root-block"||!("block"in v)?!1:(useTaskQueue().addTask(async()=>{const b={baseBlockId:v.block.id,offset:0},k=getPmSchema({getBlockRef:n.getBlockRef}),{newNormalBlockId:x}=e.insertNormalBlock({pos:b,content:d??plainTextToTextContent("",k)})??{};await u.nextUpdate();const _=u.getDiBelow(v.itemId,E=>DI_FILTERS.isBlockDi(E)&&E.block.id===x);_&&await u.focusDi(_[0].itemId)}),!0)},mergeAboveIntoCurrent:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getEditorView(u),v=d.getDi(u);if(!(f instanceof EditorView$1)||!v||v.type!=="basic-block")return!1;const b=AllSelection.atStart(f.state.doc);if(!f.state.selection.eq(b))return!1;const k=v.block,x=d.getDiAbove(u,DI_FILTERS.isBlockDi);if(!x||x[0].type!=="basic-block")return!1;const _=x[0].block;return _.childrenIds.length>0||_.parentId!==v.block.parentId||k.content[0]!==BLOCK_CONTENT_TYPES.TEXT||_.content[0]!==BLOCK_CONTENT_TYPES.TEXT?!1:(useTaskQueue().addTask(async()=>{const E=getPmSchema({getBlockRef:n.getBlockRef}),B=Node$1.fromJSON(E,_.content[1]),M=f.state.doc,I=B.content.append(M.content),F=E.nodes.doc.create(null,I),V=n.createBlockTransaction({type:"ui"});e.changeBlockContent({blockId:v.block.id,content:[BLOCK_CONTENT_TYPES.TEXT,F.toJSON()],tr:V,commit:!1}),e.deleteBlock({blockId:_.id,tr:V,commit:!1}),document.activeElement.blur(),V.commit(),await d.nextUpdate(),await d.focusDi(v.itemId);{const L=d.getEditorView(v.itemId);if(L instanceof EditorView$1){const U=TextSelection.create(L.state.doc,B.content.size),j=L.state.tr.setSelection(U);L.dispatch(j),L.focus()}}}),!0)},mergeCurrentIntoBelow:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getEditorView(u),v=d.getDi(u);if(!(f instanceof EditorView$1)||!v||v.type!=="basic-block")return!1;const b=AllSelection.atEnd(f.state.doc);if(!f.state.selection.eq(b))return!1;const k=v.block;if(k.childrenIds.length>0)return!1;const x=d.getDiBelow(u,DI_FILTERS.isBlockDi);if(!x||x[0].type!=="basic-block")return!1;const _=x[0].block;return _.parentId!==k.parentId||k.content[0]!==BLOCK_CONTENT_TYPES.TEXT||_.content[0]!==BLOCK_CONTENT_TYPES.TEXT?!1:(useTaskQueue().addTask(async()=>{const E=getPmSchema({getBlockRef:n.getBlockRef}),B=Node$1.fromJSON(E,_.content[1]),M=f.state.doc,I=M.content.append(B.content),F=E.nodes.doc.create(null,I),V=n.createBlockTransaction({type:"ui"});e.changeBlockContent({blockId:_.id,content:[BLOCK_CONTENT_TYPES.TEXT,F.toJSON()],tr:V,commit:!1}),e.deleteBlock({blockId:k.id,tr:V,commit:!1}),V.commit(),await d.nextUpdate(),await d.focusDi(x[0].itemId);{const L=d.getEditorView(x[0].itemId);if(L instanceof EditorView$1){const U=TextSelection.create(L.state.doc,M.content.size),j=L.state.tr.setSelection(U);L.dispatch(j),L.focus()}}}),!0)},deleteEmptyBlockBelow:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDiBelow(u,DI_FILTERS.isBlockDi);if(!f||!DI_FILTERS.isBlockDi(f[0]))return!1;const v=f[0].block;if(v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const b=getPmSchema({getBlockRef:n.getBlockRef});if(Node$1.fromJSON(b,v.content[1]).content.size==0)return useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:v.id})}),!0}return v.content[0]===BLOCK_CONTENT_TYPES.CODE&&v.content[1].length==0?(useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:v.id})}),!0):!1},deleteEmptyBlockAbove:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDiAbove(u,DI_FILTERS.isBlockDi);if(!f||!DI_FILTERS.isBlockDi(f[0]))return!1;const v=f[0].block;if(v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const b=getPmSchema({getBlockRef:n.getBlockRef});if(Node$1.fromJSON(b,v.content[1]).content.size==0)return useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:v.id})}),!0}return v.content[0]===BLOCK_CONTENT_TYPES.CODE&&v.content[1].length==0?(useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:v.id})}),!0):!1},promoteFocusedBlock:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);return!f||!DI_FILTERS.isBlockDi(f)?!1:(useTaskQueue().addTask(()=>{e.promoteBlock({blockId:f.block.id})}),!0)},demoteFocusedBlock:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getDi(u);if(!f||!DI_FILTERS.isBlockDi(f)||f.block.parentId=="root")return!1;useTaskQueue().addTask(()=>{e.demoteBlock({blockId:f.block.id})})},deleteFocusedBlockIfEmpty:()=>{const d=a.value,u=s.value;if(!d||!u)return!1;const f=d.getEditorView(u),v=d.getDi(u);if(!f||!v||!DI_FILTERS.isBlockDi(v))return!1;let b=!1;if(f instanceof EditorView$1?b=f.state.doc.content.size===0:f instanceof EditorView&&(b=f.state.doc.length===0),!b)return!1;const k=d.getDiAbove(u,DI_FILTERS.isBlockDi);return useTaskQueue().addTask(async()=>{e.deleteBlock({blockId:v.block.id}),await d.nextUpdate(),k&&DI_FILTERS.isBlockDi(k[0])&&(await d.focusDi(k[0].itemId),d.moveCursorToTheEnd(k[0].itemId))}),!0},foldFocusedBlock:()=>{const d=s.value,u=a.value;if(!d||!u)return!1;const f=u.getDi(d);return f&&f.type==="basic-block"&&!f.block.fold?(useTaskQueue().addTask(()=>{e.toggleFold(f.block.id,!0)}),!0):!1},expandFocusedBlock:()=>{const d=s.value,u=a.value;if(!d||!u)return!1;const f=u.getDi(d);return f&&f.type==="basic-block"&&f.block.fold?(useTaskQueue().addTask(()=>{e.toggleFold(f.block.id,!1)}),!0):!1},toggleFoldOfFocusedBlock:()=>{throw new Error("Not implemented")},addBlockAboveToSelection:()=>{if(!o.value){const _=a.value,E=s.value;if(!_||!E)return!1;const B=_.getEditorView(E),M=_.getDi(E);if(!(B instanceof EditorView$1)||!M||!DI_FILTERS.isBlockDi(M)||B.state.selection.from!==0)return!1;{const I={baseBlockId:M.block.id,topLevelOnly:[M.block.id],allNonFolded:[]};return n.forDescendants({rootBlockId:M.block.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:F=>{I.allNonFolded.push(F.id)}}),o.value=I,!0}}const d=o.value.topLevelOnly,u=n.getBlock(d[0]);if(!u)return!1;const f=n.getBlock(u.parentId);if(!f)return!1;const v=f.childrenIds.indexOf(u.id),b=f.childrenIds.indexOf(d[d.length-1]),k=f.childrenIds.indexOf(o.value.baseBlockId);let x={baseBlockId:o.value.baseBlockId,topLevelOnly:[],allNonFolded:[]};if(b>k)x.topLevelOnly=[...d.slice(0,-1)];else if(v===0)x.baseBlockId=f.id,x.topLevelOnly=[f.id];else{const _=f.childrenIds[v-1];x.topLevelOnly=[_,...d]}for(const _ of x.topLevelOnly)n.forDescendants({rootBlockId:_,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:E=>{x.allNonFolded.push(E.id)}});return o.value=x,!0},addBlockBelowToSelection:()=>{if(!o.value){const _=a.value,E=s.value;if(!_||!E)return!1;const B=_.getEditorView(E),M=_.getDi(E);if(!(B instanceof EditorView$1)||!M||!DI_FILTERS.isBlockDi(M)||B.state.selection.to!==B.state.doc.content.size)return!1;{const I={baseBlockId:M.block.id,topLevelOnly:[M.block.id],allNonFolded:[]};return n.forDescendants({rootBlockId:M.block.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:F=>{I.allNonFolded.push(F.id)}}),o.value=I,!0}}const d=o.value.topLevelOnly,u=n.getBlock(d[d.length-1]);if(!u)return!1;const f=n.getBlock(u.parentId);if(!f)return!1;const v=f.childrenIds.indexOf(d[0]),b=f.childrenIds.indexOf(u.id),k=f.childrenIds.indexOf(o.value.baseBlockId);let x={baseBlockId:o.value.baseBlockId,topLevelOnly:[],allNonFolded:[]};if(v<k)x.topLevelOnly=[...d.slice(1)];else if(b===f.childrenIds.length-1)x.baseBlockId=f.id,x.topLevelOnly=[f.id];else{const _=f.childrenIds[b+1];x.topLevelOnly=[...d,_]}for(const _ of x.topLevelOnly)n.forDescendants({rootBlockId:_,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:E=>{x.allNonFolded.push(E.id)}});return o.value=x,!0},blurAndSelectCurrentBlock:()=>{const d=s.value,u=a.value;if(!d||!u)return!1;const f=u.getDi(d),v=u.getEditorView(d);if(!f||!DI_FILTERS.isBlockDi(f))return!1;let b=!1;if(v instanceof EditorView$1&&v.state.selection.empty&&(b=!0,v.dom.blur()),v instanceof EditorView){const k=v.state.selection;k.ranges.length===1&&k.ranges[0].empty&&(b=!0,v.contentDOM.blur())}if(b){const k={baseBlockId:f.block.id,topLevelOnly:[f.block.id],allNonFolded:[]};return n.forDescendants({rootBlockId:f.block.id,nonFoldOnly:!0,includeSelf:!0,onEachBlock:x=>{k.allNonFolded.push(x.id)}}),o.value=k,!0}return!1}}}),mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName(o){let e=o.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let a,s,l,c;for(let d=0;d<e.length-1;d++){const u=e[d];if(/^(cmd|meta|m)$/i.test(u))c=!0;else if(/^a(lt)?$/i.test(u))a=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))mac?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return a&&(n="Alt-"+n),s&&(n="Ctrl-"+n),c&&(n="Meta-"+n),l&&(n="Shift-"+n),n}function normalize(o){const e=Object.create(null);for(const n in o)e[normalizeKeyName(n)]=o[n];return e}function modifiers(o,e,n=!0){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),n&&e.shiftKey&&(o="Shift-"+o),o}function generateKeydownHandler(o,e,n){const a=normalize(o);return function(...s){const l=e(...s),c=n(...s);let d;const u=keyName(c),f=a[modifiers(u,c)];if(f&&f.run(...l))return f.stopPropagation&&c.stopPropagation(),f.preventDefault&&c.preventDefault(),!0;if(u.length==1&&u!=" "){if(c.shiftKey){const b=a[modifiers(u,c,!1)];if(b&&b.run(...l))return b.stopPropagation&&c.stopPropagation(),b.preventDefault&&c.preventDefault(),!0}if((c.shiftKey||c.altKey||c.metaKey||u.charCodeAt(0)>127)&&(d=base[c.keyCode])&&d!=u){const b=a[modifiers(d,c)];if(b&&b.run(...l))return b.stopPropagation&&c.stopPropagation(),b.preventDefault&&c.preventDefault(),!0}}const v=o["*"];return v&&v.run(...l)?(v.stopPropagation&&c.stopPropagation(),v.preventDefault&&c.preventDefault(),!0):!1}}function generateKeydownHandlerSimple(o){return generateKeydownHandler(o,e=>[e],e=>e)}const KeymapContext=createContext(()=>{const o=useTaskQueue(),e=ref(!1),{lastFocusedBlockTree:n,lastFocusedDiId:a}=LastFocusContext.useContext(),{blockEditor:s,blocksManager:l}=BlocksContext.useContext();SettingsContext.useContext(),FusionCommandContext.useContext(),SidebarContext.useContext(),BlockSelectDragContext.useContext();const c=CommandsContext.useContext(),d=ref(!1),u=ref(!1),f=K=>{const W=getPlatform();W==="macos"&&K.metaKey&&(d.value=!0),W!=="macos"&&K.ctrlKey&&(d.value=!0),K.shiftKey&&(u.value=!0)},v=K=>{const W=getPlatform();W==="macos"&&!K.metaKey&&(d.value=!1),W!=="macos"&&!K.ctrlKey&&(d.value=!1),K.shiftKey||(u.value=!1)};onMounted(()=>{window.addEventListener("keydown",f),window.addEventListener("keyup",v)}),onUnmounted(()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",v)});const b=ref({"Mod-z":{run:()=>(l.undo(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Shift-z":{run:()=>(l.redo(),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:K=>{const W=K.selection,G=AllSelection.atEnd(K.doc);if(W.eq(G)){if(c.createEmptyTextBlockBelow()()||c.createEmptyTextBlockUnder(0)())return!0}else if(W.head==0){if(c.createEmptyTextBlockAbove()())return!0}else if(c.splitBlockAbove())return!0;return!1},stopPropagation:!0,preventDefault:!0},"Shift-Enter":{run:(K,W)=>{const G=K.schema.nodes.hardBreak.create(),ce=K.tr.replaceSelectionWith(G);return W(ce),!0},stopPropagation:!0},Backspace:{run:(K,W)=>(deleteUfeffBeforeCursor(K,W),!!(c.deleteSelected()||c.deleteFocusedBlockIfEmpty()||c.deleteEmptyBlockAbove()||c.mergeAboveIntoCurrent())),preventDefault:!0,stopPropagation:!0},Delete:{run:(K,W)=>(deleteUfeffAfterCursor(K,W),!!(c.deleteSelected()||c.deleteFocusedBlockIfEmpty()||c.deleteEmptyBlockBelow()||c.mergeCurrentIntoBelow())),preventDefault:!0,stopPropagation:!0},"Mod-ArrowUp":{run:c.foldFocusedBlock,preventDefault:!0,stopPropagation:!0},"Mod-ArrowDown":{run:c.expandFocusedBlock,preventDefault:!0,stopPropagation:!0},"Alt-ArrowUp":{run:()=>!!(c.swapUpSelected()||c.swapUpFocusedBlock()),preventDefault:!0,stopPropagation:!0},"Alt-ArrowDown":{run:()=>!!(c.swapDownSelected()||c.swapDownFocusedBlock()),preventDefault:!0,stopPropagation:!0},Tab:{run:()=>(o.addTask(()=>{c.promoteSelected()||c.promoteFocusedBlock()}),!0),preventDefault:!0,stopPropagation:!0},"Shift-Tab":{run:()=>(o.addTask(()=>{c.demoteSelected()||c.demoteFocusedBlock()}),!0),preventDefault:!0,stopPropagation:!0},"Shift-ArrowUp":{run:()=>!!c.addBlockAboveToSelection(),preventDefault:!0,stopPropagation:!0},"Shift-ArrowDown":{run:()=>!!c.addBlockBelowToSelection(),preventDefault:!0,stopPropagation:!0},ArrowUp:{run:()=>{const K=n.value,W=a.value;if(!K||!W)return!1;const G=K.getEditorView(W),ce=K.getDi(W);if(!(G instanceof EditorView$1)||!ce||!DI_FILTERS.isBlockDi(ce))return!1;if(K&&G.endOfTextblock("up")){const se=G.state.selection.anchor,me=G.coordsAtPos(se),ge=K.getDiAbove(W,DI_FILTERS.isBlockDi);return ge?(K.focusDi(ge[0].itemId).then(()=>{var Ve;const Te=K.getEditorView(ge[0].itemId);if(!(Te instanceof EditorView$1))return!1;const Be=((Ve=Te.posAtCoords({left:me.left,top:me.top-10}))==null?void 0:Ve.pos)??se,Ge=Te.state.doc.content.size,We=TextSelection.create(Te.state.doc,Math.min(Be,Ge)),Oe=Te.state.tr.setSelection(We);Te.dispatch(Oe)}),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},ArrowDown:{run:()=>{const K=n.value,W=a.value;if(!K||!W)return!1;const G=K.getEditorView(W),ce=K.getDi(W);if(!(G instanceof EditorView$1)||!ce||!DI_FILTERS.isBlockDi(ce))return!1;if(K&&G.endOfTextblock("down")){const se=G.state.selection.anchor,me=G.coordsAtPos(se),ge=K.getDiBelow(W,DI_FILTERS.isBlockDi);return ge?(K.focusDi(ge[0].itemId).then(()=>{var Ve;const Te=K.getEditorView(ge[0].itemId);if(!(Te instanceof EditorView$1))return!1;const Be=((Ve=Te.posAtCoords({left:me.left,top:me.top+30}))==null?void 0:Ve.pos)??se,Ge=Te.state.doc.content.size,We=TextSelection.create(Te.state.doc,Math.min(Be,Ge)),Oe=Te.state.tr.setSelection(We);Te.dispatch(Oe)}),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},"Alt-m":{run:(K,W,G)=>{if(W==null)return!1;const ce=G.state.schema.nodes.mathInline.create({src:""}),se=K.tr.replaceSelectionWith(ce),me=se.doc.resolve(se.selection.anchor-se.selection.$anchor.nodeBefore.nodeSize);return se.setSelection(new NodeSelection(me)),W(se),!0},preventDefault:!0,stopPropagation:!0},"Alt-Shift-m":{run:(K,W,G)=>{const ce=a.value,se=n.value;if(!ce||!se)return!1;const me=se.getDi(ce);return!me||!DI_FILTERS.isBlockDi(me)?!1:(K.doc.content.size==0?o.addTask(async()=>{s.changeBlockContent({blockId:me.block.id,content:[BLOCK_CONTENT_TYPES.MATH,""]}),await se.nextUpdate(),await se.focusDi(ce,{scrollIntoView:!0})}):o.addTask(async()=>{const ge=s.normalizePos({baseBlockId:me.block.id,offset:1});if(ge==null)return;s.insertNormalBlock({pos:ge,content:[BLOCK_CONTENT_TYPES.MATH,""]});const Te=se.getDiBelow(ce,DI_FILTERS.isBlockDi);Te&&(await se.nextUpdate(),await se.focusDi(Te[0].itemId,{scrollIntoView:!0}))}),!0)},preventDefault:!0,stopPropagation:!0},ArrowLeft:{run:(K,W,G)=>{skipOneUfeffBeforeCursor(K,W);const ce=a.value,se=n.value;if(!ce||!se)return!1;const me=se.getDi(ce);if(!me||!DI_FILTERS.isBlockDi(me))return!1;const ge=K.selection.empty&&K.selection.anchor==0;if(se&&ge){const Te=se.getPredecessorDi(ce);return Te?(se.focusDi(Te[0].itemId).then(()=>{se.moveCursorToTheEnd(Te[0].itemId)}),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},ArrowRight:{run:(K,W,G)=>{skipOneUfeffAfterCursor(K,W);const ce=a.value,se=n.value;if(!ce||!se)return!1;const me=se.getDi(ce);if(!me||!DI_FILTERS.isBlockDi(me))return!1;const ge=K.selection.empty&&K.selection.anchor==K.doc.content.size;if(se&&ge){const Te=se.getSuccessorDi(ce);return Te?(se.focusDi(Te[0].itemId).then(()=>{se.moveCursorToTheEnd(Te[0].itemId)}),!0):!1}return!1},preventDefault:!0,stopPropagation:!0},"Mod-b":{run:(K,W,G)=>{const ce=G.state.schema;return toggleMark(ce.marks.bold)(K,W,G)},preventDefault:!0,stopPropagation:!0},"Mod-i":{run:(K,W,G)=>{const ce=G.state.schema;return toggleMark(ce.marks.italic)(K,W,G)},preventDefault:!0,stopPropagation:!0},"Mod-`":{run:(K,W,G)=>{const ce=G.state.schema;return toggleMark(ce.marks.code)(K,W,G)},preventDefault:!0,stopPropagation:!0},"Mod-=":{run:(K,W,G)=>{const ce=G.state.schema;toggleMark(ce.marks.highlight,{bg:"bg4"})(K,W,G);const se=G.state.selection,me=TextSelection.near(se.$to);return W(G.state.tr.setSelection(me)),!0},preventDefault:!0,stopPropagation:!0},Escape:{run:c.blurAndSelectCurrentBlock,preventDefault:!0,stopPropagation:!0}}),k=ref({ArrowLeft:{key:"ArrowLeft",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;const se=ce.state.selection;if(se.ranges.length==1){const me=se.ranges[0];if(me.from==me.to&&me.from==0){const ge=W.getPredecessorDi(K);return ge?(W.focusDi(ge[0].itemId).then(()=>{W.moveCursorToTheEnd(ge[0].itemId)}),!0):!1}}return cursorCharLeft(ce)},stopPropagation:!0},ArrowRight:{key:"ArrowRight",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;const se=ce.state.selection,me=ce.state.doc.length;if(se.ranges.length==1){const ge=se.ranges[0];if(ge.from==ge.to&&ge.from==me){const Te=W.getSuccessorDi(K);return Te?(W.focusDi(Te[0].itemId).then(()=>{W.moveCursorToTheEnd(Te[0].itemId)}),!0):!1}}return cursorCharRight(ce)},stopPropagation:!0},ArrowUp:{key:"ArrowUp",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;const se=ce.state.selection;if(se.ranges.length==1){const me=se.ranges[0];if(me.from==me.to&&ce.state.doc.lineAt(me.from).number==1){const ge=W.getDiAbove(K);return ge?(W.focusDi(ge[0].itemId).then(()=>{W.moveCursorToTheEnd(ge[0].itemId)}),!0):!1}}return cursorLineUp(ce)},stopPropagation:!0},ArrowDown:{key:"ArrowDown",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;const se=ce.state.doc.lines,me=ce.state.selection;if(me.ranges.length==1){const ge=me.ranges[0];if(ge.from==ge.to&&ce.state.doc.lineAt(ge.from).number==se){const Te=W.getDiBelow(K);return Te?(W.focusDi(Te[0].itemId).then(()=>{W.moveCursorToBegin(Te[0].itemId)}),!0):!1}}return cursorLineDown(ce)},stopPropagation:!0},Backspace:{key:"Backspace",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;if(ce.state.doc.length==0){const se=W.getDiAbove(K);return o.addTask(async()=>{s.deleteBlock({blockId:G.block.id}),se&&(await W.nextUpdate(),await W.focusDi(se[0].itemId),W.moveCursorToTheEnd(se[0].itemId))}),!0}return deleteCharBackward(ce)},stopPropagation:!0},Delete:{key:"Delete",run:()=>{const K=a.value,W=n.value;if(!K||!W)return!1;const G=W.getDi(K),ce=W.getEditorView(K);if(!(ce instanceof EditorView)||!G||!DI_FILTERS.isBlockDi(G))return!1;if(ce.state.doc.length==0){const se=W.getDiBelow(K);return o.addTask(async()=>{s.deleteBlock({blockId:G.block.id}),se&&(await W.nextUpdate(),await W.focusDi(se[0].itemId),W.moveCursorToBegin(se[0].itemId))}),!0}return deleteCharForward(ce)},stopPropagation:!0},Escape:{key:"Escape",run:c.blurAndSelectCurrentBlock},Tab:{key:"Tab",run:insertTab,stopPropagation:!0},"Shift-Tab":{key:"Shift-Tab",run:indentLess,stopPropagation:!0},Enter:{key:"Enter",run:insertNewlineAndIndent,stopPropagation:!0}}),x=ref({"Mod-p":{run:c.openFusionCommandWithCurrentSelection,preventDefault:!0,stopPropagation:!0},"Mod-k":{run:c.addFocusedToSidePane,preventDefault:!0,stopPropagation:!0},Delete:{run:c.deleteSelected,stopPropagation:!0,preventDefault:!0},Backspace:{run:c.deleteSelected,stopPropagation:!0,preventDefault:!0},Tab:{run:c.promoteSelected,stopPropagation:!0,preventDefault:!0},"Shift-Tab":{run:c.demoteSelected,stopPropagation:!0,preventDefault:!0},"Alt-ArrowUp":{run:c.swapUpSelected,stopPropagation:!0,preventDefault:!0},"Alt-ArrowDown":{run:c.swapDownSelected,stopPropagation:!0,preventDefault:!0},"Shift-ArrowDown":{run:c.addBlockBelowToSelection,stopPropagation:!0,preventDefault:!0},"Shift-ArrowUp":{run:c.addBlockAboveToSelection,stopPropagation:!0,preventDefault:!0}}),_=K=>b.value[K],E=K=>k.value[K],B=K=>x.value[K],M=(K,W)=>{if(b.value[K])throw new Error(`keybinding ${K} already exists`);b.value[K]=W},I=(K,W)=>{if(k.value[K])throw new Error(`keybinding ${K} already exists`);k.value[K]=W},F=(K,W)=>{if(x.value[K])throw new Error(`keybinding ${K} already exists`);x.value[K]=W},V=K=>{delete b.value[K]},L=K=>{delete k.value[K]},U=K=>{delete x.value[K]},j=(K,W,G)=>{const ce=W?b.value[W]:void 0;if(b.value[K])throw new Error(`keybinding ${K} already exists`);const se=ce??G;se&&(b.value[K]=se,W&&ce&&delete b.value[W])},oe=(K,W,G)=>{const ce=W?k.value[W]:void 0;if(k.value[K])throw new Error(`keybinding ${K} already exists`);const se=ce??G;se&&(k.value[K]=se,W&&ce&&delete k.value[W])},Y=(K,W,G)=>{const ce=W?x.value[W]:void 0;if(x.value[K])throw new Error(`keybinding ${K} already exists`);const se=ce??G;se&&(x.value[K]=se,W&&ce&&delete x.value[W])};return watch(x,(K,W,G)=>{const ce=generateKeydownHandlerSimple(K);document.addEventListener("keydown",ce),G(()=>{document.removeEventListener("keydown",ce)})},{immediate:!0}),{openKeybindings:e,prosemirrorKeymap:b,codemirrorKeymap:k,globalKeymap:x,getProsemirrorKeybinding:_,getCodemirrorKeybinding:E,getGlobalKeybinding:B,addProsemirrorKeybinding:M,addCodemirrorKeybinding:I,addGlobalKeybinding:F,removeProsemirrorKeybinding:V,removeCodemirrorKeybinding:L,removeGlobalKeybinding:U,moveProsemirrorKeybinding:j,moveCodemirrorKeybinding:oe,moveGlobalKeybinding:Y,ctrlPressed:d,shiftPressed:u}}),skipOneUfeffAfterCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;try{if(o.doc.textBetween(n.from,n.from+1)=="\uFEFF"){const a=o.tr.setSelection(TextSelection.create(o.doc,n.from+1));return e(a),!0}}catch{}return!1},skipOneUfeffBeforeCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;if(o.doc.textBetween(n.from-1,n.from)=="\uFEFF"){const a=o.tr.setSelection(TextSelection.create(o.doc,n.from-1));return e(a),!0}return!1},deleteUfeffAfterCursor=(o,e)=>{const n=o.selection;try{if(o.doc.textBetween(n.from,n.from+1)=="\uFEFF"){const a=o.tr.delete(n.from,n.from+1);e(a)}}catch{}},deleteUfeffBeforeCursor=(o,e)=>{if(e==null)return!1;const n=o.selection;if(o.doc.textBetween(n.from-1,n.from)=="\uFEFF"){const a=o.tr.delete(n.from-1,n.from);e(a)}},useWritableComputedRef=o=>computed({get:()=>o.value,set:e=>{o.value=e}}),TimeMachineContext=createContext(()=>{const{registerSettingItem:o,registerSettingGroup:e}=SettingsContext.useContext(),{kbPrefix:n}=ServerInfoContext.useContext();e({key:"timeMachine",label:{zh:"\u65F6\u5149\u673A"}});const a=ref(!1),s={hourly:1,daily:1,weekly:1},l="timeMachine.autoBackup",c=computed(()=>`${n.value}${l}`),d=useLocalStorage2(c,s),u={hourly:10,daily:10,weekly:10},f="timeMachine.autoBackupKeepNumber",v=computed(()=>`${n.value}${f}`),b=useLocalStorage2(v,u);o({id:l+"weekly",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u5468\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.weekly,value:computed({get:()=>d.value.weekly,set:B=>d.value.weekly=B}),componentType:{type:"integerInput"}}),o({id:f+"weekly",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u5468\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u5468\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.weekly,value:computed({get:()=>b.value.hourly,set:B=>b.value.hourly=B}),componentType:{type:"integerInput"}}),o({id:l+"daily",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u65E5\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.daily,value:computed({get:()=>d.value.daily,set:B=>d.value.daily=B}),componentType:{type:"integerInput"}}),o({id:f+"daily",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u65E5\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u65E5\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.daily,value:computed({get:()=>b.value.daily,set:B=>b.value.daily=B}),componentType:{type:"integerInput"}}),o({id:l+"hourly",groupKey:"timeMachine",label:{zh:"\u6BCF\u51E0\u5C0F\u65F6\u81EA\u52A8\u751F\u6210\u5B58\u6863"},defaultValue:s.hourly,value:computed({get:()=>d.value.hourly,set:B=>d.value.hourly=B}),componentType:{type:"integerInput"}}),o({id:f+"hourly",groupKey:"timeMachine",label:{zh:"\u6700\u591A\u4FDD\u7559\u51E0\u4EFD\u6BCF\u5C0F\u65F6\u81EA\u52A8\u5907\u4EFD"},desc:{zh:"\u5982\u679C\u6BCF\u5C0F\u65F6\u5907\u4EFD\u6570\u91CF\u8FBE\u5230\u6B64\u503C\uFF0C\u5219\u5220\u9664\u6700\u65E9\u7684\u5907\u4EFD\u3002"},defaultValue:u.hourly,value:computed({get:()=>b.value.hourly,set:B=>b.value.hourly=B}),componentType:{type:"integerInput"}});const k=30,x="timeMachine.inactiveThreshold",_=computed(()=>`${n.value}${x}`),E=useLocalStorage2(_,k);return o({id:x,groupKey:"timeMachine",label:{zh:"\u4E0D\u6D3B\u8DC3\u68C0\u6D4B\u9608\u503C"},desc:{zh:"\u5982\u679C\u4E00\u6BB5\u65F6\u95F4\u65E0\u64CD\u4F5C\uFF0C\u5219\u4F1A\u81EA\u52A8\u751F\u6210\u4E0D\u6D3B\u8DC3\u5F52\u6863\u3002\u6B64\u503C\u63A7\u5236\u591A\u4E45\u65E0\u64CD\u4F5C\u7B97\u4E0D\u6D3B\u8DC3\uFF0C\u5355\u4F4D\uFF1A\u79D2\u3002"},defaultValue:k,value:useWritableComputedRef(E),componentType:{type:"integerInput"}}),{timeMachineOpen:a}}),FloatingMathInputContext=createContext(()=>{const o=ref(null);return{registerFloatingMathInput:e=>{o.value=e},openFloatingMathInput:(...e)=>{var n;(n=o.value)==null||n.call(o,...e)}}}),_sfc_main$21=defineComponent({__name:"Tooltip",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},delayDuration:{type:Number,required:!1},disableHoverableContent:{type:Boolean,required:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get TooltipRoot(){return zg}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$21(o,e,n,a,s,l){return openBlock(),createBlock(a.TooltipRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Tooltip=_export_sfc(_sfc_main$21,[["render",_sfc_render$21],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tooltip/Tooltip.vue"]]),_sfc_main$20=defineComponent({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get TooltipContent(){return Hg},get TooltipPortal(){return jg}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$20(o,e,n,a,s,l){return openBlock(),createBlock(a.TooltipPortal,null,{default:withCtx(()=>[createVNode(a.TooltipContent,mergeProps({...a.forwarded,...o.$attrs},{class:a.cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const TooltipContent=_export_sfc(_sfc_main$20,[["render",_sfc_render$20],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tooltip/TooltipContent.vue"]]),_sfc_main$1$=defineComponent({__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1},skipDelayDuration:{type:Number,required:!1},disableHoverableContent:{type:Boolean,required:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1}},setup(o,{expose:e}){e();const n={props:o,get TooltipProvider(){return Lg}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1$(o,e,n,a,s,l){return openBlock(),createBlock(a.TooltipProvider,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const TooltipProvider=_export_sfc(_sfc_main$1$,[["render",_sfc_render$1$],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tooltip/TooltipProvider.vue"]]),_sfc_main$1_=defineComponent({__name:"TooltipTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get TooltipTrigger(){return Kg}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1_(o,e,n,a,s,l){return openBlock(),createBlock(a.TooltipTrigger,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const TooltipTrigger=_export_sfc(_sfc_main$1_,[["render",_sfc_render$1_],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/tooltip/TooltipTrigger.vue"]]),_sfc_main$1Z=defineComponent({__name:"TimeMachine",setup(o,{expose:e}){e();const{timeMachineOpen:n}=TimeMachineContext.useContext(),a=ref([{name:"\u5907\u4EFD 1",size:1.3*1024*1024},{name:"\u5907\u4EFD 2",size:1.5*1024*1024},{name:"\u5907\u4EFD 3",size:1.6*1024*1024},{name:"\u5907\u4EFD 4",size:1.82*1024*1024}]),s={timeMachineOpen:n,backups:a,get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get DialogDescription(){return DialogDescription},get Button(){return Button},get Plus(){return Plus},get History(){return History},get Trash(){return Trash},get Eye(){return Eye},get Undo(){return Undo},get Tooltip(){return Tooltip},get TooltipTrigger(){return TooltipTrigger},get TooltipContent(){return TooltipContent}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),_hoisted_1$K={class:"w-full space-y-4"},_hoisted_2$o={class:"rounded-md border p-2"},_hoisted_3$i={class:"text-muted-foreground ml-2 text-sm"};function _sfc_render$1Z(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.timeMachineOpen,"onUpdate:open":e[1]||(e[1]=c=>a.timeMachineOpen=c)},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"p-4 pt-5",onOpenAutoFocus:e[0]||(e[0]=withModifiers(()=>{},["prevent"]))},{default:withCtx(()=>[createVNode(a.DialogHeader,null,{default:withCtx(()=>[createVNode(a.DialogTitle,{class:"flex items-center"},{default:withCtx(()=>[createVNode(a.History,{class:"size-5 mr-2"}),e[2]||(e[2]=createTextVNode(" \u65F6\u5149\u673A "))]),_:1}),createVNode(a.DialogDescription,null,{default:withCtx(()=>e[3]||(e[3]=[createTextVNode(" \u5907\u4EFD\u548C\u6062\u590D\u4F60\u7684\u7B14\u8BB0 ")])),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$K,[createBaseVNode("div",_hoisted_2$o,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.backups,c=>(openBlock(),createElementBlock("div",{key:c.name,class:"flex justify-between items-center"},[createBaseVNode("div",null,[createBaseVNode("span",null,toDisplayString$1(c.name),1),createBaseVNode("span",_hoisted_3$i,toDisplayString$1((c.size/1024/1024).toFixed(2))+" MB",1)]),createBaseVNode("div",null,[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"size-7 p-0"},{default:withCtx(()=>[createVNode(a.Eye,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[...e[4]||(e[4]=[createBaseVNode("p",null,"\u9884\u89C8\u6B64\u5907\u4EFD",-1)])]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"size-7 p-0 !text-blue-500"},{default:withCtx(()=>[createVNode(a.Undo,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[...e[5]||(e[5]=[createBaseVNode("p",null,"\u56DE\u9000\u5230\u6B64\u5907\u4EFD",-1)])]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"size-7 p-0 !text-red-500"},{default:withCtx(()=>[createVNode(a.Trash,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[...e[6]||(e[6]=[createBaseVNode("p",null,"\u5220\u9664\u6B64\u5907\u4EFD",-1)])]),_:1})]),_:1})])]))),128))]),createVNode(a.Button,{variant:"outline",size:"sm",class:"w-full",autofocus:""},{default:withCtx(()=>[createVNode(a.Plus,{class:"size-4 mr-2"}),e[7]||(e[7]=createTextVNode(" \u521B\u5EFA\u65B0\u5907\u4EFD "))]),_:1})])]),_:1})]),_:1},8,["open"])}const TimeMachine=_export_sfc(_sfc_main$1Z,[["render",_sfc_render$1Z],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/time-machine/TimeMachine.vue"]]);CompletionContext=class{constructor(o,e,n,a){this.state=o,this.pos=e,this.explicit=n,this.view=a,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(o){let e=syntaxTree(this.state).resolveInner(this.pos,-1);for(;e&&o.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(o){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),a=e.text.slice(n-e.from,this.pos-e.from),s=a.search(ensureAnchor(o));return s<0?null:{from:n+s,to:this.pos,text:a.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(o,e,n){o=="abort"&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}};function toSet(o){let e=Object.keys(o).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(o){let e=Object.create(null),n=Object.create(null);for(let{label:s}of o){e[s[0]]=!0;for(let l=1;l<s.length;l++)n[s[l]]=!0}let a=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+a),new RegExp(a)]}completeFromList=function(o){let e=o.map(s=>typeof s=="string"?{label:s}:s),[n,a]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return s=>{let l=s.matchBefore(a);return l||s.explicit?{from:l?l.from:s.pos,options:e,validFor:n}:null}},ifNotIn=function(o,e){return n=>{for(let a=syntaxTree(n.state).resolveInner(n.pos,-1);a;a=a.parent){if(o.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(n)}};function ensureAnchor(o,e){var n;let{source:a}=o,s=a[a.length-1]!="$";return s?new RegExp(`(?:${a})${s?"$":""}`,(n=o.flags)!==null&&n!==void 0?n:o.ignoreCase?"i":""):o}const pickedCompletion=Annotation.define(),baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,n,a,s){this.field=e,this.line=n,this.from=a,this.to=s}}class FieldRange{constructor(e,n,a){this.field=e,this.from=n,this.to=a}map(e){let n=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return n==null||a==null?null:new FieldRange(this.field,n,a)}}class Snippet{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let a=[],s=[n],l=e.doc.lineAt(n),c=/^\s*/.exec(l.text)[0];for(let u of this.lines){if(a.length){let f=c,v=/^\t*/.exec(u)[0].length;for(let b=0;b<v;b++)f+=e.facet(indentUnit);s.push(n+f.length-v),u=f+u.slice(v)}a.push(u),n+=u.length+1}let d=this.fieldPositions.map(u=>new FieldRange(u.field,s[u.line]+u.from,s[u.line]+u.to));return{text:a,ranges:d}}static parse(e){let n=[],a=[],s=[],l;for(let c of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(c);){let d=l[1]?+l[1]:null,u=l[2]||l[3]||"",f=-1,v=u.replace(/\\[{}]/g,b=>b[1]);for(let b=0;b<n.length;b++)(d!=null?n[b].seq==d:v&&n[b].name==v)&&(f=b);if(f<0){let b=0;for(;b<n.length&&(d==null||n[b].seq!=null&&n[b].seq<d);)b++;n.splice(b,0,{seq:d,name:v}),f=b;for(let k of s)k.field>=f&&k.field++}s.push(new FieldPos(f,a.length,l.index,l.index+v.length)),c=c.slice(0,l.index)+u+c.slice(l.index+l[0].length)}c=c.replace(/\\([{}])/g,(d,u,f)=>{for(let v of s)v.line==a.length&&v.from>f&&(v.from--,v.to--);return u}),a.push(c)}return new Snippet(a,s)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let o=document.createElement("span");return o.className="cm-snippetFieldPosition",o}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,n){this.ranges=e,this.active=n,this.deco=Decoration.set(e.map(a=>(a.from==a.to?fieldMarker:fieldRange).range(a.from,a.to)))}map(e){let n=[];for(let a of this.ranges){let s=a.map(e);if(!s)return null;n.push(s)}return new ActiveSnippet(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(a=>a.field==this.active&&a.from<=n.from&&a.to>=n.to))}}const setActive=StateEffect.define({map(o,e){return o&&o.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(o,e){for(let n of e.effects){if(n.is(setActive))return n.value;if(n.is(moveToField)&&o)return new ActiveSnippet(o.ranges,n.value)}return o&&e.docChanged&&(o=o.map(e.changes)),o&&e.selection&&!o.selectionInsideField(e.selection)&&(o=null),o},provide:o=>EditorView.decorations.from(o,e=>e?e.deco:Decoration.none)});function fieldSelection(o,e){return EditorSelection.create(o.filter(n=>n.field==e).map(n=>EditorSelection.range(n.from,n.to)))}function snippet(o){let e=Snippet.parse(o);return(n,a,s,l)=>{let{text:c,ranges:d}=e.instantiate(n.state,s),{main:u}=n.state.selection,f={changes:{from:s,to:l==u.from?u.to:l,insert:Text.of(c)},scrollIntoView:!0,annotations:a?[pickedCompletion.of(a),Transaction.userEvent.of("input.complete")]:void 0};if(d.length&&(f.selection=fieldSelection(d,0)),d.some(v=>v.field>0)){let v=new ActiveSnippet(d,0),b=f.effects=[setActive.of(v)];n.state.field(snippetState,!1)===void 0&&b.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme]))}n.dispatch(n.state.update(f))}}function moveField(o){return({state:e,dispatch:n})=>{let a=e.field(snippetState,!1);if(!a||o<0&&a.active==0)return!1;let s=a.active+o,l=o>0&&!a.ranges.some(c=>c.field==s+o);return n(e.update({selection:fieldSelection(a.ranges,s),effects:setActive.of(l?null:new ActiveSnippet(a.ranges,s)),scrollIntoView:!0})),!0}}const clearSnippet=({state:o,dispatch:e})=>o.field(snippetState,!1)?(e(o.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(o){return o.length?o[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],o=>o.facet(snippetKeymap)));snippetCompletion=function(o,e){return Object.assign(Object.assign({},e),{apply:snippet(o)})};const snippetPointerHandler=EditorView.domEventHandlers({mousedown(o,e){let n=e.state.field(snippetState,!1),a;if(!n||(a=e.posAtCoords({x:o.clientX,y:o.clientY}))==null)return!1;let s=n.ranges.find(l=>l.from<=a&&l.to>=a);return!s||s.field==n.active?!1:(e.dispatch({selection:fieldSelection(n.ranges,s.field),effects:setActive.of(n.ranges.some(l=>l.field>s.field)?new ActiveSnippet(n.ranges,s.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(o,e){return e.mapPos(o,-1,MapMode.TrackAfter)??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(o,e){if(o=o.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);o=o.update({filter:a=>a>=n.from&&a<=n.to})}for(let n of e.effects)n.is(closeBracketEffect)&&(o=o.update({add:[closedBracket.range(n.value,n.value+1)]}));return o}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(o){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==o)return definedClosing.charAt(e+1);return fromCodePoint(o<128?o:o+1)}function config$1(o,e){return o.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((o,e,n,a)=>{if((android?o.composing:o.compositionStarted)||o.state.readOnly)return!1;let s=o.state.selection.main;if(a.length>2||a.length==2&&codePointSize(codePointAt(a,0))==1||e!=s.from||n!=s.to)return!1;let l=insertBracket(o.state,a);return l?(o.dispatch(l),!0):!1});function insertBracket(o,e){let n=config$1(o,o.selection.main.head),a=n.brackets||defaults.brackets;for(let s of a){let l=closing(codePointAt(s,0));if(e==s)return l==s?handleSame(o,s,a.indexOf(s+s+s)>-1,n):handleOpen(o,s,l,n.before||defaults.before);if(e==l&&closedBracketAt(o,o.selection.main.from))return handleClose(o,s,l)}return null}function closedBracketAt(o,e){let n=!1;return o.field(bracketState).between(0,o.doc.length,a=>{a==e&&(n=!0)}),n}function nextChar(o,e){let n=o.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function handleOpen(o,e,n,a){let s=null,l=o.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:n,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let d=nextChar(o.doc,c.head);return!d||/\s/.test(d)||a.indexOf(d)>-1?{changes:{insert:e+n,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:s=c}});return s?null:o.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(o,e,n){let a=null,s=o.changeByRange(l=>l.empty&&nextChar(o.doc,l.head)==n?{changes:{from:l.head,to:l.head+n.length,insert:n},range:EditorSelection.cursor(l.head+n.length)}:a={range:l});return a?null:o.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(o,e,n,a){let s=a.stringPrefixes||defaults.stringPrefixes,l=null,c=o.changeByRange(d=>{if(!d.empty)return{changes:[{insert:e,from:d.from},{insert:e,from:d.to}],effects:closeBracketEffect.of(d.to+e.length),range:EditorSelection.range(d.anchor+e.length,d.head+e.length)};let u=d.head,f=nextChar(o.doc,u),v;if(f==e){if(nodeStart(o,u))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(closedBracketAt(o,u)){let b=n&&o.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+b.length,insert:b},range:EditorSelection.cursor(u+b.length)}}}else{if(n&&o.sliceDoc(u-2*e.length,u)==e+e&&(v=canStartStringAt(o,u-2*e.length,s))>-1&&nodeStart(o,v))return{changes:{insert:e+e+e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(o.charCategorizer(u)(f)!=CharCategory.Word&&canStartStringAt(o,u,s)>-1&&!probablyInString(o,u,e,s))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)}}return{range:l=d}});return l?null:o.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(o,e){let n=syntaxTree(o).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(o,e,n,a){let s=syntaxTree(o).resolveInner(e,-1),l=a.reduce((c,d)=>Math.max(c,d.length),0);for(let c=0;c<5;c++){let d=o.sliceDoc(s.from,Math.min(s.to,s.from+n.length+l)),u=d.indexOf(n);if(!u||u>-1&&a.indexOf(d.slice(0,u))>-1){let v=s.firstChild;for(;v&&v.from==s.from&&v.to-v.from>n.length+u;){if(o.sliceDoc(v.to-n.length,v.to)==n)return!1;v=v.firstChild}return!0}let f=s.to==e&&s.parent;if(!f)break;s=f}return!1}function canStartStringAt(o,e,n){let a=o.charCategorizer(e);if(a(o.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let s of n){let l=e-s.length;if(o.sliceDoc(l,e)==s&&a(o.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}const minimalSetup=[highlightSpecialChars(),history$1(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])],HistoryContext=createContext(()=>{const o=ref([]),e=ref(0),n=computed(()=>e.value>0),a=computed(()=>e.value<o.value.length),{mainRootBlockId:s}=MainTreeContext.useContext(),{getBlockTree:l}=BlockTreeContext.useContext(),{lastFocusedDiId:c,lastFocusedBlockTree:d}=LastFocusContext.useContext(),u=()=>{const b=d.value,k=c.value;if(!b||!k)return null;const x=b.getEditorView(k),_=x instanceof EditorView$1||x instanceof EditorView?x.state.selection.toJSON():null;return{focusedDiId:k,rootBlockId:s.value,selection:_}},f=b=>{b??(b=u()??void 0),b&&(o.value.splice(e.value),o.value.push(b),e.value=o.value.length)},v=b=>{s.value=b.rootBlockId;const k=l("main");k&&k.focusDi(b.focusedDiId,{highlight:!0})};return{historyItems:o,currentIndex:e,pushHistoryItem:f,goPrev:()=>{if(e.value<=0)return;const b=e.value===o.value.length?u():void 0;e.value--,v(o.value[e.value]),b&&o.value.push(b)},goNext:()=>{e.value>=o.value.length||(e.value++,v(o.value[e.value]))},canGoPrev:n,canGoNext:a}}),DirentsSchema=z.record(z.string(),z.discriminatedUnion("isDirectory",[z.object({isDirectory:z.literal(!0),name:z.string(),subDirents:z.lazy(()=>DirentsSchema)}),z.object({isDirectory:z.literal(!1),name:z.string()})])),FsLsSchema={request:z.object({basePath:z.string(),includeHidden:z.boolean().optional(),recursive:z.boolean().optional(),maxDepth:z.number().optional()}),result:DirentsSchema};z.object({path:z.string()}),z.object({ctime:z.coerce.date(),mtime:z.coerce.date(),size:z.number()});const FsUploadSchema={request:z.object({overwrite:z.boolean().optional(),mkdir:z.boolean().optional()}),result:z.undefined()},FsEnsureAttachmentsDirSchema={request:z.object({}),result:z.any()},FsGetAttachmentSignedUrlSchema={request:z.object({path:z.string(),attachment:z.boolean().optional(),inferMimeType:z.boolean().optional()}),result:z.object({signedUrl:z.string()})},ClearScannedImageSchema={request:z.object({path:z.string()}),result:z.object({path:z.string()})},fsLs=usePostApi("/fs/ls",FsLsSchema.request,FsLsSchema.result),fsUpload=async(o,e)=>{const n="/fs/upload";try{let a;try{a=globalThis.getAxios()}catch(d){return console.error(`[NO_AXIOS] ${d}`),{success:!1,code:RESP_CODES.NO_AXIOS}}const s=new FormData;o.forEach(d=>{s.append("targetPath",d[0]),s.append("file",d[1])});const l=await a.post(n,s,{headers:{"Content-Type":"multipart/form-data"},params:e});if(!l)return console.error(`[EMPTY_RESPONSE] endpoint=${n}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR};const c=RespSchema(FsUploadSchema.result).safeParse(l.data);return c.success?{success:!0,code:RESP_CODES.SUCCESS}:(console.error(`[INVALID_RESPONSE] endpoint=${n}}, response=${JSON.stringify(l.data)}, validationErrors=${JSON.stringify(c.error.errors)}`),{success:!1,code:RESP_CODES.INVALID_RESPONSE})}catch(a){return console.error(`[UNKNOWN_ERROR] endpoint=${n}}, error=${a}`),{success:!1,code:RESP_CODES.UNKNOWN_ERROR}}},fsEnsureAttachmentsDir=usePostApi("/fs/ensure-attachments-dir",FsEnsureAttachmentsDirSchema.request,FsEnsureAttachmentsDirSchema.result),fsGetAttachmentSignedUrl=usePostApi("/fs/get-attachment-signed-url",FsGetAttachmentSignedUrlSchema.request,FsGetAttachmentSignedUrlSchema.result),fsClearScannedImage=usePostApi("/fs/clear-scanned-image",ClearScannedImageSchema.request,ClearScannedImageSchema.result),autoRetryGet=(o,e,n,a=!0)=>{let s=!1,l=0,c=0,d=null,u=null;const f=new Promise((b,k)=>{u=k;const x=()=>{if(s){k(new Error("Operation cancelled"));return}if(o(_=>{s||(b(_),v())}),l++,l>=n&&a){k(new Error("Max retry attempts reached"));return}l<n?(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(x,c)):a||(e.mode==="fixed"?c=e.value:c=Math.min(e.base*2**(l-1),e.max),d=setTimeout(x,c))};x()}),v=()=>{s=!0,d&&clearTimeout(d),u&&u(new Error("Operation cancelled"))};return[f,v]},PathsContext=createContext(()=>{ServerInfoContext.useContext();const o=useRoute(),e=computed(()=>o.params.location),n=ref("attachments"),a=computed(()=>joinPathSegments([e.value,n.value]));return{dbBasePath:e,attachmentsFolderName:n,attachmentsBasePath:a}}),ImagesContext=createContext(()=>{const{serverUrl:o}=ServerInfoContext.useContext(),e=reactive({});ServerInfoContext.useContext(),PathsContext.useContext();const n=(s,l=!1)=>{var u;const c=(u=e[s])==null?void 0:u.status,d=e[s]&&"url"in e[s]?e[s].url:void 0;c!=="fetching"&&(c!==void 0&&!l||(async()=>{e[s]={status:"fetching",url:d};const[f,v]=autoRetryGet(b=>{fsGetAttachmentSignedUrl({path:s,inferMimeType:!0,attachment:!1}).then(k=>k.success&&b(k.data.signedUrl))},{mode:"backoff",base:500,max:5e3},5,!0);f.then(b=>{console.debug("\u56FE\u7247\u83B7\u53D6\u6210\u529F",s),e[s]={status:"synced",url:`${o.value}${b}`}}).catch(b=>{console.debug("\u56FE\u7247\u83B7\u53D6\u5931\u8D25",s,b.message),e[s]={status:"fetchError",url:d}})})())};function a(s,l){return computed(typeof s=="string"?()=>(n(s,l),e[s]):()=>{const c=s();return c?(n(c,l),e[c]):null})}return{images:e,useImage:a,uploadImage:(s,l)=>{const c=l??s.name,d=URL.createObjectURL(s);return e[c]={status:"uploading",url:d},queueMicrotask(async()=>{(await fsUpload([[c,s]])).success?(console.log("\u56FE\u7247\u4E0A\u4F20\u6210\u529F",c),n(c,!0)):e[c]={status:"uploadError",url:d}}),computed(()=>e[c])}}}),PasteDialogContext=createContext(()=>({open:ref(!1)})),RefSuggestionsContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{search:e}=IndexContext.useContext(),n=ref(null),a=computed({get:()=>n.value!==null,set:b=>!b&&(n.value=null)}),s=ref(""),l=ref(null),c=ref(0),d=ref([]),u=ref(!1),f=ref(!1),v=useDebounceFn(()=>{const b=[];s.value&&s.value.trim().length>0&&e(s.value).slice(0,100).map(k=>o.getBlockRef(k)).filter(k=>{const x=k.value;return x!=null&&x.content[0]===BLOCK_CONTENT_TYPES.TEXT}).forEach(k=>{b.push({type:"block",block:k})}),u.value&&s.value.trim().length>0&&b.push({type:"createNew"}),d.value=b,c.value=0},100);return{showPos:n,open:a,query:s,cb:l,focusItemIndex:c,suggestions:d,suppressMouseOver:f,updateSuggestions:v,withScrollSuppressed:(b,k=500)=>(f.value=!0,setTimeout(()=>f.value=!1,k),b()),openRefSuggestions:(b,k,x,_=!1)=>{l.value=k,s.value=x??"",d.value=[],u.value=_,v(),n.value=b}}}),mkEventBusPlugin=()=>{const o=_mitt();return new Plugin({view:e=>(Object.assign(e,{on:o.on}),Object.assign(e,{off:o.off}),Object.assign(e,{emit:o.emit}),{})})},mkHighlightMatchesPlugin=(o,e="highlight-keep")=>new Plugin({props:{decorations:n=>{const a=o.getHighlightTerms();if(!a||a.length==0)return null;let s;const l=[];return n.doc.content.descendants((c,d)=>{if(!c.isText)return!1;const u=c.textContent.toLowerCase();for(const f of a)for(s=-1;(s=u.indexOf(f,s+1))!=-1;){const v=Decoration$1.inline(d+s,d+s+f.length,{class:e});l.push(v)}}),DecorationSet.create(n.doc,l)}}}),mkHighlightRefsPlugin=o=>new Plugin({props:{decorations:e=>{const n=o.getHighlightRefs();if(!n||n.length==0)return null;const a=[];return e.doc.content.descendants((s,l)=>{if(s.type.name=="blockRef_v2"&&n.includes(s.attrs.toBlockId)){const c=Decoration$1.inline(l,l+1,{class:"highlight-keep"});a.push(c)}}),DecorationSet.create(e.doc,a)}}}),mkListenDocChangedPlugin=()=>{let o=null;return new Plugin({view:e=>(o=e,{}),state:{init:()=>{},apply:(e,n,a,s)=>{if(o!=null&&o.emit&&e.docChanged){const l=a.selection.toJSON(),c=s.selection.toJSON(),d=s.doc.toJSON(),u=a.doc.toJSON();o.emit("docChanged",{newDoc:d,oldDoc:u,view:o,oldSelection:l,newSelection:c})}}}})},_sfc_main$1Y=defineComponent({__name:"ProseMirror",props:mergeModels({disableSpellcheckWhenBlur:{type:Boolean,required:!1,default:!0},nodeViews:{type:Object,required:!1},schema:{type:Object,required:!0},pluginsBuilder:{type:Function,required:!1},onDocChanged:{type:Function,required:!1},highlightTerms:{type:Array,required:!1},highlightRefs:{type:Array,required:!1},blockTree:{type:Object,required:!1},itemId:{type:String,required:!1},readonly:{type:Boolean,required:!1,default:!1}},{doc:{type:null},docModifiers:{}}),emits:["update:doc"],setup(o,{expose:e}){const n=o,a=useModel(o,"doc"),s=ref(null),l=ref(!1);let c=null;const d=HistoryContext.useContext(),u=BlockTreeContext.useContext(),f=BlocksContext.useContext(),v=RefSuggestionsContext.useContext(),b=LastFocusContext.useContext(),k=PathsContext.useContext(),x=ImagesContext.useContext(),_=KeymapContext.useContext(),E=PasteDialogContext.useContext(),B={getSchema:()=>n.schema,getItemId:()=>n.itemId??null,getBlockTree:()=>n.blockTree??null,getReadonly:()=>n.readonly,getEditorView:()=>c,getHighlightTerms:()=>n.highlightTerms??[],getHighlightRefs:()=>n.highlightRefs??[],lastFocusContext:b,historyContext:d,blockTreeContext:u,blocksContext:f,refSuggestionsContext:v,imagesContext:x,pathsContext:k,keymapContext:_,pasteDialogContext:E};e({getEditorView:()=>c,isCorrupted:()=>l.value,getWrapperDom:()=>s.value});const M=()=>{var V;const F=((V=n.pluginsBuilder)==null?void 0:V.call(n,B))??[];return n.readonly?[mkHighlightMatchesPlugin(B),mkHighlightRefsPlugin(B),...F]:[mkEventBusPlugin(),mkListenDocChangedPlugin(),mkHighlightMatchesPlugin(B),mkHighlightRefsPlugin(B),...F]};watch(a,()=>{if(!c||c!=null&&c.isDestroyed)return;const F=JSON.stringify(a.value),V=JSON.stringify(c.state.doc);if(F==V)return;let L;try{L=Node$1.fromJSON(n.schema,a.value)}catch{l.value=!0;return}const U=c.state.selection.toJSON();let j;try{j=Selection.fromJSON(L,U)}catch{}const oe=EditorState$1.create({doc:L,plugins:c.state.plugins,selection:j});c.updateState(oe)}),watch([()=>n.highlightTerms,()=>n.highlightRefs],()=>{if(c){const F=c.state.tr.setMeta("empty",{});c.dispatch(F)}}),onMounted(()=>{if(!s.value)return;let F;try{F=Node$1.fromJSON(n.schema,a.value)}catch{l.value=!0;return}const V=EditorState$1.create({doc:F,plugins:M()});if(c&&c.destroy(),c=new EditorView$1(s.value,{state:V,editable:()=>!n.readonly,nodeViews:n.nodeViews??{}}),c.on){const L=({newDoc:U})=>a.value=U;c.on("docChanged",n.onDocChanged??L)}n.disableSpellcheckWhenBlur&&(s.value.addEventListener("focusin",()=>{s.value&&(s.value.spellcheck=!0)}),s.value.addEventListener("focusout",()=>{s.value&&(s.value.spellcheck=!1)}))}),onUnmounted(()=>{setTimeout(()=>{c&&!c.isDestroyed&&c.destroy(),c=null},1e3)});const I={props:n,docJson:a,$wrapper:s,corrupted:l,get editorView(){return c},set editorView(F){c=F},historyContext:d,blockTreeContext:u,blocksContext:f,refSuggestionsContext:v,lastFocusContext:b,pathsContext:k,imagesContext:x,keymapContext:_,pasteDialogContext:E,pluginsCtx:B,mkPlugins:M};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),_hoisted_1$J={class:"prosemirror-wrapper",ref:"$wrapper"};function _sfc_render$1Y(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$J,null,512)}const ProseMirror=_export_sfc(_sfc_main$1Y,[["render",_sfc_render$1Y],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/prosemirror/ProseMirror.vue"]]);class InputRule{constructor(e,n,a={}){this.match=e,this.match=e,this.handler=typeof n=="string"?stringHandler(n):n,this.undoable=a.undoable!==!1,this.inCode=a.inCode||!1}}function stringHandler(o){return function(e,n,a,s){let l=o;if(n[1]){let c=n[0].lastIndexOf(n[1]);l+=n[0].slice(c+n[1].length),a+=c;let d=a-s;d>0&&(l=n[0].slice(c-d,c)+l,a=s)}return e.tr.insertText(l,a,s)}}const MAX_MATCH=500;function inputRules({rules:o}){let e=new Plugin({state:{init(){return null},apply(n,a){return n.getMeta(this)||(n.selectionSet||n.docChanged?null:a)}},props:{handleTextInput(n,a,s,l){return run(n,a,s,l,o,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:a}=n.state.selection;a&&run(n,a.pos,a.pos,"",o,e)})}}},isInputRules:!0});return e}function run(o,e,n,a,s,l){if(o.composing)return!1;let c=o.state,d=c.doc.resolve(e),u=d.parent.textBetween(Math.max(0,d.parentOffset-MAX_MATCH),d.parentOffset,null,"\uFFFC")+a;for(let f=0;f<s.length;f++){let v=s[f];if(d.parent.type.spec.code){if(!v.inCode)continue}else if(v.inCode==="only")continue;let b=v.match.exec(u),k=b&&v.handler(c,b,e-(b[0].length-a.length),n);if(k)return v.undoable&&k.setMeta(l,{transform:k,from:e,to:n,text:a}),o.dispatch(k),!0}return!1}new InputRule(/--$/,"\u2014"),new InputRule(/\.\.\.$/,"\u2026"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),new InputRule(/"$/,"\u201D"),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new InputRule(/'$/,"\u2019");const openRefSuggestions=o=>new InputRule(/([#@])$/,(e,n)=>{const a=o.getEditorView();if(!a)return null;const s=a.state.selection.from,l=a.coordsAtPos(s);if(!l)return null;const c={x:l.left,y:l.top},d=f=>{if(f){const v=n[1]=="#",b=o.getSchema().nodes.blockRef_v2.create({toBlockId:f,tag:v}),k=a.state.selection.anchor,x=a.state.tr.replaceRangeWith(k-n[1].length,k,b);a.dispatch(x)}setTimeout(()=>a.focus(),50)},{openRefSuggestions:u}=o.refSuggestionsContext??{};return u==null||u(c,d,void 0,!0),null}),turnToCodeBlock=o=>new InputRule(/^```([a-z]+) $/,(e,n)=>{const a=e.tr.setMeta("",""),s=o.getItemId(),l=o.getBlockTree();if(!s||!l)return a;const c=l.getDi(s);if(!c||!DI_FILTERS.isBlockDi(c))return a;const{blockEditor:d}=o.blocksContext??{};if(!d)return a;const u=useTaskQueue();return setTimeout(()=>{u.addTask(async()=>{d.changeBlockContent({blockId:c.block.id,content:[BLOCK_CONTENT_TYPES.CODE,"",n[1]]}),await l.nextUpdate(),l.focusDi(s)})}),a});class SourceLocation{constructor(e,n,a){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=a}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class Token{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new Token(n,SourceLocation.range(this,e))}}class ParseError{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var a="KaTeX parse error: "+e,s,l,c=n&&n.loc;if(c&&c.start<=c.end){var d=c.lexer.input;s=c.start,l=c.end,s===d.length?a+=" at end of input: ":a+=" at position "+(s+1)+": ";var u=d.slice(s,l).replace(/[^]/g,"$&\u0332"),f;s>15?f="\u2026"+d.slice(s-15,s):f=d.slice(0,s);var v;l+15<d.length?v=d.slice(l,l+15)+"\u2026":v=d.slice(l),a+=f+u+v}var b=new Error(a);return b.name="ParseError",b.__proto__=ParseError.prototype,b.position=s,s!=null&&l!=null&&(b.length=l-s),b.rawMessage=e,b}}ParseError.prototype.__proto__=Error.prototype;var contains=function o(e,n){return e.indexOf(n)!==-1},deflt=function o(e,n){return e===void 0?n:e},uppercase=/([A-Z])/g,hyphenate=function o(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(o){return String(o).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function o(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?o(e.body[0]):e:e.type==="font"?o(e.body):e},isCharacterBox=function o(e){var n=getBaseElem(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},assert=function o(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function o(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},utils={contains,deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:o=>"#"+o},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(o,e)=>(e.push(o),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:o=>Math.max(0,o),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:o=>Math.max(0,o),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:o=>Math.max(0,o),cli:"-e, --max-expand <n>",cliProcessor:o=>o==="Infinity"?1/0:parseInt(o)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(o){if(o.default)return o.default;var e=o.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(n)){var a=SETTINGS_SCHEMA[n];this[n]=e[n]!==void 0?a.processor?a.processor(e[n]):e[n]:getDefaultValue(a)}}reportNonstrict(e,n,a){var s=this.strict;if(typeof s=="function"&&(s=s(e,n,a)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),a);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,a){var s=this.strict;if(typeof s=="function")try{s=s(e,n,a)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=utils.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var a=typeof this.trust=="function"?this.trust(e):this.trust;return!!a}}class Style{constructor(e,n,a){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=a}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(o){for(var e=0;e<scriptData.length;e++)for(var n=scriptData[e],a=0;a<n.blocks.length;a++){var s=n.blocks[a];if(o>=s[0]&&o<=s[1])return n.name}return null}var allBlocks=[];scriptData.forEach(o=>o.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(o){for(var e=0;e<allBlocks.length;e+=2)if(o>=allBlocks[e]&&o<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function o(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function o(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function o(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function o(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function o(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},phasePath=function o(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function o(e,n,a){var s=a-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},sqrtPath=function o(e,n,a){n=1e3*n;var s="";switch(e){case"sqrtMain":s=sqrtMain(n,hLinePad);break;case"sqrtSize1":s=sqrtSize1(n,hLinePad);break;case"sqrtSize2":s=sqrtSize2(n,hLinePad);break;case"sqrtSize3":s=sqrtSize3(n,hLinePad);break;case"sqrtSize4":s=sqrtSize4(n,hLinePad);break;case"sqrtTall":s=sqrtTall(n,hLinePad,a)}return s},innerPath=function o(e,n){switch(e){case"\u239C":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"\u2223":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"\u2225":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"\u239F":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"\u23A2":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"\u23A5":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"\u23AA":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"\u23D0":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"\u2016":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function o(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let DocumentFragment$1=class{constructor(o){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=o,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(o){return utils.contains(this.classes,o)}toNode(){for(var o=document.createDocumentFragment(),e=0;e<this.children.length;e++)o.appendChild(this.children[e].toNode());return o}toMarkup(){for(var o="",e=0;e<this.children.length;e++)o+=this.children[e].toMarkup();return o}toText(){var o=e=>e.toText();return this.children.map(o).join("")}};var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"};function setFontMetrics(o,e){fontMetricsData[o]=e}function getCharacterMetrics(o,e,n){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var a=o.charCodeAt(0),s=fontMetricsData[e][a];if(!s&&o[0]in extraCharacterMap&&(a=extraCharacterMap[o[0]].charCodeAt(0),s=fontMetricsData[e][a]),!s&&n==="text"&&supportedCodepoint(a)&&(s=fontMetricsData[e][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(o){var e;if(o>=5?e=0:o>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var n=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var a in sigmasAndXis)sigmasAndXis.hasOwnProperty(a)&&(n[a]=sigmasAndXis[a][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function o(e,n){return n.size<2?e:sizeStyleMap[e-1][n.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);return new Options(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=sizeAtStyle(Options.BASESIZE,e);return this.size===n&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function o(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize=function o(e,n){var a;if(e.unit in ptPerUnit)a=ptPerUnit[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")a=n.fontMetrics().cssEmPerMu;else{var s;if(n.style.isTight()?s=n.havingStyle(n.style.text()):s=n,e.unit==="ex")a=s.fontMetrics().xHeight;else if(e.unit==="em")a=s.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");s!==n&&(a*=s.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*a,n.maxSize)},makeEm=function o(e){return+e.toFixed(4)+"em"},createClass=function o(e){return e.filter(n=>n).join(" ")},initNode=function o(e,n,a){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=a||{},n){n.style.isTight()&&this.classes.push("mtight");var s=n.getColor();s&&(this.style.color=s)}},toNode=function o(e){var n=document.createElement(e);n.className=createClass(this.classes);for(var a in this.style)this.style.hasOwnProperty(a)&&(n.style[a]=this.style[a]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&n.setAttribute(s,this.attributes[s]);for(var l=0;l<this.children.length;l++)n.appendChild(this.children[l].toNode());return n},toMarkup=function o(e){var n="<"+e;this.classes.length&&(n+=' class="'+utils.escape(createClass(this.classes))+'"');var a="";for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(n+=' style="'+utils.escape(a)+'"');for(var l in this.attributes)this.attributes.hasOwnProperty(l)&&(n+=" "+l+'="'+utils.escape(this.attributes[l])+'"');n+=">";for(var c=0;c<this.children.length;c++)n+=this.children[c].toMarkup();return n+="</"+e+">",n};class Span{constructor(e,n,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,a,s),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,n,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,n,s),this.children=a||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,n,a){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=a}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=utils.hyphenate(a)+":"+this.style[a]+";");return n&&(e+=' style="'+utils.escape(n)+'"'),e+="'/>",e}}var iCombinations={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"};class SymbolNode{constructor(e,n,a,s,l,c,d,u){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=a||0,this.italic=s||0,this.skew=l||0,this.width=c||0,this.classes=d||[],this.style=u||{},this.maxFontSize=0;var f=scriptFromCodepoint(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=createClass(this.classes));for(var a in this.style)this.style.hasOwnProperty(a)&&(n=n||document.createElement("span"),n.style[a]=this.style[a]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=utils.escape(createClass(this.classes)),n+='"');var a="";this.italic>0&&(a+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=utils.hyphenate(s)+":"+this.style[s]+";");a&&(e=!0,n+=' style="'+utils.escape(a)+'"');var l=utils.escape(this.text);return e?(n+=">",n+=l,n+="</span>",n):l}}class SvgNode{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&n.setAttribute(a,this.attributes[a]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+utils.escape(this.attributes[n])+'"');e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",path[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&n.setAttribute(a,this.attributes[a]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+utils.escape(this.attributes[n])+'"');return e+="/>",e}}function assertSymbolDomNode(o){if(o instanceof SymbolNode)return o;throw new Error("Expected symbolNode but got "+String(o)+".")}function assertSpan(o){if(o instanceof Span)return o;throw new Error("Expected span<HtmlDomNode> but got "+String(o)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(o,e,n,a,s,l){symbols[o][s]={font:e,group:n,replace:a},l&&a&&(symbols[o][a]=symbols[o][s])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"\u2261","\\equiv",!0),defineSymbol(math,main,rel,"\u227A","\\prec",!0),defineSymbol(math,main,rel,"\u227B","\\succ",!0),defineSymbol(math,main,rel,"\u223C","\\sim",!0),defineSymbol(math,main,rel,"\u22A5","\\perp"),defineSymbol(math,main,rel,"\u2AAF","\\preceq",!0),defineSymbol(math,main,rel,"\u2AB0","\\succeq",!0),defineSymbol(math,main,rel,"\u2243","\\simeq",!0),defineSymbol(math,main,rel,"\u2223","\\mid",!0),defineSymbol(math,main,rel,"\u226A","\\ll",!0),defineSymbol(math,main,rel,"\u226B","\\gg",!0),defineSymbol(math,main,rel,"\u224D","\\asymp",!0),defineSymbol(math,main,rel,"\u2225","\\parallel"),defineSymbol(math,main,rel,"\u22C8","\\bowtie",!0),defineSymbol(math,main,rel,"\u2323","\\smile",!0),defineSymbol(math,main,rel,"\u2291","\\sqsubseteq",!0),defineSymbol(math,main,rel,"\u2292","\\sqsupseteq",!0),defineSymbol(math,main,rel,"\u2250","\\doteq",!0),defineSymbol(math,main,rel,"\u2322","\\frown",!0),defineSymbol(math,main,rel,"\u220B","\\ni",!0),defineSymbol(math,main,rel,"\u221D","\\propto",!0),defineSymbol(math,main,rel,"\u22A2","\\vdash",!0),defineSymbol(math,main,rel,"\u22A3","\\dashv",!0),defineSymbol(math,main,rel,"\u220B","\\owns"),defineSymbol(math,main,punct,".","\\ldotp"),defineSymbol(math,main,punct,"\u22C5","\\cdotp"),defineSymbol(math,main,textord,"#","\\#"),defineSymbol(text,main,textord,"#","\\#"),defineSymbol(math,main,textord,"&","\\&"),defineSymbol(text,main,textord,"&","\\&"),defineSymbol(math,main,textord,"\u2135","\\aleph",!0),defineSymbol(math,main,textord,"\u2200","\\forall",!0),defineSymbol(math,main,textord,"\u210F","\\hbar",!0),defineSymbol(math,main,textord,"\u2203","\\exists",!0),defineSymbol(math,main,textord,"\u2207","\\nabla",!0),defineSymbol(math,main,textord,"\u266D","\\flat",!0),defineSymbol(math,main,textord,"\u2113","\\ell",!0),defineSymbol(math,main,textord,"\u266E","\\natural",!0),defineSymbol(math,main,textord,"\u2663","\\clubsuit",!0),defineSymbol(math,main,textord,"\u2118","\\wp",!0),defineSymbol(math,main,textord,"\u266F","\\sharp",!0),defineSymbol(math,main,textord,"\u2662","\\diamondsuit",!0),defineSymbol(math,main,textord,"\u211C","\\Re",!0),defineSymbol(math,main,textord,"\u2661","\\heartsuit",!0),defineSymbol(math,main,textord,"\u2111","\\Im",!0),defineSymbol(math,main,textord,"\u2660","\\spadesuit",!0),defineSymbol(math,main,textord,"\xA7","\\S",!0),defineSymbol(text,main,textord,"\xA7","\\S"),defineSymbol(math,main,textord,"\xB6","\\P",!0),defineSymbol(text,main,textord,"\xB6","\\P"),defineSymbol(math,main,textord,"\u2020","\\dag"),defineSymbol(text,main,textord,"\u2020","\\dag"),defineSymbol(text,main,textord,"\u2020","\\textdagger"),defineSymbol(math,main,textord,"\u2021","\\ddag"),defineSymbol(text,main,textord,"\u2021","\\ddag"),defineSymbol(text,main,textord,"\u2021","\\textdaggerdbl"),defineSymbol(math,main,close,"\u23B1","\\rmoustache",!0),defineSymbol(math,main,open,"\u23B0","\\lmoustache",!0),defineSymbol(math,main,close,"\u27EF","\\rgroup",!0),defineSymbol(math,main,open,"\u27EE","\\lgroup",!0),defineSymbol(math,main,bin,"\u2213","\\mp",!0),defineSymbol(math,main,bin,"\u2296","\\ominus",!0),defineSymbol(math,main,bin,"\u228E","\\uplus",!0),defineSymbol(math,main,bin,"\u2293","\\sqcap",!0),defineSymbol(math,main,bin,"\u2217","\\ast"),defineSymbol(math,main,bin,"\u2294","\\sqcup",!0),defineSymbol(math,main,bin,"\u25EF","\\bigcirc",!0),defineSymbol(math,main,bin,"\u2219","\\bullet",!0),defineSymbol(math,main,bin,"\u2021","\\ddagger"),defineSymbol(math,main,bin,"\u2240","\\wr",!0),defineSymbol(math,main,bin,"\u2A3F","\\amalg"),defineSymbol(math,main,bin,"&","\\And"),defineSymbol(math,main,rel,"\u27F5","\\longleftarrow",!0),defineSymbol(math,main,rel,"\u21D0","\\Leftarrow",!0),defineSymbol(math,main,rel,"\u27F8","\\Longleftarrow",!0),defineSymbol(math,main,rel,"\u27F6","\\longrightarrow",!0),defineSymbol(math,main,rel,"\u21D2","\\Rightarrow",!0),defineSymbol(math,main,rel,"\u27F9","\\Longrightarrow",!0),defineSymbol(math,main,rel,"\u2194","\\leftrightarrow",!0),defineSymbol(math,main,rel,"\u27F7","\\longleftrightarrow",!0),defineSymbol(math,main,rel,"\u21D4","\\Leftrightarrow",!0),defineSymbol(math,main,rel,"\u27FA","\\Longleftrightarrow",!0),defineSymbol(math,main,rel,"\u21A6","\\mapsto",!0),defineSymbol(math,main,rel,"\u27FC","\\longmapsto",!0),defineSymbol(math,main,rel,"\u2197","\\nearrow",!0),defineSymbol(math,main,rel,"\u21A9","\\hookleftarrow",!0),defineSymbol(math,main,rel,"\u21AA","\\hookrightarrow",!0),defineSymbol(math,main,rel,"\u2198","\\searrow",!0),defineSymbol(math,main,rel,"\u21BC","\\leftharpoonup",!0),defineSymbol(math,main,rel,"\u21C0","\\rightharpoonup",!0),defineSymbol(math,main,rel,"\u2199","\\swarrow",!0),defineSymbol(math,main,rel,"\u21BD","\\leftharpoondown",!0),defineSymbol(math,main,rel,"\u21C1","\\rightharpoondown",!0),defineSymbol(math,main,rel,"\u2196","\\nwarrow",!0),defineSymbol(math,main,rel,"\u21CC","\\rightleftharpoons",!0),defineSymbol(math,ams,rel,"\u226E","\\nless",!0),defineSymbol(math,ams,rel,"\uE010","\\@nleqslant"),defineSymbol(math,ams,rel,"\uE011","\\@nleqq"),defineSymbol(math,ams,rel,"\u2A87","\\lneq",!0),defineSymbol(math,ams,rel,"\u2268","\\lneqq",!0),defineSymbol(math,ams,rel,"\uE00C","\\@lvertneqq"),defineSymbol(math,ams,rel,"\u22E6","\\lnsim",!0),defineSymbol(math,ams,rel,"\u2A89","\\lnapprox",!0),defineSymbol(math,ams,rel,"\u2280","\\nprec",!0),defineSymbol(math,ams,rel,"\u22E0","\\npreceq",!0),defineSymbol(math,ams,rel,"\u22E8","\\precnsim",!0),defineSymbol(math,ams,rel,"\u2AB9","\\precnapprox",!0),defineSymbol(math,ams,rel,"\u2241","\\nsim",!0),defineSymbol(math,ams,rel,"\uE006","\\@nshortmid"),defineSymbol(math,ams,rel,"\u2224","\\nmid",!0),defineSymbol(math,ams,rel,"\u22AC","\\nvdash",!0),defineSymbol(math,ams,rel,"\u22AD","\\nvDash",!0),defineSymbol(math,ams,rel,"\u22EA","\\ntriangleleft"),defineSymbol(math,ams,rel,"\u22EC","\\ntrianglelefteq",!0),defineSymbol(math,ams,rel,"\u228A","\\subsetneq",!0),defineSymbol(math,ams,rel,"\uE01A","\\@varsubsetneq"),defineSymbol(math,ams,rel,"\u2ACB","\\subsetneqq",!0),defineSymbol(math,ams,rel,"\uE017","\\@varsubsetneqq"),defineSymbol(math,ams,rel,"\u226F","\\ngtr",!0),defineSymbol(math,ams,rel,"\uE00F","\\@ngeqslant"),defineSymbol(math,ams,rel,"\uE00E","\\@ngeqq"),defineSymbol(math,ams,rel,"\u2A88","\\gneq",!0),defineSymbol(math,ams,rel,"\u2269","\\gneqq",!0),defineSymbol(math,ams,rel,"\uE00D","\\@gvertneqq"),defineSymbol(math,ams,rel,"\u22E7","\\gnsim",!0),defineSymbol(math,ams,rel,"\u2A8A","\\gnapprox",!0),defineSymbol(math,ams,rel,"\u2281","\\nsucc",!0),defineSymbol(math,ams,rel,"\u22E1","\\nsucceq",!0),defineSymbol(math,ams,rel,"\u22E9","\\succnsim",!0),defineSymbol(math,ams,rel,"\u2ABA","\\succnapprox",!0),defineSymbol(math,ams,rel,"\u2246","\\ncong",!0),defineSymbol(math,ams,rel,"\uE007","\\@nshortparallel"),defineSymbol(math,ams,rel,"\u2226","\\nparallel",!0),defineSymbol(math,ams,rel,"\u22AF","\\nVDash",!0),defineSymbol(math,ams,rel,"\u22EB","\\ntriangleright"),defineSymbol(math,ams,rel,"\u22ED","\\ntrianglerighteq",!0),defineSymbol(math,ams,rel,"\uE018","\\@nsupseteqq"),defineSymbol(math,ams,rel,"\u228B","\\supsetneq",!0),defineSymbol(math,ams,rel,"\uE01B","\\@varsupsetneq"),defineSymbol(math,ams,rel,"\u2ACC","\\supsetneqq",!0),defineSymbol(math,ams,rel,"\uE019","\\@varsupsetneqq"),defineSymbol(math,ams,rel,"\u22AE","\\nVdash",!0),defineSymbol(math,ams,rel,"\u2AB5","\\precneqq",!0),defineSymbol(math,ams,rel,"\u2AB6","\\succneqq",!0),defineSymbol(math,ams,rel,"\uE016","\\@nsubseteqq"),defineSymbol(math,ams,bin,"\u22B4","\\unlhd"),defineSymbol(math,ams,bin,"\u22B5","\\unrhd"),defineSymbol(math,ams,rel,"\u219A","\\nleftarrow",!0),defineSymbol(math,ams,rel,"\u219B","\\nrightarrow",!0),defineSymbol(math,ams,rel,"\u21CD","\\nLeftarrow",!0),defineSymbol(math,ams,rel,"\u21CF","\\nRightarrow",!0),defineSymbol(math,ams,rel,"\u21AE","\\nleftrightarrow",!0),defineSymbol(math,ams,rel,"\u21CE","\\nLeftrightarrow",!0),defineSymbol(math,ams,rel,"\u25B3","\\vartriangle"),defineSymbol(math,ams,textord,"\u210F","\\hslash"),defineSymbol(math,ams,textord,"\u25BD","\\triangledown"),defineSymbol(math,ams,textord,"\u25CA","\\lozenge"),defineSymbol(math,ams,textord,"\u24C8","\\circledS"),defineSymbol(math,ams,textord,"\xAE","\\circledR"),defineSymbol(text,ams,textord,"\xAE","\\circledR"),defineSymbol(math,ams,textord,"\u2221","\\measuredangle",!0),defineSymbol(math,ams,textord,"\u2204","\\nexists"),defineSymbol(math,ams,textord,"\u2127","\\mho"),defineSymbol(math,ams,textord,"\u2132","\\Finv",!0),defineSymbol(math,ams,textord,"\u2141","\\Game",!0),defineSymbol(math,ams,textord,"\u2035","\\backprime"),defineSymbol(math,ams,textord,"\u25B2","\\blacktriangle"),defineSymbol(math,ams,textord,"\u25BC","\\blacktriangledown"),defineSymbol(math,ams,textord,"\u25A0","\\blacksquare"),defineSymbol(math,ams,textord,"\u29EB","\\blacklozenge"),defineSymbol(math,ams,textord,"\u2605","\\bigstar"),defineSymbol(math,ams,textord,"\u2222","\\sphericalangle",!0),defineSymbol(math,ams,textord,"\u2201","\\complement",!0),defineSymbol(math,ams,textord,"\xF0","\\eth",!0),defineSymbol(text,main,textord,"\xF0","\xF0"),defineSymbol(math,ams,textord,"\u2571","\\diagup"),defineSymbol(math,ams,textord,"\u2572","\\diagdown"),defineSymbol(math,ams,textord,"\u25A1","\\square"),defineSymbol(math,ams,textord,"\u25A1","\\Box"),defineSymbol(math,ams,textord,"\u25CA","\\Diamond"),defineSymbol(math,ams,textord,"\xA5","\\yen",!0),defineSymbol(text,ams,textord,"\xA5","\\yen",!0),defineSymbol(math,ams,textord,"\u2713","\\checkmark",!0),defineSymbol(text,ams,textord,"\u2713","\\checkmark"),defineSymbol(math,ams,textord,"\u2136","\\beth",!0),defineSymbol(math,ams,textord,"\u2138","\\daleth",!0),defineSymbol(math,ams,textord,"\u2137","\\gimel",!0),defineSymbol(math,ams,textord,"\u03DD","\\digamma",!0),defineSymbol(math,ams,textord,"\u03F0","\\varkappa"),defineSymbol(math,ams,open,"\u250C","\\@ulcorner",!0),defineSymbol(math,ams,close,"\u2510","\\@urcorner",!0),defineSymbol(math,ams,open,"\u2514","\\@llcorner",!0),defineSymbol(math,ams,close,"\u2518","\\@lrcorner",!0),defineSymbol(math,ams,rel,"\u2266","\\leqq",!0),defineSymbol(math,ams,rel,"\u2A7D","\\leqslant",!0),defineSymbol(math,ams,rel,"\u2A95","\\eqslantless",!0),defineSymbol(math,ams,rel,"\u2272","\\lesssim",!0),defineSymbol(math,ams,rel,"\u2A85","\\lessapprox",!0),defineSymbol(math,ams,rel,"\u224A","\\approxeq",!0),defineSymbol(math,ams,bin,"\u22D6","\\lessdot"),defineSymbol(math,ams,rel,"\u22D8","\\lll",!0),defineSymbol(math,ams,rel,"\u2276","\\lessgtr",!0),defineSymbol(math,ams,rel,"\u22DA","\\lesseqgtr",!0),defineSymbol(math,ams,rel,"\u2A8B","\\lesseqqgtr",!0),defineSymbol(math,ams,rel,"\u2251","\\doteqdot"),defineSymbol(math,ams,rel,"\u2253","\\risingdotseq",!0),defineSymbol(math,ams,rel,"\u2252","\\fallingdotseq",!0),defineSymbol(math,ams,rel,"\u223D","\\backsim",!0),defineSymbol(math,ams,rel,"\u22CD","\\backsimeq",!0),defineSymbol(math,ams,rel,"\u2AC5","\\subseteqq",!0),defineSymbol(math,ams,rel,"\u22D0","\\Subset",!0),defineSymbol(math,ams,rel,"\u228F","\\sqsubset",!0),defineSymbol(math,ams,rel,"\u227C","\\preccurlyeq",!0),defineSymbol(math,ams,rel,"\u22DE","\\curlyeqprec",!0),defineSymbol(math,ams,rel,"\u227E","\\precsim",!0),defineSymbol(math,ams,rel,"\u2AB7","\\precapprox",!0),defineSymbol(math,ams,rel,"\u22B2","\\vartriangleleft"),defineSymbol(math,ams,rel,"\u22B4","\\trianglelefteq"),defineSymbol(math,ams,rel,"\u22A8","\\vDash",!0),defineSymbol(math,ams,rel,"\u22AA","\\Vvdash",!0),defineSymbol(math,ams,rel,"\u2323","\\smallsmile"),defineSymbol(math,ams,rel,"\u2322","\\smallfrown"),defineSymbol(math,ams,rel,"\u224F","\\bumpeq",!0),defineSymbol(math,ams,rel,"\u224E","\\Bumpeq",!0),defineSymbol(math,ams,rel,"\u2267","\\geqq",!0),defineSymbol(math,ams,rel,"\u2A7E","\\geqslant",!0),defineSymbol(math,ams,rel,"\u2A96","\\eqslantgtr",!0),defineSymbol(math,ams,rel,"\u2273","\\gtrsim",!0),defineSymbol(math,ams,rel,"\u2A86","\\gtrapprox",!0),defineSymbol(math,ams,bin,"\u22D7","\\gtrdot"),defineSymbol(math,ams,rel,"\u22D9","\\ggg",!0),defineSymbol(math,ams,rel,"\u2277","\\gtrless",!0),defineSymbol(math,ams,rel,"\u22DB","\\gtreqless",!0),defineSymbol(math,ams,rel,"\u2A8C","\\gtreqqless",!0),defineSymbol(math,ams,rel,"\u2256","\\eqcirc",!0),defineSymbol(math,ams,rel,"\u2257","\\circeq",!0),defineSymbol(math,ams,rel,"\u225C","\\triangleq",!0),defineSymbol(math,ams,rel,"\u223C","\\thicksim"),defineSymbol(math,ams,rel,"\u2248","\\thickapprox"),defineSymbol(math,ams,rel,"\u2AC6","\\supseteqq",!0),defineSymbol(math,ams,rel,"\u22D1","\\Supset",!0),defineSymbol(math,ams,rel,"\u2290","\\sqsupset",!0),defineSymbol(math,ams,rel,"\u227D","\\succcurlyeq",!0),defineSymbol(math,ams,rel,"\u22DF","\\curlyeqsucc",!0),defineSymbol(math,ams,rel,"\u227F","\\succsim",!0),defineSymbol(math,ams,rel,"\u2AB8","\\succapprox",!0),defineSymbol(math,ams,rel,"\u22B3","\\vartriangleright"),defineSymbol(math,ams,rel,"\u22B5","\\trianglerighteq"),defineSymbol(math,ams,rel,"\u22A9","\\Vdash",!0),defineSymbol(math,ams,rel,"\u2223","\\shortmid"),defineSymbol(math,ams,rel,"\u2225","\\shortparallel"),defineSymbol(math,ams,rel,"\u226C","\\between",!0),defineSymbol(math,ams,rel,"\u22D4","\\pitchfork",!0),defineSymbol(math,ams,rel,"\u221D","\\varpropto"),defineSymbol(math,ams,rel,"\u25C0","\\blacktriangleleft"),defineSymbol(math,ams,rel,"\u2234","\\therefore",!0),defineSymbol(math,ams,rel,"\u220D","\\backepsilon"),defineSymbol(math,ams,rel,"\u25B6","\\blacktriangleright"),defineSymbol(math,ams,rel,"\u2235","\\because",!0),defineSymbol(math,ams,rel,"\u22D8","\\llless"),defineSymbol(math,ams,rel,"\u22D9","\\gggtr"),defineSymbol(math,ams,bin,"\u22B2","\\lhd"),defineSymbol(math,ams,bin,"\u22B3","\\rhd"),defineSymbol(math,ams,rel,"\u2242","\\eqsim",!0),defineSymbol(math,main,rel,"\u22C8","\\Join"),defineSymbol(math,ams,rel,"\u2251","\\Doteq",!0),defineSymbol(math,ams,bin,"\u2214","\\dotplus",!0),defineSymbol(math,ams,bin,"\u2216","\\smallsetminus"),defineSymbol(math,ams,bin,"\u22D2","\\Cap",!0),defineSymbol(math,ams,bin,"\u22D3","\\Cup",!0),defineSymbol(math,ams,bin,"\u2A5E","\\doublebarwedge",!0),defineSymbol(math,ams,bin,"\u229F","\\boxminus",!0),defineSymbol(math,ams,bin,"\u229E","\\boxplus",!0),defineSymbol(math,ams,bin,"\u22C7","\\divideontimes",!0),defineSymbol(math,ams,bin,"\u22C9","\\ltimes",!0),defineSymbol(math,ams,bin,"\u22CA","\\rtimes",!0),defineSymbol(math,ams,bin,"\u22CB","\\leftthreetimes",!0),defineSymbol(math,ams,bin,"\u22CC","\\rightthreetimes",!0),defineSymbol(math,ams,bin,"\u22CF","\\curlywedge",!0),defineSymbol(math,ams,bin,"\u22CE","\\curlyvee",!0),defineSymbol(math,ams,bin,"\u229D","\\circleddash",!0),defineSymbol(math,ams,bin,"\u229B","\\circledast",!0),defineSymbol(math,ams,bin,"\u22C5","\\centerdot"),defineSymbol(math,ams,bin,"\u22BA","\\intercal",!0),defineSymbol(math,ams,bin,"\u22D2","\\doublecap"),defineSymbol(math,ams,bin,"\u22D3","\\doublecup"),defineSymbol(math,ams,bin,"\u22A0","\\boxtimes",!0),defineSymbol(math,ams,rel,"\u21E2","\\dashrightarrow",!0),defineSymbol(math,ams,rel,"\u21E0","\\dashleftarrow",!0),defineSymbol(math,ams,rel,"\u21C7","\\leftleftarrows",!0),defineSymbol(math,ams,rel,"\u21C6","\\leftrightarrows",!0),defineSymbol(math,ams,rel,"\u21DA","\\Lleftarrow",!0),defineSymbol(math,ams,rel,"\u219E","\\twoheadleftarrow",!0),defineSymbol(math,ams,rel,"\u21A2","\\leftarrowtail",!0),defineSymbol(math,ams,rel,"\u21AB","\\looparrowleft",!0),defineSymbol(math,ams,rel,"\u21CB","\\leftrightharpoons",!0),defineSymbol(math,ams,rel,"\u21B6","\\curvearrowleft",!0),defineSymbol(math,ams,rel,"\u21BA","\\circlearrowleft",!0),defineSymbol(math,ams,rel,"\u21B0","\\Lsh",!0),defineSymbol(math,ams,rel,"\u21C8","\\upuparrows",!0),defineSymbol(math,ams,rel,"\u21BF","\\upharpoonleft",!0),defineSymbol(math,ams,rel,"\u21C3","\\downharpoonleft",!0),defineSymbol(math,main,rel,"\u22B6","\\origof",!0),defineSymbol(math,main,rel,"\u22B7","\\imageof",!0),defineSymbol(math,ams,rel,"\u22B8","\\multimap",!0),defineSymbol(math,ams,rel,"\u21AD","\\leftrightsquigarrow",!0),defineSymbol(math,ams,rel,"\u21C9","\\rightrightarrows",!0),defineSymbol(math,ams,rel,"\u21C4","\\rightleftarrows",!0),defineSymbol(math,ams,rel,"\u21A0","\\twoheadrightarrow",!0),defineSymbol(math,ams,rel,"\u21A3","\\rightarrowtail",!0),defineSymbol(math,ams,rel,"\u21AC","\\looparrowright",!0),defineSymbol(math,ams,rel,"\u21B7","\\curvearrowright",!0),defineSymbol(math,ams,rel,"\u21BB","\\circlearrowright",!0),defineSymbol(math,ams,rel,"\u21B1","\\Rsh",!0),defineSymbol(math,ams,rel,"\u21CA","\\downdownarrows",!0),defineSymbol(math,ams,rel,"\u21BE","\\upharpoonright",!0),defineSymbol(math,ams,rel,"\u21C2","\\downharpoonright",!0),defineSymbol(math,ams,rel,"\u21DD","\\rightsquigarrow",!0),defineSymbol(math,ams,rel,"\u21DD","\\leadsto"),defineSymbol(math,ams,rel,"\u21DB","\\Rrightarrow",!0),defineSymbol(math,ams,rel,"\u21BE","\\restriction"),defineSymbol(math,main,textord,"\u2018","`"),defineSymbol(math,main,textord,"$","\\$"),defineSymbol(text,main,textord,"$","\\$"),defineSymbol(text,main,textord,"$","\\textdollar"),defineSymbol(math,main,textord,"%","\\%"),defineSymbol(text,main,textord,"%","\\%"),defineSymbol(math,main,textord,"_","\\_"),defineSymbol(text,main,textord,"_","\\_"),defineSymbol(text,main,textord,"_","\\textunderscore"),defineSymbol(math,main,textord,"\u2220","\\angle",!0),defineSymbol(math,main,textord,"\u221E","\\infty",!0),defineSymbol(math,main,textord,"\u2032","\\prime"),defineSymbol(math,main,textord,"\u25B3","\\triangle"),defineSymbol(math,main,textord,"\u0393","\\Gamma",!0),defineSymbol(math,main,textord,"\u0394","\\Delta",!0),defineSymbol(math,main,textord,"\u0398","\\Theta",!0),defineSymbol(math,main,textord,"\u039B","\\Lambda",!0),defineSymbol(math,main,textord,"\u039E","\\Xi",!0),defineSymbol(math,main,textord,"\u03A0","\\Pi",!0),defineSymbol(math,main,textord,"\u03A3","\\Sigma",!0),defineSymbol(math,main,textord,"\u03A5","\\Upsilon",!0),defineSymbol(math,main,textord,"\u03A6","\\Phi",!0),defineSymbol(math,main,textord,"\u03A8","\\Psi",!0),defineSymbol(math,main,textord,"\u03A9","\\Omega",!0),defineSymbol(math,main,textord,"A","\u0391"),defineSymbol(math,main,textord,"B","\u0392"),defineSymbol(math,main,textord,"E","\u0395"),defineSymbol(math,main,textord,"Z","\u0396"),defineSymbol(math,main,textord,"H","\u0397"),defineSymbol(math,main,textord,"I","\u0399"),defineSymbol(math,main,textord,"K","\u039A"),defineSymbol(math,main,textord,"M","\u039C"),defineSymbol(math,main,textord,"N","\u039D"),defineSymbol(math,main,textord,"O","\u039F"),defineSymbol(math,main,textord,"P","\u03A1"),defineSymbol(math,main,textord,"T","\u03A4"),defineSymbol(math,main,textord,"X","\u03A7"),defineSymbol(math,main,textord,"\xAC","\\neg",!0),defineSymbol(math,main,textord,"\xAC","\\lnot"),defineSymbol(math,main,textord,"\u22A4","\\top"),defineSymbol(math,main,textord,"\u22A5","\\bot"),defineSymbol(math,main,textord,"\u2205","\\emptyset"),defineSymbol(math,ams,textord,"\u2205","\\varnothing"),defineSymbol(math,main,mathord,"\u03B1","\\alpha",!0),defineSymbol(math,main,mathord,"\u03B2","\\beta",!0),defineSymbol(math,main,mathord,"\u03B3","\\gamma",!0),defineSymbol(math,main,mathord,"\u03B4","\\delta",!0),defineSymbol(math,main,mathord,"\u03F5","\\epsilon",!0),defineSymbol(math,main,mathord,"\u03B6","\\zeta",!0),defineSymbol(math,main,mathord,"\u03B7","\\eta",!0),defineSymbol(math,main,mathord,"\u03B8","\\theta",!0),defineSymbol(math,main,mathord,"\u03B9","\\iota",!0),defineSymbol(math,main,mathord,"\u03BA","\\kappa",!0),defineSymbol(math,main,mathord,"\u03BB","\\lambda",!0),defineSymbol(math,main,mathord,"\u03BC","\\mu",!0),defineSymbol(math,main,mathord,"\u03BD","\\nu",!0),defineSymbol(math,main,mathord,"\u03BE","\\xi",!0),defineSymbol(math,main,mathord,"\u03BF","\\omicron",!0),defineSymbol(math,main,mathord,"\u03C0","\\pi",!0),defineSymbol(math,main,mathord,"\u03C1","\\rho",!0),defineSymbol(math,main,mathord,"\u03C3","\\sigma",!0),defineSymbol(math,main,mathord,"\u03C4","\\tau",!0),defineSymbol(math,main,mathord,"\u03C5","\\upsilon",!0),defineSymbol(math,main,mathord,"\u03D5","\\phi",!0),defineSymbol(math,main,mathord,"\u03C7","\\chi",!0),defineSymbol(math,main,mathord,"\u03C8","\\psi",!0),defineSymbol(math,main,mathord,"\u03C9","\\omega",!0),defineSymbol(math,main,mathord,"\u03B5","\\varepsilon",!0),defineSymbol(math,main,mathord,"\u03D1","\\vartheta",!0),defineSymbol(math,main,mathord,"\u03D6","\\varpi",!0),defineSymbol(math,main,mathord,"\u03F1","\\varrho",!0),defineSymbol(math,main,mathord,"\u03C2","\\varsigma",!0),defineSymbol(math,main,mathord,"\u03C6","\\varphi",!0),defineSymbol(math,main,bin,"\u2217","*",!0),defineSymbol(math,main,bin,"+","+"),defineSymbol(math,main,bin,"\u2212","-",!0),defineSymbol(math,main,bin,"\u22C5","\\cdot",!0),defineSymbol(math,main,bin,"\u2218","\\circ",!0),defineSymbol(math,main,bin,"\xF7","\\div",!0),defineSymbol(math,main,bin,"\xB1","\\pm",!0),defineSymbol(math,main,bin,"\xD7","\\times",!0),defineSymbol(math,main,bin,"\u2229","\\cap",!0),defineSymbol(math,main,bin,"\u222A","\\cup",!0),defineSymbol(math,main,bin,"\u2216","\\setminus",!0),defineSymbol(math,main,bin,"\u2227","\\land"),defineSymbol(math,main,bin,"\u2228","\\lor"),defineSymbol(math,main,bin,"\u2227","\\wedge",!0),defineSymbol(math,main,bin,"\u2228","\\vee",!0),defineSymbol(math,main,textord,"\u221A","\\surd"),defineSymbol(math,main,open,"\u27E8","\\langle",!0),defineSymbol(math,main,open,"\u2223","\\lvert"),defineSymbol(math,main,open,"\u2225","\\lVert"),defineSymbol(math,main,close,"?","?"),defineSymbol(math,main,close,"!","!"),defineSymbol(math,main,close,"\u27E9","\\rangle",!0),defineSymbol(math,main,close,"\u2223","\\rvert"),defineSymbol(math,main,close,"\u2225","\\rVert"),defineSymbol(math,main,rel,"=","="),defineSymbol(math,main,rel,":",":"),defineSymbol(math,main,rel,"\u2248","\\approx",!0),defineSymbol(math,main,rel,"\u2245","\\cong",!0),defineSymbol(math,main,rel,"\u2265","\\ge"),defineSymbol(math,main,rel,"\u2265","\\geq",!0),defineSymbol(math,main,rel,"\u2190","\\gets"),defineSymbol(math,main,rel,">","\\gt",!0),defineSymbol(math,main,rel,"\u2208","\\in",!0),defineSymbol(math,main,rel,"\uE020","\\@not"),defineSymbol(math,main,rel,"\u2282","\\subset",!0),defineSymbol(math,main,rel,"\u2283","\\supset",!0),defineSymbol(math,main,rel,"\u2286","\\subseteq",!0),defineSymbol(math,main,rel,"\u2287","\\supseteq",!0),defineSymbol(math,ams,rel,"\u2288","\\nsubseteq",!0),defineSymbol(math,ams,rel,"\u2289","\\nsupseteq",!0),defineSymbol(math,main,rel,"\u22A8","\\models"),defineSymbol(math,main,rel,"\u2190","\\leftarrow",!0),defineSymbol(math,main,rel,"\u2264","\\le"),defineSymbol(math,main,rel,"\u2264","\\leq",!0),defineSymbol(math,main,rel,"<","\\lt",!0),defineSymbol(math,main,rel,"\u2192","\\rightarrow",!0),defineSymbol(math,main,rel,"\u2192","\\to"),defineSymbol(math,ams,rel,"\u2271","\\ngeq",!0),defineSymbol(math,ams,rel,"\u2270","\\nleq",!0),defineSymbol(math,main,spacing,"\xA0","\\ "),defineSymbol(math,main,spacing,"\xA0","\\space"),defineSymbol(math,main,spacing,"\xA0","\\nobreakspace"),defineSymbol(text,main,spacing,"\xA0","\\ "),defineSymbol(text,main,spacing,"\xA0"," "),defineSymbol(text,main,spacing,"\xA0","\\space"),defineSymbol(text,main,spacing,"\xA0","\\nobreakspace"),defineSymbol(math,main,spacing,null,"\\nobreak"),defineSymbol(math,main,spacing,null,"\\allowbreak"),defineSymbol(math,main,punct,",",","),defineSymbol(math,main,punct,";",";"),defineSymbol(math,ams,bin,"\u22BC","\\barwedge",!0),defineSymbol(math,ams,bin,"\u22BB","\\veebar",!0),defineSymbol(math,main,bin,"\u2299","\\odot",!0),defineSymbol(math,main,bin,"\u2295","\\oplus",!0),defineSymbol(math,main,bin,"\u2297","\\otimes",!0),defineSymbol(math,main,textord,"\u2202","\\partial",!0),defineSymbol(math,main,bin,"\u2298","\\oslash",!0),defineSymbol(math,ams,bin,"\u229A","\\circledcirc",!0),defineSymbol(math,ams,bin,"\u22A1","\\boxdot",!0),defineSymbol(math,main,bin,"\u25B3","\\bigtriangleup"),defineSymbol(math,main,bin,"\u25BD","\\bigtriangledown"),defineSymbol(math,main,bin,"\u2020","\\dagger"),defineSymbol(math,main,bin,"\u22C4","\\diamond"),defineSymbol(math,main,bin,"\u22C6","\\star"),defineSymbol(math,main,bin,"\u25C3","\\triangleleft"),defineSymbol(math,main,bin,"\u25B9","\\triangleright"),defineSymbol(math,main,open,"{","\\{"),defineSymbol(text,main,textord,"{","\\{"),defineSymbol(text,main,textord,"{","\\textbraceleft"),defineSymbol(math,main,close,"}","\\}"),defineSymbol(text,main,textord,"}","\\}"),defineSymbol(text,main,textord,"}","\\textbraceright"),defineSymbol(math,main,open,"{","\\lbrace"),defineSymbol(math,main,close,"}","\\rbrace"),defineSymbol(math,main,open,"[","\\lbrack",!0),defineSymbol(text,main,textord,"[","\\lbrack",!0),defineSymbol(math,main,close,"]","\\rbrack",!0),defineSymbol(text,main,textord,"]","\\rbrack",!0),defineSymbol(math,main,open,"(","\\lparen",!0),defineSymbol(math,main,close,")","\\rparen",!0),defineSymbol(text,main,textord,"<","\\textless",!0),defineSymbol(text,main,textord,">","\\textgreater",!0),defineSymbol(math,main,open,"\u230A","\\lfloor",!0),defineSymbol(math,main,close,"\u230B","\\rfloor",!0),defineSymbol(math,main,open,"\u2308","\\lceil",!0),defineSymbol(math,main,close,"\u2309","\\rceil",!0),defineSymbol(math,main,textord,"\\","\\backslash"),defineSymbol(math,main,textord,"\u2223","|"),defineSymbol(math,main,textord,"\u2223","\\vert"),defineSymbol(text,main,textord,"|","\\textbar",!0),defineSymbol(math,main,textord,"\u2225","\\|"),defineSymbol(math,main,textord,"\u2225","\\Vert"),defineSymbol(text,main,textord,"\u2225","\\textbardbl"),defineSymbol(text,main,textord,"~","\\textasciitilde"),defineSymbol(text,main,textord,"\\","\\textbackslash"),defineSymbol(text,main,textord,"^","\\textasciicircum"),defineSymbol(math,main,rel,"\u2191","\\uparrow",!0),defineSymbol(math,main,rel,"\u21D1","\\Uparrow",!0),defineSymbol(math,main,rel,"\u2193","\\downarrow",!0),defineSymbol(math,main,rel,"\u21D3","\\Downarrow",!0),defineSymbol(math,main,rel,"\u2195","\\updownarrow",!0),defineSymbol(math,main,rel,"\u21D5","\\Updownarrow",!0),defineSymbol(math,main,op,"\u2210","\\coprod"),defineSymbol(math,main,op,"\u22C1","\\bigvee"),defineSymbol(math,main,op,"\u22C0","\\bigwedge"),defineSymbol(math,main,op,"\u2A04","\\biguplus"),defineSymbol(math,main,op,"\u22C2","\\bigcap"),defineSymbol(math,main,op,"\u22C3","\\bigcup"),defineSymbol(math,main,op,"\u222B","\\int"),defineSymbol(math,main,op,"\u222B","\\intop"),defineSymbol(math,main,op,"\u222C","\\iint"),defineSymbol(math,main,op,"\u222D","\\iiint"),defineSymbol(math,main,op,"\u220F","\\prod"),defineSymbol(math,main,op,"\u2211","\\sum"),defineSymbol(math,main,op,"\u2A02","\\bigotimes"),defineSymbol(math,main,op,"\u2A01","\\bigoplus"),defineSymbol(math,main,op,"\u2A00","\\bigodot"),defineSymbol(math,main,op,"\u222E","\\oint"),defineSymbol(math,main,op,"\u222F","\\oiint"),defineSymbol(math,main,op,"\u2230","\\oiiint"),defineSymbol(math,main,op,"\u2A06","\\bigsqcup"),defineSymbol(math,main,op,"\u222B","\\smallint"),defineSymbol(text,main,inner,"\u2026","\\textellipsis"),defineSymbol(math,main,inner,"\u2026","\\mathellipsis"),defineSymbol(text,main,inner,"\u2026","\\ldots",!0),defineSymbol(math,main,inner,"\u2026","\\ldots",!0),defineSymbol(math,main,inner,"\u22EF","\\@cdots",!0),defineSymbol(math,main,inner,"\u22F1","\\ddots",!0),defineSymbol(math,main,textord,"\u22EE","\\varvdots"),defineSymbol(text,main,textord,"\u22EE","\\varvdots"),defineSymbol(math,main,accent,"\u02CA","\\acute"),defineSymbol(math,main,accent,"\u02CB","\\grave"),defineSymbol(math,main,accent,"\xA8","\\ddot"),defineSymbol(math,main,accent,"~","\\tilde"),defineSymbol(math,main,accent,"\u02C9","\\bar"),defineSymbol(math,main,accent,"\u02D8","\\breve"),defineSymbol(math,main,accent,"\u02C7","\\check"),defineSymbol(math,main,accent,"^","\\hat"),defineSymbol(math,main,accent,"\u20D7","\\vec"),defineSymbol(math,main,accent,"\u02D9","\\dot"),defineSymbol(math,main,accent,"\u02DA","\\mathring"),defineSymbol(math,main,mathord,"\uE131","\\@imath"),defineSymbol(math,main,mathord,"\uE237","\\@jmath"),defineSymbol(math,main,textord,"\u0131","\u0131"),defineSymbol(math,main,textord,"\u0237","\u0237"),defineSymbol(text,main,textord,"\u0131","\\i",!0),defineSymbol(text,main,textord,"\u0237","\\j",!0),defineSymbol(text,main,textord,"\xDF","\\ss",!0),defineSymbol(text,main,textord,"\xE6","\\ae",!0),defineSymbol(text,main,textord,"\u0153","\\oe",!0),defineSymbol(text,main,textord,"\xF8","\\o",!0),defineSymbol(text,main,textord,"\xC6","\\AE",!0),defineSymbol(text,main,textord,"\u0152","\\OE",!0),defineSymbol(text,main,textord,"\xD8","\\O",!0),defineSymbol(text,main,accent,"\u02CA","\\'"),defineSymbol(text,main,accent,"\u02CB","\\`"),defineSymbol(text,main,accent,"\u02C6","\\^"),defineSymbol(text,main,accent,"\u02DC","\\~"),defineSymbol(text,main,accent,"\u02C9","\\="),defineSymbol(text,main,accent,"\u02D8","\\u"),defineSymbol(text,main,accent,"\u02D9","\\."),defineSymbol(text,main,accent,"\xB8","\\c"),defineSymbol(text,main,accent,"\u02DA","\\r"),defineSymbol(text,main,accent,"\u02C7","\\v"),defineSymbol(text,main,accent,"\xA8",'\\"'),defineSymbol(text,main,accent,"\u02DD","\\H"),defineSymbol(text,main,accent,"\u25EF","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"\u2013","--",!0),defineSymbol(text,main,textord,"\u2013","\\textendash"),defineSymbol(text,main,textord,"\u2014","---",!0),defineSymbol(text,main,textord,"\u2014","\\textemdash"),defineSymbol(text,main,textord,"\u2018","`",!0),defineSymbol(text,main,textord,"\u2018","\\textquoteleft"),defineSymbol(text,main,textord,"\u2019","'",!0),defineSymbol(text,main,textord,"\u2019","\\textquoteright"),defineSymbol(text,main,textord,"\u201C","``",!0),defineSymbol(text,main,textord,"\u201C","\\textquotedblleft"),defineSymbol(text,main,textord,"\u201D","''",!0),defineSymbol(text,main,textord,"\u201D","\\textquotedblright"),defineSymbol(math,main,textord,"\xB0","\\degree",!0),defineSymbol(text,main,textord,"\xB0","\\degree"),defineSymbol(text,main,textord,"\xB0","\\textdegree",!0),defineSymbol(math,main,textord,"\xA3","\\pounds"),defineSymbol(math,main,textord,"\xA3","\\mathsterling",!0),defineSymbol(text,main,textord,"\xA3","\\pounds"),defineSymbol(text,main,textord,"\xA3","\\textsterling",!0),defineSymbol(math,ams,textord,"\u2720","\\maltese"),defineSymbol(text,ams,textord,"\u2720","\\maltese");for(var mathTextSymbols='0123456789/@."',i=0;i<mathTextSymbols.length;i++){var ch=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch,ch)}for(var textSymbols='0123456789!@*()-=+";:?/.,',_i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}for(var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",_i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","\u2102"),defineSymbol(text,ams,textord,"C","\u2102"),defineSymbol(math,ams,textord,"H","\u210D"),defineSymbol(text,ams,textord,"H","\u210D"),defineSymbol(math,ams,textord,"N","\u2115"),defineSymbol(text,ams,textord,"N","\u2115"),defineSymbol(math,ams,textord,"P","\u2119"),defineSymbol(text,ams,textord,"P","\u2119"),defineSymbol(math,ams,textord,"Q","\u211A"),defineSymbol(text,ams,textord,"Q","\u211A"),defineSymbol(math,ams,textord,"R","\u211D"),defineSymbol(text,ams,textord,"R","\u211D"),defineSymbol(math,ams,textord,"Z","\u2124"),defineSymbol(text,ams,textord,"Z","\u2124"),defineSymbol(math,main,mathord,"h","\u210E"),defineSymbol(text,main,mathord,"h","\u210E");for(var wideChar="",_i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="\u{1D55C}",defineSymbol(math,main,mathord,"k",wideChar),defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}for(var extraLatin="\xD0\xDE\xFE",_i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function o(e,n){var a=e.charCodeAt(0),s=e.charCodeAt(1),l=(a-55296)*1024+(s-56320)+65536,c=n==="math"?0:1;if(119808<=l&&l<120484){var d=Math.floor((l-119808)/26);return[wideLatinLetterData[d][2],wideLatinLetterData[d][c]]}else if(120782<=l&&l<=120831){var u=Math.floor((l-120782)/10);return[wideNumeralData[u][2],wideNumeralData[u][c]]}else{if(l===120485||l===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][c]];if(120486<l&&l<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function o(e,n,a){return symbols[a][e]&&symbols[a][e].replace&&(e=symbols[a][e].replace),{value:e,metrics:getCharacterMetrics(e,n,a)}},makeSymbol=function o(e,n,a,s,l){var c=lookupSymbol(e,n,a),d=c.metrics;e=c.value;var u;if(d){var f=d.italic;(a==="text"||s&&s.font==="mathit")&&(f=0),u=new SymbolNode(e,d.height,d.depth,f,d.skew,d.width,l)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+a+"'")),u=new SymbolNode(e,0,0,0,0,0,l);if(s){u.maxFontSize=s.sizeMultiplier,s.style.isTight()&&u.classes.push("mtight");var v=s.getColor();v&&(u.style.color=v)}return u},mathsym=function o(e,n,a,s){return s===void 0&&(s=[]),a.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",n).metrics?makeSymbol(e,"Main-Bold",n,a,s.concat(["mathbf"])):e==="\\"||symbols[n][e].font==="main"?makeSymbol(e,"Main-Regular",n,a,s):makeSymbol(e,"AMS-Regular",n,a,s.concat(["amsrm"]))},boldsymbol=function o(e,n,a,s,l){return l!=="textord"&&lookupSymbol(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function o(e,n,a){var s=e.mode,l=e.text,c=["mord"],d=s==="math"||s==="text"&&n.font,u=d?n.font:n.fontFamily,f="",v="";if(l.charCodeAt(0)===55349&&([f,v]=wideCharacterFont(l,s)),f.length>0)return makeSymbol(l,f,s,n,c.concat(v));if(u){var b,k;if(u==="boldsymbol"){var x=boldsymbol(l,s,n,c,a);b=x.fontName,k=[x.fontClass]}else d?(b=fontMap[u].fontName,k=[u]):(b=retrieveTextFontName(u,n.fontWeight,n.fontShape),k=[u,n.fontWeight,n.fontShape]);if(lookupSymbol(l,b,s).metrics)return makeSymbol(l,b,s,n,c.concat(k));if(ligatures.hasOwnProperty(l)&&b.slice(0,10)==="Typewriter"){for(var _=[],E=0;E<l.length;E++)_.push(makeSymbol(l[E],b,s,n,c.concat(k)));return makeFragment(_)}}if(a==="mathord")return makeSymbol(l,"Math-Italic",s,n,c.concat(["mathnormal"]));if(a==="textord"){var B=symbols[s][l]&&symbols[s][l].font;if(B==="ams"){var M=retrieveTextFontName("amsrm",n.fontWeight,n.fontShape);return makeSymbol(l,M,s,n,c.concat("amsrm",n.fontWeight,n.fontShape))}else if(B==="main"||!B){var I=retrieveTextFontName("textrm",n.fontWeight,n.fontShape);return makeSymbol(l,I,s,n,c.concat(n.fontWeight,n.fontShape))}else{var F=retrieveTextFontName(B,n.fontWeight,n.fontShape);return makeSymbol(l,F,s,n,c.concat(F,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+a+" in makeOrd")},canCombine=(o,e)=>{if(createClass(o.classes)!==createClass(e.classes)||o.skew!==e.skew||o.maxFontSize!==e.maxFontSize)return!1;if(o.classes.length===1){var n=o.classes[0];if(n==="mbin"||n==="mord")return!1}for(var a in o.style)if(o.style.hasOwnProperty(a)&&o.style[a]!==e.style[a])return!1;for(var s in e.style)if(e.style.hasOwnProperty(s)&&o.style[s]!==e.style[s])return!1;return!0},tryCombineChars=o=>{for(var e=0;e<o.length-1;e++){var n=o[e],a=o[e+1];n instanceof SymbolNode&&a instanceof SymbolNode&&canCombine(n,a)&&(n.text+=a.text,n.height=Math.max(n.height,a.height),n.depth=Math.max(n.depth,a.depth),n.italic=a.italic,o.splice(e+1,1),e--)}return o},sizeElementFromChildren=function o(e){for(var n=0,a=0,s=0,l=0;l<e.children.length;l++){var c=e.children[l];c.height>n&&(n=c.height),c.depth>a&&(a=c.depth),c.maxFontSize>s&&(s=c.maxFontSize)}e.height=n,e.depth=a,e.maxFontSize=s},makeSpan$2=function o(e,n,a,s){var l=new Span(e,n,a,s);return sizeElementFromChildren(l),l},makeSvgSpan=(o,e,n,a)=>new Span(o,e,n,a),makeLineSpan=function o(e,n,a){var s=makeSpan$2([e],[],n);return s.height=Math.max(a||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),s.style.borderBottomWidth=makeEm(s.height),s.maxFontSize=1,s},makeAnchor=function o(e,n,a,s){var l=new Anchor(e,n,a,s);return sizeElementFromChildren(l),l},makeFragment=function o(e){var n=new DocumentFragment$1(e);return sizeElementFromChildren(n),n},wrapFragment=function o(e,n){return e instanceof DocumentFragment$1?makeSpan$2([],[e],n):e},getVListChildrenAndDepth=function o(e){if(e.positionType==="individualShift"){for(var n=e.children,a=[n[0]],s=-n[0].shift-n[0].elem.depth,l=s,c=1;c<n.length;c++){var d=-n[c].shift-l-n[c].elem.depth,u=d-(n[c-1].elem.height+n[c-1].elem.depth);l=l+d,a.push({type:"kern",size:u}),a.push(n[c])}return{children:a,depth:s}}var f;if(e.positionType==="top"){for(var v=e.positionData,b=0;b<e.children.length;b++){var k=e.children[b];v-=k.type==="kern"?k.size:k.elem.height+k.elem.depth}f=v}else if(e.positionType==="bottom")f=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},makeVList=function o(e,n){for(var{children:a,depth:s}=getVListChildrenAndDepth(e),l=0,c=0;c<a.length;c++){var d=a[c];if(d.type==="elem"){var u=d.elem;l=Math.max(l,u.maxFontSize,u.height)}}l+=2;var f=makeSpan$2(["pstrut"],[]);f.style.height=makeEm(l);for(var v=[],b=s,k=s,x=s,_=0;_<a.length;_++){var E=a[_];if(E.type==="kern")x+=E.size;else{var B=E.elem,M=E.wrapperClasses||[],I=E.wrapperStyle||{},F=makeSpan$2(M,[f,B],void 0,I);F.style.top=makeEm(-l-x-B.depth),E.marginLeft&&(F.style.marginLeft=E.marginLeft),E.marginRight&&(F.style.marginRight=E.marginRight),v.push(F),x+=B.height+B.depth}b=Math.min(b,x),k=Math.max(k,x)}var V=makeSpan$2(["vlist"],v);V.style.height=makeEm(k);var L;if(b<0){var U=makeSpan$2([],[]),j=makeSpan$2(["vlist"],[U]);j.style.height=makeEm(-b);var oe=makeSpan$2(["vlist-s"],[new SymbolNode("\u200B")]);L=[makeSpan$2(["vlist-r"],[V,oe]),makeSpan$2(["vlist-r"],[j])]}else L=[makeSpan$2(["vlist-r"],[V])];var Y=makeSpan$2(["vlist-t"],L);return L.length===2&&Y.classes.push("vlist-t2"),Y.height=k,Y.depth=-b,Y},makeGlue=(o,e)=>{var n=makeSpan$2(["mspace"],[],e),a=calculateSize(o,e);return n.style.marginRight=makeEm(a),n},retrieveTextFontName=function o(e,n,a){var s="";switch(e){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=e}var l;return n==="textbf"&&a==="textit"?l="BoldItalic":n==="textbf"?l="Bold":n==="textit"?l="Italic":l="Regular",s+"-"+l},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function o(e,n){var[a,s,l]=svgData[e],c=new PathNode(a),d=new SvgNode([c],{width:makeEm(s),height:makeEm(l),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+1e3*l,preserveAspectRatio:"xMinYMin"}),u=makeSvgSpan(["overlay"],[d],n);return u.height=l,u.style.height=makeEm(l),u.style.width=makeEm(s),u},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(o){for(var{type:e,names:n,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=o,d={type:e,numArgs:a.numArgs,argTypes:a.argTypes,allowedInArgument:!!a.allowedInArgument,allowedInText:!!a.allowedInText,allowedInMath:a.allowedInMath===void 0?!0:a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,primitive:!!a.primitive,handler:s},u=0;u<n.length;++u)_functions[n[u]]=d;e&&(l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c))}function defineFunctionBuilders(o){var{type:e,htmlBuilder:n,mathmlBuilder:a}=o;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:a})}var normalizeArgument=function o(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function o(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function o(e,n,a,s){s===void 0&&(s=[null,null]);for(var l=[],c=0;c<e.length;c++){var d=buildGroup$1(e[c],n);if(d instanceof DocumentFragment$1){var u=d.children;l.push(...u)}else l.push(d)}if(buildCommon.tryCombineChars(l),!a)return l;var f=n;if(e.length===1){var v=e[0];v.type==="sizing"?f=n.havingSize(v.size):v.type==="styling"&&(f=n.havingStyle(styleMap$1[v.style]))}var b=makeSpan$1([s[0]||"leftmost"],[],n),k=makeSpan$1([s[1]||"rightmost"],[],n),x=a==="root";return traverseNonSpaceNodes(l,(_,E)=>{var B=E.classes[0],M=_.classes[0];B==="mbin"&&utils.contains(binRightCanceller,M)?E.classes[0]="mord":M==="mbin"&&utils.contains(binLeftCanceller,B)&&(_.classes[0]="mord")},{node:b},k,x),traverseNonSpaceNodes(l,(_,E)=>{var B=getTypeOfDomTree(E),M=getTypeOfDomTree(_),I=B&&M?_.hasClass("mtight")?tightSpacings[B][M]:spacings[B][M]:null;if(I)return buildCommon.makeGlue(I,f)},{node:b},k,x),l},traverseNonSpaceNodes=function o(e,n,a,s,l){s&&e.push(s);for(var c=0;c<e.length;c++){var d=e[c],u=checkPartialGroup(d);if(u){o(u.children,n,a,null,l);continue}var f=!d.hasClass("mspace");if(f){var v=n(d,a.node);v&&(a.insertAfter?a.insertAfter(v):(e.unshift(v),c++))}f?a.node=d:l&&d.hasClass("newline")&&(a.node=makeSpan$1(["leftmost"])),a.insertAfter=(b=>k=>{e.splice(b+1,0,k),c++})(c)}s&&e.pop()},checkPartialGroup=function o(e){return e instanceof DocumentFragment$1||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function o(e,n){var a=checkPartialGroup(e);if(a){var s=a.children;if(s.length){if(n==="right")return o(s[s.length-1],"right");if(n==="left")return o(s[0],"left")}}return e},getTypeOfDomTree=function o(e,n){return e?(n&&(e=getOutermostNode(e,n)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function o(e,n){var a=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(n.concat(a))},buildGroup$1=function o(e,n,a){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var s=_htmlGroupBuilders[e.type](e,n);if(a&&n.size!==a.size){s=makeSpan$1(n.sizingClasses(a),[s],n);var l=n.sizeMultiplier/a.sizeMultiplier;s.height*=l,s.depth*=l}return s}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(o,e){var n=makeSpan$1(["base"],o,e),a=makeSpan$1(["strut"]);return a.style.height=makeEm(n.height+n.depth),n.depth&&(a.style.verticalAlign=makeEm(-n.depth)),n.children.unshift(a),n}function buildHTML(o,e){var n=null;o.length===1&&o[0].type==="tag"&&(n=o[0].tag,o=o[0].body);var a=buildExpression$1(o,e,"root"),s;a.length===2&&a[1].hasClass("tag")&&(s=a.pop());for(var l=[],c=[],d=0;d<a.length;d++)if(c.push(a[d]),a[d].hasClass("mbin")||a[d].hasClass("mrel")||a[d].hasClass("allowbreak")){for(var u=!1;d<a.length-1&&a[d+1].hasClass("mspace")&&!a[d+1].hasClass("newline");)d++,c.push(a[d]),a[d].hasClass("nobreak")&&(u=!0);u||(l.push(buildHTMLUnbreakable(c,e)),c=[])}else a[d].hasClass("newline")&&(c.pop(),c.length>0&&(l.push(buildHTMLUnbreakable(c,e)),c=[]),l.push(a[d]));c.length>0&&l.push(buildHTMLUnbreakable(c,e));var f;n?(f=buildHTMLUnbreakable(buildExpression$1(n,e,!0)),f.classes=["tag"],l.push(f)):s&&l.push(s);var v=makeSpan$1(["katex-html"],l);if(v.setAttribute("aria-hidden","true"),f){var b=f.children[0];b.style.height=makeEm(v.height+v.depth),v.depth&&(b.style.verticalAlign=makeEm(-v.depth))}return v}function newDocumentFragment(o){return new DocumentFragment$1(o)}class MathNode{constructor(e,n,a){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=a||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=createClass(this.classes));for(var a=0;a<this.children.length;a++)if(this.children[a]instanceof TextNode&&this.children[a+1]instanceof TextNode){for(var s=this.children[a].toText()+this.children[++a].toText();this.children[a+1]instanceof TextNode;)s+=this.children[++a].toText();e.appendChild(new TextNode(s).toNode())}else e.appendChild(this.children[a].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=utils.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="\u200A":e>=.1666&&e<=.1667?this.character="\u2009":e>=.2222&&e<=.2223?this.character="\u2005":e>=.2777&&e<=.2778?this.character="\u2005\u200A":e>=-.05556&&e<=-.05555?this.character="\u200A\u2063":e>=-.1667&&e<=-.1666?this.character="\u2009\u2063":e>=-.2223&&e<=-.2222?this.character="\u205F\u2063":e>=-.2778&&e<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function o(e,n,a){return symbols[n][e]&&symbols[n][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&a&&(a.fontFamily&&a.fontFamily.slice(4,6)==="tt"||a.font&&a.font.slice(4,6)==="tt"))&&(e=symbols[n][e].replace),new mathMLTree.TextNode(e)},makeRow=function o(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function o(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var a=n.font;if(!a||a==="mathnormal")return null;var s=e.mode;if(a==="mathit")return"italic";if(a==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(a==="mathbf")return"bold";if(a==="mathbb")return"double-struck";if(a==="mathsfit")return"sans-serif-italic";if(a==="mathfrak")return"fraktur";if(a==="mathscr"||a==="mathcal")return"script";if(a==="mathsf")return"sans-serif";if(a==="mathtt")return"monospace";var l=e.text;if(utils.contains(["\\imath","\\jmath"],l))return null;symbols[s][l]&&symbols[s][l].replace&&(l=symbols[s][l].replace);var c=buildCommon.fontMap[a].fontName;return getCharacterMetrics(l,c,s)?buildCommon.fontMap[a].variant:null};function isNumberPunctuation(o){if(!o)return!1;if(o.type==="mi"&&o.children.length===1){var e=o.children[0];return e instanceof TextNode&&e.text==="."}else if(o.type==="mo"&&o.children.length===1&&o.getAttribute("separator")==="true"&&o.getAttribute("lspace")==="0em"&&o.getAttribute("rspace")==="0em"){var n=o.children[0];return n instanceof TextNode&&n.text===","}else return!1}var buildExpression=function o(e,n,a){if(e.length===1){var s=buildGroup(e[0],n);return a&&s instanceof MathNode&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var l=[],c,d=0;d<e.length;d++){var u=buildGroup(e[d],n);if(u instanceof MathNode&&c instanceof MathNode){if(u.type==="mtext"&&c.type==="mtext"&&u.getAttribute("mathvariant")===c.getAttribute("mathvariant")){c.children.push(...u.children);continue}else if(u.type==="mn"&&c.type==="mn"){c.children.push(...u.children);continue}else if(isNumberPunctuation(u)&&c.type==="mn"){c.children.push(...u.children);continue}else if(u.type==="mn"&&isNumberPunctuation(c))u.children=[...c.children,...u.children],l.pop();else if((u.type==="msup"||u.type==="msub")&&u.children.length>=1&&(c.type==="mn"||isNumberPunctuation(c))){var f=u.children[0];f instanceof MathNode&&f.type==="mn"&&(f.children=[...c.children,...f.children],l.pop())}else if(c.type==="mi"&&c.children.length===1){var v=c.children[0];if(v instanceof TextNode&&v.text==="\u0338"&&(u.type==="mo"||u.type==="mi"||u.type==="mn")){var b=u.children[0];b instanceof TextNode&&b.text.length>0&&(b.text=b.text.slice(0,1)+"\u0338"+b.text.slice(1),l.pop())}}}l.push(u),c=u}return l},buildExpressionRow=function o(e,n,a){return makeRow(buildExpression(e,n,a))},buildGroup=function o(e,n){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var a=_mathmlGroupBuilders[e.type](e,n);return a}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(o,e,n,a,s){var l=buildExpression(o,n),c;l.length===1&&l[0]instanceof MathNode&&utils.contains(["mrow","mtable"],l[0].type)?c=l[0]:c=new mathMLTree.MathNode("mrow",l);var d=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);d.setAttribute("encoding","application/x-tex");var u=new mathMLTree.MathNode("semantics",[c,d]),f=new mathMLTree.MathNode("math",[u]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&f.setAttribute("display","block");var v=s?"katex":"katex-mathml";return buildCommon.makeSpan([v],[f])}var optionsFromSettings=function o(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function o(e,n){if(n.displayMode){var a=["katex-display"];n.leqno&&a.push("leqno"),n.fleqn&&a.push("fleqn"),e=buildCommon.makeSpan(a,[e])}return e},buildTree=function o(e,n,a){var s=optionsFromSettings(a),l;if(a.output==="mathml")return buildMathML(e,n,s,a.displayMode,!0);if(a.output==="html"){var c=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[c])}else{var d=buildMathML(e,n,s,a.displayMode,!1),u=buildHTML(e,s);l=buildCommon.makeSpan(["katex"],[d,u])}return displayWrap(l,a)},buildHTMLTree=function o(e,n,a){var s=optionsFromSettings(a),l=buildHTML(e,s),c=buildCommon.makeSpan(["katex"],[l]);return displayWrap(c,a)},stretchyCodePoint={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},mathMLnode=function o(e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function o(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function o(e,n){function a(){var d=4e5,u=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],u)){var f=e,v=groupLength(f.base),b,k,x;if(v>5)u==="widehat"||u==="widecheck"?(b=420,d=2364,x=.42,k=u+"4"):(b=312,d=2340,x=.34,k="tilde4");else{var _=[1,1,2,2,3,3][v];u==="widehat"||u==="widecheck"?(d=[0,1062,2364,2364,2364][_],b=[0,239,300,360,420][_],x=[0,.24,.3,.3,.36,.42][_],k=u+_):(d=[0,600,1033,2339,2340][_],b=[0,260,286,306,312][_],x=[0,.26,.286,.3,.306,.34][_],k="tilde"+_)}var E=new PathNode(k),B=new SvgNode([E],{width:"100%",height:makeEm(x),viewBox:"0 0 "+d+" "+b,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[B],n),minWidth:0,height:x}}else{var M=[],I=katexImagesData[u],[F,V,L]=I,U=L/1e3,j=F.length,oe,Y;if(j===1){var K=I[3];oe=["hide-tail"],Y=[K]}else if(j===2)oe=["halfarrow-left","halfarrow-right"],Y=["xMinYMin","xMaxYMin"];else if(j===3)oe=["brace-left","brace-center","brace-right"],Y=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+j+" children.");for(var W=0;W<j;W++){var G=new PathNode(F[W]),ce=new SvgNode([G],{width:"400em",height:makeEm(U),viewBox:"0 0 "+d+" "+L,preserveAspectRatio:Y[W]+" slice"}),se=buildCommon.makeSvgSpan([oe[W]],[ce],n);if(j===1)return{span:se,minWidth:V,height:U};se.style.height=makeEm(U),M.push(se)}return{span:buildCommon.makeSpan(["stretchy"],M,n),minWidth:V,height:U}}}var{span:s,minWidth:l,height:c}=a();return s.height=c,s.style.height=makeEm(c),l>0&&(s.style.minWidth=makeEm(l)),s},encloseSpan=function o(e,n,a,s,l){var c,d=e.height+e.depth+a+s;if(/fbox|color|angl/.test(n)){if(c=buildCommon.makeSpan(["stretchy",n],[],l),n==="fbox"){var u=l.color&&l.getColor();u&&(c.style.borderColor=u)}}else{var f=[];/^[bx]cancel$/.test(n)&&f.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&f.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var v=new SvgNode(f,{width:"100%",height:makeEm(d)});c=buildCommon.makeSvgSpan([],[v],l)}return c.height=d,c.style.height=makeEm(d),c},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(o,e){if(!o||o.type!==e)throw new Error("Expected node of type "+e+", but got "+(o?"node of type "+o.type:String(o)));return o}function assertSymbolNodeType(o){var e=checkSymbolNodeType(o);if(!e)throw new Error("Expected node of symbol group type, but got "+(o?"node of type "+o.type:String(o)));return e}function checkSymbolNodeType(o){return o&&(o.type==="atom"||NON_ATOMS.hasOwnProperty(o.type))?o:null}var htmlBuilder$a=(o,e)=>{var n,a,s;o&&o.type==="supsub"?(a=assertNodeType(o.base,"accent"),n=a.base,o.base=n,s=assertSpan(buildGroup$1(o,e)),o.base=a):(a=assertNodeType(o,"accent"),n=a.base);var l=buildGroup$1(n,e.havingCrampedStyle()),c=a.isShifty&&utils.isCharacterBox(n),d=0;if(c){var u=utils.getBaseElem(n),f=buildGroup$1(u,e.havingCrampedStyle());d=assertSymbolDomNode(f).skew}var v=a.label==="\\c",b=v?l.height+l.depth:Math.min(l.height,e.fontMetrics().xHeight),k;if(a.isStretchy)k=stretchy.svgSpan(a,e),k=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"elem",elem:k,wrapperClasses:["svg-align"],wrapperStyle:d>0?{width:"calc(100% - "+makeEm(2*d)+")",marginLeft:makeEm(2*d)}:void 0}]},e);else{var x,_;a.label==="\\vec"?(x=buildCommon.staticSvg("vec",e),_=buildCommon.svgData.vec[1]):(x=buildCommon.makeOrd({mode:a.mode,text:a.label},e,"textord"),x=assertSymbolDomNode(x),x.italic=0,_=x.width,v&&(b+=x.depth)),k=buildCommon.makeSpan(["accent-body"],[x]);var E=a.label==="\\textcircled";E&&(k.classes.push("accent-full"),b=l.height);var B=d;E||(B-=_/2),k.style.left=makeEm(B),a.label==="\\textcircled"&&(k.style.top=".2em"),k=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:-b},{type:"elem",elem:k}]},e)}var M=buildCommon.makeSpan(["mord","accent"],[k],e);return s?(s.children[0]=M,s.height=Math.max(M.height,s.height),s.classes[0]="mord",s):M},mathmlBuilder$9=(o,e)=>{var n=o.isStretchy?stretchy.mathMLnode(o.label):new mathMLTree.MathNode("mo",[makeText(o.label,o.mode)]),a=new mathMLTree.MathNode("mover",[buildGroup(o.base,e),n]);return a.setAttribute("accent","true"),a},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(o=>"\\"+o).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(o,e)=>{var n=normalizeArgument(e[0]),a=!NON_STRETCHY_ACCENT_REGEX.test(o.funcName),s=!a||o.funcName==="\\widehat"||o.funcName==="\\widetilde"||o.funcName==="\\widecheck";return{type:"accent",mode:o.parser.mode,label:o.funcName,isStretchy:a,isShifty:s,base:n}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(o,e)=>{var n=e[0],a=o.parser.mode;return a==="math"&&(o.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+o.funcName+" works only in text mode"),a="text"),{type:"accent",mode:a,label:o.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"accentUnder",mode:n.mode,label:a,base:s}},htmlBuilder:(o,e)=>{var n=buildGroup$1(o.base,e),a=stretchy.svgSpan(o,e),s=o.label==="\\utilde"?.12:0,l=buildCommon.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord","accentunder"],[l],e)},mathmlBuilder:(o,e)=>{var n=stretchy.mathMLnode(o.label),a=new mathMLTree.MathNode("munder",[buildGroup(o.base,e),n]);return a.setAttribute("accentunder","true"),a}});var paddedNode=o=>{var e=new mathMLTree.MathNode("mpadded",o?[o]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(o,e,n){var{parser:a,funcName:s}=o;return{type:"xArrow",mode:a.mode,label:s,body:e[0],below:n[0]}},htmlBuilder(o,e){var n=e.style,a=e.havingStyle(n.sup()),s=buildCommon.wrapFragment(buildGroup$1(o.body,a,e),e),l=o.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(l+"-arrow-pad");var c;o.below&&(a=e.havingStyle(n.sub()),c=buildCommon.wrapFragment(buildGroup$1(o.below,a,e),e),c.classes.push(l+"-arrow-pad"));var d=stretchy.svgSpan(o,e),u=-e.fontMetrics().axisHeight+.5*d.height,f=-e.fontMetrics().axisHeight-.5*d.height-.111;(s.depth>.25||o.label==="\\xleftequilibrium")&&(f-=s.depth);var v;if(c){var b=-e.fontMetrics().axisHeight+c.height+.5*d.height+.111;v=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u},{type:"elem",elem:c,shift:b}]},e)}else v=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:f},{type:"elem",elem:d,shift:u}]},e);return v.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[v],e)},mathmlBuilder(o,e){var n=stretchy.mathMLnode(o.label);n.setAttribute("minsize",o.label.charAt(0)==="x"?"1.75em":"3.0em");var a;if(o.body){var s=paddedNode(buildGroup(o.body,e));if(o.below){var l=paddedNode(buildGroup(o.below,e));a=new mathMLTree.MathNode("munderover",[n,l,s])}else a=new mathMLTree.MathNode("mover",[n,s])}else if(o.below){var c=paddedNode(buildGroup(o.below,e));a=new mathMLTree.MathNode("munder",[n,c])}else a=paddedNode(),a=new mathMLTree.MathNode("mover",[n,a]);return a}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(o,e){var n=buildExpression$1(o.body,e,!0);return makeSpan([o.mclass],n,e)}function mathmlBuilder$8(o,e){var n,a=buildExpression(o.body,e);return o.mclass==="minner"?n=new mathMLTree.MathNode("mpadded",a):o.mclass==="mord"?o.isCharacterBox?(n=a[0],n.type="mi"):n=new mathMLTree.MathNode("mi",a):(o.isCharacterBox?(n=a[0],n.type="mo"):n=new mathMLTree.MathNode("mo",a),o.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):o.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):o.mclass==="mopen"||o.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):o.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+a.slice(5),body:ordargument(s),isCharacterBox:utils.isCharacterBox(s)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=o=>{var e=o.type==="ordgroup"&&o.body.length?o.body[0]:o;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(o,e){var{parser:n}=o;return{type:"mclass",mode:n.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}}),defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(o,e){var{parser:n,funcName:a}=o,s=e[1],l=e[0],c;a!=="\\stackrel"?c=binrelClass(s):c="mrel";var d={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:a!=="\\stackrel",body:ordargument(s)},u={type:"supsub",mode:l.mode,base:d,sup:a==="\\underset"?null:l,sub:a==="\\underset"?l:null};return{type:"mclass",mode:n.mode,mclass:c,body:[u],isCharacterBox:utils.isCharacterBox(u)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8}),defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"pmb",mode:n.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(o,e){var n=buildExpression$1(o.body,e,!0),a=buildCommon.makeSpan([o.mclass],n,e);return a.style.textShadow="0.02em 0.01em 0.04px",a},mathmlBuilder(o,e){var n=buildExpression(o.body,e),a=new mathMLTree.MathNode("mstyle",n);return a.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),a}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=o=>o.type==="textord"&&o.text==="@",isLabelEnd=(o,e)=>(o.type==="mathord"||o.type==="atom")&&o.text===e;function cdArrow(o,e,n){var a=cdArrowFunctionName[o];switch(a){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(a,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var s=n.callFunction("\\\\cdleft",[e[0]],[]),l={type:"atom",text:a,mode:"math",family:"rel"},c=n.callFunction("\\Big",[l],[]),d=n.callFunction("\\\\cdright",[e[1]],[]),u={type:"ordgroup",mode:"math",body:[s,c,d]};return n.callFunction("\\\\cdparent",[u],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(o){var e=[];for(o.gullet.beginGroup(),o.gullet.macros.set("\\cr","\\\\\\relax"),o.gullet.beginGroup();;){e.push(o.parseExpression(!1,"\\\\")),o.gullet.endGroup(),o.gullet.beginGroup();var n=o.fetch().text;if(n==="&"||n==="\\\\")o.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",o.nextToken)}for(var a=[],s=[a],l=0;l<e.length;l++){for(var c=e[l],d=newCell(),u=0;u<c.length;u++)if(!isStartOfArrow(c[u]))d.body.push(c[u]);else{a.push(d),u+=1;var f=assertSymbolNodeType(c[u]).text,v=new Array(2);if(v[0]={type:"ordgroup",mode:"math",body:[]},v[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var b=0;b<2;b++){for(var k=!0,x=u+1;x<c.length;x++){if(isLabelEnd(c[x],f)){k=!1,u=x;break}if(isStartOfArrow(c[x]))throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[x]);v[b].body.push(c[x])}if(k)throw new ParseError("Missing a "+f+" character to complete a CD arrow.",c[u])}else throw new ParseError('Expected one of "<>AV=|." after @',c[u]);var _=cdArrow(f,v,o),E={type:"styling",body:[_],mode:"math",style:"display"};a.push(E),d=newCell()}l%2===0?a.push(d):a.shift(),a=[],s.push(a)}o.gullet.endGroup(),o.gullet.endGroup();var B=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:B,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o;return{type:"cdlabel",mode:n.mode,side:a.slice(4),label:e[0]}},htmlBuilder(o,e){var n=e.havingStyle(e.style.sup()),a=buildCommon.wrapFragment(buildGroup$1(o.label,n,e),e);return a.classes.push("cd-label-"+o.side),a.style.bottom=makeEm(.8-a.depth),a.height=0,a.depth=0,a},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mrow",[buildGroup(o.label,e)]);return n=new mathMLTree.MathNode("mpadded",[n]),n.setAttribute("width","0"),o.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new mathMLTree.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(o,e){var{parser:n}=o;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(o,e){var n=buildCommon.wrapFragment(buildGroup$1(o.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(o,e){return new mathMLTree.MathNode("mrow",[buildGroup(o.fragment,e)])}}),defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(o,e){for(var{parser:n}=o,a=assertNodeType(e[0],"ordgroup"),s=a.body,l="",c=0;c<s.length;c++){var d=assertNodeType(s[c],"textord");l+=d.text}var u=parseInt(l),f;if(isNaN(u))throw new ParseError("\\@char has non-numeric argument "+l);if(u<0||u>=1114111)throw new ParseError("\\@char with invalid code point "+l);return u<=65535?f=String.fromCharCode(u):(u-=65536,f=String.fromCharCode((u>>10)+55296,(u&1023)+56320)),{type:"textord",mode:n.mode,text:f}}});var htmlBuilder$8=(o,e)=>{var n=buildExpression$1(o.body,e.withColor(o.color),!1);return buildCommon.makeFragment(n)},mathmlBuilder$7=(o,e)=>{var n=buildExpression(o.body,e.withColor(o.color)),a=new mathMLTree.MathNode("mstyle",n);return a.setAttribute("mathcolor",o.color),a};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(o,e){var{parser:n}=o,a=assertNodeType(e[0],"color-token").color,s=e[1];return{type:"color",mode:n.mode,color:a,body:ordargument(s)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(o,e){var{parser:n,breakOnTokenText:a}=o,s=assertNodeType(e[0],"color-token").color;n.gullet.macros.set("\\current@color",s);var l=n.parseExpression(!0,a);return{type:"color",mode:n.mode,color:s,body:l}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(o,e,n){var{parser:a}=o,s=a.gullet.future().text==="["?a.parseSizeGroup(!0):null,l=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:a.mode,newLine:l,size:s&&assertNodeType(s,"size").value}},htmlBuilder(o,e){var n=buildCommon.makeSpan(["mspace"],[],e);return o.newLine&&(n.classes.push("newline"),o.size&&(n.style.marginTop=makeEm(calculateSize(o.size,e)))),n},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mspace");return o.newLine&&(n.setAttribute("linebreak","newline"),o.size&&n.setAttribute("height",makeEm(calculateSize(o.size,e)))),n}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=o=>{var e=o.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",o);return e},getRHS=o=>{var e=o.gullet.popToken();return e.text==="="&&(e=o.gullet.popToken(),e.text===" "&&(e=o.gullet.popToken())),e},letCommand=(o,e,n,a)=>{var s=o.gullet.macros.get(n.text);s==null&&(n.noexpand=!0,s={tokens:[n],numArgs:0,unexpandable:!o.gullet.isExpandable(n.text)}),o.gullet.macros.set(e,s,a)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(o){var{parser:e,funcName:n}=o;e.consumeSpaces();var a=e.fetch();if(globalMap[a.text])return(n==="\\global"||n==="\\\\globallong")&&(a.text=globalMap[a.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",a)}}),defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=e.gullet.popToken(),s=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ParseError("Expected a control sequence",a);for(var l=0,c,d=[[]];e.gullet.future().text!=="{";)if(a=e.gullet.popToken(),a.text==="#"){if(e.gullet.future().text==="{"){c=e.gullet.future(),d[l].push("{");break}if(a=e.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new ParseError('Invalid argument number "'+a.text+'"');if(parseInt(a.text)!==l+1)throw new ParseError('Argument number "'+a.text+'" out of order');l++,d.push([])}else{if(a.text==="EOF")throw new ParseError("Expected a macro definition");d[l].push(a.text)}var{tokens:u}=e.gullet.consumeArg();return c&&u.unshift(c),(n==="\\edef"||n==="\\xdef")&&(u=e.gullet.expandTokens(u),u.reverse()),e.gullet.macros.set(s,{tokens:u,numArgs:l,delimiters:d},n===globalMap[n]),{type:"internal",mode:e.mode}}}),defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var s=getRHS(e);return letCommand(e,a,s,n==="\\\\globallet"),{type:"internal",mode:e.mode}}}),defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){var{parser:e,funcName:n}=o,a=checkControlSequence(e.gullet.popToken()),s=e.gullet.popToken(),l=e.gullet.popToken();return letCommand(e,a,l,n==="\\\\globalfuture"),e.gullet.pushToken(l),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});var getMetrics=function o(e,n,a){var s=symbols.math[e]&&symbols.math[e].replace,l=getCharacterMetrics(s||e,n,a);if(!l)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return l},styleWrap=function o(e,n,a,s){var l=a.havingBaseStyle(n),c=buildCommon.makeSpan(s.concat(l.sizingClasses(a)),[e],a),d=l.sizeMultiplier/a.sizeMultiplier;return c.height*=d,c.depth*=d,c.maxFontSize=l.sizeMultiplier,c},centerSpan=function o(e,n,a){var s=n.havingBaseStyle(a),l=(1-n.sizeMultiplier/s.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(l),e.height-=l,e.depth+=l},makeSmallDelim=function o(e,n,a,s,l,c){var d=buildCommon.makeSymbol(e,"Main-Regular",l,s),u=styleWrap(d,n,s,c);return a&&centerSpan(u,s,n),u},mathrmSize=function o(e,n,a,s){return buildCommon.makeSymbol(e,"Size"+n+"-Regular",a,s)},makeLargeDelim=function o(e,n,a,s,l,c){var d=mathrmSize(e,n,l,s),u=styleWrap(buildCommon.makeSpan(["delimsizing","size"+n],[d],s),Style$1.TEXT,s,c);return a&&centerSpan(u,s,Style$1.TEXT),u},makeGlyphSpan=function o(e,n,a){var s;n==="Size1-Regular"?s="delim-size1":s="delim-size4";var l=buildCommon.makeSpan(["delimsizinginner",s],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,n,a)])]);return{type:"elem",elem:l}},makeInner=function o(e,n,a){var s=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],l=new PathNode("inner",innerPath(e,Math.round(1e3*n))),c=new SvgNode([l],{width:makeEm(s),height:makeEm(n),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),d=buildCommon.makeSvgSpan([],[c],a);return d.height=n,d.style.height=makeEm(n),d.style.width=makeEm(s),{type:"elem",elem:d}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function o(e,n,a,s,l,c){var d,u,f,v,b="",k=0;d=f=v=e,u=null;var x="Size1-Regular";e==="\\uparrow"?f=v="\u23D0":e==="\\Uparrow"?f=v="\u2016":e==="\\downarrow"?d=f="\u23D0":e==="\\Downarrow"?d=f="\u2016":e==="\\updownarrow"?(d="\\uparrow",f="\u23D0",v="\\downarrow"):e==="\\Updownarrow"?(d="\\Uparrow",f="\u2016",v="\\Downarrow"):utils.contains(verts,e)?(f="\u2223",b="vert",k=333):utils.contains(doubleVerts,e)?(f="\u2225",b="doublevert",k=556):e==="["||e==="\\lbrack"?(d="\u23A1",f="\u23A2",v="\u23A3",x="Size4-Regular",b="lbrack",k=667):e==="]"||e==="\\rbrack"?(d="\u23A4",f="\u23A5",v="\u23A6",x="Size4-Regular",b="rbrack",k=667):e==="\\lfloor"||e==="\u230A"?(f=d="\u23A2",v="\u23A3",x="Size4-Regular",b="lfloor",k=667):e==="\\lceil"||e==="\u2308"?(d="\u23A1",f=v="\u23A2",x="Size4-Regular",b="lceil",k=667):e==="\\rfloor"||e==="\u230B"?(f=d="\u23A5",v="\u23A6",x="Size4-Regular",b="rfloor",k=667):e==="\\rceil"||e==="\u2309"?(d="\u23A4",f=v="\u23A5",x="Size4-Regular",b="rceil",k=667):e==="("||e==="\\lparen"?(d="\u239B",f="\u239C",v="\u239D",x="Size4-Regular",b="lparen",k=875):e===")"||e==="\\rparen"?(d="\u239E",f="\u239F",v="\u23A0",x="Size4-Regular",b="rparen",k=875):e==="\\{"||e==="\\lbrace"?(d="\u23A7",u="\u23A8",v="\u23A9",f="\u23AA",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(d="\u23AB",u="\u23AC",v="\u23AD",f="\u23AA",x="Size4-Regular"):e==="\\lgroup"||e==="\u27EE"?(d="\u23A7",v="\u23A9",f="\u23AA",x="Size4-Regular"):e==="\\rgroup"||e==="\u27EF"?(d="\u23AB",v="\u23AD",f="\u23AA",x="Size4-Regular"):e==="\\lmoustache"||e==="\u23B0"?(d="\u23A7",v="\u23AD",f="\u23AA",x="Size4-Regular"):(e==="\\rmoustache"||e==="\u23B1")&&(d="\u23AB",v="\u23A9",f="\u23AA",x="Size4-Regular");var _=getMetrics(d,x,l),E=_.height+_.depth,B=getMetrics(f,x,l),M=B.height+B.depth,I=getMetrics(v,x,l),F=I.height+I.depth,V=0,L=1;if(u!==null){var U=getMetrics(u,x,l);V=U.height+U.depth,L=2}var j=E+F+V,oe=Math.max(0,Math.ceil((n-j)/(L*M))),Y=j+oe*L*M,K=s.fontMetrics().axisHeight;a&&(K*=s.sizeMultiplier);var W=Y/2-K,G=[];if(b.length>0){var ce=Y-E-F,se=Math.round(Y*1e3),me=tallDelim(b,Math.round(ce*1e3)),ge=new PathNode(b,me),Te=(k/1e3).toFixed(3)+"em",Be=(se/1e3).toFixed(3)+"em",Ge=new SvgNode([ge],{width:Te,height:Be,viewBox:"0 0 "+k+" "+se}),We=buildCommon.makeSvgSpan([],[Ge],s);We.height=se/1e3,We.style.width=Te,We.style.height=Be,G.push({type:"elem",elem:We})}else{if(G.push(makeGlyphSpan(v,x,l)),G.push(lap),u===null){var Oe=Y-E-F+2*lapInEms;G.push(makeInner(f,Oe,s))}else{var Ve=(Y-E-F-V)/2+2*lapInEms;G.push(makeInner(f,Ve,s)),G.push(lap),G.push(makeGlyphSpan(u,x,l)),G.push(lap),G.push(makeInner(f,Ve,s))}G.push(lap),G.push(makeGlyphSpan(d,x,l))}var Xe=s.havingBaseStyle(Style$1.TEXT),dt=buildCommon.makeVList({positionType:"bottom",positionData:W,children:G},Xe);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[dt],Xe),Style$1.TEXT,s,c)},vbPad=80,emPad=.08,sqrtSvg=function o(e,n,a,s,l){var c=sqrtPath(e,s,a),d=new PathNode(e,c),u=new SvgNode([d],{width:"400em",height:makeEm(n),viewBox:"0 0 400000 "+a,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[u],l)},makeSqrtImage=function o(e,n){var a=n.havingBaseSizing(),s=traverseSequence("\\surd",e*a.sizeMultiplier,stackLargeDelimiterSequence,a),l=a.sizeMultiplier,c=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),d,u=0,f=0,v=0,b;return s.type==="small"?(v=1e3+1e3*c+vbPad,e<1?l=1:e<1.4&&(l=.7),u=(1+c+emPad)/l,f=(1+c)/l,d=sqrtSvg("sqrtMain",u,v,c,n),d.style.minWidth="0.853em",b=.833/l):s.type==="large"?(v=(1e3+vbPad)*sizeToMaxHeight[s.size],f=(sizeToMaxHeight[s.size]+c)/l,u=(sizeToMaxHeight[s.size]+c+emPad)/l,d=sqrtSvg("sqrtSize"+s.size,u,v,c,n),d.style.minWidth="1.02em",b=1/l):(u=e+c+emPad,f=e+c,v=Math.floor(1e3*e+c)+vbPad,d=sqrtSvg("sqrtTall",u,v,c,n),d.style.minWidth="0.742em",b=1.056),d.height=f,d.style.height=makeEm(u),{span:d,advanceWidth:b,ruleWidth:(n.fontMetrics().sqrtRuleThickness+c)*l}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function o(e,n,a,s,l){if(e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,n,!1,a,s,l);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[n],!1,a,s,l);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function o(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function o(e,n,a,s){for(var l=Math.min(2,3-s.style.size),c=l;c<a.length&&a[c].type!=="stack";c++){var d=getMetrics(e,delimTypeToFont(a[c]),"math"),u=d.height+d.depth;if(a[c].type==="small"){var f=s.havingBaseStyle(a[c].style);u*=f.sizeMultiplier}if(u>n)return a[c]}return a[a.length-1]},makeCustomSizedDelim=function o(e,n,a,s,l,c){e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle");var d;utils.contains(stackNeverDelimiters,e)?d=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?d=stackLargeDelimiterSequence:d=stackAlwaysDelimiterSequence;var u=traverseSequence(e,n,d,s);return u.type==="small"?makeSmallDelim(e,u.style,a,s,l,c):u.type==="large"?makeLargeDelim(e,u.size,a,s,l,c):makeStackedDelim(e,n,a,s,l,c)},makeLeftRightDelim=function o(e,n,a,s,l,c){var d=s.fontMetrics().axisHeight*s.sizeMultiplier,u=901,f=5/s.fontMetrics().ptPerEm,v=Math.max(n-d,a+d),b=Math.max(v/500*u,2*v-f);return makeCustomSizedDelim(e,b,!0,s,l,c)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(o,e){var n=checkSymbolNodeType(o);if(n&&utils.contains(delimiters,n.text))return n;throw n?new ParseError("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",o):new ParseError("Invalid delimiter type '"+o.type+"'",o)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(o,e)=>{var n=checkDelimiter(e[0],o);return{type:"delimsizing",mode:o.parser.mode,size:delimiterSizes[o.funcName].size,mclass:delimiterSizes[o.funcName].mclass,delim:n.text}},htmlBuilder:(o,e)=>o.delim==="."?buildCommon.makeSpan([o.mclass]):delimiter.sizedDelim(o.delim,o.size,e,o.mode,[o.mclass]),mathmlBuilder:o=>{var e=[];o.delim!=="."&&e.push(makeText(o.delim,o.mode));var n=new mathMLTree.MathNode("mo",e);o.mclass==="mopen"||o.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var a=makeEm(delimiter.sizeToMaxHeight[o.size]);return n.setAttribute("minsize",a),n.setAttribute("maxsize",a),n}});function assertParsed(o){if(!o.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=o.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:o.parser.mode,delim:checkDelimiter(e[0],o).text,color:n}}}),defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=checkDelimiter(e[0],o),a=o.parser;++a.leftrightDepth;var s=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var l=assertNodeType(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:s,left:n.text,right:l.delim,rightColor:l.color}},htmlBuilder:(o,e)=>{assertParsed(o);for(var n=buildExpression$1(o.body,e,!0,["mopen","mclose"]),a=0,s=0,l=!1,c=0;c<n.length;c++)n[c].isMiddle?l=!0:(a=Math.max(n[c].height,a),s=Math.max(n[c].depth,s));a*=e.sizeMultiplier,s*=e.sizeMultiplier;var d;if(o.left==="."?d=makeNullDelimiter(e,["mopen"]):d=delimiter.leftRightDelim(o.left,a,s,e,o.mode,["mopen"]),n.unshift(d),l)for(var u=1;u<n.length;u++){var f=n[u],v=f.isMiddle;v&&(n[u]=delimiter.leftRightDelim(v.delim,a,s,v.options,o.mode,[]))}var b;if(o.right===".")b=makeNullDelimiter(e,["mclose"]);else{var k=o.rightColor?e.withColor(o.rightColor):e;b=delimiter.leftRightDelim(o.right,a,s,k,o.mode,["mclose"])}return n.push(b),buildCommon.makeSpan(["minner"],n,e)},mathmlBuilder:(o,e)=>{assertParsed(o);var n=buildExpression(o.body,e);if(o.left!=="."){var a=new mathMLTree.MathNode("mo",[makeText(o.left,o.mode)]);a.setAttribute("fence","true"),n.unshift(a)}if(o.right!=="."){var s=new mathMLTree.MathNode("mo",[makeText(o.right,o.mode)]);s.setAttribute("fence","true"),o.rightColor&&s.setAttribute("mathcolor",o.rightColor),n.push(s)}return makeRow(n)}}),defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var n=checkDelimiter(e[0],o);if(!o.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",n);return{type:"middle",mode:o.parser.mode,delim:n.text}},htmlBuilder:(o,e)=>{var n;if(o.delim===".")n=makeNullDelimiter(e,[]);else{n=delimiter.sizedDelim(o.delim,1,e,o.mode,[]);var a={delim:o.delim,options:e};n.isMiddle=a}return n},mathmlBuilder:(o,e)=>{var n=o.delim==="\\vert"||o.delim==="|"?makeText("|","text"):makeText(o.delim,o.mode),a=new mathMLTree.MathNode("mo",[n]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var htmlBuilder$7=(o,e)=>{var n=buildCommon.wrapFragment(buildGroup$1(o.body,e),e),a=o.label.slice(1),s=e.sizeMultiplier,l,c=0,d=utils.isCharacterBox(o.body);if(a==="sout")l=buildCommon.makeSpan(["stretchy","sout"]),l.height=e.fontMetrics().defaultRuleThickness/s,c=-.5*e.fontMetrics().xHeight;else if(a==="phase"){var u=calculateSize({number:.6,unit:"pt"},e),f=calculateSize({number:.35,unit:"ex"},e),v=e.havingBaseSizing();s=s/v.sizeMultiplier;var b=n.height+n.depth+u+f;n.style.paddingLeft=makeEm(b/2+u);var k=Math.floor(1e3*b*s),x=phasePath(k),_=new SvgNode([new PathNode("phase",x)],{width:"400em",height:makeEm(k/1e3),viewBox:"0 0 400000 "+k,preserveAspectRatio:"xMinYMin slice"});l=buildCommon.makeSvgSpan(["hide-tail"],[_],e),l.style.height=makeEm(b),c=n.depth+u+f}else{/cancel/.test(a)?d||n.classes.push("cancel-pad"):a==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var E=0,B=0,M=0;/box/.test(a)?(M=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),E=e.fontMetrics().fboxsep+(a==="colorbox"?0:M),B=E):a==="angl"?(M=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),E=4*M,B=Math.max(0,.25-n.depth)):(E=d?.2:0,B=E),l=stretchy.encloseSpan(n,a,E,B,e),/fbox|boxed|fcolorbox/.test(a)?(l.style.borderStyle="solid",l.style.borderWidth=makeEm(M)):a==="angl"&&M!==.049&&(l.style.borderTopWidth=makeEm(M),l.style.borderRightWidth=makeEm(M)),c=n.depth+B,o.backgroundColor&&(l.style.backgroundColor=o.backgroundColor,o.borderColor&&(l.style.borderColor=o.borderColor))}var I;if(o.backgroundColor)I=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:c},{type:"elem",elem:n,shift:0}]},e);else{var F=/cancel|phase/.test(a)?["svg-align"]:[];I=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:l,shift:c,wrapperClasses:F}]},e)}return/cancel/.test(a)&&(I.height=n.height,I.depth=n.depth),/cancel/.test(a)&&!d?buildCommon.makeSpan(["mord","cancel-lap"],[I],e):buildCommon.makeSpan(["mord"],[I],e)},mathmlBuilder$6=(o,e)=>{var n=0,a=new mathMLTree.MathNode(o.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(o.body,e)]);switch(o.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\phase":a.setAttribute("notation","phasorangle");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\angl":a.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*n+"pt"),a.setAttribute("height","+"+2*n+"pt"),a.setAttribute("lspace",n+"pt"),a.setAttribute("voffset",n+"pt"),o.label==="\\fcolorbox"){var s=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);a.setAttribute("style","border: "+s+"em solid "+String(o.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return o.backgroundColor&&a.setAttribute("mathbackground",o.backgroundColor),a};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(o,e,n){var{parser:a,funcName:s}=o,l=assertNodeType(e[0],"color-token").color,c=e[1];return{type:"enclose",mode:a.mode,label:s,backgroundColor:l,body:c}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(o,e,n){var{parser:a,funcName:s}=o,l=assertNodeType(e[0],"color-token").color,c=assertNodeType(e[1],"color-token").color,d=e[2];return{type:"enclose",mode:a.mode,label:s,backgroundColor:c,borderColor:l,body:d}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}}),defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"enclose",mode:n.mode,label:a,body:s}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(o,e){var{parser:n}=o;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(o){for(var{type:e,names:n,props:a,handler:s,htmlBuilder:l,mathmlBuilder:c}=o,d={type:e,numArgs:a.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},u=0;u<n.length;++u)_environments[n[u]]=d;l&&(_htmlGroupBuilders[e]=l),c&&(_mathmlGroupBuilders[e]=c)}var _macros={};function defineMacro(o,e){_macros[o]=e}function getHLines(o){var e=[];o.consumeSpaces();var n=o.fetch().text;for(n==="\\relax"&&(o.consume(),o.consumeSpaces(),n=o.fetch().text);n==="\\hline"||n==="\\hdashline";)o.consume(),e.push(n==="\\hdashline"),o.consumeSpaces(),n=o.fetch().text;return e}var validateAmsEnvironmentContext=o=>{var e=o.parser.settings;if(!e.displayMode)throw new ParseError("{"+o.envName+"} can be used only in display mode.")};function getAutoTag(o){if(o.indexOf("ed")===-1)return o.indexOf("*")===-1}function parseArray(o,e,n){var{hskipBeforeAndAfter:a,addJot:s,cols:l,arraystretch:c,colSeparationType:d,autoTag:u,singleRow:f,emptySingleRow:v,maxNumCols:b,leqno:k}=e;if(o.gullet.beginGroup(),f||o.gullet.macros.set("\\cr","\\\\\\relax"),!c){var x=o.gullet.expandMacroAsText("\\arraystretch");if(x==null)c=1;else if(c=parseFloat(x),!c||c<0)throw new ParseError("Invalid \\arraystretch: "+x)}o.gullet.beginGroup();var _=[],E=[_],B=[],M=[],I=u!=null?[]:void 0;function F(){u&&o.gullet.macros.set("\\@eqnsw","1",!0)}function V(){I&&(o.gullet.macros.get("\\df@tag")?(I.push(o.subparse([new Token("\\df@tag")])),o.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!u&&o.gullet.macros.get("\\@eqnsw")==="1"))}for(F(),M.push(getHLines(o));;){var L=o.parseExpression(!1,f?"\\end":"\\\\");o.gullet.endGroup(),o.gullet.beginGroup(),L={type:"ordgroup",mode:o.mode,body:L},n&&(L={type:"styling",mode:o.mode,style:n,body:[L]}),_.push(L);var U=o.fetch().text;if(U==="&"){if(b&&_.length===b){if(f||d)throw new ParseError("Too many tab characters: &",o.nextToken);o.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}o.consume()}else if(U==="\\end"){V(),_.length===1&&L.type==="styling"&&L.body[0].body.length===0&&(E.length>1||!v)&&E.pop(),M.length<E.length+1&&M.push([]);break}else if(U==="\\\\"){o.consume();var j=void 0;o.gullet.future().text!==" "&&(j=o.parseSizeGroup(!0)),B.push(j?j.value:null),V(),M.push(getHLines(o)),_=[],E.push(_),F()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",o.nextToken)}return o.gullet.endGroup(),o.gullet.endGroup(),{type:"array",mode:o.mode,addJot:s,arraystretch:c,body:E,cols:l,rowGaps:B,hskipBeforeAndAfter:a,hLinesBeforeRow:M,colSeparationType:d,tags:I,leqno:k}}function dCellStyle(o){return o.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function o(e,n){var a,s,l=e.body.length,c=e.hLinesBeforeRow,d=0,u=new Array(l),f=[],v=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),b=1/n.fontMetrics().ptPerEm,k=5*b;if(e.colSeparationType&&e.colSeparationType==="small"){var x=n.havingStyle(Style$1.SCRIPT).sizeMultiplier;k=.2778*(x/n.sizeMultiplier)}var _=e.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},n):12*b,E=3*b,B=e.arraystretch*_,M=.7*B,I=.3*B,F=0;function V(te){for(var re=0;re<te.length;++re)re>0&&(F+=.25),f.push({pos:F,isDashed:te[re]})}for(V(c[0]),a=0;a<e.body.length;++a){var L=e.body[a],U=M,j=I;d<L.length&&(d=L.length);var oe=new Array(L.length);for(s=0;s<L.length;++s){var Y=buildGroup$1(L[s],n);j<Y.depth&&(j=Y.depth),U<Y.height&&(U=Y.height),oe[s]=Y}var K=e.rowGaps[a],W=0;K&&(W=calculateSize(K,n),W>0&&(W+=I,j<W&&(j=W),W=0)),e.addJot&&(j+=E),oe.height=U,oe.depth=j,F+=U,oe.pos=F,F+=j+W,u[a]=oe,V(c[a+1])}var G=F/2+n.fontMetrics().axisHeight,ce=e.cols||[],se=[],me,ge,Te=[];if(e.tags&&e.tags.some(te=>te))for(a=0;a<l;++a){var Be=u[a],Ge=Be.pos-G,We=e.tags[a],Oe=void 0;We===!0?Oe=buildCommon.makeSpan(["eqn-num"],[],n):We===!1?Oe=buildCommon.makeSpan([],[],n):Oe=buildCommon.makeSpan([],buildExpression$1(We,n,!0),n),Oe.depth=Be.depth,Oe.height=Be.height,Te.push({type:"elem",elem:Oe,shift:Ge})}for(s=0,ge=0;s<d||ge<ce.length;++s,++ge){for(var Ve=ce[ge]||{},Xe=!0;Ve.type==="separator";){if(Xe||(me=buildCommon.makeSpan(["arraycolsep"],[]),me.style.width=makeEm(n.fontMetrics().doubleRuleSep),se.push(me)),Ve.separator==="|"||Ve.separator===":"){var dt=Ve.separator==="|"?"solid":"dashed",pt=buildCommon.makeSpan(["vertical-separator"],[],n);pt.style.height=makeEm(F),pt.style.borderRightWidth=makeEm(v),pt.style.borderRightStyle=dt,pt.style.margin="0 "+makeEm(-v/2);var ft=F-G;ft&&(pt.style.verticalAlign=makeEm(-ft)),se.push(pt)}else throw new ParseError("Invalid separator type: "+Ve.separator);ge++,Ve=ce[ge]||{},Xe=!1}if(!(s>=d)){var Ce=void 0;(s>0||e.hskipBeforeAndAfter)&&(Ce=utils.deflt(Ve.pregap,k),Ce!==0&&(me=buildCommon.makeSpan(["arraycolsep"],[]),me.style.width=makeEm(Ce),se.push(me)));var ze=[];for(a=0;a<l;++a){var Ze=u[a],pe=Ze[s];if(pe){var ue=Ze.pos-G;pe.depth=Ze.depth,pe.height=Ze.height,ze.push({type:"elem",elem:pe,shift:ue})}}ze=buildCommon.makeVList({positionType:"individualShift",children:ze},n),ze=buildCommon.makeSpan(["col-align-"+(Ve.align||"c")],[ze]),se.push(ze),(s<d-1||e.hskipBeforeAndAfter)&&(Ce=utils.deflt(Ve.postgap,k),Ce!==0&&(me=buildCommon.makeSpan(["arraycolsep"],[]),me.style.width=makeEm(Ce),se.push(me)))}}if(u=buildCommon.makeSpan(["mtable"],se),f.length>0){for(var Z=buildCommon.makeLineSpan("hline",n,v),ee=buildCommon.makeLineSpan("hdashline",n,v),le=[{type:"elem",elem:u,shift:0}];f.length>0;){var we=f.pop(),ke=we.pos-G;we.isDashed?le.push({type:"elem",elem:ee,shift:ke}):le.push({type:"elem",elem:Z,shift:ke})}u=buildCommon.makeVList({positionType:"individualShift",children:le},n)}if(Te.length===0)return buildCommon.makeSpan(["mord"],[u],n);var _e=buildCommon.makeVList({positionType:"individualShift",children:Te},n);return _e=buildCommon.makeSpan(["tag"],[_e],n),buildCommon.makeFragment([u,_e])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function o(e,n){for(var a=[],s=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),l=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),c=0;c<e.body.length;c++){for(var d=e.body[c],u=[],f=0;f<d.length;f++)u.push(new mathMLTree.MathNode("mtd",[buildGroup(d[f],n)]));e.tags&&e.tags[c]&&(u.unshift(s),u.push(s),e.leqno?u.unshift(l):u.push(l)),a.push(new mathMLTree.MathNode("mtr",u))}var v=new mathMLTree.MathNode("mtable",a),b=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);v.setAttribute("rowspacing",makeEm(b));var k="",x="";if(e.cols&&e.cols.length>0){var _=e.cols,E="",B=!1,M=0,I=_.length;_[0].type==="separator"&&(k+="top ",M=1),_[_.length-1].type==="separator"&&(k+="bottom ",I-=1);for(var F=M;F<I;F++)_[F].type==="align"?(x+=alignMap[_[F].align],B&&(E+="none "),B=!0):_[F].type==="separator"&&B&&(E+=_[F].separator==="|"?"solid ":"dashed ",B=!1);v.setAttribute("columnalign",x.trim()),/[sd]/.test(E)&&v.setAttribute("columnlines",E.trim())}if(e.colSeparationType==="align"){for(var V=e.cols||[],L="",U=1;U<V.length;U++)L+=U%2?"0em ":"1em ";v.setAttribute("columnspacing",L.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?v.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?v.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?v.setAttribute("columnspacing","0.5em"):v.setAttribute("columnspacing","1em");var j="",oe=e.hLinesBeforeRow;k+=oe[0].length>0?"left ":"",k+=oe[oe.length-1].length>0?"right ":"";for(var Y=1;Y<oe.length-1;Y++)j+=oe[Y].length===0?"none ":oe[Y][0]?"dashed ":"solid ";return/[sd]/.test(j)&&v.setAttribute("rowlines",j.trim()),k!==""&&(v=new mathMLTree.MathNode("menclose",[v]),v.setAttribute("notation",k.trim())),e.arraystretch&&e.arraystretch<1&&(v=new mathMLTree.MathNode("mstyle",[v]),v.setAttribute("scriptlevel","1")),v},alignedHandler=function o(e,n){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var a=[],s=e.envName.indexOf("at")>-1?"alignat":"align",l=e.envName==="split",c=parseArray(e.parser,{cols:a,addJot:!0,autoTag:l?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:l?2:void 0,leqno:e.parser.settings.leqno},"display"),d,u=0,f={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var v="",b=0;b<n[0].body.length;b++){var k=assertNodeType(n[0].body[b],"textord");v+=k.text}d=Number(v),u=d*2}var x=!u;c.body.forEach(function(M){for(var I=1;I<M.length;I+=2){var F=assertNodeType(M[I],"styling"),V=assertNodeType(F.body[0],"ordgroup");V.body.unshift(f)}if(x)u<M.length&&(u=M.length);else{var L=M.length/2;if(d<L)throw new ParseError("Too many math in a row: "+("expected "+d+", but got "+L),M[0])}});for(var _=0;_<u;++_){var E="r",B=0;_%2===1?E="l":_>0&&x&&(B=1),a[_]={type:"align",align:E,pregap:B,postgap:0}}return c.colSeparationType=x?"align":"alignat",c};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(o,e){var n=checkSymbolNodeType(e[0]),a=n?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lcr".indexOf(u)!==-1)return{type:"align",align:u};if(u==="|")return{type:"separator",separator:"|"};if(u===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+u,c)}),l={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return parseArray(o.parser,l,dCellStyle(o.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(o){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[o.envName.replace("*","")],n="c",a={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(o.envName.charAt(o.envName.length-1)==="*"){var s=o.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,"lcr".indexOf(n)===-1)throw new ParseError("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),a.cols=[{type:"align",align:n}]}}var l=parseArray(o.parser,a,dCellStyle(o.envName)),c=Math.max(0,...l.body.map(d=>d.length));return l.cols=new Array(c).fill({type:"align",align:n}),e?{type:"leftright",mode:o.mode,body:[l],left:e[0],right:e[1],rightColor:void 0}:l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(o){var e={arraystretch:.5},n=parseArray(o.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(o,e){var n=checkSymbolNodeType(e[0]),a=n?[e[0]]:assertNodeType(e[0],"ordgroup").body,s=a.map(function(c){var d=assertSymbolNodeType(c),u=d.text;if("lc".indexOf(u)!==-1)return{type:"align",align:u};throw new ParseError("Unknown column alignment: "+u,c)});if(s.length>1)throw new ParseError("{subarray} can contain only one column");var l={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(l=parseArray(o.parser,l,"script"),l.body.length>0&&l.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return l},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(o){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=parseArray(o.parser,e,dCellStyle(o.envName));return{type:"leftright",mode:o.mode,body:[n],left:o.envName.indexOf("r")>-1?".":"\\{",right:o.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(o){utils.contains(["gather","gather*"],o.envName)&&validateAmsEnvironmentContext(o);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(o.envName),emptySingleRow:!0,leqno:o.parser.settings.leqno};return parseArray(o.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(o){validateAmsEnvironmentContext(o);var e={autoTag:getAutoTag(o.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:o.parser.settings.leqno};return parseArray(o.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(o){return validateAmsEnvironmentContext(o),parseCD(o.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineMacro("\\nonumber","\\gdef\\@eqnsw{0}"),defineMacro("\\notag","\\nonumber"),defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(o,e){throw new ParseError(o.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];if(s.type!=="ordgroup")throw new ParseError("Invalid environment name",s);for(var l="",c=0;c<s.body.length;++c)l+=assertNodeType(s.body[c],"textord").text;if(a==="\\begin"){if(!environments.hasOwnProperty(l))throw new ParseError("No such environment: "+l,s);var d=environments[l],{args:u,optArgs:f}=n.parseArguments("\\begin{"+l+"}",d),v={mode:n.mode,envName:l,parser:n},b=d.handler(v,u,f);n.expect("\\end",!1);var k=n.nextToken,x=assertNodeType(n.parseFunction(),"environment");if(x.name!==l)throw new ParseError("Mismatch: \\begin{"+l+"} matched by \\end{"+x.name+"}",k);return b}return{type:"environment",mode:n.mode,name:l,nameGroup:s}}});var htmlBuilder$5=(o,e)=>{var n=o.font,a=e.withFont(n);return buildGroup$1(o.body,a)},mathmlBuilder$4=(o,e)=>{var n=o.font,a=e.withFont(n);return buildGroup(o.body,a)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=normalizeArgument(e[0]),l=a;return l in fontAliases&&(l=fontAliases[l]),{type:"font",mode:n.mode,font:l.slice(1),body:s}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4}),defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(o,e)=>{var{parser:n}=o,a=e[0],s=utils.isCharacterBox(a);return{type:"mclass",mode:n.mode,mclass:binrelClass(a),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:a}],isCharacterBox:s}}}),defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a,breakOnTokenText:s}=o,{mode:l}=n,c=n.parseExpression(!0,s),d="math"+a.slice(1);return{type:"font",mode:l,font:d,body:{type:"ordgroup",mode:n.mode,body:c}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(o,e)=>{var n=e;return o==="display"?n=n.id>=Style$1.SCRIPT.id?n.text():Style$1.DISPLAY:o==="text"&&n.size===Style$1.DISPLAY.size?n=Style$1.TEXT:o==="script"?n=Style$1.SCRIPT:o==="scriptscript"&&(n=Style$1.SCRIPTSCRIPT),n},htmlBuilder$4=(o,e)=>{var n=adjustStyle(o.size,e.style),a=n.fracNum(),s=n.fracDen(),l;l=e.havingStyle(a);var c=buildGroup$1(o.numer,l,e);if(o.continued){var d=8.5/e.fontMetrics().ptPerEm,u=3.5/e.fontMetrics().ptPerEm;c.height=c.height<d?d:c.height,c.depth=c.depth<u?u:c.depth}l=e.havingStyle(s);var f=buildGroup$1(o.denom,l,e),v,b,k;o.hasBarLine?(o.barSize?(b=calculateSize(o.barSize,e),v=buildCommon.makeLineSpan("frac-line",e,b)):v=buildCommon.makeLineSpan("frac-line",e),b=v.height,k=v.height):(v=null,b=0,k=e.fontMetrics().defaultRuleThickness);var x,_,E;n.size===Style$1.DISPLAY.size||o.size==="display"?(x=e.fontMetrics().num1,b>0?_=3*k:_=7*k,E=e.fontMetrics().denom1):(b>0?(x=e.fontMetrics().num2,_=k):(x=e.fontMetrics().num3,_=3*k),E=e.fontMetrics().denom2);var B;if(v){var M=e.fontMetrics().axisHeight;x-c.depth-(M+.5*b)<_&&(x+=_-(x-c.depth-(M+.5*b))),M-.5*b-(f.height-E)<_&&(E+=_-(M-.5*b-(f.height-E)));var I=-(M-.5*b);B=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:E},{type:"elem",elem:v,shift:I},{type:"elem",elem:c,shift:-x}]},e)}else{var F=x-c.depth-(f.height-E);F<_&&(x+=.5*(_-F),E+=.5*(_-F)),B=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:E},{type:"elem",elem:c,shift:-x}]},e)}l=e.havingStyle(n),B.height*=l.sizeMultiplier/e.sizeMultiplier,B.depth*=l.sizeMultiplier/e.sizeMultiplier;var V;n.size===Style$1.DISPLAY.size?V=e.fontMetrics().delim1:n.size===Style$1.SCRIPTSCRIPT.size?V=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:V=e.fontMetrics().delim2;var L,U;return o.leftDelim==null?L=makeNullDelimiter(e,["mopen"]):L=delimiter.customSizedDelim(o.leftDelim,V,!0,e.havingStyle(n),o.mode,["mopen"]),o.continued?U=buildCommon.makeSpan([]):o.rightDelim==null?U=makeNullDelimiter(e,["mclose"]):U=delimiter.customSizedDelim(o.rightDelim,V,!0,e.havingStyle(n),o.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(l.sizingClasses(e)),[L,buildCommon.makeSpan(["mfrac"],[B]),U],e)},mathmlBuilder$3=(o,e)=>{var n=new mathMLTree.MathNode("mfrac",[buildGroup(o.numer,e),buildGroup(o.denom,e)]);if(!o.hasBarLine)n.setAttribute("linethickness","0px");else if(o.barSize){var a=calculateSize(o.barSize,e);n.setAttribute("linethickness",makeEm(a))}var s=adjustStyle(o.size,e.style);if(s.size!==e.style.size){n=new mathMLTree.MathNode("mstyle",[n]);var l=s.size===Style$1.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",l),n.setAttribute("scriptlevel","0")}if(o.leftDelim!=null||o.rightDelim!=null){var c=[];if(o.leftDelim!=null){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(o.leftDelim.replace("\\",""))]);d.setAttribute("fence","true"),c.push(d)}if(c.push(n),o.rightDelim!=null){var u=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(o.rightDelim.replace("\\",""))]);u.setAttribute("fence","true"),c.push(u)}return makeRow(c)}return n};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=e[1],c,d=null,u=null,f="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":c=!0;break;case"\\\\atopfrac":c=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":c=!1,d="(",u=")";break;case"\\\\bracefrac":c=!1,d="\\{",u="\\}";break;case"\\\\brackfrac":c=!1,d="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:l,hasBarLine:c,leftDelim:d,rightDelim:u,size:f,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:s,denom:l,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(o){var{parser:e,funcName:n,token:a}=o,s;switch(n){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:a}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function o(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(o,e){var{parser:n}=o,a=e[4],s=e[5],l=normalizeArgument(e[0]),c=l.type==="atom"&&l.family==="open"?delimFromValue(l.text):null,d=normalizeArgument(e[1]),u=d.type==="atom"&&d.family==="close"?delimFromValue(d.text):null,f=assertNodeType(e[2],"size"),v,b=null;f.isBlank?v=!0:(b=f.value,v=b.number>0);var k="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var _=assertNodeType(x.body[0],"textord");k=stylArray[Number(_.text)]}}else x=assertNodeType(x,"textord"),k=stylArray[Number(x.text)];return{type:"genfrac",mode:n.mode,numer:a,denom:s,continued:!1,hasBarLine:v,barSize:b,leftDelim:c,rightDelim:u,size:k}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(o,e){var{parser:n,funcName:a,token:s}=o;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:s}}}),defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0],l=assert(assertNodeType(e[1],"infix").size),c=e[2],d=l.number>0;return{type:"genfrac",mode:n.mode,numer:s,denom:c,continued:!1,hasBarLine:d,barSize:l,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(o,e)=>{var n=e.style,a,s;o.type==="supsub"?(a=o.sup?buildGroup$1(o.sup,e.havingStyle(n.sup()),e):buildGroup$1(o.sub,e.havingStyle(n.sub()),e),s=assertNodeType(o.base,"horizBrace")):s=assertNodeType(o,"horizBrace");var l=buildGroup$1(s.base,e.havingBaseStyle(Style$1.DISPLAY)),c=stretchy.svgSpan(s,e),d;if(s.isOver?(d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:c}]},e),d.children[0].children[0].children[1].classes.push("svg-align")):(d=buildCommon.makeVList({positionType:"bottom",positionData:l.depth+.1+c.height,children:[{type:"elem",elem:c},{type:"kern",size:.1},{type:"elem",elem:l}]},e),d.children[0].children[0].children[0].classes.push("svg-align")),a){var u=buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e);s.isOver?d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.2},{type:"elem",elem:a}]},e):d=buildCommon.makeVList({positionType:"bottom",positionData:u.depth+.2+a.height+a.depth,children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:u}]},e)}return buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[d],e)},mathmlBuilder$2=(o,e)=>{var n=stretchy.mathMLnode(o.label);return new mathMLTree.MathNode(o.isOver?"mover":"munder",[buildGroup(o.base,e),n])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(o,e){var{parser:n,funcName:a}=o;return{type:"horizBrace",mode:n.mode,label:a,isOver:/^\\over/.test(a),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2}),defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[1],s=assertNodeType(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:n.mode,href:s,body:ordargument(a)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e,!1);return buildCommon.makeAnchor(o.href,[],n,e)},mathmlBuilder:(o,e)=>{var n=buildExpressionRow(o.body,e);return n instanceof MathNode||(n=new MathNode("mrow",[n])),n.setAttribute("href",o.href),n}}),defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=assertNodeType(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:a}))return n.formatUnsupportedCmd("\\url");for(var s=[],l=0;l<a.length;l++){var c=a[l];c==="~"&&(c="\\textasciitilde"),s.push({type:"textord",mode:"text",text:c})}var d={type:"text",mode:n.mode,font:"\\texttt",body:s};return{type:"href",mode:n.mode,href:a,body:ordargument(d)}}}),defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(o,e){var{parser:n}=o;return{type:"hbox",mode:n.mode,body:ordargument(e[0])}},htmlBuilder(o,e){var n=buildExpression$1(o.body,e,!1);return buildCommon.makeFragment(n)},mathmlBuilder(o,e){return new mathMLTree.MathNode("mrow",buildExpression(o.body,e))}}),defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a,token:s}=o,l=assertNodeType(e[0],"raw").string,c=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var d,u={};switch(a){case"\\htmlClass":u.class=l,d={command:"\\htmlClass",class:l};break;case"\\htmlId":u.id=l,d={command:"\\htmlId",id:l};break;case"\\htmlStyle":u.style=l,d={command:"\\htmlStyle",style:l};break;case"\\htmlData":{for(var f=l.split(","),v=0;v<f.length;v++){var b=f[v].split("=");if(b.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");u["data-"+b[0].trim()]=b[1].trim()}d={command:"\\htmlData",attributes:u};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(d)?{type:"html",mode:n.mode,attributes:u,body:ordargument(c)}:n.formatUnsupportedCmd(a)},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e,!1),a=["enclosing"];o.attributes.class&&a.push(...o.attributes.class.trim().split(/\s+/));var s=buildCommon.makeSpan(a,n,e);for(var l in o.attributes)l!=="class"&&o.attributes.hasOwnProperty(l)&&s.setAttribute(l,o.attributes[l]);return s},mathmlBuilder:(o,e)=>buildExpressionRow(o.body,e)}),defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o;return{type:"htmlmathml",mode:n.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.html,e,!1);return buildCommon.makeFragment(n)},mathmlBuilder:(o,e)=>buildExpressionRow(o.mathml,e)});var sizeData=function o(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var a={number:+(n[1]+n[2]),unit:n[3]};if(!validUnit(a))throw new ParseError("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(o,e,n)=>{var{parser:a}=o,s={number:0,unit:"em"},l={number:.9,unit:"em"},c={number:0,unit:"em"},d="";if(n[0])for(var u=assertNodeType(n[0],"raw").string,f=u.split(","),v=0;v<f.length;v++){var b=f[v].split("=");if(b.length===2){var k=b[1].trim();switch(b[0].trim()){case"alt":d=k;break;case"width":s=sizeData(k);break;case"height":l=sizeData(k);break;case"totalheight":c=sizeData(k);break;default:throw new ParseError("Invalid key: '"+b[0]+"' in \\includegraphics.")}}}var x=assertNodeType(e[0],"url").url;return d===""&&(d=x,d=d.replace(/^.*[\\/]/,""),d=d.substring(0,d.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:a.mode,alt:d,width:s,height:l,totalheight:c,src:x}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(o,e)=>{var n=calculateSize(o.height,e),a=0;o.totalheight.number>0&&(a=calculateSize(o.totalheight,e)-n);var s=0;o.width.number>0&&(s=calculateSize(o.width,e));var l={height:makeEm(n+a)};s>0&&(l.width=makeEm(s)),a>0&&(l.verticalAlign=makeEm(-a));var c=new Img(o.src,o.alt,l);return c.height=n,c.depth=a,c},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mglyph",[]);n.setAttribute("alt",o.alt);var a=calculateSize(o.height,e),s=0;if(o.totalheight.number>0&&(s=calculateSize(o.totalheight,e)-a,n.setAttribute("valign",makeEm(-s))),n.setAttribute("height",makeEm(a+s)),o.width.number>0){var l=calculateSize(o.width,e);n.setAttribute("width",makeEm(l))}return n.setAttribute("src",o.src),n}}),defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(o,e){var{parser:n,funcName:a}=o,s=assertNodeType(e[0],"size");if(n.settings.strict){var l=a[1]==="m",c=s.value.unit==="mu";l?(c||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, "+("not "+s.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):c&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:s.value}},htmlBuilder(o,e){return buildCommon.makeGlue(o.dimension,e)},mathmlBuilder(o,e){var n=calculateSize(o.dimension,e);return new mathMLTree.SpaceNode(n)}}),defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"lap",mode:n.mode,alignment:a.slice(5),body:s}},htmlBuilder:(o,e)=>{var n;o.alignment==="clap"?(n=buildCommon.makeSpan([],[buildGroup$1(o.body,e)]),n=buildCommon.makeSpan(["inner"],[n],e)):n=buildCommon.makeSpan(["inner"],[buildGroup$1(o.body,e)]);var a=buildCommon.makeSpan(["fix"],[]),s=buildCommon.makeSpan([o.alignment],[n,a],e),l=buildCommon.makeSpan(["strut"]);return l.style.height=makeEm(s.height+s.depth),s.depth&&(l.style.verticalAlign=makeEm(-s.depth)),s.children.unshift(l),s=buildCommon.makeSpan(["thinbox"],[s],e),buildCommon.makeSpan(["mord","vbox"],[s],e)},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]);if(o.alignment!=="rlap"){var a=o.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",a+"width")}return n.setAttribute("width","0px"),n}}),defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,e){var{funcName:n,parser:a}=o,s=a.mode;a.switchMode("math");var l=n==="\\("?"\\)":"$",c=a.parseExpression(!1,l);return a.expect(l),a.switchMode(s),{type:"styling",mode:a.mode,style:"text",body:c}}}),defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,e){throw new ParseError("Mismatched "+o.funcName)}});var chooseMathStyle=(o,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return o.display;case Style$1.TEXT.size:return o.text;case Style$1.SCRIPT.size:return o.script;case Style$1.SCRIPTSCRIPT.size:return o.scriptscript;default:return o.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(o,e)=>{var{parser:n}=o;return{type:"mathchoice",mode:n.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(o,e)=>{var n=chooseMathStyle(o,e),a=buildExpression$1(n,e,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(o,e)=>{var n=chooseMathStyle(o,e);return buildExpressionRow(n,e)}});var assembleSupSub=(o,e,n,a,s,l,c)=>{o=buildCommon.makeSpan([],[o]);var d=n&&utils.isCharacterBox(n),u,f;if(e){var v=buildGroup$1(e,a.havingStyle(s.sup()),a);f={elem:v,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-v.depth)}}if(n){var b=buildGroup$1(n,a.havingStyle(s.sub()),a);u={elem:b,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-b.height)}}var k;if(f&&u){var x=a.fontMetrics().bigOpSpacing5+u.elem.height+u.elem.depth+u.kern+o.depth+c;k=buildCommon.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:o},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(u){var _=o.height-c;k=buildCommon.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:u.elem,marginLeft:makeEm(-l)},{type:"kern",size:u.kern},{type:"elem",elem:o}]},a)}else if(f){var E=o.depth+c;k=buildCommon.makeVList({positionType:"bottom",positionData:E,children:[{type:"elem",elem:o},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:makeEm(l)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else return o;var B=[k];if(u&&l!==0&&!d){var M=buildCommon.makeSpan(["mspace"],[],a);M.style.marginRight=makeEm(l),B.unshift(M)}return buildCommon.makeSpan(["mop","op-limits"],B,a)},noSuccessor=["\\smallint"],htmlBuilder$2=(o,e)=>{var n,a,s=!1,l;o.type==="supsub"?(n=o.sup,a=o.sub,l=assertNodeType(o.base,"op"),s=!0):l=assertNodeType(o,"op");var c=e.style,d=!1;c.size===Style$1.DISPLAY.size&&l.symbol&&!utils.contains(noSuccessor,l.name)&&(d=!0);var u;if(l.symbol){var f=d?"Size2-Regular":"Size1-Regular",v="";if((l.name==="\\oiint"||l.name==="\\oiiint")&&(v=l.name.slice(1),l.name=v==="oiint"?"\\iint":"\\iiint"),u=buildCommon.makeSymbol(l.name,f,"math",e,["mop","op-symbol",d?"large-op":"small-op"]),v.length>0){var b=u.italic,k=buildCommon.staticSvg(v+"Size"+(d?"2":"1"),e);u=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:0},{type:"elem",elem:k,shift:d?.08:0}]},e),l.name="\\"+v,u.classes.unshift("mop"),u.italic=b}}else if(l.body){var x=buildExpression$1(l.body,e,!0);x.length===1&&x[0]instanceof SymbolNode?(u=x[0],u.classes[0]="mop"):u=buildCommon.makeSpan(["mop"],x,e)}else{for(var _=[],E=1;E<l.name.length;E++)_.push(buildCommon.mathsym(l.name[E],l.mode,e));u=buildCommon.makeSpan(["mop"],_,e)}var B=0,M=0;return(u instanceof SymbolNode||l.name==="\\oiint"||l.name==="\\oiiint")&&!l.suppressBaseShift&&(B=(u.height-u.depth)/2-e.fontMetrics().axisHeight,M=u.italic),s?assembleSupSub(u,n,a,e,c,M,B):(B&&(u.style.position="relative",u.style.top=makeEm(B)),u)},mathmlBuilder$1=(o,e)=>{var n;if(o.symbol)n=new MathNode("mo",[makeText(o.name,o.mode)]),utils.contains(noSuccessor,o.name)&&n.setAttribute("largeop","false");else if(o.body)n=new MathNode("mo",buildExpression(o.body,e));else{n=new MathNode("mi",[new TextNode(o.name.slice(1))]);var a=new MathNode("mo",[makeText("\u2061","text")]);o.parentIsSupSub?n=new MathNode("mrow",[n,a]):n=newDocumentFragment([n,a])}return n},singleCharBigOps={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=a;return s.length===1&&(s=singleCharBigOps[s]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(a)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0},handler(o){var{parser:e,funcName:n}=o,a=n;return a.length===1&&(a=singleCharIntegrals[a]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(o,e)=>{var n,a,s=!1,l;o.type==="supsub"?(n=o.sup,a=o.sub,l=assertNodeType(o.base,"operatorname"),s=!0):l=assertNodeType(o,"operatorname");var c;if(l.body.length>0){for(var d=l.body.map(b=>{var k=b.text;return typeof k=="string"?{type:"textord",mode:b.mode,text:k}:b}),u=buildExpression$1(d,e.withFont("mathrm"),!0),f=0;f<u.length;f++){var v=u[f];v instanceof SymbolNode&&(v.text=v.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}c=buildCommon.makeSpan(["mop"],u,e)}else c=buildCommon.makeSpan(["mop"],[],e);return s?assembleSupSub(c,n,a,e,e.style,0,0):c},mathmlBuilder=(o,e)=>{for(var n=buildExpression(o.body,e.withFont("mathrm")),a=!0,s=0;s<n.length;s++){var l=n[s];if(!(l instanceof mathMLTree.SpaceNode))if(l instanceof mathMLTree.MathNode)switch(l.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var c=l.children[0];l.children.length===1&&c instanceof mathMLTree.TextNode?c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){var d=n.map(v=>v.toText()).join("");n=[new mathMLTree.TextNode(d)]}var u=new mathMLTree.MathNode("mi",n);u.setAttribute("mathvariant","normal");var f=new mathMLTree.MathNode("mo",[makeText("\u2061","text")]);return o.parentIsSupSub?new mathMLTree.MathNode("mrow",[u,f]):mathMLTree.newDocumentFragment([u,f])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(o,e)=>{var{parser:n,funcName:a}=o,s=e[0];return{type:"operatorname",mode:n.mode,body:ordargument(s),alwaysHandleSupSub:a==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder}),defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),defineFunctionBuilders({type:"ordgroup",htmlBuilder(o,e){return o.semisimple?buildCommon.makeFragment(buildExpression$1(o.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(o.body,e,!0),e)},mathmlBuilder(o,e){return buildExpressionRow(o.body,e,!0)}}),defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(o,e){var{parser:n}=o,a=e[0];return{type:"overline",mode:n.mode,body:a}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e.havingCrampedStyle()),a=buildCommon.makeLineSpan("overline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:a},{type:"kern",size:s}]},e);return buildCommon.makeSpan(["mord","overline"],[l],e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("\u203E")]);n.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("mover",[buildGroup(o.body,e),n]);return a.setAttribute("accent","true"),a}}),defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"phantom",mode:n.mode,body:ordargument(a)}},htmlBuilder:(o,e)=>{var n=buildExpression$1(o.body,e.withPhantom(),!1);return buildCommon.makeFragment(n)},mathmlBuilder:(o,e)=>{var n=buildExpression(o.body,e);return new mathMLTree.MathNode("mphantom",n)}}),defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"hphantom",mode:n.mode,body:a}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan([],[buildGroup$1(o.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var a=0;a<n.children.length;a++)n.children[a].height=0,n.children[a].depth=0;return n=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),buildCommon.makeSpan(["mord"],[n],e)},mathmlBuilder:(o,e)=>{var n=buildExpression(ordargument(o.body),e),a=new mathMLTree.MathNode("mphantom",n),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}}),defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,e)=>{var{parser:n}=o,a=e[0];return{type:"vphantom",mode:n.mode,body:a}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan(["inner"],[buildGroup$1(o.body,e.withPhantom())]),a=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[n,a],e)},mathmlBuilder:(o,e)=>{var n=buildExpression(ordargument(o.body),e),a=new mathMLTree.MathNode("mphantom",n),s=new mathMLTree.MathNode("mpadded",[a]);return s.setAttribute("width","0px"),s}}),defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(o,e){var{parser:n}=o,a=assertNodeType(e[0],"size").value,s=e[1];return{type:"raisebox",mode:n.mode,dy:a,body:s}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=calculateSize(o.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]),a=o.dy.number+o.dy.unit;return n.setAttribute("voffset",a),n}}),defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(o){var{parser:e}=o;return{type:"internal",mode:e.mode}}}),defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(o,e,n){var{parser:a}=o,s=n[0],l=assertNodeType(e[0],"size"),c=assertNodeType(e[1],"size");return{type:"rule",mode:a.mode,shift:s&&assertNodeType(s,"size").value,width:l.value,height:c.value}},htmlBuilder(o,e){var n=buildCommon.makeSpan(["mord","rule"],[],e),a=calculateSize(o.width,e),s=calculateSize(o.height,e),l=o.shift?calculateSize(o.shift,e):0;return n.style.borderRightWidth=makeEm(a),n.style.borderTopWidth=makeEm(s),n.style.bottom=makeEm(l),n.width=a,n.height=s+l,n.depth=-l,n.maxFontSize=s*1.125*e.sizeMultiplier,n},mathmlBuilder(o,e){var n=calculateSize(o.width,e),a=calculateSize(o.height,e),s=o.shift?calculateSize(o.shift,e):0,l=e.color&&e.getColor()||"black",c=new mathMLTree.MathNode("mspace");c.setAttribute("mathbackground",l),c.setAttribute("width",makeEm(n)),c.setAttribute("height",makeEm(a));var d=new mathMLTree.MathNode("mpadded",[c]);return s>=0?d.setAttribute("height",makeEm(s)):(d.setAttribute("height",makeEm(s)),d.setAttribute("depth",makeEm(-s))),d.setAttribute("voffset",makeEm(s)),d}});function sizingGroup(o,e,n){for(var a=buildExpression$1(o,e,!1),s=e.sizeMultiplier/n.sizeMultiplier,l=0;l<a.length;l++){var c=a[l].classes.indexOf("sizing");c<0?Array.prototype.push.apply(a[l].classes,e.sizingClasses(n)):a[l].classes[c+1]==="reset-size"+e.size&&(a[l].classes[c+1]="reset-size"+n.size),a[l].height*=s,a[l].depth*=s}return buildCommon.makeFragment(a)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(o,e)=>{var n=e.havingSize(o.size);return sizingGroup(o.body,n,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(o,e)=>{var{breakOnTokenText:n,funcName:a,parser:s}=o,l=s.parseExpression(!1,n);return{type:"sizing",mode:s.mode,size:sizeFuncs.indexOf(a)+1,body:l}},htmlBuilder,mathmlBuilder:(o,e)=>{var n=e.havingSize(o.size),a=buildExpression(o.body,n),s=new mathMLTree.MathNode("mstyle",a);return s.setAttribute("mathsize",makeEm(n.sizeMultiplier)),s}}),defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(o,e,n)=>{var{parser:a}=o,s=!1,l=!1,c=n[0]&&assertNodeType(n[0],"ordgroup");if(c)for(var d="",u=0;u<c.body.length;++u){var f=c.body[u];if(d=f.text,d==="t")s=!0;else if(d==="b")l=!0;else{s=!1,l=!1;break}}else s=!0,l=!0;var v=e[0];return{type:"smash",mode:a.mode,body:v,smashHeight:s,smashDepth:l}},htmlBuilder:(o,e)=>{var n=buildCommon.makeSpan([],[buildGroup$1(o.body,e)]);if(!o.smashHeight&&!o.smashDepth)return n;if(o.smashHeight&&(n.height=0,n.children))for(var a=0;a<n.children.length;a++)n.children[a].height=0;if(o.smashDepth&&(n.depth=0,n.children))for(var s=0;s<n.children.length;s++)n.children[s].depth=0;var l=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord"],[l],e)},mathmlBuilder:(o,e)=>{var n=new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)]);return o.smashHeight&&n.setAttribute("height","0px"),o.smashDepth&&n.setAttribute("depth","0px"),n}}),defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(o,e,n){var{parser:a}=o,s=n[0],l=e[0];return{type:"sqrt",mode:a.mode,body:l,index:s}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=buildCommon.wrapFragment(n,e);var a=e.fontMetrics(),s=a.defaultRuleThickness,l=s;e.style.id<Style$1.TEXT.id&&(l=e.fontMetrics().xHeight);var c=s+l/4,d=n.height+n.depth+c+s,{span:u,ruleWidth:f,advanceWidth:v}=delimiter.sqrtImage(d,e),b=u.height-f;b>n.height+n.depth+c&&(c=(c+b-n.height-n.depth)/2);var k=u.height-n.height-c-f;n.style.paddingLeft=makeEm(v);var x=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+k)},{type:"elem",elem:u},{type:"kern",size:f}]},e);if(o.index){var _=e.havingStyle(Style$1.SCRIPTSCRIPT),E=buildGroup$1(o.index,_,e),B=.6*(x.height-x.depth),M=buildCommon.makeVList({positionType:"shift",positionData:-B,children:[{type:"elem",elem:E}]},e),I=buildCommon.makeSpan(["root"],[M]);return buildCommon.makeSpan(["mord","sqrt"],[I,x],e)}else return buildCommon.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(o,e){var{body:n,index:a}=o;return a?new mathMLTree.MathNode("mroot",[buildGroup(n,e),buildGroup(a,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(n,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o,e){var{breakOnTokenText:n,funcName:a,parser:s}=o,l=s.parseExpression(!0,n),c=a.slice(1,a.length-5);return{type:"styling",mode:s.mode,style:c,body:l}},htmlBuilder(o,e){var n=styleMap[o.style],a=e.havingStyle(n).withFont("");return sizingGroup(o.body,a,e)},mathmlBuilder(o,e){var n=styleMap[o.style],a=e.havingStyle(n),s=buildExpression(o.body,a),l=new mathMLTree.MathNode("mstyle",s),c={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},d=c[o.style];return l.setAttribute("scriptlevel",d[0]),l.setAttribute("displaystyle",d[1]),l}});var htmlBuilderDelegate=function o(e,n){var a=e.base;if(a)if(a.type==="op"){var s=a.limits&&(n.style.size===Style$1.DISPLAY.size||a.alwaysHandleSupSub);return s?htmlBuilder$2:null}else if(a.type==="operatorname"){var l=a.alwaysHandleSupSub&&(n.style.size===Style$1.DISPLAY.size||a.limits);return l?htmlBuilder$1:null}else{if(a.type==="accent")return utils.isCharacterBox(a.base)?htmlBuilder$a:null;if(a.type==="horizBrace"){var c=!e.sub;return c===a.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(o,e){var n=htmlBuilderDelegate(o,e);if(n)return n(o,e);var{base:a,sup:s,sub:l}=o,c=buildGroup$1(a,e),d,u,f=e.fontMetrics(),v=0,b=0,k=a&&utils.isCharacterBox(a);if(s){var x=e.havingStyle(e.style.sup());d=buildGroup$1(s,x,e),k||(v=c.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(l){var _=e.havingStyle(e.style.sub());u=buildGroup$1(l,_,e),k||(b=c.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var E;e.style===Style$1.DISPLAY?E=f.sup1:e.style.cramped?E=f.sup3:E=f.sup2;var B=e.sizeMultiplier,M=makeEm(.5/f.ptPerEm/B),I=null;if(u){var F=o.base&&o.base.type==="op"&&o.base.name&&(o.base.name==="\\oiint"||o.base.name==="\\oiiint");(c instanceof SymbolNode||F)&&(I=makeEm(-c.italic))}var V;if(d&&u){v=Math.max(v,E,d.depth+.25*f.xHeight),b=Math.max(b,f.sub2);var L=f.defaultRuleThickness,U=4*L;if(v-d.depth-(u.height-b)<U){b=U-(v-d.depth)+u.height;var j=.8*f.xHeight-(v-d.depth);j>0&&(v+=j,b-=j)}var oe=[{type:"elem",elem:u,shift:b,marginRight:M,marginLeft:I},{type:"elem",elem:d,shift:-v,marginRight:M}];V=buildCommon.makeVList({positionType:"individualShift",children:oe},e)}else if(u){b=Math.max(b,f.sub1,u.height-.8*f.xHeight);var Y=[{type:"elem",elem:u,marginLeft:I,marginRight:M}];V=buildCommon.makeVList({positionType:"shift",positionData:b,children:Y},e)}else if(d)v=Math.max(v,E,d.depth+.25*f.xHeight),V=buildCommon.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:d,marginRight:M}]},e);else throw new Error("supsub must have either sup or sub.");var K=getTypeOfDomTree(c,"right")||"mord";return buildCommon.makeSpan([K],[c,buildCommon.makeSpan(["msupsub"],[V])],e)},mathmlBuilder(o,e){var n=!1,a,s;o.base&&o.base.type==="horizBrace"&&(s=!!o.sup,s===o.base.isOver&&(n=!0,a=o.base.isOver)),o.base&&(o.base.type==="op"||o.base.type==="operatorname")&&(o.base.parentIsSupSub=!0);var l=[buildGroup(o.base,e)];o.sub&&l.push(buildGroup(o.sub,e)),o.sup&&l.push(buildGroup(o.sup,e));var c;if(n)c=a?"mover":"munder";else if(o.sub)if(o.sup){var d=o.base;d&&d.type==="op"&&d.limits&&e.style===Style$1.DISPLAY||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||d.limits)?c="munderover":c="msubsup"}else{var u=o.base;u&&u.type==="op"&&u.limits&&(e.style===Style$1.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||e.style===Style$1.DISPLAY)?c="munder":c="msub"}else{var f=o.base;f&&f.type==="op"&&f.limits&&(e.style===Style$1.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(f.limits||e.style===Style$1.DISPLAY)?c="mover":c="msup"}return new mathMLTree.MathNode(c,l)}}),defineFunctionBuilders({type:"atom",htmlBuilder(o,e){return buildCommon.mathsym(o.text,o.mode,e,["m"+o.family])},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[makeText(o.text,o.mode)]);if(o.family==="bin"){var a=getVariant(o,e);a==="bold-italic"&&n.setAttribute("mathvariant",a)}else o.family==="punct"?n.setAttribute("separator","true"):(o.family==="open"||o.family==="close")&&n.setAttribute("stretchy","false");return n}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(o,e){return buildCommon.makeOrd(o,e,"mathord")},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mi",[makeText(o.text,o.mode,e)]),a=getVariant(o,e)||"italic";return a!==defaultVariant[n.type]&&n.setAttribute("mathvariant",a),n}}),defineFunctionBuilders({type:"textord",htmlBuilder(o,e){return buildCommon.makeOrd(o,e,"textord")},mathmlBuilder(o,e){var n=makeText(o.text,o.mode,e),a=getVariant(o,e)||"normal",s;return o.mode==="text"?s=new mathMLTree.MathNode("mtext",[n]):/[0-9]/.test(o.text)?s=new mathMLTree.MathNode("mn",[n]):o.text==="\\prime"?s=new mathMLTree.MathNode("mo",[n]):s=new mathMLTree.MathNode("mi",[n]),a!==defaultVariant[s.type]&&s.setAttribute("mathvariant",a),s}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(o,e){if(regularSpace.hasOwnProperty(o.text)){var n=regularSpace[o.text].className||"";if(o.mode==="text"){var a=buildCommon.makeOrd(o,e,"textord");return a.classes.push(n),a}else return buildCommon.makeSpan(["mspace",n],[buildCommon.mathsym(o.text,o.mode,e)],e)}else{if(cssSpace.hasOwnProperty(o.text))return buildCommon.makeSpan(["mspace",cssSpace[o.text]],[],e);throw new ParseError('Unknown type of space "'+o.text+'"')}},mathmlBuilder(o,e){var n;if(regularSpace.hasOwnProperty(o.text))n=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("\xA0")]);else{if(cssSpace.hasOwnProperty(o.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+o.text+'"')}return n}});var pad=()=>{var o=new mathMLTree.MathNode("mtd",[]);return o.setAttribute("width","50%"),o};defineFunctionBuilders({type:"tag",mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(o.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(o.tag,e)])])]);return n.setAttribute("width","100%"),n}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(o,e)=>{var n=o.font;if(n){if(textFontFamilies[n])return e.withTextFontFamily(textFontFamilies[n]);if(textFontWeights[n])return e.withTextFontWeight(textFontWeights[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[n])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(o,e){var{parser:n,funcName:a}=o,s=e[0];return{type:"text",mode:n.mode,body:ordargument(s),font:a}},htmlBuilder(o,e){var n=optionsWithFont(o,e),a=buildExpression$1(o.body,n,!0);return buildCommon.makeSpan(["mord","text"],a,n)},mathmlBuilder(o,e){var n=optionsWithFont(o,e);return buildExpressionRow(o.body,n)}}),defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(o,e){var{parser:n}=o;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=buildCommon.makeLineSpan("underline-line",e),s=e.fontMetrics().defaultRuleThickness,l=buildCommon.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:s},{type:"elem",elem:a},{type:"kern",size:3*s},{type:"elem",elem:n}]},e);return buildCommon.makeSpan(["mord","underline"],[l],e)},mathmlBuilder(o,e){var n=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("\u203E")]);n.setAttribute("stretchy","true");var a=new mathMLTree.MathNode("munder",[buildGroup(o.body,e),n]);return a.setAttribute("accentunder","true"),a}}),defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(o,e){var{parser:n}=o;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(o,e){var n=buildGroup$1(o.body,e),a=e.fontMetrics().axisHeight,s=.5*(n.height-a-(n.depth+a));return buildCommon.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(o,e){return new mathMLTree.MathNode("mpadded",[buildGroup(o.body,e)],["vcenter"])}}),defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(o,e,n){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(o,e){for(var n=makeVerb(o),a=[],s=e.havingStyle(e.style.text()),l=0;l<n.length;l++){var c=n[l];c==="~"&&(c="\\textasciitilde"),a.push(buildCommon.makeSymbol(c,"Typewriter-Regular",o.mode,s,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(s.sizingClasses(e)),buildCommon.tryCombineChars(a),s)},mathmlBuilder(o,e){var n=new mathMLTree.TextNode(makeVerb(o)),a=new mathMLTree.MathNode("mtext",[n]);return a.setAttribute("mathvariant","monospace"),a}});var makeVerb=o=>o.body.replace(/ /g,o.star?"\u2423":"\xA0"),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[\u0300-\u036F]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new Token("EOF",new SourceLocation(this,n,n));var a=this.tokenRegex.exec(e);if(a===null||a.index!==n)throw new ParseError("Unexpected character: '"+e[n]+"'",new Token(e[n],new SourceLocation(this,n,n+1)));var s=a[6]||a[3]||(a[2]?"\\ ":" ");if(this.catcodes[s]===14){var l=e.indexOf(`
`,this.tokenRegex.lastIndex);return l===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=l+1,this.lex()}return new Token(s,new SourceLocation(this,n,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,a){if(a===void 0&&(a=!1),a){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var l=this.undefStack[this.undefStack.length-1];l&&!l.hasOwnProperty(e)&&(l[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var macros=_macros;defineMacro("\\noexpand",function(o){var e=o.popToken();return o.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}}),defineMacro("\\expandafter",function(o){var e=o.popToken();return o.expandOnce(!0),{tokens:[e],numArgs:0}}),defineMacro("\\@firstoftwo",function(o){var e=o.consumeArgs(2);return{tokens:e[0],numArgs:0}}),defineMacro("\\@secondoftwo",function(o){var e=o.consumeArgs(2);return{tokens:e[1],numArgs:0}}),defineMacro("\\@ifnextchar",function(o){var e=o.consumeArgs(3);o.consumeSpaces();var n=o.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}}),defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),defineMacro("\\TextOrMath",function(o){var e=o.consumeArgs(2);return o.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(o){var e=o.popToken(),n,a="";if(e.text==="'")n=8,e=o.popToken();else if(e.text==='"')n=16,e=o.popToken();else if(e.text==="`")if(e=o.popToken(),e.text[0]==="\\")a=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");a=e.text.charCodeAt(0)}else n=10;if(n){if(a=digitToNumber[e.text],a==null||a>=n)throw new ParseError("Invalid base-"+n+" digit "+e.text);for(var s;(s=digitToNumber[o.future().text])!=null&&s<n;)a*=n,a+=s,o.popToken()}return"\\@char{"+a+"}"});var newcommand=(o,e,n)=>{var a=o.consumeArg().tokens;if(a.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var s=a[0].text,l=o.isDefined(s);if(l&&!e)throw new ParseError("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!l&&!n)throw new ParseError("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var c=0;if(a=o.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",u=o.expandNextToken();u.text!=="]"&&u.text!=="EOF";)d+=u.text,u=o.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+d);c=parseInt(d),a=o.consumeArg().tokens}return o.macros.set(s,{tokens:a,numArgs:c}),""};defineMacro("\\newcommand",o=>newcommand(o,!1,!0)),defineMacro("\\renewcommand",o=>newcommand(o,!0,!1)),defineMacro("\\providecommand",o=>newcommand(o,!0,!0)),defineMacro("\\message",o=>{var e=o.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""}),defineMacro("\\errmessage",o=>{var e=o.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""}),defineMacro("\\show",o=>{var e=o.popToken(),n=e.text;return console.log(e,o.macros.get(n),functions[n],symbols.math[n],symbols.text[n]),""}),defineMacro("\\bgroup","{"),defineMacro("\\egroup","}"),defineMacro("~","\\nobreakspace"),defineMacro("\\lq","`"),defineMacro("\\rq","'"),defineMacro("\\aa","\\r a"),defineMacro("\\AA","\\r A"),defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}"),defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}"),defineMacro("\u212C","\\mathscr{B}"),defineMacro("\u2130","\\mathscr{E}"),defineMacro("\u2131","\\mathscr{F}"),defineMacro("\u210B","\\mathscr{H}"),defineMacro("\u2110","\\mathscr{I}"),defineMacro("\u2112","\\mathscr{L}"),defineMacro("\u2133","\\mathscr{M}"),defineMacro("\u211B","\\mathscr{R}"),defineMacro("\u212D","\\mathfrak{C}"),defineMacro("\u210C","\\mathfrak{H}"),defineMacro("\u2128","\\mathfrak{Z}"),defineMacro("\\Bbbk","\\Bbb{k}"),defineMacro("\xB7","\\cdotp"),defineMacro("\\llap","\\mathllap{\\textrm{#1}}"),defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}"),defineMacro("\\clap","\\mathclap{\\textrm{#1}}"),defineMacro("\\mathstrut","\\vphantom{(}"),defineMacro("\\underbar","\\underline{\\text{#1}}"),defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),defineMacro("\\ne","\\neq"),defineMacro("\u2260","\\neq"),defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),defineMacro("\u2209","\\notin"),defineMacro("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),defineMacro("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),defineMacro("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}"),defineMacro("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}"),defineMacro("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}"),defineMacro("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}"),defineMacro("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}"),defineMacro("\u27C2","\\perp"),defineMacro("\u203C","\\mathclose{!\\mkern-0.8mu!}"),defineMacro("\u220C","\\notni"),defineMacro("\u231C","\\ulcorner"),defineMacro("\u231D","\\urcorner"),defineMacro("\u231E","\\llcorner"),defineMacro("\u231F","\\lrcorner"),defineMacro("\xA9","\\copyright"),defineMacro("\xAE","\\textregistered"),defineMacro("\uFE0F","\\textregistered"),defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),defineMacro("\u22EE","\\vdots"),defineMacro("\\varGamma","\\mathit{\\Gamma}"),defineMacro("\\varDelta","\\mathit{\\Delta}"),defineMacro("\\varTheta","\\mathit{\\Theta}"),defineMacro("\\varLambda","\\mathit{\\Lambda}"),defineMacro("\\varXi","\\mathit{\\Xi}"),defineMacro("\\varPi","\\mathit{\\Pi}"),defineMacro("\\varSigma","\\mathit{\\Sigma}"),defineMacro("\\varUpsilon","\\mathit{\\Upsilon}"),defineMacro("\\varPhi","\\mathit{\\Phi}"),defineMacro("\\varPsi","\\mathit{\\Psi}"),defineMacro("\\varOmega","\\mathit{\\Omega}"),defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}"),defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(o){var e="\\dotso",n=o.expandAfterFuture().text;return n in dotsByToken?e=dotsByToken[n]:(n.slice(0,4)==="\\not"||n in symbols.math&&utils.contains(["bin","rel"],symbols.math[n].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(o){var e=o.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"}),defineMacro("\\dotsc",function(o){var e=o.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"}),defineMacro("\\cdots",function(o){var e=o.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"}),defineMacro("\\dotsb","\\cdots"),defineMacro("\\dotsm","\\cdots"),defineMacro("\\dotsi","\\!\\cdots"),defineMacro("\\dotsx","\\ldots\\,"),defineMacro("\\DOTSI","\\relax"),defineMacro("\\DOTSB","\\relax"),defineMacro("\\DOTSX","\\relax"),defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),defineMacro("\\,","\\tmspace+{3mu}{.1667em}"),defineMacro("\\thinspace","\\,"),defineMacro("\\>","\\mskip{4mu}"),defineMacro("\\:","\\tmspace+{4mu}{.2222em}"),defineMacro("\\medspace","\\:"),defineMacro("\\;","\\tmspace+{5mu}{.2777em}"),defineMacro("\\thickspace","\\;"),defineMacro("\\!","\\tmspace-{3mu}{.1667em}"),defineMacro("\\negthinspace","\\!"),defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}"),defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}"),defineMacro("\\enspace","\\kern.5em "),defineMacro("\\enskip","\\hskip.5em\\relax"),defineMacro("\\quad","\\hskip1em\\relax"),defineMacro("\\qquad","\\hskip2em\\relax"),defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren"),defineMacro("\\tag@paren","\\tag@literal{({#1})}"),defineMacro("\\tag@literal",o=>{if(o.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),defineMacro("\\newline","\\\\\\relax"),defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace"),defineMacro("\\@hspace","\\hskip #1\\relax"),defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),defineMacro("\\ordinarycolon",":"),defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),defineMacro("\u2237","\\dblcolon"),defineMacro("\u2239","\\eqcolon"),defineMacro("\u2254","\\coloneqq"),defineMacro("\u2255","\\eqqcolon"),defineMacro("\u2A74","\\Coloneqq"),defineMacro("\\ratio","\\vcentcolon"),defineMacro("\\coloncolon","\\dblcolon"),defineMacro("\\colonequals","\\coloneqq"),defineMacro("\\coloncolonequals","\\Coloneqq"),defineMacro("\\equalscolon","\\eqqcolon"),defineMacro("\\equalscoloncolon","\\Eqqcolon"),defineMacro("\\colonminus","\\coloneq"),defineMacro("\\coloncolonminus","\\Coloneq"),defineMacro("\\minuscolon","\\eqcolon"),defineMacro("\\minuscoloncolon","\\Eqcolon"),defineMacro("\\coloncolonapprox","\\Colonapprox"),defineMacro("\\coloncolonsim","\\Colonsim"),defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}"),defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}"),defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}"),defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}"),defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}"),defineMacro("\\imath","\\html@mathml{\\@imath}{\u0131}"),defineMacro("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}"),defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}"),defineMacro("\u27E6","\\llbracket"),defineMacro("\u27E7","\\rrbracket"),defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),defineMacro("\u2983","\\lBrace"),defineMacro("\u2984","\\rBrace"),defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}"),defineMacro("\u29B5","\\minuso"),defineMacro("\\darr","\\downarrow"),defineMacro("\\dArr","\\Downarrow"),defineMacro("\\Darr","\\Downarrow"),defineMacro("\\lang","\\langle"),defineMacro("\\rang","\\rangle"),defineMacro("\\uarr","\\uparrow"),defineMacro("\\uArr","\\Uparrow"),defineMacro("\\Uarr","\\Uparrow"),defineMacro("\\N","\\mathbb{N}"),defineMacro("\\R","\\mathbb{R}"),defineMacro("\\Z","\\mathbb{Z}"),defineMacro("\\alef","\\aleph"),defineMacro("\\alefsym","\\aleph"),defineMacro("\\Alpha","\\mathrm{A}"),defineMacro("\\Beta","\\mathrm{B}"),defineMacro("\\bull","\\bullet"),defineMacro("\\Chi","\\mathrm{X}"),defineMacro("\\clubs","\\clubsuit"),defineMacro("\\cnums","\\mathbb{C}"),defineMacro("\\Complex","\\mathbb{C}"),defineMacro("\\Dagger","\\ddagger"),defineMacro("\\diamonds","\\diamondsuit"),defineMacro("\\empty","\\emptyset"),defineMacro("\\Epsilon","\\mathrm{E}"),defineMacro("\\Eta","\\mathrm{H}"),defineMacro("\\exist","\\exists"),defineMacro("\\harr","\\leftrightarrow"),defineMacro("\\hArr","\\Leftrightarrow"),defineMacro("\\Harr","\\Leftrightarrow"),defineMacro("\\hearts","\\heartsuit"),defineMacro("\\image","\\Im"),defineMacro("\\infin","\\infty"),defineMacro("\\Iota","\\mathrm{I}"),defineMacro("\\isin","\\in"),defineMacro("\\Kappa","\\mathrm{K}"),defineMacro("\\larr","\\leftarrow"),defineMacro("\\lArr","\\Leftarrow"),defineMacro("\\Larr","\\Leftarrow"),defineMacro("\\lrarr","\\leftrightarrow"),defineMacro("\\lrArr","\\Leftrightarrow"),defineMacro("\\Lrarr","\\Leftrightarrow"),defineMacro("\\Mu","\\mathrm{M}"),defineMacro("\\natnums","\\mathbb{N}"),defineMacro("\\Nu","\\mathrm{N}"),defineMacro("\\Omicron","\\mathrm{O}"),defineMacro("\\plusmn","\\pm"),defineMacro("\\rarr","\\rightarrow"),defineMacro("\\rArr","\\Rightarrow"),defineMacro("\\Rarr","\\Rightarrow"),defineMacro("\\real","\\Re"),defineMacro("\\reals","\\mathbb{R}"),defineMacro("\\Reals","\\mathbb{R}"),defineMacro("\\Rho","\\mathrm{P}"),defineMacro("\\sdot","\\cdot"),defineMacro("\\sect","\\S"),defineMacro("\\spades","\\spadesuit"),defineMacro("\\sub","\\subset"),defineMacro("\\sube","\\subseteq"),defineMacro("\\supe","\\supseteq"),defineMacro("\\Tau","\\mathrm{T}"),defineMacro("\\thetasym","\\vartheta"),defineMacro("\\weierp","\\wp"),defineMacro("\\Zeta","\\mathrm{Z}"),defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),defineMacro("\\bra","\\mathinner{\\langle{#1}|}"),defineMacro("\\ket","\\mathinner{|{#1}\\rangle}"),defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}"),defineMacro("\\Bra","\\left\\langle#1\\right|"),defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=o=>e=>{var n=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.consumeArg().tokens,l=e.consumeArg().tokens,c=e.macros.get("|"),d=e.macros.get("\\|");e.macros.beginGroup();var u=b=>k=>{o&&(k.macros.set("|",c),s.length&&k.macros.set("\\|",d));var x=b;if(!b&&s.length){var _=k.future();_.text==="|"&&(k.popToken(),x=!0)}return{tokens:x?s:a,numArgs:0}};e.macros.set("|",u(!1)),s.length&&e.macros.set("\\|",u(!0));var f=e.consumeArg().tokens,v=e.expandTokens([...l,...f,...n]);return e.macros.endGroup(),{tokens:v.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1)),defineMacro("\\bra@set",braketHelper(!0)),defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),defineMacro("\\angln","{\\angl n}"),defineMacro("\\blue","\\textcolor{##6495ed}{#1}"),defineMacro("\\orange","\\textcolor{##ffa500}{#1}"),defineMacro("\\pink","\\textcolor{##ff00af}{#1}"),defineMacro("\\red","\\textcolor{##df0030}{#1}"),defineMacro("\\green","\\textcolor{##28ae7b}{#1}"),defineMacro("\\gray","\\textcolor{gray}{#1}"),defineMacro("\\purple","\\textcolor{##9d38bd}{#1}"),defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}"),defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}"),defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}"),defineMacro("\\blueD","\\textcolor{##11accd}{#1}"),defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}"),defineMacro("\\tealA","\\textcolor{##94fff5}{#1}"),defineMacro("\\tealB","\\textcolor{##26edd5}{#1}"),defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}"),defineMacro("\\tealD","\\textcolor{##01a995}{#1}"),defineMacro("\\tealE","\\textcolor{##208170}{#1}"),defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}"),defineMacro("\\greenB","\\textcolor{##8af281}{#1}"),defineMacro("\\greenC","\\textcolor{##74cf70}{#1}"),defineMacro("\\greenD","\\textcolor{##1fab54}{#1}"),defineMacro("\\greenE","\\textcolor{##0d923f}{#1}"),defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}"),defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}"),defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}"),defineMacro("\\goldD","\\textcolor{##e07d10}{#1}"),defineMacro("\\goldE","\\textcolor{##a75a05}{#1}"),defineMacro("\\redA","\\textcolor{##fca9a9}{#1}"),defineMacro("\\redB","\\textcolor{##ff8482}{#1}"),defineMacro("\\redC","\\textcolor{##f9685d}{#1}"),defineMacro("\\redD","\\textcolor{##e84d39}{#1}"),defineMacro("\\redE","\\textcolor{##bc2612}{#1}"),defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}"),defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}"),defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}"),defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}"),defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}"),defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}"),defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}"),defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}"),defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}"),defineMacro("\\purpleE","\\textcolor{##543b78}{#1}"),defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}"),defineMacro("\\mintB","\\textcolor{##edf2df}{#1}"),defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}"),defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}"),defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}"),defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}"),defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}"),defineMacro("\\grayE","\\textcolor{##babec2}{#1}"),defineMacro("\\grayF","\\textcolor{##888d93}{#1}"),defineMacro("\\grayG","\\textcolor{##626569}{#1}"),defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}"),defineMacro("\\grayI","\\textcolor{##21242c}{#1}"),defineMacro("\\kaBlue","\\textcolor{##314453}{#1}"),defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,n,a){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,n.macros),this.mode=a,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,a,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:s,end:a}=this.consumeArg(["]"])}else({tokens:s,start:n,end:a}=this.consumeArg());return this.pushToken(new Token("EOF",a.loc)),this.pushTokens(s),n.range(a,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],a=e&&e.length>0;a||this.consumeSpaces();var s=this.future(),l,c=0,d=0;do{if(l=this.popToken(),n.push(l),l.text==="{")++c;else if(l.text==="}"){if(--c,c===-1)throw new ParseError("Extra }",l)}else if(l.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&a?e[d]:"}")+"'",l);if(e&&a)if((c===0||c===1&&e[d]==="{")&&l.text===e[d]){if(++d,d===e.length){n.splice(-d,d);break}}else d=0}while(c!==0||a);return s.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:s,end:l}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var a=n[0],s=0;s<a.length;s++){var l=this.popToken();if(a[s]!==l.text)throw new ParseError("Use of the macro doesn't match its definition",l)}}for(var c=[],d=0;d<e;d++)c.push(this.consumeArg(n&&n[d+1]).tokens);return c}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),a=n.text,s=n.noexpand?null:this._getExpansion(a);if(s==null||e&&s.unexpandable){if(e&&s==null&&a[0]==="\\"&&!this.isDefined(a))throw new ParseError("Undefined control sequence: "+a);return this.pushToken(n),!1}this.countExpansion(1);var l=s.tokens,c=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){l=l.slice();for(var d=l.length-1;d>=0;--d){var u=l[d];if(u.text==="#"){if(d===0)throw new ParseError("Incomplete placeholder at end of macro body",u);if(u=l[--d],u.text==="#")l.splice(d+1,1);else if(/^[1-9]$/.test(u.text))l.splice(d,2,...c[+u.text-1]);else throw new ParseError("Not a valid argument number",u)}}}return this.pushTokens(l),l.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var n=[],a=this.stack.length;for(this.pushTokens(e);this.stack.length>a;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),n.push(s)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(a=>a.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var a=this.lexer.catcodes[e];if(a!=null&&a!==13)return}var s=typeof n=="function"?n(this):n;if(typeof s=="string"){var l=0;if(s.indexOf("#")!==-1)for(var c=s.replace(/##/g,"");c.indexOf("#"+(l+1))!==-1;)++l;for(var d=new Lexer(s,this.settings),u=[],f=d.lex();f.text!=="EOF";)u.push(f),f=d.lex();u.reverse();var v={tokens:u,numArgs:l};return v}return s}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,uSubsAndSups=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),unicodeAccents={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},unicodeSymbols={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"};class Parser{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var a=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,a}parseExpression(e,n){for(var a=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(Parser.endOfExpression.indexOf(s.text)!==-1||n&&s.text===n||e&&functions[s.text]&&functions[s.text].infix)break;var l=this.parseAtom(n);if(l){if(l.type==="internal")continue}else break;a.push(l)}return this.mode==="text"&&this.formLigatures(a),this.handleInfixNodes(a)}handleInfixNodes(e){for(var n=-1,a,s=0;s<e.length;s++)if(e[s].type==="infix"){if(n!==-1)throw new ParseError("only one infix operator per group",e[s].token);n=s,a=e[s].replaceWith}if(n!==-1&&a){var l,c,d=e.slice(0,n),u=e.slice(n+1);d.length===1&&d[0].type==="ordgroup"?l=d[0]:l={type:"ordgroup",mode:this.mode,body:d},u.length===1&&u[0].type==="ordgroup"?c=u[0]:c={type:"ordgroup",mode:this.mode,body:u};var f;return a==="\\\\abovefrac"?f=this.callFunction(a,[l,e[n],c],[]):f=this.callFunction(a,[l,c],[]),[f]}else return e}handleSupSubscript(e){var n=this.fetch(),a=n.text;this.consume(),this.consumeSpaces();var s=this.parseGroup(e);if(!s)throw new ParseError("Expected group after '"+a+"'",n);return s}formatUnsupportedCmd(e){for(var n=[],a=0;a<e.length;a++)n.push({type:"textord",mode:"text",text:e[a]});var s={type:"text",mode:this.mode,body:n},l={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return l}parseAtom(e){var n=this.parseGroup("atom",e);if(this.mode==="text")return n;for(var a,s;;){this.consumeSpaces();var l=this.fetch();if(l.text==="\\limits"||l.text==="\\nolimits"){if(n&&n.type==="op"){var c=l.text==="\\limits";n.limits=c,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=l.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",l);this.consume()}else if(l.text==="^"){if(a)throw new ParseError("Double superscript",l);a=this.handleSupSubscript("superscript")}else if(l.text==="_"){if(s)throw new ParseError("Double subscript",l);s=this.handleSupSubscript("subscript")}else if(l.text==="'"){if(a)throw new ParseError("Double superscript",l);var d={type:"textord",mode:this.mode,text:"\\prime"},u=[d];for(this.consume();this.fetch().text==="'";)u.push(d),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),a={type:"ordgroup",mode:this.mode,body:u}}else if(uSubsAndSups[l.text]){var f=unicodeSubRegEx.test(l.text),v=[];for(v.push(new Token(uSubsAndSups[l.text])),this.consume();;){var b=this.fetch().text;if(!uSubsAndSups[b]||unicodeSubRegEx.test(b)!==f)break;v.unshift(new Token(uSubsAndSups[b])),this.consume()}var k=this.subparse(v);f?s={type:"ordgroup",mode:"math",body:k}:a={type:"ordgroup",mode:"math",body:k}}else break}return a||s?{type:"supsub",mode:this.mode,base:n,sup:a,sub:s}:n}parseFunction(e,n){var a=this.fetch(),s=a.text,l=functions[s];if(!l)return null;if(this.consume(),n&&n!=="atom"&&!l.allowedInArgument)throw new ParseError("Got function '"+s+"' with no arguments"+(n?" as "+n:""),a);if(this.mode==="text"&&!l.allowedInText)throw new ParseError("Can't use function '"+s+"' in text mode",a);if(this.mode==="math"&&l.allowedInMath===!1)throw new ParseError("Can't use function '"+s+"' in math mode",a);var{args:c,optArgs:d}=this.parseArguments(s,l);return this.callFunction(s,c,d,a,e)}callFunction(e,n,a,s,l){var c={funcName:e,parser:this,token:s,breakOnTokenText:l},d=functions[e];if(d&&d.handler)return d.handler(c,n,a);throw new ParseError("No function handler for "+e)}parseArguments(e,n){var a=n.numArgs+n.numOptionalArgs;if(a===0)return{args:[],optArgs:[]};for(var s=[],l=[],c=0;c<a;c++){var d=n.argTypes&&n.argTypes[c],u=c<n.numOptionalArgs;(n.primitive&&d==null||n.type==="sqrt"&&c===1&&l[0]==null)&&(d="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",d,u);if(u)l.push(f);else if(f!=null)s.push(f);else throw new ParseError("Null argument, please report this as a bug")}return{args:s,optArgs:l}}parseGroupOfType(e,n,a){switch(n){case"color":return this.parseColorGroup(a);case"size":return this.parseSizeGroup(a);case"url":return this.parseUrlGroup(a);case"math":case"text":return this.parseArgumentGroup(a,n);case"hbox":{var s=this.parseArgumentGroup(a,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var l=this.parseStringGroup("raw",a);return l!=null?{type:"raw",mode:"text",string:l.text}:null}case"primitive":{if(a)throw new ParseError("A primitive argument cannot be optional");var c=this.parseGroup(e);if(c==null)throw new ParseError("Expected group as "+e,this.fetch());return c}case"original":case null:case void 0:return this.parseArgumentGroup(a);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var a=this.gullet.scanArgument(n);if(a==null)return null;for(var s="",l;(l=this.fetch()).text!=="EOF";)s+=l.text,this.consume();return this.consume(),a.text=s,a}parseRegexGroup(e,n){for(var a=this.fetch(),s=a,l="",c;(c=this.fetch()).text!=="EOF"&&e.test(l+c.text);)s=c,l+=s.text,this.consume();if(l==="")throw new ParseError("Invalid "+n+": '"+a.text+"'",a);return a.range(s,l)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var a=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!a)throw new ParseError("Invalid color: '"+n.text+"'",n);var s=a[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(e){var n,a=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",a=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!s)throw new ParseError("Invalid size: '"+n.text+"'",n);var l={number:+(s[1]+s[2]),unit:s[3]};if(!validUnit(l))throw new ParseError("Invalid unit: '"+l.unit+"'",n);return{type:"size",mode:this.mode,value:l,isBlank:a}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var a=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}}parseArgumentGroup(e,n){var a=this.gullet.scanArgument(e);if(a==null)return null;var s=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var l=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var c={type:"ordgroup",mode:this.mode,loc:a.loc,body:l};return n&&this.switchMode(s),c}parseGroup(e,n){var a=this.fetch(),s=a.text,l;if(s==="{"||s==="\\begingroup"){this.consume();var c=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var d=this.parseExpression(!1,c),u=this.fetch();this.expect(c),this.gullet.endGroup(),l={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(a,u),body:d,semisimple:s==="\\begingroup"||void 0}}else if(l=this.parseFunction(n,e)||this.parseSymbol(),l==null&&s[0]==="\\"&&!implicitCommands.hasOwnProperty(s)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+s,a);l=this.formatUnsupportedCmd(s),this.consume()}return l}formLigatures(e){for(var n=e.length-1,a=0;a<n;++a){var s=e[a],l=s.text;l==="-"&&e[a+1].text==="-"&&(a+1<n&&e[a+2].text==="-"?(e.splice(a,3,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+2]),text:"---"}),n-=2):(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:"--"}),n-=1)),(l==="'"||l==="`")&&e[a+1].text===l&&(e.splice(a,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,e[a+1]),text:l+l}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var a=n.slice(5),s=a.charAt(0)==="*";if(s&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:s}}unicodeSymbols.hasOwnProperty(n[0])&&!symbols[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=unicodeSymbols[n[0]]+n.slice(1));var l=combiningDiacriticalMarksEndRegex.exec(n);l&&(n=n.substring(0,l.index),n==="i"?n="\u0131":n==="j"&&(n="\u0237"));var c;if(symbols[this.mode][n]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var d=symbols[this.mode][n].group,u=SourceLocation.range(e),f;if(ATOMS.hasOwnProperty(d)){var v=d;f={type:"atom",mode:this.mode,family:v,loc:u,text:n}}else f={type:d,mode:this.mode,loc:u,text:n};c=f}else if(n.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),c={type:"textord",mode:"text",loc:SourceLocation.range(e),text:n};else return null;if(this.consume(),l)for(var b=0;b<l[0].length;b++){var k=l[0][b];if(!unicodeAccents[k])throw new ParseError("Unknown accent ' "+k+"'",e);var x=unicodeAccents[k][this.mode]||unicodeAccents[k].text;if(!x)throw new ParseError("Accent "+k+" unsupported in "+this.mode+" mode",e);c={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:x,isStretchy:!1,isShifty:!0,base:c}}return c}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function o(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var a=new Parser(e,n);delete a.gullet.macros.current["\\df@tag"];var s=a.parse();if(delete a.gullet.macros.current["\\current@color"],delete a.gullet.macros.current["\\color"],a.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new ParseError("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:a.subparse([new Token("\\df@tag")])}]}return s},render=function o(e,n,a){n.textContent="";var s=renderToDomTree(e,a).toNode();n.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function o(e,n){var a=renderToDomTree(e,n).toMarkup();return a},generateParseTree=function o(e,n){var a=new Settings(n);return parseTree(e,a)},renderError=function o(e,n,a){if(a.throwOnError||!(e instanceof ParseError))throw e;var s=buildCommon.makeSpan(["katex-error"],[new SymbolNode(n)]);return s.setAttribute("title",e.toString()),s.setAttribute("style","color:"+a.errorColor),s},renderToDomTree=function o(e,n){var a=new Settings(n);try{var s=parseTree(e,a);return buildTree(s,e,a)}catch(l){return renderError(l,e,a)}},renderToHTMLTree=function o(e,n){var a=new Settings(n);try{var s=parseTree(e,a);return buildHTMLTree(s,e,a)}catch(l){return renderError(l,e,a)}},version="0.16.19",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};const Ut=class Ut{constructor(e,n,a,s){Ht(this,"dom");Ht(this,"pmView");Ht(this,"getPos");Ht(this,"katexContainer");Ht(this,"ctx");Ht(this,"onBlur",e=>{this.deselect()});Ht(this,"src","");this.pmView=n,this.getPos=a,this.dom=document.createElement("span"),this.ctx=s;const l=e.attrs.src;this.src=l,this.katexContainer=document.createElement("span"),this.katexContainer.classList.add(Ut.KATEX_CONTAINER_CLASS),this.renderEquation(),this.dom.append(this.katexContainer),this.katexContainer.addEventListener("click",()=>{this.showMathEditor()})}renderEquation(){this.src.trim().length>0?(katex.render(this.src,this.katexContainer,Ut.KATEX_RENDER_OPTION),this.katexContainer.classList.remove("empty")):(this.katexContainer.textContent="EMPTY EQUATION",this.katexContainer.classList.add("empty"))}showMathEditor(){const e=this.pmView.state.doc.nodeAt(this.getPos());if(!e)return;const n=e.attrs.src;this.ctx.openFloatingMathInput(this.katexContainer,n,a=>{this.src=a,this.renderEquation()},()=>this.skipLeft(),()=>this.skipRight(),()=>this.skipRight(),()=>this.deleteThisNode())}syncToProseMirror(){const e=this.getPos(),n=this.pmView.state.schema.nodes.mathInline.create({src:this.src}),a=this.pmView.state.tr.replaceRangeWith(e,e+1,n);return a.setSelection(NodeSelection.create(a.doc,e)),a}skipRight(){const e=this.getPos(),n=this.syncToProseMirror();let a;try{a=TextSelection.create(n.doc,e+1)}catch{a=AllSelection.atEnd(n.doc)}n.setSelection(a),this.pmView.dispatch(n),this.pmView.focus()}skipLeft(){const e=this.getPos(),n=this.syncToProseMirror();let a;try{a=TextSelection.create(n.doc,e-1)}catch{a=AllSelection.atStart(n.doc)}n.setSelection(a),this.pmView.dispatch(n),this.pmView.focus()}deleteThisNode(){const e=this.getPos(),n=NodeSelection.create(this.pmView.state.doc,e),a=this.pmView.state.tr.setSelection(n);a.deleteSelection(),this.pmView.dispatch(a),this.pmView.focus()}stopEvent(){return!0}ignoreMutation(){return!1}selectNode(){this.showMathEditor()}deselect(){}destroy(){this.katexContainer.innerHTML="",this.katexContainer.remove()}};Ht(Ut,"KATEX_RENDER_OPTION",{displayMode:!1,throwOnError:!1}),Ht(Ut,"KATEX_CONTAINER_CLASS","math-inline--katex");let MathInlineKatex=Ut;const mkKeymapPlugin=o=>{const e=o.keymapContext;if(!e)throw new Error("Cannot find keymap context");const n=computed(()=>generateKeydownHandler(e.prosemirrorKeymap.value,a=>[a.state,a.dispatch,a],(a,s)=>s));return new Plugin({props:{handleKeyDown:(a,s)=>{n.value(a,s)}}})},generateImageName=(o,e)=>`${o}__${nanoid()}.${e}`,mkPasteImagePlugin=o=>{const e=useTaskQueue(),n=o.imagesContext,a=o.lastFocusContext,s=o.pathsContext,l=o.blocksContext;return new Plugin({props:{handlePaste(c,d,u){var B;if(!n||!a||!s||!l)return!1;const f=a.lastFocusedBlockTree.value,v=a.lastFocusedDiId.value,b=v?f==null?void 0:f.getDi(v):null;if(!f||!v||!b||!DI_FILTERS.isBlockDi(b))return!1;const k=b.block.id;let x=null,_=null;const E=(B=d.clipboardData)==null?void 0:B.items;if(!(!E||E.length==0)){for(let M=0;M<E.length;M++){const I=E[M],F=I.type.match(/image\/([a-z]+)/);F&&(x=F[1],_=I.getAsFile())}if(x&&_){const M=generateImageName(_.name,x),I=[BLOCK_CONTENT_TYPES.IMAGE,M,"left",null,null,[]];let F=null;c.state.doc.content.size==0?(F=k,e.addTask(()=>{l.blockEditor.changeBlockContent({blockId:k,content:I})})):e.addTask(()=>{const V=l.blockEditor,{newNormalBlockId:L}=V.insertNormalBlock({pos:{baseBlockId:k,offset:1},content:I})??{};F=L??null}),F&&n.uploadImage(_,M)}}}}})},blockTags={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,BODY:!0,CANVAS:!0,DD:!0,DIV:!0,DL:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,LI:!0,NOSCRIPT:!0,OL:!0,OUTPUT:!0,P:!0,PRE:!0,SECTION:!0,TABLE:!0,TFOOT:!0,UL:!0},ignoreTags={HEAD:!0,NOSCRIPT:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TITLE:!0};function parseHtml(o,e){const n=new DOMParser().parseFromString(e,"text/html"),a=[],s={},l=DOMParser$1.fromSchema(o);function c(u,f,v){let b=l.parse(u);if(b.content.size===0)return;const k=[],x=linkify(b.content,k),_=Slice.maxOpen(x);b=b.replace(0,b.content.size,_);const E=nanoid();s[E]={id:E,content:[BLOCK_CONTENT_TYPES.TEXT,b.toJSON()],children:[],parentId:v},f.push(s[E])}function d(u,f,v){if(u instanceof HTMLOListElement||u instanceof HTMLUListElement){const b=f.length===0?f:f[f.length-1].children,k=f.length===0?v:f[f.length-1].id;for(const x of u.childNodes)d(x,b,k)}else if(u instanceof HTMLElement&&blockTags[u.tagName]){const b=[...u.childNodes.values()];for(let k=0;k<b.length;k++){let x=k;for(;x<b.length;x++){const _=b[x];if(_ instanceof HTMLElement&&blockTags[_.tagName])break}if(x>k){const _=document.createElement("div");_.append(...b.slice(k,x)),c(_,f,v),_.remove()}x<b.length&&d(b[x],f,v),k=x}}else{if(u instanceof HTMLElement&&ignoreTags[u.tagName])return;c(u,f,v)}}return d(n.body,a,void 0),[a,s]}const PingSchema={request:z.object({}),result:z.object({})},FetchWebpageTitleSchema={request:z.object({webpageUrl:z.string()}),result:z.object({title:z.string()})},ping=usePostApi("/ping",PingSchema.request,PingSchema.result),fetchWebpageTitle=usePostApi("/fetch-webpage-title",FetchWebpageTitleSchema.request,FetchWebpageTitleSchema.result),hrefToTitle=(o,e)=>{const n=[];e.state.doc.descendants((a,s)=>{const l=o.marks.link.isInSet(a.marks);l&&n.push(l.attrs.href)});for(const a of n)fetchWebpageTitle({webpageUrl:a}).then(s=>{if(!s.success)return;const l=s.data.title;if(!l||e.isDestroyed)return;let c=null;if(e.state.doc.descendants((v,b)=>{if(c)return!1;const k=o.marks.link.isInSet(v.marks);if(k&&k.attrs.href===a)return c={node:v,pos:b},!1}),!c)return;const d=o.marks.link.create({href:a}),u=o.text(l,[d]),f=e.state.tr.replaceWith(c.pos,c.pos+c.node.nodeSize,u);e.dispatch(f)})},TOO_LARGE_NODE_COUNT=1e3,TOO_LARGE_CHAR_COUNT=1e4,mkPasteTextPlugin=o=>{var s,l;const e=o.lastFocusContext,n=(s=o.blocksContext)==null?void 0:s.blocksManager,a=(l=o.blocksContext)==null?void 0:l.blockEditor;return new Plugin({props:{handlePaste(c,d){var B,M;if(!e||!n||!a)return!1;d.preventDefault(),d.stopImmediatePropagation();const u=useTaskQueue(),f=e.lastFocusedBlockTree.value,v=e.lastFocusedDiId.value,b=v?f==null?void 0:f.getDi(v):null;if(!f||!v||!b||!DI_FILTERS.isBlockDi(b))return!1;const k=c.state.doc.textContent.trim()==="",x=b.block.id,_=o.getSchema(),E=(B=d.clipboardData)==null?void 0:B.getData("text/html");if(E){const[I,F]=parseHtml(_,E);if(I.length===0)return!1;if(Object.keys(F).length>TOO_LARGE_NODE_COUNT)return o.pasteDialogContext&&(o.pasteDialogContext.open.value=!0),!0;if(Object.keys(F).length===1){const V=Object.values(F)[0];if(V.content[0]===BLOCK_CONTENT_TYPES.TEXT){const L=Node$1.fromJSON(_,V.content[1]),U=c.state.tr.replaceSelectionWith(L);return c.dispatch(U),hrefToTitle(_,c),!0}}return u.addTask(async()=>{const V=n.createBlockTransaction({type:"ui"});if(Object.values(F).forEach(L=>{L.parentId!=null&&V.addBlock({type:"normalBlock",id:L.id,parentId:L.parentId,childrenIds:L.children.map(U=>U.id),fold:!1,content:L.content,metadata:{}})}),a.insertNormalBlocks({pos:{baseBlockId:x,offset:1},blocks:I.map(L=>({id:L.id,content:L.content,childrenIds:L.children.map(U=>U.id)})),tr:V,commit:!1}),k&&V.deleteBlock(x),V.commit(),f){await f.nextUpdate();const L=I[I.length-1].id;if(L){const U=f.findDi(j=>j.type==="basic-block"&&j.block.id===L);U&&(f.focusDi(U[0].itemId),f.moveCursorToTheEnd(U[0].itemId))}}}),hrefToTitle(_,c),!0}else{const I=(M=d.clipboardData)==null?void 0:M.getData("text/plain");if(!I)return!1;if(I.length>TOO_LARGE_CHAR_COUNT)return o.pasteDialogContext&&(o.pasteDialogContext.open.value=!0),!0;const F=I.split(/\r?\n/).filter(V=>V.trim());return F.length===0?!1:(u.addTask(async()=>{const V=n.createBlockTransaction({type:"ui"});if(F.length===1){const U=plainTextToPmNode(F[0],_),j=c.state.tr.replaceSelectionWith(U);c.dispatch(j),hrefToTitle(_,c);return}const{newNormalBlockIds:L}=a.insertNormalBlocks({pos:{baseBlockId:x,offset:1},blocks:F.map(U=>({content:plainTextToTextContent(U,_)})),tr:V,commit:!1})??{};if(k&&V.deleteBlock(x),V.commit(),f){await f.nextUpdate();const U=L==null?void 0:L[L.length-1];if(U){const j=f.findDi(oe=>oe.type==="basic-block"&&oe.block.id===U);j&&(f.focusDi(j[0].itemId),f.moveCursorToTheEnd(j[0].itemId))}}hrefToTitle(_,c)}),!0)}}}})},turnToInlineCode=o=>new InputRule(/`([^`]+)`$/,(e,n)=>{const a=e.selection.anchor,s=o.getSchema(),l=s.marks.code.create({}),c=s.text(n[1],[l]),d=e.tr.replaceRangeWith(a-n[0].length+1,a,c);return d.removeStoredMark(l),d}),_sfc_main$1X=defineComponent({__name:"TextContent",props:{blockTree:{type:Object,required:!1},itemId:{type:String,required:!1},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1},highlightTerms:{type:Array,required:!1},highlightRefs:{type:Array,required:!1}},setup(o,{expose:e}){e();const n=o,{blocksManager:a,blockEditor:s}=BlocksContext.useContext(),l=FloatingMathInputContext.useContext(),c=HistoryContext.useContext(),d=useTaskQueue(),u=shallowRef(null),f=ref(null),v={mathInline(E,B,M){return new MathInlineKatex(E,B,M,l)}},b=computed(()=>getPmSchema({pushHistoryItem:c?c.pushHistoryItem:void 0,getMainTree:n.blockTree?()=>n.blockTree:void 0,getBlockRef:a.getBlockRef})),k=({newDoc:E,oldSelection:B,newSelection:M})=>{const I=n.block.id,F=[BLOCK_CONTENT_TYPES.TEXT,E];u.value=E,d.addTask(({mergedTasks:V})=>{var j;const L=V[0],U=a.createBlockTransaction({type:"ui"});s.changeBlockContent({blockId:I,content:F,tr:U,commit:!1}),U.meta.envUndoStrategy="create",U.envInfo.onCreate={...U.envInfo.onCreate,selection:((j=L==null?void 0:L.meta)==null?void 0:j.oldSelection)??B},U.commit()},{type:"updateBlockContent"+I,delay:500,debounce:!0,meta:{oldSelection:B,newSelection:M}})},x=E=>n.readonly?[]:[inputRules({rules:[openRefSuggestions(E),turnToCodeBlock(E),turnToInlineCode(E)]}),mkKeymapPlugin(E),mkPasteImagePlugin(E),mkPasteTextPlugin(E)];watch(()=>n.block.content,E=>{var M;if(E[0]!=BLOCK_CONTENT_TYPES.TEXT)return;const B=n.block.origin;B.type==="ui"&&((M=B.changeSources)!=null&&M.includes(n.block.id))&&u.value!==null||(u.value=E[1])},{immediate:!0}),onMounted(()=>{var E,B;if(n.itemId){const M=(E=f.value)==null?void 0:E.getEditorView();M&&((B=n.blockTree)==null||B.registerEditorView(n.itemId,M))}}),onUnmounted(()=>{var E,B;if(n.itemId){const M=(E=f.value)==null?void 0:E.getEditorView();M&&((B=n.blockTree)==null||B.unregisterEditorView(n.itemId,M),M.destroy())}});const _={props:n,blocksManager:a,blockEditor:s,fmic:l,historyContext:c,taskQueue:d,docJson:u,pmWrapper:f,nodeViews:v,schema:b,onDocChanged:k,buildPlugins:x,ProseMirror};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function _sfc_render$1X(o,e,n,a,s,l){return openBlock(),createBlock(a.ProseMirror,{class:"text-content block-content",ref:"pmWrapper",doc:a.docJson,"onUpdate:doc":e[0]||(e[0]=c=>a.docJson=c),"item-id":n.itemId,"block-tree":n.blockTree,schema:a.schema,readonly:n.readonly,"plugins-builder":a.buildPlugins,"disable-spellcheck-when-blur":!0,"on-doc-changed":a.onDocChanged,"node-views":a.nodeViews,"highlight-terms":n.highlightTerms,"highlight-refs":n.highlightRefs},null,8,["doc","item-id","block-tree","schema","readonly","highlight-terms","highlight-refs"])}const TextContent=_export_sfc(_sfc_main$1X,[["render",_sfc_render$1X],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/block-contents/TextContent.vue"]]),_sfc_main$1W=defineComponent({__name:"Popover",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get PopoverRoot(){return ys}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$1W(o,e,n,a,s,l){return openBlock(),createBlock(a.PopoverRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Popover=_export_sfc(_sfc_main$1W,[["render",_sfc_render$1W],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/popover/Popover.vue"]]),_sfc_main$1V=defineComponent({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get PopoverContent(){return ws},get PopoverPortal(){return bs}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1V(o,e,n,a,s,l){return openBlock(),createBlock(a.PopoverPortal,{style:{backgroundColor:"red"}},{default:withCtx(()=>[createVNode(a.PopoverContent,mergeProps({...a.forwarded,...o.$attrs},{class:a.cn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const PopoverContent=_export_sfc(_sfc_main$1V,[["render",_sfc_render$1V],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/popover/PopoverContent.vue"]]),_sfc_main$1U=defineComponent({__name:"PopoverTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get PopoverTrigger(){return gs}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1U(o,e,n,a,s,l){return openBlock(),createBlock(a.PopoverTrigger,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const PopoverTrigger=_export_sfc(_sfc_main$1U,[["render",_sfc_render$1U],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/popover/PopoverTrigger.vue"]]),_sfc_main$1T=defineComponent({__name:"Toast",props:{class:{type:null,required:!1},variant:{type:null,required:!1},onOpenChange:{type:Function,required:!1,skipCheck:!0},defaultOpen:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1},type:{type:String,required:!1},open:{type:Boolean,required:!1},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get ToastRoot(){return Bg},get toastVariants(){return toastVariants}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1T(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastRoot,mergeProps(a.forwarded,{class:a.cn(a.toastVariants({variant:n.variant}),a.props.class),"onUpdate:open":n.onOpenChange}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class","onUpdate:open"])}const Toast=_export_sfc(_sfc_main$1T,[["render",_sfc_render$1T],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/Toast.vue"]]),_sfc_main$1S=defineComponent({__name:"ToastAction",props:{altText:{type:String,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ToastAction(){return Tg}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1S(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastAction,mergeProps(a.delegatedProps,{class:a.cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const ToastAction=_export_sfc(_sfc_main$1S,[["render",_sfc_render$1S],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastAction.vue"]]),_sfc_main$1R=defineComponent({__name:"ToastClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get X(){return X},get ToastClose(){return tv}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1R(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastClose,mergeProps(a.delegatedProps,{class:a.cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a.props.class)}),{default:withCtx(()=>[createVNode(a.X,{class:"h-4 w-4"})]),_:1},16,["class"])}const ToastClose=_export_sfc(_sfc_main$1R,[["render",_sfc_render$1R],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastClose.vue"]]),_sfc_main$1Q=defineComponent({__name:"ToastDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ToastDescription(){return Og}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1Q(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastDescription,mergeProps({class:a.cn("text-sm opacity-90",a.props.class)},a.delegatedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const ToastDescription=_export_sfc(_sfc_main$1Q,[["render",_sfc_render$1Q],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastDescription.vue"]]),TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6,actionTypes={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let count=0;function genId(){return count=(count+1)%Number.MAX_VALUE,count.toString()}const toastTimeouts=new Map;function addToRemoveQueue(o){if(toastTimeouts.has(o))return;const e=setTimeout(()=>{toastTimeouts.delete(o),dispatch({type:actionTypes.REMOVE_TOAST,toastId:o})},TOAST_REMOVE_DELAY);toastTimeouts.set(o,e)}const state=ref({toasts:[]});function dispatch(o){switch(o.type){case actionTypes.ADD_TOAST:state.value.toasts=[o.toast,...state.value.toasts].slice(0,TOAST_LIMIT);break;case actionTypes.UPDATE_TOAST:state.value.toasts=state.value.toasts.map(e=>e.id===o.toast.id?{...e,...o.toast}:e);break;case actionTypes.DISMISS_TOAST:{const{toastId:e}=o;e?addToRemoveQueue(e):state.value.toasts.forEach(n=>{addToRemoveQueue(n.id)}),state.value.toasts=state.value.toasts.map(n=>n.id===e||e===void 0?{...n,open:!1}:n);break}case actionTypes.REMOVE_TOAST:o.toastId===void 0?state.value.toasts=[]:state.value.toasts=state.value.toasts.filter(e=>e.id!==o.toastId);break}}const useToast=()=>({toasts:computed(()=>state.value.toasts),toast,dismiss:o=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:o})});function toast(o){const e=genId(),n=s=>dispatch({type:actionTypes.UPDATE_TOAST,toast:{...s,id:e}}),a=()=>dispatch({type:actionTypes.DISMISS_TOAST,toastId:e});return dispatch({type:actionTypes.ADD_TOAST,toast:{...o,id:e,open:!0,onOpenChange:s=>{s||a()}}}),{id:e,dismiss:a,update:n}}const _sfc_main$1P=defineComponent({__name:"Toaster",setup(o,{expose:e}){e();const{toasts:n}=useToast(),a={toasts:n,isVNode:isVNode$1,get Toast(){return Toast},get ToastClose(){return ToastClose},get ToastDescription(){return ToastDescription},get ToastProvider(){return ToastProvider},get ToastTitle(){return ToastTitle},get ToastViewport(){return ToastViewport}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),_hoisted_1$I={class:"grid gap-1"};function _sfc_render$1P(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastProvider,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.toasts,c=>(openBlock(),createBlock(a.Toast,mergeProps({key:c.id,ref_for:!0},c),{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$I,[c.title?(openBlock(),createBlock(a.ToastTitle,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.title),1)]),_:2},1024)):createCommentVNode("v-if",!0),c.description?(openBlock(),createElementBlock(Fragment$1,{key:1},[a.isVNode(c.description)?(openBlock(),createBlock(a.ToastDescription,{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(c.description)))]),_:2},1024)):(openBlock(),createBlock(a.ToastDescription,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.description),1)]),_:2},1024))],64)):createCommentVNode("v-if",!0),createVNode(a.ToastClose)]),(openBlock(),createBlock(resolveDynamicComponent(c.action)))]),_:2},1040))),128)),createVNode(a.ToastViewport)]),_:1})}const Toaster=_export_sfc(_sfc_main$1P,[["render",_sfc_render$1P],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/Toaster.vue"]]),_sfc_main$1O=defineComponent({__name:"ToastProvider",props:{label:{type:String,required:!1},duration:{type:Number,required:!1},swipeDirection:{type:String,required:!1},swipeThreshold:{type:Number,required:!1}},setup(o,{expose:e}){e();const n={props:o,get ToastProvider(){return $g}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1O(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastProvider,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const ToastProvider=_export_sfc(_sfc_main$1O,[["render",_sfc_render$1O],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastProvider.vue"]]),_sfc_main$1N=defineComponent({__name:"ToastTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ToastTitle(){return Ag}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1N(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastTitle,mergeProps(a.delegatedProps,{class:a.cn("text-sm font-semibold",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const ToastTitle=_export_sfc(_sfc_main$1N,[["render",_sfc_render$1N],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastTitle.vue"]]),_sfc_main$1M=defineComponent({__name:"ToastViewport",props:{hotkey:{type:Array,required:!1},label:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ToastViewport(){return Rg}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1M(o,e,n,a,s,l){return openBlock(),createBlock(a.ToastViewport,mergeProps(a.delegatedProps,{class:a.cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a.props.class)}),null,16,["class"])}const ToastViewport=_export_sfc(_sfc_main$1M,[["render",_sfc_render$1M],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/toast/ToastViewport.vue"]]),toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[--radix-toast-swipe-end-x] data-[swipe=move]:translate-x-[--radix-toast-swipe-move-x] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BlockMoverContext=createContext(()=>{const{blocksManager:o,blockEditor:e}=BlocksContext.useContext(),{lastFocusedBlockTree:n,lastFocusedDiId:a}=LastFocusContext.useContext(),{search:s}=IndexContext.useContext(),l=ref(null),c=computed({get:()=>l.value!==null,set:L=>!L&&(l.value=null)}),d=ref(""),u=ref(0),f=ref([]),v=ref(!1),{toast:b}=useToast(),{t:k}=useI18n(),x="block-mover-content";let _=!1;const E=useDebounceFn(()=>{if(!d.value||d.value.trim().length==0){f.value=[];return}const L=s(d.value);f.value=L.slice(0,100).map(U=>o.getBlockRef(U)).filter(U=>{const j=U.value;return j!=null&&j.content[0]===BLOCK_CONTENT_TYPES.TEXT}),u.value=0},100),B=(L,U=500)=>(v.value=!0,setTimeout(()=>v.value=!1,U),L()),M=L=>{if(L==null)return;const U=n.value,j=a.value,oe=j?U==null?void 0:U.getDi(j):null;if(!U||!j||!oe||!DI_FILTERS.isBlockDi(oe))return;const Y=oe.block.id,K=useTaskQueue(),W={parentId:L,childIndex:"last-space"};K.addTask(async()=>{e!=null&&(_&&e.insertNormalBlock({pos:{baseBlockId:Y,offset:0},content:blockRefToTextContent(Y)}),e.moveBlock({blockId:Y,pos:W}),b({title:k("kbView.blockMover.moveSuccess",{count:1}),action:h(ToastAction,{altText:k("kbView.blockMover.focusMovedBlock"),onClick:G=>{G.stopPropagation(),U.focusBlock(Y,{highlight:!0,expandIfFold:!0})}},{default:()=>k("kbView.blockMover.focusMovedBlock")})}),l.value=null)})},I=(L,U={})=>{d.value=U.initQuery??"",_=U.leaveRef??!1,U.leaveMirror,u.value=0,l.value=L},F=()=>{setTimeout(()=>{const L=document.body.querySelector(`.${x} .focus`);L instanceof HTMLElement&&L.scrollIntoView({block:"nearest"})})},V=generateKeydownHandlerSimple({Escape:{run:L=>L.isComposing||L.keyCode===229?!1:(l.value=null,M(null),!0),preventDefault:!0,stopPropagation:!0},Enter:{run:L=>{var j,oe;if(L.isComposing||L.keyCode===229)return!1;const U=(oe=(j=f.value[u.value])==null?void 0:j.value)==null?void 0:oe.id;return U!=null&&M(U),!0},preventDefault:!0,stopPropagation:!0},Backspace:{run:L=>L.isComposing||L.keyCode===229?!1:d.value.length==0?(M(null),!0):!1,preventDefault:!0,stopPropagation:!0},ArrowUp:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value>0?u.value--:u.value=f.value.length-1,F(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value<f.value.length-1?u.value++:u.value=0,F(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value=0,F(),!0)),preventDefault:!0,stopPropagation:!0},End:{run:L=>L.isComposing||L.keyCode===229?!1:B(()=>(u.value=f.value.length-1,F(),!0)),preventDefault:!0,stopPropagation:!0}});return{showPos:l,open:c,query:d,cb:M,focusItemIndex:u,suggestions:f,suppressMouseOver:v,updateSuggestions:E,withScrollSuppressed:B,openBlockMover:I,handleKeydown:V,contentClass:x}}),calcPopoverPos=(o,e,n,a,s={})=>{const l=s.offset??(v=>v),c=s.minMargin??20,d=window.innerWidth,u=window.innerHeight,f=l({leftDown:{x:n-o,y:a},leftUp:{x:n-o,y:a-e},rightDown:{x:n,y:a},rightUp:{x:n,y:a-e}});for(const v of["leftDown","leftUp"])f[v].x<c&&(f[v].x=c);for(const v of["rightDown","rightUp"])f[v].x+o>d-c&&(f[v].x=d-c-o);for(const v of["leftUp","rightUp"])f[v].y<c&&(f[v].y=c);for(const v of["leftDown","rightDown"])f[v].y+e>u-c&&(f[v].y=u-c-e);if(s.avoidColideWith){const v=s.avoidColideWith.getBoundingClientRect(),b=s.minCollisionDist??10;for(const k of["leftDown","leftUp","rightDown","rightUp"]){const x=f[k];x.x<v.right+b&&x.x+o>v.left-b&&x.y<v.bottom+b&&x.y+e>v.top-b&&(x.x<v.left?x.x=Math.max(v.left-b-o,c):x.x=Math.min(v.right+b,d-c-o),x.y<v.top?x.y=Math.max(v.top-b-e,c):x.y=Math.min(v.bottom+b,u-c-e))}}return f},clip=(o,e,n)=>(e>n&&([e,n]=[n,e]),o<e?e:o>n?n:o),_sfc_main$1L=defineComponent({__name:"BlockMover",setup(o,{expose:e}){e();const{showPos:n,open:a,query:s,focusItemIndex:l,suggestions:c,suppressMouseOver:d,updateSuggestions:u,contentClass:f,handleKeydown:v}=BlockMoverContext.useContext(),b=computed(()=>s.value.length==0?[]:hybridTokenize(s.value,!1,1,!1)??[]);watch(n,async()=>{if(await nextTick(),!n.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x,y:_}=n.value,E=calcPopoverPos(300,300,x,_,{offset:B=>(B.leftDown.y+=30,B.rightDown.y+=30,B)});document.body.style.setProperty("--popover-x",`${E.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${E.rightDown.y}px`)});const k={showPos:n,open:a,query:s,focusItemIndex:l,suggestions:c,suppressMouseOver:d,updateSuggestions:u,contentClass:f,handleKeydown:v,queryTerms:b,get BLOCK_CONTENT_TYPES(){return BLOCK_CONTENT_TYPES},TextContent,get Input(){return Input},get Popover(){return Popover},get PopoverContent(){return PopoverContent},get Search(){return Search}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),_hoisted_1$H={class:"relative px-1"},_hoisted_2$n={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$h=["onMouseover"],_hoisted_4$e={key:0,class:"text-center"},_hoisted_5$7={class:"text-sm text-muted-foreground"};function _sfc_render$1L(o,e,n,a,s,l){return openBlock(),createBlock(a.Popover,{open:a.open,"onUpdate:open":e[2]||(e[2]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.PopoverContent,{class:normalizeClass(`${a.contentClass} py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden`),"trap-focus":"",tabindex:"-1",onKeydown:a.handleKeydown},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$H,[createVNode(a.Search,{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(a.Input,{onInput:e[0]||(e[0]=c=>!c.isComposing&&a.updateSuggestions()),onCompositionend:a.updateSuggestions,modelValue:a.query,"onUpdate:modelValue":e[1]||(e[1]=c=>a.query=c),placeholder:o.$t("kbView.blockMover.inputPlaceholder"),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["onCompositionend","modelValue","placeholder"])]),createCommentVNode(" XXX scroll area \u7684\u9AD8\u5EA6\u662F 250px\uFF0C\u56E0\u4E3A max-h \u662F 300px\uFF0C\u51CF\u53BB input \u7684\u9AD8\u5EA6\u548C\u4E2D\u95F4\u7684 padding \u5C31\u662F 250px\uFF0C\u5E76\u4E0D\u4F18\u96C5 "),createBaseVNode("div",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.suggestions,(c,d)=>(openBlock(),createElementBlock("div",{key:c.value.id,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:a.focusItemIndex===d}]),onMouseover:u=>!a.suppressMouseOver&&(a.focusItemIndex=d)},[c.value.content[0]===a.BLOCK_CONTENT_TYPES.TEXT?(openBlock(),createBlock(a.TextContent,{key:0,block:c.value,readonly:!0,class:"*:cursor-default","highlight-terms":a.queryTerms},null,8,["block","highlight-terms"])):createCommentVNode("v-if",!0)],42,_hoisted_3$h))),128)),a.suggestions.length===0?(openBlock(),createElementBlock("div",_hoisted_4$e,[createBaseVNode("span",_hoisted_5$7,toDisplayString$1(o.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("v-if",!0)])]),_:1},8,["class","onKeydown"])]),_:1},8,["open"])}const BlockMover=_export_sfc(_sfc_main$1L,[["render",_sfc_render$1L],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/block-mover/BlockMover.vue"]]),generateDisplayItems=o=>{const{rootBlockIds:e,rootBlockLevel:n,enlargeRootBlock:a,showBacklinks:s,showPotentialLinks:l,blocksManager:c,expandedBP:d,addSidePaneHeader:u,getBacklinksContext:f,getIndexContext:v}=o,b=[];if(e.length===1){const k=e[0],x=c.getBlock(k);if(!x)return b;if(u&&a)throw new Error("addSidePaneHeader and enlargeRootBlock cannot be true at the same time");a&&b.push({type:"root-block",itemId:`root-block-${k}`,block:x}),u&&b.push({type:"side-pane-header",itemId:`side-pane-header-${k}`,blockId:k}),c.forDescendantsWithMissingBlock({rootBlockId:k,rootBlockLevel:a?-1:n,nonFoldOnly:!0,includeSelf:!a,onEachBlock:(E,B)=>{b.push({type:"basic-block",itemId:`block-${E.id}`,block:E,level:B})},onMissingBlock:(E,B,M)=>{b.push({type:"missing-block",itemId:`missing-block-${E}-${M}`,blockId:E,parentId:B,level:M})}});let _=[void 0];s&&addBacklinkItems(k,b,c,_,d,f),l&&addPotentialLinksItems(k,b,c,_,d,f,v)}else if(e.length>1){if(a)throw new Error("enlargeRootBlock is not supported when rootBlockIds.length > 1");for(const k of e){if(!c.getBlock(k))continue;u&&b.push({type:"side-pane-header",itemId:`side-pane-header-${k}`,blockId:k}),c.forDescendantsWithMissingBlock({rootBlockId:k,rootBlockLevel:n,nonFoldOnly:!0,includeSelf:!0,onEachBlock:(_,E)=>{b.push({type:"basic-block",itemId:`block-${_.id}`,block:_,level:E})},onMissingBlock:(_,E,B)=>{b.push({type:"missing-block",itemId:`missing-block-${_}-${B}`,blockId:_,parentId:E,level:B})}});let x=[void 0];s&&addBacklinkItems(k,b,c,x,d,f),l&&addPotentialLinksItems(k,b,c,x,d,f,v)}}return b},addBacklinkItems=(o,e,n,a,s,l)=>{const{getBacklinksConsideringAliases:c}=l()??{};if(!c)return;const d=c(o);if(d.size<=0)return;const u=new Set(d),f=new Set;let v;do{v=u.size;for(const b of u)f.has(b)||n.getBlockPath(b).slice(1).some(k=>u.has(k.id)&&!f.has(k.id))&&f.add(b);for(const b of f)u.delete(b)}while(u.size!==v);e.push({type:"backlink-header",itemId:`backlink-header-${o}`,blockId:o,backlinks:[...d]});for(const b of u){const k=n.getBlock(b);k&&(e.push({type:"backlink-block",itemId:`backlink-block-${b}`,block:k,refBlockId:o}),n.forDescendants({rootBlockId:b,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:x=>s[x.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(x,_)=>{e.push({type:"backlink-descendant",itemId:`backlink-descendant-${b}-${x.id}`,block:x,level:_})}}))}a[0]=d},addPotentialLinksItems=(o,e,n,a,s,l,c)=>{const{getBacklinksConsideringAliases:d}=l()??{},{search:u}=c()??{};if(!u||!d)return;const f=a[0]??d(o),v=n.getBlock(o);if(v&&v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const b=u(v.ctext).map(k=>n.getBlock(k)).filter(k=>k!=null).filter(k=>!f.has(k.id)&&k.id!==o).filter(k=>k.content[0]===BLOCK_CONTENT_TYPES.TEXT);if(b.length>0){e.push({type:"potential-links-header",itemId:`potential-links-header-${o}`,blockId:o,potentialLinks:b.map(k=>k.id)});for(const k of b){const x=n.getBlock(k.id);x&&(e.push({type:"potential-links-block",itemId:`potential-links-block-${k.id}`,block:x,refBlockId:o}),n.forDescendants({rootBlockId:k.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!1,ignore:_=>s[_.id]?"keep-self-and-descendants":"ignore-descendants",onEachBlock:(_,E)=>{e.push({type:"potential-links-descendant",itemId:`potential-links-descendant-${_.id}`,block:_,level:E})}}))}}}},inViewport=(o,e=60,n=0)=>{const a=o.getBoundingClientRect();return a.top<window.innerHeight-n&&a.bottom>e},getHoveredElementWithClass=(o,e)=>{let n=o,a;for(;n instanceof Node;){if(n instanceof HTMLElement&&n.classList.contains(e)){a=n;break}n=n.parentNode}return a instanceof Element?a:null},mitt=()=>{const o=_mitt();return Object.assign(o,{once:(e,n)=>{const a=s=>{o.off(e,a),n(s)};o.on(e,a)}})};function vue3h(o,e,n){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(o,{...a,...c,...l},n)}const _h=vue3h;function vue3hChild(o,e,n){const{attrs:a,on:s,...l}=e;let c={};return s&&Object.entries(s).forEach(d=>{const[u,f]=d;c[`on${u[0].toUpperCase()+u.slice(1)}`]=f}),h(o,{...a,...c,...l},{default:()=>n})}const _hChild=vue3hChild;function vue3getSlot(o,e){var n;return(n=o.$slots)==null?void 0:n[e]}const getSlot=vue3getSlot,useObserverItem=o=>{const e=ref(null);return onMounted(()=>{o.resizeObserver&&e.value&&o.resizeObserver.observe(e.value)}),onBeforeUnmount(()=>{o.resizeObserver&&e.value&&o.resizeObserver.unobserve(e.value)}),{itemRefEl:e}},ObserverItem=defineComponent({name:"ObserverItem",props:{resizeObserver:{type:ResizeObserver,require:!0},id:{type:[String,Number],require:!0}},setup(o){return useObserverItem(o)},render(){var o;const{id:e}=this;return _h("div",{ref:"itemRefEl",attrs:{"data-id":e}},[(o=getSlot(this,"default"))==null?void 0:o()])}}),defaultProps={itemGap:0,fixed:!1,buffer:0,bufferTop:0,bufferBottom:0,scrollDistance:0,horizontal:!1,fixSelection:!1,start:0,offset:0,listStyle:"",listClass:"",itemStyle:"",itemClass:"",headerClass:"",headerStyle:"",footerClass:"",footerStyle:"",stickyHeaderClass:"",stickyHeaderStyle:"",stickyFooterClass:"",stickyFooterStyle:""};function useVirtList(o,e){const n=new Proxy(o,{get(ue,Z){var ee;return(ee=Reflect.get(ue,Z))!=null?ee:Reflect.get(defaultProps,Z)}}),a=ref(null),s=ref(null),l=ref(null),c=ref(null),d=ref(null),u=ref(null),f=new Map,v=ref(0);let b="backward",k=!1,x=!1,_=!1,E=null;const B=shallowReactive({clientSize:0,headerSize:0,footerSize:0,stickyHeaderSize:0,stickyFooterSize:0}),M=shallowReactive({views:0,offset:0,listTotalSize:0,virtualSize:0,inViewBegin:0,inViewEnd:0,renderBegin:0,renderEnd:0,bufferTop:0,bufferBottom:0});function I(){const ue=n.horizontal?"scrollLeft":"scrollTop";return a.value?a.value[ue]:0}function F(){return B.headerSize+B.footerSize+B.stickyHeaderSize+B.stickyFooterSize}function V(){return M.listTotalSize+B.headerSize+B.footerSize+B.stickyHeaderSize+B.stickyFooterSize}function L(ue){var Z;return n.fixed?n.minSize+n.itemGap:(Z=f.get(String(ue)))!=null?Z:n.minSize+n.itemGap}function U(ue,Z){f.set(String(ue),Z)}function j(ue){f.delete(String(ue))}function oe(ue){var Z,ee;if(n.fixed)return{top:(n.minSize+n.itemGap)*ue,current:n.minSize+n.itemGap,bottom:(n.minSize+n.itemGap)*(ue+1)};const{itemKey:le}=n;let we=B.headerSize;for(let _e=0;_e<=ue-1;_e+=1){const te=L((Z=n.list[_e])==null?void 0:Z[le]);we+=te}const ke=L((ee=n.list[ue])==null?void 0:ee[le]);return{top:we,current:ke,bottom:we+ke}}function Y(ue){_=!0;const Z=n.horizontal?"scrollLeft":"scrollTop";a.value&&(a.value[Z]=ue)}async function K(ue){if(ue<0)return;if(ue>=n.list.length-1){ce();return}let{top:Z}=oe(ue);Y(Z);const ee=()=>{const{top:le}=oe(ue);if(Y(le),Z!==le){Z=le,E=ee;return}E=null};E=ee}async function W(ue){var Z;const{top:ee,bottom:le}=oe(ue),we=I(),ke=I()+B.clientSize,_e=L((Z=n.list[ue])==null?void 0:Z[n.itemKey]);if(ee<we&&we<le&&_e<B.clientSize){Y(ee);return}if(ee+B.stickyHeaderSize<ke&&ke<le+B.stickyHeaderSize&&_e<B.clientSize){Y(le-B.clientSize+B.stickyHeaderSize);return}if(ee+B.stickyHeaderSize>=ke){K(ue);return}if(le<=we){K(ue);return}}async function G(){let ue=0;function Z(){ue+=1,Y(0),setTimeout(()=>{var ee;if(ue>10)return;const le=n.horizontal?"scrollLeft":"scrollTop";((ee=a==null?void 0:a.value)==null?void 0:ee[le])!==0&&Z()},3)}Z()}async function ce(){let ue=0;function Z(){ue+=1,Y(V()),setTimeout(()=>{ue>10||Math.abs(Math.round(M.offset+B.clientSize)-Math.round(V()))>2&&Z()},3)}Z()}function se(ue){var Z;ue<M.inViewBegin&&(k=!0),M.inViewBegin=ue,M.inViewEnd=Math.min(ue+M.views,n.list.length-1),(Z=e==null?void 0:e.rangeUpdate)==null||Z.call(e,M.inViewBegin,M.inViewEnd)}function me(){var ue,Z;const{views:ee,offset:le,inViewBegin:we}=M,{itemKey:ke}=n,_e=le-B.headerSize;let te=we,re=ft();if(_e<0){se(0);return}if(b==="forward"){if(_e>=re)return;for(let fe=te-1;fe>=0;fe-=1){const Ee=L((ue=n.list[fe])==null?void 0:ue[ke]);if(re-=Ee,re<=_e&&_e<re+Ee){te=fe;break}}}if(b==="backward"){if(_e<=re)return;for(let fe=te;fe<=n.list.length-1;fe+=1){const Ee=L((Z=n.list[fe])==null?void 0:Z[ke]);if(re<=_e&&_e<re+Ee){te=fe;break}re+=Ee}k=!1}te!==M.inViewBegin&&se(te)}function ge(ue){var Z,ee,le;(Z=e==null?void 0:e.scroll)==null||Z.call(e,ue);const we=I();we!==M.offset&&(b=we<M.offset?"forward":"backward",M.offset=we,me(),b==="forward"&&M.offset-n.scrollDistance<=0&&((ee=e==null?void 0:e.toTop)==null||ee.call(e,n.list[0])),b==="backward"&&Math.round(M.offset+n.scrollDistance)>=Math.round(M.listTotalSize+F()-B.clientSize)&&((le=e==null?void 0:e.toBottom)==null||le.call(e,n.list[n.list.length-1])))}function Te(){const ue=Math.ceil(B.clientSize/(n.minSize+n.itemGap))+1;M.views=ue}function Be(){Te(),se(M.inViewBegin)}function Ge(){var ue;if(n.fixed){M.listTotalSize=(n.minSize+n.itemGap)*n.list.length;return}const{itemKey:Z}=n;let ee=0;for(let le=0;le<=n.list.length-1;le+=1)ee+=L((ue=n.list[le])==null?void 0:ue[Z]);M.listTotalSize=ee}function We(){M.offset=0,M.listTotalSize=0,M.virtualSize=0,M.inViewBegin=0,M.inViewEnd=0,M.renderBegin=0,M.renderEnd=0,f.clear(),Xe()}function Oe(ue){Ge();let Z=0;ue.forEach(ee=>{Z+=L(ee[n.itemKey])}),pt(),Y(M.offset-Z),me()}function Ve(ue){Ge();let Z=0;ue.forEach(ee=>{Z+=L(ee[n.itemKey])}),pt(),Y(M.offset+Z),x=!0,_=!1,me()}function Xe(){v.value+=1}let dt;typeof ResizeObserver<"u"&&(dt=new ResizeObserver(ue=>{var Z;let ee=0;for(const le of ue){const we=le.target.dataset.id;if(we){const ke=L(we);let _e=0;if(le.borderBoxSize){const te=Array.isArray(le.borderBoxSize)?le.borderBoxSize[0]:le.borderBoxSize;_e=n.horizontal?te.inlineSize:te.blockSize}else _e=n.horizontal?le.contentRect.width:le.contentRect.height;we==="client"?(B.clientSize=_e,Be()):we==="header"?B.headerSize=_e:we==="footer"?B.footerSize=_e:we==="stickyHeader"?B.stickyHeaderSize=_e:we==="stickyFooter"?B.stickyFooterSize=_e:ke!==_e&&(U(we,_e),ee+=_e-ke,(Z=e==null?void 0:e.itemResize)==null||Z.call(e,we,_e))}}M.listTotalSize+=ee,E&&E(),(k||x)&&ee!==0&&!_&&(k=!1,x=!1,Y(M.offset+ee)),_=!1}));const pt=()=>{var ue;let Z=0;const ee=M.renderBegin;for(let le=0;le<ee;le++)Z+=L((ue=n.list[le])==null?void 0:ue[n.itemKey]);M.virtualSize=Z};onBeforeMount(()=>{n.bufferTop?M.bufferTop=n.bufferTop:M.bufferTop=n.buffer,n.bufferBottom?M.bufferBottom=n.bufferBottom:M.bufferBottom=n.buffer}),onMounted(()=>{a.value&&(a.value.addEventListener("scroll",ge),dt==null||dt.observe(a.value)),d.value&&(dt==null||dt.observe(d.value)),u.value&&(dt==null||dt.observe(u.value)),l.value&&(dt==null||dt.observe(l.value)),c.value&&(dt==null||dt.observe(c.value)),n.start?K(n.start):n.offset&&Y(n.offset)}),onBeforeUnmount(()=>{a.value&&(a.value.removeEventListener("scroll",ge),dt==null||dt.unobserve(a.value),B.clientSize=0),d.value&&(dt==null||dt.unobserve(d.value),B.stickyHeaderSize=0),u.value&&(dt==null||dt.unobserve(u.value),B.stickyFooterSize=0),l.value&&(dt==null||dt.unobserve(l.value),B.headerSize=0),c.value&&(dt==null||dt.unobserve(c.value),B.footerSize=0)});function ft(){return M.virtualSize+Ce(M.renderBegin,M.inViewBegin)}function Ce(ue,Z){var ee;const le=Math.min(ue,Z),we=Math.max(ue,Z);let ke=0;for(let _e=le;_e<we;_e+=1)ke+=L((ee=n.list[_e])==null?void 0:ee[n.itemKey]);return ke}function ze(){return M}const Ze=shallowRef([]);function pe(ue,Z){const ee=M.renderBegin;M.renderBegin=ue,M.renderEnd=Z,ue>ee?M.virtualSize+=Ce(ue,ee):M.virtualSize-=Ce(ue,ee),Ze.value=n.list.slice(M.renderBegin,M.renderEnd+1),pt()}return watch(()=>[M.inViewBegin,M.inViewEnd,v.value],(ue,Z)=>{if(ue&&Z){const[ee]=ue,le=M.renderBegin;let we=ee,ke=M.inViewEnd;if(we=Math.max(0,we-M.bufferTop),ke=Math.min(ke+M.bufferBottom,n.list.length-1>0?n.list.length-1:0),n==null?void 0:n.renderControl){const{begin:_e,end:te}=n.renderControl(ee,M.inViewEnd);we=_e,ke=te}M.renderBegin=we,M.renderEnd=ke,we>le?M.virtualSize+=Ce(we,le):M.virtualSize-=Ce(we,le),Ze.value=n.list.slice(M.renderBegin,M.renderEnd+1)}},{immediate:!0}),watch(()=>n.list.length,()=>{if(n.list.length<=0){We();return}Ge(),se(M.inViewBegin),pt(),Xe()},{immediate:!0}),{props:n,renderList:Ze,clientRefEl:a,listRefEl:s,headerRefEl:l,footerRefEl:c,stickyHeaderRefEl:d,stickyFooterRefEl:u,reactiveData:M,slotSize:B,sizesMap:f,resizeObserver:dt,getReactiveData:ze,getOffset:I,getSlotSize:F,reset:We,scrollToIndex:K,manualRender:pe,scrollIntoView:W,scrollToTop:G,scrollToBottom:ce,scrollToOffset:Y,getItemSize:L,deleteItemSize:j,deletedList2Top:Oe,addedList2Top:Ve,getItemPosByIndex:oe,forceUpdate:Xe}}const VirtList=defineComponent({name:"VirtList",emits:{scroll:o=>o,toTop:o=>o,toBottom:o=>o,itemResize:(o,e)=>!0,rangeUpdate:(o,e)=>!0},props:{list:{type:Array,default:()=>[]},itemKey:{type:[String,Number],required:!0},minSize:{type:Number,default:20,required:!0},itemGap:{type:Number,default:0},renderControl:{type:Function,default:void 0},fixed:{type:Boolean,default:!1},buffer:{type:Number,default:0},bufferTop:{type:Number,default:0},bufferBottom:{type:Number,default:0},scrollDistance:{type:Number,default:0},horizontal:{type:Boolean,default:!1},start:{type:Number,default:0},offset:{type:Number,default:0},listStyle:{type:String,default:""},listClass:{type:String,default:""},itemStyle:{type:String,default:""},itemClass:{type:String,default:""},headerClass:{type:String,default:""},headerStyle:{type:String,default:""},footerClass:{type:String,default:""},footerStyle:{type:String,default:""},stickyHeaderClass:{type:String,default:""},stickyHeaderStyle:{type:String,default:""},stickyFooterClass:{type:String,default:""},stickyFooterStyle:{type:String,default:""}},setup(o,e){return useVirtList(o,{scroll:n=>{e.emit("scroll",n)},toTop:n=>{e.emit("toTop",n)},toBottom:n=>{e.emit("toBottom",n)},itemResize:(n,a)=>{e.emit("itemResize",n,a)},rangeUpdate:(n,a)=>{e.emit("rangeUpdate",n,a)}})},render(){const{renderList:o,reactiveData:e,resizeObserver:n}=this,{itemGap:a,itemKey:s,horizontal:l,listStyle:c,listClass:d,itemStyle:u,itemClass:f,headerClass:v,headerStyle:b,footerClass:k,footerStyle:x,stickyHeaderClass:_,stickyHeaderStyle:E,stickyFooterClass:B,stickyFooterStyle:M}=this.props,I=()=>{var W;return getSlot(this,"stickyHeader")?_h("div",{key:"slot-sticky-header",class:_,style:`position: sticky; z-index: 10; ${l?"left: 0":"top: 0;"} ${E}`,ref:"stickyHeaderRefEl",attrs:{"data-id":"stickyHeader"}},[(W=getSlot(this,"stickyHeader"))==null?void 0:W()]):null},F=()=>{var W;return getSlot(this,"stickyFooter")?_h("div",{key:"slot-sticky-footer",class:B,style:`position: sticky; z-index: 10; ${l?"right: 0":"bottom: 0;"} ${M}`,ref:"stickyFooterRefEl",attrs:{"data-id":"stickyFooter"}},[(W=getSlot(this,"stickyFooter"))==null?void 0:W()]):null},V=()=>{var W;return getSlot(this,"header")?_h("div",{key:"slot-header",class:v,style:b,ref:"headerRefEl",attrs:{"data-id":"header"}},[(W=getSlot(this,"header"))==null?void 0:W()]):null},L=()=>{var W;return getSlot(this,"footer")?_h("div",{key:"slot-footer",class:k,style:x,ref:"footerRefEl",attrs:{"data-id":"footer"}},[(W=getSlot(this,"footer"))==null?void 0:W()]):null},{listTotalSize:U,virtualSize:j,renderBegin:oe}=e,Y=a>0?`padding: ${a/2}px 0; `:"",K=()=>{var W,G;const ce=[];for(let ge=0;ge<o.length;ge+=1){const Te=o[ge];ce.push(_hChild(ObserverItem,{key:Te[s],class:f,style:`${Y}${u}`,attrs:{id:Te[s],resizeObserver:n}},(W=getSlot(this,"default"))==null?void 0:W({itemData:Te,index:oe+ge})))}if(ce.length===0&&getSlot(this,"empty")){const ge=this.slotSize.clientSize-this.getSlotSize();ce.push(_h("div",{key:`slot-empty-${ge}`,style:`height: ${ge}px`},[(G=getSlot(this,"empty"))==null?void 0:G()]))}const se=l?`will-change: width; min-width: ${U}px; display: flex; ${c}`:`will-change: height; min-height: ${U}px; ${c}`,me=l?`width: ${j}px; will-change: width;`:`height: ${j}px; will-change: height;`;return _h("div",{ref:"listRefEl",class:d,style:se},[_h("div",{style:me}),ce])};return _h("div",{ref:"clientRefEl",class:"virt-list__client",style:"width: 100%; height: 100%; overflow: auto;",attrs:{"data-id":"client"}},[I(),V(),K(),L(),F()])}}),ThemeContext=createContext(()=>{const o=useColorMode();return{theme:o,toggleTheme:()=>{o.value=o.value==="dark"?"light":"dark"}}}),scriptRel="modulepreload",assetsURL=function(o,e){return new URL(o,e).href},seen={},__vitePreload=function o(e,n,a){let s=Promise.resolve();if(n&&n.length>0){const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=assetsURL(f,a),f in seen)return;seen[f]=!0;const v=f.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(a)for(let x=c.length-1;x>=0;x--){const _=c[x];if(_.href===f&&(!v||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${b}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":scriptRel,v||(k.as="script"),k.crossOrigin="",k.href=f,u&&k.setAttribute("nonce",u),document.head.appendChild(k),v)return new Promise((x,_)=>{k.addEventListener("load",x),k.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function legacy(o){return new LanguageSupport(StreamLanguage.define(o))}function sql(o){return __vitePreload(()=>import("./index-CTGodKHA.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.sql({dialect:e[o]}))}const languages=[LanguageDescription.of({name:"C",extensions:["c","h","ino"],load(){return __vitePreload(()=>import("./index-CeUuNms1.js"),__vite__mapDeps([2,1]),import.meta.url).then(o=>o.cpp())}}),LanguageDescription.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return __vitePreload(()=>import("./index-CeUuNms1.js"),__vite__mapDeps([2,1]),import.meta.url).then(o=>o.cpp())}}),LanguageDescription.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return sql("Cassandra")}}),LanguageDescription.of({name:"CSS",extensions:["css"],load(){return __vitePreload(()=>import("./index-CLtmwBJx.js"),__vite__mapDeps([3,1]),import.meta.url).then(o=>o.css())}}),LanguageDescription.of({name:"Go",extensions:["go"],load(){return __vitePreload(()=>import("./index-C6nW8a4U.js"),__vite__mapDeps([4,1]),import.meta.url).then(o=>o.go())}}),LanguageDescription.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return __vitePreload(()=>import("./index-DPphf5nH.js"),__vite__mapDeps([5,1,3,6]),import.meta.url).then(o=>o.html())}}),LanguageDescription.of({name:"Java",extensions:["java"],load(){return __vitePreload(()=>import("./index-CH9-IcPN.js"),__vite__mapDeps([7,1]),import.meta.url).then(o=>o.java())}}),LanguageDescription.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return __vitePreload(()=>import("./index-Bo0MImWA.js"),__vite__mapDeps([6,1]),import.meta.url).then(o=>o.javascript())}}),LanguageDescription.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return __vitePreload(()=>import("./index-DrGBlYiR.js"),__vite__mapDeps([8,1]),import.meta.url).then(o=>o.json())}}),LanguageDescription.of({name:"JSX",extensions:["jsx"],load(){return __vitePreload(()=>import("./index-Bo0MImWA.js"),__vite__mapDeps([6,1]),import.meta.url).then(o=>o.javascript({jsx:!0}))}}),LanguageDescription.of({name:"LESS",extensions:["less"],load(){return __vitePreload(()=>import("./index-Cao8ebns.js"),__vite__mapDeps([9,3,1]),import.meta.url).then(o=>o.less())}}),LanguageDescription.of({name:"Liquid",extensions:["liquid"],load(){return __vitePreload(()=>import("./index-2FKH0Tji.js"),__vite__mapDeps([10,5,1,3,6]),import.meta.url).then(o=>o.liquid())}}),LanguageDescription.of({name:"MariaDB SQL",load(){return sql("MariaSQL")}}),LanguageDescription.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return __vitePreload(()=>import("./index-ISozEGWD.js"),__vite__mapDeps([11,5,1,3,6]),import.meta.url).then(o=>o.markdown())}}),LanguageDescription.of({name:"MS SQL",load(){return sql("MSSQL")}}),LanguageDescription.of({name:"MySQL",load(){return sql("MySQL")}}),LanguageDescription.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return __vitePreload(()=>import("./index-CBpidYoR.js"),__vite__mapDeps([12,1,5,3,6]),import.meta.url).then(o=>o.php())}}),LanguageDescription.of({name:"PLSQL",extensions:["pls"],load(){return sql("PLSQL")}}),LanguageDescription.of({name:"PostgreSQL",load(){return sql("PostgreSQL")}}),LanguageDescription.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return __vitePreload(()=>import("./index-B58FU5IX.js"),__vite__mapDeps([13,1]),import.meta.url).then(o=>o.python())}}),LanguageDescription.of({name:"Rust",extensions:["rs"],load(){return __vitePreload(()=>import("./index-B8boj1dE.js"),__vite__mapDeps([14,1]),import.meta.url).then(o=>o.rust())}}),LanguageDescription.of({name:"Sass",extensions:["sass"],load(){return __vitePreload(()=>import("./index-Nw-PdQlq.js"),__vite__mapDeps([15,1,3]),import.meta.url).then(o=>o.sass({indented:!0}))}}),LanguageDescription.of({name:"SCSS",extensions:["scss"],load(){return __vitePreload(()=>import("./index-Nw-PdQlq.js"),__vite__mapDeps([15,1,3]),import.meta.url).then(o=>o.sass())}}),LanguageDescription.of({name:"SQL",extensions:["sql"],load(){return sql("StandardSQL")}}),LanguageDescription.of({name:"SQLite",load(){return sql("SQLite")}}),LanguageDescription.of({name:"TSX",extensions:["tsx"],load(){return __vitePreload(()=>import("./index-Bo0MImWA.js"),__vite__mapDeps([6,1]),import.meta.url).then(o=>o.javascript({jsx:!0,typescript:!0}))}}),LanguageDescription.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return __vitePreload(()=>import("./index-Bo0MImWA.js"),__vite__mapDeps([6,1]),import.meta.url).then(o=>o.javascript({typescript:!0}))}}),LanguageDescription.of({name:"WebAssembly",extensions:["wat","wast"],load(){return __vitePreload(()=>import("./index-BXagFtRn.js"),__vite__mapDeps([16,1]),import.meta.url).then(o=>o.wast())}}),LanguageDescription.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return __vitePreload(()=>import("./index-CrZjHgwS.js"),__vite__mapDeps([17,1]),import.meta.url).then(o=>o.xml())}}),LanguageDescription.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return __vitePreload(()=>import("./index-DVeEyKdi.js"),__vite__mapDeps([18,1]),import.meta.url).then(o=>o.yaml())}}),LanguageDescription.of({name:"APL",extensions:["dyalog","apl"],load(){return __vitePreload(()=>import("./apl-B4CMkyY2.js"),[],import.meta.url).then(o=>legacy(o.apl))}}),LanguageDescription.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return __vitePreload(()=>import("./asciiarmor-Df11BRmG.js"),[],import.meta.url).then(o=>legacy(o.asciiArmor))}}),LanguageDescription.of({name:"ASN.1",extensions:["asn","asn1"],load(){return __vitePreload(()=>import("./asn1-CGOzndHr.js"),[],import.meta.url).then(o=>legacy(o.asn1({})))}}),LanguageDescription.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return __vitePreload(()=>import("./asterisk-B-8jnY81.js"),[],import.meta.url).then(o=>legacy(o.asterisk))}}),LanguageDescription.of({name:"Brainfuck",extensions:["b","bf"],load(){return __vitePreload(()=>import("./brainfuck-C4LP7Hcl.js"),[],import.meta.url).then(o=>legacy(o.brainfuck))}}),LanguageDescription.of({name:"Cobol",extensions:["cob","cpy"],load(){return __vitePreload(()=>import("./cobol-_hGpxIKP.js"),[],import.meta.url).then(o=>legacy(o.cobol))}}),LanguageDescription.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.csharp))}}),LanguageDescription.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"ClojureScript",extensions:["cljs"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return __vitePreload(()=>import("./css-BnMrqG3P.js"),[],import.meta.url).then(o=>legacy(o.gss))}}),LanguageDescription.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return __vitePreload(()=>import("./cmake-BQqOBYOt.js"),[],import.meta.url).then(o=>legacy(o.cmake))}}),LanguageDescription.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return __vitePreload(()=>import("./coffeescript-S37ZYGWr.js"),[],import.meta.url).then(o=>legacy(o.coffeeScript))}}),LanguageDescription.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return __vitePreload(()=>import("./commonlisp-DBKNyK5s.js"),[],import.meta.url).then(o=>legacy(o.commonLisp))}}),LanguageDescription.of({name:"Cypher",extensions:["cyp","cypher"],load(){return __vitePreload(()=>import("./cypher-C_CwsFkJ.js"),[],import.meta.url).then(o=>legacy(o.cypher))}}),LanguageDescription.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return __vitePreload(()=>import("./python-BuPzkPfP.js"),[],import.meta.url).then(o=>legacy(o.cython))}}),LanguageDescription.of({name:"Crystal",extensions:["cr"],load(){return __vitePreload(()=>import("./crystal-SjHAIU92.js"),[],import.meta.url).then(o=>legacy(o.crystal))}}),LanguageDescription.of({name:"D",extensions:["d"],load(){return __vitePreload(()=>import("./d-pRatUO7H.js"),[],import.meta.url).then(o=>legacy(o.d))}}),LanguageDescription.of({name:"Dart",extensions:["dart"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.dart))}}),LanguageDescription.of({name:"diff",extensions:["diff","patch"],load(){return __vitePreload(()=>import("./diff-DbItnlRl.js"),[],import.meta.url).then(o=>legacy(o.diff))}}),LanguageDescription.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return __vitePreload(()=>import("./dockerfile-BuNIbK2j.js"),__vite__mapDeps([19,20]),import.meta.url).then(o=>legacy(o.dockerFile))}}),LanguageDescription.of({name:"DTD",extensions:["dtd"],load(){return __vitePreload(()=>import("./dtd-DF_7sFjM.js"),[],import.meta.url).then(o=>legacy(o.dtd))}}),LanguageDescription.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return __vitePreload(()=>import("./dylan-DwRh75JA.js"),[],import.meta.url).then(o=>legacy(o.dylan))}}),LanguageDescription.of({name:"EBNF",load(){return __vitePreload(()=>import("./ebnf-CDyGwa7X.js"),[],import.meta.url).then(o=>legacy(o.ebnf))}}),LanguageDescription.of({name:"ECL",extensions:["ecl"],load(){return __vitePreload(()=>import("./ecl-Cabwm37j.js"),[],import.meta.url).then(o=>legacy(o.ecl))}}),LanguageDescription.of({name:"edn",extensions:["edn"],load(){return __vitePreload(()=>import("./clojure-BMjYHr_A.js"),[],import.meta.url).then(o=>legacy(o.clojure))}}),LanguageDescription.of({name:"Eiffel",extensions:["e"],load(){return __vitePreload(()=>import("./eiffel-CnydiIhH.js"),[],import.meta.url).then(o=>legacy(o.eiffel))}}),LanguageDescription.of({name:"Elm",extensions:["elm"],load(){return __vitePreload(()=>import("./elm-vLlmbW-K.js"),[],import.meta.url).then(o=>legacy(o.elm))}}),LanguageDescription.of({name:"Erlang",extensions:["erl"],load(){return __vitePreload(()=>import("./erlang-BNw1qcRV.js"),[],import.meta.url).then(o=>legacy(o.erlang))}}),LanguageDescription.of({name:"Esper",load(){return __vitePreload(()=>import("./sql-C4g8LzGK.js"),[],import.meta.url).then(o=>legacy(o.esper))}}),LanguageDescription.of({name:"Factor",extensions:["factor"],load(){return __vitePreload(()=>import("./factor-D8pE9siL.js"),__vite__mapDeps([21,20]),import.meta.url).then(o=>legacy(o.factor))}}),LanguageDescription.of({name:"FCL",load(){return __vitePreload(()=>import("./fcl-Kvtd6kyn.js"),[],import.meta.url).then(o=>legacy(o.fcl))}}),LanguageDescription.of({name:"Forth",extensions:["forth","fth","4th"],load(){return __vitePreload(()=>import("./forth-Ffai-XNe.js"),[],import.meta.url).then(o=>legacy(o.forth))}}),LanguageDescription.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return __vitePreload(()=>import("./fortran-DYz_wnZ1.js"),[],import.meta.url).then(o=>legacy(o.fortran))}}),LanguageDescription.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(o=>legacy(o.fSharp))}}),LanguageDescription.of({name:"Gas",extensions:["s"],load(){return __vitePreload(()=>import("./gas-Bneqetm1.js"),[],import.meta.url).then(o=>legacy(o.gas))}}),LanguageDescription.of({name:"Gherkin",extensions:["feature"],load(){return __vitePreload(()=>import("./gherkin-heZmZLOM.js"),[],import.meta.url).then(o=>legacy(o.gherkin))}}),LanguageDescription.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return __vitePreload(()=>import("./groovy-D9Dt4D0W.js"),[],import.meta.url).then(o=>legacy(o.groovy))}}),LanguageDescription.of({name:"Haskell",extensions:["hs"],load(){return __vitePreload(()=>import("./haskell-BWDZoCOh.js"),[],import.meta.url).then(o=>legacy(o.haskell))}}),LanguageDescription.of({name:"Haxe",extensions:["hx"],load(){return __vitePreload(()=>import("./haxe-pv4rovob.js"),[],import.meta.url).then(o=>legacy(o.haxe))}}),LanguageDescription.of({name:"HXML",extensions:["hxml"],load(){return __vitePreload(()=>import("./haxe-pv4rovob.js"),[],import.meta.url).then(o=>legacy(o.hxml))}}),LanguageDescription.of({name:"HTTP",load(){return __vitePreload(()=>import("./http-DBlCnlav.js"),[],import.meta.url).then(o=>legacy(o.http))}}),LanguageDescription.of({name:"IDL",extensions:["pro"],load(){return __vitePreload(()=>import("./idl-BEugSyMb.js"),[],import.meta.url).then(o=>legacy(o.idl))}}),LanguageDescription.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return __vitePreload(()=>import("./javascript-iSgyE4tI.js"),[],import.meta.url).then(o=>legacy(o.jsonld))}}),LanguageDescription.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return __vitePreload(()=>import("./jinja2-C4DGRd-O.js"),[],import.meta.url).then(o=>legacy(o.jinja2))}}),LanguageDescription.of({name:"Julia",extensions:["jl"],load(){return __vitePreload(()=>import("./julia-DuME0IfC.js"),[],import.meta.url).then(o=>legacy(o.julia))}}),LanguageDescription.of({name:"Kotlin",extensions:["kt","kts"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.kotlin))}}),LanguageDescription.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return __vitePreload(()=>import("./livescript-BwQOo05w.js"),[],import.meta.url).then(o=>legacy(o.liveScript))}}),LanguageDescription.of({name:"Lua",extensions:["lua"],load(){return __vitePreload(()=>import("./lua-BgMRiT3U.js"),[],import.meta.url).then(o=>legacy(o.lua))}}),LanguageDescription.of({name:"mIRC",extensions:["mrc"],load(){return __vitePreload(()=>import("./mirc-0pArz5Cm.js"),[],import.meta.url).then(o=>legacy(o.mirc))}}),LanguageDescription.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return __vitePreload(()=>import("./mathematica-DTrFuWx2.js"),[],import.meta.url).then(o=>legacy(o.mathematica))}}),LanguageDescription.of({name:"Modelica",extensions:["mo"],load(){return __vitePreload(()=>import("./modelica-Dc1JOy9r.js"),[],import.meta.url).then(o=>legacy(o.modelica))}}),LanguageDescription.of({name:"MUMPS",extensions:["mps"],load(){return __vitePreload(()=>import("./mumps-BT43cFF4.js"),[],import.meta.url).then(o=>legacy(o.mumps))}}),LanguageDescription.of({name:"Mbox",extensions:["mbox"],load(){return __vitePreload(()=>import("./mbox-CNhZ1qSd.js"),[],import.meta.url).then(o=>legacy(o.mbox))}}),LanguageDescription.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return __vitePreload(()=>import("./nginx-DdIZxoE0.js"),[],import.meta.url).then(o=>legacy(o.nginx))}}),LanguageDescription.of({name:"NSIS",extensions:["nsh","nsi"],load(){return __vitePreload(()=>import("./nsis-CEAdamBV.js"),__vite__mapDeps([22,20]),import.meta.url).then(o=>legacy(o.nsis))}}),LanguageDescription.of({name:"NTriples",extensions:["nt","nq"],load(){return __vitePreload(()=>import("./ntriples-BfvgReVJ.js"),[],import.meta.url).then(o=>legacy(o.ntriples))}}),LanguageDescription.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.objectiveC))}}),LanguageDescription.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.objectiveCpp))}}),LanguageDescription.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(o=>legacy(o.oCaml))}}),LanguageDescription.of({name:"Octave",extensions:["m"],load(){return __vitePreload(()=>import("./octave-Ck1zUtKM.js"),[],import.meta.url).then(o=>legacy(o.octave))}}),LanguageDescription.of({name:"Oz",extensions:["oz"],load(){return __vitePreload(()=>import("./oz-BzwKVEFT.js"),[],import.meta.url).then(o=>legacy(o.oz))}}),LanguageDescription.of({name:"Pascal",extensions:["p","pas"],load(){return __vitePreload(()=>import("./pascal-B1wCu0_E.js"),[],import.meta.url).then(o=>legacy(o.pascal))}}),LanguageDescription.of({name:"Perl",extensions:["pl","pm"],load(){return __vitePreload(()=>import("./perl-CdXCOZ3F.js"),[],import.meta.url).then(o=>legacy(o.perl))}}),LanguageDescription.of({name:"Pig",extensions:["pig"],load(){return __vitePreload(()=>import("./pig-DHho59qG.js"),[],import.meta.url).then(o=>legacy(o.pig))}}),LanguageDescription.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return __vitePreload(()=>import("./powershell-CFHJl5sT.js"),[],import.meta.url).then(o=>legacy(o.powerShell))}}),LanguageDescription.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return __vitePreload(()=>import("./properties-C78fOPTZ.js"),[],import.meta.url).then(o=>legacy(o.properties))}}),LanguageDescription.of({name:"ProtoBuf",extensions:["proto"],load(){return __vitePreload(()=>import("./protobuf-ChK-085T.js"),[],import.meta.url).then(o=>legacy(o.protobuf))}}),LanguageDescription.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return __vitePreload(()=>import("./pug-BmUsPMDj.js"),__vite__mapDeps([23,24]),import.meta.url).then(o=>legacy(o.pug))}}),LanguageDescription.of({name:"Puppet",extensions:["pp"],load(){return __vitePreload(()=>import("./puppet-DMA9R1ak.js"),[],import.meta.url).then(o=>legacy(o.puppet))}}),LanguageDescription.of({name:"Q",extensions:["q"],load(){return __vitePreload(()=>import("./q-ZnEupP5q.js"),[],import.meta.url).then(o=>legacy(o.q))}}),LanguageDescription.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return __vitePreload(()=>import("./r-DUYO_cvP.js"),[],import.meta.url).then(o=>legacy(o.r))}}),LanguageDescription.of({name:"RPM Changes",load(){return __vitePreload(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(o=>legacy(o.rpmChanges))}}),LanguageDescription.of({name:"RPM Spec",extensions:["spec"],load(){return __vitePreload(()=>import("./rpm-CTu-6PCP.js"),[],import.meta.url).then(o=>legacy(o.rpmSpec))}}),LanguageDescription.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return __vitePreload(()=>import("./ruby-B2Rjki9n.js"),[],import.meta.url).then(o=>legacy(o.ruby))}}),LanguageDescription.of({name:"SAS",extensions:["sas"],load(){return __vitePreload(()=>import("./sas-B4kiWyti.js"),[],import.meta.url).then(o=>legacy(o.sas))}}),LanguageDescription.of({name:"Scala",extensions:["scala"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.scala))}}),LanguageDescription.of({name:"Scheme",extensions:["scm","ss"],load(){return __vitePreload(()=>import("./scheme-w3NHGvyK.js"),[],import.meta.url).then(o=>legacy(o.scheme))}}),LanguageDescription.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return __vitePreload(()=>import("./shell-CjFT_Tl9.js"),[],import.meta.url).then(o=>legacy(o.shell))}}),LanguageDescription.of({name:"Sieve",extensions:["siv","sieve"],load(){return __vitePreload(()=>import("./sieve-C3Gn_uJK.js"),[],import.meta.url).then(o=>legacy(o.sieve))}}),LanguageDescription.of({name:"Smalltalk",extensions:["st"],load(){return __vitePreload(()=>import("./smalltalk-CnHTOXQT.js"),[],import.meta.url).then(o=>legacy(o.smalltalk))}}),LanguageDescription.of({name:"Solr",load(){return __vitePreload(()=>import("./solr-DehyRSwq.js"),[],import.meta.url).then(o=>legacy(o.solr))}}),LanguageDescription.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return __vitePreload(()=>import("./mllike-C_8OmSiT.js"),[],import.meta.url).then(o=>legacy(o.sml))}}),LanguageDescription.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return __vitePreload(()=>import("./sparql-DkYu6x3z.js"),[],import.meta.url).then(o=>legacy(o.sparql))}}),LanguageDescription.of({name:"Spreadsheet",alias:["excel","formula"],load(){return __vitePreload(()=>import("./spreadsheet-BCZA_wO0.js"),[],import.meta.url).then(o=>legacy(o.spreadsheet))}}),LanguageDescription.of({name:"Squirrel",extensions:["nut"],load(){return __vitePreload(()=>import("./clike-wD8xDpL-.js"),[],import.meta.url).then(o=>legacy(o.squirrel))}}),LanguageDescription.of({name:"Stylus",extensions:["styl"],load(){return __vitePreload(()=>import("./stylus-BdAi1jBa.js"),[],import.meta.url).then(o=>legacy(o.stylus))}}),LanguageDescription.of({name:"Swift",extensions:["swift"],load(){return __vitePreload(()=>import("./swift-BzpIVaGY.js"),[],import.meta.url).then(o=>legacy(o.swift))}}),LanguageDescription.of({name:"sTeX",load(){return __vitePreload(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(o=>legacy(o.stex))}}),LanguageDescription.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return __vitePreload(()=>import("./stex-C3f8Ysf7.js"),[],import.meta.url).then(o=>legacy(o.stex))}}),LanguageDescription.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return __vitePreload(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(o=>legacy(o.verilog))}}),LanguageDescription.of({name:"Tcl",extensions:["tcl"],load(){return __vitePreload(()=>import("./tcl-BOR0Rekm.js"),[],import.meta.url).then(o=>legacy(o.tcl))}}),LanguageDescription.of({name:"Textile",extensions:["textile"],load(){return __vitePreload(()=>import("./textile-CnDTJFAw.js"),[],import.meta.url).then(o=>legacy(o.textile))}}),LanguageDescription.of({name:"TiddlyWiki",load(){return __vitePreload(()=>import("./tiddlywiki-DO-Gjzrf.js"),[],import.meta.url).then(o=>legacy(o.tiddlyWiki))}}),LanguageDescription.of({name:"Tiki wiki",load(){return __vitePreload(()=>import("./tiki-DGYXhP31.js"),[],import.meta.url).then(o=>legacy(o.tiki))}}),LanguageDescription.of({name:"TOML",extensions:["toml"],load(){return __vitePreload(()=>import("./toml-BXUEaScT.js"),[],import.meta.url).then(o=>legacy(o.toml))}}),LanguageDescription.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return __vitePreload(()=>import("./troff-wAsdV37c.js"),[],import.meta.url).then(o=>legacy(o.troff))}}),LanguageDescription.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return __vitePreload(()=>import("./ttcn-BSZjDM4v.js"),[],import.meta.url).then(o=>legacy(o.ttcn))}}),LanguageDescription.of({name:"TTCN_CFG",extensions:["cfg"],load(){return __vitePreload(()=>import("./ttcn-cfg-BIkV9KBc.js"),[],import.meta.url).then(o=>legacy(o.ttcnCfg))}}),LanguageDescription.of({name:"Turtle",extensions:["ttl"],load(){return __vitePreload(()=>import("./turtle-B1tBg_DP.js"),[],import.meta.url).then(o=>legacy(o.turtle))}}),LanguageDescription.of({name:"Web IDL",extensions:["webidl"],load(){return __vitePreload(()=>import("./webidl-ZXfAyPTL.js"),[],import.meta.url).then(o=>legacy(o.webIDL))}}),LanguageDescription.of({name:"VB.NET",extensions:["vb"],load(){return __vitePreload(()=>import("./vb-CmGdzxic.js"),[],import.meta.url).then(o=>legacy(o.vb))}}),LanguageDescription.of({name:"VBScript",extensions:["vbs"],load(){return __vitePreload(()=>import("./vbscript-BuJXcnF6.js"),[],import.meta.url).then(o=>legacy(o.vbScript))}}),LanguageDescription.of({name:"Velocity",extensions:["vtl"],load(){return __vitePreload(()=>import("./velocity-Dq6fSHCB.js"),[],import.meta.url).then(o=>legacy(o.velocity))}}),LanguageDescription.of({name:"Verilog",extensions:["v"],load(){return __vitePreload(()=>import("./verilog-C6RDOZhf.js"),[],import.meta.url).then(o=>legacy(o.verilog))}}),LanguageDescription.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return __vitePreload(()=>import("./vhdl-lSbBsy5d.js"),[],import.meta.url).then(o=>legacy(o.vhdl))}}),LanguageDescription.of({name:"XQuery",extensions:["xy","xquery"],load(){return __vitePreload(()=>import("./xquery-WRlm2TX8.js"),[],import.meta.url).then(o=>legacy(o.xQuery))}}),LanguageDescription.of({name:"Yacas",extensions:["ys"],load(){return __vitePreload(()=>import("./yacas-BJ4BC0dw.js"),[],import.meta.url).then(o=>legacy(o.yacas))}}),LanguageDescription.of({name:"Z80",extensions:["z80"],load(){return __vitePreload(()=>import("./z80-Hz9HOZM7.js"),[],import.meta.url).then(o=>legacy(o.z80))}}),LanguageDescription.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(o=>legacy(o.mscgen))}}),LanguageDescription.of({name:"X\xF9",extensions:["xu"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(o=>legacy(o.xu))}}),LanguageDescription.of({name:"MsGenny",extensions:["msgenny"],load(){return __vitePreload(()=>import("./mscgen-BA5vi2Kp.js"),[],import.meta.url).then(o=>legacy(o.msgenny))}}),LanguageDescription.of({name:"Vue",extensions:["vue"],load(){return __vitePreload(()=>import("./index-CZ4O5grf.js"),__vite__mapDeps([25,5,1,3,6]),import.meta.url).then(o=>o.vue())}}),LanguageDescription.of({name:"Angular Template",load(){return __vitePreload(()=>import("./index-3TZP2I1b.js"),__vite__mapDeps([26,5,1,3,6]),import.meta.url).then(o=>o.angular())}})],mkContentChangePlugin=(o,e)=>EditorView.updateListener.of(n=>{if(!e()||!n.docChanged)return;const a=n.startState.doc.toString(),s=n.state.doc.toString();o(s,a)}),updateHighlightTermsEffect=StateEffect.define(),highlightMark=Decoration.mark({class:"highlight-keep"}),highlighted=StateField.define({create:()=>Decoration.none,update:(o,e)=>{for(const n of e.effects)if(n.is(updateHighlightTermsEffect)){o=o.update({filter:()=>!1}),o=o.update({add:n.value.ranges.map(({from:a,to:s})=>highlightMark.range(a,s))});break}return o=o.map(e.changes),o},provide:o=>EditorView.decorations.from(o)}),updateHighlightTerms=(o,e)=>{let n=[];for(const{from:s,to:l}of e.visibleRanges){let c;const d=e.state.doc.sliceString(s,l).toLowerCase();for(const u of o)for(c=-1;(c=d.indexOf(u,c+1))!=-1;)n.push({from:s+c,to:s+c+u.length})}n=n.sort((s,l)=>s.from-l.from);const a=[];return e.state.field(highlighted,!1)||a.push(StateEffect.appendConfig.of(highlighted)),a.push(updateHighlightTermsEffect.of({ranges:n})),e.dispatch({effects:a}),!0},base00="#40464a",base01="#DDDDDD",base02="#B9D2FF",base03="#b0b0b0",base05="#e0e0e0",base06="#808080",base07="#000000",base08="#A54543",base09="#fc6d24",base0A="#fda331",base0B="#8abeb7",base0C="#b5bd68",base0D="#6fb3d2",base0E="#cc99cc",base0F="#6987AF",invalid=base09,darkBackground="#292d30",highlightBackground=base02+"30",tooltipBackground=base01,selection=base00,cursor=base01,basicDarkTheme=EditorView.theme({"&":{color:base01,backgroundColor:"transparent"},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:base03},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:base02,outline:`1px solid ${base03}`,color:base07},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:base05,color:base07},".cm-activeLine":{backgroundColor:"transparent"},".cm-selectionMatch":{backgroundColor:highlightBackground},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${base03}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:base02,color:base07},".cm-gutters":{borderRight:"1px solid #ffffff10",color:base06,backgroundColor:darkBackground},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:base02},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:base03}}},{dark:!0}),basicDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:base0A},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:base0C},{tag:[tags.variableName],color:base0D},{tag:[tags.function(tags.variableName)],color:base0A},{tag:[tags.labelName],color:base09},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:base0A},{tag:[tags.definition(tags.name),tags.separator],color:base0E},{tag:[tags.brace],color:base0E},{tag:[tags.annotation],color:invalid},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:base0A},{tag:[tags.typeName,tags.className],color:base0D},{tag:[tags.operator,tags.operatorKeyword],color:base0E},{tag:[tags.tagName],color:base0A},{tag:[tags.squareBracket],color:base0E},{tag:[tags.angleBracket],color:base0E},{tag:[tags.attributeName],color:base0D},{tag:[tags.regexp],color:base0A},{tag:[tags.quote],color:base01},{tag:[tags.string],color:base0C},{tag:tags.link,color:base0F,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:base0B},{tag:[tags.meta],color:base08},{tag:[tags.comment],color:base06,fontStyle:"italic"},{tag:tags.monospace,color:base01},{tag:tags.strong,fontWeight:"bold",color:base0A},{tag:tags.emphasis,fontStyle:"italic",color:base0D},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:base01},{tag:tags.special(tags.heading1),fontWeight:"bold",color:base01},{tag:tags.heading1,fontWeight:"bold",color:base01},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:base01},{tag:[tags.heading5,tags.heading6],color:base01},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:base0B},{tag:[tags.processingInstruction,tags.inserted],color:base0B},{tag:[tags.contentSeparator],color:base0D},{tag:tags.invalid,color:base02,borderBottom:`1px dotted ${invalid}`}]),basicDark=[basicDarkTheme,syntaxHighlighting(basicDarkHighlightStyle)],config={name:"basicLight",dark:!1,background:"transparent",foreground:"#24292f",selection:"var(--selection-bg-color)",cursor:"#24292f",dropdownBackground:"#fff",dropdownBorder:"#e1e4e8",activeLine:"#c6c6c622",matchingBracket:"#34d05840",keyword:"#cf222e",storage:"#d73a49",variable:"#24292f",parameter:"#24292f",function:"#005cc5",string:"#0a3069",constant:"#0550ae",type:"#005cc5",class:"#cf222e",number:"#005cc5",comment:"#929ca6",heading:"#005cc5",invalid:"#cb2431",regexp:"#032f62"},basicLightTheme=EditorView.theme({"&":{color:config.foreground,backgroundColor:config.background},".cm-content":{caretColor:config.cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:config.cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:config.selection},".cm-panels":{backgroundColor:config.dropdownBackground,color:config.foreground},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:config.dropdownBackground,outline:`1px solid ${config.dropdownBorder}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:config.selection},".cm-activeLine":{backgroundColor:config.activeLine},".cm-selectionMatch":{backgroundColor:config.selection},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:config.matchingBracket,outline:"none"},".cm-gutters":{backgroundColor:config.background,color:config.foreground,border:"none"},".cm-activeLineGutter":{backgroundColor:config.background},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:config.foreground},".cm-tooltip":{border:`1px solid ${config.dropdownBorder}`,backgroundColor:config.dropdownBackground,color:config.foreground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:config.foreground,borderBottomColor:config.foreground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:config.selection,color:config.foreground}}},{dark:config.dark}),basicLightSyntaxTheme=HighlightStyle.define([{tag:tags.keyword,color:config.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config.variable},{tag:[tags.propertyName],color:config.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config.constant},{tag:[tags.definition(tags.name),tags.separator],color:config.variable},{tag:[tags.className],color:config.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config.number},{tag:[tags.typeName],color:config.type,fontStyle:config.type},{tag:[tags.operator,tags.operatorKeyword],color:config.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config.regexp},{tag:[tags.meta,tags.comment],color:config.comment,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config.variable},{tag:tags.invalid,color:config.invalid},{tag:tags.strikethrough,textDecoration:"line-through"}]),basicLight=[basicLightTheme,syntaxHighlighting(basicLightSyntaxTheme)],_sfc_main$1K=defineComponent({__name:"CodeMirror",props:mergeModels({theme:{type:String,required:!1},readonly:{type:Boolean,required:!1},lang:{type:String,required:!0},extensionsBuilder:{type:Function,required:!1},highlightTerms:{type:Array,required:!1},onSrcChanged:{type:Function,required:!1},keymap:{type:Object,required:!1}},{src:{type:String},srcModifiers:{}}),emits:["update:src"],setup(o,{expose:e}){const n=o;e({getEditorView:()=>s,getWrapperDom:()=>l.value});const a=useModel(o,"src");let s=null;const l=ref(null),c=new Compartment,d=new Compartment,u=new Compartment,f=ThemeContext.useContext(),v={light:basicLight,dark:basicDark};watch(a,()=>{if(s){if(a.value!=s.state.doc.toString()){const B=s.state.selection.toJSON();s.dispatch({changes:{from:0,to:s.state.doc.length,insert:a.value},selection:EditorSelection.fromJSON(B)})}updateHighlightTerms(n.highlightTerms??[],s)}}),watch(()=>n.highlightTerms,()=>{s&&updateHighlightTerms(n.highlightTerms??[],s)});const b=async B=>{if(!s)return;if(B==""||B=="unknown"){s.dispatch({effects:c.reconfigure([])});return}const M=await LanguageDescription.matchLanguageName(languages,B,!0);if(!M)return;const I=await M.load();s.dispatch({effects:c.reconfigure([I])})};watch(()=>n.lang,b);const k=B=>{if(!s)return;const M=B??(f==null?void 0:f.theme.value)??"dark",I=v[M];I&&s.dispatch({effects:d.reconfigure([I])})};watch(()=>n.theme,k);const x=B=>{if(!s)return;const M=Object.values(B??{});s.dispatch({effects:u.reconfigure(keymap.of(M))})};watch(()=>n.keymap,x);const _=()=>{var M;const B=((M=n.extensionsBuilder)==null?void 0:M.call(n))??[];return n.readonly?[c.of([]),d.of([]),EditorState.readOnly.of(!0),...B]:[minimalSetup,c.of([]),d.of([]),u.of([]),EditorState.readOnly.of(!1),mkContentChangePlugin((I,F)=>{n.onSrcChanged?n.onSrcChanged(I,F):a.value=I},()=>!0),...B]};onMounted(()=>{l.value&&(s=new EditorView({doc:a.value??"",extensions:_(),parent:l.value}),b(n.lang??""),k(n.theme),x(n.keymap??{}))}),onUnmounted(()=>{setTimeout(()=>{s&&s.destroy()},1e3)});const E={props:n,src:a,get editorView(){return s},set editorView(B){s=B},$wrapper:l,languageCompartment:c,themeCompartment:d,keymapCompartment:u,themeContext:f,registeredThemes:v,configureLanguage:b,configureTheme:k,configureKeymap:x,mkExtensions:_};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),_hoisted_1$G={class:"code-mirror-wrapper !w-full",ref:"$wrapper"};function _sfc_render$1K(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$G,null,512)}const CodeMirror=_export_sfc(_sfc_main$1K,[["render",_sfc_render$1K],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/codemirror/CodeMirror.vue"]]),_sfc_main$1J=defineComponent({__name:"Select",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:String,required:!1},modelValue:{type:String,required:!1},dir:{type:String,required:!1},name:{type:String,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get SelectRoot(){return Ny}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$1J(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Select=_export_sfc(_sfc_main$1J,[["render",_sfc_render$1J],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/Select.vue"]]),_sfc_main$1I=defineComponent({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1,default:"popper"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get SelectContent(){return Ky},get SelectPortal(){return zy},get SelectViewport(){return Xy},get SelectScrollDownButton(){return SelectScrollDownButton},get SelectScrollUpButton(){return SelectScrollUpButton}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1I(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectPortal,null,{default:withCtx(()=>[createVNode(a.SelectContent,mergeProps({...a.forwarded,...o.$attrs},{class:a.cn("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a.props.class)}),{default:withCtx(()=>[createVNode(a.SelectScrollUpButton),createVNode(a.SelectViewport,{class:normalizeClass(a.cn("p-1",n.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["class"]),createVNode(a.SelectScrollDownButton)]),_:3},16,["class"])]),_:3})}const SelectContent=_export_sfc(_sfc_main$1I,[["render",_sfc_render$1I],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectContent.vue"]]),_sfc_main$1H=defineComponent({__name:"SelectGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get SelectGroup(){return Gy}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1H(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectGroup,mergeProps({class:a.cn("p-1 w-full",a.props.class)},a.delegatedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const SelectGroup=_export_sfc(_sfc_main$1H,[["render",_sfc_render$1H],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectGroup.vue"]]),_sfc_main$1G=defineComponent({__name:"SelectItem",props:{value:{type:String,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get Check(){return Check},get SelectItem(){return jy},get SelectItemIndicator(){return Uy},get SelectItemText(){return Yy}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),_hoisted_1$F={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"};function _sfc_render$1G(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectItem,mergeProps(a.forwardedProps,{class:a.cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a.props.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$F,[createVNode(a.SelectItemIndicator,null,{default:withCtx(()=>[createVNode(a.Check,{class:"h-4 w-4"})]),_:1})]),createVNode(a.SelectItemText,null,{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3})]),_:3},16,["class"])}const SelectItem=_export_sfc(_sfc_main$1G,[["render",_sfc_render$1G],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectItem.vue"]]),_sfc_main$1F=defineComponent({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get ChevronDown(){return ChevronDown},get SelectScrollDownButton(){return Jy}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$1F(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectScrollDownButton,mergeProps(a.forwardedProps,{class:a.cn("flex cursor-default items-center justify-center py-1",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default",{},()=>[createVNode(a.ChevronDown,{class:"h-4 w-4"})])]),_:3},16,["class"])}const SelectScrollDownButton=_export_sfc(_sfc_main$1F,[["render",_sfc_render$1F],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectScrollDownButton.vue"]]),_sfc_main$1E=defineComponent({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get ChevronUp(){return ChevronUp},get SelectScrollUpButton(){return Zy}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$1E(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectScrollUpButton,mergeProps(a.forwardedProps,{class:a.cn("flex cursor-default items-center justify-center py-1",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default",{},()=>[createVNode(a.ChevronUp,{class:"h-4 w-4"})])]),_:3},16,["class"])}const SelectScrollUpButton=_export_sfc(_sfc_main$1E,[["render",_sfc_render$1E],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectScrollUpButton.vue"]]),_sfc_main$1D=defineComponent({__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get ChevronDown(){return ChevronDown},get SelectIcon(){return eg},get SelectTrigger(){return Ly}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$1D(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectTrigger,mergeProps(a.forwardedProps,{class:a.cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default"),createVNode(a.SelectIcon,{"as-child":""},{default:withCtx(()=>[createVNode(a.ChevronDown,{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"])}const SelectTrigger=_export_sfc(_sfc_main$1D,[["render",_sfc_render$1D],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectTrigger.vue"]]),_sfc_main$1C=defineComponent({__name:"SelectValue",props:{placeholder:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get SelectValue(){return Qy}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1C(o,e,n,a,s,l){return openBlock(),createBlock(a.SelectValue,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const SelectValue=_export_sfc(_sfc_main$1C,[["render",_sfc_render$1C],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/select/SelectValue.vue"]]),_sfc_main$1B=defineComponent({__name:"CodeContent",props:{blockTree:{type:Object,required:!1},itemId:{type:String,required:!1},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1}},setup(o,{expose:e}){e();const n=o,{blockEditor:a}=BlocksContext.useContext(),s=useTaskQueue(),l=ref(null),c=ref(null),{codemirrorKeymap:d}=KeymapContext.useContext(),{lastFocusedDiId:u}=LastFocusContext.useContext(),f=languages.map(M=>M.name),v=computed(()=>{const M=n.block.content[2],I=LanguageDescription.matchLanguageName(languages,M,!0);return I?I.name:M}),b=computed(()=>u.value===n.itemId?"open":"closed"),k=()=>n.readonly?[]:[indentOnInput(),bracketMatching(),closeBrackets()],x=M=>{const I=n.block.id,F=[BLOCK_CONTENT_TYPES.CODE,M,n.block.content[2]];s.addTask(()=>{a.changeBlockContent({blockId:I,content:F})},{type:"updateBlockContent"+I,delay:500,debounce:!0})};watch(()=>n.block.content,M=>{M[0]===BLOCK_CONTENT_TYPES.CODE&&(l.value=M[1])},{immediate:!0});const _=M=>{s.addTask(()=>{a.changeBlockContent({blockId:n.block.id,content:[BLOCK_CONTENT_TYPES.CODE,l.value,M]})})},E=()=>{navigator.clipboard.writeText(l.value)};onMounted(()=>{var M,I;if(n.itemId){const F=(M=c.value)==null?void 0:M.getEditorView();F&&((I=n.blockTree)==null||I.registerEditorView(n.itemId,F))}}),onUnmounted(()=>{var M,I;if(n.itemId){const F=(M=c.value)==null?void 0:M.getEditorView();F&&((I=n.blockTree)==null||I.unregisterEditorView(n.itemId,F),F.destroy())}});const B={props:n,blockEditor:a,taskQueue:s,src:l,cmWrapper:c,codemirrorKeymap:d,lastFocusedDiId:u,langs:f,currLang:v,toolbarState:b,extensionsBuilder:k,handleSrcChange:x,handleLangChange:_,handleCopyCode:E,CodeMirror,get Copy(){return Copy},get Button(){return Button},get Select(){return Select},get SelectContent(){return SelectContent},get SelectItem(){return SelectItem},get SelectTrigger(){return SelectTrigger},get Tooltip(){return Tooltip},get TooltipContent(){return TooltipContent},get TooltipTrigger(){return TooltipTrigger}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),_hoisted_1$E={class:"relative w-full"},_hoisted_2$m=["data-state"];function _sfc_render$1B(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$E,[createVNode(a.CodeMirror,{class:"code-content block-content",ref:"cmWrapper",src:a.src,"onUpdate:src":e[0]||(e[0]=c=>a.src=c),readonly:n.readonly,lang:n.block.content[2],"extensions-builder":a.extensionsBuilder,"on-src-changed":a.handleSrcChange,keymap:a.codemirrorKeymap},null,8,["src","readonly","lang","keymap"]),createBaseVNode("div",{class:"toolbar absolute -top-9 right-0 flex items-center w-fit gap-x-1 rounded-md p-1 data-[state=closed]:hidden","data-state":a.toolbarState},[createVNode(a.Select,{value:a.currLang,"onUpdate:modelValue":a.handleLangChange},{default:withCtx(()=>[createVNode(a.SelectTrigger,{class:"h-8 min-w-32 focus-visible:outline-none focus-visible:ring-transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.currLang??o.$t("kbView.codeblock.unknownLanguage")),1)]),_:1}),createVNode(a.SelectContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.langs,c=>(openBlock(),createBlock(a.SelectItem,{value:c},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["value"]),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"icon",class:"flex-shrink-0",onClick:a.handleCopyCode},{default:withCtx(()=>[createVNode(a.Copy,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.codeblock.copyCode")),1)]),_:1})]),_:1})],8,_hoisted_2$m)])}const CodeContent=_export_sfc(_sfc_main$1B,[["render",_sfc_render$1B],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/block-contents/CodeContent.vue"]]),_sfc_main$1A=defineComponent({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get DropdownMenuRoot(){return sh}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$1A(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const DropdownMenu=_export_sfc(_sfc_main$1A,[["render",_sfc_render$1A],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenu.vue"]]),_sfc_main$1z=defineComponent({__name:"DropdownMenuCheckboxItem",props:{checked:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["select","update:checked"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get Check(){return Check},get DropdownMenuCheckboxItem(){return vh},get DropdownMenuItemIndicator(){return mh}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),_hoisted_1$D={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"};function _sfc_render$1z(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuCheckboxItem,mergeProps(a.forwarded,{class:a.cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a.props.class)}),{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$D,[createVNode(a.DropdownMenuItemIndicator,null,{default:withCtx(()=>[createVNode(a.Check,{class:"w-4 h-4"})]),_:1})]),renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DropdownMenuCheckboxItem=_export_sfc(_sfc_main$1z,[["render",_sfc_render$1z],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuCheckboxItem.vue"]]),_sfc_main$1y=defineComponent({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get DropdownMenuContent(){return uh},get DropdownMenuPortal(){return ih}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1y(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuPortal,null,{default:withCtx(()=>[createVNode(a.DropdownMenuContent,mergeProps(a.forwarded,{class:a.cn("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const DropdownMenuContent=_export_sfc(_sfc_main$1y,[["render",_sfc_render$1y],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuContent.vue"]]),_sfc_main$1x=defineComponent({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get DropdownMenuGroup(){return fh}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1x(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuGroup,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const DropdownMenuGroup=_export_sfc(_sfc_main$1x,[["render",_sfc_render$1x],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuGroup.vue"]]),_sfc_main$1w=defineComponent({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},inset:{type:Boolean,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get DropdownMenuItem(){return ch$1}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$1w(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuItem,mergeProps(a.forwardedProps,{class:a.cn("dropdown-menu-item relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n.inset&&"pl-8",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DropdownMenuItem=_export_sfc(_sfc_main$1w,[["render",_sfc_render$1w],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuItem.vue"]]),_sfc_main$1v=defineComponent({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get DropdownMenuSub(){return bh}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$1v(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuSub,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const DropdownMenuSub=_export_sfc(_sfc_main$1v,[["render",_sfc_render$1v],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuSub.vue"]]),_sfc_main$1u=defineComponent({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get DropdownMenuSubContent(){return Ch}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1u(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuSubContent,mergeProps(a.forwarded,{class:a.cn("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DropdownMenuSubContent=_export_sfc(_sfc_main$1u,[["render",_sfc_render$1u],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuSubContent.vue"]]),_sfc_main$1t=defineComponent({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get ChevronRight(){return ChevronRight},get DropdownMenuSubTrigger(){return wh}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$1t(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuSubTrigger,mergeProps(a.forwardedProps,{class:a.cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default"),createVNode(a.ChevronRight,{class:"ml-auto h-4 w-4"})]),_:3},16,["class"])}const DropdownMenuSubTrigger=_export_sfc(_sfc_main$1t,[["render",_sfc_render$1t],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuSubTrigger.vue"]]),_sfc_main$1s=defineComponent({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=At(n),s={props:n,forwardedProps:a,get DropdownMenuTrigger(){return rh}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1s(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenuTrigger,mergeProps({class:"outline-none"},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const DropdownMenuTrigger=_export_sfc(_sfc_main$1s,[["render",_sfc_render$1s],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/dropdown-menu/DropdownMenuTrigger.vue"]]),_sfc_main$1r=defineComponent({__name:"ImageContent",props:{blockTree:{type:Object,required:!1},block:{type:Object,required:!0},itemId:{type:String,required:!1}},setup(o,{expose:e}){e();const n=o,{useImage:a}=ImagesContext.useContext(),s=ref(null),l=ref(null),c=useTaskQueue(),{blockEditor:d,blocksManager:u}=BlocksContext.useContext();let f=0;const v=generateKeydownHandlerSimple({Backspace:{run:V=>V.isComposing||V.keyCode===229?!1:(c.addTask(()=>{d.deleteBlock({blockId:n.block.id})}),!0),stopPropagation:!0,preventDefault:!0},Enter:{run:V=>{if(V.isComposing||V.keyCode===229)return!1;const L=n.itemId,U=n.blockTree;return!L||!U?!1:(c.addTask(async()=>{const j={baseBlockId:n.block.id,offset:1},oe=getPmSchema({getBlockRef:u.getBlockRef});d.insertNormalBlock({pos:j,content:plainTextToTextContent("",oe)});const Y=U.getDiBelow(L);await U.nextUpdate(),Y&&U.focusDi(Y[0].itemId)}),!0)},stopPropagation:!0,preventDefault:!0},ArrowDown:{run:V=>{if(V.isComposing||V.keyCode===229)return!1;const L=n.blockTree;if(!L)return!1;const U=L.getDiBelow(n.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowUp:{run:V=>{if(V.isComposing||V.keyCode===229)return!1;const L=n.blockTree;if(!L)return!1;const U=L.getDiAbove(n.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowLeft:{run:V=>{if(V.isComposing||V.keyCode===229)return!1;const L=n.blockTree;if(!L)return!1;const U=L.getPredecessorDi(n.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},ArrowRight:{run:V=>{if(V.isComposing||V.keyCode===229)return!1;const L=n.blockTree;if(!L)return!1;const U=L.getSuccessorDi(n.itemId);return U&&L.focusDi(U[0].itemId),!0},stopPropagation:!0,preventDefault:!0},"*":{run:()=>!0,stopPropagation:!0,preventDefault:!0},Tab:{run:V=>V.isComposing||V.keyCode===229?!1:(c.addTask(()=>{d.promoteBlock({blockId:n.block.id})}),!0),stopPropagation:!0,preventDefault:!0},"Shift-Tab":{run:V=>V.isComposing||V.keyCode===229?!1:(c.addTask(()=>{d.demoteBlock({blockId:n.block.id})}),!0),stopPropagation:!0,preventDefault:!0}}),b=V=>{const L=V.target;L.blur(),L.contentEditable="false",L.innerHTML="",setTimeout(()=>{L.contentEditable="true",L.focus()},0)},k=a(()=>n.block.content[1]),x=ref(!1),_=V=>{c.addTask(()=>{const L=n.block.id,U=[...n.block.content],j=U[5]??[];j.includes(V)?j.splice(j.indexOf(V),1):j.push(V),U[5]=j,d.changeBlockContent({blockId:L,content:U})})},E=V=>(n.block.content[5]??[]).includes(V),B=()=>{c.addTask(()=>{d.deleteBlock({blockId:n.block.id})})},M=V=>{const L=V.clientX-f+3,U=s.value;U&&(U.style.width=Math.min(U.naturalWidth,L)+"px")},I=()=>{var U;const V=s.value;if(!V)return;const L=V.clientWidth;c.addTask(()=>{const j=n.block.id,oe=[...n.block.content];oe[4]=L,d.changeBlockContent({blockId:j,content:oe})}),(U=document.getElementById("cursor-style"))==null||U.remove(),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I),document.removeEventListener("mouseleave",I)},F={props:n,useImage:a,imageElRef:s,imageElContainerRef:l,taskQueue:c,blockEditor:d,blocksManager:u,get imageLeft(){return f},set imageLeft(V){f=V},handleKeydownOnCursorContainer:v,preventCompositionInput:b,image:k,showDropdown:x,toggleFilter:_,isFilterActive:E,handleDeleteImage:B,handleMouseMove:M,handleMouseUpOrLeave:I,handleMouseDown:V=>{var j;const L=(j=s.value)==null?void 0:j.getBoundingClientRect();if(!L)return;f=L.left;const U=document.createElement("style");U.innerHTML="*{cursor: col-resize!important;}",U.id="cursor-style",document.head.appendChild(U),V.preventDefault(),V.stopPropagation(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",I),document.addEventListener("mouseleave",I)},handleClearScannedImage:async()=>{const V=n.block.content;if(V[0]!==BLOCK_CONTENT_TYPES.IMAGE)return;const L=await fsClearScannedImage({path:V[1]});L.success&&c.addTask(()=>{const U=[...V];U[1]=L.data.path,d.changeBlockContent({blockId:n.block.id,content:U})})},get BLOCK_CONTENT_TYPES(){return BLOCK_CONTENT_TYPES},get Button(){return Button},get Blend(){return Blend},get Download(){return Download},get FileScan(){return FileScan},get Info(){return Info},get Loader2(){return LoaderCircle},get MessageSquareMore(){return MessageSquareMore},get MoreVertical(){return EllipsisVertical},get Trash2(){return Trash2},get DropdownMenu(){return DropdownMenu},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuPortal(){return ih},get DropdownMenuSub(){return DropdownMenuSub},get DropdownMenuSubContent(){return DropdownMenuSubContent},get DropdownMenuSubTrigger(){return DropdownMenuSubTrigger},get DropdownMenuTrigger(){return DropdownMenuTrigger}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),_hoisted_1$C=["data-showDropdown","data-path"],_hoisted_2$l={key:0,class:"flex items-center text-muted-foreground"},_hoisted_3$g={class:"image-fit-container relative w-fit bg-background"},_hoisted_4$d=["src"];function _sfc_render$1r(o,e,n,a,s,l){var c,d,u,f,v,b;return n.block.content[0]===a.BLOCK_CONTENT_TYPES.IMAGE&&a.image?(openBlock(),createElementBlock("div",{key:0,class:"block-content image-content relative","data-showDropdown":a.showDropdown,"data-path":n.block.content[1]},[a.image.status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_2$l,[createVNode(a.Loader2,{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.fetchingImage")),1)])):a.image.status==="synced"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["image-container flex select-none my-2 shrink-0",{imageBlend:(c=a.props.block.content[5])==null?void 0:c.includes("blend"),imageBlendLuminosity:(d=a.props.block.content[5])==null?void 0:d.includes("blendLuminosity"),imageCircle:(u=a.props.block.content[5])==null?void 0:u.includes("circle"),imageInvert:(f=a.props.block.content[5])==null?void 0:f.includes("invert"),imageInvertW:(v=a.props.block.content[5])==null?void 0:v.includes("invertW"),imageOutline:(b=a.props.block.content[5])==null?void 0:b.includes("outline")}]),ref:"imageElContainerRef"},[createBaseVNode("div",_hoisted_3$g,[createBaseVNode("img",{ref:"imageElRef",class:"rounded",style:normalizeStyle({width:n.block.content[4]?n.block.content[4]+"px":"unset"}),src:a.image.url},null,12,_hoisted_4$d),createCommentVNode(" \u62D6\u66F3\u8C03\u6574\u5BBD\u5EA6 "),createBaseVNode("div",{class:"absolute right-[2px] top-1/2 -translate-y-1/2 h-full max-h-[40px] rounded w-1 bg-muted cursor-col-resize",onMousedown:a.handleMouseDown},null,32),createCommentVNode(" \u56FE\u7247\u64CD\u4F5C "),createVNode(a.DropdownMenu,{open:a.showDropdown,"onUpdate:open":e[2]||(e[2]=k=>a.showDropdown=k),modal:!1},{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"icon",class:"image-actions absolute top-2 right-2"},{default:withCtx(()=>[createVNode(a.MoreVertical,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,{class:"w-52 mx-4"},{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.MessageSquareMore,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.addCaption")),1)]),_:1}),createCommentVNode(" \u4E0B\u8F7D\u56FE\u7247 "),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Download,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.download")),1)]),_:1}),createCommentVNode(" \u8BE6\u7EC6\u4FE1\u606F "),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Info,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.metadata")),1)]),_:1}),createCommentVNode(" \u6E05\u9664\u626B\u63CF\u56FE\u7247\u7684\u80CC\u666F "),createVNode(a.DropdownMenuItem,{onClick:a.handleClearScannedImage},{default:withCtx(()=>[createVNode(a.FileScan,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.clearScannedImage")),1)]),_:1}),createCommentVNode(" \u6EE4\u955C "),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.Blend,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.filter")),1)]),_:1}),createVNode(a.DropdownMenuPortal,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,{class:normalizeClass({active:a.isFilterActive("invert")}),onClick:e[0]||(e[0]=k=>a.toggleFilter("invert"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.imageContent.invert")),1)]),_:1},8,["class"]),createVNode(a.DropdownMenuItem,{class:normalizeClass({active:a.isFilterActive("invertW")}),onClick:e[1]||(e[1]=k=>a.toggleFilter("invertW"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.imageContent.invertW")),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),createCommentVNode(" \u5220\u9664\u56FE\u7247 "),createVNode(a.DropdownMenuItem,{class:"!text-red-500",onClick:a.handleDeleteImage},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.imageContent.deleteImage")),1)]),_:1})]),_:1})]),_:1},8,["open"])]),createCommentVNode(" \u4E00\u4E2A\u53EF\u4EE5\u5BB9\u7EB3\u5149\u6807\u7684\u5BB9\u5668\uFF0C\u805A\u7126\u5230\u56FE\u7247\u65F6\uFF0C\u5149\u6807\u4F1A\u8FDB\u5165\u8BE5\u5BB9\u5668 "),createCommentVNode(" \u5728\u8FD9\u4E2A\u5BB9\u5668\u4E2D\u6309\u5220\u9664\u952E\uFF0C\u4F1A\u5220\u9664\u56FE\u7247 "),createCommentVNode(" \u6309 Enter \u7B49\u5176\u4ED6\u952E\u4E5F\u4F1A\u6709\u76F8\u5E94\u884C\u4E3A "),createCommentVNode(" \u4F46\u662F\u8FD9\u4E2A\u5BB9\u5668\u4E2D\u4E0D\u80FD\u8F93\u5165\u6587\u5B57\uFF01\uFF01 "),createBaseVNode("div",{class:"cursor-container flex-grow !outline-none min-w-1",contenteditable:"",onKeydown:e[3]||(e[3]=(...k)=>a.handleKeydownOnCursorContainer&&a.handleKeydownOnCursorContainer(...k)),onCompositionstart:a.preventCompositionInput},null,32)],2)):createCommentVNode("v-if",!0)],8,_hoisted_1$C)):createCommentVNode("v-if",!0)}const ImageContent=_export_sfc(_sfc_main$1r,[["render",_sfc_render$1r],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/block-contents/ImageContent.vue"]]),_sfc_main$1q=defineComponent({__name:"ScrollBar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ScrollAreaScrollbar(){return My},get ScrollAreaThumb(){return Vy}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1q(o,e,n,a,s,l){return openBlock(),createBlock(a.ScrollAreaScrollbar,mergeProps(a.delegatedProps,{class:a.cn("flex touch-none select-none transition-colors",n.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",n.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",a.props.class)}),{default:withCtx(()=>[createVNode(a.ScrollAreaThumb,{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"])}const ScrollBar=_export_sfc(_sfc_main$1q,[["render",_sfc_render$1q],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/scroll-area/ScrollBar.vue"]]),_sfc_main$1p=defineComponent({__name:"ScrollArea",props:{type:{type:String,required:!1},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},maxHeight:{type:String,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get ScrollAreaCorner(){return Fy},get ScrollAreaRoot(){return Oy},get ScrollAreaViewport(){return ky},ScrollBar};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1p(o,e,n,a,s,l){return openBlock(),createBlock(a.ScrollAreaRoot,mergeProps(a.delegatedProps,{class:a.cn("relative overflow-hidden",a.props.class)}),{default:withCtx(()=>[createVNode(a.ScrollAreaViewport,{class:"h-full w-full rounded-[inherit]",style:normalizeStyle({maxHeight:a.props.maxHeight})},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["style"]),createVNode(a.ScrollBar),createVNode(a.ScrollAreaCorner)]),_:3},16,["class"])}const ScrollArea=_export_sfc(_sfc_main$1p,[["render",_sfc_render$1p],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/scroll-area/ScrollArea.vue"]]),_sfc_main$1o=defineComponent({__name:"MathContent",props:{blockTree:{type:Object,required:!1},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1},itemId:{type:String,required:!1}},setup(o,{expose:e}){e();const n=o,a=useTaskQueue(),{blockEditor:s}=BlocksContext.useContext(),l=FloatingMathInputContext.useContext(),c=ref(null);let d="";const u={displayMode:!0,throwOnError:!1},f=()=>{const B=c.value;B&&(d.trim().length>0?(katex.render(d,B,u),B.classList.remove("empty")):(B.textContent="EMPTY EQUATION",B.classList.add("empty")))},v=()=>{const B=n.block.content,M=c.value;!M||B[0]!==BLOCK_CONTENT_TYPES.MATH||l.openFloatingMathInput(M,B[1],I=>{d=I,_()},b,k,k,x)},b=()=>{const B=n.blockTree;if(!B)return;const M=B.getDiAbove(n.itemId);M&&B.focusDi(M[0].itemId,{scrollIntoView:!0})},k=()=>{const B=n.blockTree;if(!B)return;const M=B.getDiBelow(n.itemId);M&&B.focusDi(M[0].itemId,{scrollIntoView:!0})},x=()=>{a.addTask(()=>{s.deleteBlock({blockId:n.block.id})})},_=()=>{a.addTask(()=>{s.changeBlockContent({blockId:n.block.id,content:[BLOCK_CONTENT_TYPES.MATH,d]})})};watch(()=>n.block.content,B=>{B[0]===BLOCK_CONTENT_TYPES.MATH&&(d=B[1],nextTick(()=>{f()}))},{immediate:!0});const E={props:n,taskQueue:a,blockEditor:s,floatingMathInputContext:l,$contentEl:c,get currSrc(){return d},set currSrc(B){d=B},KATEX_RENDER_OPTION:u,renderEquation:f,showMathEditor:v,skipLeft:b,skipRight:k,deleteThis:x,syncToState:_,get BLOCK_CONTENT_TYPES(){return BLOCK_CONTENT_TYPES}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}});function _sfc_render$1o(o,e,n,a,s,l){return n.block.content[0]===a.BLOCK_CONTENT_TYPES.MATH?(openBlock(),createElementBlock("div",{key:0,class:"math-content block-content overflow-x-auto [&.empty]:italic [&.empty]:text-muted-foreground [&.empty]:!w-fit",ref:"$contentEl",onClick:a.showMathEditor},null,512)):createCommentVNode("v-if",!0)}const MathContent=_export_sfc(_sfc_main$1o,[["render",_sfc_render$1o],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/block-contents/MathContent.vue"]]),_sfc_main$1n=defineComponent({__name:"BlockContent",props:{block:{type:Object,required:!0},itemId:{type:String,required:!1},blockTree:{type:Object,required:!1},readonly:{type:Boolean,required:!1},highlightTerms:{type:Array,required:!1},highlightRefs:{type:Array,required:!1}},setup(o,{expose:e}){e();const n={get BLOCK_CONTENT_TYPES(){return BLOCK_CONTENT_TYPES},CodeContent,ImageContent,MathContent,TextContent};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1n(o,e,n,a,s,l){return n.block.content[0]===a.BLOCK_CONTENT_TYPES.TEXT?(openBlock(),createBlock(a.TextContent,{key:0,block:n.block,"block-tree":n.blockTree,readonly:n.readonly,"highlight-terms":n.highlightTerms,"highlight-refs":n.highlightRefs,"item-id":n.itemId},null,8,["block","block-tree","readonly","highlight-terms","highlight-refs","item-id"])):n.block.content[0]===a.BLOCK_CONTENT_TYPES.MATH?(openBlock(),createBlock(a.MathContent,{key:1,block:n.block,"block-tree":n.blockTree,readonly:n.readonly,"item-id":n.itemId},null,8,["block","block-tree","readonly","item-id"])):n.block.content[0]===a.BLOCK_CONTENT_TYPES.CODE?(openBlock(),createBlock(a.CodeContent,{key:2,block:n.block,"block-tree":n.blockTree,readonly:n.readonly,"item-id":n.itemId},null,8,["block","block-tree","readonly","item-id"])):n.block.content[0]===a.BLOCK_CONTENT_TYPES.IMAGE?(openBlock(),createBlock(a.ImageContent,{key:3,block:n.block,"block-tree":n.blockTree,"item-id":n.itemId},null,8,["block","block-tree","item-id"])):createCommentVNode("v-if",!0)}const BlockContent=_export_sfc(_sfc_main$1n,[["render",_sfc_render$1n],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/block-contents/BlockContent.vue"]]),FavoriteContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),{kbPrefix:e}=ServerInfoContext.useContext(),n="favorite.blockIds",a=computed(()=>`${e.value}${n}`),s=useLocalStorage2(a,[]),l=computed({get:()=>s.value.map(c=>o.getBlock(c)).filter(c=>!!c),set:c=>{s.value=c.map(d=>d.id)}});return{favoriteBlockIds:s,favoriteBlocks:l}}),addIndentation$1=(o,e={})=>{const n=e.char||" ",a=e.count||2;let s=0;const l=[];return o.reverse().reduce((c,d)=>{l.length&&s&&l[s]&&l[s]===d.substring(1,l[s].length+1)&&(l.splice(s,1),s--);const u=[`${n.repeat(s?s*a:0)}${d}`,...c];return d.substring(0,2)==="</"&&(s++,l[s]=d.substring(2,d.length-1)),u},[]).join(`
`)};var addIndentation_1=addIndentation$1;const removeEmptyLines=o=>o.trim().replace(/(^(\s|\t)+|(( |\t)+)$)/gm,""),mergeAttributesWithElements$1=o=>{const e=removeEmptyLines(o).split(`
`),n=[];let a="";for(let s=0;s<e.length;s+=1){const l=e[s];if(l.endsWith("/>")){n.push(`${a}${l.slice(0,-2)} />`),a="";continue}if(l.endsWith(">")){n.push(`${a}${l.startsWith(">")||l.startsWith("<")?"":" "}${l}`),a="";continue}a+=a.length?` ${l}`:l}return n};var toLines={mergeAttributesWithElements:mergeAttributesWithElements$1,removeEmptyLines};const addIndentation=addIndentation_1,{mergeAttributesWithElements}=toLines,prettify=(o,e={})=>{const n=mergeAttributesWithElements(o);return addIndentation(n,e)};var src=prettify;const prettify$1=getDefaultExportFromCjs(src),ExporterContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),e=ref(!1),n=ref(void 0);return{open:e,blockId:n,openExporter:a=>{e.value=!0,n.value=a},closeExporter:()=>{e.value=!1,n.value=void 0},exportSubtreeToPlainText:(a,s={})=>{s.nonFoldOnly??(s.nonFoldOnly=!1);let l="";return o.forDescendants({onEachBlock:(c,d)=>{l+="  ".repeat(d)+"- "+c.ctext+`
`},rootBlockId:a,rootBlockLevel:0,nonFoldOnly:s.nonFoldOnly,includeSelf:!0}),l},exportSubtreeToHtml:(a,s={})=>{s.nonFoldOnly??(s.nonFoldOnly=!1);const l=document.createElement("ul"),c=getPmSchema({getBlockRef:o.getBlockRef}),d=DOMSerializer.fromSchema(c),u=(v,b)=>{if(v.fold&&s.nonFoldOnly)return;const k=document.createElement("li");if(v.content[0]===BLOCK_CONTENT_TYPES.TEXT){const x=Node$1.fromJSON(c,v.content[1]),_=d.serializeFragment(x.content);k.appendChild(_)}if(v.childrenRefs.length>0){const x=document.createElement("ul");for(const _ of v.childrenRefs)if(_.value&&!_.value.deleted){const E=toRaw(_.value);u(E,x)}k.appendChild(x)}b.appendChild(k)},f=o.getBlock(a);return f?(u(f,l),prettify$1(l.outerHTML)):(console.error("Cannot find root block",a),"")},exportSubtreeToMarkdown:a=>"",exportSubtreeToPdf:a=>""}}),FieldValueInspectorContext=createContext(()=>{const o=ref(!1),e=ref(void 0);return{open:o,blockId:e,openFieldValuesInspector:n=>{o.value=!0,e.value=n}}}),BlockContextMenuContext=createContext(()=>{const o=ref(!1),e=ref(null),n=ref(null);return{open:o,clickedBlockId:n,showPos:e,openAt:(a,s)=>{o.value=!0,e.value=a,n.value=s}}}),_sfc_main$1m=defineComponent({__name:"BlockContextMenu",setup(o,{expose:e}){e();const n=useTaskQueue(),{blockEditor:a,blocksManager:s}=BlocksContext.useContext(),{openBlockMover:l}=BlockMoverContext.useContext(),{favoriteBlockIds:c}=FavoriteContext.useContext(),{sidePaneBlockIds:d,addToSidePane:u}=SidebarContext.useContext(),{lastFocusedBlockTree:f}=LastFocusContext.useContext(),{openExporter:v}=ExporterContext.useContext(),{openFieldValuesInspector:b}=FieldValueInspectorContext.useContext(),{open:k,showPos:x,clickedBlockId:_}=BlockContextMenuContext.useContext();watch(x,async()=>{if(await nextTick(),!x.value)return;const B=document.querySelector("[data-radix-popper-content-wrapper]");if(!(B instanceof HTMLElement))return;const{x:M,y:I}=x.value,F=B.getBoundingClientRect(),V=calcPopoverPos(F.width,F.height,M,I,{});document.body.style.setProperty("--popover-x",`${V.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${V.rightDown.y}px`)});const E={taskQueue:n,blockEditor:a,blocksManager:s,openBlockMover:l,favoriteBlockIds:c,sidePaneBlockIds:d,addToSidePaneImpl:u,lastFocusedBlockTree:f,openExporter:v,openFieldValuesInspector:b,open:k,showPos:x,clickedBlockId:_,predefinedColors:["red","green","blue","yellow","gray","orange","purple"],deleteBlock:(B,M)=>(!B&&M&&n.addTask(async()=>{await a.deleteBlock({blockId:M})}),!!M),moveBlock:(B,M,I)=>{if(!B&&M&&I){const F={x:I.clientX,y:I.clientY};setTimeout(()=>{l(F)},200)}return!!M},moveBlockLeaveRef:(B,M,I)=>{if(!B&&M&&I){const F={x:I.clientX,y:I.clientY};setTimeout(()=>{l(F,{leaveRef:!0})},200)}return!!M},addToSidePane:(B,M)=>{const I=!!M&&!d.value.includes(M);return!B&&I&&u(M),!!M&&I},addToFavorite:(B,M)=>{const I=!!M&&!c.value.includes(M);return!B&&I&&c.value.push(M),!!M&&I},insertMirrorBelow:(B,M)=>(!B&&M&&n.addTask(async()=>{const I={baseBlockId:M,offset:1},F=f.value;if(!F)return;await a.insertMirrorBlock({pos:I,srcBlockId:M});const V=F.getDiBelow(M);V&&F.focusDi(V[0].itemId)}),!!M),exportBlock:(B,M,I)=>(!B&&M&&v(M),!!M),openFieldValuesInspectorCommand:(B,M)=>(!B&&M&&b(M),!!M),getBlockRefColorSetter:B=>(M,I,F)=>(!M&&I&&F&&n.addTask(async()=>{const V=s.getBlock(I);V&&a.setBlockMetadata({blockId:I,metadata:{...V.metadata,blockRefColor:B}})}),!!I),get Copy(){return Copy},get Trash2(){return Trash2},get FlipHorizontal(){return FlipHorizontal},get Bookmark(){return Bookmark},get Sidebar(){return PanelLeft},get Download(){return Download},get SortAsc(){return ArrowUpNarrowWide},get ArrowDownAZ(){return ArrowDownAZ},get ArrowUpAZ(){return ArrowUpAZ},get CalendarArrowUp(){return CalendarArrowUp},get CalendarArrowDown(){return CalendarArrowDown},get ArrowRight(){return ArrowRight},get Database(){return Database},get Paintbrush(){return Paintbrush},get DropdownMenu(){return DropdownMenu},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuSubContent(){return DropdownMenuSubContent},get DropdownMenuSub(){return DropdownMenuSub},get DropdownMenuSubTrigger(){return DropdownMenuSubTrigger}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}});function _sfc_render$1m(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenu,{open:a.open,"onUpdate:open":e[9]||(e[9]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DropdownMenuContent,{class:"block-contextmenu-content min-w-[200px] overflow-y-auto max-h-[var(--radix-dropdown-menu-content-available-height)]"},{default:withCtx(()=>[createVNode(a.DropdownMenuItem,{class:"!text-red-500",disabled:!a.deleteBlock(!0,a.clickedBlockId,void 0),onClick:e[0]||(e[0]=c=>a.deleteBlock(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.deleteBlock")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,{disabled:!a.openFieldValuesInspectorCommand(!0,a.clickedBlockId,void 0),onClick:e[1]||(e[1]=c=>a.openFieldValuesInspectorCommand(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.Database,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.openFieldValuesInspector")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Copy,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.copyBlockReference")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.FlipHorizontal,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.copyBlockMirror")),1)]),_:1}),createVNode(a.DropdownMenuItem,{disabled:!a.insertMirrorBelow(!0,a.clickedBlockId,void 0),onClick:e[2]||(e[2]=c=>a.insertMirrorBelow(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.FlipHorizontal,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.insertMirrorBelow")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,{disabled:!a.addToFavorite(!0,a.clickedBlockId,void 0),onClick:e[3]||(e[3]=c=>a.addToFavorite(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.Bookmark,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.addToFavorite")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,{disabled:!a.addToSidePane(!0,a.clickedBlockId,void 0),onClick:e[4]||(e[4]=c=>a.addToSidePane(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.Sidebar,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.addToSidepane")),1)]),_:1},8,["disabled"]),createCommentVNode(` <DropdownMenuItem>
        <Archive class="size-4 mr-2" />
        {{ $t("kbView.command.archiveDone") }}
      </DropdownMenuItem> `),createVNode(a.DropdownMenuItem,{disabled:!a.moveBlock(!0,a.clickedBlockId,void 0),onClick:e[5]||(e[5]=c=>a.moveBlock(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.ArrowRight,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.moveBlock")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,{disabled:!a.moveBlockLeaveRef(!0,a.clickedBlockId,void 0),onClick:e[6]||(e[6]=c=>a.moveBlockLeaveRef(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.ArrowRight,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.moveBlockLeaveRef")),1)]),_:1},8,["disabled"]),createVNode(a.DropdownMenuItem,{disabled:!a.moveBlock(!0,a.clickedBlockId,void 0),onClick:e[7]||(e[7]=c=>a.moveBlock(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.ArrowRight,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.moveBlockLeaveMirror")),1)]),_:1},8,["disabled"]),createCommentVNode(" \u6392\u5E8F "),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.SortAsc,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.sortDirectChildren")),1)]),_:1}),createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.ArrowUpAZ,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.ArrowDownAZ,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowUp,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowDown,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowUp,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowDown,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1}),createCommentVNode(" \u8BBE\u7F6E\u5757\u5F15\u7528\u989C\u8272 "),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.Paintbrush,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.setBlockRefColor")),1)]),_:1}),createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(a.predefinedColors,c=>createVNode(a.DropdownMenuItem,{key:c,disabled:!a.getBlockRefColorSetter(c)(!0,a.clickedBlockId,void 0),onClick:d=>a.getBlockRefColorSetter(c)(!1,a.clickedBlockId,d)},{default:withCtx(()=>[createBaseVNode("div",{class:"size-4 mr-2 rounded-sm",style:normalizeStyle({backgroundColor:`var(--highlight-${c})`})},null,4),createTextVNode(" "+toDisplayString$1(o.$t(`kbView.command.${c}`)),1)]),_:2},1032,["disabled","onClick"])),64))]),_:1})]),_:1}),createVNode(a.DropdownMenuItem,{disabled:!a.exportBlock(!0,a.clickedBlockId,void 0),onClick:e[8]||(e[8]=c=>a.exportBlock(!1,a.clickedBlockId,c))},{default:withCtx(()=>[createVNode(a.Download,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.export")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["open"])}const BlockContextMenu=_export_sfc(_sfc_main$1m,[["render",_sfc_render$1m],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/contextmenu/BlockContextMenu.vue"]]),fieldValueTypeSchema=z.discriminatedUnion("type",[z.object({type:z.literal("richtext")}),z.object({type:z.literal("blockRef")}),z.object({type:z.literal("array"),itemType:z.enum(["richtext","blockRef","block"])})]),fieldMetadataSchema=z.object({buildIndex:z.boolean().optional(),valueType:fieldValueTypeSchema}),FieldsManagerContext=createContext(()=>{const{blocksManager:o}=BlocksContext.useContext(),e=ref(null),n=getPmSchema({getBlockRef:o.getBlockRef}),a=()=>{if(!e.value){e.value=new Set;for(const k of o.loadedBlocks.values()){const x=k.value;x&&x.type==="normalBlock"&&"field"in x.metadata&&e.value.add(x.id)}}},s=k=>(a(),e.value.has(k)),l=(k,x)=>{if(!k)return null;let _=k.firstChild;if(!_||_.type.name!=="blockRef_v2")return null;const E=_.attrs.toBlockId;if(!s(E))return null;if(k=k.cut(_.nodeSize),_=k.firstChild,_&&_.isText){const B=_.text;if(!B||!B.startsWith(":")&&!B.startsWith("\uFF1A"))return null;k=k.cut(1)}return x&&(x.fieldName=E),k},c=(k,x)=>{if(!k)return null;let _=k.firstChild;if(_&&_.isText){const E=_.text;if(!E)return null;const B=E.search(/\S|$/);k=k.cut(B)}return k},d=(k,x)=>{if(!k)return null;let _=k.firstChild;if(!_||_.type.name!=="blockRef_v2")return null;const{toBlockId:E,tag:B}=_.attrs??{};return k=k.cut(_.nodeSize),x&&(x.toBlockId=E),x&&(x.tag=B),k},u=(k,x)=>{if(o.getBlock(k))throw new Error(`Field ${k} already exists`);const _=getPmSchema({getBlockRef:o.getBlockRef});o.addBlock({id:k,type:"normalBlock",content:plainTextToTextContent(k,_),fold:!0,parentId:"root",childrenIds:[],metadata:{field:x}},{type:"ui"}),a(),e.value.add(k)},f=(k,x)=>{const _=o.getBlock(k);if(!_||_.type!=="normalBlock")throw new Error(`Field ${k} not found`);o.updateBlock({..._,metadata:x},{type:"ui"})},v=k=>{var E;const x=o.getBlock(k);if(!x||x.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return null;const _=fieldMetadataSchema.safeParse((E=x.metadata)==null?void 0:E.field);return _.success?_.data:null},b=k=>{if(!k||k.type!=="normalBlock"||k.content[0]!==BLOCK_CONTENT_TYPES.TEXT)return;let x=null;try{x=Node$1.fromJSON(n,k.content[1]).content}catch{}if(!x)return;const _={};if(x=l(x,_),!x||!_.fieldName||!s(_.fieldName))return;const E=v(_.fieldName);if(E){if(E.valueType.type==="richtext")return{fieldName:_.fieldName,metadata:E,value:x};if(E.valueType.type==="blockRef"){const B={};return x=l(x),x=c(x),x=d(x,B),x?{fieldName:B.fieldName,metadata:E,value:B.toBlockId}:void 0}else{let B=[];for(const M of k.childrenRefs){const I=M.value;if(!I||I.type!=="normalBlock"||I.content[0]!==BLOCK_CONTENT_TYPES.TEXT)continue;let F=null;try{F=Node$1.fromJSON(n,I.content[1]).content}catch{}if(!F)return;if(E.valueType.itemType==="richtext")B.push(F);else if(E.valueType.itemType==="blockRef"){const V={};if(F=c(F),F=d(F,V),!F)return;B.push(V.toBlockId)}else E.valueType.itemType==="block"&&B.push(I.id)}return{fieldName:_.fieldName,metadata:E,value:B}}}};return{addField:u,setFieldMetadata:f,getFieldMetadata:v,getFieldValues:k=>{const x=o.getSrcBlock(k);if(!x)return null;const _={};for(const E of x.childrenRefs){const B=E.value;if(!B)continue;const M=b(B);if(!M)continue;const{fieldName:I,metadata:F,value:V}=M;_[I]=V}return _}}}),BacklinksContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{blocksManager:n}=BlocksContext.useContext(),{getBacklinks:a}=IndexContext.useContext(),{getFieldValues:s}=FieldsManagerContext.useContext(),{kbPrefix:l}=ServerInfoContext.useContext();o({key:"backlinks",label:{en:"Backlinks",zh:"\u5757\u5F15\u7528 & \u53CD\u5411\u94FE\u63A5"}});const c="backlinks.showCounter",d=computed(()=>`${l.value}${c}`),u=!0,f=useLocalStorage2(d,u);e({id:c,groupKey:"backlinks",label:{zh:"\u5757\u53F3\u4FA7\u663E\u793A\u53CD\u5411\u94FE\u63A5\u4E2A\u6570"},desc:{zh:"\u5982\u679C\u5F00\u542F\uFF0C\u5219\u5982\u679C\u4E00\u4E2A\u5757\u6709\u53CD\u5411\u94FE\u63A5\uFF0C\u5219\u4F1A\u5728\u5757\u53F3\u4FA7\u4EE5\u60AC\u6D6E\u80F6\u56CA\u7684\u5F62\u5F0F\u663E\u793A\u53CD\u5411\u94FE\u63A5\u4E2A\u6570\u3002\u70B9\u51FB\u5373\u53EF\u6253\u5F00\u4E00\u4E2A\u60AC\u6D6E\u7A97\u53E3\uFF0C\u7528\u4E8E\u6D4F\u89C8\u8FD9\u4E2A\u5757\u7684\u6240\u6709\u53CD\u5411\u94FE\u63A5\u3002"},defaultValue:u,value:useWritableComputedRef(f),componentType:{type:"switch"}});const v="backlinks.putNewBlockAt",b=computed(()=>`${l.value}${v}`),k="",x=useLocalStorage2(b,k);e({id:v,groupKey:"backlinks",label:{zh:"\u65B0\u5757\u63D2\u5165\u4F4D\u7F6E"},desc:{zh:"\u5728\u5F15\u7528\u8865\u5168\u83DC\u5355\u4E2D\uFF0C\u9009\u62E9\u521B\u5EFA\u65B0\u5757\u65F6\u65B0\u5757\u63D2\u5165\u7684\u4F4D\u7F6E\u3002\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u4F1A\u63D2\u5165\u6839\u5757\u672B\u5C3E\u3002"},defaultValue:k,value:useWritableComputedRef(x),componentType:{type:"blockIdInput"}});const _=(E,B=!0)=>{var F;const M=B?[E]:[],I=s(E)??{};if("Alias"in I){const V=I.Alias,L=z.array(z.string()).safeParse(V);return L.success&&M.push(...L.data),M}{const V=n.getBlock(E);if(!V)return M;const L=(F=V.parentRef.value)==null?void 0:F.parentRef.value;if(!L)return M;const U=s(L.id)??{};if("Alias"in U){const j=U.Alias,oe=z.array(z.string()).safeParse(j);return oe.success&&M.push(...oe.data),M}}return M};return{showBacklinksCounter:f,putNewBlockAt:x,getAllAliases:_,getBacklinksConsideringAliases:(E,B="both")=>{const M=_(E),I=new Set;for(const F of M){const V=a(F,B);for(const L of V??[])I.add(L)}return I}}}),_sfc_main$1l=defineComponent({__name:"Breadcrumb",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1l(o,e,n,a,s,l){return openBlock(),createElementBlock("nav",{"aria-label":"breadcrumb",class:normalizeClass(a.props.class)},[renderSlot(o.$slots,"default")],2)}const Breadcrumb=_export_sfc(_sfc_main$1l,[["render",_sfc_render$1l],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/breadcrumb/Breadcrumb.vue"]]),_sfc_main$1k=defineComponent({__name:"BreadcrumbItem",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1k(o,e,n,a,s,l){return openBlock(),createElementBlock("li",{class:normalizeClass(a.cn("inline-flex items-center gap-1.5",a.props.class))},[renderSlot(o.$slots,"default")],2)}const BreadcrumbItem=_export_sfc(_sfc_main$1k,[["render",_sfc_render$1k],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/breadcrumb/BreadcrumbItem.vue"]]),_sfc_main$1j=defineComponent({__name:"BreadcrumbLink",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"a"},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn},get Primitive(){return O}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1j(o,e,n,a,s,l){return openBlock(),createBlock(a.Primitive,{as:n.as,"as-child":n.asChild,class:normalizeClass(a.cn("transition-colors hover:text-foreground",a.props.class))},{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},8,["as","as-child","class"])}const BreadcrumbLink=_export_sfc(_sfc_main$1j,[["render",_sfc_render$1j],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/breadcrumb/BreadcrumbLink.vue"]]),_sfc_main$1i=defineComponent({__name:"BreadcrumbList",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1i(o,e,n,a,s,l){return openBlock(),createElementBlock("ol",{class:normalizeClass(a.cn("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a.props.class))},[renderSlot(o.$slots,"default")],2)}const BreadcrumbList=_export_sfc(_sfc_main$1i,[["render",_sfc_render$1i],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/breadcrumb/BreadcrumbList.vue"]]),_sfc_main$1h=defineComponent({__name:"BreadcrumbSeparator",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn},get ChevronRight(){return ChevronRight}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$1h(o,e,n,a,s,l){return openBlock(),createElementBlock("li",{role:"presentation","aria-hidden":"true",class:normalizeClass(a.cn("[&>svg]:w-3.5 [&>svg]:h-3.5",a.props.class))},[renderSlot(o.$slots,"default",{},()=>[createVNode(a.ChevronRight)])],2)}const BreadcrumbSeparator=_export_sfc(_sfc_main$1h,[["render",_sfc_render$1h],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/breadcrumb/BreadcrumbSeparator.vue"]]),_sfc_main$1g=defineComponent({__name:"BlockPath",props:{blockId:{type:null,required:!0},includeSelf:{type:Boolean,required:!1}},emits:["click-path-segment"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,{blocksManager:l}=BlocksContext.useContext(),c=computed(()=>{const u=[...l.getBlockPath(a.blockId)];return u.reverse(),a.includeSelf||u.pop(),u}),d={props:a,emit:s,blocksManager:l,normalizedPath:c,get Breadcrumb(){return Breadcrumb},get BreadcrumbList(){return BreadcrumbList},get BreadcrumbItem(){return BreadcrumbItem},get BreadcrumbSeparator(){return BreadcrumbSeparator},get BreadcrumbLink(){return BreadcrumbLink},BlockContent};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$1g(o,e,n,a,s,l){return openBlock(),createBlock(a.Breadcrumb,null,{default:withCtx(()=>[createVNode(a.BreadcrumbList,{class:"!gap-x-1 !gap-y-0"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.normalizedPath,(c,d)=>(openBlock(),createElementBlock(Fragment$1,{key:c.id},[createVNode(a.BreadcrumbItem,null,{default:withCtx(()=>[createVNode(a.BreadcrumbLink,{class:"no-underline cursor-pointer",onClick:u=>a.emit("click-path-segment",c.id)},{default:withCtx(()=>[createVNode(a.BlockContent,{class:"!max-w-[unset] *:cursor-pointer",block:c,"block-tree":void 0,readonly:!0},null,8,["block"])]),_:2},1032,["onClick"])]),_:2},1024),d!==a.normalizedPath.length-1?(openBlock(),createBlock(a.BreadcrumbSeparator,{key:0},{default:withCtx(()=>[...e[0]||(e[0]=[createTextVNode(" / ")])]),_:1})):createCommentVNode("v-if",!0)],64))),128))]),_:1})]),_:1})}const BlockPath=_export_sfc(_sfc_main$1g,[["render",_sfc_render$1g],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/BlockPath.vue"]]),_sfc_main$1f=defineComponent({__name:"BacklinksCounter",props:{blockId:{type:String,required:!0}},setup(o,{expose:e}){e();const n=o,{blocksManager:a}=BlocksContext.useContext(),{getBlockTree:s}=BlockTreeContext.useContext(),{getBacklinksConsideringAliases:l,getAllAliases:c}=BacklinksContext.useContext(),d=computed(()=>l(n.blockId)),u=computed(()=>c(n.blockId)),f=computed(()=>[...d.value].map(b=>a.getBlock(b)).filter(b=>b!==null)),v={props:n,blocksManager:a,getBlockTree:s,getBacklinksConsideringAliases:l,getAllAliases:c,backlinks:d,aliases:u,backlinkBlocks:f,handleClickItem:b=>{const k=s("main");k&&k.focusBlock(b,{scrollIntoView:!0,expandIfFold:!0,highlight:!0})},BlockContent,BlockPath,get DropdownMenu(){return DropdownMenu},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuTrigger(){return DropdownMenuTrigger}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),_hoisted_1$B={key:0,class:"rounded-md bg-muted px-1 min-w-5 h-fit flex items-center justify-center text-sm text-muted-foreground select-none cursor-pointer"},_hoisted_2$k={class:"pointer-events-none select-none"};function _sfc_render$1f(o,e,n,a,s,l){return openBlock(),createBlock(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,null,{default:withCtx(()=>[a.backlinks.size>0?(openBlock(),createElementBlock("div",_hoisted_1$B,toDisplayString$1(a.backlinks.size),1)):createCommentVNode("v-if",!0)]),_:1}),createVNode(a.DropdownMenuContent,{class:"w-[300px] max-h-[300px] overflow-y-auto"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.backlinkBlocks,c=>(openBlock(),createBlock(a.DropdownMenuItem,{key:c.id,class:"w-full block",onClick:d=>a.handleClickItem(c.id)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$k,[createVNode(a.BlockContent,{class:"flex-grow !max-w-[unset]",block:c,"block-tree":void 0,readonly:!0,"highlight-refs":a.aliases},null,8,["block","highlight-refs"]),createVNode(a.BlockPath,{class:"*:text-xs mt-1","block-id":c.id},null,8,["block-id"])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})}const BacklinksCounter=_export_sfc(_sfc_main$1f,[["render",_sfc_render$1f],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/backlinks-counter/BacklinksCounter.vue"]]),_sfc_main$1e=defineComponent({__name:"BasicBlockItem",props:{blockTree:{type:Object,required:!1,default:void 0},block:{type:Object,required:!0},level:{type:Number,required:!0},hideFoldButton:{type:Boolean,required:!1,default:!1},hideContextMenu:{type:Boolean,required:!1,default:!1},hideBullet:{type:Boolean,required:!1,default:!1},readonly:{type:Boolean,required:!1,default:!1},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]},itemType:{type:String,required:!1,default:"basic-block"},itemId:{type:String,required:!1,default:void 0},fold:{type:Boolean,required:!1,default:void 0},handleClickFoldButton:{type:Function,required:!1,default:void 0}},setup(o,{expose:e}){e();const n=o,a=useTaskQueue(),{blockEditor:s}=BlocksContext.useContext(),{lastFocusedDiId:l,lastFocusedBlockTree:c}=LastFocusContext.useContext(),{mainRootBlockId:d}=MainTreeContext.useContext(),{selectedBlockIds:u,draggingDropPos:f,dragging:v}=BlockSelectDragContext.useContext(),{getMirrors:b}=IndexContext.useContext(),{openAt:k}=BlockContextMenuContext.useContext(),{ctrlPressed:x,shiftPressed:_}=KeymapContext.useContext(),{addToSidePane:E}=SidebarContext.useContext(),B=computed(()=>b(n.block.id)),M=computed(()=>B.value.size>0||n.block.type==="mirrorBlock"),I=computed(()=>n.fold??n.block.fold),F=computed(()=>n.block.childrenIds.length>0),V=computed(()=>{var U;return(U=u.value)==null?void 0:U.allNonFolded.includes(n.block.id)}),L={props:n,taskQueue:a,blockEditor:s,lastFocusedDiId:l,lastFocusedBlockTree:c,mainRootBlockId:d,selectedBlockIds:u,draggingDropPos:f,dragging:v,getMirrors:b,openAt:k,ctrlPressed:x,shiftPressed:_,addToSidePane:E,mirrorIds:B,hasOrIsMirrors:M,fold:I,hasChildren:F,selected:V,handleFocusIn:()=>{l.value=n.itemId??null,c.value=n.blockTree??null,v.value||(u.value=null)},handleClickFoldButton:()=>{if(n.handleClickFoldButton){n.handleClickFoldButton();return}else{const U=n.block.id;a.addTask(()=>s.toggleFold(U))}},handleClickBullet:U=>{U.button===0&&(_.value?E(n.block.id):x.value||(d.value=n.block.id))},handleContextmenu:U=>{U.button===2&&(U.preventDefault(),k({x:U.clientX,y:U.clientY},n.block.id))},get Circle(){return Circle},get Diamond(){return Diamond},get Triangle(){return Triangle},BlockContent,BacklinksCounter};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),_hoisted_1$A=["data-item-type","data-block-id","data-item-id","data-block-level","data-block-ref-color"],_hoisted_2$j={class:"indent-lines"},_hoisted_3$f=["data-level"],_hoisted_4$c={class:"relative block-content-container"},_hoisted_5$6={class:"block-buttons"};function _sfc_render$1e(o,e,n,a,s,l){var c,d;return openBlock(),createElementBlock("div",{class:normalizeClass(["block-item",{hasChildren:a.hasChildren,fold:a.fold,selected:a.selected,[n.itemType]:!0}]),"data-item-type":n.itemType,"data-block-id":n.block.id,"data-item-id":n.itemId,"data-block-level":n.level,"data-block-ref-color":(c=n.block.metadata)==null?void 0:c.blockRefColor,onFocusin:a.handleFocusIn},[createBaseVNode("div",_hoisted_2$j,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(n.level,u=>(openBlock(),createElementBlock("div",{class:"indent-line",key:u,"data-level":u},null,8,_hoisted_3$f))),128))]),createBaseVNode("div",_hoisted_4$c,[createBaseVNode("div",_hoisted_5$6,[n.hideFoldButton?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:"fold-button",onClick:withModifiers(a.handleClickFoldButton,["stop"])},[createVNode(a.Triangle)]))]),n.hideBullet?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:"bullet shrink-0",onClick:withModifiers(a.handleClickBullet,["stop"]),onContextmenu:a.handleContextmenu},[a.hasOrIsMirrors?(openBlock(),createBlock(a.Diamond,{key:0,class:"diamond"})):(openBlock(),createBlock(a.Circle,{key:1,class:"circle"}))],32)),createVNode(a.BlockContent,{block:n.block,"item-id":n.itemId,"block-tree":n.blockTree,readonly:n.readonly,"highlight-terms":n.highlightTerms,"highlight-refs":n.highlightRefs},null,8,["block","item-id","block-tree","readonly","highlight-terms","highlight-refs"]),createVNode(a.BacklinksCounter,{"block-id":n.block.id},null,8,["block-id"])]),createCommentVNode(" \u62D6\u62FD\u65F6\uFF0C\u663E\u793A\u62D6\u62FD\u6307\u793A\u7EBF "),((d=a.draggingDropPos)==null?void 0:d.itemId)===n.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:a.draggingDropPos.relIndent+"px"})},null,4)):createCommentVNode("v-if",!0)],42,_hoisted_1$A)}const BasicBlockItem=_export_sfc(_sfc_main$1e,[["render",_sfc_render$1e],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/BasicBlockItem.vue"]]),_sfc_main$1d=defineComponent({__name:"BacklinksBlockItem",props:{blockTree:{type:Object,required:!1,default:void 0},refBlockId:{type:null,required:!0},itemId:{type:String,required:!1,default:void 0},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1,default:!1},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.blockTree;return l?!l.expandedBP.value[n.block.id]:n.block.fold}),s={props:n,fold:a,handleClickFoldButton:()=>{const l=n.blockTree;if(!l)return;const c=l.expandedBP.value;c[n.block.id]?delete c[n.block.id]:c[n.block.id]=!0},BasicBlockItem};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1d(o,e,n,a,s,l){return openBlock(),createBlock(a.BasicBlockItem,mergeProps(o.$props,{"item-type":"backlink-block",level:0,"highlight-refs":[...n.highlightRefs,n.refBlockId],fold:a.fold,"item-id":n.itemId,"handle-click-fold-button":a.handleClickFoldButton}),null,16,["highlight-refs","fold","item-id"])}const BacklinksBlockItem=_export_sfc(_sfc_main$1d,[["render",_sfc_render$1d],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/BacklinksBlockItem.vue"]]),_sfc_main$1c=defineComponent({__name:"BacklinksHeaderItem",props:{blockId:{type:null,required:!0},backlinks:{type:Array,required:!0}},setup(o,{expose:e}){e();const n={props:o,get ListTree(){return ListTree},get List(){return List},get Link(){return Link},get Table(){return Table},get Kanban(){return Kanban},get MoreHorizontal(){return Ellipsis},get PanelsTopLeft(){return PanelsTopLeft},get SortAsc(){return ArrowUpNarrowWide},get ArrowUpAZ(){return ArrowUpAZ},get ArrowDownAZ(){return ArrowDownAZ},get CalendarArrowUp(){return CalendarArrowUp},get CalendarArrowDown(){return CalendarArrowDown},get DropdownMenu(){return DropdownMenu},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuGroup(){return DropdownMenuGroup},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuPortal(){return ih},get DropdownMenuSub(){return DropdownMenuSub},get DropdownMenuSubContent(){return DropdownMenuSubContent},get DropdownMenuSubTrigger(){return DropdownMenuSubTrigger},get DropdownMenuTrigger(){return DropdownMenuTrigger}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$z={class:"block-item flex items-center ml-6 mt-10 mb-2 text-muted-foreground","data-item-type":"backlink-header"};function _sfc_render$1c(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$z,[createVNode(a.Link,{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(o.$t("kbView.backlinksPanel.nBacklinks",{count:n.backlinks.length})),1),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.MoreHorizontal,{class:"size-4 ml-2 cursor-pointer hover:text-primary transition-colors"})]),_:1}),createVNode(a.DropdownMenuContent,{class:"min-w-[200px]"},{default:withCtx(()=>[createVNode(a.DropdownMenuGroup,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.ListTree,{class:"size-4 mr-2"}),e[0]||(e[0]=createTextVNode(" \u663E\u793A\u8DEF\u5F84 "))]),_:1}),createCommentVNode(" \u5207\u6362\u89C6\u56FE "),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.PanelsTopLeft,{class:"size-4 mr-2"}),e[1]||(e[1]=createTextVNode(" \u5207\u6362\u89C6\u56FE "))]),_:1}),createVNode(a.DropdownMenuPortal,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.List,{class:"size-4 mr-2"}),e[2]||(e[2]=createTextVNode(" \u5217\u8868\u89C6\u56FE "))]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Table,{class:"size-4 mr-2"}),e[3]||(e[3]=createTextVNode(" \u8868\u683C\u89C6\u56FE "))]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Kanban,{class:"size-4 mr-2"}),e[4]||(e[4]=createTextVNode(" \u770B\u677F\u89C6\u56FE "))]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.SortAsc,{class:"size-4 mr-2"}),e[5]||(e[5]=createTextVNode(" \u6392\u5E8F\u89C4\u5219 "))]),_:1}),createVNode(a.DropdownMenuPortal,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.ArrowUpAZ,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.sortDictAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.ArrowDownAZ,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.sortDictDesc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowUp,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.ctimeAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowDown,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.ctimeDesc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowUp,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.mtimeAsc")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.CalendarArrowDown,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.command.mtimeDesc")),1)]),_:1})]),_:1})]),_:1})]),_:1}),createCommentVNode(' <DropdownMenuItem> <ListCollapse class="size-4 mr-2" /> \u5206\u7EC4\u89C4\u5219 </DropdownMenuItem> ')]),_:1})]),_:1})]),_:1})])}const BacklinksHeaderItem=_export_sfc(_sfc_main$1c,[["render",_sfc_render$1c],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/BacklinksHeaderItem.vue"]]),_sfc_main$1b=defineComponent({__name:"PotentialLinksBlockItem",props:{blockTree:{type:Object,required:!1,default:void 0},refBlockId:{type:null,required:!0},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1,default:!1},itemId:{type:String,required:!1,default:void 0},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.blockTree;return l?!l.expandedBP.value[n.block.id]:n.block.fold}),s={props:n,fold:a,handleClickFoldButton:()=>{const l=n.blockTree;if(!l)return;const c=l.expandedBP.value;c[n.block.id]?delete c[n.block.id]:c[n.block.id]=!0},BasicBlockItem};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$1b(o,e,n,a,s,l){return openBlock(),createBlock(a.BasicBlockItem,mergeProps(o.$props,{"item-type":"potential-links-block",level:0,"highlight-refs":[...n.highlightRefs??[],n.refBlockId],fold:a.fold,"item-id":n.itemId,"handle-click-fold-button":a.handleClickFoldButton}),null,16,["highlight-refs","fold","item-id"])}const PotentialLinksBlockItem=_export_sfc(_sfc_main$1b,[["render",_sfc_render$1b],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/PotentialLinksBlockItem.vue"]]),_sfc_main$1a=defineComponent({__name:"PotentialLinksHeaderItem",props:{blockId:{type:null,required:!0},potentialLinks:{type:Array,required:!0}},setup(o,{expose:e}){e();const n={props:o,get Link(){return Link}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$y={class:"block-item flex items-center ml-6 mt-10 text-muted-foreground mb-2","data-item-type":"potential-links-header"};function _sfc_render$1a(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$y,[createVNode(a.Link,{class:"size-4 mr-2"}),createBaseVNode("div",null,toDisplayString$1(o.$t("kbView.backlinksPanel.nPotentialLinks",{count:n.potentialLinks.length})),1)])}const PotentialLinksHeaderItem=_export_sfc(_sfc_main$1a,[["render",_sfc_render$1a],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/PotentialLinksHeaderItem.vue"]]),_sfc_main$19=defineComponent({__name:"BacklinksDescendantItem",props:{blockTree:{type:Object,required:!1,default:void 0},block:{type:Object,required:!0},level:{type:Number,required:!0},itemId:{type:String,required:!1,default:void 0},readonly:{type:Boolean,required:!1,default:!1},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.blockTree;return l&&l.expandedBP.value[n.block.id]?!1:n.block.fold}),s={props:n,fold:a,handleClickFoldButton:()=>{const l=n.blockTree;if(!l)return;const c=l.expandedBP.value;c[n.block.id]?delete c[n.block.id]:c[n.block.id]=!0},BasicBlockItem};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$19(o,e,n,a,s,l){return openBlock(),createBlock(a.BasicBlockItem,mergeProps(o.$props,{"item-type":"backlink-descendant",fold:a.fold,"item-id":n.itemId,"handle-click-fold-button":a.handleClickFoldButton}),null,16,["fold","item-id"])}const BacklinksDescendantItem=_export_sfc(_sfc_main$19,[["render",_sfc_render$19],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/BacklinksDescendantItem.vue"]]),_sfc_main$18=defineComponent({__name:"PotentialLinksDescendantItem",props:{blockTree:{type:Object,required:!1,default:void 0},block:{type:Object,required:!0},level:{type:Number,required:!0},readonly:{type:Boolean,required:!1,default:!1},itemId:{type:String,required:!1,default:void 0},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.blockTree;return l&&l.expandedBP.value[n.block.id]?!1:n.block.fold}),s={props:n,fold:a,handleClickFoldButton:()=>{const l=n.blockTree;if(!l)return;const c=l.expandedBP.value;c[n.block.id]?delete c[n.block.id]:c[n.block.id]=!0},BasicBlockItem};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$18(o,e,n,a,s,l){return openBlock(),createBlock(a.BasicBlockItem,mergeProps(o.$props,{"item-type":"potential-links-descendant",fold:a.fold,"handle-click-fold-button":a.handleClickFoldButton,"item-id":n.itemId}),null,16,["fold","item-id"])}const PotentialLinksDescendantItem=_export_sfc(_sfc_main$18,[["render",_sfc_render$18],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/PotentialLinksDescendantItem.vue"]]),_sfc_main$17=defineComponent({__name:"MissingBlockItem",props:{blockTree:{type:Object,required:!1,default:void 0},blockId:{type:null,required:!0},level:{type:Number,required:!0},hideBullet:{type:Boolean,required:!1,default:!1},itemType:{type:String,required:!1,default:"missing-block"},itemId:{type:String,required:!1,default:void 0}},setup(o,{expose:e}){e();const{openAt:n}=BlockContextMenuContext.useContext(),a=o,{selectedBlockIds:s,draggingDropPos:l}=BlockSelectDragContext.useContext(),c=computed(()=>{var u;return(u=s.value)==null?void 0:u.allNonFolded.includes(a.blockId)}),d={openAt:n,props:a,selectedBlockIds:s,draggingDropPos:l,selected:c,handleContextmenu:u=>{u.button===2&&(u.preventDefault(),n({x:u.clientX,y:u.clientY},a.blockId))},get Circle(){return Circle}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),_hoisted_1$x=["data-item-type","data-block-id","data-block-level"],_hoisted_2$i={class:"indent-lines"},_hoisted_3$e=["data-level"],_hoisted_4$b={class:"relative block-content-container"};function _sfc_render$17(o,e,n,a,s,l){var c;return openBlock(),createElementBlock("div",{class:normalizeClass(["missing-block-item block-item",{selected:a.selected,[n.itemType]:!0}]),"data-item-type":n.itemType,"data-block-id":n.blockId,"data-block-level":n.level},[createBaseVNode("div",_hoisted_2$i,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(n.level,d=>(openBlock(),createElementBlock("div",{class:"indent-line",key:d,"data-level":d},null,8,_hoisted_3$e))),128))]),createBaseVNode("div",_hoisted_4$b,[e[0]||(e[0]=createBaseVNode("div",{class:"block-buttons"},null,-1)),createBaseVNode("div",{class:"bullet shrink-0",onContextmenu:a.handleContextmenu},[createVNode(a.Circle,{class:"circle"})],32),e[1]||(e[1]=createBaseVNode("div",{class:"text-red-500"},"Missing Block",-1))]),createCommentVNode(" \u62D6\u62FD\u65F6\uFF0C\u663E\u793A\u62D6\u62FD\u6307\u793A\u7EBF "),((c=a.draggingDropPos)==null?void 0:c.itemId)===n.itemId?(openBlock(),createElementBlock("div",{key:0,class:"absolute bottom-[-2px] left-0 h-[2px] rounded w-[40%] bg-blue-500",style:normalizeStyle({marginLeft:a.draggingDropPos.relIndent+"px"})},null,4)):createCommentVNode("v-if",!0)],10,_hoisted_1$x)}const MissingBlockItem=_export_sfc(_sfc_main$17,[["render",_sfc_render$17],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/MissingBlockItem.vue"]]),_sfc_main$16=defineComponent({__name:"RootBlockItem",props:{blockTree:{type:Object,required:!1,default:void 0},itemId:{type:String,required:!1,default:void 0},block:{type:Object,required:!0},readonly:{type:Boolean,required:!1,default:!1},highlightTerms:{type:Array,required:!1,default:()=>[]},highlightRefs:{type:Array,required:!1,default:()=>[]}},setup(o,{expose:e}){e();const n={props:o,BasicBlockItem};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$16(o,e,n,a,s,l){return openBlock(),createBlock(a.BasicBlockItem,mergeProps(o.$props,{class:"root-block","item-type":"root-block",level:0,"highlight-refs":n.highlightRefs,fold:!1,"item-id":n.itemId,"hide-bullet":!0,"hide-fold-button":!0,"hide-context-menu":!0}),null,16,["highlight-refs","item-id"])}const RootBlockItem=_export_sfc(_sfc_main$16,[["render",_sfc_render$16],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/RootBlockItem.vue"]]),_sfc_main$15=defineComponent({__name:"SidePaneItemHeader",props:{blockTree:{type:Object,required:!1},blockId:{type:null,required:!0},itemId:{type:String,required:!1}},setup(o,{expose:e}){e();const{sidePaneBlockIds:n,focusNext:a,focusPrev:s}=SidebarContext.useContext(),l=o,c={sidePaneBlockIds:n,focusNext:a,focusPrev:s,props:l,handleRemove:()=>{n.value=n.value.filter(d=>d!==l.blockId)},get ChevronDown(){return ChevronDown},get ChevronUp(){return ChevronUp},get X(){return X},BlockPath,get Button(){return Button},get Tooltip(){return Tooltip},get TooltipContent(){return TooltipContent},get TooltipTrigger(){return TooltipTrigger}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),_hoisted_1$w={class:"side-pane-item-header flex items-center justify-between ml-[20px] mt-6 mb-2"},_hoisted_2$h={class:"mr-2"};function _sfc_render$15(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$w,[createVNode(a.BlockPath,{"block-id":n.blockId},null,8,["block-id"]),createBaseVNode("div",_hoisted_2$h,[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"p-[1px] h-[unset] mx-1 text-muted-foreground font-normal",onClick:e[0]||(e[0]=c=>a.focusPrev(n.blockId))},{default:withCtx(()=>[createVNode(a.ChevronUp,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.prev")),1)]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"p-[1px] h-[unset] mx-1 text-muted-foreground font-normal",onClick:e[1]||(e[1]=c=>a.focusNext(n.blockId))},{default:withCtx(()=>[createVNode(a.ChevronDown,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.next")),1)]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",class:"p-[1px] mx-1 h-[unset] text-muted-foreground font-normal",onClick:a.handleRemove},{default:withCtx(()=>[createVNode(a.X,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.remove")),1)]),_:1})]),_:1})])])}const SidePaneItemHeader=_export_sfc(_sfc_main$15,[["render",_sfc_render$15],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/display-items/SidePaneItemHeader.vue"]]),_sfc_main$14=defineComponent({__name:"BlockTree",props:{id:{type:String,required:!0},virtual:{type:Boolean,required:!1,default:!0},rootBlockIds:{type:Array,required:!0},rootBlockLevel:{type:Number,required:!0},addSidePaneHeader:{type:Boolean,required:!1,default:!1},enlargeRootBlock:{type:Boolean,required:!1,default:!1},showBacklinks:{type:Boolean,required:!1,default:!0},showPotentialLinks:{type:Boolean,required:!1,default:!0},paddingBottom:{type:Number,required:!1,default:200},paddingTop:{type:Number,required:!1,default:0}},setup(o,{expose:e}){const n=o,a=useEventBus(),s=BlockTreeContext.useContext(),l=BacklinksContext.useContext(),c=IndexContext.useContext(),{blocksManager:d,blockEditor:u}=BlocksContext.useContext(),f=BlockSelectDragContext.useContext(),v=ref(null),b=ref(null),k=shallowRef(),x=mitt(),_=a.eventRefs.afterBlocksTrCommit,E=new Map,B=ref({});let M=null;const I=()=>{var ue,Z;const pe=n.id;console.time(`calc displayItems ${pe}`),k.value=generateDisplayItems({rootBlockIds:n.rootBlockIds,rootBlockLevel:n.rootBlockLevel,enlargeRootBlock:n.enlargeRootBlock,blocksManager:d,showBacklinks:n.showBacklinks??!0,showPotentialLinks:n.showPotentialLinks??!0,expandedBP:B.value,getBacklinksContext:()=>l,getIndexContext:()=>c,addSidePaneHeader:n.addSidePaneHeader}),console.timeEnd(`calc displayItems ${pe}`),(Z=(ue=b.value)==null?void 0:ue.forceUpdate)==null||Z.call(ue),nextTick(()=>{var ee;M!=null&&((ee=b.value)==null||ee.scrollToOffset(M)),x.emit("displayItemsUpdated",[k.value])})};watch(B,I,{deep:!0}),watch([()=>n.rootBlockIds,_],I,{immediate:!0});const F=pe=>new Promise(ue=>{x.once("displayItemsUpdated",()=>{pe&&pe(),ue()})}),V=(pe,ue)=>{for(let Z=0;Z<k.value.length;Z++)if(k.value[Z].itemId===pe){for(let ee=Z-1;ee>=0;ee--){const le=k.value[ee];if(!ue||ue(le))return[le,ee]}return null}return null},L=(pe,ue)=>{for(let Z=0;Z<k.value.length;Z++)if(k.value[Z].itemId===pe){for(let ee=Z+1;ee<k.value.length;ee++){const le=k.value[ee];if(!ue||ue(le))return[le,ee]}return null}return null},U=(pe,ue)=>V(pe,ue),j=(pe,ue)=>L(pe,ue),oe=pe=>{var ue;return((ue=v.value)==null?void 0:ue.querySelector(`[data-id="${pe}"]`))??null},Y=pe=>E.get(pe)??null,K=(pe,ue)=>{E.set(pe,ue)},W=(pe,ue)=>{const Z=E.get(pe);Z===ue&&!Z.dom.isConnected&&E.delete(pe)},G=pe=>{var ee,le;const ue=oe(pe);if(ue&&inViewport(ue))return!0;const Z=k.value.findIndex(we=>we.itemId==pe);if(Z!=null&&Z>=0){const we=(ee=b.value)==null?void 0:ee.getItemPosByIndex(Z);if(we){const{top:ke}=we;(le=b.value)==null||le.scrollToOffset(ke-60)}}return!0},ce=async(pe,ue={})=>{var te;let{scrollIntoView:Z,highlight:ee}=ue;if(Z??(Z=!0),ee??(ee=!1),Z&&!G(pe))return;await timeout(50);const le=Y(pe);le&&le.focus();const we=(te=oe(pe))==null?void 0:te.querySelector(".block-item");if(!we)return;const ke=we.querySelector(".math-content");ke instanceof HTMLElement&&ke.click();const _e=we.querySelector(".cursor-container");_e instanceof HTMLElement&&_e.focus(),ee&&(we.classList.add("highlight-keep"),setTimeout(()=>{we.classList.add("highlight-fade")},1e3),setTimeout(()=>{we.classList.remove("highlight-keep"),we.classList.remove("highlight-fade")},3e3))},se=async(pe,ue={})=>{let{scrollIntoView:Z,highlight:ee,expandIfFold:le}=ue;Z??(Z=!0),ee??(ee=!1),le??(le=!1),le&&await u.locateBlock(pe,Ge),await timeout(0);const we=me(ke=>ke.type==="basic-block"&&ke.block.id===pe);we&&await ce(we[0].itemId,{scrollIntoView:Z,highlight:ee})},me=(pe,ue="forward")=>{for(let Z=ue==="forward"?0:k.value.length-1;Z>=0&&Z<k.value.length;Z+=ue==="forward"?1:-1){const ee=k.value[Z];if(pe(ee,Z))return[ee,Z]}return null},ge=pe=>{const ue=Y(pe);if(ue instanceof EditorView$1){const Z=ue.state.tr,ee=AllSelection.atEnd(ue.state.doc);Z.setSelection(ee),ue.dispatch(Z)}else if(ue instanceof EditorView){const Z=ue.state.doc.length;ue.dispatch({selection:{anchor:Z}})}},Te=pe=>{const ue=Y(pe);if(ue instanceof EditorView$1){const Z=ue.state.tr,ee=AllSelection.atStart(ue.state.doc);Z.setSelection(ee),ue.dispatch(Z)}else ue instanceof EditorView&&ue.dispatch({selection:{anchor:0}})},Be=pe=>{var ue;return((ue=k.value)==null?void 0:ue.find(Z=>Z.itemId===pe))??null},Ge={getProps:()=>n,getId:()=>n.id,getDom:()=>v.value,getRootBlockIds:()=>n.rootBlockIds,getDisplayItems:()=>k.value,getDi:Be,findDi:me,localEventBus:x,expandedBP:B,nextUpdate:F,getEditorViews:()=>E,getEditorView:Y,registerEditorView:K,unregisterEditorView:W,getSuccessorDi:L,getPredecessorDi:V,getDiAbove:U,getDiBelow:j,focusDi:ce,focusBlock:se,getDomOfDi:oe,moveCursorToTheEnd:ge,moveCursorToBegin:Te};e(Ge);let We=null,Oe=null,Ve=!1,Xe=null;const dt=()=>{var pe;if(!Xe){const ue=(pe=v.value)==null?void 0:pe.querySelector(".indent-line");if(ue){const Z=parseFloat(window.getComputedStyle(ue).marginRight);Xe={width:ue.clientWidth,rightMargin:Z}}}return Xe},pt=pe=>{try{if(Ve){const ue=useTaskQueue(),Z=f.draggingDropPos.value;if(!Z)return;const{itemId:ee,absLevel:le}=Z,we=Be(ee);if(!we||!DI_FILTERS.isBlockDi(we))return;const ke=f.selectedBlockIds.value;if(!ke)return;const _e=d.getBlockLevel(we.block.id);le>_e?ue.addTask(()=>{const te=u.normalizePos({parentId:we.block.id,childIndex:"first"});te&&u.moveBlocks({blockIds:ke.topLevelOnly,pos:te})}):ue.addTask(()=>{const te=u.normalizePos({baseBlockId:we.block.id,offset:1});te&&u.moveBlocks({blockIds:ke.topLevelOnly,pos:te})})}}finally{We=null,Oe=null,Ve=!1,f.dragging.value=!1,f.draggingDropPos.value=null,document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",pt),document.removeEventListener("pointerleave",pt)}},ft=()=>{f.draggingDropPos.value=null},Ce=useThrottleFn(pe=>{var ue,Z,ee,le;if(!(Date.now().valueOf()-(Oe??0)<200))if(f.dragging.value=!0,pe.preventDefault(),pe.stopPropagation(),Ve){if(!f.selectedBlockIds.value)return ft();if(f.selectedBlockIds.value.topLevelOnly.length===0){if(!We||!DI_FILTERS.isBlockDi(We))return;const qe={baseBlockId:f.selectedBlockIds.value.baseBlockId,topLevelOnly:[We.block.id],allNonFolded:[]};d.forDescendants({rootBlockId:We.block.id,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:de=>{qe.allNonFolded.push(de.id)}}),f.selectedBlockIds.value=qe}const we=getHoveredElementWithClass(pe.target,"block-item"),ke=we==null?void 0:we.dataset.itemId,_e=parseInt(we==null?void 0:we.dataset.blockLevel);if(!ke||we.classList.contains("selected"))return ft();const{width:te,rightMargin:re}=dt(),fe=Math.floor((pe.x+re)/(te+re)),Ee=we.getBoundingClientRect();if(pe.y<Ee.y+Ee.height/2){const qe=U(ke,DI_FILTERS.isBlockDi);if(!qe||!DI_FILTERS.isBlockDi(qe[0]))return ft();const de=(ue=oe(qe[0].itemId))==null?void 0:ue.querySelector(".block-item");if(!(de instanceof HTMLElement))return ft();const Ne=parseInt(de.dataset.blockLevel),ht=de.classList.contains("fold"),bt=de.classList.contains("hasChildren"),St=ht&&bt?Ne:Ne+1,xt=clip(fe,St,_e);f.draggingDropPos.value={itemId:qe[0].itemId,relIndent:xt*(te+re)+te,absLevel:xt+n.rootBlockLevel}}else{let qe;const de=j(ke,DI_FILTERS.isBlockDi),Ne=we.classList.contains("fold"),ht=we.classList.contains("hasChildren");if(de){if(!DI_FILTERS.isBlockDi(de[0]))return ft();const bt=(Z=oe(de[0].itemId))==null?void 0:Z.querySelector(".block-item");if(!(bt instanceof HTMLElement))return ft();const St=parseInt(bt.dataset.blockLevel),xt=Ne&&ht?_e:_e+1,Ct=St;qe=clip(fe,xt,Ct),console.log(`pointerLevel: ${fe}, clipFrom: ${xt}, clipTo: ${Ct}, clippedLevel: ${qe}`)}else{const bt=Ne&&ht?_e:_e+1;qe=clip(fe,bt,1)}f.draggingDropPos.value={itemId:ke,relIndent:qe*(te+re)+te,absLevel:qe+n.rootBlockLevel}}}else{const we=(ee=getHoveredElementWithClass(pe.target,"block-item"))==null?void 0:ee.dataset.itemId,ke=we?Be(we):null;if(!we||!ke||!DI_FILTERS.isBlockDi(ke)||We==null||!DI_FILTERS.isBlockDi(We))return;if(We.itemId===we){f.selectedBlockIds.value=null,ce(we,{scrollIntoView:!1});return}(le=document.activeElement)==null||le.blur(),f.selectedBlockIds.value=null;const _e=d.getBlockPath(We.block.id).map(Ee=>Ee.id),te=d.getBlockPath(ke.block.id).map(Ee=>Ee.id);let re=-1,fe=-1;for(let Ee=0;Ee<_e.length;Ee++){const qe=te.indexOf(_e[Ee]);if(qe!=-1){re=Ee,fe=qe;break}}if(re!==-1&&fe!==-1)if(re===0||fe===0){const Ee=_e[re],qe={baseBlockId:We.block.id,topLevelOnly:[Ee],allNonFolded:[]};d.forDescendants({rootBlockId:Ee,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:de=>{qe.allNonFolded.push(de.id)}}),f.selectedBlockIds.value=qe}else{const Ee=_e[re],qe=d.getBlock(Ee);if(!qe)return;const de=_e[re-1],Ne=te[fe-1],ht=qe.childrenIds.indexOf(de),bt=qe.childrenIds.indexOf(Ne),St=Math.min(ht,bt),xt=Math.max(ht,bt),Ct={baseBlockId:We.block.id,topLevelOnly:qe.childrenIds.slice(St,xt+1),allNonFolded:[]};for(let $t=St;$t<=xt;$t++){const Dt=qe.childrenIds[$t];d.forDescendants({rootBlockId:Dt,rootBlockLevel:0,nonFoldOnly:!0,includeSelf:!0,onEachBlock:Et=>{Ct.allNonFolded.push(Et.id)}})}f.selectedBlockIds.value=Ct}}},100),ze=pe=>{if(pe.pointerType==="mouse"&&pe.button!==0)return;const ue=getHoveredElementWithClass(pe.target,"block-item");if(!ue)return;const Z=ue.dataset.itemId,ee=Z?Be(Z):null;!Z||!ee||!DI_FILTERS.isBlockDi(ee)||(We=ee,Oe=Date.now().valueOf(),f.dragging.value=!1,getHoveredElementWithClass(pe.target,"bullet")&&(Ve=!0),document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",pt),document.addEventListener("pointerleave",pt))};onMounted(()=>{const pe=v.value;pe&&Object.assign(pe,{controller:Ge}),s.registerBlockTree(Ge)}),onUnmounted(()=>{s.unregisterBlockTree(n.id)});const Ze={props:n,eventBus:a,blockTreeContext:s,backlinksContext:l,indexContext:c,blocksManager:d,blockEditor:u,dndCtx:f,$blockTree:v,$vlist:b,displayItems:k,localEventBus:x,changeRef:_,editorViews:E,expandedBP:B,get fixedOffset(){return M},set fixedOffset(pe){M=pe},updateDisplayItems:I,nextUpdate:F,getPredecessorDi:V,getSuccessorDi:L,getDiAbove:U,getDiBelow:j,getDomOfDi:oe,getEditorView:Y,registerEditorView:K,unregisterEditorView:W,scrollDiIntoView:G,focusDi:ce,focusBlock:se,findDi:me,moveCursorToTheEnd:ge,moveCursorToBegin:Te,getDi:Be,controller:Ge,get pointerDownDi(){return We},set pointerDownDi(pe){We=pe},get pointerDownTime(){return Oe},set pointerDownTime(pe){Oe=pe},get movingBlocks(){return Ve},set movingBlocks(pe){Ve=pe},get indentSize(){return Xe},set indentSize(pe){Xe=pe},getIndentSize:dt,handlePointerUpOrLeave:pt,clearDraggingDropPos:ft,handlePointerMove:Ce,handlePointerDown:ze,get VirtList(){return VirtList},BasicBlockItem,BacklinksBlockItem,BacklinksHeaderItem,PotentialLinksBlockItem,PotentialLinksHeaderItem,BacklinksDescendantItem,PotentialLinksDescendantItem,MissingBlockItem,RootBlockItem,SidePaneItemHeader};return Object.defineProperty(Ze,"__isScriptSetup",{enumerable:!1,value:!0}),Ze}}),_hoisted_1$v=["block-tree-id"];function _sfc_render$14(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:"block-tree select-none",ref:"$blockTree","block-tree-id":n.id,style:normalizeStyle({"--padding-bottom":`${n.paddingBottom}px`,"--padding-top":`${n.paddingTop}px`}),onPointerdown:a.handlePointerDown},[n.virtual?(openBlock(),createBlock(a.VirtList,{key:0,itemKey:"itemId",class:"vlist",list:a.displayItems,buffer:10,minSize:24,ref:"$vlist",itemClass:"block-container"},{header:withCtx(()=>e[0]||(e[0]=[])),default:withCtx(({itemData:c})=>[c.type=="root-block"?(openBlock(),createBlock(a.RootBlockItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="basic-block"?(openBlock(),createBlock(a.BasicBlockItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,level:c.level,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","level","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="backlink-header"?(openBlock(),createBlock(a.BacklinksHeaderItem,{key:c.itemId,"block-tree":a.controller,"block-id":c.blockId,backlinks:c.backlinks},null,8,["block-id","backlinks"])):createCommentVNode("v-if",!0),c.type=="backlink-block"?(openBlock(),createBlock(a.BacklinksBlockItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,"ref-block-id":c.refBlockId,readonly:c.readonly,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="backlink-descendant"?(openBlock(),createBlock(a.BacklinksDescendantItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,level:c.level,readonly:c.readonly,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="potential-links-header"?(openBlock(),createBlock(a.PotentialLinksHeaderItem,{key:c.itemId,"block-id":c.blockId,"potential-links":c.potentialLinks},null,8,["block-id","potential-links"])):createCommentVNode("v-if",!0),c.type=="potential-links-block"?(openBlock(),createBlock(a.PotentialLinksBlockItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,"ref-block-id":c.refBlockId,readonly:c.readonly,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","ref-block-id","readonly","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="potential-links-descendant"?(openBlock(),createBlock(a.PotentialLinksDescendantItem,{key:c.itemId,"item-id":c.itemId,"block-tree":a.controller,block:c.block,level:c.level,readonly:c.readonly,"highlight-terms":c.highlightTerms,"highlight-refs":c.highlightRefs},null,8,["item-id","block","level","readonly","highlight-terms","highlight-refs"])):createCommentVNode("v-if",!0),c.type=="missing-block"?(openBlock(),createBlock(a.MissingBlockItem,{key:c.itemId,"item-id":c.itemId,"block-id":c.blockId,level:c.level},null,8,["item-id","block-id","level"])):createCommentVNode("v-if",!0),c.type=="side-pane-header"?(openBlock(),createBlock(a.SidePaneItemHeader,{key:c.itemId,"block-tree":a.controller,"block-id":c.blockId,"item-id":c.itemId},null,8,["block-id","item-id"])):createCommentVNode("v-if",!0)]),footer:withCtx(()=>e[1]||(e[1]=[])),_:1},8,["list"])):createCommentVNode("v-if",!0)],44,_hoisted_1$v)}const BlockTree=_export_sfc(_sfc_main$14,[["render",_sfc_render$14],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/BlockTree.vue"]]);function copyAsHtml(o){const e=new Blob([o],{type:"text/html"}),n=[new ClipboardItem({[e.type]:e})];navigator.clipboard.write(n)}function copyAsPlainText(o){navigator.clipboard.writeText(o)}const _sfc_main$13=defineComponent({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get Label(){return Oh}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$13(o,e,n,a,s,l){return openBlock(),createBlock(a.Label,mergeProps(a.delegatedProps,{class:a.cn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const Label=_export_sfc(_sfc_main$13,[["render",_sfc_render$13],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/label/Label.vue"]]),_sfc_main$12=defineComponent({__name:"Exporter",setup(o,{expose:e}){e();const{open:n,blockId:a,closeExporter:s,exportSubtreeToHtml:l,exportSubtreeToMarkdown:c,exportSubtreeToPdf:d,exportSubtreeToPlainText:u}=ExporterContext.useContext(),f=ref("html"),v=computed(()=>{if(!a.value)return"";switch(f.value){case"html":return l(a.value);case"markdown":return c(a.value);case"plainText":return u(a.value);default:return""}});function b(){f.value==="html"?copyAsHtml(v.value):(f.value==="markdown"||f.value==="plainText")&&copyAsPlainText(v.value),s()}function k(){if(f.value!=="pdf"){const _=new Blob([v.value],{type:"text/plain"}),E=URL.createObjectURL(_),B=document.createElement("a");B.href=E;const M=f.value==="html"?"html":f.value==="markdown"?"md":"txt";B.download=`export_${dayjs().format("YYYY-MM-DD-HH-mm-ss")}.${M}`,B.click(),URL.revokeObjectURL(E)}s()}const x={open:n,blockId:a,closeExporter:s,exportSubtreeToHtml:l,exportSubtreeToMarkdown:c,exportSubtreeToPdf:d,exportSubtreeToPlainText:u,selectedFormat:f,previewContent:v,copyToClipboard:b,exportToFile:k,get Clipboard(){return Clipboard},get File(){return File},get Button(){return Button},get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogDescription(){return DialogDescription},get DialogFooter(){return DialogFooter},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get Label(){return Label},get Select(){return Select},get SelectContent(){return SelectContent},get SelectGroup(){return SelectGroup},get SelectItem(){return SelectItem},get SelectTrigger(){return SelectTrigger},get SelectValue(){return SelectValue}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),_hoisted_1$u={class:"flex flex-col gap-4 py-2"},_hoisted_2$g={class:"flex flex-col space-y-2"},_hoisted_3$d={key:0,class:"flex flex-col space-y-2"},_hoisted_4$a={class:"max-h-[30vh] max-w-full overflow-y-auto overflow-x-hidden text-wrap"},_hoisted_5$5={class:"text-wrap"};function _sfc_render$12(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.open,"onUpdate:open":e[1]||(e[1]=c=>!c&&a.closeExporter())},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"max-w-[80vw] w-[500px] flex flex-col gap-4"},{default:withCtx(()=>[createVNode(a.DialogHeader,null,{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.exporter.title")),1)]),_:1}),createVNode(a.DialogDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.exporter.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$g,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.exporter.exportFormat")),1)]),_:1}),createVNode(a.Select,{modelValue:a.selectedFormat,"onUpdate:modelValue":e[0]||(e[0]=c=>a.selectedFormat=c)},{default:withCtx(()=>[createVNode(a.SelectTrigger,null,{default:withCtx(()=>[createVNode(a.SelectValue)]),_:1}),createVNode(a.SelectContent,null,{default:withCtx(()=>[createVNode(a.SelectGroup,null,{default:withCtx(()=>[createVNode(a.SelectItem,{value:"html"},{default:withCtx(()=>e[2]||(e[2]=[createTextVNode("HTML")])),_:1}),createVNode(a.SelectItem,{value:"markdown"},{default:withCtx(()=>e[3]||(e[3]=[createTextVNode("Markdown")])),_:1}),createVNode(a.SelectItem,{value:"pdf"},{default:withCtx(()=>e[4]||(e[4]=[createTextVNode("PDF")])),_:1}),createVNode(a.SelectItem,{value:"plainText"},{default:withCtx(()=>e[5]||(e[5]=[createTextVNode("Plain Text")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a.selectedFormat!=="pdf"?(openBlock(),createElementBlock("div",_hoisted_3$d,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.exporter.preview")),1)]),_:1}),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("pre",_hoisted_5$5,toDisplayString$1(a.previewContent),1)])])):createCommentVNode("v-if",!0)]),createVNode(a.DialogFooter,null,{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",onClick:a.closeExporter},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.exporter.cancel")),1)]),_:1},8,["onClick"]),createVNode(a.Button,{variant:"outline",disabled:a.selectedFormat==="pdf",onClick:a.copyToClipboard},{default:withCtx(()=>[createVNode(a.Clipboard,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.exporter.copyToClipboard")),1)]),_:1},8,["disabled"]),createVNode(a.Button,{variant:"outline",onClick:a.exportToFile},{default:withCtx(()=>[createVNode(a.File,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.exporter.exportToFile")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}const Exporter=_export_sfc(_sfc_main$12,[["render",_sfc_render$12],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/exporter/Exporter.vue"]]),_sfc_main$11=defineComponent({__name:"FieldValueInspector",setup(o,{expose:e}){e();const{open:n,blockId:a}=FieldValueInspectorContext.useContext(),{getFieldValues:s}=FieldsManagerContext.useContext(),l=computed(()=>a.value?s(a.value):{}),c={open:n,blockId:a,getFieldValues:s,fieldValues:l,get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogDescription(){return DialogDescription},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$11(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogContent,null,{default:withCtx(()=>[createVNode(a.DialogHeader,null,{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.fieldValuesInspector.title")),1)]),_:1}),createVNode(a.DialogDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.fieldValuesInspector.description")),1)]),_:1}),createBaseVNode("pre",null,toDisplayString$1(JSON.stringify(a.fieldValues,null,2)),1)]),_:1})]),_:1})]),_:1},8,["open"])}const FieldValueInspector=_export_sfc(_sfc_main$11,[["render",_sfc_render$11],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/field-values-inspector/FieldValueInspector.vue"]]),BasicSettingsContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{kbPrefix:n}=ServerInfoContext.useContext();o({key:"basic",label:{zh:"\u57FA\u672C\u8BBE\u7F6E"}});const a="basic.textFontFamily",s=computed(()=>`${n.value}${a}`),l="",c=useLocalStorage2(s,l);e({id:a,groupKey:"basic",label:{zh:"\u6B63\u6587\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u7B14\u8BB0\u6B63\u6587\u7684\u5B57\u4F53\u3002"},defaultValue:l,value:useWritableComputedRef(c),componentType:{type:"fontSelector"}});const d="basic.uiFontFamily",u=computed(()=>`${n.value}${d}`),f="",v=useLocalStorage2(u,f);e({id:d,groupKey:"basic",label:{zh:"\u754C\u9762\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u8F6F\u4EF6\u754C\u9762\u5B57\u4F53\u3002\u5728\u4E0D\u6307\u5B9A\u5176\u4ED6\u5B57\u4F53\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u5B57\u4F53\u5C06\u6210\u4E3A\u8F6F\u4EF6\u7684\u57FA\u7840\u5B57\u4F53\u3002"},defaultValue:f,value:useWritableComputedRef(v),componentType:{type:"fontSelector"}});const b="basic.monospaceFontFamily",k=computed(()=>`${n.value}${b}`),x="",_=useLocalStorage2(k,x);e({id:b,groupKey:"basic",label:{zh:"\u4EE3\u7801\u5757\u5B57\u4F53"},desc:{zh:"\u6307\u5B9A\u884C\u5185\u4EE3\u7801\u3001\u4EE3\u7801\u5757\u7B49\u9700\u8981\u7B49\u5BBD\u5B57\u4F53\u7684\u573A\u666F\u4F7F\u7528\u7684\u5B57\u4F53\u3002"},defaultValue:x,value:useWritableComputedRef(_),componentType:{type:"fontSelector"}});const E="basic.enableFloatingEditor",B=computed(()=>`${n.value}${E}`),M=!1,I=useLocalStorage2(B,M);return e({id:E,groupKey:"basic",label:{zh:"\u542F\u7528\u6D6E\u52A8\u7F16\u8F91\u5668"},desc:{zh:"\u542F\u7528\u540E\uFF0C\u5728\u5757\u5F15\u7528\u5757\u4E0A\u6309 Ctrl / Command \u952E\u65F6\uFF0C\u4F1A\u5F39\u51FA\u6D6E\u52A8\u7F16\u8F91\u5668\u3002"},defaultValue:M,value:useWritableComputedRef(I),componentType:{type:"switch"}}),{textFontFamily:c,uiFontFamily:v,monospaceFontFamily:_,enableFloatingEditor:I}}),FloatingEditorContext=createContext(()=>{const o=ref(null),e=ref(!1),n=ref(null),{enableFloatingEditor:a}=BasicSettingsContext.useContext(),s=(d,u)=>{a.value&&(n.value=d,o.value=u)},l=()=>{n.value=null,o.value=null,e.value=!1},c=d=>{d.ctrlKey&&o.value&&(e.value=!0)};return onMounted(()=>{window.addEventListener("keydown",c)}),onUnmounted(()=>{window.removeEventListener("keydown",c)}),{showPos:o,open:e,openedBlockId:n,openFloatingEditor:s,closeFloatingEditor:l}}),_sfc_main$10=defineComponent({__name:"FloatingEditor",setup(o,{expose:e}){e();const{showPos:n,open:a,openedBlockId:s}=FloatingEditorContext.useContext();watch(a,async()=>{if(await nextTick(),!n.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:c,y:d}=n.value,u=calcPopoverPos(300,300,c,d,{offset:f=>(f.leftUp.y-=30,f.rightUp.y-=30,f)});document.body.style.setProperty("--popover-x",`${u.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${u.rightDown.y}px`)});const l={showPos:n,open:a,openedBlockId:s,BlockTree,Popover,PopoverContent,PopoverTrigger};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$10(o,e,n,a,s,l){return openBlock(),createBlock(a.Popover,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.PopoverTrigger),createVNode(a.PopoverContent,{class:"floating-editor-content p-2 w-[400px] h-[400px] overflow-hidden"},{default:withCtx(()=>[a.openedBlockId?(openBlock(),createBlock(a.BlockTree,{key:0,class:"h-full",id:"floating-editor","root-block-ids":[a.openedBlockId],"root-block-level":0,"padding-bottom":0},null,8,["root-block-ids"])):createCommentVNode("v-if",!0)]),_:1})]),_:1},8,["open"])}const FloatingEditor=_export_sfc(_sfc_main$10,[["render",_sfc_render$10],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/floating-editor/FloatingEditor.vue"]]),_sfc_main$$=defineComponent({__name:"PasteDialog",setup(o,{expose:e}){e();const{open:n}=PasteDialogContext.useContext(),a={open:n,get AlertDialog(){return AlertDialog},get AlertDialogContent(){return AlertDialogContent},get AlertDialogHeader(){return AlertDialogHeader},get AlertDialogTitle(){return AlertDialogTitle},get AlertDialogDescription(){return AlertDialogDescription},get AlertDialogFooter(){return AlertDialogFooter},get AlertDialogCancel(){return AlertDialogCancel}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function _sfc_render$$(o,e,n,a,s,l){return openBlock(),createBlock(a.AlertDialog,{open:a.open},{default:withCtx(()=>[createVNode(a.AlertDialogContent,null,{default:withCtx(()=>[createVNode(a.AlertDialogHeader,null,{default:withCtx(()=>[createVNode(a.AlertDialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.title")),1)]),_:1}),createVNode(a.AlertDialogDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.description")),1)]),_:1})]),_:1}),createVNode(a.AlertDialogFooter,null,{default:withCtx(()=>[createVNode(a.AlertDialogCancel,{onClick:e[0]||(e[0]=c=>a.open=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.pasteDialog.cancelBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}const PasteDialog=_export_sfc(_sfc_main$$,[["render",_sfc_render$$],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/paste-dialog/PasteDialog.vue"]]),_sfc_main$_=defineComponent({__name:"RefSuggestions",setup(o,{expose:e}){e();const{showPos:n,open:a,query:s,cb:l,focusItemIndex:c,suggestions:d,suppressMouseOver:u,updateSuggestions:f,withScrollSuppressed:v}=RefSuggestionsContext.useContext(),{putNewBlockAt:b}=BacklinksContext.useContext(),{blocksManager:k,blockEditor:x}=BlocksContext.useContext(),{lastFocusedBlockTree:_,lastFocusedDiId:E}=LastFocusContext.useContext(),B=useTaskQueue(),M=computed(()=>{const K=b.value===""?"root":b.value;return k.getBlock(K)}),I=computed(()=>s.value.length==0?[]:hybridTokenize(s.value,!1,1,!1)??[]);watch(n,async()=>{if(await nextTick(),!n.value||!(document.querySelector("[data-radix-popper-content-wrapper]")instanceof HTMLElement))return;const{x:K,y:W}=n.value,G=calcPopoverPos(300,300,K,W,{offset:ce=>(ce.leftDown.y+=30,ce.rightDown.y+=30,ce)});document.body.style.setProperty("--popover-x",`${G.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${G.rightDown.y}px`)});const F=K=>{K.isComposing||f()},V=K=>{f()},L=()=>{setTimeout(()=>{const K=document.body.querySelector(".ref-suggestions-content .focus");K instanceof HTMLElement&&K.scrollIntoView({block:"nearest"})})},U=()=>{B.addTask(async()=>{const K=_.value,W=E.value;if(!K||!W)return;const G=K.getEditorView(W);if(!(G instanceof EditorView$1))return;const ce=G.state.schema,se=b.value===""?"root":b.value,{newNormalBlockId:me}=x.insertNormalBlock({content:plainTextToTextContent(s.value,ce),pos:{parentId:se,childIndex:"last-space"}})??{};if(!me)return;const ge=ce.nodes.blockRef_v2.create({toBlockId:me,tag:!1}),Te=G.state.selection.anchor,Be=G.state.tr.replaceRangeWith(Te-1,Te,ge);G.dispatch(Be),a.value=!1,setTimeout(()=>G.focus(),50)})},j=K=>{var W;K.type==="block"?(W=l.value)==null||W.call(l,K.block.id,()=>a.value=!1):s.value.trim().length>0&&U()},oe=generateKeydownHandlerSimple({Escape:{run:K=>{var W;return K.isComposing||K.keyCode===229?!1:((W=l.value)==null||W.call(l,null,()=>a.value=!1),!0)}},Enter:{run:K=>{var G;if(K.isComposing||K.keyCode===229)return!1;const W=d.value[c.value];return W.type==="block"?(G=l.value)==null||G.call(l,W.block.id,()=>a.value=!1):U(),!0},preventDefault:!0,stopPropagation:!0},Backspace:{run:K=>{var W;return K.isComposing||K.keyCode===229?!1:s.value.length==0?(n.value=null,(W=l.value)==null||W.call(l,null,()=>a.value=!1),!0):!1},preventDefault:!0,stopPropagation:!0},ArrowUp:{run:K=>K.isComposing||K.keyCode===229?!1:v(()=>(c.value>0?c.value--:c.value=d.value.length-1,L(),!0)),preventDefault:!0,stopPropagation:!0},ArrowDown:{run:K=>K.isComposing||K.keyCode===229?!1:v(()=>(c.value<d.value.length-1?c.value++:c.value=0,L(),!0)),preventDefault:!0,stopPropagation:!0},Home:{run:K=>K.isComposing||K.keyCode===229?!1:v(()=>(c.value=0,L(),!0))},End:{run:K=>K.isComposing||K.keyCode===229?!1:v(()=>(c.value=d.value.length-1,L(),!0)),preventDefault:!0,stopPropagation:!0}}),Y={showPos:n,open:a,query:s,cb:l,focusItemIndex:c,suggestions:d,suppressMouseOver:u,updateSuggestions:f,withScrollSuppressed:v,putNewBlockAt:b,blocksManager:k,blockEditor:x,lastFocusedBlockTree:_,lastFocusedDiId:E,taskQueue:B,putNewBlockAtBlock:M,queryTerms:I,onInput:F,onCompositionEnd:V,ensureFocusedVisible:L,handleCreateNew:U,handleClick:j,handleKeydown:oe,get Plus(){return Plus},get Search(){return Search},BlockContent,get Input(){return Input},get Popover(){return Popover},get PopoverContent(){return PopoverContent}};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}}),_hoisted_1$t={class:"relative px-1"},_hoisted_2$f={class:"my-2 max-h-[240px] overflow-y-auto px-1"},_hoisted_3$c=["onMouseover","onClick"],_hoisted_4$9=["onMouseover","onClick"],_hoisted_5$4={key:0,class:"text-center"},_hoisted_6$2={class:"text-sm text-muted-foreground"};function _sfc_render$_(o,e,n,a,s,l){return openBlock(),createBlock(a.Popover,{open:a.open,"onUpdate:open":e[1]||(e[1]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.PopoverContent,{class:"ref-suggestions-content z-[999] py-2 pb-0 px-1 max-h-[300px] max-w-[300px] overflow-hidden","trap-focus":"",tabindex:"-1",onKeydown:a.handleKeydown},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$t,[createVNode(a.Search,{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),createVNode(a.Input,{onInput:a.onInput,onCompositionend:a.onCompositionEnd,modelValue:a.query,"onUpdate:modelValue":e[0]||(e[0]=c=>a.query=c),class:"h-[32px] pl-8 rounded-sm focus-visible:outline-none focus-visible:ring-transparent"},null,8,["modelValue"])]),createCommentVNode(" XXX scroll area \u7684\u9AD8\u5EA6\u662F 250px\uFF0C\u56E0\u4E3A max-h \u662F 300px\uFF0C\u51CF\u53BB input \u7684\u9AD8\u5EA6\u548C\u4E2D\u95F4\u7684 padding \u5C31\u662F 250px\uFF0C\u5E76\u4E0D\u4F18\u96C5 "),createBaseVNode("div",_hoisted_2$f,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.suggestions,(c,d)=>(openBlock(),createElementBlock(Fragment$1,{key:c.type},[c.type==="block"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:a.focusItemIndex===d}]),onMouseover:u=>!a.suppressMouseOver&&(a.focusItemIndex=d),onClick:u=>a.handleClick(c)},[createVNode(a.BlockContent,{block:c.block,readonly:"",class:"*:cursor-default","highlight-terms":a.queryTerms},null,8,["block","highlight-terms"])],42,_hoisted_3$c)):a.putNewBlockAtBlock&&c.type==="createNew"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["flex w-full text-sm items-center cursor-default select-none text-muted-foreground rounded-sm py-1.5 pl-2 [&.focus]:bg-accent [&.focus]:text-accent-foreground",{focus:a.focusItemIndex===d}]),onMouseover:u=>!a.suppressMouseOver&&(a.focusItemIndex=d),onClick:u=>a.handleClick(c)},[createVNode(a.Plus,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.refSuggestions.createNewUnder1"))+' "',1),createVNode(a.BlockContent,{block:a.putNewBlockAtBlock,class:"*:cursor-default",readonly:""},null,8,["block"]),createTextVNode('" '+toDisplayString$1(o.$t("kbView.refSuggestions.createNewUnder2")),1)],42,_hoisted_4$9)):createCommentVNode("v-if",!0)],64))),128)),a.suggestions.length===0?(openBlock(),createElementBlock("div",_hoisted_5$4,[createBaseVNode("span",_hoisted_6$2,toDisplayString$1(o.$t("kbView.refSuggestions.noSuggestions")),1)])):createCommentVNode("v-if",!0)])]),_:1},8,["onKeydown"])]),_:1},8,["open"])}const RefSuggestions=_export_sfc(_sfc_main$_,[["render",_sfc_render$_],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ref-suggestions/RefSuggestions.vue"]]),SettingsPanelContext=createContext(()=>{const o=SettingsContext.useContext(),e=ref(!1),n=Object.keys(o.settingGroups.value)[0],a=ref(n);return{open:e,activeGroupKey:a}}),getTrans=(o,e)=>o[e]||o.en_US||o.zh||Object.values(o)[0],_sfc_main$Z=defineComponent({__name:"KeybindingInput",props:{modelValue:{type:String},modelModifiers:{}},emits:["update:modelValue"],setup(o,{expose:e}){e();const n=useModel(o,"modelValue"),a={value:n,keydownHandler:s=>{const l=[];(s.metaKey||s.ctrlKey)&&l.push("Mod"),s.altKey&&l.push("Alt"),s.shiftKey&&l.push("Shift"),l.push(s.key),n.value=l.join("-")},get Button(){return Button},get X(){return X},get Plus(){return Plus}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),_hoisted_1$s={class:"italic text-muted-foreground"};function _sfc_render$Z(o,e,n,a,s,l){return openBlock(),createBlock(a.Button,{variant:"outline",size:"sm",class:"font-normal focus:bg-muted",onKeydown:withModifiers(a.keydownHandler,["prevent"]),onClick:e[0]||(e[0]=withModifiers(()=>{},["prevent"]))},{default:withCtx(()=>[a.value?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(toDisplayString$1(a.value)+" ",1),createVNode(a.X,{class:"ml-2 size-4"})],64)):(openBlock(),createElementBlock(Fragment$1,{key:1},[createBaseVNode("span",_hoisted_1$s,toDisplayString$1(o.$t("kbView.keybindingInput.empty")),1),createVNode(a.Plus,{class:"ml-2 size-4"})],64))]),_:1})}const KeybindingInput=_export_sfc(_sfc_main$Z,[["render",_sfc_render$Z],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/keybinding-input/KeybindingInput.vue"]]),_sfc_main$Y=defineComponent({__name:"ResetButton",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n={props:o,get Tooltip(){return Tooltip},get TooltipTrigger(){return TooltipTrigger},get TooltipContent(){return TooltipContent},get Button(){return Button},get RefreshCcw(){return RefreshCcw}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$Y(o,e,n,a,s,l){return openBlock(),createBlock(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,null,{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onClick:e[0]||(e[0]=c=>n.item.value.value=n.item.defaultValue)},{default:withCtx(()=>[createVNode(a.RefreshCcw,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.settingsPanel.reset")),1)]),_:1})]),_:1})}const ResetButton=_export_sfc(_sfc_main$Y,[["render",_sfc_render$Y],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/ResetButton.vue"]]),_sfc_main$X=defineComponent({__name:"TextInputComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.item.componentType.validator;if(l)return l(n.item.value.value)}),s={props:n,validationMsg:a,get Input(){return Input},ResetButton};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),_hoisted_1$r={class:"flex items-center gap-2"},_hoisted_2$e={key:0,class:"text-red-500 text-sm mt-2"};function _sfc_render$X(o,e,n,a,s,l){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$r,[createVNode(a.Input,{modelValue:n.item.value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.item.value.value=c)},null,8,["modelValue"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])]),a.validationMsg?(openBlock(),createElementBlock("div",_hoisted_2$e,toDisplayString$1(a.validationMsg),1)):createCommentVNode("v-if",!0)])}const TextInputComp=_export_sfc(_sfc_main$X,[["render",_sfc_render$X],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/TextInputComp.vue"]]),_sfc_main$W=defineComponent({__name:"IntegerInputComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n={ResetButton,get Input(){return Input}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$q={class:"flex items-center gap-2"};function _sfc_render$W(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$q,[createVNode(a.Input,{modelValue:n.item.value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.item.value.value=c),type:"number",min:n.item.componentType.min,max:n.item.componentType.max},null,8,["modelValue","min","max"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])])}const IntegerInputComp=_export_sfc(_sfc_main$W,[["render",_sfc_render$W],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/IntegerInputComp.vue"]]),_sfc_main$V=defineComponent({__name:"JsonComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const l=n.item.componentType.schema;if(l)return l.safeParse(n.item.value.value)}),s={props:n,parseResult:a,ResetButton,CodeMirror};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),_hoisted_1$p={class:"relative"},_hoisted_2$d={key:0,class:"text-red-500 text-sm mt-2"},_hoisted_3$b={class:"absolute right-0 top-0 m-2"};function _sfc_render$V(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$p,[createVNode(a.CodeMirror,{class:"border rounded-md min-h-[100px] p-2 cursor-text",src:n.item.value.value,"onUpdate:src":e[0]||(e[0]=c=>n.item.value.value=c),lang:"json"},null,8,["src"]),a.parseResult&&!a.parseResult.success?(openBlock(),createElementBlock("div",_hoisted_2$d,toDisplayString$1(o.$t("kbView.settingsPanel.invalidJson")),1)):createCommentVNode("v-if",!0),createBaseVNode("div",_hoisted_3$b,[createVNode(a.ResetButton,{item:n.item},null,8,["item"])])])}const JsonComp=_export_sfc(_sfc_main$V,[["render",_sfc_render$V],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/JsonComp.vue"]]),_sfc_main$U=defineComponent({__name:"KeybindingComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n={props:o,ResetButton,KeybindingInput};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$o={class:"flex items-center gap-2"};function _sfc_render$U(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$o,[createVNode(a.KeybindingInput,{class:"my-2",modelValue:n.item.value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.item.value.value=c)},null,8,["modelValue"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])])}const KeybindingComp=_export_sfc(_sfc_main$U,[["render",_sfc_render$U],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/KeybindingComp.vue"]]),_sfc_main$T=defineComponent({__name:"SelectComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const{locale:n}=useI18n(),a={locale:n,props:o,ResetButton,get getTrans(){return getTrans},get Select(){return Select},get SelectContent(){return SelectContent},get SelectItem(){return SelectItem},get SelectTrigger(){return SelectTrigger},get SelectValue(){return SelectValue}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),_hoisted_1$n={class:"flex items-center gap-2"};function _sfc_render$T(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(a.Select,{modelValue:n.item.value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.item.value.value=c)},{default:withCtx(()=>[createVNode(a.SelectTrigger,null,{default:withCtx(()=>[createVNode(a.SelectValue)]),_:1}),createVNode(a.SelectContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(n.item.componentType.options,c=>(openBlock(),createBlock(a.SelectItem,{key:c.value,value:c.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.getTrans(c.label,a.locale)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])])}const SelectComp=_export_sfc(_sfc_main$T,[["render",_sfc_render$T],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/SelectComp.vue"]]),_sfc_main$S=defineComponent({__name:"Switch",props:{defaultChecked:{type:Boolean,required:!1},checked:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1},name:{type:String,required:!1},id:{type:String,required:!1},value:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:checked"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get SwitchRoot(){return mg},get SwitchThumb(){return hg}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$S(o,e,n,a,s,l){return openBlock(),createBlock(a.SwitchRoot,mergeProps(a.forwarded,{class:a.cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a.props.class)}),{default:withCtx(()=>[createVNode(a.SwitchThumb,{class:normalizeClass(a.cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5"))},{default:withCtx(()=>[renderSlot(o.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"])}const Switch=_export_sfc(_sfc_main$S,[["render",_sfc_render$S],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/switch/Switch.vue"]]),_sfc_main$R=defineComponent({__name:"SwitchComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const n={get Switch(){return Switch},ResetButton};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$m={class:"flex items-center gap-x-2 pt-2"};function _sfc_render$R(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$m,[createVNode(a.Switch,{checked:n.item.value.value,"onUpdate:checked":e[0]||(e[0]=c=>n.item.value.value=c)},null,8,["checked"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])])}const SwitchComp=_export_sfc(_sfc_main$R,[["render",_sfc_render$R],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/SwitchComp.vue"]]),checkFontAvailability=o=>{const e=document.createElement("span");e.innerHTML=Array(100).join("wi"),e.style.cssText=["position: absolute","width: auto","font-size: 128px","left: -9999px"].join(" !important;");const n=d=>(e.style.fontFamily=d,e.clientWidth);document.body.appendChild(e);const a=n("monospace"),s=n("sans-serif"),l=n("serif"),c=o.map(d=>a!==n(d+" ,monospace")||s!==n(d+" ,sans-serif")||l!==n(d+" ,serif"));return document.body.removeChild(e),c},_sfc_main$Q=defineComponent({__name:"FontSelector",props:{item:{type:null,required:!0},fontList:{type:Array,required:!1}},setup(o,{expose:e}){e();const n=["Arial","Helvetica","Times New Roman","Courier New","Verdana","Tahoma","Trebuchet MS","Georgia","Impact","Palatino Linotype","Century Gothic","Gill Sans","Lucida Sans Unicode","Lucida Console","Comic Sans MS","Arial Black","Garamond","Franklin Gothic Medium","Book Antiqua","Calibri","Cambria","Candara","Consolas","Constantia","Corbel","Segoe UI","Segoe Print","Segoe Script","Optima","Rockwell","Baskerville","Didot","Futura","Geneva","Courier","Brush Script MT","Hobo Std","Papyrus","MS Serif","MS Sans Serif","Roboto","Open Sans","Lato","Montserrat","Source Sans Pro","Poppins","Raleway","Merriweather","Nunito","Playfair Display","Ubuntu","Noto Sans","Oswald","PT Sans","PT Serif","Work Sans","Cabin","Quicksand","Josefin Sans","Droid Sans","Inconsolata","Lobster","Pacifico","Indie Flower","Amatic SC","Anton","Abril Fatface","Bitter","Dancing Script","Exo 2","Fjalla One","Karla","Mulish","Righteous","Satisfy","Shadows Into Light","Signika","Slabo 27px","Zilla Slab","Overpass","Microsoft YaHei","SimSun","SimHei","FangSong","NSimSun","STXihei","STKaiti","STSong","STZhongsong","STHupo","STXinwei","STLiti","FangSong_GB2312","YouYuan","FZHei-B01S","FZShuSong-Z01","Source Han Sans","Source Han Serif","Monospace","Cursive"],a=checkFontAvailability(n),s={FONT_NAMES:n,fontAvailability:a,ResetButton,get Select(){return Select},get SelectItem(){return SelectItem},get SelectTrigger(){return SelectTrigger},get SelectContent(){return SelectContent},get SelectValue(){return SelectValue},get SelectGroup(){return SelectGroup}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),_hoisted_1$l={class:"flex items-center gap-2"},_hoisted_2$c={class:"flex items-center"},_hoisted_3$a={key:0,class:"text-muted-foreground ml-2"};function _sfc_render$Q(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$l,[createVNode(a.Select,{modelValue:n.item.value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.item.value.value=c)},{default:withCtx(()=>[createVNode(a.SelectTrigger,null,{default:withCtx(()=>[createVNode(a.SelectValue,{class:"text-muted-foreground",placeholder:o.$t("kbView.fontSelector.notSpecified")},null,8,["placeholder"])]),_:1}),createVNode(a.SelectContent,null,{default:withCtx(()=>[createVNode(a.SelectGroup,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(a.FONT_NAMES,(c,d)=>createVNode(a.SelectItem,{key:d,value:c,style:normalizeStyle({fontFamily:c})},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",null,toDisplayString$1(c),1),a.fontAvailability[d]?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",_hoisted_3$a,toDisplayString$1(o.$t("kbView.fontSelector.notAvailable")),1))])]),_:2},1032,["value","style"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),createVNode(a.ResetButton,{item:n.item},null,8,["item"])])}const FontSelector=_export_sfc(_sfc_main$Q,[["render",_sfc_render$Q],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/FontSelector.vue"]]),_sfc_main$P=defineComponent({__name:"BlockIdInputComp",props:{item:{type:null,required:!0}},setup(o,{expose:e}){e();const{blocksManager:n}=BlocksContext.useContext(),{openRefSuggestions:a}=RefSuggestionsContext.useContext(),s=o,l=computed(()=>s.item.value?n.getBlock(s.item.value.value):null),c={blocksManager:n,openRefSuggestions:a,props:s,block:l,handleClickAdd:d=>{a({x:d.clientX,y:d.clientY},(u,f)=>{u&&(s.item.value.value=u),f()})},ResetButton,get Plus(){return Plus},get Button(){return Button},BlockContent};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),_hoisted_1$k={class:"flex items-center gap-2"},_hoisted_2$b={key:2,class:"text-red-500"};function _sfc_render$P(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$k,[n.item.value.value?n.item.value.value&&a.block?(openBlock(),createBlock(a.BlockContent,{key:1,block:a.block,readonly:""},null,8,["block"])):(openBlock(),createElementBlock("div",_hoisted_2$b,"MISSING BLOCK")):(openBlock(),createBlock(a.Button,{key:0,variant:"outline",size:"icon",onClick:a.handleClickAdd},{default:withCtx(()=>[createVNode(a.Plus,{class:"size-4"})]),_:1})),n.item.value.value?(openBlock(),createBlock(a.ResetButton,{key:3,item:n.item},null,8,["item"])):createCommentVNode("v-if",!0)])}const BlockIdInputComp=_export_sfc(_sfc_main$P,[["render",_sfc_render$P],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/BlockIdInputComp.vue"]]),_sfc_main$O=defineComponent({__name:"SettingsPanel",setup(o,{expose:e}){e();const{locale:n}=useI18n(),{open:a,activeGroupKey:s}=SettingsPanelContext.useContext(),{settingGroups:l,getAllSettingItemsInGroup:c}=SettingsContext.useContext(),d={locale:n,open:a,activeGroupKey:s,settingGroups:l,getAllSettingItemsInGroup:c,get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get getTrans(){return getTrans},get Button(){return Button},get Label(){return Label},TextInputComp,IntegerInputComp,JsonComp,KeybindingComp,SelectComp,SwitchComp,FontSelector,BlockIdInputComp};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),_hoisted_1$j={class:"left w-[200px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col text-sidebar-fg"},_hoisted_2$a={class:"flex flex-col gap-1"},_hoisted_3$9={class:"right w-0 flex flex-col items-center flex-grow pr-1"},_hoisted_4$8={class:"flex flex-col gap-y-6 w-full overflow-y-auto overflow-x-hidden px-4 py-8"};function _sfc_render$O(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"flex flex-row gap-0 max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(a.DialogHeader,{class:"hidden"},{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.settingsPanel.title")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$j,[e[1]||(e[1]=createBaseVNode("div",{class:"text-sm text-muted-foreground font-semibold px-4 py-2"},"Settings",-1)),createBaseVNode("div",_hoisted_2$a,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.settingGroups,c=>(openBlock(),createBlock(a.Button,{key:c.key,variant:"ghost","data-active":c.key===a.activeGroupKey,class:"w-full h-7 justify-start font-normal text-sidebar-fg data-[active=true]:bg-accent",onClick:d=>a.activeGroupKey=c.key},{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.getTrans(c.label,a.locale)),1)]),_:2},1032,["data-active","onClick"]))),128))])]),createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$8,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.getAllSettingItemsInGroup(a.activeGroupKey),c=>(openBlock(),createElementBlock("div",{class:"flex flex-col",key:c.id},[createVNode(a.Label,{class:"mb-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.getTrans(c.label,a.locale)),1)]),_:2},1024),c.desc?(openBlock(),createBlock(a.Label,{key:0,class:"text-[.8em] text-muted-foreground mb-2 whitespace-pre-wrap"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.getTrans(c.desc,a.locale)),1)]),_:2},1024)):createCommentVNode("v-if",!0),c.componentType.type==="textInput"?(openBlock(),createBlock(a.TextInputComp,{key:1,item:c},null,8,["item"])):c.componentType.type==="integerInput"?(openBlock(),createBlock(a.IntegerInputComp,{key:2,item:c},null,8,["item"])):c.componentType.type==="json"?(openBlock(),createBlock(a.JsonComp,{key:3,item:c},null,8,["item"])):c.componentType.type==="keybindingInput"?(openBlock(),createBlock(a.KeybindingComp,{key:4,item:c},null,8,["item"])):c.componentType.type==="select"?(openBlock(),createBlock(a.SelectComp,{key:5,item:c},null,8,["item"])):c.componentType.type==="switch"?(openBlock(),createBlock(a.SwitchComp,{key:6,item:c},null,8,["item"])):c.componentType.type==="fontSelector"?(openBlock(),createBlock(a.FontSelector,{key:7,item:c},null,8,["item"])):c.componentType.type==="blockIdInput"?(openBlock(),createBlock(a.BlockIdInputComp,{key:8,item:c},null,8,["item"])):createCommentVNode("v-if",!0)]))),128))])])]),_:1})]),_:1},8,["open"])}const SettingsPanel=_export_sfc(_sfc_main$O,[["render",_sfc_render$O],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/settings/SettingsPanel.vue"]]),createCreateNewTreeDialogContext=createContext(()=>{const o=ref(!1),e=ref("waiting");return{open:o,status:e,openCreateNewTreeDialog:()=>{o.value=!0,e.value="waiting"},closeCreateNewTreeDialog:()=>{o.value=!1,e.value="waiting"}}}),_sfc_main$N=defineComponent({__name:"FloatingMathInput",setup(o,{expose:e}){e();const n=ref(null),a=computed({get:()=>n.value!==null,set:E=>!E&&(n.value=null)}),s=ref(""),l=ref(null),{registerFloatingMathInput:c}=FloatingMathInputContext.useContext();let d=null,u=null,f=null,v=null,b=null,k=null;const x=()=>[EditorView.lineWrapping,keymap.of([{key:"Escape",run:()=>(a.value=!1,b==null||b(),!0),stopPropagation:!0},{key:"ArrowLeft",run:()=>{var M;const E=(M=l.value)==null?void 0:M.getEditorView();if(!E)return!1;const B=E.state.selection;return B.ranges.length===1&&B.ranges[0].empty&&B.ranges[0].anchor===0?(a.value=!1,f==null||f(),!0):!1}},{key:"ArrowRight",run:()=>{var I;const E=(I=l.value)==null?void 0:I.getEditorView();if(!E)return!1;const B=E.state.selection,M=E.state.doc.length;return B.ranges.length===1&&B.ranges[0].empty&&B.ranges[0].head===M?(a.value=!1,v==null||v(),!0):!1}},{key:"Backspace",run:()=>{var B;const E=(B=l.value)==null?void 0:B.getEditorView();return E&&E.state.doc.length===0?(a.value=!1,k==null||k(),!0):!1}},{key:"Delete",run:()=>{var B;const E=(B=l.value)==null?void 0:B.getEditorView();return E&&E.state.doc.length===0?(a.value=!1,k==null||k(),!0):!1}}])];watch(n,async()=>{var U;if(await nextTick(),!n.value)return;const E=document.querySelector("[data-radix-popper-content-wrapper]");if(!(E instanceof HTMLElement))return;const{x:B,y:M}=n.value,I=E.getBoundingClientRect(),F=(d==null?void 0:d.getBoundingClientRect())??{height:0},V=calcPopoverPos(I.width,I.height,B,M,{offset:j=>(j.leftUp.y-=F.height+10,j.rightUp.y-=F.height+10,j.leftDown.y+=10,j.rightDown.y+=10,j),avoidColideWith:d,minCollisionDist:10}),L=(U=l.value)==null?void 0:U.getEditorView();L&&(L.focus(),L.dispatch({selection:{anchor:0,head:L.state.doc.length}}),document.body.style.setProperty("--popover-x",`${V.rightDown.x}px`),document.body.style.setProperty("--popover-y",`${V.rightDown.y}px`))}),onMounted(()=>{c((E,B,M,I,F,V,L)=>{d=E,s.value=B,u=M,f=I,v=F,b=V,k=L;const U=d.getBoundingClientRect();n.value={x:U.left+U.width/2,y:U.bottom}})});const _={showPos:n,open:a,src:s,codeMirror:l,registerFloatingMathInput:c,get mathEl(){return d},set mathEl(E){d=E},get onChange(){return u},set onChange(E){u=E},get onSkipLeft(){return f},set onSkipLeft(E){f=E},get onSkipRight(){return v},set onSkipRight(E){v=E},get onDirectClose(){return b},set onDirectClose(E){b=E},get onDeleteThisNode(){return k},set onDeleteThisNode(E){k=E},extensionsGenerator:x,CodeMirror,Label,get Popover(){return Popover},get PopoverContent(){return PopoverContent},get PopoverTrigger(){return PopoverTrigger}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function _sfc_render$N(o,e,n,a,s,l){return openBlock(),createBlock(a.Popover,{open:a.open,"onUpdate:open":e[2]||(e[2]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.PopoverTrigger),createVNode(a.PopoverContent,{class:"ref-suggestions-content p-2 pb-1",onPointerDownOutside:e[1]||(e[1]=()=>{var c;return(c=a.onDirectClose)==null?void 0:c.call(a)}),"trap-focus":"",tabindex:"-1"},{default:withCtx(()=>[createVNode(a.CodeMirror,{src:a.src,"onUpdate:src":e[0]||(e[0]=c=>a.src=c),class:"flex-grow",ref:"codeMirror",lang:"latex",extensionsBuilder:a.extensionsGenerator,"on-src-changed":a.onChange??void 0},null,8,["src","on-src-changed"]),createVNode(a.Label,{class:"text-muted-foreground text-[.8em] font-normal text-right mr-2"},{default:withCtx(()=>e[3]||(e[3]=[createTextVNode('Press "Esc" to close')])),_:1})]),_:1})]),_:1},8,["open"])}const FloatingMathInput=_export_sfc(_sfc_main$N,[["render",_sfc_render$N],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/FloatingMathInput.vue"]]),_sfc_main$M=defineComponent({__name:"Checkbox",props:{defaultChecked:{type:Boolean,required:!1},checked:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1},name:{type:String,required:!1},value:{type:String,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:checked"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get Check(){return Check},get CheckboxIndicator(){return Kv},get CheckboxRoot(){return zv}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$M(o,e,n,a,s,l){return openBlock(),createBlock(a.CheckboxRoot,mergeProps(a.forwarded,{class:a.cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a.props.class)}),{default:withCtx(()=>[createVNode(a.CheckboxIndicator,{class:"flex h-full w-full items-center justify-center text-current"},{default:withCtx(()=>[renderSlot(o.$slots,"default",{},()=>[createVNode(a.Check,{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"])}const Checkbox=_export_sfc(_sfc_main$M,[["render",_sfc_render$M],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/checkbox/Checkbox.vue"]]),_sfc_main$L=defineComponent({__name:"FusionCommand",setup(o,{expose:e}){e();const n=BlockTreeContext.useContext(),{inputText:a,mode:s,blockSearchResult:l,focusIndex:c,contentEl:d,suppressMouseOver:u,open:f,allowedBlockTypes:v,queryTerms:b,updateBlockSearchResult:k}=FusionCommandContext.useContext(),x=useDebounceFn(V=>{V.isComposing||s.value==="searchBlock"&&k()},500),_=()=>{a.value="",l.value=[]},E=()=>{setTimeout(()=>{var L;const V=(L=d.value)==null?void 0:L.querySelector(".fusion-command-content .focus");V instanceof HTMLElement&&V.scrollIntoView({block:"nearest"})})},B=(V,L=500)=>(u.value=!0,setTimeout(()=>u.value=!1,L),V()),M=()=>{if(c.value===-1)return!1;const V=l.value[c.value];if(!V)return!1;const L=n.getBlockTree("main");if(!L)return!1;f.value=!1,L.focusBlock(V.id,{highlight:!0,expandIfFold:!0})},I=generateKeydownHandlerSimple({ArrowUp:{run:V=>V.isComposing||V.keyCode===229?!1:B(()=>(c.value>0?c.value--:c.value=l.value.length-1,E(),!0)),stopPropagation:!0,preventDefault:!0},ArrowDown:{run:V=>V.isComposing||V.keyCode===229?!1:B(()=>(c.value<l.value.length-1?c.value++:c.value=0,E(),!0)),stopPropagation:!0,preventDefault:!0},Home:{run:V=>V.isComposing||V.keyCode===229?!1:B(()=>(c.value=0,E(),!0)),stopPropagation:!0,preventDefault:!0},End:{run:V=>V.isComposing||V.keyCode===229?!1:B(()=>(c.value=l.value.length-1,E(),!0)),stopPropagation:!0,preventDefault:!0},Enter:{run:V=>V.isComposing||V.keyCode===229?!1:(M(),!0),stopPropagation:!0,preventDefault:!0},"Mod-Enter":{run:V=>!(V.isComposing||V.keyCode===229),stopPropagation:!0,preventDefault:!0},Escape:{run:V=>V.isComposing||V.keyCode===229?!1:(f.value=!1,!0),stopPropagation:!0,preventDefault:!0}}),F={blockTreeContext:n,inputText:a,mode:s,blockSearchResult:l,focusIndex:c,contentEl:d,suppressMouseOver:u,open:f,allowedBlockTypes:v,queryTerms:b,updateBlockSearchResult:k,handleInput:x,handleClear:_,ensureFocusedVisiblle:E,withScrollSuppressed:B,gotoFocused:M,handleKeydown:I,get BLOCK_TYPE_ZH_NAMES(){return BLOCK_TYPE_ZH_NAMES},get Popover(){return Popover},get PopoverContent(){return PopoverContent},get PopoverTrigger(){return PopoverTrigger},get Command(){return Command},get Delete(){return Delete},get Search(){return Search},get SlidersHorizontal(){return SlidersHorizontal},BlockContent,Checkbox,get Input(){return Input},ScrollArea,get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get DialogDescription(){return DialogDescription}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),_hoisted_1$i={class:"relative border-b"},_hoisted_2$9={class:"absolute left-3 top-1/2 -translate-y-1/2"},_hoisted_3$8={class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-x-2"},_hoisted_4$7={class:"text-[.8em] text-muted-foreground mb-1"},_hoisted_5$3={class:"text-[.8em]"},_hoisted_6$1={key:0,class:"max-h-[60vh] overflow-y-auto pt-2 px-2 mr-1"},_hoisted_7$1=["onMouseover"],_hoisted_8$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_9$1={key:1,class:"text-center text-sm text-muted-foreground pt-4 pb-2"},_hoisted_10$1={key:2,class:"text-center text-xs text-muted2-foreground py-2"},_hoisted_11$1={key:3,class:"text-center text-xs text-muted2-foreground py-2"};function _sfc_render$L(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{class:"fusion-command",open:a.open,"onUpdate:open":e[3]||(e[3]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"fusion-command-content fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 bg-background border p-0 [&>button]:hidden overflow-hidden gap-y-0"},{default:withCtx(()=>[createVNode(a.DialogHeader,{class:"hidden"},{default:withCtx(()=>[createVNode(a.DialogTitle),createVNode(a.DialogDescription)]),_:1}),createBaseVNode("div",{ref:"contentEl",onKeydown:e[2]||(e[2]=(...c)=>a.handleKeydown&&a.handleKeydown(...c))},[createBaseVNode("div",_hoisted_1$i,[createVNode(a.Input,{class:"border-none relative focus-visible:ring-0 focus-visible:ring-offset-0 outline-none pl-10 pr-20",modelValue:a.inputText,"onUpdate:modelValue":e[0]||(e[0]=c=>a.inputText=c),placeholder:o.$t("kbView.fusionCommand.searchPlaceholder"),onInputCapture:a.handleInput,onCompositionend:a.handleInput},null,8,["modelValue","placeholder","onInputCapture","onCompositionend"]),createBaseVNode("div",_hoisted_2$9,[a.mode==="searchBlock"?(openBlock(),createBlock(a.Search,{key:0,class:"size-4"})):(openBlock(),createBlock(a.Command,{key:1,class:"size-4"}))]),createBaseVNode("div",_hoisted_3$8,[a.mode==="searchBlock"?(openBlock(),createBlock(a.Popover,{key:0},{default:withCtx(()=>[createVNode(a.PopoverTrigger,null,{default:withCtx(()=>[createVNode(a.SlidersHorizontal,{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer"})]),_:1}),createVNode(a.PopoverContent,{class:"w-40 p-2"},{default:withCtx(()=>[createCommentVNode(" TODO: \u6DFB\u52A0\u5141\u8BB8\u7684\u5757\u7C7B\u578B "),createBaseVNode("div",_hoisted_4$7,toDisplayString$1(o.$t("kbView.fusionCommand.allowedBlockTypes")),1),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.allowedBlockTypes,(c,d)=>(openBlock(),createElementBlock("div",{key:d,class:"flex items-center gap-x-1"},[createVNode(a.Checkbox,{checked:a.allowedBlockTypes[d],class:"size-3 mr-1","onUpdate:checked":u=>a.allowedBlockTypes[d]=u},null,8,["checked","onUpdate:checked"]),createBaseVNode("div",_hoisted_5$3,toDisplayString$1(a.BLOCK_TYPE_ZH_NAMES[d]),1)]))),128))]),_:1})]),_:1})):createCommentVNode("v-if",!0),createVNode(a.Delete,{class:"size-4 text-muted-foreground hover:text-foreground transition cursor-pointer",onClick:a.handleClear})])]),a.mode==="searchBlock"?(openBlock(),createElementBlock(Fragment$1,{key:0},[a.blockSearchResult.length>0?(openBlock(),createElementBlock("div",_hoisted_6$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.blockSearchResult,(c,d)=>(openBlock(),createElementBlock("div",{tabindex:"0",class:normalizeClass([{focus:a.focusIndex===d},"cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors [&.focus]:bg-accent [&.focus]:text-accent-foreground [&_.text-content]:cursor-default *:pointer-events-none"]),onMouseover:u=>!a.suppressMouseOver&&(a.focusIndex=d),onClick:e[1]||(e[1]=u=>a.gotoFocused())},[createCommentVNode(" as unknown is error? "),(openBlock(),createBlock(a.BlockContent,{key:c.id,readonly:!0,block:c,"highlight-terms":a.queryTerms},null,8,["block","highlight-terms"]))],42,_hoisted_7$1))),256))])):(openBlock(),createElementBlock("div",_hoisted_8$1,toDisplayString$1(o.$t("kbView.fusionCommand.noResults")),1))],64)):(openBlock(),createElementBlock(Fragment$1,{key:1},[a.blockSearchResult.length>0?(openBlock(),createBlock(a.ScrollArea,{key:0,"max-height":"60vh"},{default:withCtx(()=>e[4]||(e[4]=[createBaseVNode("div",{class:"px-2 py-2"},null,-1)])),_:1})):(openBlock(),createElementBlock("div",_hoisted_9$1,toDisplayString$1(o.$t("kbView.fusionCommand.noCommandResults")),1))],64)),a.mode==="searchBlock"?(openBlock(),createElementBlock("div",_hoisted_10$1,toDisplayString$1(o.$t("kbView.fusionCommand.searchHelp")),1)):(openBlock(),createElementBlock("div",_hoisted_11$1,toDisplayString$1(o.$t("kbView.fusionCommand.commandHelp")),1))],544)]),_:1})]),_:1},8,["open"])}const FusionCommand=_export_sfc(_sfc_main$L,[["render",_sfc_render$L],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/fusion-command/FusionCommand.vue"]]),BlockContentSchema_v1=z.discriminatedUnion("type",[z.object({type:z.literal("text"),docContent:z.any()}),z.object({type:z.literal("image"),path:z.string(),uploadStatus:z.union([z.literal("notUploaded"),z.literal("uploading"),z.literal("uploaded")]),align:z.union([z.literal("left"),z.literal("center")]),caption:z.string().optional(),width:z.number().optional()}),z.object({type:z.literal("code"),code:z.string(),lang:z.string().optional()}),z.object({type:z.literal("mathDisplay"),src:z.string()})]),NormalBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("normalBlock"),parent:z.union([z.string().uuid(),z.literal("null")]),childrenIds:z.array(z.string().uuid()),fold:z.boolean(),content:BlockContentSchema_v1,metadata:z.any()}),MirrorBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("mirrorBlock"),parent:z.string().uuid(),childrenIds:z.array(z.string().uuid()),fold:z.boolean(),src:z.string().uuid()}),VirtualBlockSchema_v1=z.object({id:z.string().uuid(),type:z.literal("virtualBlock"),parent:z.string().uuid(),childrenIds:z.union([z.array(z.string().uuid()),z.literal("null")]),fold:z.boolean(),src:z.string().uuid()}),BlockSchema_v1=z.discriminatedUnion("type",[NormalBlockSchema_v1,MirrorBlockSchema_v1,VirtualBlockSchema_v1]),BackupSchema_v1=z.object({blocks:z.array(BlockSchema_v1)}),parseV1Backup=o=>{const e=BackupSchema_v1.safeParse(JSON.parse(o));if(!e.success)return console.warn("Invalid backup",e.error),null;const n=a=>({id:a.id,type:a.type,fold:a.fold,parentId:a.parent,childrenIds:a.childrenIds=="null"?[]:a.childrenIds,...a.type==="normalBlock"?{content:a.content.type==="text"?[BLOCK_CONTENT_TYPES.TEXT,a.content.docContent]:a.content.type==="code"?[BLOCK_CONTENT_TYPES.CODE,a.content.code,a.content.lang]:a.content.type=="image"?[BLOCK_CONTENT_TYPES.IMAGE,a.content.path,a.content.align,a.content.caption,a.content.width]:a.content.type=="mathDisplay"?[BLOCK_CONTENT_TYPES.MATH,a.content.src]:void 0,metadata:a.metadata}:{},...a.type==="mirrorBlock"?{src:a.src}:{},...a.type==="virtualBlock"?{src:a.src,childrenCreated:a.childrenIds!="null"}:{}});return e.data.blocks.map(n).filter(a=>!!a)},importBlocks=(o,e)=>{const n=[],a=new Set(o.map(d=>d.id)),s=[];for(const d of o)a.has(d.parentId)||(d.parentId="root",n.push(d)),s.push(d);console.log(n);const l=e.createBlockTransaction({type:"ui"});s.reverse();for(const d of s)l.addBlock(d);const c=e.getBlock("root");c&&(l.updateBlock({...c,childrenIds:[...c.childrenIds,n[0].id]}),l.commit())},_sfc_main$K=defineComponent({__name:"Importer",props:{open:{type:Boolean},openModifiers:{}},emits:["update:open"],setup(o,{expose:e}){e();const n=ref(null),a=useModel(o,"open"),s=ref("idle"),{blocksManager:l}=BlocksContext.useContext(),c={file:n,open:a,status:s,blocksManager:l,handleFileChange:d=>{const u=d.target;u.files&&(n.value=u.files[0])},handleClick2:async()=>{if(s.value==="idle"){if(!n.value)throw new Error("IMPOSSIBLE");s.value="importing";try{const d=await n.value.text(),u=parseV1Backup(d);await importBlocks(u,l),s.value="success"}catch(d){console.error(d),s.value="error"}}else s.value==="error"?s.value="idle":s.value==="success"&&(a.value=!1)},get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},get DialogFooter(){return DialogFooter},get Button(){return Button},get Input(){return Input},get LoaderCircle(){return LoaderCircle},get Check(){return Check},get X(){return X}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$K(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{class:"importer",open:a.open,"onUpdate:open":e[1]||(e[1]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"max-w-[340px]"},{default:withCtx(()=>[createVNode(a.DialogHeader,null,{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>e[2]||(e[2]=[createTextVNode("\u5BFC\u5165")])),_:1})]),_:1}),createVNode(a.Input,{type:"file",accept:"application/json",multiple:!1,onChange:a.handleFileChange}),createVNode(a.DialogFooter,null,{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[0]||(e[0]=c=>a.open=!1)},{default:withCtx(()=>e[3]||(e[3]=[createTextVNode("\u53D6\u6D88")])),_:1}),createVNode(a.Button,{type:"submit",size:"sm",disabled:!a.file,onClick:a.handleClick2},{default:withCtx(()=>[a.status==="idle"?(openBlock(),createElementBlock(Fragment$1,{key:0},[createTextVNode(" \u5BFC\u5165 ")],64)):a.status==="importing"?(openBlock(),createElementBlock(Fragment$1,{key:1},[createVNode(a.LoaderCircle,{class:"size-4 mr-2 animate-spin"}),e[4]||(e[4]=createTextVNode(" \u6B63\u5728\u5BFC\u5165... "))],64)):a.status==="success"?(openBlock(),createElementBlock(Fragment$1,{key:2},[createVNode(a.Check,{class:"size-4 mr-2"}),e[5]||(e[5]=createTextVNode(" \u5BFC\u5165\u6210\u529F "))],64)):(openBlock(),createElementBlock(Fragment$1,{key:3},[createVNode(a.X,{class:"size-4 mr-2"}),e[6]||(e[6]=createTextVNode(" \u5BFC\u5165\u5931\u8D25 "))],64))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}const Importer=_export_sfc(_sfc_main$K,[["render",_sfc_render$K],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/Importer.vue"]]),AttachmentsManagerContext=createContext(()=>{const{dbBasePath:o,attachmentsBasePath:e,attachmentsFolderName:n}=PathsContext.useContext(),a=ref(!1),s=ref({}),l=ref("idle"),c=ref("idle"),d=ref([]),u=ref(null),f=ref("alphabet"),v=computed(()=>{let k=s.value;for(const x of d.value)if(x in k&&k[x].isDirectory)k=k[x].subDirents;else return{};return k}),b=computed(()=>Object.values(v.value).sort((k,x)=>k.isDirectory&&!x.isDirectory?-1:!k.isDirectory&&x.isDirectory?1:f.value==="alphabet"?k.name.localeCompare(x.name):0));return{open:a,files:s,refetchFiles:async(k,x)=>{l.value="fetching";const _=await fsLs({basePath:k??"",includeHidden:!0,recursive:!0,maxDepth:x??1e3});_.success?(s.value=_.data,l.value="success"):l.value="failed"},attachmentsFolderName:n,fetchFilesStatus:l,uploadStatus:c,currentPathSegments:d,dbBasePath:o,attachmentsBasePath:e,currentFiles:v,activeDirent:u,sortBy:f,orderedFiles:b}}),_sfc_main$J=defineComponent({__name:"CalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarCell(){return Wu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$J(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarCell,mergeProps({class:a.cn("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-view])]:bg-accent/50",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarCell=_export_sfc(_sfc_main$J,[["render",_sfc_render$J],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarCell.vue"]]),_sfc_main$I=defineComponent({__name:"CalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get buttonVariants(){return buttonVariants},get cn(){return cn},get CalendarCellTrigger(){return Zu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$I(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarCellTrigger,mergeProps({class:a.cn(a.buttonVariants({variant:"ghost"}),"h-9 w-9 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:bg-accent/50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarCellTrigger=_export_sfc(_sfc_main$I,[["render",_sfc_render$I],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarCellTrigger.vue"]]),_sfc_main$H=defineComponent({__name:"CalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarGrid(){return Hu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$H(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarGrid,mergeProps({class:a.cn("w-full border-collapse space-y-1",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarGrid=_export_sfc(_sfc_main$H,[["render",_sfc_render$H],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarGrid.vue"]]),_sfc_main$G=defineComponent({__name:"CalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get CalendarGridBody(){return Yu}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$G(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarGridBody,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const CalendarGridBody=_export_sfc(_sfc_main$G,[["render",_sfc_render$G],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarGridBody.vue"]]),_sfc_main$F=defineComponent({__name:"CalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get CalendarGridHead(){return qu}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$F(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarGridHead,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const CalendarGridHead=_export_sfc(_sfc_main$F,[["render",_sfc_render$F],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarGridHead.vue"]]),_sfc_main$E=defineComponent({__name:"CalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarGridRow(){return Xu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$E(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarGridRow,mergeProps({class:a.cn("flex",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarGridRow=_export_sfc(_sfc_main$E,[["render",_sfc_render$E],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarGridRow.vue"]]),_sfc_main$D=defineComponent({__name:"CalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarHeadCell(){return ju}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$D(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarHeadCell,mergeProps({class:a.cn("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarHeadCell=_export_sfc(_sfc_main$D,[["render",_sfc_render$D],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarHeadCell.vue"]]),_sfc_main$C=defineComponent({__name:"CalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarHeader(){return zu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$C(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarHeader,mergeProps({class:a.cn("relative flex w-full items-center justify-between pt-1",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const CalendarHeader=_export_sfc(_sfc_main$C,[["render",_sfc_render$C],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarHeader.vue"]]),_sfc_main$B=defineComponent({__name:"CalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get cn(){return cn},get CalendarHeading(){return Ku}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$B(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarHeading,mergeProps({class:a.cn("text-sm font-medium",a.props.class)},a.forwardedProps),{default:withCtx(c=>[renderSlot(o.$slots,"default",{headingValue:c.headingValue},()=>[createTextVNode(toDisplayString$1(c.headingValue),1)])]),_:3},16,["class"])}const CalendarHeading=_export_sfc(_sfc_main$B,[["render",_sfc_render$B],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarHeading.vue"]]),_sfc_main$A=defineComponent({__name:"CalendarNextButton",props:{step:{type:String,required:!1},nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get buttonVariants(){return buttonVariants},get cn(){return cn},get ChevronRight(){return ChevronRight},get CalendarNext(){return Uu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$A(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarNext,mergeProps({class:a.cn(a.buttonVariants({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default",{},()=>[createVNode(a.ChevronRight,{class:"h-4 w-4"})])]),_:3},16,["class"])}const CalendarNextButton=_export_sfc(_sfc_main$A,[["render",_sfc_render$A],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarNextButton.vue"]]),_sfc_main$z=defineComponent({__name:"CalendarPrevButton",props:{step:{type:String,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:c,...d}=n;return d}),s=At(a),l={props:n,delegatedProps:a,forwardedProps:s,get buttonVariants(){return buttonVariants},get cn(){return cn},get ChevronLeft(){return ChevronLeft},get CalendarPrev(){return Gu}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function _sfc_render$z(o,e,n,a,s,l){return openBlock(),createBlock(a.CalendarPrev,mergeProps({class:a.cn(a.buttonVariants({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.props.class)},a.forwardedProps),{default:withCtx(()=>[renderSlot(o.$slots,"default",{},()=>[createVNode(a.ChevronLeft,{class:"h-4 w-4"})])]),_:3},16,["class"])}const CalendarPrevButton=_export_sfc(_sfc_main$z,[["render",_sfc_render$z],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/calendar/CalendarPrevButton.vue"]]),DAILY_NOTE_TAG="day",DailyNoteContext=createContext(()=>{const{registerSettingGroup:o,registerSettingItem:e}=SettingsContext.useContext(),{getBacklinks:n}=IndexContext.useContext(),{blocksManager:a,blockEditor:s,synced:l}=BlocksContext.useContext(),{toast:c}=useToast(),{t:d}=useI18n(),u=useTaskQueue(),{getBlockTree:f}=BlockTreeContext.useContext(),{kbPrefix:v}=ServerInfoContext.useContext();watch(l,(L,U)=>{if(!U&&L){const j=getPmSchema({getBlockRef:a.getBlockRef});if(a.getBlock("day"))return;const oe=a.createBlockTransaction({type:"ui"});oe.addBlock({id:"day",type:"normalBlock",fold:!1,parentId:INTERNAL_BLOCK_PARENT_ID,childrenIds:[],content:plainTextToTextContent("Day",j),metadata:{}}),oe.commit()}},{immediate:!0}),o({key:"dailynote",label:{zh:"\u6BCF\u65E5\u7B14\u8BB0"}});const b="dailynote.defaultDateFormat",k=computed(()=>`${v.value}${b}`),x="YYYY-MM-DD",_=useLocalStorage2(k,x);e({id:b,groupKey:"dailynote",defaultValue:x,label:{zh:"\u9ED8\u8BA4\u65E5\u671F\u683C\u5F0F"},desc:{zh:"\u521B\u5EFA\u65B0\u7684\u6BCF\u65E5\u7B14\u8BB0\u65F6\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7684\u65E5\u671F\u683C\u5F0F"},value:useWritableComputedRef(_),componentType:{type:"textInput"}});const E="dailynote.parentBlockOfNewDailyNote",B=computed(()=>`${v.value}${E}`),M="",I=useLocalStorage2(B,M);e({id:E,groupKey:"dailynote",defaultValue:M,label:{zh:"\u6BCF\u65E5\u7B14\u8BB0\u7684\u5B58\u653E\u4F4D\u7F6E"},desc:{zh:"\u521B\u5EFA\u7684\u65B0\u6BCF\u65E5\u7B14\u8BB0\u5C06\u4F1A\u653E\u5230\u8FD9\u4E2A\u5757\u4E0B\uFF08\u4F5C\u4E3A\u5B50\u5757\uFF09"},value:useWritableComputedRef(I),componentType:{type:"blockIdInput"}});const F=()=>[...n(DAILY_NOTE_TAG,"tag")],V=()=>{const L=F(),U={};for(const j of L){const oe=a.getBlock(j);if(!oe)continue;const Y=dayjs(oe.ctext).format("YYYY-MM-DD");U[Y]=j}return U};return{defaultDateFormat:_,parentBlockOfNewDailyNote:I,getAllDailyNotes:F,getDateToDailyNote:V,createDailyNote:L=>{const U=f("main");if(!U)return;const j=V(),oe=dayjs(L).format("YYYY-MM-DD"),Y=getPmSchema({getBlockRef:a.getBlockRef});if(!j[oe]){if(!I.value){c({title:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.title"),description:d("kbView.dailynoteNavigator.dontKnowWhereToCreate.desc")});return}u.addTask(async()=>{const{newNormalBlockId:K}=s.insertNormalBlock({pos:{parentId:I.value,childIndex:"first"},content:contentNodesToPmNode([Y.text(oe+" "),Y.nodes.blockRef_v2.create({toBlockId:"day",tag:!0})])})??{};K&&(await U.nextUpdate(),U.focusBlock(K,{highlight:!0,expandIfFold:!0}))})}}}}),_sfc_main$y=defineComponent({__name:"DailynoteNavigator",setup(o,{expose:e}){e();const{getDateToDailyNote:n,createDailyNote:a}=DailyNoteContext.useContext(),{getBlockTree:s}=BlockTreeContext.useContext(),l=ref(!1),c=computed(()=>n()),d={getDateToDailyNote:n,createDailyNote:a,getBlockTree:s,open:l,dateToDailyNote:c,hasDailyNote:u=>{const f=dayjs(u).format("YYYY-MM-DD");return c.value[f]!==void 0},handleClickCell:u=>{const f=dayjs(u).format("YYYY-MM-DD"),v=c.value[f],b=s("main");b&&(v?b.focusBlock(v):a(u))},get CalendarCell(){return CalendarCell},get CalendarCellTrigger(){return CalendarCellTrigger},get CalendarGrid(){return CalendarGrid},get CalendarGridBody(){return CalendarGridBody},get CalendarGridHead(){return CalendarGridHead},get CalendarGridRow(){return CalendarGridRow},get CalendarHeadCell(){return CalendarHeadCell},get CalendarHeader(){return CalendarHeader},get CalendarHeading(){return CalendarHeading},get CalendarNextButton(){return CalendarNextButton},get CalendarPrevButton(){return CalendarPrevButton},get Popover(){return Popover},get PopoverContent(){return PopoverContent},get PopoverTrigger(){return PopoverTrigger},get CalendarRoot(){return Lu},get Tooltip(){return Tooltip},get TooltipContent(){return TooltipContent},get TooltipTrigger(){return TooltipTrigger}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),_hoisted_1$h={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"};function _sfc_render$y(o,e,n,a,s,l){return openBlock(),createBlock(a.Popover,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.PopoverTrigger,null,{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3}),createVNode(a.PopoverContent,{class:"p-0"},{default:withCtx(()=>[createVNode(a.CalendarRoot,{class:"p-3"},{default:withCtx(({grid:c,weekDays:d})=>[createVNode(a.CalendarHeader,null,{default:withCtx(()=>[createVNode(a.CalendarPrevButton),createVNode(a.CalendarHeading),createVNode(a.CalendarNextButton)]),_:1}),createBaseVNode("div",_hoisted_1$h,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(c,u=>(openBlock(),createBlock(a.CalendarGrid,{key:u.value.toString()},{default:withCtx(()=>[createVNode(a.CalendarGridHead,null,{default:withCtx(()=>[createVNode(a.CalendarGridRow,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(d,f=>(openBlock(),createBlock(a.CalendarHeadCell,{key:f},{default:withCtx(()=>[createTextVNode(toDisplayString$1(f),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),createVNode(a.CalendarGridBody,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(u.rows,(f,v)=>(openBlock(),createBlock(a.CalendarGridRow,{key:`weekDate-${v}`,class:"mt-2 w-full"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(f,b=>(openBlock(),createBlock(a.CalendarCell,{key:b.toString(),date:b},{default:withCtx(()=>[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.CalendarCellTrigger,{day:b,month:u.value,"data-disabled":a.hasDailyNote(b)?void 0:!0,onClickCapture:withModifiers(k=>a.handleClickCell(b.toDate()),["prevent","stop"])},null,8,["day","month","data-disabled","onClickCapture"])]),_:2},1024),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.hasDailyNote(b)?o.$t("kbView.dailynoteNavigator.gotoDailyNote"):o.$t("kbView.dailynoteNavigator.noDailyNote")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:3},8,["open"])}const DailynoteNavigator=_export_sfc(_sfc_main$y,[["render",_sfc_render$y],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/dailynote-navigator/DailynoteNavigator.vue"]]),_sfc_main$x=defineComponent({__name:"HeaderBarItem",props:{item:{type:Object,required:!0},iconOnly:{type:Boolean,required:!1},iconClass:{type:String,required:!1},labelClass:{type:String,required:!1}},setup(o,{expose:e}){e();const n={};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1$g={key:1,class:"flex items-center"};function _sfc_render$x(o,e,n,a,s,l){return"itemComp"in n.item?(openBlock(),createBlock(resolveDynamicComponent(n.item.itemComp),{key:0})):(openBlock(),createElementBlock("div",_hoisted_1$g,[(openBlock(),createBlock(resolveDynamicComponent(n.item.icon),{class:normalizeClass(["size-5 stroke-[1.8]",n.iconClass+` ${n.iconOnly?"":"mr-3"}`])},null,8,["class"])),n.iconOnly?createCommentVNode("v-if",!0):(openBlock(),createBlock(resolveDynamicComponent(n.item.label),{key:0,class:normalizeClass(n.labelClass)},null,8,["class"]))]))}const HeaderBarItem=_export_sfc(_sfc_main$x,[["render",_sfc_render$x],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/header-bar/HeaderBarItem.vue"]]),_sfc_main$w=defineComponent({__name:"ContextMenu",props:{dir:{type:String,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get ContextMenuRoot(){return om}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$w(o,e,n,a,s,l){return openBlock(),createBlock(a.ContextMenuRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const ContextMenu=_export_sfc(_sfc_main$w,[["render",_sfc_render$w],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/context-menu/ContextMenu.vue"]]),_sfc_main$v=defineComponent({__name:"ContextMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=computed(()=>{const{class:u,...f}=a;return f}),c=xe(l,s),d={props:a,emits:s,delegatedProps:l,forwarded:c,get cn(){return cn},get ContextMenuContent(){return rm$2},get ContextMenuPortal(){return sm}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function _sfc_render$v(o,e,n,a,s,l){return openBlock(),createBlock(a.ContextMenuPortal,null,{default:withCtx(()=>[createVNode(a.ContextMenuContent,mergeProps(a.forwarded,{class:a.cn("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const ContextMenuContent=_export_sfc(_sfc_main$v,[["render",_sfc_render$v],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/context-menu/ContextMenuContent.vue"]]),_sfc_main$u=defineComponent({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=At(n),s={props:n,forwardedProps:a,get ContextMenuTrigger(){return lm}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$u(o,e,n,a,s,l){return openBlock(),createBlock(a.ContextMenuTrigger,normalizeProps(guardReactiveProps(a.forwardedProps)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const ContextMenuTrigger=_export_sfc(_sfc_main$u,[["render",_sfc_render$u],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/context-menu/ContextMenuTrigger.vue"]]),_sfc_main$t=defineComponent({__name:"LeftButtons",setup(o,{expose:e}){e();const{currentIndex:n,historyItems:a,goPrev:s,goNext:l}=HistoryContext.useContext(),c=computed(()=>n.value<=0),d=computed(()=>n.value>=a.value.length),u={currentIndex:n,historyItems:a,goPrev:s,goNext:l,goPrevDisabled:c,goNextDisabled:d,get TooltipContent(){return TooltipContent},get TooltipProvider(){return TooltipProvider},get TooltipTrigger(){return TooltipTrigger},get Tooltip(){return Tooltip},get Button(){return Button},get ArrowLeft(){return ArrowLeft},get ArrowRight(){return ArrowRight},get ContextMenu(){return ContextMenu},get ContextMenuContent(){return ContextMenuContent},get ContextMenuTrigger(){return ContextMenuTrigger}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function _sfc_render$t(o,e,n,a,s,l){return openBlock(),createElementBlock(Fragment$1,null,[createVNode(a.ContextMenu,null,{default:withCtx(()=>[createVNode(a.TooltipProvider,null,{default:withCtx(()=>[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.ContextMenuTrigger,{asChild:""},{default:withCtx(()=>[createVNode(a.TooltipTrigger,{asChild:""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",disabled:a.goPrevDisabled,onClick:a.goPrev},{default:withCtx(()=>[createVNode(a.ArrowLeft,{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.history.goToPrev")),1)]),_:1})]),_:1})]),_:1}),createVNode(a.ContextMenuContent)]),_:1}),createVNode(a.ContextMenu,null,{default:withCtx(()=>[createVNode(a.TooltipProvider,null,{default:withCtx(()=>[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.ContextMenuTrigger,{asChild:""},{default:withCtx(()=>[createVNode(a.TooltipTrigger,{asChild:""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",disabled:a.goNextDisabled,onClick:a.goNext},{default:withCtx(()=>[createVNode(a.ArrowRight,{class:"size-5"})]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.history.goToNext")),1)]),_:1})]),_:1})]),_:1}),createVNode(a.ContextMenuContent)]),_:1})],64)}const LeftButtons=_export_sfc(_sfc_main$t,[["render",_sfc_render$t],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/header-bar/LeftButtons.vue"]]),_sfc_main$s=defineComponent({__name:"HeaderBar",setup(o,{expose:e}){e();const{sidePaneOpen:n,sidePaneDir:a,sidePaneWidth:s,enableSidePaneAnimation:l}=SidebarContext.useContext(),{open:c}=SettingsPanelContext.useContext(),{open:d}=AttachmentsManagerContext.useContext(),{theme:u,toggleTheme:f}=ThemeContext.useContext(),{focusModeEnabled:v}=FocusModeContext.useContext(),{timeMachineOpen:b}=TimeMachineContext.useContext(),{openFusionCommand:k}=FusionCommandContext.useContext(),{synced:x}=BlocksContext.useContext(),{mainRootBlockId:_}=MainTreeContext.useContext(),{logout:E}=ServerInfoContext.useContext(),{currKbInfo:B}=KbInfoContext.useContext(),M=ref(!1),{t:I}=useI18n(),{goPrev:F,goNext:V,canGoPrev:L,canGoNext:U}=HistoryContext.useContext(),{openKeybindings:j}=KeymapContext.useContext(),{toast:oe}=useToast(),Y=me=>{_.value=me},K=computed(()=>n.value&&a.value==="right"?`${s.value}px`:"0px"),W=computed(()=>l.value?"padding 500ms var(--tf), opacity 500ms var(--tf)":"opacity 500ms var(--tf)"),G=me=>{var ge;(ge=me.target)==null||ge.blur()},ce=[{icon:ArrowLeft,label:()=>createVNode(Fragment$1,null,[createTextVNode("\u540E\u9000")]),disabled:computed(()=>!L.value),onClick:F},{icon:ArrowRight,label:()=>createVNode(Fragment$1,null,[createTextVNode("\u524D\u8FDB")]),disabled:computed(()=>!U.value),onClick:V}],se={sidePaneOpen:n,sidePaneDir:a,sidePaneWidth:s,enableSidePaneAnimation:l,openSettingsPanel:c,openAttachmentsManager:d,theme:u,toggleTheme:f,focusModeEnabled:v,timeMachineOpen:b,openFusionCommand:k,synced:x,mainRootBlockId:_,logout:E,currKbInfo:B,openImporter:M,t:I,goPrev:F,goNext:V,canGoPrev:L,canGoNext:U,openKeybindings:j,toast:oe,handleClickPathSegment:Y,paddingRight:K,transition:W,preventFocus:G,leftButtons:ce,rightButtons:[{icon:()=>createVNode(DailynoteNavigator,null,{default:()=>[createVNode(CalendarDays,{class:"size-5 stroke-[1.8]"},null)]}),label:()=>I("kbView.headerBar.dailynoteNavigator"),onClick:()=>{}},{icon:()=>createVNode(Search,{class:"size-5 stroke-[1.8]"},null),label:()=>createVNode(Fragment$1,null,[I("kbView.headerBar.search")]),onClick:()=>k("")},{icon:()=>createVNode("div",null,[u.value==="dark"?createVNode(Moon,{class:"size-5 stroke-[1.8]"},null):createVNode(Sun,{class:"size-5 stroke-[1.8]"},null)]),label:()=>u.value==="dark"?I("kbView.headerBar.switchLightTheme"):I("kbView.headerBar.switchDarkTheme"),onClick:f},{icon:()=>createVNode(Bell,{class:"size-5 stroke-[1.8]"},null),label:()=>I("kbView.headerBar.notifications"),onClick:()=>{}},{icon:PanelRight,label:()=>n.value?I("kbView.headerBar.closeSidepane"):I("kbView.headerBar.openSidepane"),onClick:()=>n.value=!n.value,active:n}],moreOptions:[{icon:Download,label:()=>I("kbView.headerBar.export"),onClick:()=>{}},{icon:FolderInput,label:()=>I("kbView.headerBar.import"),onClick:()=>{console.log("open importer"),M.value=!0}},{icon:Focus,label:()=>v.value?I("kbView.headerBar.exitFocusMode"):I("kbView.headerBar.enterFocusMode"),onClick:()=>v.value=!v.value},{icon:FolderClosed,label:()=>I("kbView.headerBar.attachmentsManager"),onClick:()=>d.value=!0},{icon:History,label:()=>I("kbView.headerBar.timeMachine"),onClick:()=>b.value=!0},{icon:Settings$1,label:()=>I("kbView.headerBar.settings"),onClick:()=>c.value=!0},{icon:Keyboard,label:()=>I("kbView.headerBar.keybindings"),onClick:()=>j.value=!0},{icon:CircleHelp,label:()=>I("kbView.headerBar.help"),onClick:()=>{}},{icon:DatabaseBackup,label:()=>I("kbView.backup.createBackup"),onClick:async()=>{var Te;const me=(Te=B.value)==null?void 0:Te.location;if(!me)return;const ge=await backupKb({location:me});oe({title:ge.success?I("kbView.backup.createBackupSuccess"):I("kbView.backup.createBackupFailed")})}},{icon:LogOut,label:()=>I("kbView.headerBar.exit"),onClick:E}],Importer,get Button(){return Button},get DropdownMenu(){return DropdownMenu},get DropdownMenuCheckboxItem(){return DropdownMenuCheckboxItem},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuPortal(){return ih},get DropdownMenuSub(){return DropdownMenuSub},get DropdownMenuSubContent(){return DropdownMenuSubContent},get DropdownMenuSubTrigger(){return DropdownMenuSubTrigger},get DropdownMenuTrigger(){return DropdownMenuTrigger},get Tooltip(){return Tooltip},get TooltipContent(){return TooltipContent},get TooltipTrigger(){return TooltipTrigger},get Dot(){return Dot},get Globe(){return Globe},get MoreVertical(){return EllipsisVertical},BlockPath,HeaderBarItem,LeftButtons};return Object.defineProperty(se,"__isScriptSetup",{enumerable:!1,value:!0}),se}}),_hoisted_1$f={class:"left-part"},_hoisted_2$8={class:"left-buttons"},_hoisted_3$7={class:"right-part flex flex-row items-center"},_hoisted_4$6={class:"right-buttons"};function _sfc_render$s(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:"header-bar fixed top-0 left-0 flex flex-row justify-between items-center w-[calc(100vw-16px)] px-[8px] py-[10px] z-10 bg-background",style:normalizeStyle({paddingRight:a.paddingRight,transition:a.transition})},[createBaseVNode("div",_hoisted_1$f,[createCommentVNode(" \u5DE6\u8FB9\u7684\u6309\u94AE "),createBaseVNode("div",_hoisted_2$8,[createVNode(a.LeftButtons)])]),createVNode(a.BlockPath,{"block-id":a.mainRootBlockId,onClickPathSegment:a.handleClickPathSegment},null,8,["block-id"]),createBaseVNode("div",_hoisted_3$7,[createCommentVNode(" \u540C\u6B65\u72B6\u6001 "),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,null,{default:withCtx(()=>[createVNode(a.Dot,{class:normalizeClass(["size-8",a.synced?"stroke-green-500":"stroke-red-500"])},null,8,["class"])]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.t(`kbView.syncStatus.${a.synced?"synced":"disconnected"}`)),1)]),_:1})]),_:1}),createCommentVNode(" \u53F3\u8FB9\u7684\u6309\u94AE "),createBaseVNode("div",_hoisted_4$6,[(openBlock(),createElementBlock(Fragment$1,null,renderList(a.rightButtons,(c,d)=>createVNode(a.Tooltip,{key:d},{default:withCtx(()=>[createVNode(a.TooltipTrigger,{asChild:""},{default:withCtx(()=>{var u;return[createVNode(a.Button,{variant:"ghost",size:"icon",class:normalizeClass((u=c.active)!=null&&u.value?"bg-muted":"w-fit min-w-8"),onFocus:a.preventFocus,onClick:c.onClick},{default:withCtx(()=>[createVNode(a.HeaderBarItem,{item:c,iconOnly:""},null,8,["item"])]),_:2},1032,["class","onClick"])]}),_:2},1024),createVNode(a.TooltipContent,null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(c.label)))]),_:2},1024)]),_:2},1024)),64))]),createCommentVNode(" \u66F4\u591A\u9009\u9879 "),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,null,{default:withCtx(()=>[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{asChild:""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onFocus:a.preventFocus},{default:withCtx(()=>[createVNode(a.MoreVertical,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.t("kbView.headerBar.moreOptions")),1)]),_:1})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,{class:"mr-2"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(a.moreOptions,(c,d)=>createVNode(a.DropdownMenuItem,{key:d,onClick:c.onClick},{default:withCtx(()=>[createVNode(a.HeaderBarItem,{item:c,iconClass:"!size-4"},null,8,["item"])]),_:2},1032,["onClick"])),64)),createVNode(a.DropdownMenuSub,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubTrigger,null,{default:withCtx(()=>[createVNode(a.Globe,{class:"size-4 mr-3"}),createTextVNode(" "+toDisplayString$1(o.$t("languages.label")),1)]),_:1}),createVNode(a.DropdownMenuPortal,null,{default:withCtx(()=>[createVNode(a.DropdownMenuSubContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(o.$i18n.availableLocales,c=>(openBlock(),createBlock(a.DropdownMenuCheckboxItem,{key:c,checked:o.$i18n.locale===c,onClick:d=>o.$i18n.locale=c},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t(`languages.${c}`)),1)]),_:2},1032,["checked","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(a.Importer,{open:a.openImporter,"onUpdate:open":e[0]||(e[0]=c=>a.openImporter=c)},null,8,["open"])]))],4)}const HeaderBar=_export_sfc(_sfc_main$s,[["render",_sfc_render$s],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/header-bar/HeaderBar.vue"]]),_sfc_main$r=defineComponent({__name:"SidePane",setup(o,{expose:e}){e();const{sidePaneDir:n,sidePaneOpen:a,sidePaneWidth:s,sidePaneHeight:l,enableSidePaneAnimation:c,sidePaneBlockIds:d,addToSidePane:u}=SidebarContext.useContext(),{openRefSuggestions:f}=RefSuggestionsContext.useContext(),v=x=>{n.value==="right"?s.value=window.innerWidth-x.x:l.value=window.innerHeight-x.y},b=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),document.removeEventListener("mouseleave",b),c.value=!0},k={sidePaneDir:n,sidePaneOpen:a,sidePaneWidth:s,sidePaneHeight:l,enableSidePaneAnimation:c,sidePaneBlockIds:d,addToSidePane:u,openRefSuggestions:f,handleMouseMove:v,handleMouseUpOrLeave:b,handleMouseDown:x=>{x.preventDefault(),x.stopPropagation(),c.value=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",b),document.addEventListener("mouseleave",b)},openSearchAndAdd:x=>{f({x:x.clientX,y:x.clientY},(_,E)=>{_&&(u(_),E())})},get Button(){return Button},get Tooltip(){return Tooltip},get TooltipContent(){return TooltipContent},get TooltipTrigger(){return TooltipTrigger},get ChevronsRight(){return ChevronsRight},get Filter(){return Filter},get PanelBottom(){return PanelBottom},get PanelRight(){return PanelRight},get Plus(){return Plus},get SortDesc(){return ArrowDownWideNarrow},BlockTree};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),_hoisted_1$e={class:"right-pane z-20 overflow-hidden flex flex-col"},_hoisted_2$7={class:"z-20 flex items-center flex-shrink-0 justify-between py-[10px] px-[8px] mr-2"},_hoisted_3$6={key:0,class:"text-center flex-grow flex flex-col items-center justify-center"},_hoisted_4$5={class:"text-2xl font-semibold text-muted-foreground"},_hoisted_5$2={class:"text-sm mt-2 text-muted-foreground whitespace-pre-wrap leading-6"};function _sfc_render$r(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",null,[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onClick:e[0]||(e[0]=c=>a.sidePaneOpen=!1)},{default:withCtx(()=>[createVNode(a.ChevronsRight,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.collapse")),1)]),_:1})]),_:1}),a.sidePaneDir==="bottom"?(openBlock(),createBlock(a.Tooltip,{key:0},{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onClick:e[1]||(e[1]=c=>a.sidePaneDir="right")},{default:withCtx(()=>[createVNode(a.PanelRight,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.moveToRight")),1)]),_:1})]),_:1})):createCommentVNode("v-if",!0),a.sidePaneDir==="right"?(openBlock(),createBlock(a.Tooltip,{key:1},{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onClick:e[2]||(e[2]=c=>a.sidePaneDir="bottom")},{default:withCtx(()=>[createVNode(a.PanelBottom,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.moveToBottom")),1)]),_:1})]),_:1})):createCommentVNode("v-if",!0)]),createBaseVNode("div",null,[createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon",onClick:a.openSearchAndAdd},{default:withCtx(()=>[createVNode(a.Plus,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.searchAndAdd")),1)]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon"},{default:withCtx(()=>[createVNode(a.SortDesc,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.setSort")),1)]),_:1})]),_:1}),createVNode(a.Tooltip,null,{default:withCtx(()=>[createVNode(a.TooltipTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost",size:"icon"},{default:withCtx(()=>[createVNode(a.Filter,{class:"size-5 stroke-[1.8]"})]),_:1})]),_:1}),createVNode(a.TooltipContent,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.sidePane.setFilter")),1)]),_:1})]),_:1})])]),a.sidePaneBlockIds.length===0?(openBlock(),createElementBlock("div",_hoisted_3$6,[createBaseVNode("p",_hoisted_4$5,toDisplayString$1(o.$t("kbView.sidePane.empty")),1),createBaseVNode("p",_hoisted_5$2,toDisplayString$1(o.$t("kbView.sidePane.emptyTip")),1)])):(openBlock(),createBlock(a.BlockTree,{key:1,id:"side-pane",class:"h-full -mt-4","root-block-ids":a.sidePaneBlockIds,"root-block-level":0,"add-side-pane-header":!0,"enlarge-root-block":!1,"show-backlinks":!1,"show-potential-links":!1,"padding-top":0},null,8,["root-block-ids"])),createCommentVNode(" drag handler "),a.sidePaneDir==="bottom"?(openBlock(),createElementBlock("div",{key:2,class:"absolute top-0 z-30 left-0 w-full h-1 cursor-row-resize",onMousedown:a.handleMouseDown},null,32)):createCommentVNode("v-if",!0),a.sidePaneDir==="right"?(openBlock(),createElementBlock("div",{key:3,class:"absolute top-0 z-30 left-0 w-1 h-full cursor-col-resize",onMousedown:a.handleMouseDown},null,32)):createCommentVNode("v-if",!0)])}const SidePane=_export_sfc(_sfc_main$r,[["render",_sfc_render$r],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/side-pane/SidePane.vue"]]),_sfc_main$q=defineComponent({__name:"Collapsible",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get CollapsibleRoot(){return ji}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$q(o,e,n,a,s,l){return openBlock(),createBlock(a.CollapsibleRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(({open:c})=>[renderSlot(o.$slots,"default",{open:c})]),_:3},16)}const Collapsible=_export_sfc(_sfc_main$q,[["render",_sfc_render$q],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/collapsible/Collapsible.vue"]]),_sfc_main$p=defineComponent({__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get CollapsibleContent(){return qi}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$p(o,e,n,a,s,l){return openBlock(),createBlock(a.CollapsibleContent,mergeProps(a.props,{class:"overflow-hidden transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const CollapsibleContent=_export_sfc(_sfc_main$p,[["render",_sfc_render$p],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/collapsible/CollapsibleContent.vue"]]),_sfc_main$o=defineComponent({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get CollapsibleTrigger(){return Ui}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$o(o,e,n,a,s,l){return openBlock(),createBlock(a.CollapsibleTrigger,normalizeProps(guardReactiveProps(a.props)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const CollapsibleTrigger=_export_sfc(_sfc_main$o,[["render",_sfc_render$o],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/collapsible/CollapsibleTrigger.vue"]]),_sfc_main$n=defineComponent({__name:"FileTreeItem",props:{dirent:{type:null,required:!0},path:{type:String,required:!0}},setup(o,{expose:e}){e();const n=ref(!1),{activeDirent:a}=AttachmentsManagerContext.useContext(),s={open:n,activeDirent:a,handleClickItem:(l,c)=>{a.value={path:c,isDirectory:l.isDirectory,isPreview:!1}},get Collapsible(){return Collapsible},get CollapsibleContent(){return CollapsibleContent},get CollapsibleTrigger(){return CollapsibleTrigger},get ChevronDown(){return ChevronDown},get File(){return File},get joinPathSegments(){return joinPathSegments}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),_hoisted_1$d=["data-active"],_hoisted_2$6={class:"whitespace-nowrap overflow-hidden text-ellipsis"};function _sfc_render$n(o,e,n,a,s,l){const c=resolveComponent("FileTreeItem",!0);return openBlock(),createBlock(a.Collapsible,{open:a.open,"onUpdate:open":e[1]||(e[1]=d=>a.open=d)},{default:withCtx(()=>[createVNode(a.CollapsibleTrigger,{"as-child":""},{default:withCtx(()=>{var d;return[createBaseVNode("div",{"data-active":n.path===((d=a.activeDirent)==null?void 0:d.path),onClick:e[0]||(e[0]=u=>a.handleClickItem(n.dirent,n.path)),class:"flex items-center px-2 py-1 my-0.5 cursor-default select-none hover:bg-muted rounded-sm text-sm data-[active=true]:bg-muted"},[n.dirent.isDirectory?(openBlock(),createBlock(a.ChevronDown,{key:0,class:normalizeClass(["size-4 mr-2 flex-shrink-0 transition-transform duration-50",{"-rotate-90":!a.open}])},null,8,["class"])):(openBlock(),createBlock(a.File,{key:1,class:"size-4 mr-2 flex-shrink-0"})),createBaseVNode("span",_hoisted_2$6,toDisplayString$1(n.dirent.name),1)],8,_hoisted_1$d)]}),_:1}),n.dirent.isDirectory?(openBlock(),createBlock(a.CollapsibleContent,{key:0,class:"ml-6"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(n.dirent.subDirents,d=>(openBlock(),createBlock(c,{key:d.name,dirent:d,path:a.joinPathSegments([n.path,d.name])},null,8,["dirent","path"]))),128))]),_:1})):createCommentVNode("v-if",!0)]),_:1},8,["open"])}const FileTreeItem=_export_sfc(_sfc_main$n,[["render",_sfc_render$n],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/attachments-mgr/FileTreeItem.vue"]]),_sfc_main$m=defineComponent({__name:"FileTree",setup(o,{expose:e}){e();const{attachmentsFolderName:n,attachmentsBasePath:a,currentPathSegments:s,orderedFiles:l,refetchFiles:c}=AttachmentsManagerContext.useContext(),d=ref("idle");async function u(){d.value="loading",await Promise.all([c(),timeout(1e3)]),d.value="updated",await timeout(1e3),d.value="idle"}const f={attachmentsFolderName:n,attachmentsBasePath:a,currentPathSegments:s,orderedFiles:l,refetchFiles:c,status:d,handleRefetchFiles:u,get Button(){return Button},get Upload(){return Upload},get RefreshCw(){return RefreshCw},get Breadcrumb(){return Breadcrumb},get BreadcrumbItem(){return BreadcrumbItem},get BreadcrumbList(){return BreadcrumbList},get BreadcrumbSeparator(){return BreadcrumbSeparator},get joinPathSegments(){return joinPathSegments},FileTreeItem};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),_hoisted_1$c={class:"flex-1 overflow-auto pr-1 mb-2"},_hoisted_2$5={key:0,class:"text-center text-sm text-muted-foreground py-8"},_hoisted_3$5={class:"mr-1 flex gap-x-1"};function _sfc_render$m(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(["w-[250px] bg-sidebar-bg border-r p-2 pr-1 flex flex-col justify-between text-sidebar-fg",{"opacity-50":a.status==="loading"}])},[createCommentVNode(" \u5F53\u524D\u8DEF\u5F84 "),createVNode(a.Breadcrumb,{class:"bg-sidebar-accent w-fit px-2 py-1.5 mr-1 mb-2 rounded overflow-hidden"},{default:withCtx(()=>[createVNode(a.BreadcrumbList,{class:"flex-nowrap w-fit gap-1 sm:gap-1 overflow-hidden"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList([a.attachmentsFolderName,...a.currentPathSegments],(c,d)=>(openBlock(),createElementBlock(Fragment$1,{key:c},[createVNode(a.BreadcrumbItem,{class:"cursor-pointer select-none hover:text-sidebar-fg transition-colors duration-50"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c),1)]),_:2},1024),d!==a.currentPathSegments.length?(openBlock(),createBlock(a.BreadcrumbSeparator,{key:0,class:"size-3"})):createCommentVNode("v-if",!0)],64))),128))]),_:1})]),_:1}),createCommentVNode(" \u5F53\u524D\u8DEF\u5F84\u4E0B\u7684\u6240\u6709\u6587\u4EF6 "),createBaseVNode("div",_hoisted_1$c,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(a.orderedFiles,c=>(openBlock(),createBlock(a.FileTreeItem,{key:c.name,dirent:c,path:a.joinPathSegments([a.attachmentsBasePath,...a.currentPathSegments,c.name])},null,8,["dirent","path"]))),128)),Object.keys(a.orderedFiles).length===0?(openBlock(),createElementBlock("div",_hoisted_2$5,toDisplayString$1(o.$t("kbView.attachmentsManager.noFiles")),1)):createCommentVNode("v-if",!0)]),createCommentVNode(" \u4E0A\u4F20\u6309\u94AE "),createBaseVNode("div",_hoisted_3$5,[createVNode(a.Button,{variant:"outline",class:"size-9 flex-shrink-0 p-0",disabled:a.status==="loading",onClick:a.handleRefetchFiles},{default:withCtx(()=>[createVNode(a.RefreshCw,{class:normalizeClass(["size-4",{"animate-spin":a.status==="loading"}])},null,8,["class"])]),_:1},8,["disabled"]),createVNode(a.Button,{variant:"outline",size:"sm",class:"w-full"},{default:withCtx(()=>[createVNode(a.Upload,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.upload")),1)]),_:1})])],2)}const FileTree=_export_sfc(_sfc_main$m,[["render",_sfc_render$m],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/attachments-mgr/FileTree.vue"]]),_sfc_main$l={},_hoisted_1$b={t:"1730332855813",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2264",width:"200",height:"200"};function _sfc_render$l(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$b,e[0]||(e[0]=[createBaseVNode("path",{d:"M912 217.142857q16 16 27.428571 43.428571t11.428571 50.285714l0 658.285714q0 22.857143-16 38.857143t-38.857143 16l-768 0q-22.857143 0-38.857143-16t-16-38.857143l0-914.285714q0-22.857143 16-38.857143t38.857143-16l512 0q22.857143 0 50.285714 11.428571t43.428571 27.428571zm-253.714286-139.428571l0 214.857143 214.857143 0q-5.714286-16.571429-12.571429-23.428571l-178.857143-178.857143q-6.857143-6.857143-23.428571-12.571429zm219.428571 873.142857l0-585.142857-237.714286 0q-22.857143 0-38.857143-16t-16-38.857143l0-237.714286-438.857143 0 0 877.714286 731.428571 0zm-450.285714-465.142857q11.428571 4.571429 11.428571 17.142857l0 310.857143q0 12.571429-11.428571 17.142857-4.571429 1.142857-6.857143 1.142857-6.857143 0-13.142857-5.142857l-94.857143-95.428571-74.857143 0q-8 0-13.142857-5.142857t-5.142857-13.142857l0-109.714286q0-8 5.142857-13.142857t13.142857-5.142857l74.857143 0 94.857143-95.428571q9.142857-8.571429 20-4zm238.285714 393.714286q17.714286 0 28.571429-13.714286 73.714286-90.857143 73.714286-207.428571t-73.714286-207.428571q-9.142857-12-24.571429-13.714286t-26.857143 8q-12 9.714286-13.428571 24.857143t8.285714 27.142857q57.142857 70.285714 57.142857 161.142857t-57.142857 161.142857q-9.714286 12-8.285714 27.142857t13.428571 24.285714q10.285714 8.571429 22.857143 8.571429zm-120.571429-84.571429q15.428571 0 26.857143-11.428571 49.714286-53.142857 49.714286-125.142857t-49.714286-125.142857q-10.285714-10.857143-25.714286-11.428571t-26.285714 9.714286-11.428571 25.428571 10.285714 26.571429q29.714286 32.571429 29.714286 74.857143t-29.714286 74.857143q-10.857143 11.428571-10.285714 26.571429t11.428571 25.428571q11.428571 9.714286 25.142857 9.714286z",fill:"currentColor","p-id":"2265"},null,-1)]))}const Audio=_export_sfc(_sfc_main$l,[["render",_sfc_render$l],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/icons/Audio.vue"]]),_sfc_main$k={},_hoisted_1$a={t:"1730332795021",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1970",width:"200",height:"200"};function _sfc_render$k(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$a,e[0]||(e[0]=[createBaseVNode("path",{d:"M917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0 0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0 0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512zM256 64l128 0 0 64-128 0 0-64zM384 128l128 0 0 64-128 0 0-64zM256 192l128 0 0 64-128 0 0-64zM384 256l128 0 0 64-128 0 0-64zM256 320l128 0 0 64-128 0 0-64zM384 384l128 0 0 64-128 0 0-64zM256 448l128 0 0 64-128 0 0-64zM384 512l128 0 0 64-128 0 0-64zM256 847.99488c0 26.39872 21.6064 48.00512 48.00512 48.00512l160.01024 0c26.39872 0 48.00512-21.6064 48.00512-48.00512l0-160.01024c0-26.39872-21.6064-48.00512-48.00512-48.00512l-79.99488 0 0-64-128 0 0 271.99488zM448 768l0 64-128 0 0-64 128 0z",fill:"currentColor","p-id":"1971"},null,-1)]))}const Compressed=_export_sfc(_sfc_main$k,[["render",_sfc_render$k],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/icons/Compressed.vue"]]),_sfc_main$j={},_hoisted_1$9={t:"1730332732861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1676",width:"200",height:"200"};function _sfc_render$j(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$9,e[0]||(e[0]=[createBaseVNode("path",{d:"M832 896l-640 0 0-128 192-320 263.00416 320 184.99584-128 0 256zM832 480.01024c0 53.02272-42.98752 96.01024-96.01024 96.01024s-96.01024-42.98752-96.01024-96.01024 42.98752-96.01024 96.01024-96.01024c53.02272 0 96.01024 42.98752 96.01024 96.01024zM917.8112 229.0688c-22.2208-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.336 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1677"},null,-1)]))}const Image=_export_sfc(_sfc_main$j,[["render",_sfc_render$j],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/icons/Image.vue"]]),_sfc_main$i={},_hoisted_1$8={t:"1730332828563",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2117",width:"200",height:"200"};function _sfc_render$i(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$8,e[0]||(e[0]=[createBaseVNode("path",{d:"M842.01472 589.47584c-13.63968-13.45536-43.90912-20.56192-89.96864-21.17632-31.17056-0.34816-68.7104 2.39616-108.17536 7.92576-17.67424-10.19904-35.90144-21.2992-50.19648-34.65216-38.46144-35.92192-70.57408-85.77024-90.58304-140.5952 1.31072-5.12 2.41664-9.6256 3.44064-14.21312 0 0 21.66784-123.06432 15.93344-164.6592-0.79872-5.71392-1.26976-7.35232-2.80576-11.79648l-1.88416-4.83328c-5.89824-13.59872-17.44896-27.99616-35.57376-27.21792l-10.91584-0.34816c-20.19328 0-36.6592 10.32192-40.98048 25.76384-13.14816 48.4352 0.4096 120.89344 24.9856 214.7328l-6.28736 15.27808c-17.59232 42.88512-39.6288 86.05696-59.0848 124.14976l-2.51904 4.95616c-20.45952 40.0384-39.03488 74.0352-55.84896 102.83008l-17.36704 9.19552c-1.26976 0.67584-31.04768 16.42496-38.03136 20.64384-59.24864 35.38944-98.52928 75.55072-105.04192 107.4176-2.06848 10.17856-0.53248 23.18336 10.01472 29.20448l16.81408 8.45824c7.29088 3.64544 14.97088 5.50912 22.85568 5.50912 42.20928 0 91.19744-52.57216 158.69952-170.37312 77.9264-25.37472 166.64576-46.44864 244.40832-58.08128 59.24864 33.36192 132.13696 56.54528 178.13504 56.54528 8.17152 0 15.21664-0.77824 20.93056-2.29376 8.82688-2.33472 16.26112-7.3728 20.7872-14.19264 8.92928-13.43488 10.73152-31.92832 8.31488-50.87232-0.7168-5.632-5.20192-12.57472-10.07616-17.32608zM211.64032 814.03904c7.70048-21.03296 38.15424-62.64832 83.21024-99.55328 2.82624-2.29376 9.80992-8.82688 16.19968-14.90944-47.104 75.12064-78.6432 105.0624-99.40992 114.46272zM478.43328 199.68c13.55776 0 21.27872 34.2016 21.93408 66.2528s-6.8608 54.55872-16.15872 71.20896c-7.70048-24.65792-11.42784-63.50848-11.42784-88.90368 0 0-0.57344-48.55808 5.65248-48.55808l0 0zM398.848 637.50144c9.44128-16.91648 19.29216-34.75456 29.32736-53.67808 24.49408-46.32576 39.95648-82.55488 51.48672-112.35328 22.91712 41.6768 51.44576 77.12768 84.992 105.51296 4.17792 3.54304 8.62208 7.10656 13.27104 10.6496-68.21888 13.49632-127.16032 29.9008-179.07712 49.8688l0 0zM828.90752 633.6512c-4.15744 2.60096-16.05632 4.096-23.71584 4.096-24.69888 0-55.27552-11.28448-98.11968-29.67552 16.46592-1.20832 31.55968-1.8432 45.09696-1.8432 24.7808 0 32.11264-0.1024 56.34048 6.06208s24.53504 18.7392 20.3776 21.34016l0 0zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"2118"},null,-1)]))}const Pdf=_export_sfc(_sfc_main$i,[["render",_sfc_render$i],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/icons/Pdf.vue"]]),_sfc_main$h={},_hoisted_1$7={t:"1730332771789",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1823",width:"200",height:"200"};function _sfc_render$h(o,e){return openBlock(),createElementBlock("svg",_hoisted_1$7,e[0]||(e[0]=[createBaseVNode("path",{d:"M639.77472 475.89376l44.21632 0-51.01568 226.18112-66.31424-318.01344-106.55744 0-77.1072 318.01344-57.81504-318.01344-111.39072 0 113.09056 511.87712 108.83072 0 76.288-302.71488 68.25984 302.71488 100.33152 0 129.61792-511.87712-170.45504 0 0 91.83232zM917.8112 229.0688c-22.20032-30.28992-53.16608-65.69984-87.18336-99.69664s-69.40672-64.96256-99.69664-87.18336c-51.56864-37.82656-76.5952-42.1888-90.9312-42.1888l-496.00512 0c-44.11392 0-79.99488 35.88096-79.99488 79.99488l0 864.01024c0 44.11392 35.88096 79.99488 79.99488 79.99488l736.01024 0c44.11392 0 79.99488-35.88096 79.99488-79.99488l0-624.00512c0-14.336-4.36224-39.34208-42.1888-90.9312l0 0zM785.36704 174.63296c30.69952 30.69952 54.80448 58.38848 72.58112 81.36704l-153.94816 0 0-153.94816c22.97856 17.77664 50.688 41.8816 81.36704 72.58112l0 0zM896 944.00512c0 8.66304-7.33184 15.99488-15.99488 15.99488l-736.01024 0c-8.66304 0-15.99488-7.33184-15.99488-15.99488l0-864.01024c0-8.66304 7.33184-15.99488 15.99488-15.99488 0 0 495.96416 0 496.00512 0l0 224.01024c0 17.67424 14.31552 32.01024 32.01024 32.01024l224.01024 0 0 624.00512z",fill:"currentColor","p-id":"1824"},null,-1)]))}const Word=_export_sfc(_sfc_main$h,[["render",_sfc_render$h],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/icons/Word.vue"]]),_sfc_main$g=defineComponent({__name:"ImagePreviewPane",props:{image:{type:Object,required:!0}},emits:["close","insertImage","download","reference","delete"],setup(o,{expose:e,emit:n}){e();const a={props:o,emit:n,get Button(){return Button},get Loader2(){return LoaderCircle},get X(){return X},get ImageIcon(){return Image$1},get MoreHorizontal(){return Ellipsis},get Download(){return Download},get Link2(){return Link2},get Trash2(){return Trash2},get DropdownMenu(){return DropdownMenu},get DropdownMenuTrigger(){return DropdownMenuTrigger},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),_hoisted_1$6={key:0,class:"flex items-center"},_hoisted_2$4={key:1,class:"flex flex-col items-center gap-y-4"},_hoisted_3$4=["src"],_hoisted_4$4={class:"flex items-center gap-x-2"},_hoisted_5$1={key:2};function _sfc_render$g(o,e,n,a,s,l){return n.image.status==="fetching"?(openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode(a.Loader2,{class:"size-4 mr-2 animate-spin"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.fetchingImage")),1)])):n.image.status==="synced"?(openBlock(),createElementBlock("div",_hoisted_2$4,[createBaseVNode("img",{src:n.image.url,class:"max-w-full max-h-full"},null,8,_hoisted_3$4),createBaseVNode("div",_hoisted_4$4,[createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[0]||(e[0]=c=>o.$emit("close"))},{default:withCtx(()=>[createVNode(a.X,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.closePreview")),1)]),_:1}),createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[1]||(e[1]=c=>o.$emit("insertImage"))},{default:withCtx(()=>[createVNode(a.ImageIcon,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(a.MoreHorizontal,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,{onClick:e[2]||(e[2]=c=>o.$emit("download"))},{default:withCtx(()=>[createVNode(a.Download,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(a.DropdownMenuItem,{onClick:e[3]||(e[3]=c=>o.$emit("reference"))},{default:withCtx(()=>[createVNode(a.Link2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(a.DropdownMenuItem,{class:"!text-red-500",onClick:e[4]||(e[4]=c=>o.$emit("delete"))},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})])])):n.image.status==="fetchError"?(openBlock(),createElementBlock("div",_hoisted_5$1,toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.fetchImageError")),1)):createCommentVNode("v-if",!0)}const ImagePreviewPane=_export_sfc(_sfc_main$g,[["render",_sfc_render$g],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/attachments-mgr/ImagePreviewPane.vue"]]),imageExtnames=["png","jpg","jpeg","gif","bmp","webp"],audioExtnames=["mp3","wav","m4a"],videoExtnames=["mp4","webm","ogg"];function isImage(o){return imageExtnames.includes(o)}function isAudio(o){return audioExtnames.includes(o)}function isVideo(o){return videoExtnames.includes(o)}const _sfc_main$f=defineComponent({__name:"PreviewPane",setup(o,{expose:e}){e();const{blockEditor:n}=BlocksContext.useContext(),a=useTaskQueue(),{serverUrl:s}=ServerInfoContext.useContext(),{useImage:l}=ImagesContext.useContext(),{attachmentsBasePath:c,activeDirent:d,open:u}=AttachmentsManagerContext.useContext(),{lastFocusedBlockTree:f,lastFocusedDiId:v}=LastFocusContext.useContext(),{blocksManager:b}=BlocksContext.useContext(),k=computed(()=>{const M=c.value;if(!d.value)return null;const I=d.value.path,F=getSeperator(),V=d.value.isDirectory?void 0:d.value.path.split(".").pop(),L=d.value.isDirectory?void 0:I.split(F).pop();return{isDirectory:d.value.isDirectory,isPreview:d.value.isPreview,absolutePath:I,relativePath:I.slice(M.length+1),extname:V,fileNameAndExtname:L,isImage:V&&isImage(V),isAudio:V&&isAudio(V),isVideo:V&&isVideo(V)}}),x=l(()=>{var M;return(M=k.value)!=null&&M.isImage?k.value.relativePath:null}),_=computed(()=>{if(!d.value)return null;if(d.value.isDirectory)return Folder;const M=d.value.path.split(".").pop();return M==="mp3"||M==="wav"||M==="m4a"?Audio:M==="zip"||M==="rar"||M==="7z"?Compressed:M==="png"||M==="jpg"||M==="jpeg"||M==="gif"||M==="bmp"||M==="webp"?Image:M==="pdf"?Pdf:M==="doc"||M==="docx"?Word:File}),E=computed(()=>!k.value||!k.value.extname?!1:k.value.isAudio||k.value.isVideo||k.value.isImage||["pdf","doc","docx"].includes(k.value.extname)),B={blockEditor:n,tasakQueue:a,serverUrl:s,useImage:l,attachmentsBasePath:c,activeDirent:d,open:u,lastFocusedBlockTree:f,lastFocusedDiId:v,blocksManager:b,activePathInfo:k,previewingImage:x,icon:_,canPreview:E,handleTogglePreview:()=>{d.value&&(d.value.isPreview=!d.value.isPreview)},handleInsertImage:M=>{const I=f.value,F=v.value;if(!I||!F)return;const V=I.getDi(F),L=I.getEditorView(F);if(!V||!DI_FILTERS.isBlockDi(V)||!(L instanceof EditorView$1||L instanceof EditorView))return;const U=V.block.id;if(!U)return;const j=[BLOCK_CONTENT_TYPES.IMAGE,M,"left",null,null,[]],oe=L instanceof EditorView$1&&L.state.doc.content.size===0,Y=L instanceof EditorView&&L.state.doc.length===0;oe||Y?a.addTask(()=>{n.changeBlockContent({blockId:U,content:j}),u.value=!1}):a.addTask(()=>{const K={baseBlockId:U,offset:1};n.insertNormalBlock({pos:K,content:j})})},handleDownload:async M=>{const I=await fsGetAttachmentSignedUrl({path:M});if(!I.success)return;const F=I.data.signedUrl,V=document.createElement("a");V.href=`http://${s.value}${F}`,V.download=M,V.click()},handleDelete:async M=>{},handleInsertPathRef:M=>{const I=f.value,F=v.value;if(!I||!F)return;const V=I.getEditorView(F);if(!M||!(V instanceof EditorView$1))return;const L={getBlockRef:b.getBlockRef},U=getPmSchema(L).nodes.pathRef.create({path:M}),j=V.state.tr.replaceSelectionWith(U);V.dispatch(j)},get Eye(){return Eye},get Download(){return Download},get Link2(){return Link2},get ImageIcon(){return Image$1},get MoreHorizontal(){return Ellipsis},get Trash2(){return Trash2},get Info(){return Info},get Button(){return Button},get DropdownMenu(){return DropdownMenu},get DropdownMenuTrigger(){return DropdownMenuTrigger},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},ImagePreviewPane};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),_hoisted_1$5={class:"flex items-center justify-center flex-grow"},_hoisted_2$3={key:0,class:"flex flex-col items-center text-muted-foreground gap-y-6"},_hoisted_3$3={class:"text-sm break-all px-8"},_hoisted_4$3={class:"flex items-center justify-center flex-wrap gap-2"};function _sfc_render$f(o,e,n,a,s,l){return openBlock(),createElementBlock("div",_hoisted_1$5,[a.activeDirent?(openBlock(),createElementBlock("div",_hoisted_2$3,[createCommentVNode(" Preview "),a.activePathInfo&&a.activePathInfo.isPreview?(openBlock(),createElementBlock(Fragment$1,{key:0},[createCommentVNode(" Image preview "),a.activePathInfo.isImage&&a.previewingImage?(openBlock(),createBlock(a.ImagePreviewPane,{key:0,image:a.previewingImage,onClose:a.handleTogglePreview,onInsertImage:e[0]||(e[0]=c=>a.handleInsertImage(a.activePathInfo.relativePath)),onDownload:e[1]||(e[1]=c=>a.handleDownload(a.activePathInfo.absolutePath)),onReference:e[2]||(e[2]=c=>a.handleInsertPathRef(a.activePathInfo.relativePath)),onDelete:e[3]||(e[3]=c=>a.handleDelete(a.activePathInfo.absolutePath))},null,8,["image"])):createCommentVNode("v-if",!0)],64)):a.activePathInfo?(openBlock(),createElementBlock(Fragment$1,{key:1},[createCommentVNode(" Dirent basic info and actions "),(openBlock(),createBlock(resolveDynamicComponent(a.icon),{class:"size-20"})),createBaseVNode("div",_hoisted_3$3,toDisplayString$1(a.activePathInfo.fileNameAndExtname),1),createBaseVNode("div",_hoisted_4$3,[createCommentVNode(" For image, only show preview and insert image button, hide other buttons in dropdown "),a.activePathInfo.isImage?(openBlock(),createElementBlock(Fragment$1,{key:0},[createVNode(a.Button,{variant:"outline",size:"sm",onClick:a.handleTogglePreview},{default:withCtx(()=>[createVNode(a.Eye,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[4]||(e[4]=c=>a.handleInsertImage(a.activePathInfo.relativePath))},{default:withCtx(()=>[createVNode(a.ImageIcon,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.insertImage")),1)]),_:1}),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(a.MoreHorizontal,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Info,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(a.DropdownMenuItem,{onClick:e[5]||(e[5]=c=>a.handleDownload(a.activeDirent.path))},{default:withCtx(()=>[createVNode(a.Download,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Link2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(a.DropdownMenuItem,{class:"!text-red-500",onClick:e[6]||(e[6]=c=>a.handleDelete(a.activeDirent.path))},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):a.canPreview?(openBlock(),createElementBlock(Fragment$1,{key:1},[createCommentVNode(" For other previewable files, only show preview and download button, hide other buttons in dropdown "),createVNode(a.Button,{variant:"outline",size:"sm",onClick:a.handleTogglePreview},{default:withCtx(()=>[createVNode(a.Eye,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.openPreview")),1)]),_:1}),createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[7]||(e[7]=c=>a.handleDownload(a.activeDirent.path))},{default:withCtx(()=>[createVNode(a.Download,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.download")),1)]),_:1}),createVNode(a.Button,{variant:"outline",size:"sm",onClick:e[8]||(e[8]=c=>a.handleInsertPathRef(a.activePathInfo.relativePath))},{default:withCtx(()=>[createVNode(a.Link2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"sm",class:"size-9 p-0"},{default:withCtx(()=>[createVNode(a.MoreHorizontal,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,null,{default:withCtx(()=>[createVNode(a.DropdownMenuItem,null,{default:withCtx(()=>[createVNode(a.Info,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.info")),1)]),_:1}),createVNode(a.DropdownMenuItem,{onClick:e[9]||(e[9]=c=>a.handleDownload(a.activeDirent.path))},{default:withCtx(()=>[createVNode(a.Link2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.reference")),1)]),_:1}),createVNode(a.DropdownMenuItem,{class:"!text-red-500",onClick:e[10]||(e[10]=c=>a.handleDelete(a.activeDirent.path))},{default:withCtx(()=>[createVNode(a.Trash2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.delete")),1)]),_:1})]),_:1})]),_:1})],64)):(openBlock(),createBlock(a.Button,{key:2,variant:"outline",size:"sm",onClick:e[11]||(e[11]=c=>a.handleInsertPathRef(a.activePathInfo.relativePath))},{default:withCtx(()=>[createVNode(a.Link2,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.attachmentsManager.previewPane.pathReference")),1)]),_:1}))])],64)):createCommentVNode("v-if",!0)])):createCommentVNode("v-if",!0)])}const PreviewPane=_export_sfc(_sfc_main$f,[["render",_sfc_render$f],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/attachments-mgr/PreviewPane.vue"]]),_sfc_main$e=defineComponent({__name:"AttachmentsManager",setup(o,{expose:e}){e();const{open:n,files:a,refetchFiles:s,fetchFilesStatus:l,uploadStatus:c,currentPathSegments:d,dbBasePath:u}=AttachmentsManagerContext.useContext(),f=ref([]);onMounted(async()=>{await fsEnsureAttachmentsDir({}),await s()});const v={open:n,files:a,refetchFiles:s,fetchFilesStatus:l,uploadStatus:c,currentPathSegments:d,dbBasePath:u,pendingFiles:f,get Dialog(){return Dialog},get DialogContent(){return DialogContent},get DialogHeader(){return DialogHeader},get DialogTitle(){return DialogTitle},FileTree,PreviewPane};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}});function _sfc_render$e(o,e,n,a,s,l){return openBlock(),createBlock(a.Dialog,{open:a.open,"onUpdate:open":e[0]||(e[0]=c=>a.open=c)},{default:withCtx(()=>[createVNode(a.DialogContent,{class:"flex flex-row max-w-[80vw] max-h-[80vh] w-[800px] h-[600px] p-0 !outline-none"},{default:withCtx(()=>[createVNode(a.DialogHeader,{class:"hidden"},{default:withCtx(()=>[createVNode(a.DialogTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.attachmentsManager.title")),1)]),_:1})]),_:1}),createCommentVNode(` <input type="file" @change="onFileChange" />
      <Button @click="handleSubmit">\u4E0A\u4F20</Button> `),createVNode(a.FileTree),createVNode(a.PreviewPane)]),_:1})]),_:1},8,["open"])}const AttachmentsManager=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/attachments-mgr/AttachmentsManager.vue"]]);(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top],.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left],.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height, 0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height, 0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]:after{content:"";position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]:after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]:after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]:after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]:after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@keyframes fake-animation{}@media (hover: hover) and (pointer: fine){[vaul-drawer]{-webkit-user-select:none;user-select:none}}')),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const et=o=>typeof o<"u";function tt(o){return JSON.parse(JSON.stringify(o))}function ye(o,e,n,a={}){var s,l,c;const{clone:d=!1,passive:u=!1,eventName:f,deep:v=!1,defaultValue:b,shouldEmit:k}=a,x=getCurrentInstance(),_=n||(x==null?void 0:x.emit)||((s=x==null?void 0:x.$emit)==null?void 0:s.bind(x))||((c=(l=x==null?void 0:x.proxy)==null?void 0:l.$emit)==null?void 0:c.bind(x==null?void 0:x.proxy));let E=f;e||(e="modelValue"),E=E||`update:${e.toString()}`;const B=F=>d?typeof d=="function"?d(F):tt(F):F,M=()=>et(o[e])?B(o[e]):b,I=F=>{k?k(F)&&_(E,F):_(E,F)};if(u){const F=M(),V=ref(F);let L=!1;return watch(()=>o[e],U=>{L||(L=!0,V.value=B(U),nextTick(()=>L=!1))}),watch(V,U=>{!L&&(U!==o[e]||v)&&I(U)},{deep:v}),V}else return computed({get(){return M()},set(F){I(F)}})}const[ve,nt]=Q$1("DrawerRoot"),Pe=new WeakMap;function $(o,e,n=!1){if(!o||!(o instanceof HTMLElement)||!e)return;const a={};Object.entries(e).forEach(([s,l])=>{if(s.startsWith("--")){o.style.setProperty(s,l);return}a[s]=o.style[s],o.style[s]=l}),!n&&Pe.set(o,a)}function ne(o,e){if(!o||!(o instanceof HTMLElement))return;const n=Pe.get(o);n&&(e?o.style[e]=n[e]:Object.entries(n).forEach(([a,s])=>{o.style[a]=s}))}function ae(o,e){const n=window.getComputedStyle(o),a=n.transform||n.webkitTransform||n.mozTransform;let s=a.match(/^matrix3d\((.+)\)$/);return s?Number.parseFloat(s[1].split(", ")[N(e)?13:12]):(s=a.match(/^matrix\((.+)\)$/),s?Number.parseFloat(s[1].split(", ")[N(e)?5:4]):null)}function at(o){return 8*(Math.log(o+1)-2)}function N(o){switch(o){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return o}}const g={DURATION:.5,EASE:[.32,.72,0,1]},Re=.4;function lt({activeSnapPoint:o,snapPoints:e,drawerRef:n,overlayRef:a,fadeFromIndex:s,onSnapPointChange:l,direction:c}){const d=computed(()=>(e.value&&o.value===e.value[e.value.length-1])??null),u=computed(()=>e.value&&e.value.length>0&&((s==null?void 0:s.value)||(s==null?void 0:s.value)===0)&&!Number.isNaN(s==null?void 0:s.value)&&e.value[(s==null?void 0:s.value)??-1]===o.value||!e.value),f=computed(()=>{var B;return((B=e.value)==null?void 0:B.findIndex(M=>M===o.value))??null}),v=computed(()=>{var B;return((B=e.value)==null?void 0:B.map(M=>{const I=typeof window<"u",F=typeof M=="string";let V=0;if(F&&(V=Number.parseInt(M,10)),N(c.value)){const U=F?V:I?M*window.innerHeight:0;return I?c.value==="bottom"?window.innerHeight-U:-window.innerHeight+U:U}const L=F?V:I?M*window.innerWidth:0;return I?c.value==="right"?window.innerWidth-L:-window.innerWidth+L:L}))??[]}),b=computed(()=>{var B;return f.value!==null?(B=v.value)==null?void 0:B[f.value]:null}),k=B=>{var M,I,F,V;const L=((M=v.value)==null?void 0:M.findIndex(U=>U===B))??null;nextTick(()=>{var U;l(L,v.value),$((U=n.value)==null?void 0:U.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(c.value)?`translate3d(0, ${B}px, 0)`:`translate3d(${B}px, 0, 0)`})}),v.value&&L!==v.value.length-1&&L!==(s==null?void 0:s.value)?$((I=a.value)==null?void 0:I.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"0"}):$((F=a.value)==null?void 0:F.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),o.value=L!==null?((V=e.value)==null?void 0:V[L])??null:null};watch([o,v,e],()=>{var B;if(o.value){const M=((B=e.value)==null?void 0:B.findIndex(I=>I===o.value))??-1;v.value&&M!==-1&&typeof v.value[M]=="number"&&k(v.value[M])}},{immediate:!0});function x({draggedDistance:B,closeDrawer:M,velocity:I,dismissible:F}){var V,L,U;if(s===void 0)return;const j=c.value==="bottom"||c.value==="right"?(b.value??0)-B:(b.value??0)+B,oe=f.value===(s.value??0)-1,Y=f.value===0,K=B>0;if(oe&&$((V=a.value)==null?void 0:V.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),I>2&&!K){F?M():k(v.value[0]);return}if(I>2&&K&&v&&e.value){k(v.value[e.value.length-1]);return}const W=(L=v.value)==null?void 0:L.reduce((ce,se)=>typeof ce!="number"||typeof se!="number"?ce:Math.abs(se-j)<Math.abs(ce-j)?se:ce),G=N(c.value)?window.innerHeight:window.innerWidth;if(I>Re&&Math.abs(B)<G*.4){const ce=K?1:-1;if(ce>0&&d){k(v.value[(((U=e.value)==null?void 0:U.length)??0)-1]);return}if(Y&&ce<0&&F&&M(),f.value===null)return;k(v.value[f.value+ce]);return}k(W)}function _({draggedDistance:B}){var M;if(b.value===null)return;const I=c.value==="bottom"||c.value==="right"?(b.value??0)-B:(b.value??0)+B;(c.value==="bottom"||c.value==="right")&&I<v.value[v.value.length-1]||(c.value==="top"||c.value==="left")&&I>v.value[v.value.length-1]||$((M=n.value)==null?void 0:M.$el,{transform:N(c.value)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`})}function E(B,M){if(!e||typeof f.value!="number"||!v.value||s===void 0)return null;const I=f.value===(s.value??0)-1;if(f.value>=(s.value??0)&&M)return 0;if(I&&!M)return 1;if(!u.value&&!I)return null;const F=I?f.value+1:f.value-1,V=I?v.value[F]-v.value[F-1]:v.value[F+1]-v.value[F],L=B/Math.abs(V);return I?1-L:L}return{isLastSnapPoint:d,shouldFade:u,getPercentageDragged:E,activeSnapPointIndex:f,onRelease:x,onDrag:_,snapPointsOffset:v}}let Q=null;function ot(o){const{isOpen:e,modal:n,nested:a,hasBeenOpened:s}=o,l=ref(typeof window<"u"?window.location.href:""),c=ref(0);function d(){if(Q===null&&e.value){Q={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height};const{scrollX:f,innerHeight:v}=window;document.body.style.position="fixed",document.body.style.top=`-${c.value}px`,document.body.style.left=`-${f}px`,document.body.style.right="0px",document.body.style.height="auto",setTimeout(()=>{requestAnimationFrame(()=>{const b=v-window.innerHeight;b&&c.value>=v&&(document.body.style.top=`-${c.value+b}px`)})},300)}}function u(){if(Q!==null){const f=-Number.parseInt(document.body.style.top,10),v=-Number.parseInt(document.body.style.left,10);Object.assign(document.body.style,Q),requestAnimationFrame(()=>{if(l.value!==window.location.href){l.value=window.location.href;return}window.scrollTo(v,f)}),Q=null}}return onMounted(()=>{function f(){c.value=window.scrollY}f(),window.addEventListener("scroll",f),onUnmounted(()=>{window.removeEventListener("scroll",f)})}),watch([e,s,l],()=>{a.value||!s.value||(e.value?(!window.matchMedia("(display-mode: standalone)").matches&&d(),n.value||setTimeout(()=>{u()},500)):u())}),{restorePositionSetting:u}}const it=.25,rt=100,De=8,q=16,ut=26,Se="vaul-dragging";function st(o,e){return o&&o.value?o:e}function ct(o){const{emitDrag:e,emitRelease:n,emitClose:a,emitOpenChange:s,open:l,dismissible:c,nested:d,fixed:u,modal:f,shouldScaleBackground:v,scrollLockTimeout:b,closeThreshold:k,activeSnapPoint:x,fadeFromIndex:_,direction:E}=o,B=ref(l.value??!1),M=ref(!1),I=ref(!1),F=ref(!1),V=ref(!1),L=ref(null),U=ref(null),j=ref(null),oe=ref(null),Y=ref(null),K=ref(!0),W=ref(null),G=ref(0),ce=ref(!1);ref(0);const se=ref(null);ref(0);const me=computed(()=>{var ke;return((ke=se.value)==null?void 0:ke.$el.getBoundingClientRect().height)||0}),ge=st(o.snapPoints,ref(void 0)),{activeSnapPointIndex:Te,onRelease:Be,snapPointsOffset:Ge,onDrag:We,shouldFade:Oe,getPercentageDragged:Ve}=lt({snapPoints:ge,activeSnapPoint:x,drawerRef:se,fadeFromIndex:_,overlayRef:L,onSnapPointChange:Xe,direction:E});function Xe(ke,_e){ge.value&&ke===_e.length-1&&(U.value=new Date)}const{restorePositionSetting:dt}=ot({isOpen:B,modal:f,nested:d,hasBeenOpened:M});function pt(){return(window.innerWidth-ut)/window.innerWidth}function ft(ke,_e){var te;if(!ke)return!1;let re=ke;const fe=(te=window.getSelection())==null?void 0:te.toString(),Ee=se.value?ae(se.value.$el,E.value):null,qe=new Date;if(re.hasAttribute("data-vaul-no-drag")||re.closest("[data-vaul-no-drag]"))return!1;if(E.value==="right"||E.value==="left")return!0;if(U.value&&qe.getTime()-U.value.getTime()<500)return!1;if(Ee!==null&&(E.value==="bottom"?Ee>0:Ee<0))return!0;if(fe&&fe.length>0)return!1;if(Y.value&&qe.getTime()-Y.value.getTime()<b.value&&Ee===0||_e)return Y.value=qe,!1;for(;re;){if(re.scrollHeight>re.clientHeight){if(re.scrollTop!==0)return Y.value=new Date,!1;if(re.getAttribute("role")==="dialog")return!0}re=re.parentNode}return!0}function Ce(ke){!c.value&&!ge.value||se.value&&!se.value.$el.contains(ke.target)||(F.value=!0,j.value=new Date,ke.target.setPointerCapture(ke.pointerId),G.value=N(E.value)?ke.clientY:ke.clientX)}function ze(ke){var _e,te,re,fe,Ee,qe;if(se.value&&F.value){const de=E.value==="bottom"||E.value==="right"?1:-1,Ne=(G.value-(N(E.value)?ke.clientY:ke.clientX))*de,ht=Ne>0,bt=ge.value&&!c.value&&!ht;if(bt&&Te.value===0)return;const St=Math.abs(Ne),xt=document.querySelector("[vaul-drawer-wrapper]");let Ct=St/me.value;const $t=Ve(St,ht);if($t!==null&&(Ct=$t),bt&&Ct>=1||!K.value&&!ft(ke.target,ht))return;if((_e=se==null?void 0:se.value)==null||_e.$el.classList.add(Se),K.value=!0,$((te=se.value)==null?void 0:te.$el,{transition:"none"}),$((re=L.value)==null?void 0:re.$el,{transition:"none"}),ge.value&&We({draggedDistance:Ne}),ht&&!ge.value){const Et=at(Ne),Kt=Math.min(Et*-1,0)*de;$((fe=se.value)==null?void 0:fe.$el,{transform:N(E.value)?`translate3d(0, ${Kt}px, 0)`:`translate3d(${Kt}px, 0, 0)`});return}const Dt=1-Ct;if((Oe.value||_.value&&Te.value===_.value-1)&&(e(Ct),$((Ee=L.value)==null?void 0:Ee.$el,{opacity:`${Dt}`,transition:"none"},!0)),xt&&L.value&&v.value){const Et=Math.min(pt()+Ct*(1-pt()),1),Kt=8-Ct*8,er=Math.max(0,14-Ct*14);$(xt,{borderRadius:`${Kt}px`,transform:N(E.value)?`scale(${Et}) translate3d(0, ${er}px, 0)`:`scale(${Et}) translate3d(${er}px, 0, 0)`,transition:"none"},!0)}if(!ge.value){const Et=St*de;$((qe=se.value)==null?void 0:qe.$el,{transform:N(E.value)?`translate3d(0, ${Et}px, 0)`:`translate3d(${Et}px, 0, 0)`})}}}function Ze(){var ke;if(!se.value)return;const _e=document.querySelector("[vaul-drawer-wrapper]"),te=ae(se.value.$el,E.value);$(se.value.$el,{transform:"translate3d(0, 0, 0)",transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ke=L.value)==null?void 0:ke.$el,{transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,opacity:"1"}),v.value&&te&&te>0&&B.value&&$(_e,{borderRadius:`${De}px`,overflow:"hidden",...N(E.value)?{transform:`scale(${pt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${pt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`},!0)}function pe(){var ke;se.value&&($(se.value.$el,{transform:N(E.value)?`translate3d(0, ${E.value==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${E.value==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),$((ke=L.value)==null?void 0:ke.$el,{opacity:"0",transition:`opacity ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`}),Z(!1),window.setTimeout(()=>{I.value=!1,B.value=!1},300),window.setTimeout(()=>{ge.value&&(x.value=ge.value[0])},g.DURATION*1e3))}watchEffect(()=>{if(!B.value&&v.value&&Fe){const ke=setTimeout(()=>{ne(document.body)},200);return()=>clearTimeout(ke)}}),onUnmounted(()=>{Z(!1),dt()});function ue(ke){if(!F.value||!se.value)return;se.value.$el.classList.remove(Se),K.value=!1,F.value=!1,oe.value=new Date;const _e=ae(se.value.$el,E.value);if(!ft(ke.target,!1)||!_e||Number.isNaN(_e)||j.value===null)return;const te=oe.value.getTime()-j.value.getTime(),re=G.value-(N(E.value)?ke.clientY:ke.clientX),fe=Math.abs(re)/te;if(fe>.05&&(V.value=!0,window.setTimeout(()=>{V.value=!1},200)),ge.value){const qe=E.value==="bottom"||E.value==="right"?1:-1;Be({draggedDistance:re*qe,closeDrawer:pe,velocity:fe,dismissible:c.value}),n(!0);return}if(E.value==="bottom"||E.value==="right"?re>0:re<0){Ze(),n(!0);return}if(fe>Re){pe(),n(!1);return}const Ee=Math.min(se.value.$el.getBoundingClientRect().height??0,window.innerHeight);if(_e>=Ee*k.value){pe(),n(!1);return}n(!0),Ze()}watch(B,ke=>{ke&&(U.value=new Date,Z(!0)),s(ke)},{immediate:!0}),watch(l,ke=>{ke?(B.value=ke,M.value=!0):pe()},{immediate:!0});function Z(ke){const _e=document.querySelector("[vaul-drawer-wrapper]");!_e||!v.value||(ke?($(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),$(document.body,{background:"black"},!0),$(_e,{borderRadius:`${De}px`,overflow:"hidden",...N(E.value)?{transform:`scale(${pt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${pt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})):(ne(_e,"overflow"),ne(_e,"transform"),ne(_e,"borderRadius"),$(_e,{transitionProperty:"transform, border-radius",transitionDuration:`${g.DURATION}s`,transitionTimingFunction:`cubic-bezier(${g.EASE.join(",")})`})))}function ee(ke){var _e,te;const re=ke?(window.innerWidth-q)/window.innerWidth:1,fe=ke?-16:0;W.value&&window.clearTimeout(W.value),$((_e=se.value)==null?void 0:_e.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:`scale(${re}) translate3d(0, ${fe}px, 0)`}),!ke&&(te=se.value)!=null&&te.$el&&(W.value=window.setTimeout(()=>{var Ee,qe;const de=ae((Ee=se.value)==null?void 0:Ee.$el,E.value);$((qe=se.value)==null?void 0:qe.$el,{transition:"none",transform:N(E.value)?`translate3d(0, ${de}px, 0)`:`translate3d(${de}px, 0, 0)`})},500))}function le(ke){var _e;if(ke<0)return;const te=N(E.value)?window.innerHeight:window.innerWidth,re=(te-q)/te,fe=re+ke*(1-re),Ee=-16+ke*q;$((_e=se.value)==null?void 0:_e.$el,{transform:N(E.value)?`scale(${fe}) translate3d(0, ${Ee}px, 0)`:`scale(${fe}) translate3d(${Ee}px, 0, 0)`,transition:"none"})}function we(ke){var _e;const te=N(E.value)?window.innerHeight:window.innerWidth,re=ke?(te-q)/te:1,fe=ke?-16:0;ke&&$((_e=se.value)==null?void 0:_e.$el,{transition:`transform ${g.DURATION}s cubic-bezier(${g.EASE.join(",")})`,transform:N(E.value)?`scale(${re}) translate3d(0, ${fe}px, 0)`:`scale(${re}) translate3d(${fe}px, 0, 0)`})}return{open:l,isOpen:B,modal:f,keyboardIsOpen:ce,hasBeenOpened:M,isVisible:I,drawerRef:se,drawerHeightRef:me,overlayRef:L,isDragging:F,dragStartTime:j,isAllowedToDrag:K,snapPoints:ge,activeSnapPoint:x,pointerStart:G,dismissible:c,snapPointsOffset:Ge,direction:E,shouldFade:Oe,fadeFromIndex:_,shouldScaleBackground:v,onPress:Ce,onDrag:ze,onRelease:ue,closeDrawer:pe,onNestedDrag:le,onNestedRelease:we,onNestedOpenChange:ee,emitClose:a,emitDrag:e,emitRelease:n,emitOpenChange:s,nested:d}}const vt=defineComponent({__name:"DrawerRoot",props:{activeSnapPoint:{default:void 0},closeThreshold:{default:it},shouldScaleBackground:{type:Boolean,default:void 0},scrollLockTimeout:{default:rt},fixed:{type:Boolean,default:void 0},dismissible:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},nested:{type:Boolean,default:!1},direction:{default:"bottom"},snapPoints:{default:void 0},fadeFromIndex:{default:void 0}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{expose:e,emit:n}){const a=o,s=n;useSlots();const l=computed(()=>a.fadeFromIndex??(a.snapPoints&&a.snapPoints.length-1)),c=ye(a,"open",s,{defaultValue:a.defaultOpen,passive:a.open===void 0}),d=ye(a,"activeSnapPoint",s,{passive:a.activeSnapPoint===void 0}),u={emitDrag:_=>s("drag",_),emitRelease:_=>s("release",_),emitClose:()=>s("close"),emitOpenChange:_=>{s("update:open",_)}},{closeDrawer:f,hasBeenOpened:v,modal:b,isOpen:k}=nt(ct({...u,...toRefs(a),activeSnapPoint:d,fadeFromIndex:l,open:c}));function x(_){if(c.value!==void 0){u.emitOpenChange(_);return}_?(v.value=!0,k.value=_):f()}return e({open:k}),(_,E)=>(openBlock(),createBlock(unref(eu),{open:unref(k),modal:unref(b),"onUpdate:open":x},{default:withCtx(()=>[renderSlot(_.$slots,"default",{open:unref(k)})]),_:3},8,["open","modal"]))}}),mt=defineComponent({__name:"DrawerOverlay",setup(o){const{overlayRef:e,snapPoints:n,isVisible:a,isOpen:s,shouldFade:l}=ve(),c=computed(()=>{var d;return n&&(((d=n.value)==null?void 0:d.length)??0)>0});return(d,u)=>(openBlock(),createBlock(unref(Eu),{ref_key:"overlayRef",ref:e,"vaul-drawer-visible":unref(a)?"true":"false","vaul-overlay":"","vaul-snap-points":unref(s)&&c.value?"true":"false","vaul-snap-points-overlay":unref(s)&&unref(l)?"true":"false"},null,8,["vaul-drawer-visible","vaul-snap-points","vaul-snap-points-overlay"]))}}),gt=defineComponent({__name:"DrawerContent",setup(o){const{open:e,isOpen:n,isVisible:a,snapPointsOffset:s,drawerRef:l,onPress:c,onDrag:d,onRelease:u,modal:f,emitOpenChange:v,dismissible:b,keyboardIsOpen:k,closeDrawer:x,direction:_}=ve(),E=computed(()=>s.value&&s.value.length>0?`${s.value[0]}px`:"0");function B(M){if(!f.value||M.defaultPrevented){M.preventDefault();return}k.value&&(k.value=!1),M.preventDefault(),b.value&&v(!1),!(!b.value||e.value!==void 0)&&x()}return watch(n,M=>{M&&setTimeout(()=>{a.value=!0},1)},{immediate:!0}),(M,I)=>(openBlock(),createBlock(unref(xu),{ref_key:"drawerRef",ref:l,"vaul-drawer":"","vaul-drawer-direction":unref(_),"vaul-drawer-visible":unref(a)?"true":"false",style:normalizeStyle({"--snap-point-height":E.value}),onPointerdown:unref(c),onPointermove:unref(d),onPointerup:unref(u),onPointerDownOutside:B,onEscapeKeyDown:I[0]||(I[0]=F=>{unref(b)||F.preventDefault()})},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["vaul-drawer-direction","vaul-drawer-visible","style","onPointerdown","onPointermove","onPointerup"]))}}),_sfc_main$d=defineComponent({__name:"Drawer",props:{activeSnapPoint:{type:[Number,String,null],required:!1},closeThreshold:{type:Number,required:!1},shouldScaleBackground:{type:Boolean,required:!1,default:!0},scrollLockTimeout:{type:Number,required:!1},fixed:{type:Boolean,required:!1},dismissible:{type:Boolean,required:!1},modal:{type:Boolean,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},nested:{type:Boolean,required:!1},direction:{type:String,required:!1},snapPoints:{type:Array,required:!1},fadeFromIndex:{type:null,required:!1}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get DrawerRoot(){return vt}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$d(o,e,n,a,s,l){return openBlock(),createBlock(a.DrawerRoot,normalizeProps(guardReactiveProps(a.forwarded)),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16)}const Drawer=_export_sfc(_sfc_main$d,[["render",_sfc_render$d],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/Drawer.vue"]]),_sfc_main$c=defineComponent({__name:"DrawerOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get DrawerOverlay(){return mt}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$c(o,e,n,a,s,l){return openBlock(),createBlock(a.DrawerOverlay,mergeProps(a.delegatedProps,{class:a.cn("fixed inset-0 z-50 bg-black/80",a.props.class)}),null,16,["class"])}const DrawerOverlay=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerOverlay.vue"]]),_sfc_main$b=defineComponent({__name:"DrawerContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{expose:e,emit:n}){e();const a=o,s=n,l=xe(a,s),c={props:a,emits:s,forwarded:l,get cn(){return cn},get DrawerContent(){return gt},get DrawerPortal(){return Dv},DrawerOverlay};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function _sfc_render$b(o,e,n,a,s,l){return openBlock(),createBlock(a.DrawerPortal,null,{default:withCtx(()=>[createVNode(a.DrawerOverlay),createVNode(a.DrawerContent,mergeProps(a.forwarded,{class:a.cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a.props.class)}),{default:withCtx(()=>[e[0]||(e[0]=createBaseVNode("div",{class:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"},null,-1)),renderSlot(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const DrawerContent=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerContent.vue"]]),_sfc_main$a=defineComponent({__name:"DrawerDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get DrawerDescription(){return Du}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$a(o,e,n,a,s,l){return openBlock(),createBlock(a.DrawerDescription,mergeProps(a.delegatedProps,{class:a.cn("text-sm text-muted-foreground",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DrawerDescription=_export_sfc(_sfc_main$a,[["render",_sfc_render$a],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerDescription.vue"]]),_sfc_main$9=defineComponent({__name:"DrawerFooter",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$9(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("mt-auto flex flex-col gap-2 p-4",a.props.class))},[renderSlot(o.$slots,"default")],2)}const DrawerFooter=_export_sfc(_sfc_main$9,[["render",_sfc_render$9],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerFooter.vue"]]),_sfc_main$8=defineComponent({__name:"DrawerHeader",props:{class:{type:null,required:!1}},setup(o,{expose:e}){e();const n={props:o,get cn(){return cn}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$8(o,e,n,a,s,l){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cn("grid gap-1.5 p-4 text-center sm:text-left",a.props.class))},[renderSlot(o.$slots,"default")],2)}const DrawerHeader=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerHeader.vue"]]),_sfc_main$7=defineComponent({__name:"DrawerTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:e}){e();const n=o,a=computed(()=>{const{class:l,...c}=n;return c}),s={props:n,delegatedProps:a,get cn(){return cn},get DrawerTitle(){return Pu}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function _sfc_render$7(o,e,n,a,s,l){return openBlock(),createBlock(a.DrawerTitle,mergeProps(a.delegatedProps,{class:a.cn("text-lg font-semibold leading-none tracking-tight",a.props.class)}),{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3},16,["class"])}const DrawerTitle=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/ui/drawer/DrawerTitle.vue"]]),_sfc_main$6=defineComponent({__name:"KeyBindings",setup(o,{expose:e}){e();const{openKeybindings:n}=KeymapContext.useContext(),{t:a}=useI18n(),s={[a("kbView.keybindings.groups.commands")]:[{key:"Alt/Option + \u2191",description:a("kbView.keybindings.commands.swapUp")},{key:"Alt/Option + \u2193",description:a("kbView.keybindings.commands.swapDown")},{key:"Command/Ctrl + \u2193",description:a("kbView.keybindings.commands.expand")},{key:"Command/Ctrl + \u2191",description:a("kbView.keybindings.commands.collapse")},{key:"Tab",description:a("kbView.keybindings.commands.indent")},{key:"Shift + Tab",description:a("kbView.keybindings.commands.outdent")},{key:"@",description:a("kbView.keybindings.commands.insertBlockRef")},{key:"#",description:a("kbView.keybindings.commands.insertTag")},{key:"Alt/Option + m",description:a("kbView.keybindings.commands.insertInlineMath")},{key:"Alt/Option + Shift + m",description:a("kbView.keybindings.commands.insertBlockMath")},{key:"Command/Ctrl + b",description:a("kbView.keybindings.commands.bold")},{key:"Command/Ctrl + i",description:a("kbView.keybindings.commands.italic")},{key:"Command/Ctrl + `",description:a("kbView.keybindings.commands.code")},{key:"Command/Ctrl + =",description:a("kbView.keybindings.commands.highlight")},{key:"```<language><space>",description:a("kbView.keybindings.commands.toCodeblock")},{key:"Command/Ctrl + z",description:a("kbView.keybindings.commands.undo")},{key:"Command/Ctrl + Shift + z",description:a("kbView.keybindings.commands.redo")},{key:"Shift + Enter",description:a("kbView.keybindings.commands.softBreak")},{key:"Command/Ctrl + p",description:a("kbView.keybindings.commands.openFusionCommand")},{key:"Command/Ctrl + k",description:a("kbView.keybindings.commands.addToSidePane")}]},l={openKeybindings:n,t:a,keyBindings:s,get Drawer(){return Drawer},get DrawerClose(){return Gl},get DrawerContent(){return DrawerContent},get DrawerDescription(){return DrawerDescription},get DrawerFooter(){return DrawerFooter},get DrawerHeader(){return DrawerHeader},get DrawerTitle(){return DrawerTitle},get DrawerTrigger(){return tu},get Button(){return Button}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),_hoisted_1$4={class:"p-4 space-y-4 max-h-[calc(90vh-150px)] overflow-y-auto"},_hoisted_2$2={class:"font-medium text-muted-foreground text-sm"},_hoisted_3$2={class:"space-y-1"},_hoisted_4$2={class:"px-2 py-1 bg-muted rounded"};function _sfc_render$6(o,e,n,a,s,l){return openBlock(),createBlock(a.Drawer,{open:a.openKeybindings,"onUpdate:open":e[0]||(e[0]=c=>a.openKeybindings=c)},{default:withCtx(()=>[createVNode(a.DrawerTrigger,null,{default:withCtx(()=>[renderSlot(o.$slots,"default")]),_:3}),createVNode(a.DrawerContent,null,{default:withCtx(()=>[createVNode(a.DrawerHeader,null,{default:withCtx(()=>[createVNode(a.DrawerTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.keybindings.title")),1)]),_:1}),createVNode(a.DrawerDescription,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.keybindings.description")),1)]),_:1})]),_:1}),createBaseVNode("div",_hoisted_1$4,[(openBlock(),createElementBlock(Fragment$1,null,renderList(a.keyBindings,(c,d)=>createBaseVNode("div",{key:d,class:"space-y-2"},[createBaseVNode("h3",_hoisted_2$2,toDisplayString$1(d),1),createBaseVNode("div",_hoisted_3$2,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(c,(u,f)=>(openBlock(),createElementBlock("div",{key:f,class:"flex justify-between items-center text-sm"},[createBaseVNode("span",null,toDisplayString$1(u.description),1),createBaseVNode("kbd",_hoisted_4$2,toDisplayString$1(u.key),1)]))),128))])])),64))]),createVNode(a.DrawerFooter,null,{default:withCtx(()=>[createVNode(a.DrawerClose,{asChild:""},{default:withCtx(()=>[createVNode(a.Button,{variant:"ghost"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("kbView.keybindings.close")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["open"])}const KeyBindings=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/components/keybindings/KeyBindings.vue"]]),_sfc_main$5=defineComponent({__name:"KbViewContent",setup(o,{expose:e}){e();const{sidePaneOpen:n,sidePaneDir:a,sidePaneWidth:s,sidePaneHeight:l,enableSidePaneAnimation:c}=SidebarContext.useContext(),{synced:d,blocksManager:u}=BlocksContext.useContext(),{mainRootBlockId:f}=MainTreeContext.useContext(),v=u.getBlockRef("root"),{openCreateNewTreeDialog:b,closeCreateNewTreeDialog:k}=createCreateNewTreeDialogContext.useContext();watch(d,(_,E)=>{!E&&_&&(u.getRootBlockRef().value==null?u.createNewTree():u.createBlockTransaction({type:"ui"}).commit())});const x={sidePaneOpen:n,sidePaneDir:a,sidePaneWidth:s,sidePaneHeight:l,enableSidePaneAnimation:c,synced:d,blocksManager:u,mainRootBlockId:f,rootBlockRef:v,openCreateNewTreeDialog:b,closeCreateNewTreeDialog:k,handleCloseR:(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},handleOpenR:(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:0,transform:"translateX(100%)"},{opacity:1,transform:"translateX(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},handleCloseB:(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(100%)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},handleOpenB:(_,E)=>{if(!(_ instanceof HTMLElement))return;const B=_.animate([{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});B.onfinish=()=>{E()}},TimeMachine,BlockMover,BlockTree,Exporter,FieldValueInspector,FloatingEditor,PasteDialog,RefSuggestions,SettingsPanel,get Loader2(){return LoaderCircle},FloatingMathInput,FusionCommand,HeaderBar,SidePane,AttachmentsManager,KeyBindings,BlockContextMenu};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}});function _sfc_render$5(o,e,n,a,s,l){return openBlock(),createElementBlock(Fragment$1,null,[createCommentVNode(" \u5934\u90E8\u680F "),createVNode(a.HeaderBar),createCommentVNode(" mr-1 \u662F\u4E3A\u4E86\u8BA9\u6EDA\u52A8\u6761\u548C\u5C4F\u5E55\u8FB9\u7F18\u7559\u51FA\u4E00\u70B9\u7A7A\u9699 "),a.synced&&a.rootBlockRef?(openBlock(),createBlock(a.BlockTree,{key:0,class:"h-[100vh] mr-1",id:"main",style:normalizeStyle({paddingRight:a.sidePaneOpen&&a.sidePaneDir==="right"?`${a.sidePaneWidth}px`:"0px",paddingBottom:a.sidePaneOpen&&a.sidePaneDir==="bottom"?`${a.sidePaneHeight}px`:"0px",transition:a.enableSidePaneAnimation?"padding 500ms var(--tf)":"none"}),"root-block-ids":[a.mainRootBlockId],"root-block-level":0,"padding-top":60,"enlarge-root-block":!0},null,8,["style","root-block-ids"])):(openBlock(),createElementBlock("div",{key:1,class:"h-[100vh] mr-1 flex justify-center items-center text-muted-foreground",style:normalizeStyle({paddingRight:a.sidePaneOpen&&a.sidePaneDir==="right"?`${a.sidePaneWidth}px`:"0px",paddingBottom:a.sidePaneOpen&&a.sidePaneDir==="bottom"?`${a.sidePaneHeight}px`:"0px",transition:a.enableSidePaneAnimation?"padding 500ms var(--tf)":"none"})},[createVNode(a.Loader2,{class:"animate-spin mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t("kbView.loadingKb")),1)],4)),createCommentVNode(" \u53F3\u4FA7\u4FA7\u8FB9\u680F "),createVNode(Transition,{onLeave:a.handleCloseR,onEnter:a.handleOpenR},{default:withCtx(()=>[a.sidePaneOpen&&a.sidePaneDir==="right"?(openBlock(),createBlock(a.SidePane,{key:0,class:"absolute right-0 top-0 h-full border-l",style:normalizeStyle({width:`${a.sidePaneWidth}px`})},null,8,["style"])):createCommentVNode("v-if",!0)]),_:1}),createCommentVNode(" \u5E95\u90E8\u4FA7\u8FB9\u680F "),createVNode(Transition,{onLeave:a.handleCloseB,onEnter:a.handleOpenB},{default:withCtx(()=>[a.sidePaneOpen&&a.sidePaneDir==="bottom"?(openBlock(),createBlock(a.SidePane,{key:0,class:"absolute bottom-0 left-0 w-[100vw] border-t",style:normalizeStyle({height:`${a.sidePaneHeight}px`})},null,8,["style"])):createCommentVNode("v-if",!0)]),_:1}),createCommentVNode(" \u83DC\u5355\u680F "),createCommentVNode(" <MenuPane /> "),createCommentVNode(" \u6D6E\u52A8\u6570\u5B66\u8F93\u5165\u6846 "),createVNode(a.FloatingMathInput),createCommentVNode(" \u878D\u5408\u547D\u4EE4 "),createVNode(a.FusionCommand),createCommentVNode(" \u65F6\u5149\u673A "),createVNode(a.TimeMachine),createVNode(a.RefSuggestions),createCommentVNode(" \u9644\u4EF6\u7BA1\u7406\u5668 "),createVNode(a.AttachmentsManager),createCommentVNode(" \u8BBE\u7F6E\u9762\u677F "),createVNode(a.SettingsPanel),createCommentVNode(" \u5757\u79FB\u52A8 popover "),createVNode(a.BlockMover),createCommentVNode(" \u7C98\u8D34\u5BF9\u8BDD\u6846 "),createVNode(a.PasteDialog),createCommentVNode(" \u6D6E\u52A8\u7F16\u8F91\u5668 "),createVNode(a.FloatingEditor),createCommentVNode(" \u5BFC\u51FA\u5668 "),createVNode(a.Exporter),createCommentVNode(" \u5C5E\u6027\u68C0\u89C6\u5668 "),createVNode(a.FieldValueInspector),createCommentVNode(" <ImageEditor /> "),createCommentVNode(" keybinding \u5C55\u793A "),createVNode(a.KeyBindings),createCommentVNode(" \u5757\u4E0A\u4E0B\u6587\u83DC\u5355 "),createVNode(a.BlockContextMenu)],64)}const KbViewContent=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/kb-view/KbViewContent.vue"]]),ImageEditorContext=createContext(()=>{const o=ref(!0),e=ref("https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg"),n=ref(!1);return{open:o,imageUrl:e,deleteOriginal:n}}),MenubarContext=createContext(()=>({menuPaneOpen:ref(!1)})),_sfc_main$4=defineComponent({__name:"KbView",setup(o,{expose:e}){e();const n={get BlocksContext(){return BlocksContext},get BlockTreeContext(){return BlockTreeContext},get FocusModeContext(){return FocusModeContext},get FusionCommandContext(){return FusionCommandContext},get KeymapContext(){return KeymapContext},get LastFocusContext(){return LastFocusContext},get SidebarContext(){return SidebarContext},get TimeMachineContext(){return TimeMachineContext},get FloatingMathInputContext(){return FloatingMathInputContext},KbViewContent,get RefSuggestionsContext(){return RefSuggestionsContext},get AttachmentsManagerContext(){return AttachmentsManagerContext},get ImagesContext(){return ImagesContext},get PathsContext(){return PathsContext},get MainTreeContext(){return MainTreeContext},get BlockSelectDragContext(){return BlockSelectDragContext},get SettingsContext(){return SettingsContext},get SettingsPanelContext(){return SettingsPanelContext},get BlockMoverContext(){return BlockMoverContext},get FavoriteContext(){return FavoriteContext},get IndexContext(){return IndexContext},get BasicSettingsContext(){return BasicSettingsContext},get FieldsManagerContext(){return FieldsManagerContext},get BacklinksContext(){return BacklinksContext},get PasteDialogContext(){return PasteDialogContext},get CreateNewTreeDialogContext(){return createCreateNewTreeDialogContext},get FloatingEditorContext(){return FloatingEditorContext},get ExporterContext(){return ExporterContext},get FieldValueInspectorContext(){return FieldValueInspectorContext},get DailyNoteContext(){return DailyNoteContext},get ImageEditorContext(){return ImageEditorContext},get HistoryContext(){return HistoryContext},get MenubarContext(){return MenubarContext},get kbViewRegistry(){return kbViewRegistry},get BlockContextMenuContext(){return BlockContextMenuContext},get CommandsContext(){return CommandsContext}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _sfc_render$4(o,e,n,a,s,l){return openBlock(),createBlock(a.kbViewRegistry.Provider,null,{default:withCtx(()=>[createVNode(a.MainTreeContext.Provider,null,{default:withCtx(()=>[createVNode(a.MenubarContext.Provider,null,{default:withCtx(()=>[createVNode(a.ImageEditorContext.Provider,null,{default:withCtx(()=>[createVNode(a.SettingsContext.Provider,null,{default:withCtx(()=>[createVNode(a.BasicSettingsContext.Provider,null,{default:withCtx(()=>[createVNode(a.PathsContext.Provider,null,{default:withCtx(()=>[createVNode(a.TimeMachineContext.Provider,null,{default:withCtx(()=>[createVNode(a.BlockTreeContext.Provider,null,{default:withCtx(()=>[createVNode(a.PasteDialogContext.Provider,null,{default:withCtx(()=>[createVNode(a.FocusModeContext.Provider,null,{default:withCtx(()=>[createVNode(a.TimeMachineContext.Provider,null,{default:withCtx(()=>[createVNode(a.FloatingMathInputContext.Provider,null,{default:withCtx(()=>[createVNode(a.LastFocusContext.Provider,null,{default:withCtx(()=>[createVNode(a.BlocksContext.Provider,null,{default:withCtx(()=>[createVNode(a.ExporterContext.Provider,null,{default:withCtx(()=>[createVNode(a.CreateNewTreeDialogContext.Provider,null,{default:withCtx(()=>[createVNode(a.IndexContext.Provider,null,{default:withCtx(()=>[createVNode(a.AttachmentsManagerContext.Provider,null,{default:withCtx(()=>[createVNode(a.ImagesContext.Provider,null,{default:withCtx(()=>[createVNode(a.SidebarContext.Provider,null,{default:withCtx(()=>[createVNode(a.RefSuggestionsContext.Provider,null,{default:withCtx(()=>[createVNode(a.BlockMoverContext.Provider,null,{default:withCtx(()=>[createVNode(a.HistoryContext.Provider,null,{default:withCtx(()=>[createVNode(a.BlockSelectDragContext.Provider,null,{default:withCtx(()=>[createVNode(a.SettingsPanelContext.Provider,null,{default:withCtx(()=>[createVNode(a.FavoriteContext.Provider,null,{default:withCtx(()=>[createVNode(a.FieldsManagerContext.Provider,null,{default:withCtx(()=>[createVNode(a.BacklinksContext.Provider,null,{default:withCtx(()=>[createVNode(a.FloatingEditorContext.Provider,null,{default:withCtx(()=>[createVNode(a.FieldValueInspectorContext.Provider,null,{default:withCtx(()=>[createVNode(a.DailyNoteContext.Provider,null,{default:withCtx(()=>[createVNode(a.FusionCommandContext.Provider,null,{default:withCtx(()=>[createVNode(a.CommandsContext.Provider,null,{default:withCtx(()=>[createVNode(a.KeymapContext.Provider,null,{default:withCtx(()=>[createVNode(a.BlockContextMenuContext.Provider,null,{default:withCtx(()=>[createVNode(a.KbViewContent)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const KbView=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/kb-view/KbView.vue"]]),AdminLoginSchema={request:z.object({serverUrl:z.string(),password:z.string()}),result:z.object({token:z.string()})},KbEditorLoginSchema={request:z.object({serverUrl:z.string(),location:z.string(),password:z.string()}),result:z.object({token:z.string()})},adminLogin=usePostApi("/login/admin",AdminLoginSchema.request,AdminLoginSchema.result),kbEditorLogin=usePostApi("/login/kb-editor",KbEditorLoginSchema.request,KbEditorLoginSchema.result),normalizeServerUrl=o=>!o.startsWith("http://")&&!o.startsWith("https://")?`https://${o}`:o,_sfc_main$3=defineComponent({__name:"AdminLoginView",setup(o,{expose:e}){e();const{serverUrl:n,buildAdminTokenKey:a}=ServerInfoContext.useContext(),s=ref(""),l=ref(""),{t:c}=useI18n(),d=ref("idle"),u=computed(()=>["idle","loggingIn","loginSuccess"].includes(d.value)?null:c(`login.adminLogin.errMsg.${d.value}`));watch(s,v=>{n.value=normalizeServerUrl(v)});const f={serverUrl:n,buildTokenKey:a,serverUrlInputText:s,passwordInputText:l,t:c,loginStatus:d,errMsg:u,login:async()=>{d.value="loggingIn";const v=n.value,b=z.string().url().safeParse(v);if(!b.success){console.log("URL \u683C\u5F0F\u4E0D\u6B63\u786E, err=",b.error),d.value="invalidServerUrl";return}const[k]=await Promise.all([adminLogin({serverUrl:v,password:l.value}),timeout(2e3)]);if(k.success){d.value="loginSuccess";const x=a(n.value);localStorage.setItem(x,k.data.token),console.log("tokenKey",x,k.data.token,localStorage.getItem(x)),setTimeout(()=>{const _=encodeURIComponent(v);router.push(`/admin-dashboard/${_}`)},2e3)}else k.code===RESP_CODES.PASSWORD_INCORRECT?d.value="invalidPassword":k.code===RESP_CODES.EXCEED_MAX_ATTEMPTS?d.value="maxAttempts":d.value="cannotConnectToServer"},get Button(){return Button},get Card(){return Card},get CardContent(){return CardContent},get CardDescription(){return CardDescription},get CardFooter(){return CardFooter},get CardHeader(){return CardHeader},get CardTitle(){return CardTitle},get Input(){return Input},get Label(){return Label},get X(){return X},get Loader2(){return LoaderCircle},get Check(){return Check},get Globe(){return Globe},get DropdownMenu(){return DropdownMenu},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuItem(){return DropdownMenuItem},get DropdownMenuTrigger(){return DropdownMenuTrigger}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),_hoisted_1$3={class:"grid items-center w-full gap-4"},_hoisted_2$1={class:"flex flex-col space-y-3"},_hoisted_3$1={class:"flex flex-col space-y-2"},_hoisted_4$1={key:0,class:"text-red-500 flex items-center text-sm mt-2"};function _sfc_render$3(o,e,n,a,s,l){const c=resolveComponent("router-link");return openBlock(),createBlock(a.Card,{class:"w-[400px]"},{default:withCtx(()=>[createVNode(a.CardHeader,null,{default:withCtx(()=>[createVNode(a.CardTitle,{class:"flex items-center justify-between"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.adminLogin.title"))+" ",1),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"icon"},{default:withCtx(()=>[createVNode(a.Globe,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(o.$i18n.availableLocales,d=>(openBlock(),createBlock(a.DropdownMenuItem,{key:d,onClick:u=>o.$i18n.locale=d},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t(`languages.${d}`)),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(a.CardDescription)]),_:1}),createVNode(a.CardContent,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$1,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.adminLogin.serverUrlLabel")),1)]),_:1}),createVNode(a.Input,{modelValue:a.serverUrlInputText,"onUpdate:modelValue":e[0]||(e[0]=d=>a.serverUrlInputText=d),placeholder:o.$t("login.adminLogin.serverUrlPlaceholder")},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_3$1,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.adminLogin.passwordLabel")),1)]),_:1}),createVNode(a.Input,{modelValue:a.passwordInputText,"onUpdate:modelValue":e[1]||(e[1]=d=>a.passwordInputText=d),type:"password"},null,8,["modelValue"])])]),a.errMsg?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(a.X,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(a.errMsg),1)])):createCommentVNode("v-if",!0)]),_:1}),createVNode(a.CardFooter,{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(c,{to:"/login/kb-editor",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.adminLogin.kbEditorLoginBtn")),1)]),_:1}),createVNode(a.Button,{class:"min-w-[100px]",onClick:a.login,disabled:a.loginStatus==="loggingIn"},{default:withCtx(()=>[a.loginStatus==="loggingIn"?(openBlock(),createBlock(a.Loader2,{key:0,class:"size-4 mr-2 animate-spin"})):a.loginStatus==="loginSuccess"?(openBlock(),createBlock(a.Check,{key:1,class:"size-4 mr-2"})):a.loginStatus!=="idle"?(openBlock(),createBlock(a.X,{key:2,class:"size-4 mr-2"})):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(o.$t(`login.adminLogin.loginBtn.${a.loginStatus}`)??o.$t("login.adminLogin.loginBtn.loginFailed")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}const AdminLoginView=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/login-view/AdminLoginView.vue"]]),_sfc_main$2=defineComponent({__name:"KbEditorLoginView",setup(o,{expose:e}){e();const{serverUrl:n,buildKbEditorTokenKey:a}=ServerInfoContext.useContext(),s=ref(""),l=ref(""),c=ref(void 0),{kbs:d,refreshKbList:u}=KbInfoContext.useContext(),f=ref("invalidURL"),v=ref("idle"),{toast:b}=useToast();watch(s,E=>{n.value=normalizeServerUrl(E)});const k=useDebounceFn(async()=>{const E=n.value;if(!z.string().url().safeParse(n.value).success){console.log("URL \u683C\u5F0F\u4E0D\u6B63\u786E"),f.value="invalidURL";return}f.value="connecting";const B=await ping({});E===n.value&&(B.success?(f.value="connSuccess",x()):f.value="connFailed")}),x=(E=!1)=>{const B=n.value;u(B,()=>{if(B===n.value&&(Object.keys(d.value).length>0?c.value=Object.keys(d.value)[0]:f.value="noKbServer",E)){const M=Object.keys(d.value).length;b({title:"\u5237\u65B0\u77E5\u8BC6\u5E93\u5217\u8868\u6210\u529F",description:`\u670D\u52A1\u5668 ${n.value} \u4E0A\u6709 ${M} \u4E2A\u77E5\u8BC6\u5E93`})}},()=>{f.value="connFailed"})},_={serverUrl:n,buildTokenKey:a,serverUrlInputText:s,passwordInputText:l,selectedKbLocation:c,kbs:d,refreshKbList:u,serverStatus:f,loginStatus:v,toast:b,testConn:k,handleRefreshKbList:x,login:async()=>{if(!c.value)return;v.value="loggingIn";const E=await kbEditorLogin({location:c.value,password:l.value,serverUrl:n.value});if(E.success){v.value="loginSuccess";const B=a(n.value,c.value);localStorage.setItem(B,E.data.token),console.log("tokenKey",B,E.data.token,localStorage.getItem(B)),setTimeout(()=>{const M=encodeURIComponent(n.value),I=encodeURIComponent(c.value);router.push(`/kb/${M}/${I}`)},1e3)}else v.value=E.code===RESP_CODES.PASSWORD_INCORRECT?"loginFailed_InvalidPassword":"loginFailed_Unknown"},get Button(){return Button},get Card(){return Card},get CardContent(){return CardContent},get CardDescription(){return CardDescription},get CardFooter(){return CardFooter},get CardHeader(){return CardHeader},get CardTitle(){return CardTitle},get DropdownMenu(){return DropdownMenu},get DropdownMenuCheckboxItem(){return DropdownMenuCheckboxItem},get DropdownMenuContent(){return DropdownMenuContent},get DropdownMenuTrigger(){return DropdownMenuTrigger},get Input(){return Input},get Label(){return Label},get Select(){return Select},get SelectContent(){return SelectContent},get SelectItem(){return SelectItem},get SelectTrigger(){return SelectTrigger},get Check(){return Check},get CircleCheck(){return CircleCheck},get Globe(){return Globe},get Loader2(){return LoaderCircle},get LoaderCircle(){return LoaderCircle},get RefreshCcw(){return RefreshCcw},get X(){return X}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),_hoisted_1$2={class:"grid items-center w-full gap-4"},_hoisted_2={class:"flex flex-col space-y-3"},_hoisted_3={class:"relative"},_hoisted_4={class:"absolute right-3 top-3"},_hoisted_5={key:0,class:"flex items-center text-red-500 text-sm"},_hoisted_6=["innerHTML"],_hoisted_7={class:"flex flex-col space-y-2"},_hoisted_8={class:"flex items-center gap-2"},_hoisted_9={class:"text-xs text-gray-500"},_hoisted_10={class:"flex flex-col space-y-2"},_hoisted_11={key:0,class:"text-red-500 text-sm flex items-center"};function _sfc_render$2(o,e,n,a,s,l){const c=resolveComponent("router-link");return openBlock(),createBlock(a.Card,{class:"w-[400px] z-10"},{default:withCtx(()=>[createVNode(a.CardHeader,null,{default:withCtx(()=>[createVNode(a.CardTitle,{class:"flex items-center justify-between"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.kbEditorLogin.title"))+" ",1),createVNode(a.DropdownMenu,null,{default:withCtx(()=>[createVNode(a.DropdownMenuTrigger,{"as-child":""},{default:withCtx(()=>[createVNode(a.Button,{variant:"outline",size:"icon"},{default:withCtx(()=>[createVNode(a.Globe,{class:"size-4"})]),_:1})]),_:1}),createVNode(a.DropdownMenuContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(o.$i18n.availableLocales,d=>(openBlock(),createBlock(a.DropdownMenuCheckboxItem,{key:d,checked:o.$i18n.locale===d,onClick:u=>o.$i18n.locale=d},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t(`languages.${d}`)),1)]),_:2},1032,["checked","onClick"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(a.CardDescription)]),_:1}),createVNode(a.CardContent,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.kbEditorLogin.serverUrlLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_3,[createVNode(a.Input,{modelValue:a.serverUrlInputText,"onUpdate:modelValue":e[0]||(e[0]=d=>a.serverUrlInputText=d),placeholder:o.$t("login.kbEditorLogin.serverUrlPlaceholder"),onInput:a.testConn},null,8,["modelValue","placeholder","onInput"]),createBaseVNode("div",_hoisted_4,[["connSuccess","noKbServer"].includes(a.serverStatus)?(openBlock(),createBlock(a.CircleCheck,{key:0,class:"size-4 text-green-600"})):a.serverStatus==="connecting"?(openBlock(),createBlock(a.LoaderCircle,{key:1,class:"size-4 animate-spin text-gray-500"})):createCommentVNode("v-if",!0)])]),a.serverUrl.length>0&&!["connSuccess","connecting","noKbServer"].includes(a.serverStatus)?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(a.X,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t(`login.kbEditorLogin.serverStatus.${a.serverStatus}`)),1)])):createCommentVNode("v-if",!0),a.serverStatus==="noKbServer"?(openBlock(),createElementBlock("span",{key:1,class:"text-blue-500 text-sm",innerHTML:o.$t("login.kbEditorLogin.noKbServerMsg")},null,8,_hoisted_6)):createCommentVNode("v-if",!0)]),createBaseVNode("div",_hoisted_7,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.kbEditorLogin.kbLocationLabel")),1)]),_:1}),createBaseVNode("div",_hoisted_8,[createVNode(a.Select,{disabled:a.serverStatus!=="connSuccess","model-value":a.selectedKbLocation,"onUpdate:modelValue":e[1]||(e[1]=d=>a.selectedKbLocation=d)},{default:withCtx(()=>[createVNode(a.SelectTrigger,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(a.selectedKbLocation?a.kbs[a.selectedKbLocation].name:"-"),1)]),_:1}),createVNode(a.SelectContent,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(Object.values(a.kbs),d=>(openBlock(),createBlock(a.SelectItem,{key:d.location,value:d.location},{default:withCtx(()=>[createBaseVNode("div",null,[createTextVNode(toDisplayString$1(d.name)+" ",1),createBaseVNode("div",_hoisted_9,toDisplayString$1(d.location),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["disabled","model-value"]),createVNode(a.Button,{variant:"outline",disabled:a.serverStatus!=="connSuccess",onClick:e[2]||(e[2]=d=>a.handleRefreshKbList(!0)),class:"size-10 p-2",tooltip:o.$t("login.kbEditorLogin.refreshKbListTooltip")},{default:withCtx(()=>[createVNode(a.RefreshCcw,{class:"size-4"})]),_:1},8,["disabled","tooltip"])])]),createBaseVNode("div",_hoisted_10,[createVNode(a.Label,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.kbEditorLogin.passwordLabel")),1)]),_:1}),createVNode(a.Input,{modelValue:a.passwordInputText,"onUpdate:modelValue":e[3]||(e[3]=d=>a.passwordInputText=d),type:"password",disabled:a.serverStatus!=="connSuccess"||!a.selectedKbLocation,onInput:e[4]||(e[4]=d=>a.loginStatus="idle")},null,8,["modelValue","disabled"]),a.loginStatus==="loginFailed_InvalidPassword"||a.loginStatus==="loginFailed_Unknown"?(openBlock(),createElementBlock("div",_hoisted_11,[createVNode(a.X,{class:"size-4 mr-2"}),createTextVNode(" "+toDisplayString$1(o.$t(`login.kbEditorLogin.loginStatus.${a.loginStatus}`)),1)])):createCommentVNode("v-if",!0)])])]),_:1}),createVNode(a.CardFooter,{class:"flex justify-center gap-8"},{default:withCtx(()=>[createVNode(c,{to:"/login/admin",class:"text-sm text-muted-foreground hover:text-foreground transition-colors duration-300"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(o.$t("login.kbEditorLogin.adminLoginBtn")),1)]),_:1}),createVNode(a.Button,{class:"min-w-[100px]",onClick:a.login,disabled:a.serverStatus!=="connSuccess"||!a.selectedKbLocation},{default:withCtx(()=>[a.loginStatus==="loggingIn"?(openBlock(),createBlock(a.Loader2,{key:0,class:"size-4 mr-2 animate-spin"})):a.loginStatus==="loginSuccess"?(openBlock(),createBlock(a.Check,{key:1,class:"size-4 mr-2"})):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(o.$t(`login.kbEditorLogin.loginBtn.${a.loginStatus}`)),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}const KbEditorLoginView=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/login-view/KbEditorLoginView.vue"]]),_sfc_main$1={},_hoisted_1$1={class:"absolute w-full h-full flex items-center justify-center"};function _sfc_render$1(o,e){const n=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(n)])}const LoginView=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/login-view/LoginView.vue"]]),router=createRouter({history:createWebHashHistory(),routes:[{path:"/",redirect:"/login/kb-editor"},{path:"/login",component:LoginView,children:[{path:"kb-editor",component:KbEditorLoginView},{path:"admin",component:AdminLoginView}]},{path:"/admin-dashboard/:serverUrl",component:AdminDashboard,beforeEnter:(o,e,n)=>{const{extractTokenPayload:a,buildAdminTokenKey:s,logout:l}=globalThis.getServerInfoContext(),c=o.params.serverUrl,d=s(c),u=localStorage.getItem(d),f=u?a(u):null;!f||f.role!=="admin"||f.serverUrl!==c?(l(),n({path:"/login/admin"})):n()}},{path:"/kb/:serverUrl/:location/:rootBlockId?/:focusedBlockId?",component:KbView,beforeEnter:(o,e,n)=>{const{extractTokenPayload:a,buildKbEditorTokenKey:s,logout:l}=globalThis.getServerInfoContext(),c=o.params.serverUrl,d=o.params.location,u=s(c,d),f=localStorage.getItem(u),v=f?a(f):null;!v||v.role!=="kb-editor"||v.serverUrl!==c||v.location!==d?(l(),n({path:"/login/kb-editor"})):n()}}]}),_sfc_main=defineComponent({__name:"App",setup(o,{expose:e}){e();const n={get TooltipProvider(){return TooltipProvider},get Toaster(){return Toaster},get ThemeProvider(){return ThemeContext},get ServerInfoContext(){return ServerInfoContext},get KbInfoContext(){return KbInfoContext}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_hoisted_1={class:"h-[100vh] w-[100vw]"};function _sfc_render(o,e,n,a,s,l){const c=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(a.TooltipProvider,null,{default:withCtx(()=>[createVNode(a.ThemeProvider.Provider,null,{default:withCtx(()=>[createVNode(a.ServerInfoContext.Provider,null,{default:withCtx(()=>[createVNode(a.KbInfoContext.Provider,null,{default:withCtx(()=>[createVNode(c),createVNode(a.Toaster)]),_:1})]),_:1})]),_:1})]),_:1})])}const App=_export_sfc(_sfc_main,[["render",_sfc_render],["__file","/home/runner/work/next-outliner-frontend2/next-outliner-frontend2/src/views/App.vue"]]),startApp=async()=>{const o=createI18n({legacy:!1,locale:localStorage.getItem("locale")??"en_US",fallbackLocale:"en_US",messages});watch(o.global.locale,n=>{localStorage.setItem("locale",n)});const e=createApp(App);e.use(o),e.use(router),e.use(eventbusPlugin),e.use(taskQueuePlugin),e.mount("#app")};document.addEventListener("DOMContentLoaded",startApp)})();export{languageDataProp as A,foldService as B,CompletionContext as C,LanguageDescription as D,EditorView as E,ParseContext as F,bracketMatchingHandle as G,DefaultBufferLength as H,IterMode as I,sublanguageProp as J,LRLanguage as L,NodeWeakMap as N,Parser$1 as P,Tag as T,__tla,LanguageSupport as a,ifNotIn as b,continuedIndent as c,completeFromList as d,syntaxTree as e,foldNodeProp as f,flatIndent as g,delimitedIndent as h,indentNodeProp as i,foldInside as j,snippetCompletion as k,EditorSelection as l,NodeType as m,NodeProp as n,NodeSet as o,parseMixed as p,Tree as q,countColumn as r,styleTags as s,tags as t,Prec as u,keymap as v,EditorState as w,Language as x,indentUnit as y,defineLanguageFacet as z};
